

int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r8@1
  int v3; // r5@1
  int v4; // r0@1
  int v5; // r1@1
  int v6; // r2@1
  int v7; // r3@1
  int v8; // r4@1
  int v9; // r3@1
  int v10; // r4@1
  int v11; // r6@1
  int v12; // r1@1
  int v13; // r3@1
  int v14; // r4@1
  int v15; // r6@1
  int v16; // r7@1
  int v17; // r1@1
  int v18; // r3@1
  int v19; // r4@1
  int v20; // r6@1
  int v21; // r7@1
  int v22; // r1@1
  int v23; // r3@1
  int v24; // r4@1
  int v25; // r6@1
  int v26; // r7@1
  int v27; // r3@1
  int v28; // r1@1
  int v29; // r2@1
  int v30; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v32; // r0@8
  int v33; // r1@12
  int v34; // r4@13

  v2 = a1;
  v3 = a2;
  v4 = a1 + 80;
  v6 = *(_DWORD *)a2;
  v7 = *(_DWORD *)(a2 + 4);
  v8 = *(_DWORD *)(a2 + 8);
  v5 = a2 + 12;
  *(_DWORD *)v4 = v6;
  *(_DWORD *)(v4 + 4) = v7;
  *(_DWORD *)(v4 + 8) = v8;
  v4 += 12;
  v9 = *(_DWORD *)(v5 + 4);
  v10 = *(_DWORD *)(v5 + 8);
  v11 = *(_DWORD *)(v5 + 12);
  *(_DWORD *)v4 = *(_DWORD *)v5;
  *(_DWORD *)(v4 + 4) = v9;
  *(_DWORD *)(v4 + 8) = v10;
  *(_DWORD *)(v4 + 12) = v11;
  EntityInteraction::setInteractText((int *)(v2 + 108), (int *)(v3 + 28));
  EntityInteraction::setInteractText((int *)(v2 + 112), (int *)(v3 + 32));
  EntityInteraction::setInteractText((int *)(v2 + 116), (int *)(v3 + 36));
  EntityInteraction::setInteractText((int *)(v2 + 120), (int *)(v3 + 40));
  EntityInteraction::setInteractText((int *)(v2 + 124), (int *)(v3 + 44));
  EntityInteraction::setInteractText((int *)(v2 + 128), (int *)(v3 + 48));
  EntityInteraction::setInteractText((int *)(v2 + 132), (int *)(v3 + 52));
  v12 = v2 + 136;
  v13 = *(_DWORD *)(v3 + 60);
  v14 = *(_DWORD *)(v3 + 64);
  v15 = *(_DWORD *)(v3 + 68);
  v16 = *(_DWORD *)(v3 + 72);
  *(_DWORD *)v12 = *(_DWORD *)(v3 + 56);
  *(_DWORD *)(v12 + 4) = v13;
  *(_DWORD *)(v12 + 8) = v14;
  *(_DWORD *)(v12 + 12) = v15;
  *(_DWORD *)(v12 + 16) = v16;
  v17 = v2 + 156;
  v18 = *(_DWORD *)(v3 + 80);
  v19 = *(_DWORD *)(v3 + 84);
  v20 = *(_DWORD *)(v3 + 88);
  v21 = *(_DWORD *)(v3 + 92);
  *(_DWORD *)v17 = *(_DWORD *)(v3 + 76);
  *(_DWORD *)(v17 + 4) = v18;
  *(_DWORD *)(v17 + 8) = v19;
  *(_DWORD *)(v17 + 12) = v20;
  *(_DWORD *)(v17 + 16) = v21;
  v22 = v2 + 176;
  v23 = *(_DWORD *)(v3 + 100);
  v24 = *(_DWORD *)(v3 + 104);
  v25 = *(_DWORD *)(v3 + 108);
  v26 = *(_DWORD *)(v3 + 112);
  *(_DWORD *)v22 = *(_DWORD *)(v3 + 96);
  *(_DWORD *)(v22 + 4) = v23;
  *(_DWORD *)(v22 + 8) = v24;
  *(_DWORD *)(v22 + 12) = v25;
  *(_DWORD *)(v22 + 16) = v26;
  EntityInteraction::setInteractText((int *)(v2 + 200), (int *)(v3 + 120));
  v27 = v2 + 208;
  v28 = *(_DWORD *)(v3 + 132);
  v29 = *(_DWORD *)(v3 + 136);
  *(_DWORD *)v27 = *(_DWORD *)(v3 + 128);
  *(_DWORD *)(v27 + 4) = v28;
  *(_DWORD *)(v27 + 8) = v29;
  *(_QWORD *)(v2 + 224) = *(_QWORD *)(v3 + 144);
  EntityInteraction::setInteractText((int *)(v2 + 232), (int *)(v3 + 152));
  if ( &pthread_create )
  {
    v30 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v30 )
      sub_21E5E14(v30);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v32 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v32 )
        sub_21E5E14(v32);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v33 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v33 )
      do
      {
        v34 = *(_DWORD *)(v33 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v33);
        v33 = v34;
      }
      while ( v34 );
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@6
  int v8; // r5@10
  void *v9; // r0@10
  int v10; // r5@11
  unsigned int *v11; // r1@12
  unsigned int v12; // r0@14
  int v13; // r1@16 OVERLAPPED
  int v14; // r2@16
  int v15; // r2@17
  unsigned int *v16; // r1@18
  unsigned int v17; // r2@20
  unsigned int *v18; // r6@24
  unsigned int v19; // r0@26
  unsigned int *v20; // r2@34
  signed int v21; // r1@36
  char v22; // [sp+8h] [bp-68h]@10
  int v23; // [sp+Ch] [bp-64h]@11
  int v24; // [sp+10h] [bp-60h]@11
  int v25; // [sp+50h] [bp-20h]@10

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 96) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 104) )
    v8 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>::xbox_live_result(
      (xbox::services::title_storage::title_storage_blob_result *)&v22,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_FinalizeAndRunContinuations(
      v8,
      (int)&v22);
    v9 = (void *)(v25 - 12);
    if ( (int *)(v25 - 12) != &dword_28898C0 )
    {
      v20 = (unsigned int *)(v25 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v21 = __ldrex(v20);
        while ( __strex(v21 - 1, v20) );
      }
      else
        v21 = (*v20)--;
      if ( v21 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
    }
    j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)&v24);
    v10 = v23;
    if ( v23 )
      v11 = (unsigned int *)(v23 + 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        v18 = (unsigned int *)(v10 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
        if ( &pthread_create )
        {
          __dmb();
          do
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
        }
        else
          v19 = (*v18)--;
        if ( v19 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  else
    *(_QWORD *)&v13 = *(_QWORD *)(v4 + 4);
    if ( v13 == v14 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v13 = *v2;
      v15 = v2[1];
      *(_DWORD *)(v13 + 4) = v15;
      if ( v15 )
        v16 = (unsigned int *)(v15 + 4);
            v17 = __ldrex(v16);
          while ( __strex(v17 + 1, v16) );
          ++*v16;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_Task_impl(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_RegisterTask(
           a1,
           a2);
}


int __fastcall pplx::details::_RunAllParam<xbox::services::xbox_live_result<xbox::services::system::token_result>>::~_RunAllParam(int a1)
{
  int v1; // r10@1
  int v2; // r1@1
  void *v3; // r0@1
  int v4; // r5@2
  int v5; // r7@2
  unsigned int *v6; // r2@4
  signed int v7; // r1@6
  int v8; // r1@12
  void *v9; // r0@12
  int v10; // r5@17
  unsigned int *v11; // r1@18
  unsigned int v12; // r0@20
  unsigned int *v13; // r6@24
  unsigned int v14; // r0@26
  unsigned int *v16; // r2@32
  signed int v17; // r1@34

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 88);
  v3 = (void *)(v2 - 12);
  if ( (int *)(v2 - 12) != &dword_28898C0 )
  {
    v16 = (unsigned int *)(v2 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v17 = __ldrex(v16);
      while ( __strex(v17 - 1, v16) );
    }
    else
      v17 = (*v16)--;
    if ( v17 <= 0 )
      j_j_j_j__ZdlPv_9(v3);
  }
  j_xbox::services::system::token_result::~token_result((xbox::services::system::token_result *)(v1 + 24));
  v5 = *(_QWORD *)(v1 + 8) >> 32;
  v4 = *(_QWORD *)(v1 + 8);
  if ( v4 != v5 )
    do
      v8 = *(_DWORD *)(v4 + 64);
      v9 = (void *)(v8 - 12);
      if ( (int *)(v8 - 12) != &dword_28898C0 )
      {
        v6 = (unsigned int *)(v8 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v7 = __ldrex(v6);
          while ( __strex(v7 - 1, v6) );
        }
        else
          v7 = (*v6)--;
        if ( v7 <= 0 )
          j_j_j_j__ZdlPv_9(v9);
      }
      j_xbox::services::system::token_result::~token_result((xbox::services::system::token_result *)v4);
      v4 += 72;
    while ( v4 != v5 );
    v4 = *(_DWORD *)(v1 + 8);
  if ( v4 )
    j_operator delete((void *)v4);
  v10 = *(_DWORD *)(v1 + 4);
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
      else
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  return v1;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r5@7
  unsigned int *v7; // r1@8
  unsigned int v8; // r0@10
  unsigned int *v9; // r7@14
  unsigned int v10; // r0@16

  v1 = this;
  *(_DWORD *)this = &off_276E020;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  *((_DWORD *)v1 + 20) = &off_26DDA34;
  v6 = *((_DWORD *)v1 + 22);
  if ( v6 )
    v7 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 == 1 )
      v9 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_5(v1);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<void>>(std::function const&<void ()(pplx::task<void>)>)::{lambda(pplx::task<void>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  std::function<void ()(pplx::task<void>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::set(
           a1,
           a2);
}


int (**__fastcall pplx::task_completion_event<std::string>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  unsigned int *v9; // r2@8
  signed int v10; // r1@10
  int v11; // r1@12 OVERLAPPED
  int v12; // r2@12
  int v13; // r2@13
  unsigned int *v14; // r2@14
  unsigned int v15; // r1@16
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@21
  int v17; // [sp+4h] [bp-1Ch]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = pthread_mutex_lock((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_119CCFC(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 20) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 28) )
    v7 = *v2;
    sub_119C854(&v17, (int *)(v4 + 16));
    pplx::details::_Task_impl<std::string>::_FinalizeAndRunContinuations(v7, &v17);
    v8 = (void *)(v17 - 12);
    if ( (int *)(v17 - 12) != &dword_28898C0 )
    {
      v9 = (unsigned int *)(v17 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v8);
    }
  else
    *(_QWORD *)&v11 = *(_QWORD *)(v4 + 4);
    if ( v11 == v12 )
      std::vector<std::shared_ptr<pplx::details::_Task_impl<std::string>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<std::string>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<std::string>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v11 = *v2;
      v13 = v2[1];
      *(_DWORD *)(v11 + 4) = v13;
      if ( v13 )
        v14 = (unsigned int *)(v13 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v15 = __ldrex(v14);
          while ( __strex(v15 + 1, v14) );
          v11 = *(_DWORD *)(v4 + 4);
        }
        else
          ++*v14;
      *(_DWORD *)(v4 + 4) = v11 + 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v5);
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_RegisterTask(
           a1,
           a2);
}


void __fastcall pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(pplx::task<void>)#1}>(int a1, int *a2, int a3, int a4)
{
  int v4; // lr@0
  int v5; // r7@1
  int v6; // r4@1
  int v7; // r5@1
  int *v8; // r6@1
  __int64 v9; // r0@1
  int v10; // [sp+0h] [bp-28h]@1
  void *ptr; // [sp+4h] [bp-24h]@1
  int v12; // [sp+8h] [bp-20h]@1
  int v13; // [sp+Ch] [bp-1Ch]@1

  v5 = a1;
  v12 = 0;
  v13 = 0;
  v6 = a4;
  ptr = 0;
  v7 = a3;
  v8 = a2;
  v10 = v4;
  *(_BYTE *)(a4 + 20) = 1;
  *(_DWORD *)(a4 + 24) = v4;
  LODWORD(v9) = a4 + 28;
  HIDWORD(v9) = (unsigned int)&v10 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v9);
  if ( ptr )
    operator delete(ptr);
  pplx::task<unsigned char>::_ThenImpl<void,Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(pplx::task<void>)#1}>(
    v5,
    v8,
    v7,
    v6);
}


signed int __fastcall pplx::task_completion_event<std::string>::_CancelInternal(void ***a1)
{
  void ***v1; // r6@1
  void **v2; // r0@1
  signed int v3; // r10@2
  pthread_mutex_t *v4; // r7@3
  int v5; // r0@4
  _DWORD *v6; // r11@7
  _DWORD *v7; // r8@7
  void **v8; // r0@8
  _DWORD *v9; // r5@13
  int v10; // ST00_4@14
  _DWORD *v11; // r5@18
  int v12; // r6@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r4@26
  unsigned int v16; // r0@28

  v1 = a1;
  v2 = *a1;
  if ( *((_BYTE *)v2 + 29) )
  {
    v3 = 0;
  }
  else
    v4 = (pthread_mutex_t *)(v2 + 3);
    if ( !&pthread_create )
      goto LABEL_39;
    v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 3));
    if ( v5 )
      sub_21E5E14(v5);
    v2 = *v1;
    if ( *((_BYTE *)*v1 + 29) )
    {
      v6 = 0;
      v7 = 0;
      v3 = 0;
    }
    else
LABEL_39:
      v3 = 1;
      *((_BYTE *)v2 + 29) = 1;
      v8 = *v1;
      v7 = **v1;
      *v8 = 0;
      v6 = v8[1];
      v8[1] = 0;
      v8[2] = 0;
    if ( &pthread_create )
      j_pthread_mutex_unlock_1(v4);
    if ( v7 != v6 && v3 == 1 )
      v9 = v7;
      if ( (*v1)[5] )
      {
        do
        {
          v10 = (int)(*v1 + 5);
          (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*v9 + 8))(*v9);
          v9 += 2;
        }
        while ( v6 != v9 );
      }
      else
    if ( v7 != v6 )
      v11 = v7;
      do
        v12 = v11[1];
        if ( v12 )
          v13 = (unsigned int *)(v12 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v14 = __ldrex(v13);
            while ( __strex(v14 - 1, v13) );
          }
          else
            v14 = (*v13)--;
          if ( v14 == 1 )
            v15 = (unsigned int *)(v12 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
            if ( &pthread_create )
            {
              __dmb();
              do
                v16 = __ldrex(v15);
              while ( __strex(v16 - 1, v15) );
            }
            else
              v16 = (*v15)--;
            if ( v16 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
        v11 += 2;
      while ( v11 != v6 );
    if ( v7 )
      j_operator delete(v7);
  return v3;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::set(
           a1,
           a2);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_7privacy23permission_check_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::~_Task_impl(a1);
}


pplx::invalid_operation *__fastcall pplx::invalid_operation::~invalid_operation(pplx::invalid_operation *this)
{
  pplx::invalid_operation *v1; // r4@1
  int v2; // r1@1
  void *v3; // r0@1
  unsigned int *v5; // r12@3
  signed int v6; // r1@5

  v1 = this;
  *(_DWORD *)this = &off_26D7A9C;
  v2 = *((_DWORD *)this + 1);
  v3 = (void *)(v2 - 12);
  if ( (int *)(v2 - 12) != &dword_28898C0 )
  {
    v5 = (unsigned int *)(v2 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 <= 0 )
      j_j_j_j_j__ZdlPv_9(v3);
  }
  std::exception::~exception();
  return v1;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_Task_impl(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::set_exception(int *a1, const std::__exception_ptr::exception_ptr *a2)
{
  int v2; // lr@0
  int *v3; // r4@1
  signed int v4; // r5@1
  signed int v5; // r4@2
  int v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@1
  int v9; // [sp+8h] [bp-20h]@1
  int v10; // [sp+Ch] [bp-1Ch]@1
  char v11; // [sp+10h] [bp-18h]@1
  char v12; // [sp+14h] [bp-14h]@1

  v3 = a1;
  j_std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v11, a2);
  v9 = 0;
  v10 = 0;
  v8 = 0;
  v7 = v2;
  j_std::__exception_ptr::exception_ptr::exception_ptr(
    (std::__exception_ptr::exception_ptr *)&v12,
    (const std::__exception_ptr::exception_ptr *)&v11);
  v4 = j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_StoreException<std::__exception_ptr::exception_ptr>(
         v3,
         (const std::__exception_ptr::exception_ptr *)&v12,
         (int)&v7);
  j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v12);
  if ( v4 == 1 )
    v5 = j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelInternal((void ***)v3);
  else
    v5 = 0;
  j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v11);
  return v5;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<void>)> pplx::details::_MakeTToUnitFunc<pplx::task<void>>(std::function const&<void ()(pplx::task<void>)>)::{lambda(pplx::task<void>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<pplx::task<void> ()(unsigned char)> pplx::details::_MakeUnitToTFunc<pplx::task<void>>(std::function const&<pplx::task<void> ()(void)>)::{lambda(unsigned char)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<std::string>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<std::string>::xbox_live_result(v3, (int)*v2 + 80);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_RefCounter::_Destroy(int result)
{
  if ( result )
    result = (*(int (**)(void))(*(_DWORD *)result + 4))();
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27684F8;
  *(_QWORD *)(v3 + 80) = (unsigned int)&unk_28898CC;
  *(_DWORD *)(v3 + 88) = &unk_28898CC;
  return v3;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(
           a1,
           a2,
           a3);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<web::json::value>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r0@18
  int v11; // r5@20
  int v12; // r7@20
  int v13; // r4@21
  unsigned int *v14; // r1@22
  unsigned int v15; // r0@24
  unsigned int *v16; // r6@28
  unsigned int v17; // r0@30

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 6);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 4);
  if ( v10 )
    (*(void (__cdecl **)(int))(*(_DWORD *)v10 + 96))(v10);
  *((_DWORD *)v1 + 4) = 0;
  v12 = *v1 >> 32;
  v11 = *v1;
  if ( v11 != v12 )
    do
      v13 = *(_DWORD *)(v11 + 4);
      if ( v13 )
        v14 = (unsigned int *)(v13 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v15 = __ldrex(v14);
          while ( __strex(v15 - 1, v14) );
        }
        else
          v15 = (*v14)--;
        if ( v15 == 1 )
          v16 = (unsigned int *)(v13 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          if ( &pthread_create )
          {
            __dmb();
            do
              v17 = __ldrex(v16);
            while ( __strex(v17 - 1, v16) );
          }
          else
            v17 = (*v16)--;
          if ( v17 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
      v11 += 8;
    while ( v11 != v12 );
    v11 = *(_DWORD *)v1;
  if ( v11 )
    operator delete((void *)v11);
  return v1;
}


pthread_cond_t *__fastcall pplx::details::_CancellationTokenState::_DeregisterCallback(pplx::details::_CancellationTokenState *this, pplx::details::_CancellationTokenRegistration *a2)
{
  pplx::details::_CancellationTokenState *v2; // r6@1
  pthread_mutex_t *v3; // r5@1
  pplx::details::_CancellationTokenRegistration *v4; // r4@1
  int v5; // r0@2
  int v6; // r2@3
  int v7; // r1@4
  int v8; // r0@5
  unsigned int *v9; // r6@10
  pthread_cond_t *v10; // r5@11
  pthread_cond_t *result; // r0@13
  int v12; // r2@14
  unsigned int *v13; // r0@20
  unsigned int v14; // r1@21
  unsigned int v15; // r0@32
  int v16; // [sp+4h] [bp-24h]@31
  int v17; // [sp+8h] [bp-20h]@31
  char v18; // [sp+Ch] [bp-1Ch]@31

  v2 = this;
  v3 = (pthread_mutex_t *)((char *)this + 24);
  v4 = a2;
  if ( &pthread_create )
  {
    v5 = pthread_mutex_lock(v3);
    if ( v5 )
      sub_DA7664(v5);
  }
  v6 = *((_DWORD *)v2 + 7);
  if ( v6 )
    v7 = 0;
    while ( 1 )
    {
      v8 = v6;
      if ( *(pplx::details::_CancellationTokenRegistration **)v6 == v4 )
        break;
      v6 = *(_DWORD *)(v6 + 4);
      v7 = v8;
      if ( !v6 )
        goto LABEL_20;
    }
    v12 = *(_DWORD *)(v6 + 4);
    if ( v7 )
      *(_DWORD *)(v7 + 4) = v12;
      v12 = *(_DWORD *)(v8 + 4);
    else
      *((_DWORD *)v2 + 7) = v12;
    if ( !v12 )
      *((_DWORD *)v2 + 8) = v7;
    free((void *)v8);
LABEL_20:
    __dmb();
    *((_DWORD *)v4 + 2) = 2;
    v13 = (unsigned int *)((char *)v4 + 4);
    do
      v14 = __ldrex(v13);
    while ( __strex(v14 - 1, v13) );
    if ( v14 == 1 )
      (*(void (__fastcall **)(pplx::details::_CancellationTokenRegistration *))(*(_DWORD *)v4 + 8))(v4);
    result = (pthread_cond_t *)&pthread_create;
    if ( &pthread_create )
      result = (pthread_cond_t *)pthread_mutex_unlock(v3);
  else
      pthread_mutex_unlock(v3);
    v9 = (unsigned int *)((char *)v4 + 8);
      v10 = (pthread_cond_t *)__ldrex(v9);
      if ( v10 )
      if ( !__strex(1u, v9) )
      {
        __dmb();
        result = (pthread_cond_t *)1;
        goto LABEL_27;
      }
    __clrex();
    result = 0;
LABEL_27:
    if ( result )
      v10 = 0;
    if ( (unsigned int)v10 >= 4 )
      result = (pthread_cond_t *)pplx::details::platform::GetCurrentThreadId();
      if ( v10 != result )
        v16 = 0;
        sub_DA8AC4(&v17);
        v18 = 0;
        *((_DWORD *)v4 + 3) = &v16;
        do
          v15 = __ldrex(v9);
        while ( __strex(2u, v9) );
        if ( v15 != 3 )
          pplx::details::event_impl::wait(*((pthread_mutex_t **)v4 + 3), 0xFFFFFFFF);
        result = sub_DA7F4C((pthread_cond_t *)&v17);
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<web::json::value>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = pplx::task<web::json::value>::task<pplx::task_completion_event<web::json::value>>(v4, (int)&v15, v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::set(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<web::http::http_response>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = pplx::details::_Task_impl<web::http::http_response>::~_Task_impl(a1);
  j_j_j__ZdlPv_4((void *)v1);
}


int (**__fastcall pplx::details::_Task_impl<web::http::http_response>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r5@1
  int v4; // r6@1
  unsigned int *v5; // r0@3
  unsigned int v6; // r1@5
  unsigned int *v7; // r1@9
  unsigned int v8; // r0@11
  unsigned int *v9; // r7@15
  unsigned int v10; // r0@17
  int v11; // r0@24
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@26
  int v13; // r0@30
  int v14; // r1@34
  int v15; // r5@35

  v2 = a1;
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a1 + 84);
  v4 = *(_DWORD *)(a2 + 4);
  if ( v4 != v3 )
  {
    if ( v4 )
    {
      v5 = (unsigned int *)(v4 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 + 1, v5) );
        v3 = *(_DWORD *)(v2 + 84);
      }
      else
        ++*v5;
    }
    if ( v3 )
      v7 = (unsigned int *)(v3 + 4);
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
        v8 = (*v7)--;
      if ( v8 == 1 )
        v9 = (unsigned int *)(v3 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
        if ( &pthread_create )
        {
          __dmb();
          do
            v10 = __ldrex(v9);
          while ( __strex(v10 - 1, v9) );
        }
        else
          v10 = (*v9)--;
        if ( v10 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
    *(_DWORD *)(v2 + 84) = v4;
  }
  if ( &pthread_create )
    v11 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
    if ( v11 )
      sub_119CCFC(v11);
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
      v13 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 36));
      if ( v13 )
        sub_119CCFC(v13);
      *(_BYTE *)(v2 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v2 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v2 + 36));
    else
    v14 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v14 )
      do
        v15 = *(_DWORD *)(v14 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v14);
        v14 = v15;
      while ( v15 );
  return result;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<std::string ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::string>(std::function const&<std::string ()(void)>)::{lambda(unsigned char)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r4@1
  void **v5; // r0@2
  int result; // r0@4
  void **v7; // r0@5
  int v8; // r6@5
  void **v9; // r5@5
  void (__fastcall *v10)(void **, int, signed int); // r3@5
  void **v11; // r4@8
  void (__fastcall *v12)(void **, void **, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<std::string ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::string>(std::function const&<std::string ()(void)>)::{lambda(unsigned char)#1};
      goto LABEL_4;
    case 1:
      v5 = (void **)*a2;
LABEL_4:
      *v4 = v5;
      return 0;
    case 2:
      v7 = (void **)j_operator new(0x10u);
      v8 = *v3;
      v9 = v7;
      v7[2] = 0;
      v10 = *(void (__fastcall **)(void **, int, signed int))(v8 + 8);
      if ( v10 )
      {
        v10(v7, v8, 2);
        v9[3] = *(void **)(v8 + 12);
        v9[2] = *(void **)(v8 + 8);
      }
      result = 0;
      *v4 = v9;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(v11, v11, 3);
        j_operator delete(v11);
      break;
    default:
  }
  return 0;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<std::string>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(std::function const&<void ()(pplx::task<std::string>)>)::{lambda(pplx::task<std::string>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


unsigned int *__fastcall pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}::operator() const(_DWORD *a1, int a2, int a3)
{
  int v3; // r5@1
  _DWORD *v4; // r4@1
  void (__fastcall *v5)(int *); // r3@2
  unsigned int *result; // r0@4
  unsigned int v7; // r1@9
  int v8; // [sp+0h] [bp-20h]@3
  int (*v9)(void); // [sp+8h] [bp-18h]@2
  int v10; // [sp+Ch] [bp-14h]@3

  v3 = a2;
  v4 = a1;
  if ( a3 == 1 )
  {
    v9 = 0;
    v5 = *(void (__fastcall **)(int *))(a2 + 8);
    if ( v5 )
    {
      v5(&v8);
      v10 = *(_DWORD *)(v3 + 12);
      v9 = *(int (**)(void))(v3 + 8);
    }
    result = (unsigned int *)pplx::details::do_while((int)v4, (int)&v8);
    if ( v9 )
      result = (unsigned int *)v9();
  }
  else
    *a1 = *(_DWORD *)(a2 + 16);
    result = *(unsigned int **)(a2 + 20);
    v4[1] = result;
    if ( result )
      ++result;
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(result);
        while ( __strex(v7 + 1, result) );
      }
      else
        ++*result;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2769544;
  v12 = (xbox::services *)j_xbox::services::matchmaking::create_match_ticket_response::create_match_ticket_response((xbox::services::matchmaking::create_match_ticket_response *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 96) = 0;
  *(_DWORD *)(v3 + 100) = v13;
  *(_DWORD *)(v3 + 104) = &unk_28898CC;
  return v3;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = a1;
  *(_DWORD *)a1 = &off_276630C;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  j_xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>::~xbox_live_result(v1 + 80);
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_4((pplx::details::_Task_impl_base *)v1);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_Task_impl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


pplx::task_canceled *__fastcall pplx::task_canceled::~task_canceled(pplx::task_canceled *this)
{
  pplx::task_canceled *v1; // r4@1
  int v2; // r1@1
  void *v3; // r0@1
  unsigned int *v5; // r12@3
  signed int v6; // r1@5

  v1 = this;
  *(_DWORD *)this = &off_26DD7D0;
  v2 = *((_DWORD *)this + 1);
  v3 = (void *)(v2 - 12);
  if ( (int *)(v2 - 12) != &dword_28898C0 )
  {
    v5 = (unsigned int *)(v2 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v3);
  }
  std::exception::~exception();
  return v1;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8((void *)v1);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<void>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<void>),std::function<unsigned char ()(pplx::task<void>)> pplx::details::_MakeTToUnitFunc<pplx::task<void>>(std::function const&<void ()(pplx::task<void>)>)::{lambda(pplx::task<void>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<void>)> pplx::details::_MakeTToUnitFunc<pplx::task<void>>(std::function const&<void ()(pplx::task<void>)>)::{lambda(pplx::task<void>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


xbox::services::matchmaking::match_ticket_details_response *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::get(xbox::services::matchmaking::match_ticket_details_response *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::matchmaking::match_ticket_details_response *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  int v9; // r3@8
  int v10; // r1@8
  int v11; // r2@8
  void **v12; // r0@8
  int *v13; // r8@8
  int *v14; // r11@8
  int *v15; // r9@11
  unsigned int *v16; // r2@15
  signed int v17; // r1@17
  unsigned int *v18; // r2@19
  signed int v19; // r1@21
  int v20; // r7@30
  void *v21; // r0@32
  void *v22; // r0@33
  void **v23; // r0@35
  void *v24; // r5@36
  unsigned int *v25; // r1@37
  unsigned int v26; // r0@39
  unsigned int *v27; // r6@43
  unsigned int v28; // r0@45
  int *v29; // r6@52
  int v30; // r7@53
  unsigned int *v31; // r1@54
  unsigned int v32; // r0@56
  unsigned int *v33; // r5@60
  unsigned int v34; // r0@62
  int v36; // [sp+8h] [bp-50h]@19
  int v37; // [sp+28h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 32);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 32);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v13 = 0;
      v14 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      v9 = (int)(v4 + 6);
      v10 = *(_DWORD *)(v3 + 12);
      v11 = *(_DWORD *)(v3 + 16);
      *(_DWORD *)v9 = *(_DWORD *)(v3 + 8);
      *(_DWORD *)(v9 + 4) = v10;
      *(_DWORD *)(v9 + 8) = v11;
      *((_QWORD *)v4 + 5) = *(_QWORD *)(v3 + 24);
      EntityInteraction::setInteractText((int *)v4 + 12, (int *)(v3 + 32));
      *((_BYTE *)*v2 + 64) = 1;
      v12 = *v2;
      v13 = (int *)**v2;
      *v12 = 0;
      v14 = (int *)v12[1];
      v12[1] = 0;
      v12[2] = 0;
      if ( v13 != v14 )
      {
        v15 = v13;
        do
        {
          v20 = *v15;
          if ( *(_DWORD *)(*v15 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v20 + 8))(v20, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>::xbox_live_result(
              (xbox::services::matchmaking::hopper_statistics_response *)&v36,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_FinalizeAndRunContinuations(
              v20,
              &v36);
            v21 = (void *)(v37 - 12);
            if ( (int *)(v37 - 12) != &dword_28898C0 )
            {
              v16 = (unsigned int *)(v37 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v17 = __ldrex(v16);
                while ( __strex(v17 - 1, v16) );
              }
              else
                v17 = (*v16)--;
              if ( v17 <= 0 )
                j_j_j_j__ZdlPv_9(v21);
            }
            v22 = (void *)(v36 - 12);
            if ( (int *)(v36 - 12) != &dword_28898C0 )
              v18 = (unsigned int *)(v36 - 4);
                  v19 = __ldrex(v18);
                while ( __strex(v19 - 1, v18) );
                v19 = (*v18)--;
              if ( v19 <= 0 )
                j_j_j_j__ZdlPv_9(v22);
          v15 += 2;
        }
        while ( v15 != v14 );
      }
      v23 = *v2;
      if ( (*v2)[14] )
        v23[14] = 0;
        v24 = v23[15];
        v23[15] = 0;
        if ( v24 )
          v25 = (unsigned int *)((char *)v24 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)((char *)v24 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v24 + 8))(v24);
            if ( &pthread_create )
              __dmb();
              do
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
            else
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v24 + 12))(v24);
      v5 = 1;
    if ( v13 != v14 )
      v29 = v13;
      do
        v30 = v29[1];
        if ( v30 )
          v31 = (unsigned int *)(v30 + 4);
              v32 = __ldrex(v31);
            while ( __strex(v32 - 1, v31) );
            v32 = (*v31)--;
          if ( v32 == 1 )
            v33 = (unsigned int *)(v30 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 8))(v30);
                v34 = __ldrex(v33);
              while ( __strex(v34 - 1, v33) );
              v34 = (*v33)--;
            if ( v34 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 12))(v30);
        v29 += 2;
      while ( v29 != v14 );
    if ( v13 )
      j_operator delete(v13);
  }
  return v5;
}


int __fastcall pplx::details::linux_scheduler::schedule(pplx::details::linux_scheduler *this, void (__cdecl *a2)(void *), void *a3)
{
  int v3; // r5@1
  _DWORD *v4; // r0@1
  unsigned __int64 v6; // [sp+0h] [bp-20h]@1

  v6 = __PAIR__((unsigned int)a3, (unsigned int)a2);
  v3 = *((_DWORD *)j_crossplat::threadpool::shared_instance(this) + 4);
  v4 = j_boost::asio::asio_handler_allocate((boost::asio *)0x14, (unsigned int)&v6);
  *v4 = 0;
  v4[1] = &boost::asio::detail::completion_handler<boost::_bi::bind_t<void,void (*)(void *),boost::_bi::list1<boost::_bi::value<void *>>>>::do_complete;
  v4[2] = 0;
  *(_QWORD *)(v4 + 3) = v6;
  return j_boost::asio::detail::task_io_service::post_immediate_completion(v3, v4, 0);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(
           a1,
           a2);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_11tournaments25tournament_request_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<void>),std::function<unsigned char ()(xbox::services::xbox_live_result<void>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(std::function const&<void ()(xbox::services::xbox_live_result<void>)>)::{lambda(xbox::services::xbox_live_result<void>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<void>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(std::function const&<void ()(xbox::services::xbox_live_result<void>)>)::{lambda(xbox::services::xbox_live_result<void>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int (**__fastcall pplx::task_completion_event<xbox::services::system::auth_flow_result>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  int v8; // r1@8 OVERLAPPED
  int v9; // r2@8
  int v10; // r2@9
  unsigned int *v11; // r1@10
  unsigned int v12; // r2@12
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@17
  char v14; // [sp+8h] [bp-30h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 48) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 56) )
    v7 = *v2;
    j_xbox::services::system::auth_flow_result::auth_flow_result(
      (xbox::services::system::auth_flow_result *)&v14,
      (const xbox::services::system::auth_flow_result *)(v4 + 16));
    j_pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_FinalizeAndRunContinuations(v7, (int)&v14);
    j_xbox::services::system::auth_flow_result::~auth_flow_result((xbox::services::system::auth_flow_result *)&v14);
  else
    *(_QWORD *)&v8 = *(_QWORD *)(v4 + 4);
    if ( v8 == v9 )
    {
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::system::auth_flow_result>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::system::auth_flow_result>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::system::auth_flow_result>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    }
    else
      *(_DWORD *)v8 = *v2;
      v10 = v2[1];
      *(_DWORD *)(v8 + 4) = v10;
      if ( v10 )
      {
        v11 = (unsigned int *)(v10 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v12 = __ldrex(v11);
          while ( __strex(v12 + 1, v11) );
        }
        else
          ++*v11;
      }
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r1@19
  void *v13; // r0@19
  int v14; // r5@20
  int v15; // r7@20
  int v16; // r4@21
  unsigned int *v17; // r1@22
  unsigned int v18; // r0@24
  unsigned int *v19; // r6@28
  unsigned int v20; // r0@30
  unsigned int *v22; // r2@40
  signed int v23; // r1@42
  unsigned int *v24; // r2@44
  signed int v25; // r1@46

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 15);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 12);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v22 = (unsigned int *)(v10 - 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = *((_DWORD *)v1 + 4);
  v13 = (void *)(v12 - 12);
  if ( (int *)(v12 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v12 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j__ZdlPv_9(v13);
  v15 = *v1 >> 32;
  v14 = *v1;
  if ( v14 != v15 )
    do
      v16 = *(_DWORD *)(v14 + 4);
      if ( v16 )
        v17 = (unsigned int *)(v16 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
        }
        else
          v18 = (*v17)--;
        if ( v18 == 1 )
          v19 = (unsigned int *)(v16 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          if ( &pthread_create )
          {
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
          }
          else
            v20 = (*v19)--;
          if ( v20 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
      v14 += 8;
    while ( v14 != v15 );
    v14 = *(_DWORD *)v1;
  if ( v14 )
    j_operator delete((void *)v14);
  return v1;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<int>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = this;
  *(_DWORD *)this = &off_26DD800;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_2(v1);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


void __fastcall pplx::details::_Task_impl_base::~_Task_impl_base(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = pplx::details::_Task_impl_base::~_Task_impl_base(this);
  j_j_j__ZdlPv_3((void *)v1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_13title_storage27title_storage_blob_metadataEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  EntityInteraction::setInteractText((int *)(v2 + 84), v3 + 1);
  EntityInteraction::setInteractText((int *)(v2 + 88), v3 + 2);
  EntityInteraction::setInteractText((int *)(v2 + 92), v3 + 3);
  EntityInteraction::setInteractText((int *)(v2 + 96), v3 + 4);
  EntityInteraction::setInteractText((int *)(v2 + 100), v3 + 5);
  EntityInteraction::setInteractText((int *)(v2 + 104), v3 + 6);
  EntityInteraction::setInteractText((int *)(v2 + 108), v3 + 7);
  EntityInteraction::setInteractText((int *)(v2 + 112), v3 + 8);
  *(_QWORD *)(v2 + 116) = *(_QWORD *)(v3 + 9);
  EntityInteraction::setInteractText((int *)(v2 + 124), v3 + 11);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 13);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 11);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::privacy::permission_check_result::~permission_check_result((xbox::services::privacy::permission_check_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int __fastcall pplx::details::_Task_impl_base::_ScheduleTask(int a1, int a2, int a3)
{
  int v3; // r5@1
  int result; // r0@2

  v3 = a2;
  if ( a3 == -1 )
  {
    (*(void (__fastcall **)(int))(*(_DWORD *)a2 + 8))(a2);
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v3 + 4))(v3);
  }
  else
    result = (***(int (****)(void))(a1 + 56))();
  return result;
}


int *__fastcall pplx::task<std::shared_ptr<xbox::services::http_call_response>>::task<pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<std::shared_ptr<xbox::services::http_call_response>>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>::_RegisterTask((int *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::~_Task_impl(a1);
}


signed int __fastcall pplx::task_completion_event<web::json::value>::set(_DWORD *a1, int *a2)
{
  _DWORD *v2; // r5@1
  int *v3; // r4@1
  int v4; // r0@1
  signed int v5; // r9@1
  unsigned int v6; // r1@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  int v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r6@11
  int v13; // r7@12
  int v14; // r0@18
  int v15; // r5@19
  unsigned int *v16; // r1@20
  unsigned int v17; // r0@22
  unsigned int *v18; // r6@29
  unsigned int v19; // r0@31
  int *v20; // r6@38
  int v21; // r7@39
  unsigned int *v22; // r1@40
  unsigned int v23; // r0@42
  unsigned int *v24; // r5@46
  unsigned int v25; // r0@48
  int v27; // [sp+8h] [bp-28h]@14

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *(_WORD *)(v4 + 28);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 12);
    if ( &pthread_create )
    {
      v8 = pthread_mutex_lock((pthread_mutex_t *)(v4 + 12));
      if ( v8 )
        sub_119CCFC(v8);
      v4 = *v2;
      v6 = *(_WORD *)(*v2 + 28);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        pthread_mutex_unlock(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      web::json::value::operator=((int *)(v4 + 16), v3);
      v9 = *v2;
      *(_BYTE *)(v9 + 28) = 1;
      v10 = *(int **)v9;
      *(_DWORD *)v9 = 0;
      v11 = *(int **)(v9 + 4);
      *(_DWORD *)(v9 + 4) = 0;
      *(_DWORD *)(v9 + 8) = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v13 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v13 + 8))(v13, 1, 0, 0);
          }
          else
            web::json::value::value((web::json::value *)&v27, (const web::json::value *)(*v2 + 16));
            pplx::details::_Task_impl<web::json::value>::_FinalizeAndRunContinuations(v13, &v27);
            if ( v27 )
              (*(void (__cdecl **)(int))(*(_DWORD *)v27 + 96))(v27);
            v27 = 0;
          v12 += 2;
        }
        while ( v11 != v12 );
      }
      v14 = *v2;
      if ( *(_DWORD *)(*v2 + 20) )
        *(_DWORD *)(v14 + 20) = 0;
        v15 = *(_DWORD *)(v14 + 24);
        *(_DWORD *)(v14 + 24) = 0;
        if ( v15 )
          v16 = (unsigned int *)(v15 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v17 = __ldrex(v16);
            while ( __strex(v17 - 1, v16) );
            v17 = (*v16)--;
          if ( v17 == 1 )
            v18 = (unsigned int *)(v15 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 8))(v15);
            if ( &pthread_create )
            {
              __dmb();
              do
                v19 = __ldrex(v18);
              while ( __strex(v19 - 1, v18) );
            }
            else
              v19 = (*v18)--;
            if ( v19 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
      v5 = 1;
    if ( v10 != v11 )
      v20 = v10;
      do
        v21 = v20[1];
        if ( v21 )
          v22 = (unsigned int *)(v21 + 4);
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            v24 = (unsigned int *)(v21 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
                v25 = __ldrex(v24);
              while ( __strex(v25 - 1, v24) );
              v25 = (*v24)--;
            if ( v25 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
        v20 += 2;
      while ( v20 != v11 );
    if ( v10 )
      operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_12achievements11achievementEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::set(
           a1,
           a2);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-90h]@10
  int v33; // [sp+4h] [bp-8Ch]@10
  int v34; // [sp+8h] [bp-88h]@16
  int v35; // [sp+Ch] [bp-84h]@20
  char v36; // [sp+14h] [bp-7Ch]@20
  int v37; // [sp+18h] [bp-78h]@20
  void *ptr; // [sp+1Ch] [bp-74h]@20
  int v39; // [sp+20h] [bp-70h]@20
  int v40; // [sp+24h] [bp-6Ch]@20
  char v41; // [sp+28h] [bp-68h]@20
  char v42; // [sp+29h] [bp-67h]@20
  int v43; // [sp+30h] [bp-60h]@4
  int v44; // [sp+34h] [bp-5Ch]@4
  char v45; // [sp+38h] [bp-58h]@3
  int v46; // [sp+68h] [bp-28h]@3
  int v47; // [sp+70h] [bp-20h]@1
  int v48; // [sp+74h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_13title_storage19title_storage_quotaEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>::xbox_live_result(
    (xbox::services::title_storage::title_storage_quota *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::title_storage::title_storage_quota::~title_storage_quota((xbox::services::title_storage::title_storage_quota *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_RegisterTask(
    (_DWORD *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_Task_impl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::task_from_result<web::websockets::client::websocket_incoming_message>(int a1, int a2, int a3)
{
  int v3; // r8@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  int v7; // r0@3
  unsigned int *v8; // r0@4
  unsigned int v9; // r1@6
  int v10; // r6@9
  unsigned int *v11; // r1@10
  unsigned int v12; // r0@12
  unsigned int *v13; // r7@16
  unsigned int v14; // r0@18
  unsigned int *v15; // r0@24
  unsigned int v16; // r1@26
  int v17; // r0@29
  unsigned int *v18; // r0@30
  unsigned int v19; // r1@32
  int v20; // r0@35
  unsigned int *v21; // r1@36
  unsigned int v22; // r2@37
  int v23; // r0@41
  unsigned int *v24; // r1@42
  unsigned int v25; // r2@43
  int result; // r0@46
  int v27; // r4@46
  unsigned int *v28; // r1@47
  unsigned int *v29; // r6@53
  int v30; // r4@60
  unsigned int *v31; // r1@61
  unsigned int *v32; // r6@67
  int v33; // r4@74
  unsigned int *v34; // r1@75
  unsigned int *v35; // r6@81
  int v36; // [sp+0h] [bp-68h]@29
  int v37; // [sp+4h] [bp-64h]@29
  int v38; // [sp+8h] [bp-60h]@35
  int v39; // [sp+Ch] [bp-5Ch]@39
  char v40; // [sp+14h] [bp-54h]@39
  int v41; // [sp+18h] [bp-50h]@39
  void *ptr; // [sp+1Ch] [bp-4Ch]@39
  int v43; // [sp+20h] [bp-48h]@39
  int v44; // [sp+24h] [bp-44h]@39
  char v45; // [sp+28h] [bp-40h]@39
  char v46; // [sp+29h] [bp-3Fh]@39
  int v47; // [sp+2Ch] [bp-3Ch]@23
  int v48; // [sp+30h] [bp-38h]@23
  void **v49; // [sp+34h] [bp-34h]@3
  int v50; // [sp+38h] [bp-30h]@3
  int v51; // [sp+3Ch] [bp-2Ch]@3
  int v52; // [sp+40h] [bp-28h]@9
  int v53; // [sp+44h] [bp-24h]@1
  int v54; // [sp+48h] [bp-20h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v53 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN3web10websockets6client26websocket_incoming_messageEEESaISB_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v54);
  if ( v54 )
    v6 = (*(int (**)(void))(*(_DWORD *)v54 + 16))();
  v53 = v6;
  v49 = &off_26DDA34;
  v50 = *(_DWORD *)(v5 + 4);
  v7 = *(_DWORD *)(v5 + 8);
  v51 = v7;
  if ( v7 )
  {
    v8 = (unsigned int *)(v7 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
    }
    else
      ++*v8;
  }
  v49 = &off_26DD410;
  v52 = *(_DWORD *)(v5 + 12);
  j_pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::set((void ***)&v53, (int)&v49);
  v10 = v51;
  if ( v51 )
    v11 = (unsigned int *)(v51 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
      }
      else
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v47 = v53;
  v48 = v54;
    v15 = (unsigned int *)(v54 + 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 + 1, v15) );
      ++*v15;
  v36 = *(_DWORD *)v4;
  v17 = *(_DWORD *)(v4 + 4);
  v37 = v17;
  if ( v17 )
    v18 = (unsigned int *)(v17 + 4);
        v19 = __ldrex(v18);
      while ( __strex(v19 + 1, v18) );
      ++*v18;
  v38 = *(_DWORD *)(v4 + 8);
  v20 = *(_DWORD *)(v4 + 12);
  if ( v20 )
    v21 = (unsigned int *)(v20 + 4);
    __dmb();
    do
      v22 = __ldrex(v21);
    while ( __strex(v22 + 1, v21) );
  v39 = v20;
  v43 = 0;
  v44 = 0;
  v41 = 0;
  ptr = 0;
  v40 = 0;
  v45 = *(_BYTE *)(v4 + 40);
  v46 = *(_BYTE *)(v4 + 41);
  j_pplx::create_task<pplx::task_completion_event<web::websockets::client::websocket_incoming_message>>(
    v3,
    (int)&v47,
    (int)&v36);
  if ( ptr )
    j_operator delete(ptr);
  v23 = v39;
  if ( v39 )
    v24 = (unsigned int *)(v39 + 4);
      v25 = __ldrex(v24);
    while ( __strex(v25 - 1, v24) );
    if ( v25 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 8))(v23);
  result = 0;
  v39 = 0;
  v27 = v37;
  if ( v37 )
    v28 = (unsigned int *)(v37 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
    if ( result == 1 )
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  v30 = v48;
  if ( v48 )
    v31 = (unsigned int *)(v48 + 4);
        result = __ldrex(v31);
      while ( __strex(result - 1, v31) );
      result = (*v31)--;
      v32 = (unsigned int *)(v30 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 8))(v30);
          result = __ldrex(v32);
        while ( __strex(result - 1, v32) );
        result = (*v32)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v30 + 12))(v30);
  v33 = v54;
    v34 = (unsigned int *)(v54 + 4);
        result = __ldrex(v34);
      while ( __strex(result - 1, v34) );
      result = (*v34)--;
      v35 = (unsigned int *)(v33 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 8))(v33);
          result = __ldrex(v35);
        while ( __strex(result - 1, v35) );
        result = (*v35)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v33 + 12))(v33);
  return result;
}


signed int __fastcall pplx::task_completion_event<int>::_StoreException<std::__exception_ptr::exception_ptr>(_DWORD *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  int *v3; // r7@1
  int v4; // r4@1
  int v5; // r5@1
  const std::__exception_ptr::exception_ptr *v6; // r6@1
  pthread_mutex_t *v7; // r8@1
  int v8; // r0@2
  unsigned int v9; // r0@4
  signed int v10; // r7@4
  __int64 v11; // r0@8
  int v12; // r5@8
  unsigned int *v13; // r1@9
  unsigned int v14; // r0@11
  unsigned int *v15; // r4@15
  unsigned int v16; // r0@17
  int v17; // r5@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r0@25
  unsigned int *v20; // r4@29
  unsigned int v21; // r0@31
  int v23; // [sp+0h] [bp-28h]@8
  char v24; // [sp+4h] [bp-24h]@8
  int v25; // [sp+8h] [bp-20h]@8
  char v26; // [sp+Ch] [bp-1Ch]@8

  v3 = a1;
  v4 = *a1;
  v5 = a3;
  v6 = a2;
  v7 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v8 = pthread_mutex_lock(v7);
    if ( v8 )
      sub_119CCFC(v8);
    v4 = *v3;
  }
  v9 = *(_WORD *)(v4 + 28);
  v10 = 0;
  if ( v9 <= 0xFF && !(_BYTE)v9 )
    if ( *(_DWORD *)(v4 + 20) )
    {
      v10 = 0;
    }
    else
      std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v23, v6);
      std::__shared_ptr<pplx::details::_ExceptionHolder,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_ExceptionHolder>,std::__exception_ptr::exception_ptr &,pplx::details::_TaskCreationCallstack const&>(
        (int)&v24,
        (int)&v26,
        (const std::__exception_ptr::exception_ptr *)&v23,
        v5);
      v11 = *(_QWORD *)&v24;
      *(_DWORD *)&v24 = 0;
      v25 = 0;
      *(_DWORD *)(v4 + 20) = v11;
      v12 = *(_DWORD *)(v4 + 24);
      *(_DWORD *)(v4 + 24) = HIDWORD(v11);
      if ( v12 )
      {
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      }
      v17 = v25;
      if ( v25 )
        v18 = (unsigned int *)(v25 + 4);
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v23);
      v10 = 1;
    pthread_mutex_unlock(v7);
  return v10;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<std::string>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = pplx::task<std::string>::task<pplx::task_completion_event<std::string>>(v4, (int)&v15, v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(bool)> pplx::details::_MakeTToUnitFunc<bool>(std::function const&<void ()(bool)>)::{lambda(bool)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


xbox::services::achievements::achievements_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<void>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  pplx::details::_Task_impl_base *v4; // r1@3
  char *v6; // r4@4
  int v7; // r3@4
  char *v8; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v6 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v6 = &off_26D7A9C;
    sub_21E94B4((void **)v6 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v6,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v7);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v8 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v8 = &off_26DD7D0;
    *((_DWORD *)v8 + 1) = &unk_28898CC;
      (int)v8,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  v4 = *v2;
  *(_DWORD *)(v3 + 8) = &unk_28898CC;
  *(_QWORD *)v3 = *((_QWORD *)v4 + 10);
  return EntityInteraction::setInteractText((int *)(v3 + 8), (int *)v4 + 22);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-90h]@10
  int v33; // [sp+4h] [bp-8Ch]@10
  int v34; // [sp+8h] [bp-88h]@16
  int v35; // [sp+Ch] [bp-84h]@20
  char v36; // [sp+14h] [bp-7Ch]@20
  int v37; // [sp+18h] [bp-78h]@20
  void *ptr; // [sp+1Ch] [bp-74h]@20
  int v39; // [sp+20h] [bp-70h]@20
  int v40; // [sp+24h] [bp-6Ch]@20
  char v41; // [sp+28h] [bp-68h]@20
  char v42; // [sp+29h] [bp-67h]@20
  int v43; // [sp+30h] [bp-60h]@4
  int v44; // [sp+34h] [bp-5Ch]@4
  char v45; // [sp+38h] [bp-58h]@3
  int v46; // [sp+6Ch] [bp-24h]@3
  int v47; // [sp+70h] [bp-20h]@1
  int v48; // [sp+74h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_17contextual_search35contextual_search_game_clips_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>::xbox_live_result(
    (xbox::services::contextual_search::contextual_search_game_clips_result *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::contextual_search::contextual_search_game_clips_result::~contextual_search_game_clips_result((xbox::services::contextual_search::contextual_search_game_clips_result *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::set(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)#1}::operator() const(
           a1,
           a2);
}


int (**__fastcall pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r7@1
  unsigned int *v5; // r0@3
  unsigned int v6; // r1@5
  int v7; // r9@8
  unsigned int *v8; // r1@9
  unsigned int v9; // r0@11
  unsigned int *v10; // r6@15
  unsigned int v11; // r0@17
  int v12; // r0@24
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@26
  int v14; // r0@30
  int v15; // r1@34
  int v16; // r5@35

  v2 = a2;
  v3 = a1;
  *(_DWORD *)(a1 + 84) = *(_DWORD *)(a2 + 4);
  v4 = *(_DWORD *)(a2 + 8);
  if ( v4 != *(_DWORD *)(a1 + 88) )
  {
    if ( v4 )
    {
      v5 = (unsigned int *)(v4 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 + 1, v5) );
      }
      else
        ++*v5;
    }
    v7 = *(_DWORD *)(v3 + 88);
    if ( v7 )
      v8 = (unsigned int *)(v7 + 4);
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
        v9 = (*v8)--;
      if ( v9 == 1 )
        v10 = (unsigned int *)(v7 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 - 1, v10) );
        }
        else
          v11 = (*v10)--;
        if ( v11 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
    *(_DWORD *)(v3 + 88) = v4;
  }
  *(_DWORD *)(v3 + 92) = *(_DWORD *)(v2 + 12);
  if ( &pthread_create )
    v12 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v3 + 20));
    if ( v12 )
      sub_21E5E14(v12);
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
      v14 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v3 + 36));
      if ( v14 )
        sub_21E5E14(v14);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 36));
    else
    v15 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v15 )
      do
        v16 = *(_DWORD *)(v15 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v15);
        v15 = v16;
      while ( v16 );
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}::operator() const(int a1, int *a2)
{
  return pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}::operator() const(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::set(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  int *v3; // r7@1
  int v4; // r4@1
  int v5; // r5@1
  const std::__exception_ptr::exception_ptr *v6; // r6@1
  pthread_mutex_t *v7; // r8@1
  int v8; // r0@2
  unsigned int v9; // r0@4
  signed int v10; // r7@4
  bool v11; // zf@5
  int v12; // r0@9
  int v13; // r1@10
  int v14; // r5@12
  unsigned int *v15; // r1@13
  unsigned int v16; // r0@15
  unsigned int *v17; // r4@19
  unsigned int v18; // r0@21
  int v19; // r5@26
  unsigned int *v20; // r1@27
  unsigned int v21; // r0@29
  unsigned int *v22; // r4@33
  unsigned int v23; // r0@35
  char v25; // [sp+4h] [bp-2Ch]@9
  int v26; // [sp+8h] [bp-28h]@9
  int v27; // [sp+Ch] [bp-24h]@9
  char v28; // [sp+10h] [bp-20h]@9

  v3 = a1;
  v4 = *a1;
  v5 = a3;
  v6 = a2;
  v7 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_1(v7);
    if ( v8 )
      sub_21E5E14(v8);
    v4 = *v3;
  }
  v9 = *(_WORD *)(v4 + 96);
  v10 = 0;
  if ( v9 <= 0xFF )
    v11 = (unsigned __int8)v9 == 0;
    if ( !(_BYTE)v9 )
    {
      v10 = 0;
      v11 = *(_DWORD *)(v4 + 88) == 0;
    }
    if ( v11 )
      j_std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v25, v6);
      v26 = 0;
      j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details16_ExceptionHolderESaIS6_EJRNSt15__exception_ptr13exception_ptrERKNS5_22_TaskCreationCallstackEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
        &v27,
        0,
        (int)&v28,
        (const std::__exception_ptr::exception_ptr *)&v25,
        v5);
      v12 = v27;
      if ( v27 )
      {
        v13 = (*(int (**)(void))(*(_DWORD *)v27 + 16))();
        v12 = v27;
      }
      else
        v13 = 0;
      v27 = 0;
      *(_DWORD *)(v4 + 88) = v13;
      v14 = *(_DWORD *)(v4 + 92);
      *(_DWORD *)(v4 + 92) = v12;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v19 = v27;
        v20 = (unsigned int *)(v27 + 4);
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
          v21 = (*v20)--;
        if ( v21 == 1 )
          v22 = (unsigned int *)(v19 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
      j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v25);
      v10 = 1;
    j_pthread_mutex_unlock_1(v7);
  return v10;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  return pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::_StoreException<std::__exception_ptr::exception_ptr>(
           a1,
           a2,
           a3);
}


pplx::_pplx_g_sched_t *__fastcall pplx::_pplx_g_sched_t::~_pplx_g_sched_t(pplx::_pplx_g_sched_t *this)
{
  pplx::_pplx_g_sched_t *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r7@8
  unsigned int v6; // r0@10

  v1 = this;
  *(_DWORD *)this = 2;
  v2 = *((_DWORD *)this + 3);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  return v1;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r7@1
  int v3; // r5@1
  int *v4; // r6@1
  pthread_mutex_t *v5; // r8@1
  int v6; // r0@2
  int v7; // r6@7
  char *v8; // r0@7
  __int64 v9; // r0@9
  int v10; // r1@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v14; // r2@21
  signed int v15; // r1@23
  char v16; // [sp+8h] [bp-58h]@7
  void *v17; // [sp+34h] [bp-2Ch]@7
  int v18; // [sp+38h] [bp-28h]@7
  int v19; // [sp+3Ch] [bp-24h]@7
  char *v20; // [sp+40h] [bp-20h]@7

  v2 = a1;
  v3 = *a1;
  v4 = a2;
  v5 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1(v5);
    if ( v6 )
      sub_21E5E14(v6);
    v3 = *v2;
  }
  if ( *(_DWORD *)(v3 + 76) )
    (*(void (__cdecl **)(int))(*(_DWORD *)*v4 + 8))(*v4);
  else if ( *(_BYTE *)(v3 + 84) )
    v7 = *v4;
    j___aeabi_memclr8_1((int)&v16, 44);
    v17 = &unk_28898CC;
    v18 = 0;
    v19 = ((int (*)(void))byte_21E9640)();
    v20 = (char *)&unk_28898CC;
    j_xbox::services::tournaments::tournament_request_result::operator=((int)&v16, v3 + 16);
    *(_QWORD *)&v18 = *(_QWORD *)(v3 + 64);
    EntityInteraction::setInteractText((int *)&v20, (int *)(v3 + 72));
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v16);
    v8 = v20 - 12;
    if ( (int *)(v20 - 12) != &dword_28898C0 )
    {
      v14 = (unsigned int *)(v20 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
      }
      else
        v15 = (*v14)--;
      if ( v15 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::tournaments::tournament_request_result::~tournament_request_result((xbox::services::tournaments::tournament_request_result *)&v16);
  else
    v9 = *(_QWORD *)(v3 + 4);
    if ( (_DWORD)v9 == HIDWORD(v9) )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>> const&>(
        (unsigned __int64 *)v3,
        (int)v4);
    else
      *(_DWORD *)v9 = *v4;
      HIDWORD(v9) = v4[1];
      *(_DWORD *)(v9 + 4) = HIDWORD(v9);
      if ( HIDWORD(v9) )
        v11 = (unsigned int *)(v10 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v12 = __ldrex(v11);
          while ( __strex(v12 + 1, v11) );
        }
        else
          ++*v11;
      *(_DWORD *)(v3 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27660B4;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 128);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::game_server_platform::cluster_result::~cluster_result((xbox::services::game_server_platform::cluster_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall std::_Function_base::_Base_manager<std::function<bool ()(unsigned char)> pplx::details::_MakeUnitToTFunc<bool>(std::function const&<bool ()(void)>)::{lambda(unsigned char)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  int v9; // r1@8
  int v10; // r2@8
  int v11; // r3@8
  void **v12; // r0@8
  int *v13; // r8@8
  int *v14; // r11@8
  int *v15; // r9@11
  unsigned int *v16; // r2@15
  signed int v17; // r1@17
  int v18; // r7@23
  void *v19; // r0@25
  void **v20; // r0@28
  void *v21; // r5@29
  unsigned int *v22; // r1@30
  unsigned int v23; // r0@32
  unsigned int *v24; // r6@36
  unsigned int v25; // r0@38
  int *v26; // r6@45
  int v27; // r7@46
  unsigned int *v28; // r1@47
  unsigned int v29; // r0@49
  unsigned int *v30; // r5@53
  unsigned int v31; // r0@55
  char v33; // [sp+8h] [bp-60h]@25
  int v34; // [sp+38h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 40);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 40);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v13 = 0;
      v14 = 0;
      v5 = 0;
    else
      v9 = *(_DWORD *)(v3 + 4);
      v10 = *(_DWORD *)(v3 + 8);
      v11 = (int)(v4 + 4);
      *(_DWORD *)v11 = *(_DWORD *)v3;
      *(_DWORD *)(v11 + 4) = v9;
      *(_DWORD *)(v11 + 8) = v10;
      EntityInteraction::setInteractText((int *)v4 + 7, (int *)(v3 + 12));
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      EntityInteraction::setInteractText((int *)v4 + 9, (int *)(v3 + 20));
      j_std::vector<xbox::services::game_server_platform::game_server_port_mapping,std::allocator<xbox::services::game_server_platform::game_server_port_mapping>>::operator=(
        (int)(v4 + 10),
        (unsigned __int64 *)(v3 + 24));
      *((_QWORD *)v4 + 7) = *(_QWORD *)(v3 + 40);
      EntityInteraction::setInteractText((int *)v4 + 16, (int *)(v3 + 48));
      *((_BYTE *)*v2 + 80) = 1;
      v12 = *v2;
      v13 = (int *)**v2;
      *v12 = 0;
      v14 = (int *)v12[1];
      v12[1] = 0;
      v12[2] = 0;
      if ( v13 != v14 )
      {
        v15 = v13;
        do
        {
          v18 = *v15;
          if ( *(_DWORD *)(*v15 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v18 + 8))(v18, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>::xbox_live_result(
              (xbox::services::game_server_platform::cluster_result *)&v33,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_FinalizeAndRunContinuations(
              v18,
              (int)&v33);
            v19 = (void *)(v34 - 12);
            if ( (int *)(v34 - 12) != &dword_28898C0 )
            {
              v16 = (unsigned int *)(v34 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v17 = __ldrex(v16);
                while ( __strex(v17 - 1, v16) );
              }
              else
                v17 = (*v16)--;
              if ( v17 <= 0 )
                j_j_j_j__ZdlPv_9(v19);
            }
            j_xbox::services::game_server_platform::cluster_result::~cluster_result((xbox::services::game_server_platform::cluster_result *)&v33);
          v15 += 2;
        }
        while ( v15 != v14 );
      }
      v20 = *v2;
      if ( (*v2)[18] )
        v20[18] = 0;
        v21 = v20[19];
        v20[19] = 0;
        if ( v21 )
          v22 = (unsigned int *)((char *)v21 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            v24 = (unsigned int *)((char *)v21 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v21 + 8))(v21);
            if ( &pthread_create )
              __dmb();
              do
                v25 = __ldrex(v24);
              while ( __strex(v25 - 1, v24) );
            else
              v25 = (*v24)--;
            if ( v25 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v21 + 12))(v21);
      v5 = 1;
    if ( v13 != v14 )
      v26 = v13;
      do
        v27 = v26[1];
        if ( v27 )
          v28 = (unsigned int *)(v27 + 4);
              v29 = __ldrex(v28);
            while ( __strex(v29 - 1, v28) );
            v29 = (*v28)--;
          if ( v29 == 1 )
            v30 = (unsigned int *)(v27 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
                v31 = __ldrex(v30);
              while ( __strex(v31 - 1, v30) );
              v31 = (*v30)--;
            if ( v31 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
        v26 += 2;
      while ( v26 != v14 );
    if ( v13 )
      j_operator delete(v13);
  }
  return v5;
}


void __fastcall pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#1}>(int a1, int *a2, int a3, int a4)
{
  pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#1}>(
    a1,
    a2,
    a3,
    a4);
}


void __fastcall pplx::task<void>::then<web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(void)#1}>(int a1, int *a2, int a3, int a4)
{
  int v4; // lr@0
  int v5; // r7@1
  int v6; // r4@1
  int v7; // r5@1
  int *v8; // r6@1
  __int64 v9; // r0@1
  int v10; // [sp+0h] [bp-28h]@1
  void *ptr; // [sp+4h] [bp-24h]@1
  int v12; // [sp+8h] [bp-20h]@1
  int v13; // [sp+Ch] [bp-1Ch]@1

  v5 = a1;
  v12 = 0;
  v13 = 0;
  v6 = a4;
  ptr = 0;
  v7 = a3;
  v8 = a2;
  v10 = v4;
  *(_BYTE *)(a4 + 20) = 1;
  *(_DWORD *)(a4 + 24) = v4;
  LODWORD(v9) = a4 + 28;
  HIDWORD(v9) = (unsigned int)&v10 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v9);
  if ( ptr )
    j_operator delete(ptr);
  j_pplx::task<unsigned char>::_ThenImpl<void,web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(void)#1}>(
    v5,
    v8,
    v7,
    v6);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[16]; // [sp+8h] [bp-60h]@7
  int v18; // [sp+48h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 88) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 96) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>::xbox_live_result(
      (xbox::services::title_storage::title_storage_blob_metadata *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::get(xbox::services::tournaments::team_request_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::tournaments::team_request_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_RegisterTask(
           a1,
           a2);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  void *v12; // r4@19
  void *v13; // r5@19
  int v14; // r1@24
  void *v15; // r0@24
  int v16; // r5@25
  int v17; // r7@25
  int v18; // r4@26
  unsigned int *v19; // r1@27
  unsigned int v20; // r0@29
  unsigned int *v21; // r6@33
  unsigned int v22; // r0@35
  unsigned int *v24; // r2@45
  signed int v25; // r1@47
  unsigned int *v26; // r2@49
  signed int v27; // r1@51

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 12);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 10);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v10 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = (void *)(*(unsigned __int64 *)((char *)v1 + 20) >> 32);
  v13 = (void *)*(unsigned __int64 *)((char *)v1 + 20);
  if ( v13 != v12 )
    do
      j_std::_Destroy<xbox::services::user_statistics::service_configuration_statistic>((int)v13);
      v13 = (char *)v13 + 16;
    while ( v12 != v13 );
    v13 = (void *)*((_DWORD *)v1 + 5);
  if ( v13 )
    j_operator delete(v13);
  v14 = *((_DWORD *)v1 + 4);
  v15 = (void *)(v14 - 12);
  if ( (int *)(v14 - 12) != &dword_28898C0 )
    v26 = (unsigned int *)(v14 - 4);
        v27 = __ldrex(v26);
      while ( __strex(v27 - 1, v26) );
      v27 = (*v26)--;
    if ( v27 <= 0 )
      j_j_j_j__ZdlPv_9(v15);
  v17 = *v1 >> 32;
  v16 = *v1;
  if ( v16 != v17 )
      v18 = *(_DWORD *)(v16 + 4);
      if ( v18 )
        v19 = (unsigned int *)(v18 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          v21 = (unsigned int *)(v18 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 8))(v18);
          if ( &pthread_create )
          {
            __dmb();
            do
              v22 = __ldrex(v21);
            while ( __strex(v22 - 1, v21) );
          }
          else
            v22 = (*v21)--;
          if ( v22 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 12))(v18);
      v16 += 8;
    while ( v16 != v17 );
    v16 = *(_DWORD *)v1;
  if ( v16 )
    j_operator delete((void *)v16);
  return v1;
}


void __fastcall pplx::details::_CancellationTokenState::_Cancel(pplx::details::_CancellationTokenState *this)
{
  pplx::details::_CancellationTokenState *v1; // r5@1
  unsigned int *v2; // r7@1
  unsigned int v3; // r1@2
  int v4; // r0@5
  int v5; // r4@6
  int v6; // r6@9
  int v7; // r0@12
  int v8; // r5@18

  v1 = this;
  v2 = (unsigned int *)((char *)this + 8);
  __dmb();
  do
  {
    v3 = __ldrex(v2);
    if ( v3 )
    {
      __clrex();
      __dmb();
      return;
    }
  }
  while ( __strex(1u, v2) );
  if ( &pthread_create )
    v4 = pthread_mutex_lock((pthread_mutex_t *)this + 1);
    if ( v4 )
      sub_119CCFC(v4);
  v5 = *((_DWORD *)v1 + 7);
  *((_DWORD *)v1 + 7) = 0;
  *((_DWORD *)v1 + 8) = 0;
    pthread_mutex_unlock((pthread_mutex_t *)v1 + 1);
  if ( v5 )
    v6 = v5;
    do
      pplx::details::_CancellationTokenRegistration::_Invoke(*(pplx::details::_CancellationTokenRegistration **)v6);
      v6 = *(_DWORD *)(v6 + 4);
    while ( v6 );
  *v2 = 2;
    v7 = pthread_mutex_lock((pthread_mutex_t *)((char *)v1 + 12));
    if ( v7 )
      sub_119CCFC(v7);
    *((_BYTE *)v1 + 20) = 1;
    sub_119E3C8((pthread_cond_t *)((char *)v1 + 16));
    if ( &pthread_create )
      pthread_mutex_unlock((pthread_mutex_t *)((char *)v1 + 12));
  else
      v8 = *(_DWORD *)(v5 + 4);
      free((void *)v5);
      v5 = v8;
    while ( v8 );
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-F8h]@10
  int v33; // [sp+4h] [bp-F4h]@10
  int v34; // [sp+8h] [bp-F0h]@16
  int v35; // [sp+Ch] [bp-ECh]@20
  char v36; // [sp+14h] [bp-E4h]@20
  int v37; // [sp+18h] [bp-E0h]@20
  void *ptr; // [sp+1Ch] [bp-DCh]@20
  int v39; // [sp+20h] [bp-D8h]@20
  int v40; // [sp+24h] [bp-D4h]@20
  char v41; // [sp+28h] [bp-D0h]@20
  char v42; // [sp+29h] [bp-CFh]@20
  int v43; // [sp+30h] [bp-C8h]@4
  int v44; // [sp+34h] [bp-C4h]@4
  char v45; // [sp+38h] [bp-C0h]@3
  int v46; // [sp+D0h] [bp-28h]@3
  int v47; // [sp+D8h] [bp-20h]@1
  int v48; // [sp+DCh] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_11tournaments10tournamentEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::tournaments::tournament>::xbox_live_result(
    (xbox::services::tournaments::tournament *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::tournaments::tournament::~tournament((xbox::services::tournaments::tournament *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


signed int __fastcall pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  int *v3; // r7@1
  int v4; // r5@1
  int v5; // r4@1
  const std::__exception_ptr::exception_ptr *v6; // r6@1
  pthread_mutex_t *v7; // r10@1
  int v8; // r0@2
  signed int v9; // r7@5
  int v10; // r0@9
  int v11; // r1@10
  int v12; // r5@12
  unsigned int *v13; // r1@13
  unsigned int v14; // r0@15
  unsigned int *v15; // r4@19
  unsigned int v16; // r0@21
  int v17; // r5@26
  unsigned int *v18; // r1@27
  unsigned int v19; // r0@29
  unsigned int *v20; // r4@33
  unsigned int v21; // r0@35
  char v23; // [sp+8h] [bp-30h]@9
  int v24; // [sp+Ch] [bp-2Ch]@9
  int v25; // [sp+10h] [bp-28h]@9
  char v26; // [sp+14h] [bp-24h]@9

  v3 = a1;
  v4 = a3;
  v5 = *a1;
  v6 = a2;
  v7 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 12));
    if ( v8 )
      sub_21E5E14(v8);
    v5 = *v3;
  }
  if ( *(_BYTE *)(v5 + 40) )
    v9 = 0;
  else if ( *(_BYTE *)(v5 + 41) )
  else
    if ( !*(_DWORD *)(v5 + 32) )
    {
      j_std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v23, v6);
      v24 = 0;
      j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details16_ExceptionHolderESaIS6_EJRNSt15__exception_ptr13exception_ptrERKNS5_22_TaskCreationCallstackEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
        &v25,
        0,
        (int)&v26,
        (const std::__exception_ptr::exception_ptr *)&v23,
        v4);
      v10 = v25;
      if ( v25 )
      {
        v11 = (*(int (**)(void))(*(_DWORD *)v25 + 16))();
        v10 = v25;
      }
      else
        v11 = 0;
      v25 = 0;
      *(_DWORD *)(v5 + 32) = v11;
      v12 = *(_DWORD *)(v5 + 36);
      *(_DWORD *)(v5 + 36) = v10;
      if ( v12 )
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      v17 = v25;
        v18 = (unsigned int *)(v25 + 4);
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v23);
      v9 = 1;
    }
    j_pthread_mutex_unlock_1(v7);
  return v9;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::get(xbox::services::tournaments::tournament_request_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::tournaments::tournament_request_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<void>>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  int *v3; // r7@1
  int v4; // r4@1
  int v5; // r5@1
  const std::__exception_ptr::exception_ptr *v6; // r6@1
  pthread_mutex_t *v7; // r8@1
  int v8; // r0@2
  unsigned int v9; // r0@4
  signed int v10; // r7@4
  bool v11; // zf@5
  int v12; // r0@9
  int v13; // r1@10
  int v14; // r5@12
  unsigned int *v15; // r1@13
  unsigned int v16; // r0@15
  unsigned int *v17; // r4@19
  unsigned int v18; // r0@21
  int v19; // r5@26
  unsigned int *v20; // r1@27
  unsigned int v21; // r0@29
  unsigned int *v22; // r4@33
  unsigned int v23; // r0@35
  char v25; // [sp+4h] [bp-2Ch]@9
  int v26; // [sp+8h] [bp-28h]@9
  int v27; // [sp+Ch] [bp-24h]@9
  char v28; // [sp+10h] [bp-20h]@9

  v3 = a1;
  v4 = *a1;
  v5 = a3;
  v6 = a2;
  v7 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_1(v7);
    if ( v8 )
      sub_21E5E14(v8);
    v4 = *v3;
  }
  v9 = *(_WORD *)(v4 + 36);
  v10 = 0;
  if ( v9 <= 0xFF )
    v11 = (unsigned __int8)v9 == 0;
    if ( !(_BYTE)v9 )
    {
      v10 = 0;
      v11 = *(_DWORD *)(v4 + 28) == 0;
    }
    if ( v11 )
      j_std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v25, v6);
      v26 = 0;
      j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details16_ExceptionHolderESaIS6_EJRNSt15__exception_ptr13exception_ptrERKNS5_22_TaskCreationCallstackEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
        &v27,
        0,
        (int)&v28,
        (const std::__exception_ptr::exception_ptr *)&v25,
        v5);
      v12 = v27;
      if ( v27 )
      {
        v13 = (*(int (**)(void))(*(_DWORD *)v27 + 16))();
        v12 = v27;
      }
      else
        v13 = 0;
      v27 = 0;
      *(_DWORD *)(v4 + 28) = v13;
      v14 = *(_DWORD *)(v4 + 32);
      *(_DWORD *)(v4 + 32) = v12;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v19 = v27;
        v20 = (unsigned int *)(v27 + 4);
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
          v21 = (*v20)--;
        if ( v21 == 1 )
          v22 = (unsigned int *)(v19 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
      j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v25);
      v10 = 1;
    j_pthread_mutex_unlock_1(v7);
  return v10;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_2767240;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 128);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::title_storage::title_storage_quota::~title_storage_quota((xbox::services::title_storage::title_storage_quota *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>(
           a1,
           a2,
           a3);
}


void *__fastcall pplx::_pplx_g_sched_t::get_scheduler(pplx::_pplx_g_sched_t *this, int a2)
{
  int v2; // r5@1
  pplx::_pplx_g_sched_t *v3; // r4@1
  int v4; // r0@2
  unsigned int *v5; // r7@3
  pplx::details::platform *v6; // r0@3
  unsigned int v7; // r1@4
  void *result; // r0@7
  char *v9; // r2@7
  _DWORD *v10; // r0@16
  int v11; // r2@16
  int v12; // r9@18
  unsigned int *v13; // r1@19
  unsigned int v14; // r0@21
  unsigned int *v15; // r6@25
  unsigned int v16; // r0@27
  unsigned int v17; // r1@33
  unsigned int v18; // r1@38

  v2 = a2;
  v3 = this;
  if ( *(_DWORD *)a2 == 1 )
  {
    v4 = *(_DWORD *)(a2 + 8);
    if ( !v4 )
    {
      v5 = (unsigned int *)(a2 + 4);
      v6 = (pplx::details::platform *)1;
      __dmb();
      do
      {
        v7 = __ldrex(v5);
        if ( v7 )
        {
          __dmb();
          while ( 1 )
          {
            j_pplx::details::platform::YieldExecution(v6);
            __dmb();
            while ( 1 )
            {
              v6 = (pplx::details::platform *)__ldrex(v5);
              if ( v6 )
                break;
              if ( !__strex(1u, v5) )
                goto LABEL_15;
            }
          }
        }
      }
      while ( __strex(1u, v5) );
LABEL_15:
      if ( !*(_DWORD *)(v2 + 8) )
        v10 = j_operator new(0x10u);
        *v10 = &off_276BF20;
        v10[1] = 1;
        v10[2] = 1;
        v10[3] = &off_276CCA4;
        v11 = (int)(v10 + 3);
        if ( !v10 )
          v11 = 0;
        *(_DWORD *)(v2 + 8) = v11;
        v12 = *(_DWORD *)(v2 + 12);
        *(_DWORD *)(v2 + 12) = v10;
        if ( v12 )
          v13 = (unsigned int *)(v12 + 4);
          if ( &pthread_create )
            do
              v14 = __ldrex(v13);
            while ( __strex(v14 - 1, v13) );
          else
            v14 = (*v13)--;
          if ( v14 == 1 )
            v15 = (unsigned int *)(v12 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
            if ( &pthread_create )
              __dmb();
              do
                v16 = __ldrex(v15);
              while ( __strex(v16 - 1, v15) );
            else
              v16 = (*v15)--;
            if ( v16 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
        v17 = __ldrex(v5);
      while ( __strex(0, v5) );
      v4 = *(_DWORD *)(v2 + 8);
    }
    *(_DWORD *)v3 = v4;
    result = *(void **)(v2 + 12);
    *((_DWORD *)v3 + 1) = result;
    if ( result )
      result = (char *)result + 4;
      if ( &pthread_create )
        __dmb();
        do
          v18 = __ldrex((unsigned int *)result);
        while ( __strex(v18 + 1, (unsigned int *)result) );
      else
        ++*(_DWORD *)result;
  }
  else
    result = j_operator new(0x10u);
    *(_DWORD *)result = &off_276BF20;
    *((_DWORD *)result + 1) = 1;
    *((_DWORD *)result + 2) = 1;
    *((_DWORD *)result + 3) = &off_276CCA4;
    v9 = (char *)result + 12;
    if ( !result )
      v9 = 0;
    *(_DWORD *)v3 = v9;
  return result;
}


int (__fastcall *__fastcall pplx::details::_MakeTToUnitFunc<std::string>(int a1, int a2))(int *a1, int *a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  int (__fastcall *result)(int *, int *); // r0@5
  char v8; // [sp+4h] [bp-24h]@2
  int (*v9)(void); // [sp+Ch] [bp-1Ch]@1
  int v10; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v9 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v8);
    v10 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v9 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v8, 2);
    v5 = v9;
    v6[3] = v10;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  result = std::_Function_handler<unsigned char ()(std::string),std::function<unsigned char ()(std::string)> pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}>::_M_invoke;
  *(_DWORD *)(v3 + 8) = std::_Function_base::_Base_manager<std::function<unsigned char ()(std::string)> pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}>::_M_manager;
  *(_DWORD *)(v3 + 12) = std::_Function_handler<unsigned char ()(std::string),std::function<unsigned char ()(std::string)> pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}>::_M_invoke;
    result = (int (__fastcall *)(int *, int *))v5();
  return result;
}


int (**__fastcall pplx::details::_Task_impl<Social::XboxProfile>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r3@1
  int v5; // r1@1
  int v6; // r2@1
  int v7; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v9; // r0@8
  int v10; // r1@12
  int v11; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  EntityInteraction::setInteractText((int *)(v2 + 84), v3 + 1);
  EntityInteraction::setInteractText((int *)(v2 + 88), v3 + 2);
  EntityInteraction::setInteractText((int *)(v2 + 92), v3 + 3);
  EntityInteraction::setInteractText((int *)(v2 + 96), v3 + 4);
  v4 = v2 + 100;
  v5 = v3[6];
  v6 = v3[7];
  *(_DWORD *)v4 = v3[5];
  *(_DWORD *)(v4 + 4) = v5;
  *(_DWORD *)(v4 + 8) = v6;
  EntityInteraction::setInteractText((int *)(v2 + 112), v3 + 8);
  EntityInteraction::setInteractText((int *)(v2 + 116), v3 + 9);
  EntityInteraction::setInteractText((int *)(v2 + 120), v3 + 10);
  *(_DWORD *)(v2 + 124) = v3[11];
  if ( &pthread_create )
  {
    v7 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
    if ( v7 )
      sub_21E5E14(v7);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v9 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 36));
      if ( v9 )
        sub_21E5E14(v9);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)(v2 + 36));
    }
    else
    v10 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v10 )
      do
      {
        v11 = *(_DWORD *)(v10 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v10);
        v10 = v11;
      }
      while ( v11 );
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}::operator() const(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<std::error_code>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl<std::error_code>::~_Task_impl(this);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<xbox::services::xbox_live_result<void>>),std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<void>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<void>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  int v30[29]; // [sp+8h] [bp-A0h]@25
  int v31; // [sp+7Ch] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 72);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 72);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::leaderboard::leaderboard_result::operator=((int *)v4 + 4, (int *)v3);
      *(_QWORD *)(v4 + 31) = *(_QWORD *)(v3 + 108);
      EntityInteraction::setInteractText((int *)v4 + 33, (int *)(v3 + 116));
      *((_BYTE *)*v2 + 144) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>::xbox_live_result(
              (xbox::services::leaderboard::leaderboard_result *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::leaderboard::leaderboard_result::~leaderboard_result((xbox::services::leaderboard::leaderboard_result *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[34] )
        v17[34] = 0;
        v18 = v17[35];
        v17[35] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_RegisterTask(
           a1,
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<void>>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<void>>::_StoreException<std::__exception_ptr::exception_ptr>(
           a1,
           a2,
           a3);
}


xbox::services::leaderboard::leaderboard_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::get(xbox::services::leaderboard::leaderboard_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::leaderboard::leaderboard_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27688B8;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 124);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27692EC;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 196);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::leaderboard::leaderboard_result::~leaderboard_result((xbox::services::leaderboard::leaderboard_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7((void *)v1);
}


int __fastcall pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}::operator() const(int a1, int *a2)
{
  int v2; // r4@1
  void (__fastcall *v3)(int, char **); // r2@3
  char *v4; // r0@3
  char *v5; // r0@4
  unsigned int *v7; // r2@6
  signed int v8; // r1@8
  unsigned int *v9; // r2@10
  signed int v10; // r1@12
  char *v11; // [sp+0h] [bp-28h]@1
  char *v12; // [sp+Ch] [bp-1Ch]@3

  v2 = a1;
  sub_21E8AF4((int *)&v11, a2);
  if ( !*(_DWORD *)(v2 + 8) )
    sub_21E5F48();
  v3 = *(void (__fastcall **)(int, char **))(v2 + 12);
  v12 = v11;
  v11 = (char *)&unk_28898CC;
  v3(v2, &v12);
  v4 = v12 - 12;
  if ( (int *)(v12 - 12) != &dword_28898C0 )
  {
    v7 = (unsigned int *)(v12 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 <= 0 )
      j_j_j_j__ZdlPv_9(v4);
  }
  v5 = v11 - 12;
  if ( (int *)(v11 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v11 - 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v5);
  return 0;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[16]; // [sp+8h] [bp-60h]@7
  int v18; // [sp+48h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 88) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 96) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::system::token_result>::xbox_live_result(
      (xbox::services::system::token_result *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::system::token_result::~token_result((xbox::services::system::token_result *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::~_Task_impl(a1);
}


int (**__fastcall pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r6@1
  unsigned int *v4; // r0@3
  unsigned int v5; // r1@5
  int v6; // r5@8
  unsigned int *v7; // r1@9
  unsigned int v8; // r0@11
  unsigned int *v9; // r7@15
  unsigned int v10; // r0@17
  int v11; // r0@24
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@26
  int v13; // r0@30
  int v14; // r1@34
  int v15; // r5@35

  v2 = a1;
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  if ( v3 != *(_DWORD *)(a1 + 84) )
  {
    if ( v3 )
    {
      v4 = (unsigned int *)(v3 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v5 = __ldrex(v4);
        while ( __strex(v5 + 1, v4) );
      }
      else
        ++*v4;
    }
    v6 = *(_DWORD *)(v2 + 84);
    if ( v6 )
      v7 = (unsigned int *)(v6 + 4);
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
        v8 = (*v7)--;
      if ( v8 == 1 )
        v9 = (unsigned int *)(v6 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
        if ( &pthread_create )
        {
          __dmb();
          do
            v10 = __ldrex(v9);
          while ( __strex(v10 - 1, v9) );
        }
        else
          v10 = (*v9)--;
        if ( v10 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
    *(_DWORD *)(v2 + 84) = v3;
  }
  if ( &pthread_create )
    v11 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v11 )
      sub_21E5E14(v11);
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
      v13 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v13 )
        sub_21E5E14(v13);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    else
    v14 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v14 )
      do
        v15 = *(_DWORD *)(v14 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v14);
        v14 = v15;
      while ( v15 );
  return result;
}


int __fastcall pplx::details::_MakeUnitToUnitFunc(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(unsigned char),pplx::details::_MakeUnitToUnitFunc(std::function<void ()(void)> const&)::{lambda(unsigned char)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<pplx::details::_MakeUnitToUnitFunc(std::function<void ()(void)> const&)::{lambda(unsigned char)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


void __fastcall pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#2}::operator() const(void)::{lambda(void)#1}>(int a1, int *a2, int a3, int a4)
{
  int v4; // lr@0
  int v5; // r7@1
  int v6; // r4@1
  int v7; // r5@1
  int *v8; // r6@1
  __int64 v9; // r0@1
  int v10; // [sp+0h] [bp-28h]@1
  void *ptr; // [sp+4h] [bp-24h]@1
  int v12; // [sp+8h] [bp-20h]@1
  int v13; // [sp+Ch] [bp-1Ch]@1

  v5 = a1;
  v12 = 0;
  v13 = 0;
  v6 = a4;
  ptr = 0;
  v7 = a3;
  v8 = a2;
  v10 = v4;
  *(_BYTE *)(a4 + 20) = 1;
  *(_DWORD *)(a4 + 24) = v4;
  LODWORD(v9) = a4 + 28;
  HIDWORD(v9) = (unsigned int)&v10 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v9);
  if ( ptr )
    operator delete(ptr);
  pplx::task<unsigned char>::_ThenImpl<void,Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#2}::operator() const(void)::{lambda(void)#1}>(
    v5,
    v8,
    v7,
    v6);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::leaderboard::leaderboard_result::leaderboard_result((xbox::services::leaderboard::leaderboard_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 124) = 0;
  *(_DWORD *)(v1 + 128) = v3;
  *(_DWORD *)(v1 + 132) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 144) = 0;
  *(_DWORD *)(v1 + 136) = 0;
  *(_DWORD *)(v1 + 140) = 0;
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(std::function const&<void ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)>)::{lambda(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  unsigned int *v15; // r2@19
  signed int v16; // r1@21
  int v17; // r7@30
  void *v18; // r0@32
  void *v19; // r0@33
  void **v20; // r0@35
  void *v21; // r5@36
  unsigned int *v22; // r1@37
  unsigned int v23; // r0@39
  unsigned int *v24; // r6@43
  unsigned int v25; // r0@45
  int *v26; // r6@52
  int v27; // r7@53
  unsigned int *v28; // r1@54
  unsigned int v29; // r0@56
  unsigned int *v30; // r5@60
  unsigned int v31; // r0@62
  int v33; // [sp+8h] [bp-38h]@19
  int v34; // [sp+14h] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 20);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 20);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      *(_QWORD *)(v4 + 5) = *(_QWORD *)(v3 + 4);
      EntityInteraction::setInteractText((int *)v4 + 7, (int *)(v3 + 12));
      *((_BYTE *)*v2 + 40) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v17 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v17 + 8))(v17, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<std::string>::xbox_live_result((int)&v33, (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_FinalizeAndRunContinuations(
              v17,
              &v33);
            v18 = (void *)(v34 - 12);
            if ( (int *)(v34 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v34 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v18);
            }
            v19 = (void *)(v33 - 12);
            if ( (int *)(v33 - 12) != &dword_28898C0 )
              v15 = (unsigned int *)(v33 - 4);
                  v16 = __ldrex(v15);
                while ( __strex(v16 - 1, v15) );
                v16 = (*v15)--;
              if ( v16 <= 0 )
                j_j_j_j__ZdlPv_9(v19);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v20 = *v2;
      if ( (*v2)[8] )
        v20[8] = 0;
        v21 = v20[9];
        v20[9] = 0;
        if ( v21 )
          v22 = (unsigned int *)((char *)v21 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            v24 = (unsigned int *)((char *)v21 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v21 + 8))(v21);
            if ( &pthread_create )
              __dmb();
              do
                v25 = __ldrex(v24);
              while ( __strex(v25 - 1, v24) );
            else
              v25 = (*v24)--;
            if ( v25 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v21 + 12))(v21);
      v5 = 1;
    if ( v10 != v11 )
      v26 = v10;
      do
        v27 = v26[1];
        if ( v27 )
          v28 = (unsigned int *)(v27 + 4);
              v29 = __ldrex(v28);
            while ( __strex(v29 - 1, v28) );
            v29 = (*v28)--;
          if ( v29 == 1 )
            v30 = (unsigned int *)(v27 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
                v31 = __ldrex(v30);
              while ( __strex(v31 - 1, v30) );
              v31 = (*v30)--;
            if ( v31 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
        v26 += 2;
      while ( v26 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


void __fastcall pplx::details::_Task_impl<web::http::http_response>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<web::http::http_response>::~_Task_impl(a1);
}


void __fastcall pplx::details::_Task_impl<int>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = this;
  *(_DWORD *)this = &off_26DD800;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  j_j_j__ZdlPv_4((void *)v1);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  int v9; // r12@8
  int v10; // r1@8
  int v11; // r2@8
  int v12; // r3@8
  void **v13; // r0@8
  int *v14; // r8@8
  int *v15; // r11@8
  int *v16; // r9@11
  unsigned int *v17; // r2@15
  signed int v18; // r1@17
  int v19; // r7@23
  void *v20; // r0@25
  void **v21; // r0@28
  void *v22; // r5@29
  unsigned int *v23; // r1@30
  unsigned int v24; // r0@32
  unsigned int *v25; // r6@36
  unsigned int v26; // r0@38
  int *v27; // r6@45
  int v28; // r7@46
  unsigned int *v29; // r1@47
  unsigned int v30; // r0@49
  unsigned int *v31; // r5@53
  unsigned int v32; // r0@55
  int v34[16]; // [sp+8h] [bp-70h]@25
  int v35; // [sp+48h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 48);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 48);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v14 = 0;
      v15 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      v4[5] = *(void **)(v3 + 4);
      EntityInteraction::setInteractText((int *)v4 + 6, (int *)(v3 + 8));
      v4[7] = *(void **)(v3 + 12);
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      EntityInteraction::setInteractText((int *)v4 + 9, (int *)(v3 + 20));
      v9 = (int)(v4 + 10);
      v10 = *(_DWORD *)(v3 + 28);
      v11 = *(_DWORD *)(v3 + 32);
      v12 = *(_DWORD *)(v3 + 36);
      *(_DWORD *)v9 = *(_DWORD *)(v3 + 24);
      *(_DWORD *)(v9 + 4) = v10;
      *(_DWORD *)(v9 + 8) = v11;
      *(_DWORD *)(v9 + 12) = v12;
      EntityInteraction::setInteractText((int *)v4 + 14, (int *)(v3 + 40));
      EntityInteraction::setInteractText((int *)v4 + 15, (int *)(v3 + 44));
      EntityInteraction::setInteractText((int *)v4 + 16, (int *)(v3 + 48));
      *((_QWORD *)v4 + 9) = *(_QWORD *)(v3 + 56);
      EntityInteraction::setInteractText((int *)v4 + 20, (int *)(v3 + 64));
      *((_BYTE *)*v2 + 96) = 1;
      v13 = *v2;
      v14 = (int *)**v2;
      *v13 = 0;
      v15 = (int *)v13[1];
      v13[1] = 0;
      v13[2] = 0;
      if ( v14 != v15 )
      {
        v16 = v14;
        do
        {
          v19 = *v16;
          if ( *(_DWORD *)(*v16 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v19 + 8))(v19, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>::xbox_live_result(
              (xbox::services::title_storage::title_storage_blob_metadata *)v34,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_FinalizeAndRunContinuations(
              v19,
              v34);
            v20 = (void *)(v35 - 12);
            if ( (int *)(v35 - 12) != &dword_28898C0 )
            {
              v17 = (unsigned int *)(v35 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v18 = __ldrex(v17);
                while ( __strex(v18 - 1, v17) );
              }
              else
                v18 = (*v17)--;
              if ( v18 <= 0 )
                j_j_j_j__ZdlPv_9(v20);
            }
            j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)v34);
          v16 += 2;
        }
        while ( v16 != v15 );
      }
      v21 = *v2;
      if ( (*v2)[22] )
        v21[22] = 0;
        v22 = v21[23];
        v21[23] = 0;
        if ( v22 )
          v23 = (unsigned int *)((char *)v22 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v24 = __ldrex(v23);
            while ( __strex(v24 - 1, v23) );
            v24 = (*v23)--;
          if ( v24 == 1 )
            v25 = (unsigned int *)((char *)v22 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v22 + 8))(v22);
            if ( &pthread_create )
              __dmb();
              do
                v26 = __ldrex(v25);
              while ( __strex(v26 - 1, v25) );
            else
              v26 = (*v25)--;
            if ( v26 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v22 + 12))(v22);
      v5 = 1;
    if ( v14 != v15 )
      v27 = v14;
      do
        v28 = v27[1];
        if ( v28 )
          v29 = (unsigned int *)(v28 + 4);
              v30 = __ldrex(v29);
            while ( __strex(v30 - 1, v29) );
            v30 = (*v29)--;
          if ( v30 == 1 )
            v31 = (unsigned int *)(v28 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
                v32 = __ldrex(v31);
              while ( __strex(v32 - 1, v31) );
              v32 = (*v31)--;
            if ( v32 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
        v27 += 2;
      while ( v27 != v15 );
    if ( v14 )
      j_operator delete(v14);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2767670;
  v12 = (xbox::services *)j_xbox::services::title_storage::title_storage_blob_metadata::title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 136) = 0;
  *(_DWORD *)(v3 + 140) = v13;
  *(_DWORD *)(v3 + 144) = &unk_28898CC;
  return v3;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::set_exception(int *a1, const std::__exception_ptr::exception_ptr *a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::set_exception(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<int>>(std::function const&<void ()(pplx::task<int>)>)::{lambda(pplx::task<int>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  std::function<void ()(pplx::task<int>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


void __fastcall pplx::details::_CancellationTokenState::~_CancellationTokenState(pplx::details::_CancellationTokenState *this)
{
  pplx::details::_CancellationTokenState *v1; // r0@1

  v1 = pplx::details::_CancellationTokenState::~_CancellationTokenState(this);
  j_j_j__ZdlPv_4((void *)v1);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  unsigned int *v15; // r2@19
  signed int v16; // r1@21
  int v17; // r7@30
  void *v18; // r0@32
  void *v19; // r4@33
  void *v20; // r7@33
  void *v21; // r0@38
  void **v22; // r0@40
  void *v23; // r5@41
  unsigned int *v24; // r1@42
  unsigned int v25; // r0@44
  unsigned int *v26; // r6@48
  unsigned int v27; // r0@50
  int *v28; // r6@57
  int v29; // r7@58
  unsigned int *v30; // r1@59
  unsigned int v31; // r0@61
  unsigned int *v32; // r5@65
  unsigned int v33; // r0@67
  int v35; // [sp+Ch] [bp-44h]@19
  __int64 v36; // [sp+10h] [bp-40h]@33
  int v37; // [sp+24h] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 26);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 26);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      j_std::vector<xbox::services::user_statistics::service_configuration_statistic,std::allocator<xbox::services::user_statistics::service_configuration_statistic>>::operator=(
        (int)(v4 + 5),
        (unsigned __int64 *)(v3 + 4));
      *((_QWORD *)v4 + 4) = *(_QWORD *)(v3 + 16);
      EntityInteraction::setInteractText((int *)v4 + 10, (int *)(v3 + 24));
      *((_BYTE *)*v2 + 52) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v17 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v17 + 8))(v17, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>::xbox_live_result(
              (xbox::services::user_statistics::user_statistics_result *)&v35,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_FinalizeAndRunContinuations(
              v17,
              &v35);
            v18 = (void *)(v37 - 12);
            if ( (int *)(v37 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v37 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v18);
            }
            v19 = (void *)HIDWORD(v36);
            v20 = (void *)v36;
            if ( (_DWORD)v36 != HIDWORD(v36) )
              do
                j_std::_Destroy<xbox::services::user_statistics::service_configuration_statistic>((int)v20);
                v20 = (char *)v20 + 16;
              while ( v19 != v20 );
              v20 = (void *)v36;
            if ( v20 )
              j_operator delete(v20);
            v21 = (void *)(v35 - 12);
            if ( (int *)(v35 - 12) != &dword_28898C0 )
              v15 = (unsigned int *)(v35 - 4);
                  v16 = __ldrex(v15);
                while ( __strex(v16 - 1, v15) );
                v16 = (*v15)--;
              if ( v16 <= 0 )
                j_j_j_j__ZdlPv_9(v21);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v22 = *v2;
      if ( (*v2)[11] )
        v22[11] = 0;
        v23 = v22[12];
        v22[12] = 0;
        if ( v23 )
          v24 = (unsigned int *)((char *)v23 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v25 = __ldrex(v24);
            while ( __strex(v25 - 1, v24) );
            v25 = (*v24)--;
          if ( v25 == 1 )
            v26 = (unsigned int *)((char *)v23 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v23 + 8))(v23);
            if ( &pthread_create )
              __dmb();
                v27 = __ldrex(v26);
              while ( __strex(v27 - 1, v26) );
            else
              v27 = (*v26)--;
            if ( v27 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v23 + 12))(v23);
      v5 = 1;
    if ( v10 != v11 )
      v28 = v10;
      do
        v29 = v28[1];
        if ( v29 )
          v30 = (unsigned int *)(v29 + 4);
              v31 = __ldrex(v30);
            while ( __strex(v31 - 1, v30) );
            v31 = (*v30)--;
          if ( v31 == 1 )
            v32 = (unsigned int *)(v29 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
                v33 = __ldrex(v32);
              while ( __strex(v33 - 1, v32) );
              v33 = (*v32)--;
            if ( v33 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
        v28 += 2;
      while ( v28 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::system::auth_flow_result>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::system::auth_flow_result>::task<pplx::task_completion_event<xbox::services::system::auth_flow_result>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(std::shared_ptr<xbox::services::http_call_response>)> pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r5@1
  void **v5; // r0@2
  void **v6; // r0@3
  int v7; // r6@3
  void **v8; // r4@3
  void (__fastcall *v9)(void **, int, signed int); // r3@3
  int result; // r0@5
  void **v11; // r4@6
  void (__fastcall *v12)(void **, void **, signed int); // r3@7

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<unsigned char ()(std::shared_ptr<xbox::services::http_call_response>)> pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1};
      goto LABEL_12;
    case 2:
      v6 = (void **)j_operator new(0x10u);
      v7 = *v3;
      v8 = v6;
      v6[2] = 0;
      v9 = *(void (__fastcall **)(void **, int, signed int))(v7 + 8);
      if ( v9 )
      {
        v9(v6, v7, 2);
        v8[3] = *(void **)(v7 + 12);
        v8[2] = *(void **)(v7 + 8);
      }
      result = 0;
      *v4 = v8;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(*a1, *a1, 3);
        j_operator delete(v11);
      goto def_1C1CF3A;
    case 1:
      v5 = (void **)*a2;
LABEL_12:
      *v4 = v5;
      break;
    default:
def_1C1CF3A:
  }
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::matchmaking::match_ticket_details_response::match_ticket_details_response((xbox::services::matchmaking::match_ticket_details_response *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 64) = 0;
  *(_DWORD *)(v1 + 68) = v3;
  *(_DWORD *)(v1 + 72) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 88) = 0;
  *(_DWORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 84) = 0;
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  int v8; // r6@4
  unsigned int *v9; // r1@5
  unsigned int v10; // r0@7
  unsigned int *v11; // r7@11
  unsigned int v12; // r0@13
  unsigned int *v13; // r0@19
  unsigned int v14; // r1@21
  int v15; // r0@24
  unsigned int *v16; // r0@25
  unsigned int v17; // r1@27
  int v18; // r0@30
  unsigned int *v19; // r1@31
  unsigned int v20; // r2@32
  __int16 v21; // r0@34
  int v22; // r0@36
  unsigned int *v23; // r1@37
  unsigned int v24; // r2@38
  int result; // r0@41
  int v26; // r4@41
  unsigned int *v27; // r1@42
  unsigned int *v28; // r5@48
  int v29; // r4@55
  unsigned int *v30; // r1@56
  unsigned int *v31; // r5@62
  int v32; // r4@69
  unsigned int *v33; // r1@70
  unsigned int *v34; // r5@76
  unsigned int *v35; // r2@84
  signed int v36; // r1@86
  int v37; // [sp+0h] [bp-A8h]@24
  int v38; // [sp+4h] [bp-A4h]@24
  int v39; // [sp+8h] [bp-A0h]@30
  int v40; // [sp+Ch] [bp-9Ch]@34
  char v41; // [sp+14h] [bp-94h]@34
  int v42; // [sp+18h] [bp-90h]@34
  void *ptr; // [sp+1Ch] [bp-8Ch]@34
  int v44; // [sp+20h] [bp-88h]@34
  int v45; // [sp+24h] [bp-84h]@34
  char v46; // [sp+28h] [bp-80h]@34
  char v47; // [sp+29h] [bp-7Fh]@34
  int v48; // [sp+30h] [bp-78h]@18
  int v49; // [sp+34h] [bp-74h]@18
  char v50; // [sp+38h] [bp-70h]@3
  int v51; // [sp+3Ch] [bp-6Ch]@4
  int v52; // [sp+40h] [bp-68h]@4
  int v53; // [sp+80h] [bp-28h]@3
  int v54; // [sp+88h] [bp-20h]@1
  int v55; // [sp+8Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v54 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_13title_storage25title_storage_blob_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v55);
  if ( v55 )
    v6 = (*(int (**)(void))(*(_DWORD *)v55 + 16))();
  v54 = v6;
  j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>::xbox_live_result(
    (xbox::services::title_storage::title_storage_blob_result *)&v50,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::set(
    (void ***)&v54,
    (int)&v50);
  v7 = (void *)(v53 - 12);
  if ( (int *)(v53 - 12) != &dword_28898C0 )
  {
    v35 = (unsigned int *)(v53 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v36 = __ldrex(v35);
      while ( __strex(v36 - 1, v35) );
    }
    else
      v36 = (*v35)--;
    if ( v36 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)&v52);
  v8 = v51;
  if ( v51 )
    v9 = (unsigned int *)(v51 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
      }
      else
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  v48 = v54;
  v49 = v55;
    v13 = (unsigned int *)(v55 + 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 + 1, v13) );
      ++*v13;
  v37 = *(_DWORD *)v4;
  v15 = *(_DWORD *)(v4 + 4);
  v38 = v15;
  if ( v15 )
    v16 = (unsigned int *)(v15 + 4);
        v17 = __ldrex(v16);
      while ( __strex(v17 + 1, v16) );
      ++*v16;
  v39 = *(_DWORD *)(v4 + 8);
  v18 = *(_DWORD *)(v4 + 12);
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
    __dmb();
    do
      v20 = __ldrex(v19);
    while ( __strex(v20 + 1, v19) );
  v40 = v18;
  v44 = 0;
  v45 = 0;
  v42 = 0;
  ptr = 0;
  v41 = 0;
  v21 = *(_WORD *)(v4 + 40);
  v46 = *(_WORD *)(v4 + 40);
  v47 = HIBYTE(v21);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>(
    v3,
    (int)&v48,
    (int)&v37);
  if ( ptr )
    j_operator delete(ptr);
  v22 = v40;
  if ( v40 )
    v23 = (unsigned int *)(v40 + 4);
      v24 = __ldrex(v23);
    while ( __strex(v24 - 1, v23) );
    if ( v24 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v22 + 8))(v22);
  result = 0;
  v40 = 0;
  v26 = v38;
  if ( v38 )
    v27 = (unsigned int *)(v38 + 4);
        result = __ldrex(v27);
      while ( __strex(result - 1, v27) );
      result = (*v27)--;
    if ( result == 1 )
      v28 = (unsigned int *)(v26 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
          result = __ldrex(v28);
        while ( __strex(result - 1, v28) );
        result = (*v28)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
  v29 = v49;
  if ( v49 )
    v30 = (unsigned int *)(v49 + 4);
        result = __ldrex(v30);
      while ( __strex(result - 1, v30) );
      result = (*v30)--;
      v31 = (unsigned int *)(v29 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
          result = __ldrex(v31);
        while ( __strex(result - 1, v31) );
        result = (*v31)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
  v32 = v55;
    v33 = (unsigned int *)(v55 + 4);
        result = __ldrex(v33);
      while ( __strex(result - 1, v33) );
      result = (*v33)--;
      v34 = (unsigned int *)(v32 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v32 + 8))(v32);
          result = __ldrex(v34);
        while ( __strex(result - 1, v34) );
        result = (*v34)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v32 + 12))(v32);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::~_Task_impl(a1);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultISt10shared_ptrINS8_11multiplayer19multiplayer_sessionEEEEEESaISF_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_13title_storage25title_storage_blob_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  void *v8; // r0@8
  int v9; // r5@10
  unsigned int *v10; // r1@11
  unsigned int v11; // r0@13
  unsigned int *v12; // r6@17
  unsigned int v13; // r0@19
  unsigned int *v15; // r2@25
  signed int v16; // r1@27

  v1 = a1;
  *(_DWORD *)a1 = &off_2766FB0;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 120);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v15 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
    }
    else
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_std::_Destroy_aux<false>::__destroy<xbox::services::social::xbox_social_relationship *>(
    *(_QWORD *)(v1 + 88),
    *(_QWORD *)(v1 + 88) >> 32);
  v8 = *(void **)(v1 + 88);
  if ( v8 )
    j_operator delete(v8);
  v9 = *(_DWORD *)(v1 + 84);
  if ( v9 )
    v10 = (unsigned int *)(v9 + 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 - 1, v10) );
      v11 = (*v10)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<void>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  unsigned __int64 v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  *(_DWORD *)(a1 + 16) = 0;
  v2 = __PAIR__(&unk_28898CC, ((int (*)(void))byte_21E9640)());
  *(_QWORD *)(v1 + 20) = v2;
  v3 = j_xbox::services::xbox_services_error_code_category((xbox::services *)v2);
  *(_DWORD *)(v1 + 16) = 0;
  *(_DWORD *)(v1 + 20) = v3;
  result = v1;
  *(_WORD *)(v1 + 36) = 0;
  *(_DWORD *)(v1 + 28) = 0;
  *(_DWORD *)(v1 + 32) = 0;
  return result;
}


int __fastcall pplx::details::_Task_impl_base::_CancelWithException(pplx::details::_Task_impl_base *this, const std::__exception_ptr::exception_ptr *a2)
{
  pplx::details::_Task_impl_base *v2; // r4@1
  const std::__exception_ptr::exception_ptr *v3; // r9@1
  void *v4; // r6@1
  int (__fastcall *v5)(pplx::details::_Task_impl_base *, signed int, signed int, _DWORD); // r8@1
  int v6; // r1@1 OVERLAPPED
  int v7; // r2@1 OVERLAPPED
  unsigned int v8; // r5@1
  void *v9; // r0@3
  int v10; // r5@4
  int v11; // r4@6
  int v12; // r5@6
  unsigned int *v13; // r1@7
  unsigned int v14; // r0@9
  unsigned int *v15; // r6@13
  unsigned int v16; // r0@15
  int v18; // [sp+8h] [bp-38h]@1
  void *ptr; // [sp+Ch] [bp-34h]@1
  char *v20; // [sp+10h] [bp-30h]@1
  char *v21; // [sp+14h] [bp-2Ch]@1
  char v22; // [sp+18h] [bp-28h]@6
  int v23; // [sp+1Ch] [bp-24h]@6
  char v24; // [sp+20h] [bp-20h]@6

  v2 = this;
  v3 = a2;
  v4 = 0;
  v5 = *(int (__fastcall **)(pplx::details::_Task_impl_base *, signed int, signed int, _DWORD))(*(_DWORD *)this + 8);
  v18 = *((_DWORD *)this + 15);
  *(_QWORD *)&v6 = *((_QWORD *)this + 8);
  ptr = 0;
  v20 = 0;
  v21 = 0;
  v8 = (v7 - v6) >> 2;
  if ( v8 )
  {
    if ( v8 >= 0x40000000 )
      sub_DA7414();
    v9 = operator new(v7 - v6);
    *(_QWORD *)&v6 = *((_QWORD *)v2 + 8);
    v4 = v9;
  }
  ptr = v4;
  v20 = (char *)v4;
  v21 = (char *)v4 + 4 * v8;
  v10 = (v7 - v6) >> 2;
  if ( 0 != v10 )
    _aeabi_memmove4(v4, v6);
  v20 = (char *)v4 + 4 * v10;
  std::__shared_ptr<pplx::details::_ExceptionHolder,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_ExceptionHolder>,std::__exception_ptr::exception_ptr const&,pplx::details::_TaskCreationCallstack>(
    (int)&v22,
    (int)&v24,
    v3,
    (int)&v18);
  v11 = v5(v2, 1, 1, 0);
  v12 = v23;
  if ( v23 )
    v13 = (unsigned int *)(v23 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
    }
    else
      v14 = (*v13)--;
    if ( v14 == 1 )
      v15 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  if ( ptr )
    operator delete(ptr);
  return v11;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  EntityInteraction::setInteractText((int *)(v2 + 84), v3 + 1);
  *(_QWORD *)(v2 + 88) = *((_QWORD *)v3 + 1);
  EntityInteraction::setInteractText((int *)(v2 + 96), v3 + 4);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


xbox::services::game_server_platform::game_server_ticket_status *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::get(xbox::services::game_server_platform::game_server_ticket_status *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::get(
           a1,
           a2);
}


xbox::services::tournaments::team_info *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::get(xbox::services::tournaments::team_info *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::tournaments::team_info *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::tournaments::team_info>::xbox_live_result(v3, (int)*v2 + 80);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 29);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 27);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::social::xbox_user_profile::~xbox_user_profile((xbox::services::social::xbox_user_profile *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}::operator() const(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::system::java_rps_ticket>::task<pplx::task_completion_event<xbox::services::system::java_rps_ticket>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::system::java_rps_ticket>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::system::java_rps_ticket>::_RegisterTask((int *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = this;
  *(_DWORD *)this = &off_2768590;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 23);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::~_Task_impl(a1);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::social::xbox_user_profile::xbox_user_profile((xbox::services::social::xbox_user_profile *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 100) = 0;
  *(_DWORD *)(v1 + 104) = v3;
  *(_DWORD *)(v1 + 108) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 120) = 0;
  *(_DWORD *)(v1 + 112) = 0;
  *(_DWORD *)(v1 + 116) = 0;
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


void __fastcall pplx::details::_CancellationTokenState::~_CancellationTokenState(pplx::details::_CancellationTokenState *this)
{
  pplx::details::_CancellationTokenState::~_CancellationTokenState(this);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_RegisterTask(
           a1,
           a2);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_RegisterTask(
           a1,
           a2);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<int>>(std::function const&<void ()(pplx::task<int>)>)::{lambda(pplx::task<int>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<int>>(std::function const&<void ()(pplx::task<int>)>)::{lambda(pplx::task<int>)#1}::operator() const(
           a1,
           a2);
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r5@1
  void **v5; // r0@2
  void **v6; // r0@3
  int v7; // r6@3
  void **v8; // r4@3
  void (__fastcall *v9)(void **, int, signed int); // r3@3
  int result; // r0@5
  void **v11; // r4@6
  void (__fastcall *v12)(void **, void **, signed int); // r3@7

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1};
      goto LABEL_12;
    case 2:
      v6 = (void **)j_operator new(0x10u);
      v7 = *v3;
      v8 = v6;
      v6[2] = 0;
      v9 = *(void (__fastcall **)(void **, int, signed int))(v7 + 8);
      if ( v9 )
      {
        v9(v6, v7, 2);
        v8[3] = *(void **)(v7 + 12);
        v8[2] = *(void **)(v7 + 8);
      }
      result = 0;
      *v4 = v8;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(*a1, *a1, 3);
        j_operator delete(v11);
      goto def_1BFC47A;
    case 1:
      v5 = (void **)*a2;
LABEL_12:
      *v4 = v5;
      break;
    default:
def_1BFC47A:
  }
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}::operator() const(
           a1,
           a2);
}


int *__fastcall pplx::task<void>::task<pplx::task_completion_event<void>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  pplx::task<unsigned char>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_119C874();
      v28 = operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      _aeabi_memmove4(v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  pplx::task_completion_event<unsigned char>::_RegisterTask((_DWORD *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2768088;
  v12 = j_xbox::services::system::token_result::token_result((xbox::services::system::token_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 136) = 0;
  *(_DWORD *)(v3 + 140) = v13;
  *(_DWORD *)(v3 + 144) = &unk_28898CC;
  return v3;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CreateImpl(
           a1,
           a2,
           a3);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 21);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 18);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::matchmaking::match_ticket_details_response::~match_ticket_details_response((xbox::services::matchmaking::match_ticket_details_response *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::privacy::permission_check_result::permission_check_result((xbox::services::privacy::permission_check_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 36) = 0;
  *(_DWORD *)(v1 + 40) = v3;
  *(_DWORD *)(v1 + 44) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 52) = 0;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v5; // r0@8
  int v6; // r1@12
  int v7; // r5@13

  v2 = a1;
  j_xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>::operator=(a1 + 80, a2);
  if ( &pthread_create )
  {
    v3 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v3 )
      sub_21E5E14(v3);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v5 )
        sub_21E5E14(v5);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v6 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v6 )
      do
      {
        v7 = *(_DWORD *)(v6 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v6);
        v6 = v7;
      }
      while ( v7 );
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-78h]@10
  int v33; // [sp+4h] [bp-74h]@10
  int v34; // [sp+8h] [bp-70h]@16
  int v35; // [sp+Ch] [bp-6Ch]@20
  char v36; // [sp+14h] [bp-64h]@20
  int v37; // [sp+18h] [bp-60h]@20
  void *ptr; // [sp+1Ch] [bp-5Ch]@20
  int v39; // [sp+20h] [bp-58h]@20
  int v40; // [sp+24h] [bp-54h]@20
  char v41; // [sp+28h] [bp-50h]@20
  char v42; // [sp+29h] [bp-4Fh]@20
  int v43; // [sp+30h] [bp-48h]@4
  int v44; // [sp+34h] [bp-44h]@4
  char v45; // [sp+38h] [bp-40h]@3
  int v46; // [sp+54h] [bp-24h]@3
  int v47; // [sp+58h] [bp-20h]@1
  int v48; // [sp+5Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_7privacy23permission_check_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>::xbox_live_result(
    (xbox::services::privacy::permission_check_result *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::privacy::permission_check_result::~permission_check_result((xbox::services::privacy::permission_check_result *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


void __fastcall pplx::details::_Task_impl<std::string>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = pplx::details::_Task_impl<std::string>::~_Task_impl(a1);
  j_j_j__ZdlPv_4((void *)v1);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  void *v8; // r0@4
  unsigned int *v9; // r0@6
  unsigned int v10; // r1@8
  int v11; // r0@11
  unsigned int *v12; // r0@12
  unsigned int v13; // r1@14
  int v14; // r0@17
  unsigned int *v15; // r1@18
  unsigned int v16; // r2@19
  __int16 v17; // r0@21
  int v18; // r0@23
  unsigned int *v19; // r1@24
  unsigned int v20; // r2@25
  int result; // r0@28
  int v22; // r4@28
  unsigned int *v23; // r1@29
  unsigned int *v24; // r5@35
  int v25; // r4@42
  unsigned int *v26; // r1@43
  unsigned int *v27; // r5@49
  int v28; // r4@56
  unsigned int *v29; // r1@57
  unsigned int *v30; // r5@63
  unsigned int *v31; // r2@71
  signed int v32; // r1@73
  unsigned int *v33; // r2@75
  signed int v34; // r1@77
  int v35; // [sp+0h] [bp-68h]@11
  int v36; // [sp+4h] [bp-64h]@11
  int v37; // [sp+8h] [bp-60h]@17
  int v38; // [sp+Ch] [bp-5Ch]@21
  char v39; // [sp+14h] [bp-54h]@21
  int v40; // [sp+18h] [bp-50h]@21
  void *ptr; // [sp+1Ch] [bp-4Ch]@21
  int v42; // [sp+20h] [bp-48h]@21
  int v43; // [sp+24h] [bp-44h]@21
  char v44; // [sp+28h] [bp-40h]@21
  char v45; // [sp+29h] [bp-3Fh]@21
  int v46; // [sp+2Ch] [bp-3Ch]@5
  int v47; // [sp+30h] [bp-38h]@5
  char v48; // [sp+34h] [bp-34h]@3
  int v49; // [sp+38h] [bp-30h]@4
  int v50; // [sp+44h] [bp-24h]@3
  int v51; // [sp+48h] [bp-20h]@1
  int v52; // [sp+4Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v51 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_6system20verify_string_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v52);
  if ( v52 )
    v6 = (*(int (**)(void))(*(_DWORD *)v52 + 16))();
  v51 = v6;
  j_xbox::services::xbox_live_result<xbox::services::system::verify_string_result>::xbox_live_result(
    (xbox::services::system::verify_string_result *)&v48,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::set(
    (void ***)&v51,
    (int)&v48);
  v7 = (void *)(v50 - 12);
  if ( (int *)(v50 - 12) != &dword_28898C0 )
  {
    v31 = (unsigned int *)(v50 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v32 = __ldrex(v31);
      while ( __strex(v32 - 1, v31) );
    }
    else
      v32 = (*v31)--;
    if ( v32 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  v8 = (void *)(v49 - 12);
  if ( (int *)(v49 - 12) != &dword_28898C0 )
    v33 = (unsigned int *)(v49 - 4);
        v34 = __ldrex(v33);
      while ( __strex(v34 - 1, v33) );
      v34 = (*v33)--;
    if ( v34 <= 0 )
      j_j_j_j__ZdlPv_9(v8);
  v46 = v51;
  v47 = v52;
    v9 = (unsigned int *)(v52 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
      ++*v9;
  v35 = *(_DWORD *)v4;
  v11 = *(_DWORD *)(v4 + 4);
  v36 = v11;
  if ( v11 )
    v12 = (unsigned int *)(v11 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 + 1, v12) );
      ++*v12;
  v37 = *(_DWORD *)(v4 + 8);
  v14 = *(_DWORD *)(v4 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v38 = v14;
  v42 = 0;
  v43 = 0;
  v40 = 0;
  ptr = 0;
  v39 = 0;
  v17 = *(_WORD *)(v4 + 40);
  v44 = *(_WORD *)(v4 + 40);
  v45 = HIBYTE(v17);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>(
    v3,
    (int)&v46,
    (int)&v35);
  if ( ptr )
    j_operator delete(ptr);
  v18 = v38;
  if ( v38 )
    v19 = (unsigned int *)(v38 + 4);
      v20 = __ldrex(v19);
    while ( __strex(v20 - 1, v19) );
    if ( v20 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v18 + 8))(v18);
  result = 0;
  v38 = 0;
  v22 = v36;
  if ( v36 )
    v23 = (unsigned int *)(v36 + 4);
        result = __ldrex(v23);
      while ( __strex(result - 1, v23) );
      result = (*v23)--;
    if ( result == 1 )
      v24 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v24);
        while ( __strex(result - 1, v24) );
      }
      else
        result = (*v24)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  v25 = v47;
  if ( v47 )
    v26 = (unsigned int *)(v47 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
        result = (*v27)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  v28 = v52;
    v29 = (unsigned int *)(v52 + 4);
        result = __ldrex(v29);
      while ( __strex(result - 1, v29) );
      result = (*v29)--;
      v30 = (unsigned int *)(v28 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
          result = __ldrex(v30);
        while ( __strex(result - 1, v30) );
        result = (*v30)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
  return result;
}


int __fastcall pplx::details::_RefCounter::~_RefCounter(int result)
{
  *(_DWORD *)result = &off_26D7B40;
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::set(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(std::function const&<void ()(pplx::task<web::http::http_response>)>)::{lambda(pplx::task<web::http::http_response>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  std::function<void ()(pplx::task<web::http::http_response>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


  return pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}::operator()
{
           a2);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::get(xbox::services::title_storage::title_storage_blob_metadata_result *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::get(
           a1,
           a2);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>(
           a1,
           a2,
           a3);
}


xbox::services::matchmaking::hopper_statistics_response *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::get(xbox::services::matchmaking::hopper_statistics_response *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::get(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6system26token_and_signature_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


_DWORD *__fastcall pplx::details::_Task_impl_base::_RegisterCancellation(int a1, unsigned __int64 *a2)
{
  unsigned __int64 v2; // kr00_8@1
  int v3; // r5@1
  unsigned int *v4; // r0@2
  unsigned int v5; // r1@4
  void *v6; // r1@7
  unsigned int *v7; // r0@8
  unsigned int v8; // r2@10
  _DWORD *result; // r0@13
  unsigned int *v10; // r1@14

  v2 = *a2;
  v3 = a1;
  if ( *a2 >> 32 )
  {
    v4 = (unsigned int *)(HIDWORD(v2) + 8);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 + 1, v4) );
    }
    else
      ++*v4;
  }
  v6 = operator new(0x1Cu);
  *((_DWORD *)v6 + 1) = 1;
  *((_DWORD *)v6 + 2) = 3;
  *((_DWORD *)v6 + 4) = 0;
  *(_DWORD *)v6 = &off_26D7B28;
  *(_QWORD *)((char *)v6 + 20) = v2;
  if ( HIDWORD(v2) )
    v7 = (unsigned int *)(HIDWORD(v2) + 8);
        v8 = __ldrex(v7);
      while ( __strex(v8 + 1, v7) );
      ++*v7;
  *(_DWORD *)(v3 + 28) = v6;
  result = pplx::details::_CancellationTokenState::_RegisterCallback(
             *(pplx::details::_CancellationTokenState **)(v3 + 24),
             (pplx::details::_CancellationTokenRegistration *)v6);
    v10 = (unsigned int *)(HIDWORD(v2) + 8);
        result = (_DWORD *)__ldrex(v10);
      while ( __strex((unsigned int)result - 1, v10) );
      result = (_DWORD *)(*v10)--;
    if ( result == (_DWORD *)1 )
      result = (_DWORD *)(*(int (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v2) + 12))(HIDWORD(v2));
  return result;
}


_DWORD *__fastcall pplx::details::_CancellationTokenState::_RegisterCallback(pplx::details::_CancellationTokenState *this, pplx::details::_CancellationTokenRegistration *a2)
{
  pplx::details::_CancellationTokenRegistration *v2; // r8@1
  pplx::details::_CancellationTokenState *v3; // r6@1
  unsigned int *v4; // r7@1
  unsigned int *v5; // r4@1
  unsigned int v6; // r0@2
  int v7; // r0@3
  pthread_mutex_t *v8; // r5@4
  int v9; // r0@5
  int v10; // r0@6
  unsigned int v11; // r5@9
  unsigned int v12; // r0@10
  unsigned int v13; // r0@13
  signed int v14; // r1@15
  int v15; // r5@21
  int v16; // r0@22
  _DWORD *result; // r0@25
  pplx::details::_CancellationTokenState *v18; // r6@27
  int v19; // t1@27
  char *v20; // r0@38

  v2 = a2;
  v3 = this;
  __dmb();
  *((_DWORD *)a2 + 2) = 0;
  v4 = (unsigned int *)((char *)a2 + 4);
  v5 = (unsigned int *)((char *)a2 + 8);
  do
    v6 = __ldrex(v4);
  while ( __strex(v6 + 1, v4) );
  *((_DWORD *)a2 + 4) = v3;
  v7 = *((_DWORD *)v3 + 2);
  if ( !v7 )
  {
    v8 = (pthread_mutex_t *)((char *)v3 + 24);
    if ( &pthread_create )
    {
      v9 = pthread_mutex_lock((pthread_mutex_t *)v3 + 1);
      if ( v9 )
        sub_DA7664(v9);
    }
    v10 = *((_DWORD *)v3 + 2);
    __dmb();
    if ( !v10 )
      result = malloc(8u);
      if ( !result )
      {
        v20 = j___cxa_allocate_exception(4);
        *(_DWORD *)v20 = &off_2772780;
        j___cxa_throw((int)v20, (int)&`typeinfo for'std::bad_alloc, (int)std::bad_alloc::~bad_alloc, (int)&off_2772780);
      }
      *result = v2;
      result[1] = 0;
      if ( *((_DWORD *)v3 + 7) )
        v19 = *((_DWORD *)v3 + 8);
        v18 = (pplx::details::_CancellationTokenState *)((char *)v3 + 32);
        *(_DWORD *)(v19 + 4) = result;
      else
        *((_DWORD *)v3 + 7) = result;
      *(_DWORD *)v18 = result;
      if ( &pthread_create )
        result = (_DWORD *)pthread_mutex_unlock(v8);
      return result;
      pthread_mutex_unlock((pthread_mutex_t *)v3 + 1);
  }
  v11 = pplx::details::platform::GetCurrentThreadId();
    v12 = __ldrex(v5);
    if ( v12 )
      __clrex();
      __dmb();
      goto LABEL_29;
  while ( __strex(v11, v5) );
  (*(void (__fastcall **)(pplx::details::_CancellationTokenRegistration *))(*(_DWORD *)v2 + 12))(v2);
  while ( 1 )
    v13 = __ldrex(v5);
    if ( v13 != v11 )
      break;
    if ( !__strex(3u, v5) )
      v14 = 1;
      goto LABEL_18;
  __clrex();
  v14 = 0;
LABEL_18:
  if ( v14 )
    v13 = v11;
  if ( v13 == 2 )
    v15 = *((_DWORD *)v2 + 3);
      v16 = pthread_mutex_lock(*((pthread_mutex_t **)v2 + 3));
      if ( v16 )
        sub_DA7664(v16);
      *(_BYTE *)(v15 + 8) = 1;
      sub_DA83A0((pthread_cond_t *)(v15 + 4));
        pthread_mutex_unlock((pthread_mutex_t *)v15);
    else
LABEL_29:
    result = (_DWORD *)__ldrex(v4);
  while ( __strex((unsigned int)result - 1, v4) );
  if ( result == (_DWORD *)1 )
    result = (_DWORD *)(*(int (__fastcall **)(pplx::details::_CancellationTokenRegistration *))(*(_DWORD *)v2 + 8))(v2);
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


  if ( pplx::details::_Task_impl_base::_Wait(v2) == 2 )
{
    v4 = j___cxa_allocate_exception(8);
    *(_DWORD *)v4 = &off_26DD7D0;
    *((_DWORD *)v4 + 1) = &unk_28898CC;
    j___cxa_throw(
      (int)v4,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  }
  return *((_QWORD *)*v1 + 10);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::~_Task_impl(a1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int *__fastcall pplx::task<int>::task<pplx::task_completion_event<int>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  pplx::task<int>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_119C874();
      v28 = operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      _aeabi_memmove4(v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  pplx::task_completion_event<int>::_RegisterTask((_DWORD *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::~_Task_impl(a1);
}


xbox::services::social::xbox_social_relationship_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::get(xbox::services::social::xbox_social_relationship_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::social::xbox_social_relationship_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_2763270;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 164);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::achievements::achievements_result::~achievements_result((xbox::services::achievements::achievements_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<void>),std::function<unsigned char ()(pplx::task<void>)> pplx::details::_MakeTToUnitFunc<pplx::task<void>>(std::function const&<void ()(pplx::task<void>)>)::{lambda(pplx::task<void>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  pplx::details::_MakeTToUnitFunc<pplx::task<void>>(std::function const&<void ()(pplx::task<void>)>)::{lambda(pplx::task<void>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(std::function const&<void ()(pplx::task<web::json::value>)>)::{lambda(pplx::task<web::json::value>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  std::function<void ()(pplx::task<web::json::value>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(
           a1,
           a2);
}


pplx::task_options *__fastcall pplx::task_options::~task_options(pplx::task_options *this)
{
  pplx::task_options *v1; // r4@1
  void *v2; // r0@1
  int v3; // r0@3
  unsigned int *v4; // r1@4
  unsigned int v5; // r2@5
  int v6; // r5@8
  unsigned int *v7; // r1@9
  unsigned int v8; // r0@11
  unsigned int *v9; // r6@15
  unsigned int v10; // r0@17

  v1 = this;
  v2 = (void *)*((_DWORD *)this + 7);
  if ( v2 )
    operator delete(v2);
  v3 = *((_DWORD *)v1 + 3);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    __dmb();
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
  }
  *((_DWORD *)v1 + 3) = 0;
  v6 = *((_DWORD *)v1 + 1);
  if ( v6 )
    v7 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 == 1 )
      v9 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  return v1;
}


int (**__fastcall pplx::details::_Task_impl<int>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  pthread_mutex_t *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 20);
  *(_DWORD *)(a1 + 80) = a2;
  if ( &pthread_create )
  {
    v4 = pthread_mutex_lock(v3);
    if ( v4 )
      sub_119CCFC(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v3);
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (pthread_mutex_unlock(v3), &pthread_create) )
    {
      v6 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_119CCFC(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


xbox::services::matchmaking::hopper_statistics_response *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::get(xbox::services::matchmaking::hopper_statistics_response *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::matchmaking::hopper_statistics_response *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<std::string>>(int a1, int a2, int a3)
{
  int v3; // r8@1
  int v4; // r5@1
  int v5; // r6@1
  _DWORD *v6; // r0@1
  int v7; // r7@1
  int *v8; // r0@1
  int v9; // r0@1
  void *v10; // r0@1
  void *v11; // r0@2
  unsigned int *v12; // r0@4
  unsigned int v13; // r1@6
  int v14; // r0@9
  unsigned int *v15; // r0@10
  unsigned int v16; // r1@12
  int v17; // r0@15
  unsigned int *v18; // r1@16
  unsigned int v19; // r2@17
  __int16 v20; // r0@19
  int v21; // r0@21
  unsigned int *v22; // r1@22
  unsigned int v23; // r2@23
  unsigned int result; // r0@26
  int v25; // r4@26
  unsigned int *v26; // r1@27
  unsigned int *v27; // r5@33
  int v28; // r4@40
  unsigned int *v29; // r1@41
  unsigned int *v30; // r5@47
  int v31; // r4@54
  unsigned int *v32; // r1@55
  unsigned int *v33; // r5@61
  unsigned int *v34; // r2@69
  signed int v35; // r1@71
  unsigned int *v36; // r2@73
  signed int v37; // r1@75
  int v38; // [sp+0h] [bp-68h]@9
  int v39; // [sp+4h] [bp-64h]@9
  int v40; // [sp+8h] [bp-60h]@15
  int v41; // [sp+Ch] [bp-5Ch]@19
  char v42; // [sp+14h] [bp-54h]@19
  int v43; // [sp+18h] [bp-50h]@19
  void *ptr; // [sp+1Ch] [bp-4Ch]@19
  int v45; // [sp+20h] [bp-48h]@19
  int v46; // [sp+24h] [bp-44h]@19
  char v47; // [sp+28h] [bp-40h]@19
  char v48; // [sp+29h] [bp-3Fh]@19
  int v49; // [sp+2Ch] [bp-3Ch]@3
  int v50; // [sp+30h] [bp-38h]@3
  int v51; // [sp+34h] [bp-34h]@1
  int v52; // [sp+40h] [bp-28h]@1
  int v53; // [sp+44h] [bp-24h]@1
  int v54; // [sp+48h] [bp-20h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v53 = 0;
  v54 = 0;
  v6 = j_operator new(0x38u);
  v7 = (int)v6;
  v6[1] = 1;
  v6[2] = 1;
  *v6 = &off_27636D8;
  v6[3] = 0;
  v6[4] = 0;
  v6[5] = 0;
  v6[6] = 0;
  v6[7] = &unk_28898CC;
  v8 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&unk_28898CC);
  *(_DWORD *)(v7 + 32) = 0;
  *(_DWORD *)(v7 + 36) = v8;
  *(_DWORD *)(v7 + 40) = &unk_28898CC;
  *(_WORD *)(v7 + 52) = 0;
  *(_DWORD *)(v7 + 44) = 0;
  *(_DWORD *)(v7 + 48) = 0;
  v9 = *(_DWORD *)v7;
  v54 = v7;
  v53 = (*(int (__fastcall **)(int, void **))(v9 + 16))(v7, &`typeinfo for'std::_Sp_make_shared_tag);
  j_xbox::services::xbox_live_result<std::string>::xbox_live_result((int)&v51, v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>::set((void ***)&v53, (int)&v51);
  v10 = (void *)(v52 - 12);
  if ( (int *)(v52 - 12) != &dword_28898C0 )
  {
    v34 = (unsigned int *)(v52 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v35 = __ldrex(v34);
      while ( __strex(v35 - 1, v34) );
    }
    else
      v35 = (*v34)--;
    if ( v35 <= 0 )
      j_j_j_j__ZdlPv_9(v10);
  }
  v11 = (void *)(v51 - 12);
  if ( (int *)(v51 - 12) != &dword_28898C0 )
    v36 = (unsigned int *)(v51 - 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v49 = v53;
  v50 = v54;
  if ( v54 )
    v12 = (unsigned int *)(v54 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 + 1, v12) );
      ++*v12;
  v38 = *(_DWORD *)v4;
  v14 = *(_DWORD *)(v4 + 4);
  v39 = v14;
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 + 1, v15) );
      ++*v15;
  v40 = *(_DWORD *)(v4 + 8);
  v17 = *(_DWORD *)(v4 + 12);
  if ( v17 )
    v18 = (unsigned int *)(v17 + 4);
    __dmb();
    do
      v19 = __ldrex(v18);
    while ( __strex(v19 + 1, v18) );
  v41 = v17;
  v45 = 0;
  v46 = 0;
  v43 = 0;
  ptr = 0;
  v42 = 0;
  v20 = *(_WORD *)(v4 + 40);
  v47 = *(_WORD *)(v4 + 40);
  v48 = HIBYTE(v20);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>>(
    v3,
    (int)&v49,
    (int)&v38);
  if ( ptr )
    j_operator delete(ptr);
  v21 = v41;
  if ( v41 )
    v22 = (unsigned int *)(v41 + 4);
      v23 = __ldrex(v22);
    while ( __strex(v23 - 1, v22) );
    if ( v23 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v21 + 8))(v21);
  result = 0;
  v41 = 0;
  v25 = v39;
  if ( v39 )
    v26 = (unsigned int *)(v39 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
    if ( result == 1 )
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
      }
      else
        result = (*v27)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  v28 = v50;
  if ( v50 )
    v29 = (unsigned int *)(v50 + 4);
        result = __ldrex(v29);
      while ( __strex(result - 1, v29) );
      result = (*v29)--;
      v30 = (unsigned int *)(v28 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
          result = __ldrex(v30);
        while ( __strex(result - 1, v30) );
        result = (*v30)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
  v31 = v54;
    v32 = (unsigned int *)(v54 + 4);
        result = __ldrex(v32);
      while ( __strex(result - 1, v32) );
      result = (*v32)--;
      v33 = (unsigned int *)(v31 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 8))(v31);
          result = __ldrex(v33);
        while ( __strex(result - 1, v33) );
        result = (*v33)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v31 + 12))(v31);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27673A8;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 152);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::title_storage::title_storage_blob_metadata_result::~title_storage_blob_metadata_result((xbox::services::title_storage::title_storage_blob_metadata_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<web::http::http_response>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  int *v3; // r7@1
  int v4; // r5@1
  int v5; // r4@1
  const std::__exception_ptr::exception_ptr *v6; // r6@1
  pthread_mutex_t *v7; // r10@1
  int v8; // r0@2
  signed int v9; // r7@5
  int v10; // r0@9
  int v11; // r1@10
  int v12; // r5@12
  unsigned int *v13; // r1@13
  unsigned int v14; // r0@15
  unsigned int *v15; // r4@19
  unsigned int v16; // r0@21
  int v17; // r5@26
  unsigned int *v18; // r1@27
  unsigned int v19; // r0@29
  unsigned int *v20; // r4@33
  unsigned int v21; // r0@35
  char v23; // [sp+8h] [bp-30h]@9
  int v24; // [sp+Ch] [bp-2Ch]@9
  int v25; // [sp+10h] [bp-28h]@9
  char v26; // [sp+14h] [bp-24h]@9

  v3 = a1;
  v4 = a3;
  v5 = *a1;
  v6 = a2;
  v7 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 12));
    if ( v8 )
      sub_21E5E14(v8);
    v5 = *v3;
  }
  if ( *(_BYTE *)(v5 + 32) )
    v9 = 0;
  else if ( *(_BYTE *)(v5 + 33) )
  else
    if ( !*(_DWORD *)(v5 + 24) )
    {
      j_std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v23, v6);
      v24 = 0;
      j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details16_ExceptionHolderESaIS6_EJRNSt15__exception_ptr13exception_ptrERKNS5_22_TaskCreationCallstackEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
        &v25,
        0,
        (int)&v26,
        (const std::__exception_ptr::exception_ptr *)&v23,
        v4);
      v10 = v25;
      if ( v25 )
      {
        v11 = (*(int (**)(void))(*(_DWORD *)v25 + 16))();
        v10 = v25;
      }
      else
        v11 = 0;
      v25 = 0;
      *(_DWORD *)(v5 + 24) = v11;
      v12 = *(_DWORD *)(v5 + 28);
      *(_DWORD *)(v5 + 28) = v10;
      if ( v12 )
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      v17 = v25;
        v18 = (unsigned int *)(v25 + 4);
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v23);
      v9 = 1;
    }
    j_pthread_mutex_unlock_1(v7);
  return v9;
}


void __fastcall pplx::invalid_operation::~invalid_operation(pplx::invalid_operation *this)
{
  pplx::invalid_operation *v1; // r4@1
  int v2; // r1@1
  void *v3; // r0@1
  unsigned int *v4; // r12@3
  signed int v5; // r1@5

  v1 = this;
  *(_DWORD *)this = &off_26D7A9C;
  v2 = *((_DWORD *)this + 1);
  v3 = (void *)(v2 - 12);
  if ( (int *)(v2 - 12) != &dword_28898C0 )
  {
    v4 = (unsigned int *)(v2 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 <= 0 )
      j_j_j_j_j__ZdlPv_9(v3);
  }
  std::exception::~exception();
  operator delete((void *)v1);
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  int v4; // r4@4
  unsigned int *v5; // r1@5
  unsigned int v6; // r0@7
  unsigned int *v7; // r5@11
  unsigned int v8; // r0@13
  unsigned int *v10; // r2@19
  signed int v11; // r1@21
  int v12; // [sp+0h] [bp-40h]@1
  int v13; // [sp+4h] [bp-3Ch]@4
  void *ptr; // [sp+8h] [bp-38h]@2
  int v15; // [sp+Ch] [bp-34h]@2
  int v16; // [sp+28h] [bp-18h]@1

  v2 = *a1;
  xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>::xbox_live_result(
    (xbox::services::social::xbox_social_relationship_result *)&v12,
    a2);
  pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)#1}::operator() const(
    v2,
    (int)&v12);
  v3 = (void *)(v16 - 12);
  if ( (int *)(v16 - 12) != &dword_28898C0 )
  {
    v10 = (unsigned int *)(v16 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v11 = __ldrex(v10);
      while ( __strex(v11 - 1, v10) );
    }
    else
      v11 = (*v10)--;
    if ( v11 <= 0 )
      j_j_j_j__ZdlPv_9(v3);
  }
  std::_Destroy_aux<false>::__destroy<xbox::services::social::xbox_social_relationship *>((int)ptr, v15);
  if ( ptr )
    operator delete(ptr);
  v4 = v13;
  if ( v13 )
    v5 = (unsigned int *)(v13 + 4);
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
      v6 = (*v5)--;
    if ( v6 == 1 )
      v7 = (unsigned int *)(v4 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  return 0;
}


void __fastcall __noreturn pplx::details::_ExceptionHolder::_RethrowUserException(pplx::details::_ExceptionHolder *this)
{
  pplx::details::_ExceptionHolder::_RethrowUserException(this);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_FinalizeAndRunContinuations(int a1, unsigned __int64 *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  unsigned __int64 *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::contextual_search::contextual_search_game_clips_result::operator=(a1 + 80, a2);
  *(_QWORD *)(v2 + 124) = *(unsigned __int64 *)((char *)v3 + 44);
  EntityInteraction::setInteractText((int *)(v2 + 132), (int *)v3 + 13);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


pplx::details::_ExceptionHolder *__fastcall pplx::details::_ExceptionHolder::~_ExceptionHolder(pplx::details::_ExceptionHolder *this)
{
  pplx::details::_ExceptionHolder *v1; // r4@1
  int v2; // r0@1
  void *v3; // r0@2

  v1 = this;
  v2 = *(_DWORD *)this;
  __dmb();
  if ( !v2 )
  {
    raise(5);
    std::terminate();
  }
  v3 = (void *)*((_DWORD *)v1 + 3);
  if ( v3 )
    operator delete(v3);
  std::__exception_ptr::exception_ptr::~exception_ptr((pplx::details::_ExceptionHolder *)((char *)v1 + 4));
  return v1;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::get(xbox::services::title_storage::title_storage_blob_result *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::get(
           a1,
           a2);
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<std::string>),std::function<unsigned char ()(pplx::task<std::string>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(std::function const&<void ()(pplx::task<std::string>)>)::{lambda(pplx::task<std::string>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(std::function const&<void ()(pplx::task<std::string>)>)::{lambda(pplx::task<std::string>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r1@19
  void *v13; // r0@19
  int v14; // r5@20
  int v15; // r7@20
  int v16; // r4@21
  unsigned int *v17; // r1@22
  unsigned int v18; // r0@24
  unsigned int *v19; // r6@28
  unsigned int v20; // r0@30
  unsigned int *v22; // r2@40
  signed int v23; // r1@42
  unsigned int *v24; // r2@44
  signed int v25; // r1@46

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 10);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 8);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v22 = (unsigned int *)(v10 - 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = *((_DWORD *)v1 + 5);
  v13 = (void *)(v12 - 12);
  if ( (int *)(v12 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v12 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j__ZdlPv_9(v13);
  v15 = *v1 >> 32;
  v14 = *v1;
  if ( v14 != v15 )
    do
      v16 = *(_DWORD *)(v14 + 4);
      if ( v16 )
        v17 = (unsigned int *)(v16 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
        }
        else
          v18 = (*v17)--;
        if ( v18 == 1 )
          v19 = (unsigned int *)(v16 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          if ( &pthread_create )
          {
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
          }
          else
            v20 = (*v19)--;
          if ( v20 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
      v14 += 8;
    while ( v14 != v15 );
    v14 = *(_DWORD *)v1;
  if ( v14 )
    j_operator delete((void *)v14);
  return v1;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int *v12; // r0@21
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@1
  int v16; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v14 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v15 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v16 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v14);
  v7 = v15;
  if ( v15 )
    v8 = (unsigned int *)(v15 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2768410;
  *(_DWORD *)(v3 + 80) = 0;
  v12 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&off_2768410);
  *(_DWORD *)(v3 + 88) = 0;
  *(_DWORD *)(v3 + 92) = v12;
  *(_DWORD *)(v3 + 96) = &unk_28898CC;
  return v3;
}


unsigned int __fastcall pplx::task<bool>::then<Concurrency::streams::details::streambuf_state_manager<char>::sync(void)::{lambda(bool)#2}>(int a1, int *a2, int a3)
{
  int v3; // lr@0
  int v4; // r6@1
  int v5; // r4@1
  int *v6; // r5@1
  __int64 v7; // r0@1
  int v8; // r0@5
  unsigned int *v9; // r1@6
  unsigned int v10; // r2@7
  unsigned int result; // r0@10
  int v12; // r4@10
  unsigned int *v13; // r1@11
  unsigned int *v14; // r5@17
  int v15; // [sp+0h] [bp-58h]@1
  void *ptr; // [sp+4h] [bp-54h]@1
  int v17; // [sp+8h] [bp-50h]@1
  int v18; // [sp+Ch] [bp-4Ch]@1
  int v19; // [sp+10h] [bp-48h]@1
  int v20; // [sp+14h] [bp-44h]@1
  int v21; // [sp+18h] [bp-40h]@1
  int v22; // [sp+1Ch] [bp-3Ch]@1
  char v23; // [sp+24h] [bp-34h]@1
  int v24; // [sp+28h] [bp-30h]@1
  void *v25; // [sp+2Ch] [bp-2Ch]@1
  int v26; // [sp+30h] [bp-28h]@1
  int v27; // [sp+34h] [bp-24h]@1
  __int16 v28; // [sp+38h] [bp-20h]@1
  int v29; // [sp+3Ch] [bp-1Ch]@1
  int v30; // [sp+40h] [bp-18h]@1

  v4 = a1;
  v5 = a3;
  v6 = a2;
  pplx::get_ambient_scheduler((pplx *)&v29);
  v19 = v29;
  v20 = v30;
  v21 = v29;
  v22 = 0;
  v28 = 0;
  v26 = 0;
  v27 = 0;
  v25 = 0;
  v17 = 0;
  v18 = 0;
  ptr = 0;
  v23 = 1;
  v15 = v3;
  v24 = v3;
  LODWORD(v7) = &v25;
  HIDWORD(v7) = (unsigned int)&v15 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    operator delete(ptr);
  pplx::task<bool>::_ThenImpl<bool,Concurrency::streams::details::streambuf_state_manager<char>::sync(void)::{lambda(bool)#2}>(
    v4,
    v6,
    v5,
    (int)&v19);
  if ( v25 )
    operator delete(v25);
  v8 = v22;
  if ( v22 )
  {
    v9 = (unsigned int *)(v22 + 4);
    __dmb();
    do
      v10 = __ldrex(v9);
    while ( __strex(v10 - 1, v9) );
    if ( v10 == 1 )
      (*(void (**)(void))(*(_DWORD *)v8 + 8))();
  }
  result = 0;
  v12 = v20;
  if ( v20 )
    v13 = (unsigned int *)(v20 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = __ldrex(v13);
      while ( __strex(result - 1, v13) );
    }
    else
      result = (*v13)--;
    if ( result == 1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v14);
        while ( __strex(result - 1, v14) );
      }
      else
        result = (*v14)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_RegisterTask(
           a1,
           a2);
}


xbox::services::matchmaking::create_match_ticket_response *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::get(xbox::services::matchmaking::create_match_ticket_response *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::matchmaking::create_match_ticket_response *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


void __fastcall pplx::details::_Task_impl<web::json::value>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = pplx::details::_Task_impl<web::json::value>::~_Task_impl(a1);
  j_j_j__ZdlPv_4((void *)v1);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::set(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 17);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 15);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


unsigned int __fastcall pplx::task_from_result(pplx *this, const pplx::task_options *a2)
{
  const pplx::task_options *v2; // r5@1
  pplx *v3; // r4@1
  unsigned int *v4; // r0@2
  unsigned int v5; // r1@4
  int v6; // r0@7
  unsigned int *v7; // r0@8
  unsigned int v8; // r1@10
  int v9; // r0@13
  unsigned int *v10; // r1@14
  unsigned int v11; // r2@15
  __int16 v12; // r0@17
  int v13; // r0@19
  unsigned int *v14; // r1@20
  unsigned int v15; // r2@21
  unsigned int result; // r0@24
  int v17; // r4@24
  unsigned int *v18; // r1@25
  unsigned int *v19; // r5@31
  int v20; // r4@38
  unsigned int *v21; // r1@39
  unsigned int *v22; // r5@45
  int v23; // r4@52
  unsigned int *v24; // r1@53
  unsigned int *v25; // r5@59
  int v26; // [sp+0h] [bp-58h]@7
  int v27; // [sp+4h] [bp-54h]@7
  int v28; // [sp+8h] [bp-50h]@13
  int v29; // [sp+Ch] [bp-4Ch]@17
  char v30; // [sp+14h] [bp-44h]@17
  int v31; // [sp+18h] [bp-40h]@17
  void *ptr; // [sp+1Ch] [bp-3Ch]@17
  int v33; // [sp+20h] [bp-38h]@17
  int v34; // [sp+24h] [bp-34h]@17
  char v35; // [sp+28h] [bp-30h]@17
  char v36; // [sp+29h] [bp-2Fh]@17
  int v37; // [sp+30h] [bp-28h]@1
  int v38; // [sp+34h] [bp-24h]@1
  int v39; // [sp+38h] [bp-20h]@1
  int v40; // [sp+3Ch] [bp-1Ch]@1

  v2 = a2;
  v3 = this;
  j__ZNSt12__shared_ptrIN4pplx7details27_Task_completion_event_implIhEELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS3_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)&v39);
  pplx::task_completion_event<unsigned char>::set(&v39, 0);
  v37 = v39;
  v38 = v40;
  if ( v40 )
  {
    v4 = (unsigned int *)(v40 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 + 1, v4) );
    }
    else
      ++*v4;
  }
  v26 = *(_DWORD *)v2;
  v6 = *((_DWORD *)v2 + 1);
  v27 = v6;
  if ( v6 )
    v7 = (unsigned int *)(v6 + 4);
        v8 = __ldrex(v7);
      while ( __strex(v8 + 1, v7) );
      ++*v7;
  v28 = *((_DWORD *)v2 + 2);
  v9 = *((_DWORD *)v2 + 3);
  if ( v9 )
    v10 = (unsigned int *)(v9 + 4);
    __dmb();
    do
      v11 = __ldrex(v10);
    while ( __strex(v11 + 1, v10) );
  v29 = v9;
  v33 = 0;
  v34 = 0;
  v31 = 0;
  ptr = 0;
  v30 = 0;
  v12 = *((_WORD *)v2 + 20);
  v35 = *((_WORD *)v2 + 20);
  v36 = HIBYTE(v12);
  pplx::create_task<pplx::task_completion_event<void>>((int)v3, (int)&v37, (int)&v26);
  if ( ptr )
    operator delete(ptr);
  v13 = v29;
  if ( v29 )
    v14 = (unsigned int *)(v29 + 4);
      v15 = __ldrex(v14);
    while ( __strex(v15 - 1, v14) );
    if ( v15 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v13 + 8))(v13);
  result = 0;
  v29 = 0;
  v17 = v27;
  if ( v27 )
    v18 = (unsigned int *)(v27 + 4);
        result = __ldrex(v18);
      while ( __strex(result - 1, v18) );
      result = (*v18)--;
    if ( result == 1 )
      v19 = (unsigned int *)(v17 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v19);
        while ( __strex(result - 1, v19) );
      }
      else
        result = (*v19)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
  v20 = v38;
  if ( v38 )
    v21 = (unsigned int *)(v38 + 4);
        result = __ldrex(v21);
      while ( __strex(result - 1, v21) );
      result = (*v21)--;
      v22 = (unsigned int *)(v20 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
          result = __ldrex(v22);
        while ( __strex(result - 1, v22) );
        result = (*v22)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
  v23 = v40;
    v24 = (unsigned int *)(v40 + 4);
        result = __ldrex(v24);
      while ( __strex(result - 1, v24) );
      result = (*v24)--;
      v25 = (unsigned int *)(v23 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 8))(v23);
          result = __ldrex(v25);
        while ( __strex(result - 1, v25) );
        result = (*v25)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v23 + 12))(v23);
  return result;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<void>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  char *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  unsigned int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-68h]@10
  int v33; // [sp+4h] [bp-64h]@10
  int v34; // [sp+8h] [bp-60h]@16
  int v35; // [sp+Ch] [bp-5Ch]@20
  char v36; // [sp+14h] [bp-54h]@20
  int v37; // [sp+18h] [bp-50h]@20
  void *ptr; // [sp+1Ch] [bp-4Ch]@20
  int v39; // [sp+20h] [bp-48h]@20
  int v40; // [sp+24h] [bp-44h]@20
  char v41; // [sp+28h] [bp-40h]@20
  char v42; // [sp+29h] [bp-3Fh]@20
  int v43; // [sp+30h] [bp-38h]@4
  int v44; // [sp+34h] [bp-34h]@4
  __int64 v45; // [sp+38h] [bp-30h]@3
  char *v46; // [sp+40h] [bp-28h]@3
  int v47; // [sp+48h] [bp-20h]@1
  int v48; // [sp+4Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultIvEEEESaISB_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  v46 = (char *)&unk_28898CC;
  v45 = *(_QWORD *)v5;
  EntityInteraction::setInteractText((int *)&v46, (int *)(v5 + 8));
  j_pplx::task_completion_event<xbox::services::xbox_live_result<void>>::set((void ***)&v47, (int)&v45);
  v7 = v46 - 12;
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<void>>>(v3, (int)&v43, (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(std::function const&<void ()(pplx::task<bool>)>)::{lambda(pplx::task<bool>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  std::function<void ()(pplx::task<bool>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = this;
  *(_DWORD *)this = &off_2763318;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 22);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


signed int __fastcall pplx::task_completion_event<void>::set_exception(_DWORD *a1, const std::__exception_ptr::exception_ptr *a2)
{
  int v2; // lr@0
  _DWORD *v3; // r4@1
  signed int v4; // r5@1
  signed int v5; // r4@2
  int v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@1
  int v9; // [sp+8h] [bp-20h]@1
  int v10; // [sp+Ch] [bp-1Ch]@1
  char v11; // [sp+10h] [bp-18h]@1
  char v12; // [sp+14h] [bp-14h]@1

  v3 = a1;
  std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v11, a2);
  v9 = 0;
  v10 = 0;
  v8 = 0;
  v7 = v2;
  std::__exception_ptr::exception_ptr::exception_ptr(
    (std::__exception_ptr::exception_ptr *)&v12,
    (const std::__exception_ptr::exception_ptr *)&v11);
  v4 = pplx::task_completion_event<unsigned char>::_StoreException<std::__exception_ptr::exception_ptr>(
         v3,
         (const std::__exception_ptr::exception_ptr *)&v12,
         (int)&v7);
  std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v12);
  if ( v4 == 1 )
    v5 = pplx::task_completion_event<unsigned char>::_CancelInternal(v3);
  else
    v5 = 0;
  std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v11);
  return v5;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2768628;
  v12 = (xbox::services *)j_xbox::services::system::token_and_signature_result::token_and_signature_result((xbox::services::system::token_and_signature_result *)(v3 + 84));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 120) = 0;
  *(_DWORD *)(v3 + 124) = v13;
  *(_DWORD *)(v3 + 128) = &unk_28898CC;
  return v3;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27690A0;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 148);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::system::nsal::~nsal((xbox::services::system::nsal *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 23);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 20);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  j_std::vector<xbox::services::user_statistics::service_configuration_statistic,std::allocator<xbox::services::user_statistics::service_configuration_statistic>>::operator=(
    v2 + 84,
    (unsigned __int64 *)(v3 + 1));
  *(_QWORD *)(v2 + 96) = *((_QWORD *)v3 + 2);
  EntityInteraction::setInteractText((int *)(v2 + 104), v3 + 6);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  int v30[11]; // [sp+8h] [bp-58h]@25
  int v31; // [sp+34h] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 36);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 36);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      EntityInteraction::setInteractText((int *)v4 + 5, (int *)(v3 + 4));
      EntityInteraction::setInteractText((int *)v4 + 6, (int *)(v3 + 8));
      EntityInteraction::setInteractText((int *)v4 + 7, (int *)(v3 + 12));
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      EntityInteraction::setInteractText((int *)v4 + 9, (int *)(v3 + 20));
      EntityInteraction::setInteractText((int *)v4 + 10, (int *)(v3 + 24));
      EntityInteraction::setInteractText((int *)v4 + 11, (int *)(v3 + 28));
      EntityInteraction::setInteractText((int *)v4 + 12, (int *)(v3 + 32));
      *(_QWORD *)(v4 + 13) = *(_QWORD *)(v3 + 36);
      EntityInteraction::setInteractText((int *)v4 + 15, (int *)(v3 + 44));
      *((_BYTE *)*v2 + 72) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>::xbox_live_result(
              (xbox::services::system::token_and_signature_result *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[16] )
        v17[16] = 0;
        v18 = v17[17];
        v17[17] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27690A0;
  v12 = (xbox::services *)j___aeabi_memclr4_1(v3 + 80, 60);
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 140) = 0;
  *(_DWORD *)(v3 + 144) = v13;
  *(_DWORD *)(v3 + 148) = &unk_28898CC;
  return v3;
}


unsigned int __fastcall pplx::task_from_result<int>(int a1, int a2, int a3)
{
  int v3; // r7@1
  int v4; // r4@1
  int v5; // r5@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int v8; // r0@7
  unsigned int *v9; // r0@8
  unsigned int v10; // r1@10
  int v11; // r0@13
  unsigned int *v12; // r1@14
  unsigned int v13; // r2@15
  __int16 v14; // r0@17
  int v15; // r0@19
  unsigned int *v16; // r1@20
  unsigned int v17; // r2@21
  unsigned int result; // r0@24
  int v19; // r4@24
  unsigned int *v20; // r1@25
  unsigned int *v21; // r5@31
  int v22; // r4@38
  unsigned int *v23; // r1@39
  unsigned int *v24; // r5@45
  int v25; // r4@52
  unsigned int *v26; // r1@53
  unsigned int *v27; // r5@59
  int v28; // [sp+0h] [bp-58h]@7
  int v29; // [sp+4h] [bp-54h]@7
  int v30; // [sp+8h] [bp-50h]@13
  int v31; // [sp+Ch] [bp-4Ch]@17
  char v32; // [sp+14h] [bp-44h]@17
  int v33; // [sp+18h] [bp-40h]@17
  void *ptr; // [sp+1Ch] [bp-3Ch]@17
  int v35; // [sp+20h] [bp-38h]@17
  int v36; // [sp+24h] [bp-34h]@17
  char v37; // [sp+28h] [bp-30h]@17
  char v38; // [sp+29h] [bp-2Fh]@17
  int v39; // [sp+30h] [bp-28h]@1
  int v40; // [sp+34h] [bp-24h]@1
  int v41; // [sp+38h] [bp-20h]@1
  int v42; // [sp+3Ch] [bp-1Ch]@1

  v3 = a2;
  v4 = a1;
  v5 = a3;
  j__ZNSt12__shared_ptrIN4pplx7details27_Task_completion_event_implIiEELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS3_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)&v41);
  pplx::task_completion_event<int>::set(&v41, v3);
  v39 = v41;
  v40 = v42;
  if ( v42 )
  {
    v6 = (unsigned int *)(v42 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v28 = *(_DWORD *)v5;
  v8 = *(_DWORD *)(v5 + 4);
  v29 = v8;
  if ( v8 )
    v9 = (unsigned int *)(v8 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
      ++*v9;
  v30 = *(_DWORD *)(v5 + 8);
  v11 = *(_DWORD *)(v5 + 12);
  if ( v11 )
    v12 = (unsigned int *)(v11 + 4);
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  v31 = v11;
  v35 = 0;
  v36 = 0;
  v33 = 0;
  ptr = 0;
  v32 = 0;
  v14 = *(_WORD *)(v5 + 40);
  v37 = *(_WORD *)(v5 + 40);
  v38 = HIBYTE(v14);
  pplx::create_task<pplx::task_completion_event<int>>(v4, (int)&v39, (int)&v28);
  if ( ptr )
    operator delete(ptr);
  v15 = v31;
  if ( v31 )
    v16 = (unsigned int *)(v31 + 4);
      v17 = __ldrex(v16);
    while ( __strex(v17 - 1, v16) );
    if ( v17 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v15 + 8))(v15);
  result = 0;
  v31 = 0;
  v19 = v29;
  if ( v29 )
    v20 = (unsigned int *)(v29 + 4);
        result = __ldrex(v20);
      while ( __strex(result - 1, v20) );
      result = (*v20)--;
    if ( result == 1 )
      v21 = (unsigned int *)(v19 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v21);
        while ( __strex(result - 1, v21) );
      }
      else
        result = (*v21)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
  v22 = v40;
  if ( v40 )
    v23 = (unsigned int *)(v40 + 4);
        result = __ldrex(v23);
      while ( __strex(result - 1, v23) );
      result = (*v23)--;
      v24 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
          result = __ldrex(v24);
        while ( __strex(result - 1, v24) );
        result = (*v24)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  v25 = v42;
    v26 = (unsigned int *)(v42 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
        result = (*v27)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  return result;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::title_storage::title_storage_quota::title_storage_quota((xbox::services::title_storage::title_storage_quota *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 60) = v3;
  *(_DWORD *)(v1 + 64) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 72) = 0;
  *(_DWORD *)(v1 + 76) = 0;
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a2;
  v3 = a1;
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  EntityInteraction::setInteractText((int *)(a1 + 84), (int *)(a2 + 4));
  *(_QWORD *)(v3 + 88) = *(_QWORD *)(v2 + 8);
  EntityInteraction::setInteractText((int *)(v3 + 96), (int *)(v2 + 16));
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 36));
    }
    else
    v7 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  int v30[23]; // [sp+8h] [bp-88h]@25
  int v31; // [sp+64h] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 60);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 60);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::social::xbox_user_profile::operator=((int *)v4 + 4, (int *)v3);
      *(_QWORD *)(v4 + 25) = *(_QWORD *)(v3 + 84);
      EntityInteraction::setInteractText((int *)v4 + 27, (int *)(v3 + 92));
      *((_BYTE *)*v2 + 120) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>::xbox_live_result(
              (xbox::services::social::xbox_user_profile *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::social::xbox_user_profile::~xbox_user_profile((xbox::services::social::xbox_user_profile *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[28] )
        v17[28] = 0;
        v18 = v17[29];
        v17[29] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2766FB0;
  v12 = (xbox::services *)j_xbox::services::social::xbox_social_relationship_result::xbox_social_relationship_result((xbox::services::social::xbox_social_relationship_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 112) = 0;
  *(_DWORD *)(v3 + 116) = v13;
  *(_DWORD *)(v3 + 120) = &unk_28898CC;
  return v3;
}


void __fastcall pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::~_Task_impl(a1);
}


int __fastcall pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_276916C;
  *(_DWORD *)(v3 + 80) = 0;
  *(_DWORD *)(v3 + 84) = 0;
  return v3;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r8@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r4@8
  int *v11; // r11@8
  int *v12; // r10@11
  int *v13; // r7@14
  unsigned int *v14; // r2@15
  signed int v15; // r1@17
  int v16; // r4@23
  void **v17; // r8@25
  char *v18; // r0@25
  void **v19; // r0@28
  void *v20; // r5@29
  unsigned int *v21; // r1@30
  unsigned int v22; // r0@32
  unsigned int *v23; // r4@37
  unsigned int v24; // r0@39
  int *v25; // r6@46
  int v26; // r4@47
  unsigned int *v27; // r1@48
  unsigned int v28; // r0@50
  unsigned int *v29; // r5@54
  unsigned int v30; // r0@56
  int *ptr; // [sp+8h] [bp-78h]@10
  char v33; // [sp+18h] [bp-68h]@25
  void *v34; // [sp+44h] [bp-3Ch]@25
  int v35; // [sp+48h] [bp-38h]@25
  int v36; // [sp+4Ch] [bp-34h]@25
  char *v37; // [sp+50h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 42);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 42);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v13 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::tournaments::team_request_result::operator=((int)(v4 + 4), v3);
      *((_QWORD *)v4 + 8) = *(_QWORD *)(v3 + 48);
      EntityInteraction::setInteractText((int *)v4 + 18, (int *)(v3 + 56));
      *((_BYTE *)*v2 + 84) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      ptr = v10;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v16 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v16 + 8))(v16, 1, 0, 0);
          }
          else
            v17 = *v2;
            j___aeabi_memclr8_1((int)&v33, 44);
            v34 = &unk_28898CC;
            v35 = 0;
            v36 = ((int (__cdecl *)(_DWORD))byte_21E9640)(0);
            v37 = (char *)&unk_28898CC;
            j_xbox::services::tournaments::team_request_result::operator=((int)&v33, (int)(v17 + 4));
            *(_QWORD *)&v35 = *((_QWORD *)v17 + 8);
            EntityInteraction::setInteractText((int *)&v37, (int *)v17 + 18);
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_FinalizeAndRunContinuations(
              v16,
              (int)&v33);
            v18 = v37 - 12;
            if ( (int *)(v37 - 12) != &dword_28898C0 )
            {
              v14 = (unsigned int *)(v37 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v15 = __ldrex(v14);
                while ( __strex(v15 - 1, v14) );
              }
              else
                v15 = (*v14)--;
              if ( v15 <= 0 )
                j_j_j_j__ZdlPv_9(v18);
            }
            j_xbox::services::tournaments::team_request_result::~team_request_result((xbox::services::tournaments::team_request_result *)&v33);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v19 = *v2;
      if ( (*v2)[19] )
        v13 = ptr;
        v19[19] = 0;
        v20 = v19[20];
        v19[20] = 0;
        if ( v20 )
          v21 = (unsigned int *)((char *)v20 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v22 = __ldrex(v21);
            while ( __strex(v22 - 1, v21) );
            v22 = (*v21)--;
          if ( v22 == 1 )
            v23 = (unsigned int *)((char *)v20 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v20 + 8))(v20);
            if ( &pthread_create )
              __dmb();
              do
                v24 = __ldrex(v23);
              while ( __strex(v24 - 1, v23) );
            else
              v24 = (*v23)--;
            if ( v24 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v20 + 12))(v20);
        v5 = 1;
      else
    if ( v13 != v11 )
      v25 = v13;
      do
        v26 = v25[1];
        if ( v26 )
          v27 = (unsigned int *)(v26 + 4);
              v28 = __ldrex(v27);
            while ( __strex(v28 - 1, v27) );
            v28 = (*v27)--;
          if ( v28 == 1 )
            v29 = (unsigned int *)(v26 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
                v30 = __ldrex(v29);
              while ( __strex(v30 - 1, v29) );
              v30 = (*v29)--;
            if ( v30 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
        v25 += 2;
      while ( v25 != v11 );
    if ( v13 )
      j_operator delete(v13);
  }
  return v5;
}


signed int __fastcall pplx::task_completion_event<bool>::_StoreException<std::__exception_ptr::exception_ptr>(_DWORD *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  int *v3; // r7@1
  int v4; // r4@1
  int v5; // r5@1
  const std::__exception_ptr::exception_ptr *v6; // r6@1
  pthread_mutex_t *v7; // r8@1
  int v8; // r0@2
  unsigned int v9; // r0@4
  signed int v10; // r7@4
  __int64 v11; // r0@8
  int v12; // r5@8
  unsigned int *v13; // r1@9
  unsigned int v14; // r0@11
  unsigned int *v15; // r4@15
  unsigned int v16; // r0@17
  int v17; // r5@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r0@25
  unsigned int *v20; // r4@29
  unsigned int v21; // r0@31
  int v23; // [sp+0h] [bp-28h]@8
  char v24; // [sp+4h] [bp-24h]@8
  int v25; // [sp+8h] [bp-20h]@8
  char v26; // [sp+Ch] [bp-1Ch]@8

  v3 = a1;
  v4 = *a1;
  v5 = a3;
  v6 = a2;
  v7 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v8 = pthread_mutex_lock(v7);
    if ( v8 )
      sub_119CCFC(v8);
    v4 = *v3;
  }
  v9 = *(_WORD *)(v4 + 28);
  v10 = 0;
  if ( v9 <= 0xFF && !(_BYTE)v9 )
    if ( *(_DWORD *)(v4 + 20) )
    {
      v10 = 0;
    }
    else
      std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v23, v6);
      std::__shared_ptr<pplx::details::_ExceptionHolder,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_ExceptionHolder>,std::__exception_ptr::exception_ptr &,pplx::details::_TaskCreationCallstack const&>(
        (int)&v24,
        (int)&v26,
        (const std::__exception_ptr::exception_ptr *)&v23,
        v5);
      v11 = *(_QWORD *)&v24;
      *(_DWORD *)&v24 = 0;
      v25 = 0;
      *(_DWORD *)(v4 + 20) = v11;
      v12 = *(_DWORD *)(v4 + 24);
      *(_DWORD *)(v4 + 24) = HIDWORD(v11);
      if ( v12 )
      {
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      }
      v17 = v25;
      if ( v25 )
        v18 = (unsigned int *)(v25 + 4);
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v23);
      v10 = 1;
    pthread_mutex_unlock(v7);
  return v10;
}


void __fastcall pplx::details::_CancellationTokenState::_Cancel(pplx::details::_CancellationTokenState *this)
{
  pplx::details::_CancellationTokenState::_Cancel(this);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<web::json::value>)> pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(std::function const&<void ()(pplx::task<web::json::value>)>)::{lambda(pplx::task<web::json::value>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<web::json::value>),std::function<unsigned char ()(pplx::task<web::json::value>)> pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(std::function const&<void ()(pplx::task<web::json::value>)>)::{lambda(pplx::task<web::json::value>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(std::function const&<void ()(pplx::task<web::json::value>)>)::{lambda(pplx::task<web::json::value>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::~_Task_impl(a1);
}


unsigned int __fastcall pplx::task<bool>::then<pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}>(int a1, int *a2, int a3)
{
  int v3; // lr@0
  int v4; // r6@1
  int v5; // r4@1
  int *v6; // r5@1
  __int64 v7; // r0@1
  int v8; // r0@5
  unsigned int *v9; // r1@6
  unsigned int v10; // r2@7
  unsigned int result; // r0@10
  int v12; // r4@10
  unsigned int *v13; // r1@11
  unsigned int *v14; // r5@17
  int v15; // [sp+0h] [bp-58h]@1
  void *ptr; // [sp+4h] [bp-54h]@1
  int v17; // [sp+8h] [bp-50h]@1
  int v18; // [sp+Ch] [bp-4Ch]@1
  int v19; // [sp+10h] [bp-48h]@1
  int v20; // [sp+14h] [bp-44h]@1
  int v21; // [sp+18h] [bp-40h]@1
  int v22; // [sp+1Ch] [bp-3Ch]@1
  char v23; // [sp+24h] [bp-34h]@1
  int v24; // [sp+28h] [bp-30h]@1
  void *v25; // [sp+2Ch] [bp-2Ch]@1
  int v26; // [sp+30h] [bp-28h]@1
  int v27; // [sp+34h] [bp-24h]@1
  __int16 v28; // [sp+38h] [bp-20h]@1
  int v29; // [sp+3Ch] [bp-1Ch]@1
  int v30; // [sp+40h] [bp-18h]@1

  v4 = a1;
  v5 = a3;
  v6 = a2;
  pplx::get_ambient_scheduler((pplx *)&v29);
  v19 = v29;
  v20 = v30;
  v21 = v29;
  v22 = 0;
  v28 = 0;
  v26 = 0;
  v27 = 0;
  v25 = 0;
  v17 = 0;
  v18 = 0;
  ptr = 0;
  v23 = 1;
  v15 = v3;
  v24 = v3;
  LODWORD(v7) = &v25;
  HIDWORD(v7) = (unsigned int)&v15 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    operator delete(ptr);
  pplx::task<bool>::_ThenImpl<bool,pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}>(
    v4,
    v6,
    v5,
    (int)&v19);
  if ( v25 )
    operator delete(v25);
  v8 = v22;
  if ( v22 )
  {
    v9 = (unsigned int *)(v22 + 4);
    __dmb();
    do
      v10 = __ldrex(v9);
    while ( __strex(v10 - 1, v9) );
    if ( v10 == 1 )
      (*(void (**)(void))(*(_DWORD *)v8 + 8))();
  }
  result = 0;
  v12 = v20;
  if ( v20 )
    v13 = (unsigned int *)(v20 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = __ldrex(v13);
      while ( __strex(result - 1, v13) );
    }
    else
      result = (*v13)--;
    if ( result == 1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v14);
        while ( __strex(result - 1, v14) );
      }
      else
        result = (*v14)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_276621C;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 136);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::game_server_platform::game_server_ticket_status::~game_server_ticket_status((xbox::services::game_server_platform::game_server_ticket_status *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::get(xbox::services::contextual_search::contextual_search_game_clips_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::contextual_search::contextual_search_game_clips_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::set(void ***a1, int a2)
{
  void ***v2; // r8@1
  int v3; // r11@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r10@3
  int v8; // r0@4
  int v9; // r0@8
  int v10; // r3@8
  int v11; // r6@8
  int v12; // r0@8
  int v13; // r3@8
  int v14; // r5@8
  int v15; // r6@8
  int v16; // r1@8
  int v17; // r3@8
  int v18; // r4@8
  int v19; // r5@8
  int v20; // r6@8
  int v21; // r1@8
  int v22; // r3@8
  int v23; // r4@8
  int v24; // r5@8
  int v25; // r6@8
  int v26; // r1@8
  int v27; // r3@8
  int v28; // r4@8
  int v29; // r5@8
  int v30; // r6@8
  int v31; // r3@8
  int v32; // r1@8
  int v33; // r2@8
  void **v34; // r0@8
  int *v35; // r4@8
  int *v36; // r11@8
  int *v37; // r9@11
  unsigned int *v38; // r2@15
  signed int v39; // r1@17
  int v40; // r7@23
  void *v41; // r0@25
  void **v42; // r0@28
  void *v43; // r5@29
  unsigned int *v44; // r1@30
  unsigned int v45; // r0@32
  unsigned int *v46; // r6@36
  unsigned int v47; // r0@38
  int *v48; // r6@45
  int v49; // r7@46
  unsigned int *v50; // r1@47
  unsigned int v51; // r0@49
  unsigned int *v52; // r5@53
  unsigned int v53; // r0@55
  char v55; // [sp+8h] [bp-C8h]@25
  int v56; // [sp+A0h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 92);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 92);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v35 = 0;
      v36 = 0;
      v5 = 0;
    else
      v9 = (int)(v4 + 4);
      v10 = *(_DWORD *)(v3 + 4);
      v11 = *(_DWORD *)(v3 + 8);
      *(_DWORD *)v9 = *(_DWORD *)v3;
      *(_DWORD *)(v9 + 4) = v10;
      *(_DWORD *)(v9 + 8) = v11;
      v12 = (int)(v4 + 7);
      v13 = *(_DWORD *)(v3 + 16);
      v14 = *(_DWORD *)(v3 + 20);
      v15 = *(_DWORD *)(v3 + 24);
      *(_DWORD *)v12 = *(_DWORD *)(v3 + 12);
      *(_DWORD *)(v12 + 4) = v13;
      *(_DWORD *)(v12 + 8) = v14;
      *(_DWORD *)(v12 + 12) = v15;
      EntityInteraction::setInteractText((int *)v4 + 11, (int *)(v3 + 28));
      EntityInteraction::setInteractText((int *)v4 + 12, (int *)(v3 + 32));
      EntityInteraction::setInteractText((int *)v4 + 13, (int *)(v3 + 36));
      EntityInteraction::setInteractText((int *)v4 + 14, (int *)(v3 + 40));
      EntityInteraction::setInteractText((int *)v4 + 15, (int *)(v3 + 44));
      EntityInteraction::setInteractText((int *)v4 + 16, (int *)(v3 + 48));
      EntityInteraction::setInteractText((int *)v4 + 17, (int *)(v3 + 52));
      v16 = (int)(v4 + 18);
      v17 = *(_DWORD *)(v3 + 60);
      v18 = *(_DWORD *)(v3 + 64);
      v19 = *(_DWORD *)(v3 + 68);
      v20 = *(_DWORD *)(v3 + 72);
      *(_DWORD *)v16 = *(_DWORD *)(v3 + 56);
      *(_DWORD *)(v16 + 4) = v17;
      *(_DWORD *)(v16 + 8) = v18;
      *(_DWORD *)(v16 + 12) = v19;
      *(_DWORD *)(v16 + 16) = v20;
      v21 = (int)(v4 + 23);
      v22 = *(_DWORD *)(v3 + 80);
      v23 = *(_DWORD *)(v3 + 84);
      v24 = *(_DWORD *)(v3 + 88);
      v25 = *(_DWORD *)(v3 + 92);
      *(_DWORD *)v21 = *(_DWORD *)(v3 + 76);
      *(_DWORD *)(v21 + 4) = v22;
      *(_DWORD *)(v21 + 8) = v23;
      *(_DWORD *)(v21 + 12) = v24;
      *(_DWORD *)(v21 + 16) = v25;
      v26 = (int)(v4 + 28);
      v27 = *(_DWORD *)(v3 + 100);
      v28 = *(_DWORD *)(v3 + 104);
      v29 = *(_DWORD *)(v3 + 108);
      v30 = *(_DWORD *)(v3 + 112);
      *(_DWORD *)v26 = *(_DWORD *)(v3 + 96);
      *(_DWORD *)(v26 + 4) = v27;
      *(_DWORD *)(v26 + 8) = v28;
      *(_DWORD *)(v26 + 12) = v29;
      *(_DWORD *)(v26 + 16) = v30;
      EntityInteraction::setInteractText((int *)v4 + 34, (int *)(v3 + 120));
      v31 = (int)(v4 + 36);
      v32 = *(_DWORD *)(v3 + 132);
      v33 = *(_DWORD *)(v3 + 136);
      *(_DWORD *)v31 = *(_DWORD *)(v3 + 128);
      *(_DWORD *)(v31 + 4) = v32;
      *(_DWORD *)(v31 + 8) = v33;
      *((_QWORD *)v4 + 20) = *(_QWORD *)(v3 + 144);
      EntityInteraction::setInteractText((int *)v4 + 42, (int *)(v3 + 152));
      *((_BYTE *)*v2 + 184) = 1;
      v34 = *v2;
      v35 = (int *)**v2;
      *v34 = 0;
      v36 = (int *)v34[1];
      v34[1] = 0;
      v34[2] = 0;
      if ( v35 != v36 )
      {
        v37 = v35;
        do
        {
          v40 = *v37;
          if ( *(_DWORD *)(*v37 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v40 + 8))(v40, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::tournaments::tournament>::xbox_live_result(
              (xbox::services::tournaments::tournament *)&v55,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_FinalizeAndRunContinuations(
              v40,
              (int)&v55);
            v41 = (void *)(v56 - 12);
            if ( (int *)(v56 - 12) != &dword_28898C0 )
            {
              v38 = (unsigned int *)(v56 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v39 = __ldrex(v38);
                while ( __strex(v39 - 1, v38) );
              }
              else
                v39 = (*v38)--;
              if ( v39 <= 0 )
                j_j_j_j__ZdlPv_9(v41);
            }
            j_xbox::services::tournaments::tournament::~tournament((xbox::services::tournaments::tournament *)&v55);
          v37 += 2;
        }
        while ( v37 != v36 );
      }
      v42 = *v2;
      if ( (*v2)[44] )
        v42[44] = 0;
        v43 = v42[45];
        v42[45] = 0;
        if ( v43 )
          v44 = (unsigned int *)((char *)v43 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v45 = __ldrex(v44);
            while ( __strex(v45 - 1, v44) );
            v45 = (*v44)--;
          if ( v45 == 1 )
            v46 = (unsigned int *)((char *)v43 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v43 + 8))(v43);
            if ( &pthread_create )
              __dmb();
              do
                v47 = __ldrex(v46);
              while ( __strex(v47 - 1, v46) );
            else
              v47 = (*v46)--;
            if ( v47 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v43 + 12))(v43);
      v5 = 1;
    if ( v35 != v36 )
      v48 = v35;
      do
        v49 = v48[1];
        if ( v49 )
          v50 = (unsigned int *)(v49 + 4);
              v51 = __ldrex(v50);
            while ( __strex(v51 - 1, v50) );
            v51 = (*v50)--;
          if ( v51 == 1 )
            v52 = (unsigned int *)(v49 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v49 + 8))(v49);
                v53 = __ldrex(v52);
              while ( __strex(v53 - 1, v52) );
              v53 = (*v52)--;
            if ( v53 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v49 + 12))(v49);
        v48 += 2;
      while ( v48 != v36 );
    if ( v35 )
      j_operator delete(v35);
  }
  return v5;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 27);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 25);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::achievements::achievements_result::~achievements_result((xbox::services::achievements::achievements_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::~_Task_impl(a1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::~_Task_impl(a1);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::set(
           a1,
           a2);
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>),std::function<unsigned char ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  j_pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::tournaments::team_request_result::operator=(a1 + 80, a2);
  *(_QWORD *)(v2 + 128) = *(_QWORD *)(v3 + 48);
  EntityInteraction::setInteractText((int *)(v2 + 136), (int *)(v3 + 56));
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<void>),std::function<unsigned char ()(xbox::services::xbox_live_result<void>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(std::function const&<void ()(xbox::services::xbox_live_result<void>)>)::{lambda(xbox::services::xbox_live_result<void>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@1
  char *v5; // r0@3
  unsigned int *v7; // r2@5
  signed int v8; // r1@7
  int v9; // [sp+0h] [bp-28h]@1
  int v10; // [sp+4h] [bp-24h]@1
  char *v11; // [sp+8h] [bp-20h]@1

  v2 = a2;
  v3 = *a1;
  v9 = 0;
  sub_DA8C24();
  v10 = v4;
  v11 = (char *)&unk_28898CC;
  if ( &v9 != (int *)v2 )
  {
    *(_QWORD *)&v9 = *(_QWORD *)v2;
    xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
      (int *)&v11,
      (int *)(v2 + 8));
  }
  pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(std::function const&<void ()(xbox::services::xbox_live_result<void>)>)::{lambda(xbox::services::xbox_live_result<void>)#1}::operator() const(
    v3,
    (int)&v9);
  v5 = v11 - 12;
  if ( (int *)(v11 - 12) != &dword_28898C0 )
    v7 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 <= 0 )
      j_j_j_j_j__ZdlPv_9(v5);
  return 0;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::achievements::achievements_result::operator=(a1 + 80, a2);
  *(_QWORD *)(v2 + 156) = *(_QWORD *)(v3 + 76);
  EntityInteraction::setInteractText((int *)(v2 + 164), (int *)(v3 + 84));
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}::operator() const(int a1, int a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  void *v4; // r0@2
  unsigned int *v6; // r2@4
  signed int v7; // r1@6
  unsigned int *v8; // r2@8
  signed int v9; // r1@10
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+18h] [bp-20h]@1

  v2 = a1;
  j_xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>::xbox_live_result(
    (xbox::services::matchmaking::create_match_ticket_response *)&v10,
    a2);
  j_std::function<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>::operator()(
    v2,
    (int)&v10);
  v3 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v6 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 <= 0 )
      j_j_j_j__ZdlPv_9(v3);
  }
  v4 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v8 = (unsigned int *)(v10 - 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v4);
  return 0;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  pplx::details::_Task_impl_base *v4; // r1@3
  char *v6; // r4@4
  int v7; // r3@4
  char *v8; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v6 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v6 = &off_26D7A9C;
    sub_21E94B4((void **)v6 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v6,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v7);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v8 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v8 = &off_26DD7D0;
    *((_DWORD *)v8 + 1) = &unk_28898CC;
      (int)v8,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  v4 = *v2;
  *(_DWORD *)(v3 + 12) = &unk_28898CC;
  *(_DWORD *)v3 = *((_DWORD *)v4 + 20);
  *(_QWORD *)(v3 + 4) = *(_QWORD *)((char *)v4 + 84);
  return EntityInteraction::setInteractText((int *)(v3 + 12), (int *)v4 + 23);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6system20verify_string_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r1@8
  void *v9; // r0@8
  unsigned int *v11; // r2@10
  signed int v12; // r1@12
  unsigned int *v13; // r2@14
  signed int v14; // r1@16

  v1 = this;
  *(_DWORD *)this = &off_2769544;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 26);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v11 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
    }
    else
      v12 = (*v11)--;
    if ( v12 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 20);
  v9 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
    v13 = (unsigned int *)(v8 - 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int (__fastcall *__fastcall pplx::details::_MakeUnitToTFunc<std::string>(int a1, int a2))(int a1, int *a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  int (__fastcall *result)(int, int *); // r0@5
  char v8; // [sp+4h] [bp-24h]@2
  int (*v9)(void); // [sp+Ch] [bp-1Ch]@1
  int v10; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v9 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v8);
    v10 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v9 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v8, 2);
    v5 = v9;
    v6[3] = v10;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  result = std::_Function_handler<std::string ()(unsigned char),std::function<std::string ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::string>(std::function const&<std::string ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke;
  *(_DWORD *)(v3 + 8) = std::_Function_base::_Base_manager<std::function<std::string ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::string>(std::function const&<std::string ()(void)>)::{lambda(unsigned char)#1}>::_M_manager;
  *(_DWORD *)(v3 + 12) = std::_Function_handler<std::string ()(unsigned char),std::function<std::string ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::string>(std::function const&<std::string ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke;
    result = (int (__fastcall *)(int, int *))v5();
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


void __fastcall pplx::details::_CancellationTokenCallback<pplx::details::_Task_impl_base::_RegisterCancellation(std::weak_ptr<pplx::details::_Task_impl_base>)::{lambda(void)#1}>::~_CancellationTokenCallback(void *ptr)
{
  void *v1; // r5@1
  int v2; // r0@1
  unsigned int *v3; // r2@2
  unsigned int v4; // r1@4

  v1 = ptr;
  *(_DWORD *)ptr = &off_26D7B28;
  v2 = *((_DWORD *)ptr + 6);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 8);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      (*(void (**)(void))(*(_DWORD *)v2 + 12))();
  }
  j_j_j__ZdlPv_3(v1);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r12@1
  int v4; // r2@1
  int v5; // r3@1
  int v6; // r5@1
  int v7; // r6@1
  int v8; // r7@1
  int v9; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v11; // r0@8
  int v12; // r1@12
  int v13; // r5@13

  v2 = a1;
  v3 = a1 + 80;
  v4 = *(_DWORD *)(a2 + 4);
  v5 = *(_DWORD *)(a2 + 8);
  v6 = *(_DWORD *)(a2 + 12);
  v7 = *(_DWORD *)(a2 + 16);
  v8 = a2;
  *(_DWORD *)v3 = *(_DWORD *)a2;
  *(_DWORD *)(v3 + 4) = v4;
  *(_DWORD *)(v3 + 8) = v5;
  *(_DWORD *)(v3 + 12) = v6;
  *(_DWORD *)(v3 + 16) = v7;
  EntityInteraction::setInteractText((int *)(a1 + 100), (int *)(a2 + 20));
  EntityInteraction::setInteractText((int *)(v2 + 104), (int *)(v8 + 24));
  EntityInteraction::setInteractText((int *)(v2 + 108), (int *)(v8 + 28));
  EntityInteraction::setInteractText((int *)(v2 + 112), (int *)(v8 + 32));
  EntityInteraction::setInteractText((int *)(v2 + 116), (int *)(v8 + 36));
  EntityInteraction::setInteractText((int *)(v2 + 120), (int *)(v8 + 40));
  j_web::json::value::operator=((int *)(v2 + 124), (int *)(v8 + 44));
  *(_QWORD *)(v2 + 128) = *(_QWORD *)(v8 + 48);
  EntityInteraction::setInteractText((int *)(v2 + 136), (int *)(v8 + 56));
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v9 )
      sub_21E5E14(v9);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v11 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v11 )
        sub_21E5E14(v11);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v12 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v12 )
      do
      {
        v13 = *(_DWORD *)(v12 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v12);
        v12 = v13;
      }
      while ( v13 );
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<TransactionStatus>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = this;
  *(_DWORD *)this = &off_26DF6B4;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_2(v1);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(
           a1,
           a2);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_RegisterTask(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27679D8;
  v12 = j_xbox::services::tournaments::team_request_result::team_request_result((xbox::services::tournaments::team_request_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 128) = 0;
  *(_DWORD *)(v3 + 132) = v13;
  *(_DWORD *)(v3 + 136) = &unk_28898CC;
  return v3;
}


void __fastcall __noreturn pplx::details::_ExceptionHolder::_RethrowUserException(pplx::details::_ExceptionHolder *this)
{
  int v1; // r1@1
  unsigned int v2; // r2@3
  std::__exception_ptr::exception_ptr *v3; // r0@5
  char v4; // [sp+4h] [bp-Ch]@5

  v1 = *(_DWORD *)this;
  __dmb();
  if ( !v1 )
  {
    __dmb();
    do
      v2 = __ldrex((unsigned int *)this);
    while ( __strex(1u, (unsigned int *)this) );
  }
  v3 = std::__exception_ptr::exception_ptr::exception_ptr(
         (std::__exception_ptr::exception_ptr *)&v4,
         (pplx::details::_ExceptionHolder *)((char *)this + 4));
  std::rethrow_exception(v3);
}


signed int __fastcall pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>::set(void ***a1, int a2)
{
  void ***v2; // r10@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r9@3
  int v8; // r0@4
  int v9; // r5@8
  unsigned int *v10; // r0@10
  unsigned int v11; // r1@12
  int *v12; // r4@16
  int *v13; // r8@16
  void *v14; // r6@18
  unsigned int *v15; // r1@19
  unsigned int v16; // r0@21
  unsigned int *v17; // r4@25
  unsigned int v18; // r0@27
  void **v19; // r0@33
  int *v20; // r5@36
  int v21; // r0@37
  void **v22; // r1@39
  int v23; // r1@39
  unsigned int *v24; // r1@40
  unsigned int v25; // r2@42
  int v26; // r6@45
  unsigned int *v27; // r1@46
  unsigned int v28; // r0@48
  unsigned int *v29; // r7@52
  unsigned int v30; // r0@54
  void **v31; // r0@60
  void *v32; // r5@61
  unsigned int *v33; // r1@62
  unsigned int v34; // r0@64
  unsigned int *v35; // r6@68
  unsigned int v36; // r0@70
  int *v37; // r6@77
  int v38; // r7@78
  unsigned int *v39; // r1@79
  unsigned int v40; // r0@81
  unsigned int *v41; // r5@85
  unsigned int v42; // r0@87
  void *v44; // [sp+4h] [bp-2Ch]@39
  int v45; // [sp+8h] [bp-28h]@39

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 16);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 16);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v12 = 0;
      v13 = 0;
      v5 = 0;
    else
      v4[4] = *(void **)v3;
      v9 = *(_DWORD *)(v3 + 4);
      if ( (void *)v9 != v4[5] )
      {
        if ( v9 )
        {
          v10 = (unsigned int *)(v9 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v11 = __ldrex(v10);
            while ( __strex(v11 + 1, v10) );
          }
          else
            ++*v10;
        }
        v14 = v4[5];
        if ( v14 )
          v15 = (unsigned int *)((char *)v14 + 4);
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
            v16 = (*v15)--;
          if ( v16 == 1 )
            v17 = (unsigned int *)((char *)v14 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v14 + 8))(v14);
            if ( &pthread_create )
            {
              __dmb();
              do
                v18 = __ldrex(v17);
              while ( __strex(v18 - 1, v17) );
            }
            else
              v18 = (*v17)--;
            if ( v18 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v14 + 12))(v14);
        v4[5] = (void *)v9;
      }
      *((_BYTE *)*v2 + 32) = 1;
      v19 = *v2;
      v12 = (int *)**v2;
      *v19 = 0;
      v13 = (int *)v19[1];
      v19[1] = 0;
      v19[2] = 0;
      if ( v12 != v13 )
        v20 = v12;
        do
          v21 = *v20;
          if ( *(_DWORD *)(*v20 + 4) == 2 )
            (*(void (__cdecl **)(int, signed int))(*(_DWORD *)v21 + 8))(v21, 1);
            v22 = *v2;
            v44 = (*v2)[4];
            v23 = (int)v22[5];
            v45 = v23;
            if ( v23 )
              v24 = (unsigned int *)(v23 + 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v25 = __ldrex(v24);
                while ( __strex(v25 + 1, v24) );
              }
              else
                ++*v24;
            j_pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_FinalizeAndRunContinuations(
              v21,
              (int)&v44);
            v26 = v45;
            if ( v45 )
              v27 = (unsigned int *)(v45 + 4);
                  v28 = __ldrex(v27);
                while ( __strex(v28 - 1, v27) );
                v28 = (*v27)--;
              if ( v28 == 1 )
                v29 = (unsigned int *)(v26 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v30 = __ldrex(v29);
                  while ( __strex(v30 - 1, v29) );
                }
                else
                  v30 = (*v29)--;
                if ( v30 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
          v20 += 2;
        while ( v20 != v13 );
      v31 = *v2;
      if ( (*v2)[6] )
        v31[6] = 0;
        v32 = v31[7];
        v31[7] = 0;
        if ( v32 )
          v33 = (unsigned int *)((char *)v32 + 4);
              v34 = __ldrex(v33);
            while ( __strex(v34 - 1, v33) );
            v34 = (*v33)--;
          if ( v34 == 1 )
            v35 = (unsigned int *)((char *)v32 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v32 + 8))(v32);
                v36 = __ldrex(v35);
              while ( __strex(v36 - 1, v35) );
              v36 = (*v35)--;
            if ( v36 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v32 + 12))(v32);
      v5 = 1;
    if ( v12 != v13 )
      v37 = v12;
      do
        v38 = v37[1];
        if ( v38 )
          v39 = (unsigned int *)(v38 + 4);
              v40 = __ldrex(v39);
            while ( __strex(v40 - 1, v39) );
            v40 = (*v39)--;
          if ( v40 == 1 )
            v41 = (unsigned int *)(v38 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v38 + 8))(v38);
                v42 = __ldrex(v41);
              while ( __strex(v42 - 1, v41) );
              v42 = (*v41)--;
            if ( v42 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v38 + 12))(v38);
        v37 += 2;
      while ( v37 != v13 );
    if ( v12 )
      j_operator delete(v12);
  }
  return v5;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2767AF0;
  v12 = j_xbox::services::tournaments::team_info::team_info((xbox::services::tournaments::team_info *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 256) = 0;
  *(_DWORD *)(v3 + 260) = v13;
  *(_DWORD *)(v3 + 264) = &unk_28898CC;
  return v3;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  char v17; // [sp+8h] [bp-50h]@7
  int v18; // [sp+38h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 72) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 80) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>::xbox_live_result(
      (xbox::services::game_server_platform::cluster_result *)&v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::game_server_platform::cluster_result::~cluster_result((xbox::services::game_server_platform::cluster_result *)&v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(std::function const&<void ()(pplx::task<web::http::http_response>)>)::{lambda(pplx::task<web::http::http_response>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(std::function const&<void ()(pplx::task<web::http::http_response>)>)::{lambda(pplx::task<web::http::http_response>)#1}::operator() const(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<int>::_CancelInternal(_DWORD *a1)
{
  _DWORD *v1; // r6@1
  int v2; // r0@1
  signed int v3; // r9@2
  pthread_mutex_t *v4; // r7@3
  int v5; // r0@4
  _DWORD *v6; // r8@6
  _DWORD *v7; // r10@6
  _DWORD *v8; // r5@12
  int v9; // r1@15
  _DWORD *v10; // r5@18
  int v11; // r6@19
  unsigned int *v12; // r1@20
  unsigned int v13; // r0@22
  unsigned int *v14; // r4@26
  unsigned int v15; // r0@28

  v1 = a1;
  v2 = *a1;
  if ( *(_BYTE *)(v2 + 29) )
  {
    v3 = 0;
  }
  else
    v4 = (pthread_mutex_t *)(v2 + 12);
    if ( !&pthread_create )
      goto LABEL_40;
    v5 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 12));
    if ( v5 )
      sub_119CCFC(v5);
    v2 = *v1;
    if ( *(_BYTE *)(*v1 + 29) )
    {
      v6 = 0;
      v7 = 0;
      v3 = 0;
    }
    else
LABEL_40:
      v3 = 1;
      *(_BYTE *)(v2 + 29) = 1;
      v6 = *(_DWORD **)v2;
      *(_DWORD *)v2 = 0;
      v7 = *(_DWORD **)(v2 + 4);
      *(_DWORD *)(v2 + 4) = 0;
      *(_DWORD *)(v2 + 8) = 0;
    if ( &pthread_create )
      pthread_mutex_unlock(v4);
    if ( v6 != v7 && v3 == 1 )
      v8 = v6;
      if ( *(_DWORD *)(*v1 + 20) )
      {
        while ( 1 )
        {
          (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*v8 + 8))(*v8);
          v8 += 2;
          if ( v7 == v8 )
            break;
          v9 = *v1;
        }
      }
      else
        do
        while ( v7 != v8 );
    if ( v6 != v7 )
      v10 = v6;
      do
        v11 = v10[1];
        if ( v11 )
          v12 = (unsigned int *)(v11 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v13 = __ldrex(v12);
            while ( __strex(v13 - 1, v12) );
          }
          else
            v13 = (*v12)--;
          if ( v13 == 1 )
            v14 = (unsigned int *)(v11 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
            if ( &pthread_create )
            {
              __dmb();
              do
                v15 = __ldrex(v14);
              while ( __strex(v15 - 1, v14) );
            }
            else
              v15 = (*v14)--;
            if ( v15 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
        v10 += 2;
      while ( v10 != v7 );
    if ( v6 )
      operator delete(v6);
  return v3;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r5@8
  unsigned int *v9; // r1@9
  unsigned int v10; // r0@11
  unsigned int *v11; // r6@15
  unsigned int v12; // r0@17
  unsigned int *v14; // r2@23
  signed int v15; // r1@25

  v1 = a1;
  *(_DWORD *)a1 = &off_2767510;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 152);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v14 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
    }
    else
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)(v1 + 88));
  v8 = *(_DWORD *)(v1 + 84);
  if ( v8 )
    v9 = (unsigned int *)(v8 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
      }
      else
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r4@8
  int *v11; // r8@8
  int *v12; // r9@11
  int *v13; // r7@14
  unsigned int *v14; // r2@15
  signed int v15; // r1@17
  int v16; // r4@23
  void *v17; // r0@25
  void **v18; // r0@28
  void *v19; // r5@29
  unsigned int *v20; // r1@30
  unsigned int v21; // r0@32
  unsigned int *v22; // r4@37
  unsigned int v23; // r0@39
  int *v24; // r6@46
  int v25; // r4@47
  unsigned int *v26; // r1@48
  unsigned int v27; // r0@50
  unsigned int *v28; // r5@54
  unsigned int v29; // r0@56
  int *ptr; // [sp+8h] [bp-60h]@10
  char v32; // [sp+Ch] [bp-5Ch]@25
  int v33; // [sp+10h] [bp-58h]@26
  int v34; // [sp+3Ch] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 38);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 38);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v13 = 0;
      v11 = 0;
      v5 = 0;
    else
      v4[4] = *(void **)v3;
      EntityInteraction::setInteractText((int *)v4 + 5, (int *)(v3 + 4));
      EntityInteraction::setInteractText((int *)v4 + 6, (int *)(v3 + 8));
      EntityInteraction::setInteractText((int *)v4 + 7, (int *)(v3 + 12));
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      EntityInteraction::setInteractText((int *)v4 + 9, (int *)(v3 + 20));
      EntityInteraction::setInteractText((int *)v4 + 10, (int *)(v3 + 24));
      EntityInteraction::setInteractText((int *)v4 + 11, (int *)(v3 + 28));
      EntityInteraction::setInteractText((int *)v4 + 12, (int *)(v3 + 32));
      EntityInteraction::setInteractText((int *)v4 + 13, (int *)(v3 + 36));
      *((_QWORD *)v4 + 7) = *(_QWORD *)(v3 + 40);
      EntityInteraction::setInteractText((int *)v4 + 16, (int *)(v3 + 48));
      *((_BYTE *)*v2 + 76) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      ptr = v10;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v16 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v16 + 8))(v16, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>::xbox_live_result(
              (int)&v32,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_FinalizeAndRunContinuations(
              v16,
              (int)&v32);
            v17 = (void *)(v34 - 12);
            if ( (int *)(v34 - 12) != &dword_28898C0 )
            {
              v14 = (unsigned int *)(v34 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v15 = __ldrex(v14);
                while ( __strex(v15 - 1, v14) );
              }
              else
                v15 = (*v14)--;
              if ( v15 <= 0 )
                j_j_j_j__ZdlPv_9(v17);
            }
            j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)&v33);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v18 = *v2;
      if ( (*v2)[17] )
        v13 = ptr;
        v18[17] = 0;
        v19 = v18[18];
        v18[18] = 0;
        if ( v19 )
          v20 = (unsigned int *)((char *)v19 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
            v21 = (*v20)--;
          if ( v21 == 1 )
            v22 = (unsigned int *)((char *)v19 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v19 + 8))(v19);
            if ( &pthread_create )
              __dmb();
              do
                v23 = __ldrex(v22);
              while ( __strex(v23 - 1, v22) );
            else
              v23 = (*v22)--;
            if ( v23 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v19 + 12))(v19);
        v5 = 1;
      else
    if ( v13 != v11 )
      v24 = v13;
      do
        v25 = v24[1];
        if ( v25 )
          v26 = (unsigned int *)(v25 + 4);
              v27 = __ldrex(v26);
            while ( __strex(v27 - 1, v26) );
            v27 = (*v26)--;
          if ( v27 == 1 )
            v28 = (unsigned int *)(v25 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
                v29 = __ldrex(v28);
              while ( __strex(v29 - 1, v28) );
              v29 = (*v28)--;
            if ( v29 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
        v24 += 2;
      while ( v24 != v11 );
    if ( v13 )
      j_operator delete(v13);
  }
  return v5;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<bool>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r5@18
  int v11; // r7@18
  int v12; // r4@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r6@26
  unsigned int v16; // r0@28

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 6);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v11 = *v1 >> 32;
  v10 = *v1;
  if ( v10 != v11 )
    do
      v12 = *(_DWORD *)(v10 + 4);
      if ( v12 )
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      v10 += 8;
    while ( v10 != v11 );
    v10 = *(_DWORD *)v1;
  if ( v10 )
    operator delete((void *)v10);
  return v1;
}


xbox::services::user_statistics::user_statistics_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::get(xbox::services::user_statistics::user_statistics_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::user_statistics::user_statistics_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::task_completion_event<int>::set_exception(_DWORD *a1, const std::__exception_ptr::exception_ptr *a2)
{
  int v2; // lr@0
  _DWORD *v3; // r4@1
  signed int v4; // r5@1
  signed int v5; // r4@2
  int v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@1
  int v9; // [sp+8h] [bp-20h]@1
  int v10; // [sp+Ch] [bp-1Ch]@1
  char v11; // [sp+10h] [bp-18h]@1
  char v12; // [sp+14h] [bp-14h]@1

  v3 = a1;
  std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v11, a2);
  v9 = 0;
  v10 = 0;
  v8 = 0;
  v7 = v2;
  std::__exception_ptr::exception_ptr::exception_ptr(
    (std::__exception_ptr::exception_ptr *)&v12,
    (const std::__exception_ptr::exception_ptr *)&v11);
  v4 = pplx::task_completion_event<int>::_StoreException<std::__exception_ptr::exception_ptr>(
         v3,
         (const std::__exception_ptr::exception_ptr *)&v12,
         (int)&v7);
  std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v12);
  if ( v4 == 1 )
    v5 = pplx::task_completion_event<int>::_CancelInternal(v3);
  else
    v5 = 0;
  std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v11);
  return v5;
}


int __fastcall std::_Function_handler<unsigned char ()(std::shared_ptr<xbox::services::http_call_response>),std::function<unsigned char ()(std::shared_ptr<xbox::services::http_call_response>)> pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  j_pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


signed int __fastcall pplx::task_completion_event<std::string>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  int *v3; // r7@1
  int v4; // r5@1
  int v5; // r4@1
  const std::__exception_ptr::exception_ptr *v6; // r6@1
  pthread_mutex_t *v7; // r10@1
  int v8; // r0@2
  signed int v9; // r7@5
  int v10; // r0@9
  int v11; // r1@10
  int v12; // r5@12
  unsigned int *v13; // r1@13
  unsigned int v14; // r0@15
  unsigned int *v15; // r4@19
  unsigned int v16; // r0@21
  int v17; // r5@26
  unsigned int *v18; // r1@27
  unsigned int v19; // r0@29
  unsigned int *v20; // r4@33
  unsigned int v21; // r0@35
  char v23; // [sp+8h] [bp-30h]@9
  int v24; // [sp+Ch] [bp-2Ch]@9
  int v25; // [sp+10h] [bp-28h]@9
  char v26; // [sp+14h] [bp-24h]@9

  v3 = a1;
  v4 = a3;
  v5 = *a1;
  v6 = a2;
  v7 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 12));
    if ( v8 )
      sub_21E5E14(v8);
    v5 = *v3;
  }
  if ( *(_BYTE *)(v5 + 28) )
    v9 = 0;
  else if ( *(_BYTE *)(v5 + 29) )
  else
    if ( !*(_DWORD *)(v5 + 20) )
    {
      j_std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v23, v6);
      v24 = 0;
      j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details16_ExceptionHolderESaIS6_EJRNSt15__exception_ptr13exception_ptrERKNS5_22_TaskCreationCallstackEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
        &v25,
        0,
        (int)&v26,
        (const std::__exception_ptr::exception_ptr *)&v23,
        v4);
      v10 = v25;
      if ( v25 )
      {
        v11 = (*(int (**)(void))(*(_DWORD *)v25 + 16))();
        v10 = v25;
      }
      else
        v11 = 0;
      v25 = 0;
      *(_DWORD *)(v5 + 20) = v11;
      v12 = *(_DWORD *)(v5 + 24);
      *(_DWORD *)(v5 + 24) = v10;
      if ( v12 )
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      v17 = v25;
        v18 = (unsigned int *)(v25 + 4);
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v23);
      v9 = 1;
    }
    j_pthread_mutex_unlock_1(v7);
  return v9;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 45);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 42);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::tournaments::tournament::~tournament((xbox::services::tournaments::tournament *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::task<xbox::services::system::java_rps_ticket>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services6system15java_rps_ticketEEESaISB_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::get(xbox::services::game_server_platform::game_server_metadata_result *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::get(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::~_Task_impl(a1);
}


xbox::services::game_server_platform::allocation_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::get(xbox::services::game_server_platform::allocation_result *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::get(
           a1,
           a2);
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<int>),std::function<unsigned char ()(pplx::task<int>)> pplx::details::_MakeTToUnitFunc<pplx::task<int>>(std::function const&<void ()(pplx::task<int>)>)::{lambda(pplx::task<int>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  pplx::details::_MakeTToUnitFunc<pplx::task<int>>(std::function const&<void ()(pplx::task<int>)>)::{lambda(pplx::task<int>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 35);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 33);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::leaderboard::leaderboard_result::~leaderboard_result((xbox::services::leaderboard::leaderboard_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


xbox::services::social::xbox_user_profile *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::get(xbox::services::social::xbox_user_profile *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::social::xbox_user_profile *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  int v9; // r12@8
  int v10; // r1@8
  int v11; // r2@8
  int v12; // r3@8
  void **v13; // r0@8
  int *v14; // r8@8
  int *v15; // r11@8
  int *v16; // r9@11
  unsigned int *v17; // r2@15
  signed int v18; // r1@17
  int v19; // r7@23
  void *v20; // r0@25
  void **v21; // r0@28
  void *v22; // r5@29
  unsigned int *v23; // r1@30
  unsigned int v24; // r0@32
  unsigned int *v25; // r6@36
  unsigned int v26; // r0@38
  int *v27; // r6@45
  int v28; // r7@46
  unsigned int *v29; // r1@47
  unsigned int v30; // r0@49
  unsigned int *v31; // r5@53
  unsigned int v32; // r0@55
  int v34[12]; // [sp+8h] [bp-60h]@25
  int v35; // [sp+38h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 40);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 40);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v14 = 0;
      v15 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      v4[5] = *(void **)(v3 + 4);
      EntityInteraction::setInteractText((int *)v4 + 6, (int *)(v3 + 8));
      EntityInteraction::setInteractText((int *)v4 + 7, (int *)(v3 + 12));
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      v9 = (int)(v4 + 10);
      v10 = *(_DWORD *)(v3 + 28);
      v11 = *(_DWORD *)(v3 + 32);
      v12 = *(_DWORD *)(v3 + 36);
      *(_DWORD *)v9 = *(_DWORD *)(v3 + 24);
      *(_DWORD *)(v9 + 4) = v10;
      *(_DWORD *)(v9 + 8) = v11;
      *(_DWORD *)(v9 + 12) = v12;
      *((_QWORD *)v4 + 7) = *(_QWORD *)(v3 + 40);
      EntityInteraction::setInteractText((int *)v4 + 16, (int *)(v3 + 48));
      *((_BYTE *)*v2 + 80) = 1;
      v13 = *v2;
      v14 = (int *)**v2;
      *v13 = 0;
      v15 = (int *)v13[1];
      v13[1] = 0;
      v13[2] = 0;
      if ( v14 != v15 )
      {
        v16 = v14;
        do
        {
          v19 = *v16;
          if ( *(_DWORD *)(*v16 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v19 + 8))(v19, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>::xbox_live_result(
              (xbox::services::title_storage::title_storage_quota *)v34,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_FinalizeAndRunContinuations(
              v19,
              v34);
            v20 = (void *)(v35 - 12);
            if ( (int *)(v35 - 12) != &dword_28898C0 )
            {
              v17 = (unsigned int *)(v35 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v18 = __ldrex(v17);
                while ( __strex(v18 - 1, v17) );
              }
              else
                v18 = (*v17)--;
              if ( v18 <= 0 )
                j_j_j_j__ZdlPv_9(v20);
            }
            j_xbox::services::title_storage::title_storage_quota::~title_storage_quota((xbox::services::title_storage::title_storage_quota *)v34);
          v16 += 2;
        }
        while ( v16 != v15 );
      }
      v21 = *v2;
      if ( (*v2)[18] )
        v21[18] = 0;
        v22 = v21[19];
        v21[19] = 0;
        if ( v22 )
          v23 = (unsigned int *)((char *)v22 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v24 = __ldrex(v23);
            while ( __strex(v24 - 1, v23) );
            v24 = (*v23)--;
          if ( v24 == 1 )
            v25 = (unsigned int *)((char *)v22 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v22 + 8))(v22);
            if ( &pthread_create )
              __dmb();
              do
                v26 = __ldrex(v25);
              while ( __strex(v26 - 1, v25) );
            else
              v26 = (*v25)--;
            if ( v26 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v22 + 12))(v22);
      v5 = 1;
    if ( v14 != v15 )
      v27 = v14;
      do
        v28 = v27[1];
        if ( v28 )
          v29 = (unsigned int *)(v28 + 4);
              v30 = __ldrex(v29);
            while ( __strex(v30 - 1, v29) );
            v30 = (*v29)--;
          if ( v30 == 1 )
            v31 = (unsigned int *)(v28 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
                v32 = __ldrex(v31);
              while ( __strex(v32 - 1, v31) );
              v32 = (*v31)--;
            if ( v32 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
        v27 += 2;
      while ( v27 != v15 );
    if ( v14 )
      j_operator delete(v14);
  }
  return v5;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(std::function const&<void ()(xbox::services::xbox_live_result<void>)>)::{lambda(xbox::services::xbox_live_result<void>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(std::function const&<void ()(xbox::services::xbox_live_result<void>)>)::{lambda(xbox::services::xbox_live_result<void>)#1}::operator() const(
           a1,
           a2);
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CreateImpl(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::set_ambient_scheduler(int a1)
{
  int v1; // r1@1
  unsigned int result; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int *v5; // r6@8
  int v6; // [sp+4h] [bp-1Ch]@1
  int v7; // [sp+8h] [bp-18h]@1

  v6 = *(_DWORD *)a1;
  v1 = *(_DWORD *)(a1 + 4);
  *(_DWORD *)(a1 + 4) = 0;
  v7 = v1;
  *(_DWORD *)a1 = 0;
  result = j_pplx::_pplx_g_sched_t::set_scheduler(&dword_2880CD4, (int)&v6);
  v3 = v7;
  if ( v7 )
  {
    v4 = (unsigned int *)(v7 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = __ldrex(v4);
      while ( __strex(result - 1, v4) );
    }
    else
      result = (*v4)--;
    if ( result == 1 )
      v5 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v5);
        while ( __strex(result - 1, v5) );
      }
      else
        result = (*v5)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return result;
}


signed int __fastcall pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::set_exception(int *a1, const std::__exception_ptr::exception_ptr *a2)
{
  int v2; // lr@0
  int *v3; // r4@1
  signed int v4; // r5@1
  signed int v5; // r4@2
  int v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@1
  int v9; // [sp+8h] [bp-20h]@1
  int v10; // [sp+Ch] [bp-1Ch]@1
  char v11; // [sp+10h] [bp-18h]@1
  char v12; // [sp+14h] [bp-14h]@1

  v3 = a1;
  j_std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v11, a2);
  v9 = 0;
  v10 = 0;
  v8 = 0;
  v7 = v2;
  j_std::__exception_ptr::exception_ptr::exception_ptr(
    (std::__exception_ptr::exception_ptr *)&v12,
    (const std::__exception_ptr::exception_ptr *)&v11);
  v4 = j_pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::_StoreException<std::__exception_ptr::exception_ptr>(
         v3,
         (const std::__exception_ptr::exception_ptr *)&v12,
         (int)&v7);
  j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v12);
  if ( v4 == 1 )
    v5 = j_pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::_CancelInternal((void ***)v3);
  else
    v5 = 0;
  j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v11);
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int *v12; // r0@21
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@1
  int v16; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v14 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v15 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v16 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v14);
  v7 = v15;
  if ( v15 )
    v8 = (unsigned int *)(v15 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2763728;
  *(_DWORD *)(v3 + 80) = 0;
  *(_DWORD *)(v3 + 84) = 0;
  v12 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&off_2763728);
  *(_DWORD *)(v3 + 88) = 0;
  *(_DWORD *)(v3 + 92) = v12;
  *(_DWORD *)(v3 + 96) = &unk_28898CC;
  return v3;
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r4@1
  void (__fastcall *v3)(int, char *); // r5@2
  int v5; // [sp+0h] [bp-70h]@1
  char v6; // [sp+20h] [bp-50h]@1
  char v7; // [sp+40h] [bp-30h]@2

  v2 = *a1;
  xbox::services::xbox_live_result<xbox::services::presence::presence_record>::xbox_live_result(
    (xbox::services::presence::presence_record *)&v5,
    a2);
    (xbox::services::presence::presence_record *)&v6,
    (int)&v5);
  if ( !*(_DWORD *)(v2 + 8) )
    sub_21E5F48();
  v3 = *(void (__fastcall **)(int, char *))(v2 + 12);
    (xbox::services::presence::presence_record *)&v7,
    (int)&v6);
  v3(v2, &v7);
  xbox::services::xbox_live_result<xbox::services::presence::presence_record>::~xbox_live_result((int)&v7);
  xbox::services::xbox_live_result<xbox::services::presence::presence_record>::~xbox_live_result((int)&v6);
  xbox::services::xbox_live_result<xbox::services::presence::presence_record>::~xbox_live_result((int)&v5);
  return 0;
}


xbox::services::system::token_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>::get(xbox::services::system::token_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::system::token_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::system::token_result>::xbox_live_result(v3, (int)*v2 + 80);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_276630C;
  v12 = j_xbox::services::game_server_platform::game_server_metadata_result::game_server_metadata_result((xbox::services::game_server_platform::game_server_metadata_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 116) = 0;
  *(_DWORD *)(v3 + 120) = v13;
  *(_DWORD *)(v3 + 124) = &unk_28898CC;
  return v3;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<web::websockets::client::websocket_incoming_message>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r6@16
  int v15; // [sp+0h] [bp-30h]@3
  int v16; // [sp+4h] [bp-2Ch]@3
  int v17; // [sp+8h] [bp-28h]@1
  void *ptr; // [sp+Ch] [bp-24h]@1
  int v19; // [sp+10h] [bp-20h]@1
  int v20; // [sp+14h] [bp-1Ch]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<web::websockets::client::websocket_incoming_message>::task<pplx::task_completion_event<web::websockets::client::websocket_incoming_message>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  unsigned int *v7; // r0@4
  unsigned int v8; // r1@6
  int v9; // r0@9
  unsigned int *v10; // r0@10
  unsigned int v11; // r1@12
  int v12; // r0@15
  unsigned int *v13; // r1@16
  unsigned int v14; // r2@17
  __int16 v15; // r0@19
  int v16; // r0@21
  unsigned int *v17; // r1@22
  unsigned int v18; // r2@23
  unsigned int result; // r0@26
  int v20; // r4@26
  unsigned int *v21; // r1@27
  unsigned int *v22; // r5@33
  int v23; // r4@40
  unsigned int *v24; // r1@41
  unsigned int *v25; // r5@47
  int v26; // r4@54
  unsigned int *v27; // r1@55
  unsigned int *v28; // r5@61
  int v29; // [sp+0h] [bp-78h]@9
  int v30; // [sp+4h] [bp-74h]@9
  int v31; // [sp+8h] [bp-70h]@15
  int v32; // [sp+Ch] [bp-6Ch]@19
  char v33; // [sp+14h] [bp-64h]@19
  int v34; // [sp+18h] [bp-60h]@19
  void *ptr; // [sp+1Ch] [bp-5Ch]@19
  int v36; // [sp+20h] [bp-58h]@19
  int v37; // [sp+24h] [bp-54h]@19
  char v38; // [sp+28h] [bp-50h]@19
  char v39; // [sp+29h] [bp-4Fh]@19
  int v40; // [sp+30h] [bp-48h]@3
  int v41; // [sp+34h] [bp-44h]@3
  char v42; // [sp+38h] [bp-40h]@3
  int v43; // [sp+58h] [bp-20h]@1
  int v44; // [sp+5Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v43 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_8presence15presence_recordEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v44);
  if ( v44 )
    v6 = (*(int (**)(void))(*(_DWORD *)v44 + 16))();
  v43 = v6;
  j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::xbox_live_result(
    (xbox::services::presence::presence_record *)&v42,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::set(
    (void ***)&v43,
    (int)&v42);
  j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::~xbox_live_result((int)&v42);
  v40 = v43;
  v41 = v44;
  {
    v7 = (unsigned int *)(v44 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 + 1, v7) );
    }
    else
      ++*v7;
  }
  v29 = *(_DWORD *)v4;
  v9 = *(_DWORD *)(v4 + 4);
  v30 = v9;
  if ( v9 )
    v10 = (unsigned int *)(v9 + 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 + 1, v10) );
      ++*v10;
  v31 = *(_DWORD *)(v4 + 8);
  v12 = *(_DWORD *)(v4 + 12);
  if ( v12 )
    v13 = (unsigned int *)(v12 + 4);
    __dmb();
    do
      v14 = __ldrex(v13);
    while ( __strex(v14 + 1, v13) );
  v32 = v12;
  v36 = 0;
  v37 = 0;
  v34 = 0;
  ptr = 0;
  v33 = 0;
  v15 = *(_WORD *)(v4 + 40);
  v38 = *(_WORD *)(v4 + 40);
  v39 = HIBYTE(v15);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>(
    v3,
    (int)&v40,
    (int)&v29);
  if ( ptr )
    j_operator delete(ptr);
  v16 = v32;
  if ( v32 )
    v17 = (unsigned int *)(v32 + 4);
      v18 = __ldrex(v17);
    while ( __strex(v18 - 1, v17) );
    if ( v18 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v16 + 8))(v16);
  result = 0;
  v32 = 0;
  v20 = v30;
  if ( v30 )
    v21 = (unsigned int *)(v30 + 4);
        result = __ldrex(v21);
      while ( __strex(result - 1, v21) );
      result = (*v21)--;
    if ( result == 1 )
      v22 = (unsigned int *)(v20 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v22);
        while ( __strex(result - 1, v22) );
      }
      else
        result = (*v22)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
  v23 = v41;
  if ( v41 )
    v24 = (unsigned int *)(v41 + 4);
        result = __ldrex(v24);
      while ( __strex(result - 1, v24) );
      result = (*v24)--;
      v25 = (unsigned int *)(v23 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 8))(v23);
          result = __ldrex(v25);
        while ( __strex(result - 1, v25) );
        result = (*v25)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v23 + 12))(v23);
  v26 = v44;
    v27 = (unsigned int *)(v44 + 4);
        result = __ldrex(v27);
      while ( __strex(result - 1, v27) );
      result = (*v27)--;
      v28 = (unsigned int *)(v26 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
          result = __ldrex(v28);
        while ( __strex(result - 1, v28) );
        result = (*v28)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
  return result;
}


signed int __fastcall pplx::task_completion_event<bool>::set(_DWORD *a1, char a2)
{
  _DWORD *v2; // r6@1
  char v3; // r4@1
  int v4; // r0@1
  signed int v5; // r8@1
  unsigned int v6; // r1@1
  pthread_mutex_t *v7; // r5@3
  int v8; // r0@4
  int *v9; // r9@8
  int *v10; // r10@8
  int *v11; // r4@11
  int v12; // r0@12
  int v13; // r0@16
  int v14; // r5@17
  unsigned int *v15; // r1@18
  unsigned int v16; // r0@20
  unsigned int *v17; // r4@27
  unsigned int v18; // r0@29
  int *v19; // r5@36
  int v20; // r6@37
  unsigned int *v21; // r1@38
  unsigned int v22; // r0@40
  unsigned int *v23; // r7@44
  unsigned int v24; // r0@46

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *(_WORD *)(v4 + 28);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 12);
    if ( &pthread_create )
    {
      v8 = pthread_mutex_lock((pthread_mutex_t *)(v4 + 12));
      if ( v8 )
        sub_119CCFC(v8);
      v4 = *v2;
      v6 = *(_WORD *)(*v2 + 28);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        pthread_mutex_unlock(v7);
      v9 = 0;
      v10 = 0;
      v5 = 0;
    else
      *(_BYTE *)(v4 + 16) = v3;
      *(_BYTE *)(v4 + 28) = 1;
      v9 = *(int **)v4;
      *(_DWORD *)v4 = 0;
      v10 = *(int **)(v4 + 4);
      *(_DWORD *)(v4 + 4) = 0;
      *(_DWORD *)(v4 + 8) = 0;
      if ( v9 != v10 )
      {
        v11 = v9;
        do
        {
          v12 = *v11;
          if ( *(_DWORD *)(*v11 + 4) == 2 )
            (*(void (__cdecl **)(int))(*(_DWORD *)v12 + 8))(v12);
          else
            pplx::details::_Task_impl<bool>::_FinalizeAndRunContinuations(v12, *(_BYTE *)(*v2 + 16));
          v11 += 2;
        }
        while ( v10 != v11 );
      }
      v13 = *v2;
      if ( *(_DWORD *)(*v2 + 20) )
        *(_DWORD *)(v13 + 20) = 0;
        v14 = *(_DWORD *)(v13 + 24);
        *(_DWORD *)(v13 + 24) = 0;
        if ( v14 )
          v15 = (unsigned int *)(v14 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
            v16 = (*v15)--;
          if ( v16 == 1 )
            v17 = (unsigned int *)(v14 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
            if ( &pthread_create )
            {
              __dmb();
              do
                v18 = __ldrex(v17);
              while ( __strex(v18 - 1, v17) );
            }
            else
              v18 = (*v17)--;
            if ( v18 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v5 = 1;
    if ( v9 != v10 )
      v19 = v9;
      do
        v20 = v19[1];
        if ( v20 )
          v21 = (unsigned int *)(v20 + 4);
              v22 = __ldrex(v21);
            while ( __strex(v22 - 1, v21) );
            v22 = (*v21)--;
          if ( v22 == 1 )
            v23 = (unsigned int *)(v20 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
                v24 = __ldrex(v23);
              while ( __strex(v24 - 1, v23) );
              v24 = (*v23)--;
            if ( v24 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
        v19 += 2;
      while ( v19 != v10 );
    if ( v9 )
      operator delete(v9);
  }
  return v5;
}


int __fastcall pplx::task_completion_event<web::http::http_response>::_RegisterTask(_DWORD *a1, int *a2)
{
  _DWORD *v2; // r6@1
  int *v3; // r5@1
  pthread_mutex_t *v4; // r4@1
  int v5; // r0@1
  int v6; // r0@2
  int v8; // r2@6
  int v9; // r0@6
  unsigned int *v10; // r0@7
  unsigned int v11; // r1@8
  int v12; // r5@10
  unsigned int *v13; // r0@11
  unsigned int v14; // r1@12
  unsigned int *v15; // r6@14
  unsigned int v16; // r0@15
  int v17; // r1@18 OVERLAPPED
  int v18; // r2@18
  int v19; // r2@19
  unsigned int *v20; // r1@20
  unsigned int v21; // r2@21
  int v22; // [sp+4h] [bp-1Ch]@6
  int v23; // [sp+8h] [bp-18h]@6

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(*a1 + 12);
  v5 = j_pthread_mutex_lock_1(v4);
  if ( v5 )
    sub_21E5E14(v5);
  v6 = *v2;
  if ( *(_DWORD *)(*v2 + 24) )
  {
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v3 + 8))(*v3, 1, 1, 1);
  }
  else if ( *(_BYTE *)(v6 + 32) )
    v8 = *v3;
    v22 = *(_DWORD *)(v6 + 16);
    v9 = *(_DWORD *)(v6 + 20);
    v23 = v9;
    if ( v9 )
    {
      v10 = (unsigned int *)(v9 + 4);
      __dmb();
      do
        v11 = __ldrex(v10);
      while ( __strex(v11 + 1, v10) );
    }
    j_pplx::details::_Task_impl<web::http::http_response>::_FinalizeAndRunContinuations(v8, (int)&v22);
    v12 = v23;
    if ( v23 )
      v13 = (unsigned int *)(v23 + 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      if ( v14 == 1 )
      {
        v15 = (unsigned int *)(v12 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        if ( v16 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      }
  else
    *(_QWORD *)&v17 = *(_QWORD *)(v6 + 4);
    if ( v17 == v18 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<web::http::http_response>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<web::http::http_response>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<web::http::http_response>> const&>(
        (unsigned __int64 *)v6,
        (int)v3);
    else
      *(_DWORD *)v17 = *v3;
      v19 = v3[1];
      *(_DWORD *)(v17 + 4) = v19;
      if ( v19 )
        v20 = (unsigned int *)(v19 + 4);
          v21 = __ldrex(v20);
        while ( __strex(v21 + 1, v20) );
      *(_DWORD *)(v6 + 4) += 8;
  return j_pthread_mutex_unlock_1(v4);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_20game_server_platform27game_server_metadata_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  *(_DWORD *)(v2 + 84) = v3[1];
  EntityInteraction::setInteractText((int *)(v2 + 88), v3 + 2);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


int __fastcall pplx::create_task<xbox::services::xbox_live_result<void>>(int result, int a2)
{
  int v2; // r1@1
  unsigned int v3; // r1@4

  *(_DWORD *)result = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(result + 4) = v2;
  if ( v2 )
  {
    result = v2 + 4;
    if ( &pthread_create )
    {
      __dmb();
      do
        v3 = __ldrex((unsigned int *)result);
      while ( __strex(v3 + 1, (unsigned int *)result) );
    }
    else
      ++*(_DWORD *)result;
  }
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27664EC;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 120);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::game_server_platform::allocation_result::~allocation_result((xbox::services::game_server_platform::allocation_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>(
           a1,
           a2,
           a3);
}


_DWORD *__fastcall pplx::details::_Task_impl<bool>::_Task_impl(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  pplx::details::_Task_impl_base::_Task_impl_base((int)v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *v3 = &off_26DD958;
  return v3;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 19);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 16);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::title_storage::title_storage_quota::~title_storage_quota((xbox::services::title_storage::title_storage_quota *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::~_Task_impl(a1);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::task_canceled::~task_canceled(pplx::task_canceled *this)
{
  pplx::task_canceled::~task_canceled(this);
}


int __fastcall std::_Function_handler<unsigned char ()(TransactionStatus),std::function<unsigned char ()(TransactionStatus)> pplx::details::_MakeTToUnitFunc<TransactionStatus>(std::function const&<void ()(TransactionStatus)>)::{lambda(TransactionStatus)#1}>::_M_invoke(int *a1)
{
  int v1; // r0@1

  v1 = *a1;
  if ( !*(_DWORD *)(v1 + 8) )
    sub_119C8E4();
  (*(void (**)(void))(v1 + 12))();
  return 0;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::matchmaking::create_match_ticket_response::create_match_ticket_response((xbox::services::matchmaking::create_match_ticket_response *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 32) = 0;
  *(_DWORD *)(v1 + 36) = v3;
  *(_DWORD *)(v1 + 40) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 52) = 0;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<TransactionStatus>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = this;
  *(_DWORD *)this = &off_26DF6B4;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  j_j_j__ZdlPv_4((void *)v1);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r7@1
  unsigned int *v5; // r0@3
  unsigned int v6; // r1@5
  int v7; // r8@8
  unsigned int *v8; // r1@9
  unsigned int v9; // r0@11
  unsigned int *v10; // r6@15
  unsigned int v11; // r0@17
  int v12; // r0@24
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@26
  int v14; // r0@30
  int v15; // r1@34
  int v16; // r5@35

  v2 = a2;
  v3 = a1;
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  v4 = *(_DWORD *)(a2 + 4);
  if ( v4 != *(_DWORD *)(a1 + 84) )
  {
    if ( v4 )
    {
      v5 = (unsigned int *)(v4 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 + 1, v5) );
      }
      else
        ++*v5;
    }
    v7 = *(_DWORD *)(v3 + 84);
    if ( v7 )
      v8 = (unsigned int *)(v7 + 4);
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
        v9 = (*v8)--;
      if ( v9 == 1 )
        v10 = (unsigned int *)(v7 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 - 1, v10) );
        }
        else
          v11 = (*v10)--;
        if ( v11 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
    *(_DWORD *)(v3 + 84) = v4;
  }
  *(_QWORD *)(v3 + 88) = *(_QWORD *)(v2 + 8);
  EntityInteraction::setInteractText((int *)(v3 + 96), (int *)(v2 + 16));
  if ( &pthread_create )
    v12 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 20));
    if ( v12 )
      sub_21E5E14(v12);
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
      v14 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 36));
      if ( v14 )
        sub_21E5E14(v14);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 36));
    else
    v15 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v15 )
      do
        v16 = *(_DWORD *)(v15 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v15);
        v15 = v16;
      while ( v16 );
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::~_Task_impl(a1);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::~_Task_impl(a1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<std::string>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<std::string>::~_Task_impl(a1);
}


unsigned int *__fastcall pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}::operator() const(_DWORD *a1, int a2, int a3)
{
  return pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}::operator() const(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  *(_QWORD *)(v2 + 88) = *((_QWORD *)v3 + 1);
  *(_QWORD *)(v2 + 96) = *((_QWORD *)v3 + 2);
  EntityInteraction::setInteractText((int *)(v2 + 104), v3 + 6);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::system::auth_flow_result>::set(void ***a1, int a2)
{
  void ***v2; // r10@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r5@11
  int v13; // r7@12
  void **v14; // r0@16
  void *v15; // r5@17
  unsigned int *v16; // r1@18
  unsigned int v17; // r0@20
  unsigned int *v18; // r6@27
  unsigned int v19; // r0@29
  int *v20; // r6@36
  int v21; // r7@37
  unsigned int *v22; // r1@38
  unsigned int v23; // r0@40
  unsigned int *v24; // r5@44
  unsigned int v25; // r0@46
  char v27; // [sp+4h] [bp-44h]@14

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 28);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 28);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      v4[4] = *(void **)v3;
      EntityInteraction::setInteractText((int *)v4 + 5, (int *)(v3 + 4));
      EntityInteraction::setInteractText((int *)v4 + 6, (int *)(v3 + 8));
      EntityInteraction::setInteractText((int *)v4 + 7, (int *)(v3 + 12));
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      EntityInteraction::setInteractText((int *)v4 + 9, (int *)(v3 + 20));
      EntityInteraction::setInteractText((int *)v4 + 10, (int *)(v3 + 24));
      EntityInteraction::setInteractText((int *)v4 + 11, (int *)(v3 + 28));
      *((_BYTE *)*v2 + 56) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v13 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v13 + 8))(v13, 1, 0, 0);
          }
          else
            j_xbox::services::system::auth_flow_result::auth_flow_result(
              (xbox::services::system::auth_flow_result *)&v27,
              (const xbox::services::system::auth_flow_result *)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_FinalizeAndRunContinuations(
              v13,
              (int)&v27);
            j_xbox::services::system::auth_flow_result::~auth_flow_result((xbox::services::system::auth_flow_result *)&v27);
          v12 += 2;
        }
        while ( v11 != v12 );
      }
      v14 = *v2;
      if ( (*v2)[12] )
        v14[12] = 0;
        v15 = v14[13];
        v14[13] = 0;
        if ( v15 )
          v16 = (unsigned int *)((char *)v15 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v17 = __ldrex(v16);
            while ( __strex(v17 - 1, v16) );
            v17 = (*v16)--;
          if ( v17 == 1 )
            v18 = (unsigned int *)((char *)v15 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v15 + 8))(v15);
            if ( &pthread_create )
            {
              __dmb();
              do
                v19 = __ldrex(v18);
              while ( __strex(v19 - 1, v18) );
            }
            else
              v19 = (*v18)--;
            if ( v19 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v15 + 12))(v15);
      v5 = 1;
    if ( v10 != v11 )
      v20 = v10;
      do
        v21 = v20[1];
        if ( v21 )
          v22 = (unsigned int *)(v21 + 4);
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            v24 = (unsigned int *)(v21 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
                v25 = __ldrex(v24);
              while ( __strex(v25 - 1, v24) );
              v25 = (*v24)--;
            if ( v25 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
        v20 += 2;
      while ( v20 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::set(
           a1,
           a2);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<web::http::http_response>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r6@11
  unsigned int v9; // r0@13
  int v10; // r5@18
  unsigned int *v11; // r1@19
  unsigned int v12; // r0@21
  unsigned int *v13; // r6@25
  unsigned int v14; // r0@27
  int v15; // r5@32
  int v16; // r7@32
  int v17; // r4@33
  unsigned int *v18; // r1@34
  unsigned int v19; // r0@36
  unsigned int *v20; // r6@40
  unsigned int v21; // r0@42

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 7);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 5);
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v16 = *v1 >> 32;
  v15 = *v1;
  if ( v15 != v16 )
    do
      v17 = *(_DWORD *)(v15 + 4);
      if ( v17 )
        v18 = (unsigned int *)(v17 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
        }
        else
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
          if ( &pthread_create )
          {
            __dmb();
            do
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
          }
          else
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      v15 += 8;
    while ( v15 != v16 );
    v15 = *(_DWORD *)v1;
  if ( v15 )
    j_operator delete((void *)v15);
  return v1;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27664EC;
  v12 = (xbox::services *)j_xbox::services::game_server_platform::allocation_result::allocation_result((xbox::services::game_server_platform::allocation_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 112) = 0;
  *(_DWORD *)(v3 + 116) = v13;
  *(_DWORD *)(v3 + 120) = &unk_28898CC;
  return v3;
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(int a1, int a2, int a3)
{
  int v3; // r8@1
  int v4; // r9@1
  int v5; // r6@1
  _DWORD *v6; // r0@1
  int v7; // r7@1
  int *v8; // r0@1
  int v9; // r0@1
  int v10; // r1@1
  char *v11; // r0@1
  unsigned int *v12; // r0@3
  unsigned int v13; // r1@5
  int v14; // r0@8
  unsigned int *v15; // r0@9
  unsigned int v16; // r1@11
  int v17; // r0@14
  unsigned int *v18; // r1@15
  unsigned int v19; // r2@16
  __int16 v20; // r0@18
  int v21; // r0@20
  unsigned int *v22; // r1@21
  unsigned int v23; // r2@22
  unsigned int result; // r0@25
  int v25; // r4@25
  unsigned int *v26; // r1@26
  unsigned int *v27; // r5@32
  int v28; // r4@39
  unsigned int *v29; // r1@40
  unsigned int *v30; // r5@46
  int v31; // r4@53
  unsigned int *v32; // r1@54
  unsigned int *v33; // r5@60
  unsigned int *v34; // r2@68
  signed int v35; // r1@70
  int v36; // [sp+0h] [bp-78h]@8
  int v37; // [sp+4h] [bp-74h]@8
  int v38; // [sp+8h] [bp-70h]@14
  int v39; // [sp+Ch] [bp-6Ch]@18
  char v40; // [sp+14h] [bp-64h]@18
  int v41; // [sp+18h] [bp-60h]@18
  void *ptr; // [sp+1Ch] [bp-5Ch]@18
  int v43; // [sp+20h] [bp-58h]@18
  int v44; // [sp+24h] [bp-54h]@18
  char v45; // [sp+28h] [bp-50h]@18
  char v46; // [sp+29h] [bp-4Fh]@18
  int v47; // [sp+30h] [bp-48h]@2
  int v48; // [sp+34h] [bp-44h]@2
  int v49; // [sp+38h] [bp-40h]@1
  char v50; // [sp+3Ch] [bp-3Ch]@1
  __int64 v51; // [sp+40h] [bp-38h]@1
  char *v52; // [sp+48h] [bp-30h]@1
  int v53; // [sp+50h] [bp-28h]@1
  int v54; // [sp+54h] [bp-24h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v53 = 0;
  v54 = 0;
  v6 = j_operator new(0x3Cu);
  v7 = (int)v6;
  v6[1] = 1;
  v6[2] = 1;
  *v6 = &off_2768398;
  v6[3] = 0;
  v6[4] = 0;
  v6[5] = 0;
  v6[6] = 0;
  v6[7] = 0;
  v8 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&off_2768398);
  *(_DWORD *)(v7 + 36) = 0;
  *(_DWORD *)(v7 + 40) = v8;
  *(_DWORD *)(v7 + 44) = &unk_28898CC;
  *(_WORD *)(v7 + 56) = 0;
  *(_DWORD *)(v7 + 48) = 0;
  *(_DWORD *)(v7 + 52) = 0;
  v9 = *(_DWORD *)v7;
  v54 = v7;
  v53 = (*(int (__fastcall **)(int, void **))(v9 + 16))(v7, &`typeinfo for'std::_Sp_make_shared_tag);
  v52 = (char *)&unk_28898CC;
  v10 = *(_DWORD *)v5;
  v50 = *(_BYTE *)(v5 + 4);
  v49 = v10;
  v51 = *(_QWORD *)(v5 + 8);
  EntityInteraction::setInteractText((int *)&v52, (int *)(v5 + 16));
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::set(
    (void ***)&v53,
    (int)&v49);
  v11 = v52 - 12;
  if ( (int *)(v52 - 12) != &dword_28898C0 )
  {
    v34 = (unsigned int *)(v52 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v35 = __ldrex(v34);
      while ( __strex(v35 - 1, v34) );
    }
    else
      v35 = (*v34)--;
    if ( v35 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  }
  v47 = v53;
  v48 = v54;
  if ( v54 )
    v12 = (unsigned int *)(v54 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 + 1, v12) );
      ++*v12;
  v36 = *(_DWORD *)v4;
  v14 = *(_DWORD *)(v4 + 4);
  v37 = v14;
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 + 1, v15) );
      ++*v15;
  v38 = *(_DWORD *)(v4 + 8);
  v17 = *(_DWORD *)(v4 + 12);
  if ( v17 )
    v18 = (unsigned int *)(v17 + 4);
    __dmb();
    do
      v19 = __ldrex(v18);
    while ( __strex(v19 + 1, v18) );
  v39 = v17;
  v43 = 0;
  v44 = 0;
  v41 = 0;
  ptr = 0;
  v40 = 0;
  v20 = *(_WORD *)(v4 + 40);
  v45 = *(_WORD *)(v4 + 40);
  v46 = HIBYTE(v20);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>(
    v3,
    (int)&v47,
    (int)&v36);
  if ( ptr )
    j_operator delete(ptr);
  v21 = v39;
  if ( v39 )
    v22 = (unsigned int *)(v39 + 4);
      v23 = __ldrex(v22);
    while ( __strex(v23 - 1, v22) );
    if ( v23 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v21 + 8))(v21);
  result = 0;
  v39 = 0;
  v25 = v37;
  if ( v37 )
    v26 = (unsigned int *)(v37 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
    if ( result == 1 )
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
      }
      else
        result = (*v27)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  v28 = v48;
  if ( v48 )
    v29 = (unsigned int *)(v48 + 4);
        result = __ldrex(v29);
      while ( __strex(result - 1, v29) );
      result = (*v29)--;
      v30 = (unsigned int *)(v28 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
          result = __ldrex(v30);
        while ( __strex(result - 1, v30) );
        result = (*v30)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
  v31 = v54;
    v32 = (unsigned int *)(v54 + 4);
        result = __ldrex(v32);
      while ( __strex(result - 1, v32) );
      result = (*v32)--;
      v33 = (unsigned int *)(v31 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 8))(v31);
          result = __ldrex(v33);
        while ( __strex(result - 1, v33) );
        result = (*v33)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v31 + 12))(v31);
  return result;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::system::token_and_signature_result::token_and_signature_result((xbox::services::system::token_and_signature_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 52) = 0;
  *(_DWORD *)(v1 + 56) = v3;
  *(_DWORD *)(v1 + 60) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 72) = 0;
  *(_DWORD *)(v1 + 64) = 0;
  *(_DWORD *)(v1 + 68) = 0;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r6@5
  int v12; // r8@5
  unsigned int *v13; // r0@7
  unsigned int v14; // r1@9
  bool v15; // zf@11
  signed __int64 v16; // r6@16
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = pthread_mutex_lock(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v15 = v10 == 3;
    if ( v10 != 3 )
      v15 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v15 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v16 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
        v11 = *(_DWORD *)(v5 + 16);
      }
      else
        ++*v13;
    }
    if ( v11 )
      v17 = (unsigned int *)(v11 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    *(_DWORD *)(v5 + 16) = v12;
LABEL_33:
  if ( v8 == 1 )
    v16 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v16 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    pthread_mutex_unlock(v6);
  if ( v16 )
    result = v16 ^ 1;
    if ( &pthread_create )
      v23 = pthread_mutex_lock((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = operator new(0x10u);
      v26[2] = 0;
      v27 = operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::set(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::user_statistics::user_statistics_result::user_statistics_result((xbox::services::user_statistics::user_statistics_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 32) = 0;
  *(_DWORD *)(v1 + 36) = v3;
  *(_DWORD *)(v1 + 40) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 52) = 0;
  *(_DWORD *)(v1 + 44) = 0;
  *(_DWORD *)(v1 + 48) = 0;
  return result;
}


int __fastcall pplx::details::_RunAllParam<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_RunAllParam(int a1)
{
  int v1; // r5@1
  _DWORD *v2; // r0@1
  int v3; // r1@1
  xbox::services *v4; // r0@3
  int *v5; // r0@3

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v2 = j_operator new(0x2Cu);
  v2[1] = 1;
  v2[2] = 1;
  *v2 = &off_2766B94;
  v3 = 0;
  v2[3] = 0;
  v2[4] = 0;
  v2[5] = 0;
  v2[6] = 0;
  *((_WORD *)v2 + 20) = 0;
  v2[8] = 0;
  v2[9] = 0;
  *(_DWORD *)(v1 + 4) = v2;
  if ( v2 )
    v3 = (*(int (**)(void))(*v2 + 16))();
  *(_DWORD *)v1 = v3;
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  *(_DWORD *)(v1 + 16) = 0;
  v4 = j_xbox::services::system::token_result::token_result((xbox::services::system::token_result *)(v1 + 24));
  v5 = j_xbox::services::xbox_services_error_code_category(v4);
  *(_DWORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 84) = v5;
  *(_DWORD *)(v1 + 88) = &unk_28898CC;
  *(_DWORD *)(v1 + 96) = 0;
  *(_DWORD *)(v1 + 100) = 0;
  return v1;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = this;
  *(_DWORD *)this = &off_2768410;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 24);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


int __fastcall pplx::task<Social::XboxProfile>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  __int64 v8; // r0@7
  int v9; // r6@7
  unsigned int *v10; // r7@14
  int v11; // r6@21
  unsigned int *v12; // r7@28
  int v13; // r6@35
  unsigned int *v14; // r7@42
  int v15; // r0@50
  int v16; // r1@50
  unsigned int *v17; // r1@51
  unsigned int v18; // r2@53
  unsigned int *v19; // r2@57
  unsigned int v20; // r1@59
  int v22; // [sp+0h] [bp-38h]@50
  int v23; // [sp+4h] [bp-34h]@50
  int v24; // [sp+8h] [bp-30h]@1
  int v25; // [sp+Ch] [bp-2Ch]@1
  int v26; // [sp+10h] [bp-28h]@7
  char v27; // [sp+14h] [bp-24h]@7
  int v28; // [sp+18h] [bp-20h]@7
  int v29; // [sp+1Ch] [bp-1Ch]@7
  char v30; // [sp+20h] [bp-18h]@7

  v3 = a1;
  v24 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v25 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v26 = *(_DWORD *)(a3 + 8);
  v29 = v4;
  std::__shared_ptr<pplx::details::_Task_impl<Social::XboxProfile>,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_Task_impl<Social::XboxProfile>>,pplx::details::_CancellationTokenState *&,pplx::scheduler_ptr &>(
    (int)&v27,
    (int)&v30,
    &v29,
    (int)&v24);
  v8 = *(_QWORD *)&v27;
  *(_DWORD *)&v27 = 0;
  v28 = 0;
  *(_DWORD *)v3 = v8;
  v9 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = HIDWORD(v8);
  if ( v9 )
    HIDWORD(v8) = v9 + 4;
        LODWORD(v8) = __ldrex((unsigned int *)HIDWORD(v8));
      while ( __strex(v8 - 1, (unsigned int *)HIDWORD(v8)) );
      LODWORD(v8) = (*(_DWORD *)HIDWORD(v8))--;
    if ( (_DWORD)v8 == 1 )
      v10 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          LODWORD(v8) = __ldrex(v10);
        while ( __strex(v8 - 1, v10) );
      }
      else
        LODWORD(v8) = (*v10)--;
      if ( (_DWORD)v8 == 1 )
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v11 = v28;
  if ( v28 )
    HIDWORD(v8) = v28 + 4;
      v12 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          LODWORD(v8) = __ldrex(v12);
        while ( __strex(v8 - 1, v12) );
        LODWORD(v8) = (*v12)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v13 = v25;
  if ( v25 )
    HIDWORD(v8) = v25 + 4;
      v14 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          LODWORD(v8) = __ldrex(v14);
        while ( __strex(v8 - 1, v14) );
        LODWORD(v8) = (*v14)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  if ( v4 != 2 )
    v15 = *(_DWORD *)v3;
    v22 = *(_DWORD *)v3;
    v16 = *(_DWORD *)(v3 + 4);
    v23 = v16;
    if ( v16 )
      v17 = (unsigned int *)(v16 + 8);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    pplx::details::_Task_impl_base::_RegisterCancellation(v15, (unsigned __int64 *)&v22);
    LODWORD(v8) = v23;
    if ( v23 )
      v19 = (unsigned int *)(v23 + 8);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        LODWORD(v8) = (*(int (__cdecl **)(_DWORD))(*(_DWORD *)v8 + 12))(v8);
  return v8;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::social::xbox_user_profile::operator=((int *)(a1 + 80), a2);
  *(_QWORD *)(v2 + 164) = *(_QWORD *)(v3 + 21);
  EntityInteraction::setInteractText((int *)(v2 + 172), v3 + 23);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


signed int __fastcall pplx::task_completion_event<bool>::_CancelInternal(_DWORD *a1)
{
  _DWORD *v1; // r6@1
  int v2; // r0@1
  signed int v3; // r9@2
  pthread_mutex_t *v4; // r7@3
  int v5; // r0@4
  _DWORD *v6; // r8@6
  _DWORD *v7; // r10@6
  _DWORD *v8; // r5@12
  int v9; // r1@15
  _DWORD *v10; // r5@18
  int v11; // r6@19
  unsigned int *v12; // r1@20
  unsigned int v13; // r0@22
  unsigned int *v14; // r4@26
  unsigned int v15; // r0@28

  v1 = a1;
  v2 = *a1;
  if ( *(_BYTE *)(v2 + 29) )
  {
    v3 = 0;
  }
  else
    v4 = (pthread_mutex_t *)(v2 + 12);
    if ( !&pthread_create )
      goto LABEL_40;
    v5 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 12));
    if ( v5 )
      sub_119CCFC(v5);
    v2 = *v1;
    if ( *(_BYTE *)(*v1 + 29) )
    {
      v6 = 0;
      v7 = 0;
      v3 = 0;
    }
    else
LABEL_40:
      v3 = 1;
      *(_BYTE *)(v2 + 29) = 1;
      v6 = *(_DWORD **)v2;
      *(_DWORD *)v2 = 0;
      v7 = *(_DWORD **)(v2 + 4);
      *(_DWORD *)(v2 + 4) = 0;
      *(_DWORD *)(v2 + 8) = 0;
    if ( &pthread_create )
      pthread_mutex_unlock(v4);
    if ( v6 != v7 && v3 == 1 )
      v8 = v6;
      if ( *(_DWORD *)(*v1 + 20) )
      {
        while ( 1 )
        {
          (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*v8 + 8))(*v8);
          v8 += 2;
          if ( v7 == v8 )
            break;
          v9 = *v1;
        }
      }
      else
        do
        while ( v7 != v8 );
    if ( v6 != v7 )
      v10 = v6;
      do
        v11 = v10[1];
        if ( v11 )
          v12 = (unsigned int *)(v11 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v13 = __ldrex(v12);
            while ( __strex(v13 - 1, v12) );
          }
          else
            v13 = (*v12)--;
          if ( v13 == 1 )
            v14 = (unsigned int *)(v11 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
            if ( &pthread_create )
            {
              __dmb();
              do
                v15 = __ldrex(v14);
              while ( __strex(v15 - 1, v14) );
            }
            else
              v15 = (*v14)--;
            if ( v15 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
        v10 += 2;
      while ( v10 != v7 );
    if ( v6 )
      operator delete(v6);
  return v3;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


  pplx::task<void>::then<web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(void)
{
    a2,
    a3,
    a4);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_15user_statistics22user_statistics_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_GetResult(xbox::services::system::token_and_signature_result *a1, int a2)
{
  int v2; // r5@1
  xbox::services::system::token_and_signature_result *v3; // r4@1

  v2 = a2;
  v3 = a1;
  j_xbox::services::system::token_and_signature_result::token_and_signature_result(a1);
  *((_DWORD *)v3 + 9) = 0;
  *((_QWORD *)v3 + 5) = __PAIR__(&unk_28898CC, ((int (*)(void))byte_21E9640)());
  EntityInteraction::setInteractText((int *)v3, (int *)(v2 + 80));
  EntityInteraction::setInteractText((int *)v3 + 1, (int *)(v2 + 84));
  EntityInteraction::setInteractText((int *)v3 + 2, (int *)(v2 + 88));
  EntityInteraction::setInteractText((int *)v3 + 3, (int *)(v2 + 92));
  EntityInteraction::setInteractText((int *)v3 + 4, (int *)(v2 + 96));
  EntityInteraction::setInteractText((int *)v3 + 5, (int *)(v2 + 100));
  EntityInteraction::setInteractText((int *)v3 + 6, (int *)(v2 + 104));
  EntityInteraction::setInteractText((int *)v3 + 7, (int *)(v2 + 108));
  EntityInteraction::setInteractText((int *)v3 + 8, (int *)(v2 + 112));
  *(_QWORD *)((char *)v3 + 36) = *(_QWORD *)(v2 + 116);
  return EntityInteraction::setInteractText((int *)v3 + 11, (int *)(v2 + 124));
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  int v8; // r1@8 OVERLAPPED
  int v9; // r2@8
  int v10; // r2@9
  unsigned int *v11; // r1@10
  unsigned int v12; // r2@12
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@17
  char v14; // [sp+8h] [bp-30h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 48) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 56) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::xbox_live_result(
      (xbox::services::presence::presence_record *)&v14,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_FinalizeAndRunContinuations(
      v7,
      (int *)&v14);
    j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::~xbox_live_result((int)&v14);
  else
    *(_QWORD *)&v8 = *(_QWORD *)(v4 + 4);
    if ( v8 == v9 )
    {
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    }
    else
      *(_DWORD *)v8 = *v2;
      v10 = v2[1];
      *(_DWORD *)(v8 + 4) = v10;
      if ( v10 )
      {
        v11 = (unsigned int *)(v10 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v12 = __ldrex(v11);
          while ( __strex(v12 + 1, v11) );
        }
        else
          ++*v11;
      }
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::system::verify_string_result::verify_string_result((xbox::services::system::verify_string_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 24) = 0;
  *(_DWORD *)(v1 + 28) = v3;
  *(_DWORD *)(v1 + 32) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 44) = 0;
  *(_DWORD *)(v1 + 36) = 0;
  *(_DWORD *)(v1 + 40) = 0;
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_Task_impl(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_RegisterTask(
           a1,
           a2);
}


int __fastcall std::_Function_handler<unsigned char ()(bool),std::function<unsigned char ()(bool)> pplx::details::_MakeTToUnitFunc<bool>(std::function const&<void ()(bool)>)::{lambda(bool)#1}>::_M_invoke(int *a1)
{
  int v1; // r0@1

  v1 = *a1;
  if ( !*(_DWORD *)(v1 + 8) )
    sub_119C8E4();
  (*(void (**)(void))(v1 + 12))();
  return 0;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_TaskProcHandle::_RunChoreBridge(pplx::details::_TaskProcHandle *this, void *a2)
{
  pplx::details::_TaskProcHandle *v2; // r4@1

  v2 = this;
  (*(void (**)(void))(*(_DWORD *)this + 8))();
  return (*(int (__fastcall **)(pplx::details::_TaskProcHandle *))(*(_DWORD *)v2 + 4))(v2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r8@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r4@8
  int *v11; // r11@8
  int *v12; // r10@11
  int *v13; // r7@14
  unsigned int *v14; // r2@15
  signed int v15; // r1@17
  int v16; // r4@23
  void **v17; // r8@25
  char *v18; // r0@25
  void **v19; // r0@28
  void *v20; // r5@29
  unsigned int *v21; // r1@30
  unsigned int v22; // r0@32
  unsigned int *v23; // r4@37
  unsigned int v24; // r0@39
  int *v25; // r6@46
  int v26; // r4@47
  unsigned int *v27; // r1@48
  unsigned int v28; // r0@50
  unsigned int *v29; // r5@54
  unsigned int v30; // r0@56
  int *ptr; // [sp+8h] [bp-78h]@10
  char v33; // [sp+18h] [bp-68h]@25
  void *v34; // [sp+44h] [bp-3Ch]@25
  int v35; // [sp+48h] [bp-38h]@25
  int v36; // [sp+4Ch] [bp-34h]@25
  char *v37; // [sp+50h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 42);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 42);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v13 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::tournaments::tournament_request_result::operator=((int)(v4 + 4), v3);
      *((_QWORD *)v4 + 8) = *(_QWORD *)(v3 + 48);
      EntityInteraction::setInteractText((int *)v4 + 18, (int *)(v3 + 56));
      *((_BYTE *)*v2 + 84) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      ptr = v10;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v16 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v16 + 8))(v16, 1, 0, 0);
          }
          else
            v17 = *v2;
            j___aeabi_memclr8_1((int)&v33, 44);
            v34 = &unk_28898CC;
            v35 = 0;
            v36 = ((int (__cdecl *)(_DWORD))byte_21E9640)(0);
            v37 = (char *)&unk_28898CC;
            j_xbox::services::tournaments::tournament_request_result::operator=((int)&v33, (int)(v17 + 4));
            *(_QWORD *)&v35 = *((_QWORD *)v17 + 8);
            EntityInteraction::setInteractText((int *)&v37, (int *)v17 + 18);
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_FinalizeAndRunContinuations(
              v16,
              (int)&v33);
            v18 = v37 - 12;
            if ( (int *)(v37 - 12) != &dword_28898C0 )
            {
              v14 = (unsigned int *)(v37 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v15 = __ldrex(v14);
                while ( __strex(v15 - 1, v14) );
              }
              else
                v15 = (*v14)--;
              if ( v15 <= 0 )
                j_j_j_j__ZdlPv_9(v18);
            }
            j_xbox::services::tournaments::tournament_request_result::~tournament_request_result((xbox::services::tournaments::tournament_request_result *)&v33);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v19 = *v2;
      if ( (*v2)[19] )
        v13 = ptr;
        v19[19] = 0;
        v20 = v19[20];
        v19[20] = 0;
        if ( v20 )
          v21 = (unsigned int *)((char *)v20 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v22 = __ldrex(v21);
            while ( __strex(v22 - 1, v21) );
            v22 = (*v21)--;
          if ( v22 == 1 )
            v23 = (unsigned int *)((char *)v20 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v20 + 8))(v20);
            if ( &pthread_create )
              __dmb();
              do
                v24 = __ldrex(v23);
              while ( __strex(v24 - 1, v23) );
            else
              v24 = (*v23)--;
            if ( v24 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v20 + 12))(v20);
        v5 = 1;
      else
    if ( v13 != v11 )
      v25 = v13;
      do
        v26 = v25[1];
        if ( v26 )
          v27 = (unsigned int *)(v26 + 4);
              v28 = __ldrex(v27);
            while ( __strex(v28 - 1, v27) );
            v28 = (*v27)--;
          if ( v28 == 1 )
            v29 = (unsigned int *)(v26 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
                v30 = __ldrex(v29);
              while ( __strex(v30 - 1, v29) );
              v30 = (*v29)--;
            if ( v30 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
        v25 += 2;
      while ( v25 != v11 );
    if ( v13 )
      j_operator delete(v13);
  }
  return v5;
}


int __fastcall pplx::details::_MakeUnitToTFunc<pplx::task<void>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<pplx::task<void> ()(unsigned char),std::function<pplx::task<void> ()(unsigned char)> pplx::details::_MakeUnitToTFunc<pplx::task<void>>(std::function const&<pplx::task<void> ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<pplx::task<void> ()(unsigned char)> pplx::details::_MakeUnitToTFunc<pplx::task<void>>(std::function const&<pplx::task<void> ()(void)>)::{lambda(unsigned char)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int *__fastcall pplx::task<web::http::http_response>::task<pplx::task_completion_event<web::http::http_response>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r10@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r9@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@3
  unsigned int v11; // r1@5
  unsigned int *v12; // r4@7
  unsigned int v13; // r0@8
  int v14; // r5@11
  unsigned int *v15; // r0@12
  unsigned int v16; // r1@13
  int v17; // r1@15
  int v18; // r0@15
  unsigned int *v19; // r0@18
  unsigned int v20; // r2@19
  int v21; // r7@21
  unsigned int *v22; // r0@22
  unsigned int v23; // r1@23
  unsigned int *v24; // r4@25
  unsigned int v25; // r0@26
  unsigned int *v26; // r0@30
  unsigned int v27; // r1@31
  void *v28; // r5@35
  int v29; // r1@35 OVERLAPPED
  int v30; // r2@35 OVERLAPPED
  unsigned int v31; // r4@35
  int v32; // r4@40
  __int64 v33; // r0@43
  int v34; // r5@45
  unsigned int *v35; // r0@46
  unsigned int v36; // r1@47
  unsigned int *v37; // r0@50
  unsigned int v38; // r1@51
  unsigned int *v39; // r4@53
  unsigned int v40; // r0@54
  int v42; // [sp+0h] [bp-40h]@35
  void *ptr; // [sp+4h] [bp-3Ch]@35
  char *v44; // [sp+8h] [bp-38h]@35
  char *v45; // [sp+Ch] [bp-34h]@35
  int v46; // [sp+14h] [bp-2Ch]@15
  int v47; // [sp+18h] [bp-28h]@15
  int v48; // [sp+1Ch] [bp-24h]@21

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    __dmb();
    do
      v10 = __ldrex(v9);
    while ( __strex(v10 + 1, v9) );
      v11 = __ldrex(v9);
    while ( __strex(v11 - 1, v9) );
    if ( v11 == 1 )
    {
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      __dmb();
      do
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
    }
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
      v20 = __ldrex(v19);
    while ( __strex(v20 + 1, v19) );
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<web::http::http_response>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
      v23 = __ldrex(v22);
    while ( __strex(v23 - 1, v22) );
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
      v36 = __ldrex(v35);
    while ( __strex(v36 + 1, v35) );
  j_pplx::task_completion_event<web::http::http_response>::_RegisterTask((_DWORD *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
      v38 = __ldrex(v37);
    while ( __strex(v38 - 1, v37) );
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
        v40 = __ldrex(v39);
      while ( __strex(v40 - 1, v39) );
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::tournaments::team_info::team_info((xbox::services::tournaments::team_info *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 192) = 0;
  *(_DWORD *)(v1 + 196) = v3;
  *(_DWORD *)(v1 + 200) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 216) = 0;
  *(_DWORD *)(v1 + 208) = 0;
  *(_DWORD *)(v1 + 212) = 0;
  return result;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeVoidToUnitFunc(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(void),pplx::details::_MakeVoidToUnitFunc(std::function<void ()(void)> const&)::{lambda(void)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<pplx::details::_MakeVoidToUnitFunc(std::function<void ()(void)> const&)::{lambda(void)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


void __fastcall pplx::details::_Task_impl<bool>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = this;
  *(_DWORD *)this = &off_26DD958;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  j_j_j__ZdlPv_4((void *)v1);
}


web::json::value *__fastcall pplx::task<web::json::value>::get(web::json::value *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  web::json::value *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_119C884((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return web::json::value::value(v3, (pplx::details::_Task_impl_base *)((char *)*v2 + 80));
}


int __fastcall pplx::details::_MakeUnitToTFunc<bool>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<bool ()(unsigned char),std::function<bool ()(unsigned char)> pplx::details::_MakeUnitToTFunc<bool>(std::function const&<bool ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<bool ()(unsigned char)> pplx::details::_MakeUnitToTFunc<bool>(std::function const&<bool ()(void)>)::{lambda(unsigned char)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int __fastcall pplx::task<std::string>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  __int64 v8; // r0@7
  int v9; // r6@7
  unsigned int *v10; // r7@14
  int v11; // r6@21
  unsigned int *v12; // r7@28
  int v13; // r6@35
  unsigned int *v14; // r7@42
  int v15; // r0@50
  int v16; // r1@50
  unsigned int *v17; // r1@51
  unsigned int v18; // r2@53
  unsigned int *v19; // r2@57
  unsigned int v20; // r1@59
  int v22; // [sp+0h] [bp-38h]@50
  int v23; // [sp+4h] [bp-34h]@50
  int v24; // [sp+8h] [bp-30h]@1
  int v25; // [sp+Ch] [bp-2Ch]@1
  int v26; // [sp+10h] [bp-28h]@7
  char v27; // [sp+14h] [bp-24h]@7
  int v28; // [sp+18h] [bp-20h]@7
  int v29; // [sp+1Ch] [bp-1Ch]@7
  char v30; // [sp+20h] [bp-18h]@7

  v3 = a1;
  v24 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v25 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v26 = *(_DWORD *)(a3 + 8);
  v29 = v4;
  std::__shared_ptr<pplx::details::_Task_impl<std::string>,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_Task_impl<std::string>>,pplx::details::_CancellationTokenState *&,pplx::scheduler_ptr &>(
    (int)&v27,
    (int)&v30,
    &v29,
    (int)&v24);
  v8 = *(_QWORD *)&v27;
  *(_DWORD *)&v27 = 0;
  v28 = 0;
  *(_DWORD *)v3 = v8;
  v9 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = HIDWORD(v8);
  if ( v9 )
    HIDWORD(v8) = v9 + 4;
        LODWORD(v8) = __ldrex((unsigned int *)HIDWORD(v8));
      while ( __strex(v8 - 1, (unsigned int *)HIDWORD(v8)) );
      LODWORD(v8) = (*(_DWORD *)HIDWORD(v8))--;
    if ( (_DWORD)v8 == 1 )
      v10 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          LODWORD(v8) = __ldrex(v10);
        while ( __strex(v8 - 1, v10) );
      }
      else
        LODWORD(v8) = (*v10)--;
      if ( (_DWORD)v8 == 1 )
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v11 = v28;
  if ( v28 )
    HIDWORD(v8) = v28 + 4;
      v12 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          LODWORD(v8) = __ldrex(v12);
        while ( __strex(v8 - 1, v12) );
        LODWORD(v8) = (*v12)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v13 = v25;
  if ( v25 )
    HIDWORD(v8) = v25 + 4;
      v14 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          LODWORD(v8) = __ldrex(v14);
        while ( __strex(v8 - 1, v14) );
        LODWORD(v8) = (*v14)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  if ( v4 != 2 )
    v15 = *(_DWORD *)v3;
    v22 = *(_DWORD *)v3;
    v16 = *(_DWORD *)(v3 + 4);
    v23 = v16;
    if ( v16 )
      v17 = (unsigned int *)(v16 + 8);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    pplx::details::_Task_impl_base::_RegisterCancellation(v15, (unsigned __int64 *)&v22);
    LODWORD(v8) = v23;
    if ( v23 )
      v19 = (unsigned int *)(v23 + 8);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        LODWORD(v8) = (*(int (__cdecl **)(_DWORD))(*(_DWORD *)v8 + 12))(v8);
  return v8;
}


int __fastcall pplx::details::_Task_impl<std::string>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_26DE7D4;
  *(_DWORD *)(v3 + 80) = &unk_28898CC;
  return v3;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  int v30[16]; // [sp+8h] [bp-70h]@25
  int v31; // [sp+48h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 48);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 48);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      *((_QWORD *)v4 + 3) = *(_QWORD *)(v3 + 8);
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      v4[9] = *(void **)(v3 + 20);
      EntityInteraction::setInteractText((int *)v4 + 10, (int *)(v3 + 24));
      EntityInteraction::setInteractText((int *)v4 + 11, (int *)(v3 + 28));
      EntityInteraction::setInteractText((int *)v4 + 12, (int *)(v3 + 32));
      EntityInteraction::setInteractText((int *)v4 + 13, (int *)(v3 + 36));
      EntityInteraction::setInteractText((int *)v4 + 14, (int *)(v3 + 40));
      EntityInteraction::setInteractText((int *)v4 + 15, (int *)(v3 + 44));
      EntityInteraction::setInteractText((int *)v4 + 16, (int *)(v3 + 48));
      v4[17] = *(void **)(v3 + 52);
      *((_QWORD *)v4 + 9) = *(_QWORD *)(v3 + 56);
      EntityInteraction::setInteractText((int *)v4 + 20, (int *)(v3 + 64));
      *((_BYTE *)*v2 + 96) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::system::token_result>::xbox_live_result(
              (xbox::services::system::token_result *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::system::token_result::~token_result((xbox::services::system::token_result *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[22] )
        v17[22] = 0;
        v18 = v17[23];
        v17[23] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_2764354;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 108);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::privacy::permission_check_result::~permission_check_result((xbox::services::privacy::permission_check_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


xbox::services::user_statistics::user_statistics_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::get(xbox::services::user_statistics::user_statistics_result *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::get(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(std::function const&<void ()(Social::XboxProfile)>)::{lambda(Social::XboxProfile)#1}::operator() const(int a1, const Social::XboxProfile *a2)
{
  return pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(std::function const&<void ()(Social::XboxProfile)>)::{lambda(Social::XboxProfile)#1}::operator() const(
           a1,
           a2);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a2;
  v3 = a1;
  *(_BYTE *)(a1 + 80) = *(_BYTE *)a2;
  j_std::vector<xbox::services::privacy::permission_deny_reason,std::allocator<xbox::services::privacy::permission_deny_reason>>::operator=(
    a1 + 84,
    (unsigned __int64 *)(a2 + 4));
  EntityInteraction::setInteractText((int *)(v3 + 96), (int *)(v2 + 16));
  *(_QWORD *)(v3 + 100) = *(_QWORD *)(v2 + 20);
  EntityInteraction::setInteractText((int *)(v3 + 108), (int *)(v2 + 28));
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 36));
    }
    else
    v7 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


xbox::services::matchmaking::create_match_ticket_response *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::get(xbox::services::matchmaking::create_match_ticket_response *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::get(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_20game_server_platform25game_server_ticket_statusEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<web::websockets::client::websocket_incoming_message>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r6@11
  unsigned int v9; // r0@13
  int v10; // r5@18
  unsigned int *v11; // r1@19
  unsigned int v12; // r0@21
  unsigned int *v13; // r6@25
  unsigned int v14; // r0@27
  int v15; // r5@32
  int v16; // r7@32
  int v17; // r4@33
  unsigned int *v18; // r1@34
  unsigned int v19; // r0@36
  unsigned int *v20; // r6@40
  unsigned int v21; // r0@42

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 9);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  *((_DWORD *)v1 + 4) = &off_26DDA34;
  v10 = *((_DWORD *)v1 + 6);
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v16 = *v1 >> 32;
  v15 = *v1;
  if ( v15 != v16 )
    do
      v17 = *(_DWORD *)(v15 + 4);
      if ( v17 )
        v18 = (unsigned int *)(v17 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
        }
        else
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
          if ( &pthread_create )
          {
            __dmb();
            do
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
          }
          else
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      v15 += 8;
    while ( v15 != v16 );
    v15 = *(_DWORD *)v1;
  if ( v15 )
    j_operator delete((void *)v15);
  return v1;
}


signed int __fastcall pplx::details::_Task_impl<web::json::value>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r6@5
  int v12; // r8@5
  unsigned int *v13; // r0@7
  unsigned int v14; // r1@9
  bool v15; // zf@11
  signed __int64 v16; // r6@16
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = pthread_mutex_lock(v6);
    if ( v9 )
      sub_119CCFC(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v15 = v10 == 3;
    if ( v10 != 3 )
      v15 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v15 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v16 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
        v11 = *(_DWORD *)(v5 + 16);
      }
      else
        ++*v13;
    }
    if ( v11 )
      v17 = (unsigned int *)(v11 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    *(_DWORD *)(v5 + 16) = v12;
LABEL_33:
  if ( v8 == 1 )
    v16 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v16 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    pthread_mutex_unlock(v6);
  if ( v16 )
    result = v16 ^ 1;
    if ( &pthread_create )
      v23 = pthread_mutex_lock((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_119CCFC(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v5 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<web::json::value>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<web::json::value>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = operator new(0x10u);
      v26[2] = 0;
      v27 = operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<web::json::value>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<web::json::value>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  int v8; // r2@7
  char *v9; // r0@7
  unsigned int *v10; // r2@8
  signed int v11; // r1@10
  int v12; // r1@12 OVERLAPPED
  int v13; // r2@12
  int v14; // r2@13
  unsigned int *v15; // r1@14
  unsigned int v16; // r2@16
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@21
  int v18; // [sp+8h] [bp-28h]@7
  char v19; // [sp+Ch] [bp-24h]@7
  __int64 v20; // [sp+10h] [bp-20h]@7
  char *v21; // [sp+18h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 36) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 44) )
    v7 = *v2;
    v21 = (char *)&unk_28898CC;
    v8 = *(_DWORD *)(v4 + 16);
    v19 = *(_BYTE *)(v4 + 20);
    v18 = v8;
    v20 = *(_QWORD *)(v4 + 24);
    EntityInteraction::setInteractText((int *)&v21, (int *)(v4 + 32));
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v18);
    v9 = v21 - 12;
    if ( (int *)(v21 - 12) != &dword_28898C0 )
    {
      v10 = (unsigned int *)(v21 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
    }
  else
    *(_QWORD *)&v12 = *(_QWORD *)(v4 + 4);
    if ( v12 == v13 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v12 = *v2;
      v14 = v2[1];
      *(_DWORD *)(v12 + 4) = v14;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 + 1, v15) );
        }
        else
          ++*v15;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::set(
           a1,
           a2);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_FinalizeAndRunContinuations(int a1, unsigned __int64 *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  unsigned __int64 *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::title_storage::title_storage_blob_metadata_result::operator=(a1 + 80, a2);
  *(_QWORD *)(v2 + 144) = v3[8];
  EntityInteraction::setInteractText((int *)(v2 + 152), (int *)v3 + 18);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int (**__fastcall pplx::task_completion_event<web::json::value>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  int v8; // r1@10 OVERLAPPED
  int v9; // r2@10
  int v10; // r2@11
  unsigned int *v11; // r2@12
  unsigned int v12; // r1@14
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@19
  int v14; // [sp+4h] [bp-14h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = pthread_mutex_lock((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_119CCFC(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 20) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 28) )
    v7 = *v2;
    web::json::value::value((web::json::value *)&v14, (const web::json::value *)(v4 + 16));
    pplx::details::_Task_impl<web::json::value>::_FinalizeAndRunContinuations(v7, &v14);
    if ( v14 )
      (*(void (**)(void))(*(_DWORD *)v14 + 96))();
    v14 = 0;
  else
    *(_QWORD *)&v8 = *(_QWORD *)(v4 + 4);
    if ( v8 == v9 )
    {
      std::vector<std::shared_ptr<pplx::details::_Task_impl<web::json::value>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<web::json::value>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<web::json::value>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    }
    else
      *(_DWORD *)v8 = *v2;
      v10 = v2[1];
      *(_DWORD *)(v8 + 4) = v10;
      if ( v10 )
      {
        v11 = (unsigned int *)(v10 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v12 = __ldrex(v11);
          while ( __strex(v12 + 1, v11) );
          v8 = *(_DWORD *)(v4 + 4);
        }
        else
          ++*v11;
      }
      *(_DWORD *)(v4 + 4) = v8 + 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v5);
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_FinalizeAndRunContinuations(int a1, unsigned __int64 *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::~_Task_impl(a1);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r0@1
  signed int v5; // r8@1
  unsigned int v6; // r1@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r4@8
  int *v11; // r11@8
  int *v12; // r9@11
  int *v13; // r7@14
  unsigned int *v14; // r2@15
  signed int v15; // r1@17
  int v16; // r4@23
  void *v17; // r0@25
  int v18; // r10@26
  unsigned int *v19; // r1@27
  unsigned int v20; // r0@29
  unsigned int *v21; // r4@33
  unsigned int v22; // r0@35
  void **v23; // r0@41
  void *v24; // r5@42
  unsigned int *v25; // r1@43
  unsigned int v26; // r0@45
  unsigned int *v27; // r4@50
  unsigned int v28; // r0@52
  int *v29; // r6@59
  int v30; // r5@60
  unsigned int *v31; // r1@61
  unsigned int v32; // r0@63
  unsigned int *v33; // r4@67
  unsigned int v34; // r0@69
  int *ptr; // [sp+4h] [bp-84h]@10
  char v37; // [sp+10h] [bp-78h]@25
  int v38; // [sp+14h] [bp-74h]@26
  int v39; // [sp+18h] [bp-70h]@26
  int v40; // [sp+58h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)v4 + 52);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 52);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v13 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>::operator=(
        (int)(v4 + 4),
        v3);
      *((_BYTE *)*v2 + 104) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      ptr = v10;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v16 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v16 + 8))(v16, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>::xbox_live_result(
              (xbox::services::title_storage::title_storage_blob_result *)&v37,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_FinalizeAndRunContinuations(
              v16,
              (int)&v37);
            v17 = (void *)(v40 - 12);
            if ( (int *)(v40 - 12) != &dword_28898C0 )
            {
              v14 = (unsigned int *)(v40 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v15 = __ldrex(v14);
                while ( __strex(v15 - 1, v14) );
              }
              else
                v15 = (*v14)--;
              if ( v15 <= 0 )
                j_j_j_j__ZdlPv_9(v17);
            }
            j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)&v39);
            v18 = v38;
            if ( v38 )
              v19 = (unsigned int *)(v38 + 4);
                  v20 = __ldrex(v19);
                while ( __strex(v20 - 1, v19) );
                v20 = (*v19)--;
              if ( v20 == 1 )
                v21 = (unsigned int *)(v18 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 8))(v18);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v22 = __ldrex(v21);
                  while ( __strex(v22 - 1, v21) );
                }
                else
                  v22 = (*v21)--;
                if ( v22 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 12))(v18);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v23 = *v2;
      if ( (*v2)[24] )
        v13 = ptr;
        v23[24] = 0;
        v24 = v23[25];
        v23[25] = 0;
        if ( v24 )
          v25 = (unsigned int *)((char *)v24 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)((char *)v24 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v24 + 8))(v24);
            if ( &pthread_create )
              __dmb();
              do
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
            else
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v24 + 12))(v24);
        v5 = 1;
      else
    if ( v13 != v11 )
      v29 = v13;
      do
        v30 = v29[1];
        if ( v30 )
          v31 = (unsigned int *)(v30 + 4);
              v32 = __ldrex(v31);
            while ( __strex(v32 - 1, v31) );
            v32 = (*v31)--;
          if ( v32 == 1 )
            v33 = (unsigned int *)(v30 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 8))(v30);
                v34 = __ldrex(v33);
              while ( __strex(v34 - 1, v33) );
              v34 = (*v33)--;
            if ( v34 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 12))(v30);
        v29 += 2;
      while ( v29 != v11 );
    if ( v13 )
      j_operator delete(v13);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl_base::_RunContinuation(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  int v4; // r0@1
  bool v5; // zf@1
  int result; // r0@4
  int v7; // r4@6
  unsigned int *v8; // r1@7
  unsigned int *v9; // r5@13
  int v10; // [sp+8h] [bp-18h]@1
  int v11; // [sp+Ch] [bp-14h]@6

  v2 = a2;
  v3 = a1;
  (*(void (__fastcall **)(int *))(*(_DWORD *)a2 + 12))(&v10);
  v4 = *(_DWORD *)(v3 + 4);
  v5 = v4 == 4;
  if ( v4 == 4 )
    v5 = *(_BYTE *)(v2 + 9) == 0;
  if ( v5 )
  {
    (*(void (__cdecl **)(int))(*(_DWORD *)v10 + 8))(v10);
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v2 + 4))(v2);
  }
  else
    result = pplx::details::_Task_impl_base::_ScheduleTask(v10, v2, *(_DWORD *)(v2 + 12));
  v7 = v11;
  if ( v11 )
    v8 = (unsigned int *)(v11 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = __ldrex(v8);
      while ( __strex(result - 1, v8) );
    }
    else
      result = (*v8)--;
    if ( result == 1 )
      v9 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v9);
        while ( __strex(result - 1, v9) );
      }
      else
        result = (*v9)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::set(
           a1,
           a2);
}


int __fastcall pplx::task_completion_event<xbox::services::system::java_rps_ticket>::~task_completion_event(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 4);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  return v1;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6social31xbox_social_relationship_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r7@1
  int v3; // r5@1
  int *v4; // r6@1
  pthread_mutex_t *v5; // r8@1
  int v6; // r0@2
  int v7; // r6@7
  char *v8; // r0@7
  __int64 v9; // r0@9
  int v10; // r1@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v14; // r2@21
  signed int v15; // r1@23
  char v16; // [sp+8h] [bp-58h]@7
  void *v17; // [sp+34h] [bp-2Ch]@7
  int v18; // [sp+38h] [bp-28h]@7
  int v19; // [sp+3Ch] [bp-24h]@7
  char *v20; // [sp+40h] [bp-20h]@7

  v2 = a1;
  v3 = *a1;
  v4 = a2;
  v5 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1(v5);
    if ( v6 )
      sub_21E5E14(v6);
    v3 = *v2;
  }
  if ( *(_DWORD *)(v3 + 76) )
    (*(void (__cdecl **)(int))(*(_DWORD *)*v4 + 8))(*v4);
  else if ( *(_BYTE *)(v3 + 84) )
    v7 = *v4;
    j___aeabi_memclr8_1((int)&v16, 44);
    v17 = &unk_28898CC;
    v18 = 0;
    v19 = ((int (*)(void))byte_21E9640)();
    v20 = (char *)&unk_28898CC;
    j_xbox::services::tournaments::team_request_result::operator=((int)&v16, v3 + 16);
    *(_QWORD *)&v18 = *(_QWORD *)(v3 + 64);
    EntityInteraction::setInteractText((int *)&v20, (int *)(v3 + 72));
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v16);
    v8 = v20 - 12;
    if ( (int *)(v20 - 12) != &dword_28898C0 )
    {
      v14 = (unsigned int *)(v20 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
      }
      else
        v15 = (*v14)--;
      if ( v15 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::tournaments::team_request_result::~team_request_result((xbox::services::tournaments::team_request_result *)&v16);
  else
    v9 = *(_QWORD *)(v3 + 4);
    if ( (_DWORD)v9 == HIDWORD(v9) )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>> const&>(
        (unsigned __int64 *)v3,
        (int)v4);
    else
      *(_DWORD *)v9 = *v4;
      HIDWORD(v9) = v4[1];
      *(_DWORD *)(v9 + 4) = HIDWORD(v9);
      if ( HIDWORD(v9) )
        v11 = (unsigned int *)(v10 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v12 = __ldrex(v11);
          while ( __strex(v12 + 1, v11) );
        }
        else
          ++*v11;
      *(_DWORD *)(v3 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(std::function const&<void ()(pplx::task<std::string>)>)::{lambda(pplx::task<std::string>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(std::function const&<void ()(pplx::task<std::string>)>)::{lambda(pplx::task<std::string>)#1}::operator() const(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::set(
           a1,
           a2);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r3@1
  int v5; // r1@1
  int v6; // r2@1
  int v7; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v9; // r0@8
  int v10; // r1@12
  int v11; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  v4 = v2 + 88;
  v5 = v3[3];
  v6 = v3[4];
  *(_DWORD *)v4 = v3[2];
  *(_DWORD *)(v4 + 4) = v5;
  *(_DWORD *)(v4 + 8) = v6;
  *(_QWORD *)(v2 + 104) = *((_QWORD *)v3 + 3);
  EntityInteraction::setInteractText((int *)(v2 + 112), v3 + 8);
  if ( &pthread_create )
  {
    v7 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v7 )
      sub_21E5E14(v7);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v9 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v9 )
        sub_21E5E14(v9);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v10 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v10 )
      do
      {
        v11 = *(_DWORD *)(v10 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v10);
        v10 = v11;
      }
      while ( v11 );
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_impl<web::json::value>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_26DE220;
  web::json::value::value((web::json::value *)(v3 + 80));
  return v3;
}


_DWORD *__fastcall pplx::details::_CancellationTokenCallback<pplx::details::_Task_impl_base::_RegisterCancellation(std::weak_ptr<pplx::details::_Task_impl_base>)::{lambda(void)#1}>::~_CancellationTokenCallback(int a1)
{
  _DWORD *v1; // r5@1
  int v2; // r0@1
  unsigned int *v3; // r2@2
  unsigned int v4; // r1@4

  v1 = (_DWORD *)a1;
  *(_DWORD *)a1 = &off_26D7B28;
  v2 = *(_DWORD *)(a1 + 24);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 8);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      (*(void (**)(void))(*(_DWORD *)v2 + 12))();
  }
  *v1 = &off_26D7B40;
  return v1;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<bool>)> pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(std::function const&<void ()(pplx::task<bool>)>)::{lambda(pplx::task<bool>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(Social::XboxProfile),std::function<unsigned char ()(Social::XboxProfile)> pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(std::function const&<void ()(Social::XboxProfile)>)::{lambda(Social::XboxProfile)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(Social::XboxProfile)> pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(std::function const&<void ()(Social::XboxProfile)>)::{lambda(Social::XboxProfile)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r0@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_BYTE *)(v2 + 84) = *(_BYTE *)(a2 + 4);
  *(_DWORD *)(v2 + 80) = v3;
  *(_QWORD *)(v2 + 88) = *(_QWORD *)(a2 + 8);
  EntityInteraction::setInteractText((int *)(v2 + 96), (int *)(a2 + 16));
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall pplx::details::_Task_impl<Social::XboxProfile>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_26E787C;
  *(_DWORD *)(v3 + 80) = &unk_28898CC;
  *(_DWORD *)(v3 + 84) = &unk_28898CC;
  *(_DWORD *)(v3 + 88) = &unk_28898CC;
  *(_DWORD *)(v3 + 92) = &unk_28898CC;
  *(_DWORD *)(v3 + 96) = &unk_28898CC;
  *(_BYTE *)(v3 + 100) = 0;
  *(_BYTE *)(v3 + 101) = 0;
  *(_BYTE *)(v3 + 102) = 0;
  *(_DWORD *)(v3 + 104) = 0;
  *(_DWORD *)(v3 + 108) = 0;
  *(_DWORD *)(v3 + 112) = &unk_28898CC;
  *(_DWORD *)(v3 + 116) = &unk_28898CC;
  *(_QWORD *)(v3 + 120) = (unsigned int)&unk_28898CC;
  return v3;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8((void *)v1);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::system::token_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  unsigned int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-A0h]@10
  int v33; // [sp+4h] [bp-9Ch]@10
  int v34; // [sp+8h] [bp-98h]@16
  int v35; // [sp+Ch] [bp-94h]@20
  char v36; // [sp+14h] [bp-8Ch]@20
  int v37; // [sp+18h] [bp-88h]@20
  void *ptr; // [sp+1Ch] [bp-84h]@20
  int v39; // [sp+20h] [bp-80h]@20
  int v40; // [sp+24h] [bp-7Ch]@20
  char v41; // [sp+28h] [bp-78h]@20
  char v42; // [sp+29h] [bp-77h]@20
  int v43; // [sp+30h] [bp-70h]@4
  int v44; // [sp+34h] [bp-6Ch]@4
  char v45; // [sp+38h] [bp-68h]@3
  int v46; // [sp+78h] [bp-28h]@3
  int v47; // [sp+80h] [bp-20h]@1
  int v48; // [sp+84h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_6system12token_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::system::token_result>::xbox_live_result(
    (xbox::services::system::token_result *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::system::token_result::~token_result((xbox::services::system::token_result *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::presence::presence_record::presence_record((xbox::services::presence::presence_record *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 36) = 0;
  *(_DWORD *)(v1 + 40) = v3;
  *(_DWORD *)(v1 + 44) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 52) = 0;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services::achievements::achievement *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2763444;
  v12 = j_xbox::services::achievements::achievement::achievement((xbox::services::achievements::achievement *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 232) = 0;
  *(_DWORD *)(v3 + 236) = v13;
  *(_DWORD *)(v3 + 240) = &unk_28898CC;
  return v3;
}


int __fastcall std::_Function_handler<bool ()(unsigned char),std::function<bool ()(unsigned char)> pplx::details::_MakeUnitToTFunc<bool>(std::function const&<bool ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke(int *a1)
{
  int v1; // r0@1

  v1 = *a1;
  if ( !*(_DWORD *)(v1 + 8) )
    sub_119C8E4();
  return (*(int (**)(void))(v1 + 12))();
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 18);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 16);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)((char *)v1 + 20));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


void __fastcall pplx::details::_Task_impl<bool>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl<bool>::~_Task_impl(this);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r1@8
  void *v9; // r0@8
  unsigned int *v11; // r2@10
  signed int v12; // r1@12
  unsigned int *v13; // r2@14
  signed int v14; // r1@16

  v1 = this;
  *(_DWORD *)this = &off_26E766C;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 23);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v11 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
    }
    else
      v12 = (*v11)--;
    if ( v12 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 20);
  v9 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
    v13 = (unsigned int *)(v8 - 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  unsigned __int64 v30[9]; // [sp+Ch] [bp-74h]@25
  int v31; // [sp+54h] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 50);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 50);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::title_storage::title_storage_blob_metadata_result::operator=(
        (int)(v4 + 4),
        (unsigned __int64 *)v3);
      *((_QWORD *)v4 + 10) = *(_QWORD *)(v3 + 64);
      EntityInteraction::setInteractText((int *)v4 + 22, (int *)(v3 + 72));
      *((_BYTE *)*v2 + 100) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>::xbox_live_result(
              (xbox::services::title_storage::title_storage_blob_metadata_result *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::title_storage::title_storage_blob_metadata_result::~title_storage_blob_metadata_result((xbox::services::title_storage::title_storage_blob_metadata_result *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[23] )
        v17[23] = 0;
        v18 = v17[24];
        v17[24] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27673A8;
  v12 = j_xbox::services::title_storage::title_storage_blob_metadata_result::title_storage_blob_metadata_result((xbox::services::title_storage::title_storage_blob_metadata_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 144) = 0;
  *(_DWORD *)(v3 + 148) = v13;
  *(_DWORD *)(v3 + 152) = &unk_28898CC;
  return v3;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<web::http::http_response>)> pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(std::function const&<void ()(pplx::task<web::http::http_response>)>)::{lambda(pplx::task<web::http::http_response>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


_DWORD *__fastcall pplx::details::_Task_impl<TransactionStatus>::_Task_impl(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  pplx::details::_Task_impl_base::_Task_impl_base((int)v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *v3 = &off_26DF6B4;
  return v3;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<std::error_code>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = this;
  *(_DWORD *)this = &off_276DE9C;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_5(v1);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int *__fastcall pplx::task<xbox::services::system::auth_flow_result>::task<pplx::task_completion_event<xbox::services::system::auth_flow_result>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::system::auth_flow_result>::task<pplx::task_completion_event<xbox::services::system::auth_flow_result>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<void>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r0@1
  signed int v5; // r8@1
  unsigned int v6; // r1@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r4@8
  int *v11; // r10@8
  int *v12; // r9@11
  int *v13; // r7@14
  unsigned int *v14; // r2@15
  signed int v15; // r1@17
  int v16; // r4@22
  void **v17; // r0@24
  char *v18; // r0@24
  void **v19; // r0@26
  void *v20; // r5@27
  unsigned int *v21; // r1@28
  unsigned int v22; // r0@30
  unsigned int *v23; // r4@35
  unsigned int v24; // r0@37
  int *v25; // r6@44
  int v26; // r4@45
  unsigned int *v27; // r1@46
  unsigned int v28; // r0@48
  unsigned int *v29; // r5@52
  unsigned int v30; // r0@54
  int *ptr; // [sp+Ch] [bp-44h]@10
  __int64 v33; // [sp+10h] [bp-40h]@24
  char *v34; // [sp+18h] [bp-38h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)v4 + 18);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 18);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v13 = 0;
      v11 = 0;
      v5 = 0;
    else
      *((_QWORD *)v4 + 2) = *(_QWORD *)v3;
      EntityInteraction::setInteractText((int *)v4 + 6, (int *)(v3 + 8));
      *((_BYTE *)*v2 + 36) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      ptr = v10;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v16 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v16 + 8))(v16, 1, 0, 0);
          }
          else
            v17 = *v2;
            v34 = (char *)&unk_28898CC;
            v33 = *((_QWORD *)v17 + 2);
            EntityInteraction::setInteractText((int *)&v34, (int *)v17 + 6);
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_FinalizeAndRunContinuations(
              v16,
              (int)&v33);
            v18 = v34 - 12;
            if ( (int *)(v34 - 12) != &dword_28898C0 )
            {
              v14 = (unsigned int *)(v34 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v15 = __ldrex(v14);
                while ( __strex(v15 - 1, v14) );
              }
              else
                v15 = (*v14)--;
              if ( v15 <= 0 )
                j_j_j_j__ZdlPv_9(v18);
            }
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v19 = *v2;
      if ( (*v2)[7] )
        v13 = ptr;
        v19[7] = 0;
        v20 = v19[8];
        v19[8] = 0;
        if ( v20 )
          v21 = (unsigned int *)((char *)v20 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v22 = __ldrex(v21);
            while ( __strex(v22 - 1, v21) );
            v22 = (*v21)--;
          if ( v22 == 1 )
            v23 = (unsigned int *)((char *)v20 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v20 + 8))(v20);
            if ( &pthread_create )
              __dmb();
              do
                v24 = __ldrex(v23);
              while ( __strex(v24 - 1, v23) );
            else
              v24 = (*v23)--;
            if ( v24 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v20 + 12))(v20);
        v5 = 1;
      else
    if ( v13 != v11 )
      v25 = v13;
      do
        v26 = v25[1];
        if ( v26 )
          v27 = (unsigned int *)(v26 + 4);
              v28 = __ldrex(v27);
            while ( __strex(v28 - 1, v27) );
            v28 = (*v27)--;
          if ( v28 == 1 )
            v29 = (unsigned int *)(v26 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
                v30 = __ldrex(v29);
              while ( __strex(v30 - 1, v29) );
              v30 = (*v29)--;
            if ( v30 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
        v25 += 2;
      while ( v25 != v11 );
    if ( v13 )
      j_operator delete(v13);
  }
  return v5;
}


void __fastcall pplx::details::_TaskProcThunk::_Bridge(pplx::details::_TaskProcThunk *this, void *a2)
{
  pplx::details::_TaskProcThunk *v2; // r4@1
  void (__fastcall *v3)(pplx::details::_TaskProcThunk *, pplx::details::_TaskProcThunk *, signed int); // r3@2

  v2 = this;
  if ( !*((_DWORD *)this + 2) )
    sub_DA7654();
  (*((void (__fastcall **)(_DWORD))this + 3))(this);
  v3 = (void (__fastcall *)(pplx::details::_TaskProcThunk *, pplx::details::_TaskProcThunk *, signed int))*((_DWORD *)v2 + 2);
  if ( v3 )
    v3(v2, v2, 3);
  j_j_j__ZdlPv_3((void *)v2);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[46]; // [sp+8h] [bp-D8h]@7
  int v18; // [sp+C0h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 208) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 216) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::tournaments::team_info>::xbox_live_result(
      (xbox::services::tournaments::team_info *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::tournaments::team_info::~team_info((xbox::services::tournaments::team_info *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::~_Task_impl(a1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  void *v9; // r0@8
  unsigned int *v10; // r2@9
  signed int v11; // r1@11
  int v12; // r1@13 OVERLAPPED
  int v13; // r2@13
  int v14; // r2@14
  unsigned int *v15; // r1@15
  unsigned int v16; // r2@17
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@22
  unsigned int *v18; // r2@25
  signed int v19; // r1@27
  char v20; // [sp+8h] [bp-28h]@7
  int v21; // [sp+Ch] [bp-24h]@8
  int v22; // [sp+18h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 36) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 44) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::system::verify_string_result>::xbox_live_result(
      (xbox::services::system::verify_string_result *)&v20,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v20);
    v8 = (void *)(v22 - 12);
    if ( (int *)(v22 - 12) != &dword_28898C0 )
    {
      v18 = (unsigned int *)(v22 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
      }
      else
        v19 = (*v18)--;
      if ( v19 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    v9 = (void *)(v21 - 12);
    if ( (int *)(v21 - 12) != &dword_28898C0 )
      v10 = (unsigned int *)(v21 - 4);
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
        v11 = (*v10)--;
      if ( v11 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
  else
    *(_QWORD *)&v12 = *(_QWORD *)(v4 + 4);
    if ( v12 == v13 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v12 = *v2;
      v14 = v2[1];
      *(_DWORD *)(v12 + 4) = v14;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 + 1, v15) );
        }
        else
          ++*v15;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r4@1
  void (__fastcall *v3)(int, char *); // r5@2
  char v5; // [sp+4h] [bp-64h]@1
  char v6; // [sp+20h] [bp-48h]@1
  char v7; // [sp+3Ch] [bp-2Ch]@2

  v2 = *a1;
  xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>::xbox_live_result(
    (xbox::services::user_statistics::user_statistics_result *)&v5,
    a2);
    (xbox::services::user_statistics::user_statistics_result *)&v6,
    (int)&v5);
  if ( !*(_DWORD *)(v2 + 8) )
    sub_119C8E4();
  v3 = *(void (__fastcall **)(int, char *))(v2 + 12);
    (xbox::services::user_statistics::user_statistics_result *)&v7,
    (int)&v6);
  v3(v2, &v7);
  xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>::~xbox_live_result((int)&v7);
  xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>::~xbox_live_result((int)&v6);
  xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>::~xbox_live_result((int)&v5);
  return 0;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int *v12; // r0@21
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@1
  int v16; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v14 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v15 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v16 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v14);
  v7 = v15;
  if ( v15 )
    v8 = (unsigned int *)(v15 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2764E20;
  *(_DWORD *)(v3 + 80) = &unk_28898CC;
  *(_DWORD *)(v3 + 84) = &unk_28898CC;
  v12 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&unk_28898CC);
  *(_DWORD *)(v3 + 88) = 0;
  *(_DWORD *)(v3 + 92) = v12;
  *(_DWORD *)(v3 + 96) = &unk_28898CC;
  return v3;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  *(_QWORD *)(v2 + 88) = *((_QWORD *)v3 + 1);
  EntityInteraction::setInteractText((int *)(v2 + 96), v3 + 4);
  *(_DWORD *)(v2 + 100) = v3[5];
  EntityInteraction::setInteractText((int *)(v2 + 104), v3 + 6);
  EntityInteraction::setInteractText((int *)(v2 + 108), v3 + 7);
  EntityInteraction::setInteractText((int *)(v2 + 112), v3 + 8);
  EntityInteraction::setInteractText((int *)(v2 + 116), v3 + 9);
  EntityInteraction::setInteractText((int *)(v2 + 120), v3 + 10);
  EntityInteraction::setInteractText((int *)(v2 + 124), v3 + 11);
  EntityInteraction::setInteractText((int *)(v2 + 128), v3 + 12);
  *(_DWORD *)(v2 + 132) = v3[13];
  *(_QWORD *)(v2 + 136) = *((_QWORD *)v3 + 7);
  EntityInteraction::setInteractText((int *)(v2 + 144), v3 + 16);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(TransactionStatus)> pplx::details::_MakeTToUnitFunc<TransactionStatus>(std::function const&<void ()(TransactionStatus)>)::{lambda(TransactionStatus)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


void __fastcall __noreturn pplx::task_completion_event<void>::set_exception<std::runtime_error>(int a1, int a2)
{
  pplx::task_completion_event<void>::set_exception<std::runtime_error>(a1, a2);
}


unsigned int __fastcall pplx::task<std::shared_ptr<xbox::services::http_call_response>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implISt10shared_ptrIN4xbox8services18http_call_responseEEEESaISC_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::~_Task_impl(a1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::~_Task_impl(a1);
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  unsigned int *v5; // r2@3
  signed int v6; // r1@5
  char v7; // [sp+4h] [bp-74h]@1
  int v8; // [sp+60h] [bp-18h]@1

  v2 = *a1;
  xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>::xbox_live_result(
    (xbox::services::social::xbox_user_profile *)&v7,
    a2);
  pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)#1}::operator() const(
    v2,
    (int)&v7);
  v3 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
  {
    v5 = (unsigned int *)(v8 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 <= 0 )
      j_j_j_j__ZdlPv_9(v3);
  }
  xbox::services::social::xbox_user_profile::~xbox_user_profile((xbox::services::social::xbox_user_profile *)&v7);
  return 0;
}


xbox::services::system::auth_flow_result *__fastcall pplx::task<xbox::services::system::auth_flow_result>::get(xbox::services::system::auth_flow_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::system::auth_flow_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::system::auth_flow_result::auth_flow_result(
           v3,
           (pplx::details::_Task_impl_base *)((char *)*v2 + 80));
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_CancellationTokenCallback<pplx::details::_JoinAllTokens_Add(pplx::cancellation_token_source const&,pplx::details::_CancellationTokenState *)::{lambda(void)#1}>::_Exec(int a1)
{
  j_j_j__ZN4pplx7details23_CancellationTokenState7_CancelEv(*(pplx::details::_CancellationTokenState **)(a1 + 20));
}


void __fastcall pplx::details::_Task_impl<int>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl<int>::~_Task_impl(this);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CreateImpl(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_CancellationTokenCallback<pplx::details::_JoinAllTokens_Add(pplx::cancellation_token_source const&,pplx::details::_CancellationTokenState *)::{lambda(void)#1}>::_Exec(int a1)
{
  pplx::details::_CancellationTokenCallback<pplx::details::_JoinAllTokens_Add(pplx::cancellation_token_source const&,pplx::details::_CancellationTokenState *)::{lambda(void)#1}>::_Exec(a1);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(std::function const&<void ()(pplx::task<web::json::value>)>)::{lambda(pplx::task<web::json::value>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(std::function const&<void ()(pplx::task<web::json::value>)>)::{lambda(pplx::task<web::json::value>)#1}::operator() const(
           a1,
           a2);
}


int __fastcall std::_Function_handler<unsigned char ()(std::string),std::function<unsigned char ()(std::string)> pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}>::_M_invoke(int *a1, int *a2)
{
  int v2; // r0@1
  void *v3; // r0@1
  unsigned int *v5; // r2@3
  signed int v6; // r1@5
  int v7; // [sp+4h] [bp-1Ch]@1

  v2 = *a1;
  v7 = *a2;
  *a2 = (int)&unk_28898CC;
  j_pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}::operator() const(
    v2,
    &v7);
  v3 = (void *)(v7 - 12);
  if ( (int *)(v7 - 12) != &dword_28898C0 )
  {
    v5 = (unsigned int *)(v7 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 <= 0 )
      j_j_j_j__ZdlPv_9(v3);
  }
  return 0;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::set(void ***a1, int a2)
{
  void ***v2; // r8@1
  int v3; // r11@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r10@3
  int v8; // r0@4
  int v9; // r0@8
  int v10; // r3@8
  int v11; // r4@8
  int v12; // r5@8
  int v13; // r6@8
  void **v14; // r0@8
  int *v15; // r4@8
  int *v16; // r11@8
  int *v17; // r9@11
  unsigned int *v18; // r2@15
  signed int v19; // r1@17
  int v20; // r7@23
  void *v21; // r0@25
  void **v22; // r0@28
  void *v23; // r5@29
  unsigned int *v24; // r1@30
  unsigned int v25; // r0@32
  unsigned int *v26; // r6@36
  unsigned int v27; // r0@38
  int *v28; // r6@45
  int v29; // r7@46
  unsigned int *v30; // r1@47
  unsigned int v31; // r0@49
  unsigned int *v32; // r5@53
  unsigned int v33; // r0@55
  char v35; // [sp+8h] [bp-68h]@25
  int v36; // [sp+40h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 44);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 44);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v15 = 0;
      v16 = 0;
      v5 = 0;
    else
      v9 = (int)(v4 + 4);
      v10 = *(_DWORD *)(v3 + 4);
      v11 = *(_DWORD *)(v3 + 8);
      v12 = *(_DWORD *)(v3 + 12);
      v13 = *(_DWORD *)(v3 + 16);
      *(_DWORD *)v9 = *(_DWORD *)v3;
      *(_DWORD *)(v9 + 4) = v10;
      *(_DWORD *)(v9 + 8) = v11;
      *(_DWORD *)(v9 + 12) = v12;
      *(_DWORD *)(v9 + 16) = v13;
      EntityInteraction::setInteractText((int *)v4 + 9, (int *)(v3 + 20));
      EntityInteraction::setInteractText((int *)v4 + 10, (int *)(v3 + 24));
      EntityInteraction::setInteractText((int *)v4 + 11, (int *)(v3 + 28));
      EntityInteraction::setInteractText((int *)v4 + 12, (int *)(v3 + 32));
      EntityInteraction::setInteractText((int *)v4 + 13, (int *)(v3 + 36));
      EntityInteraction::setInteractText((int *)v4 + 14, (int *)(v3 + 40));
      j_web::json::value::operator=((int *)v4 + 15, (int *)(v3 + 44));
      *((_QWORD *)v4 + 8) = *(_QWORD *)(v3 + 48);
      EntityInteraction::setInteractText((int *)v4 + 18, (int *)(v3 + 56));
      *((_BYTE *)*v2 + 88) = 1;
      v14 = *v2;
      v15 = (int *)**v2;
      *v14 = 0;
      v16 = (int *)v14[1];
      v14[1] = 0;
      v14[2] = 0;
      if ( v15 != v16 )
      {
        v17 = v15;
        do
        {
          v20 = *v17;
          if ( *(_DWORD *)(*v17 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v20 + 8))(v20, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>::xbox_live_result(
              (xbox::services::matchmaking::match_ticket_details_response *)&v35,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_FinalizeAndRunContinuations(
              v20,
              (int)&v35);
            v21 = (void *)(v36 - 12);
            if ( (int *)(v36 - 12) != &dword_28898C0 )
            {
              v18 = (unsigned int *)(v36 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v19 = __ldrex(v18);
                while ( __strex(v19 - 1, v18) );
              }
              else
                v19 = (*v18)--;
              if ( v19 <= 0 )
                j_j_j_j__ZdlPv_9(v21);
            }
            j_xbox::services::matchmaking::match_ticket_details_response::~match_ticket_details_response((xbox::services::matchmaking::match_ticket_details_response *)&v35);
          v17 += 2;
        }
        while ( v17 != v16 );
      }
      v22 = *v2;
      if ( (*v2)[20] )
        v22[20] = 0;
        v23 = v22[21];
        v22[21] = 0;
        if ( v23 )
          v24 = (unsigned int *)((char *)v23 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v25 = __ldrex(v24);
            while ( __strex(v25 - 1, v24) );
            v25 = (*v24)--;
          if ( v25 == 1 )
            v26 = (unsigned int *)((char *)v23 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v23 + 8))(v23);
            if ( &pthread_create )
              __dmb();
              do
                v27 = __ldrex(v26);
              while ( __strex(v27 - 1, v26) );
            else
              v27 = (*v26)--;
            if ( v27 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v23 + 12))(v23);
      v5 = 1;
    if ( v15 != v16 )
      v28 = v15;
      do
        v29 = v28[1];
        if ( v29 )
          v30 = (unsigned int *)(v29 + 4);
              v31 = __ldrex(v30);
            while ( __strex(v31 - 1, v30) );
            v31 = (*v30)--;
          if ( v31 == 1 )
            v32 = (unsigned int *)(v29 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
                v33 = __ldrex(v32);
              while ( __strex(v33 - 1, v32) );
              v33 = (*v32)--;
            if ( v33 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
        v28 += 2;
      while ( v28 != v16 );
    if ( v15 )
      j_operator delete(v15);
  }
  return v5;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<void>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<void>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<void>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)#1}::operator() const(int a1, int a2)
{
  int v2; // r4@1
  void (__fastcall *v3)(int, char *); // r5@2
  void *v4; // r0@2
  int v5; // r4@5
  unsigned int *v6; // r1@6
  unsigned int v7; // r0@8
  unsigned int *v8; // r5@12
  unsigned int v9; // r0@14
  void *v10; // r0@19
  int v11; // r4@22
  unsigned int *v12; // r1@23
  unsigned int v13; // r0@25
  unsigned int *v14; // r5@29
  unsigned int v15; // r0@31
  unsigned int *v17; // r2@37
  signed int v18; // r1@39
  unsigned int *v19; // r2@41
  signed int v20; // r1@43
  char v21; // [sp+4h] [bp-6Ch]@1
  int v22; // [sp+8h] [bp-68h]@22
  void *v23; // [sp+Ch] [bp-64h]@20
  int v24; // [sp+10h] [bp-60h]@20
  int v25; // [sp+2Ch] [bp-44h]@19
  char v26; // [sp+30h] [bp-40h]@2
  int v27; // [sp+34h] [bp-3Ch]@5
  void *ptr; // [sp+38h] [bp-38h]@3
  int v29; // [sp+3Ch] [bp-34h]@3
  int v30; // [sp+58h] [bp-18h]@2

  v2 = a1;
  xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>::xbox_live_result(
    (xbox::services::social::xbox_social_relationship_result *)&v21,
    a2);
  if ( !*(_DWORD *)(v2 + 8) )
    sub_21E5F48();
  v3 = *(void (__fastcall **)(int, char *))(v2 + 12);
    (xbox::services::social::xbox_social_relationship_result *)&v26,
    (int)&v21);
  v3(v2, &v26);
  v4 = (void *)(v30 - 12);
  if ( (int *)(v30 - 12) != &dword_28898C0 )
  {
    v17 = (unsigned int *)(v30 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
    }
    else
      v18 = (*v17)--;
    if ( v18 <= 0 )
      j_j_j_j__ZdlPv_9(v4);
  }
  std::_Destroy_aux<false>::__destroy<xbox::services::social::xbox_social_relationship *>((int)ptr, v29);
  if ( ptr )
    operator delete(ptr);
  v5 = v27;
  if ( v27 )
    v6 = (unsigned int *)(v27 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = (void *)(v25 - 12);
  if ( (int *)(v25 - 12) != &dword_28898C0 )
    v19 = (unsigned int *)(v25 - 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 - 1, v19) );
      v20 = (*v19)--;
    if ( v20 <= 0 )
      j_j_j_j__ZdlPv_9(v10);
  std::_Destroy_aux<false>::__destroy<xbox::services::social::xbox_social_relationship *>((int)v23, v24);
  if ( v23 )
    operator delete(v23);
  v11 = v22;
  if ( v22 )
    v12 = (unsigned int *)(v22 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
      v13 = (*v12)--;
    if ( v13 == 1 )
      v14 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
        v15 = (*v14)--;
      if ( v15 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  return 0;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  char v17; // [sp+4h] [bp-6Ch]@7
  int v18; // [sp+58h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 104) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 112) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>::xbox_live_result(
      (int)&v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::achievements::achievements_result::~achievements_result((xbox::services::achievements::achievements_result *)&v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  int v30[46]; // [sp+8h] [bp-E8h]@25
  int v31; // [sp+C0h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 108);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 108);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::tournaments::team_info::operator=((int *)v4 + 4, (int *)v3);
      *((_QWORD *)v4 + 24) = *(_QWORD *)(v3 + 176);
      EntityInteraction::setInteractText((int *)v4 + 50, (int *)(v3 + 184));
      *((_BYTE *)*v2 + 216) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::tournaments::team_info>::xbox_live_result(
              (xbox::services::tournaments::team_info *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::tournaments::team_info::~team_info((xbox::services::tournaments::team_info *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[52] )
        v17[52] = 0;
        v18 = v17[53];
        v17[53] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_FinalizeAndRunContinuations(int a1, unsigned __int64 *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


unsigned int *__fastcall pplx::task<std::shared_ptr<xbox::services::http_call_response>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  pplx::details::_Task_impl_base *v4; // r0@3
  unsigned int *result; // r0@3
  unsigned int v6; // r1@6
  char *v7; // r4@10
  int v8; // r3@10
  char *v9; // r0@12

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26D7A9C;
    sub_21E94B4((void **)v7 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v7,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v8);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v9 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v9 = &off_26DD7D0;
    *((_DWORD *)v9 + 1) = &unk_28898CC;
      (int)v9,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  v4 = *v2;
  *(_DWORD *)v3 = *((_DWORD *)*v2 + 20);
  result = (unsigned int *)*((_DWORD *)v4 + 21);
  *(_DWORD *)(v3 + 4) = result;
  if ( result )
    ++result;
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(result);
      while ( __strex(v6 + 1, result) );
    }
    else
      ++*result;
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::~_Task_impl(a1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


xbox::services::game_server_platform::cluster_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::get(xbox::services::game_server_platform::cluster_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::game_server_platform::cluster_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  j_std::function<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>::operator()(
    a1,
    (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[29]; // [sp+4h] [bp-8Ch]@7
  int v18; // [sp+78h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 136) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 144) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>::xbox_live_result(
      (xbox::services::leaderboard::leaderboard_result *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::leaderboard::leaderboard_result::~leaderboard_result((xbox::services::leaderboard::leaderboard_result *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::~_Task_impl(a1);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@6
  int v8; // r5@10
  void *v9; // r0@10
  int v10; // r5@11
  unsigned int *v11; // r1@12
  unsigned int v12; // r0@14
  int v13; // r1@16 OVERLAPPED
  int v14; // r2@16
  int v15; // r2@17
  unsigned int *v16; // r1@18
  unsigned int v17; // r2@20
  unsigned int *v18; // r6@24
  unsigned int v19; // r0@26
  unsigned int *v20; // r2@34
  signed int v21; // r1@36
  char v22; // [sp+4h] [bp-2Ch]@10
  int v23; // [sp+8h] [bp-28h]@11
  int v24; // [sp+14h] [bp-1Ch]@10

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 36) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 44) )
    v8 = *v2;
    j_xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>::xbox_live_result(
      (int)&v22,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_FinalizeAndRunContinuations(
      v8,
      (int)&v22);
    v9 = (void *)(v24 - 12);
    if ( (int *)(v24 - 12) != &dword_28898C0 )
    {
      v20 = (unsigned int *)(v24 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v21 = __ldrex(v20);
        while ( __strex(v21 - 1, v20) );
      }
      else
        v21 = (*v20)--;
      if ( v21 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
    }
    v10 = v23;
    if ( v23 )
      v11 = (unsigned int *)(v23 + 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        v18 = (unsigned int *)(v10 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
        if ( &pthread_create )
        {
          __dmb();
          do
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
        }
        else
          v19 = (*v18)--;
        if ( v19 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  else
    *(_QWORD *)&v13 = *(_QWORD *)(v4 + 4);
    if ( v13 == v14 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v13 = *v2;
      v15 = v2[1];
      *(_DWORD *)(v13 + 4) = v15;
      if ( v15 )
        v16 = (unsigned int *)(v15 + 4);
            v17 = __ldrex(v16);
          while ( __strex(v17 + 1, v16) );
          ++*v16;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


void __fastcall __noreturn pplx::task_completion_event<void>::set_exception<std::runtime_error>(int a1, int a2)
{
  void **v2; // [sp+10h] [bp-20h]@1
  int v3; // [sp+14h] [bp-1Ch]@1
  char v4; // [sp+18h] [bp-18h]@2

  v2 = &off_2773798;
  sub_21E8AF4(&v3, (int *)(a2 + 4));
  j_std::make_exception_ptr<std::runtime_error>((int)&v4, (int)&v2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::~_Task_impl(a1);
  j_j_j__ZdlPv_5((void *)v1);
}


int __fastcall pplx::details::_Task_impl<std::error_code>::_FinalizeAndRunContinuations(int a1, int a2, int a3)
{
  int v3; // r4@1
  pthread_mutex_t *v4; // r5@1
  int v5; // r0@1
  int result; // r0@3
  int v7; // r0@4
  int v8; // r1@5
  int v9; // r5@6

  v3 = a1;
  v4 = (pthread_mutex_t *)(a1 + 20);
  *(_QWORD *)(a1 + 80) = *(_QWORD *)&a2;
  v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(a1 + 20));
  if ( v5 )
    sub_21E5E14(v5);
  if ( *(_DWORD *)(v3 + 4) == 4 )
  {
    result = j_pthread_mutex_unlock_1(v4);
  }
  else
    *(_DWORD *)(v3 + 4) = 3;
    j_pthread_mutex_unlock_1(v4);
    v7 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v3 + 36));
    if ( v7 )
      sub_21E5E14(v7);
    *(_BYTE *)(v3 + 44) = 1;
    sub_21E03D8((pthread_cond_t *)(v3 + 40));
    j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 36));
    v8 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v8 )
    {
      do
      {
        v9 = *(_DWORD *)(v8 + 4);
        result = j_pplx::details::_Task_impl_base::_RunContinuation(v3, v8);
        v8 = v9;
      }
      while ( v9 );
    }
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r12@1
  int v5; // r1@1
  int v6; // r2@1
  int v7; // r3@1
  int v8; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v10; // r0@8
  int v11; // r1@12
  int v12; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  *(_DWORD *)(v2 + 84) = v3[1];
  EntityInteraction::setInteractText((int *)(v2 + 88), v3 + 2);
  EntityInteraction::setInteractText((int *)(v2 + 92), v3 + 3);
  EntityInteraction::setInteractText((int *)(v2 + 96), v3 + 4);
  v4 = v2 + 104;
  v5 = v3[7];
  v6 = v3[8];
  v7 = v3[9];
  *(_DWORD *)v4 = v3[6];
  *(_DWORD *)(v4 + 4) = v5;
  *(_DWORD *)(v4 + 8) = v6;
  *(_DWORD *)(v4 + 12) = v7;
  *(_QWORD *)(v2 + 120) = *((_QWORD *)v3 + 5);
  EntityInteraction::setInteractText((int *)(v2 + 128), v3 + 12);
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v8 )
      sub_21E5E14(v8);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v10 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v10 )
        sub_21E5E14(v10);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v11 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v11 )
      do
      {
        v12 = *(_DWORD *)(v11 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v11);
        v11 = v12;
      }
      while ( v12 );
  return result;
}


int *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_GetResult(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r6@1

  v2 = a2;
  v3 = a1;
  v4 = ((int (*)(void))byte_21E9640)();
  j___aeabi_memclr4_1(v3, 64);
  *(_DWORD *)(v3 + 64) = v4;
  *(_DWORD *)(v3 + 68) = &unk_28898CC;
  j_std::vector<xbox::services::system::fqdn_nsal_endpoint,std::allocator<xbox::services::system::fqdn_nsal_endpoint>>::operator=(
    v3,
    (unsigned __int64 *)(v2 + 80));
  j_std::vector<xbox::services::system::wildcard_nsal_endpoint,std::allocator<xbox::services::system::wildcard_nsal_endpoint>>::operator=(
    v3 + 12,
    (unsigned __int64 *)(v2 + 92));
  j_std::vector<xbox::services::system::ip_nsal_endpoint,std::allocator<xbox::services::system::ip_nsal_endpoint>>::operator=(
    v3 + 24,
    (unsigned __int64 *)(v2 + 104));
  j_std::vector<xbox::services::system::cidr_nsal_endpoint,std::allocator<xbox::services::system::cidr_nsal_endpoint>>::operator=(
    v3 + 36,
    (unsigned __int64 *)(v2 + 116));
  j_std::vector<xbox::services::system::signature_policy,std::allocator<xbox::services::system::signature_policy>>::operator=(
    v3 + 48,
    (unsigned __int64 *)(v2 + 128));
  *(_QWORD *)(v3 + 60) = *(_QWORD *)(v2 + 140);
  return EntityInteraction::setInteractText((int *)(v3 + 68), (int *)(v2 + 148));
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int __fastcall std::_Function_handler<unsigned char ()(Social::XboxProfile),std::function<unsigned char ()(Social::XboxProfile)> pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(std::function const&<void ()(Social::XboxProfile)>)::{lambda(Social::XboxProfile)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  __int64 v3; // kr00_8@1
  int v5; // [sp+0h] [bp-38h]@1
  int v6; // [sp+4h] [bp-34h]@1
  int v7; // [sp+8h] [bp-30h]@1
  int v8; // [sp+Ch] [bp-2Ch]@1
  int v9; // [sp+10h] [bp-28h]@1
  __int64 v10; // [sp+14h] [bp-24h]@1
  int v11; // [sp+1Ch] [bp-1Ch]@1
  int v12; // [sp+20h] [bp-18h]@1
  int v13; // [sp+24h] [bp-14h]@1
  int v14; // [sp+28h] [bp-10h]@1
  int v15; // [sp+2Ch] [bp-Ch]@1

  v2 = *a1;
  v5 = *(_DWORD *)a2;
  *(_DWORD *)a2 = &unk_28898CC;
  v6 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = &unk_28898CC;
  v7 = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(a2 + 8) = &unk_28898CC;
  v8 = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(a2 + 12) = &unk_28898CC;
  v9 = *(_DWORD *)(a2 + 16);
  *(_DWORD *)(a2 + 16) = &unk_28898CC;
  v3 = *(_QWORD *)(a2 + 20);
  v11 = *(_DWORD *)(a2 + 28);
  v10 = v3;
  v12 = *(_DWORD *)(a2 + 32);
  *(_DWORD *)(a2 + 32) = &unk_28898CC;
  v13 = *(_DWORD *)(a2 + 36);
  *(_DWORD *)(a2 + 36) = &unk_28898CC;
  v14 = *(_DWORD *)(a2 + 40);
  *(_DWORD *)(a2 + 40) = &unk_28898CC;
  v15 = *(_DWORD *)(a2 + 44);
  pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(std::function const&<void ()(Social::XboxProfile)>)::{lambda(Social::XboxProfile)#1}::operator() const(
    v2,
    (const Social::XboxProfile *)&v5);
  Social::XboxProfile::~XboxProfile((Social::XboxProfile *)&v5);
  return 0;
}


signed int __fastcall pplx::details::_Task_impl<int>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r6@5
  int v12; // r8@5
  unsigned int *v13; // r0@7
  unsigned int v14; // r1@9
  bool v15; // zf@11
  signed __int64 v16; // r6@16
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = pthread_mutex_lock(v6);
    if ( v9 )
      sub_119CCFC(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v15 = v10 == 3;
    if ( v10 != 3 )
      v15 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v15 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v16 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
        v11 = *(_DWORD *)(v5 + 16);
      }
      else
        ++*v13;
    }
    if ( v11 )
      v17 = (unsigned int *)(v11 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    *(_DWORD *)(v5 + 16) = v12;
LABEL_33:
  if ( v8 == 1 )
    v16 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v16 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    pthread_mutex_unlock(v6);
  if ( v16 )
    result = v16 ^ 1;
    if ( &pthread_create )
      v23 = pthread_mutex_lock((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_119CCFC(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v5 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<int>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<int>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = operator new(0x10u);
      v26[2] = 0;
      v27 = operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<int>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<int>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


unsigned int *__fastcall pplx::details::_CancellationTokenRegistration::_Invoke(pplx::details::_CancellationTokenRegistration *this)
{
  pplx::details::_CancellationTokenRegistration *v1; // r4@1
  unsigned int *v2; // r6@1
  unsigned int v3; // r5@1
  unsigned int v4; // r0@2
  unsigned int v5; // r0@5
  signed int v6; // r1@7
  int v7; // r5@13
  int v8; // r0@14
  unsigned int *result; // r0@18
  unsigned int v10; // r1@19

  v1 = this;
  v2 = (unsigned int *)((char *)this + 8);
  v3 = pplx::details::platform::GetCurrentThreadId();
  __dmb();
  do
  {
    v4 = __ldrex(v2);
    if ( v4 )
    {
      __clrex();
      __dmb();
      goto LABEL_18;
    }
  }
  while ( __strex(v3, v2) );
  (*(void (__fastcall **)(pplx::details::_CancellationTokenRegistration *))(*(_DWORD *)v1 + 12))(v1);
  while ( 1 )
    v5 = __ldrex(v2);
    if ( v5 != v3 )
      break;
    if ( !__strex(3u, v2) )
      v6 = 1;
      goto LABEL_10;
  __clrex();
  v6 = 0;
LABEL_10:
  if ( v6 )
    v5 = v3;
  if ( v5 == 2 )
    v7 = *((_DWORD *)v1 + 3);
    if ( &pthread_create )
      v8 = pthread_mutex_lock(*((pthread_mutex_t **)v1 + 3));
      if ( v8 )
        sub_119CCFC(v8);
      *(_BYTE *)(v7 + 8) = 1;
      sub_119E3C8((pthread_cond_t *)(v7 + 4));
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)v7);
    else
LABEL_18:
  result = (unsigned int *)((char *)v1 + 4);
    v10 = __ldrex(result);
  while ( __strex(v10 - 1, result) );
  if ( v10 == 1 )
    result = (unsigned int *)(*(int (__fastcall **)(pplx::details::_CancellationTokenRegistration *))(*(_DWORD *)v1 + 8))(v1);
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27678E8;
  v12 = j_xbox::services::tournaments::tournament::tournament((xbox::services::tournaments::tournament *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 224) = 0;
  *(_DWORD *)(v3 + 228) = v13;
  *(_DWORD *)(v3 + 232) = &unk_28898CC;
  return v3;
}


void __fastcall pplx::invalid_operation::~invalid_operation(pplx::invalid_operation *this)
{
  pplx::invalid_operation::~invalid_operation(this);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a2;
  v3 = a1;
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  EntityInteraction::setInteractText((int *)(a1 + 84), (int *)(a2 + 4));
  EntityInteraction::setInteractText((int *)(v3 + 88), (int *)(v2 + 8));
  EntityInteraction::setInteractText((int *)(v3 + 92), (int *)(v2 + 12));
  EntityInteraction::setInteractText((int *)(v3 + 96), (int *)(v2 + 16));
  EntityInteraction::setInteractText((int *)(v3 + 100), (int *)(v2 + 20));
  EntityInteraction::setInteractText((int *)(v3 + 104), (int *)(v2 + 24));
  EntityInteraction::setInteractText((int *)(v3 + 108), (int *)(v2 + 28));
  EntityInteraction::setInteractText((int *)(v3 + 112), (int *)(v2 + 32));
  EntityInteraction::setInteractText((int *)(v3 + 116), (int *)(v2 + 36));
  *(_QWORD *)(v3 + 120) = *(_QWORD *)(v2 + 40);
  EntityInteraction::setInteractText((int *)(v3 + 128), (int *)(v2 + 48));
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v3 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v3 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 36));
    }
    else
    v7 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int __fastcall pplx::task_completion_event<std::string>::~task_completion_event(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 4);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  return v1;
}


int __fastcall std::_Function_handler<std::error_code ()(unsigned char),std::function<std::error_code ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::error_code>(std::function const&<std::error_code ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke(int a1, int *a2)
{
  int v2; // r1@1

  v2 = *a2;
  if ( !*(_DWORD *)(v2 + 8) )
    sub_21E5F48();
  return (*(int (**)(void))(v2 + 12))();
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  unsigned int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-B8h]@10
  int v33; // [sp+4h] [bp-B4h]@10
  int v34; // [sp+8h] [bp-B0h]@16
  int v35; // [sp+Ch] [bp-ACh]@20
  char v36; // [sp+14h] [bp-A4h]@20
  int v37; // [sp+18h] [bp-A0h]@20
  void *ptr; // [sp+1Ch] [bp-9Ch]@20
  int v39; // [sp+20h] [bp-98h]@20
  int v40; // [sp+24h] [bp-94h]@20
  char v41; // [sp+28h] [bp-90h]@20
  char v42; // [sp+29h] [bp-8Fh]@20
  int v43; // [sp+30h] [bp-88h]@4
  int v44; // [sp+34h] [bp-84h]@4
  char v45; // [sp+38h] [bp-80h]@3
  int v46; // [sp+94h] [bp-24h]@3
  int v47; // [sp+98h] [bp-20h]@1
  int v48; // [sp+9Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_6social17xbox_user_profileEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>::xbox_live_result(
    (xbox::services::social::xbox_user_profile *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::social::xbox_user_profile::~xbox_user_profile((xbox::services::social::xbox_user_profile *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


xbox::services::presence::presence_record *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::get(xbox::services::presence::presence_record *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::presence::presence_record *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  *(_QWORD *)(v2 + 84) = *(_QWORD *)(v3 + 1);
  EntityInteraction::setInteractText((int *)(v2 + 92), v3 + 3);
  if ( &pthread_create )
  {
    v4 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultISt10shared_ptrINS8_18http_call_responseEEEEEESaISE_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::details::_Task_impl_base::_RegisterCancellation(std::weak_ptr<pplx::details::_Task_impl_base>)::{lambda(void)#1}::operator() const(int result)
{
  int v1; // r4@1
  unsigned int v2; // r1@2
  unsigned int *v3; // r6@2
  unsigned int v4; // r2@5
  unsigned int v5; // r3@6
  bool v6; // zf@7
  unsigned int *v7; // r5@17

  v1 = *(_DWORD *)(result + 4);
  if ( v1 )
  {
    v2 = *(_DWORD *)(v1 + 4);
    v3 = (unsigned int *)(v1 + 4);
    while ( v2 )
    {
      __dmb();
      v4 = __ldrex(v3);
      if ( v4 == v2 )
      {
        v5 = __strex(v2 + 1, v3);
        v2 = v4;
        if ( !v5 )
        {
          __dmb();
          v6 = *v3 == 0;
          if ( *v3 )
          {
            result = *(_DWORD *)result;
            v6 = result == 0;
          }
          if ( !v6 )
            (*(void (__cdecl **)(int))(*(_DWORD *)result + 8))(result);
          if ( &pthread_create )
            __dmb();
            do
              result = __ldrex(v3);
            while ( __strex(result - 1, v3) );
          else
            result = (*v3)--;
          if ( result == 1 )
            v7 = (unsigned int *)(v1 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v1 + 8))(v1);
            if ( &pthread_create )
            {
              __dmb();
              do
                result = __ldrex(v7);
              while ( __strex(result - 1, v7) );
            }
            else
              result = (*v7)--;
            if ( result == 1 )
              result = (*(int (__fastcall **)(int))(*(_DWORD *)v1 + 12))(v1);
          return result;
        }
      }
      else
        __clrex();
    }
  }
  return result;
}


void __fastcall pplx::details::_Task_impl<std::error_code>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = this;
  *(_DWORD *)this = &off_276DE9C;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  j_j_j__ZdlPv_8((void *)v1);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7((void *)v1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::system::token_and_signature_result::token_and_signature_result((xbox::services::system::token_and_signature_result *)(a1 + 20));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 60) = v3;
  *(_DWORD *)(v1 + 64) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 76) = 0;
  *(_DWORD *)(v1 + 68) = 0;
  *(_DWORD *)(v1 + 72) = 0;
  return result;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::title_storage::title_storage_blob_metadata::title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 72) = 0;
  *(_DWORD *)(v1 + 76) = v3;
  *(_DWORD *)(v1 + 80) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 96) = 0;
  *(_DWORD *)(v1 + 88) = 0;
  *(_DWORD *)(v1 + 92) = 0;
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  *(_DWORD *)(v2 + 84) = v3[1];
  j_std::vector<xbox::services::presence::presence_device_record,std::allocator<xbox::services::presence::presence_device_record>>::operator=(
    v2 + 88,
    (unsigned __int64 *)v3 + 1);
  *(_QWORD *)(v2 + 100) = *(_QWORD *)(v3 + 5);
  EntityInteraction::setInteractText((int *)(v2 + 108), v3 + 7);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r4@26
  unsigned int v16; // r0@28
  int v17; // r5@33
  int v18; // r7@33
  int v19; // r4@34
  unsigned int *v20; // r1@35
  unsigned int v21; // r0@37
  unsigned int *v22; // r6@41
  unsigned int v23; // r0@43
  unsigned int *v25; // r2@53
  signed int v26; // r1@55

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 10);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 8);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v25 = (unsigned int *)(v10 - 4);
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
      v26 = (*v25)--;
    if ( v26 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = *((_DWORD *)v1 + 5);
  if ( v12 )
    v13 = (unsigned int *)(v12 + 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      v14 = (*v13)--;
    if ( v14 == 1 )
      v15 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        v16 = (*v15)--;
      if ( v16 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  v18 = *v1 >> 32;
  v17 = *v1;
  if ( v17 != v18 )
    do
      v19 = *(_DWORD *)(v17 + 4);
      if ( v19 )
        v20 = (unsigned int *)(v19 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
        }
        else
          v21 = (*v20)--;
        if ( v21 == 1 )
          v22 = (unsigned int *)(v19 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
          if ( &pthread_create )
          {
            __dmb();
            do
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
          }
          else
            v23 = (*v22)--;
          if ( v23 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
      v17 += 8;
    while ( v17 != v18 );
    v17 = *(_DWORD *)v1;
  if ( v17 )
    j_operator delete((void *)v17);
  return v1;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::task_completion_event<std::string>::set_exception<web::websockets::client::websocket_exception>(int a1, int a2)
{
  int result; // r0@3
  void **v7; // [sp+10h] [bp-30h]@1
  __int64 v8; // [sp+14h] [bp-2Ch]@1
  int v9; // [sp+1Ch] [bp-24h]@1
  char v10; // [sp+20h] [bp-20h]@2

  v7 = &off_276C1E0;
  v8 = *(_QWORD *)(a2 + 4);
  sub_21E8AF4(&v9, (int *)(a2 + 12));
  j_std::make_exception_ptr<web::websockets::client::websocket_exception>((int)&v10, (int)&v7);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


void __fastcall pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::~_Task_impl(a1);
  j_j_j__ZdlPv_8((void *)v1);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_2763444;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 240);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::achievements::achievement::~achievement((xbox::services::achievements::achievement *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::get(xbox::services::tournaments::tournament_request_result *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::get(
           a1,
           a2);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_RegisterTask(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  j_std::function<void ()(std::shared_ptr<xbox::services::http_call_response>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_20game_server_platform17allocation_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<web::http::http_response>),std::function<unsigned char ()(pplx::task<web::http::http_response>)> pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(std::function const&<void ()(pplx::task<web::http::http_response>)>)::{lambda(pplx::task<web::http::http_response>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(std::function const&<void ()(pplx::task<web::http::http_response>)>)::{lambda(pplx::task<web::http::http_response>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelInternal(void ***a1)
{
  void ***v1; // r6@1
  void **v2; // r0@1
  signed int v3; // r9@2
  pthread_mutex_t *v4; // r7@3
  int v5; // r0@4
  _DWORD *v6; // r8@6
  _DWORD *v7; // r10@6
  void **v8; // r0@7
  _DWORD *v9; // r5@12
  void **v10; // r1@15
  _DWORD *v11; // r5@18
  int v12; // r6@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r4@26
  unsigned int v16; // r0@28

  v1 = a1;
  v2 = *a1;
  if ( *((_BYTE *)v2 + 97) )
  {
    v3 = 0;
  }
  else
    v4 = (pthread_mutex_t *)(v2 + 3);
    if ( !&pthread_create )
      goto LABEL_40;
    v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 3));
    if ( v5 )
      sub_21E5E14(v5);
    v2 = *v1;
    if ( *((_BYTE *)*v1 + 97) )
    {
      v6 = 0;
      v7 = 0;
      v3 = 0;
    }
    else
LABEL_40:
      v3 = 1;
      *((_BYTE *)v2 + 97) = 1;
      v8 = *v1;
      v6 = **v1;
      *v8 = 0;
      v7 = v8[1];
      v8[1] = 0;
      v8[2] = 0;
    if ( &pthread_create )
      j_pthread_mutex_unlock_1(v4);
    if ( v6 != v7 && v3 == 1 )
      v9 = v6;
      if ( (*v1)[22] )
      {
        while ( 1 )
        {
          (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*v9 + 8))(*v9);
          v9 += 2;
          if ( v7 == v9 )
            break;
          v10 = *v1;
        }
      }
      else
        do
        while ( v7 != v9 );
    if ( v6 != v7 )
      v11 = v6;
      do
        v12 = v11[1];
        if ( v12 )
          v13 = (unsigned int *)(v12 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v14 = __ldrex(v13);
            while ( __strex(v14 - 1, v13) );
          }
          else
            v14 = (*v13)--;
          if ( v14 == 1 )
            v15 = (unsigned int *)(v12 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
            if ( &pthread_create )
            {
              __dmb();
              do
                v16 = __ldrex(v15);
              while ( __strex(v16 - 1, v15) );
            }
            else
              v16 = (*v15)--;
            if ( v16 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
        v11 += 2;
      while ( v11 != v7 );
    if ( v6 )
      j_operator delete(v6);
  return v3;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>(int a1, int a2, int a3)
{
  int v3; // r8@1
  int v4; // r9@1
  int v5; // r6@1
  _DWORD *v6; // r7@1
  __int64 v7; // r0@1
  int *v8; // r0@1
  int v9; // r0@1
  int v10; // r0@1
  char *v11; // r0@1
  unsigned int *v12; // r0@3
  unsigned int v13; // r1@5
  int v14; // r0@8
  unsigned int *v15; // r0@9
  unsigned int v16; // r1@11
  int v17; // r0@14
  unsigned int *v18; // r1@15
  unsigned int v19; // r2@16
  __int16 v20; // r0@18
  int v21; // r0@20
  unsigned int *v22; // r1@21
  unsigned int v23; // r2@22
  int result; // r0@25
  int v25; // r4@25
  unsigned int *v26; // r1@26
  unsigned int *v27; // r5@32
  int v28; // r4@39
  unsigned int *v29; // r1@40
  unsigned int *v30; // r5@46
  int v31; // r4@53
  unsigned int *v32; // r1@54
  unsigned int *v33; // r5@60
  unsigned int *v34; // r2@68
  signed int v35; // r1@70
  int v36; // [sp+0h] [bp-A0h]@8
  int v37; // [sp+4h] [bp-9Ch]@8
  int v38; // [sp+8h] [bp-98h]@14
  int v39; // [sp+Ch] [bp-94h]@18
  char v40; // [sp+14h] [bp-8Ch]@18
  int v41; // [sp+18h] [bp-88h]@18
  void *ptr; // [sp+1Ch] [bp-84h]@18
  int v43; // [sp+20h] [bp-80h]@18
  int v44; // [sp+24h] [bp-7Ch]@18
  char v45; // [sp+28h] [bp-78h]@18
  char v46; // [sp+29h] [bp-77h]@18
  int v47; // [sp+30h] [bp-70h]@2
  int v48; // [sp+34h] [bp-6Ch]@2
  char v49; // [sp+38h] [bp-68h]@1
  void *v50; // [sp+64h] [bp-3Ch]@1
  int v51; // [sp+68h] [bp-38h]@1
  int v52; // [sp+6Ch] [bp-34h]@1
  char *v53; // [sp+70h] [bp-30h]@1
  int v54; // [sp+78h] [bp-28h]@1
  int v55; // [sp+7Ch] [bp-24h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v54 = 0;
  v55 = 0;
  v6 = j_operator new(0x64u);
  HIDWORD(v7) = 1;
  LODWORD(v7) = &off_2767CA8;
  *(_QWORD *)v6 = v7;
  v6[2] = 1;
  v6[3] = 0;
  v6[4] = 0;
  v6[5] = 0;
  v6[6] = 0;
  j___aeabi_memclr4_1((int)(v6 + 7), 44);
  v6[18] = &unk_28898CC;
  v8 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&unk_28898CC);
  v6[19] = 0;
  v6[20] = v8;
  v6[21] = &unk_28898CC;
  *((_WORD *)v6 + 48) = 0;
  v6[22] = 0;
  v6[23] = 0;
  v9 = *v6;
  v55 = (int)v6;
  v54 = (*(int (__fastcall **)(_DWORD *, void **))(v9 + 16))(v6, &`typeinfo for'std::_Sp_make_shared_tag);
  v10 = j___aeabi_memclr8_1((int)&v49, 44);
  v50 = &unk_28898CC;
  v51 = 0;
  v52 = ((int (__fastcall *)(int))byte_21E9640)(v10);
  v53 = (char *)&unk_28898CC;
  j_xbox::services::tournaments::team_request_result::operator=((int)&v49, v5);
  *(_QWORD *)&v51 = *(_QWORD *)(v5 + 48);
  EntityInteraction::setInteractText((int *)&v53, (int *)(v5 + 56));
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::set(
    (void ***)&v54,
    (int)&v49);
  v11 = v53 - 12;
  if ( (int *)(v53 - 12) != &dword_28898C0 )
  {
    v34 = (unsigned int *)(v53 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v35 = __ldrex(v34);
      while ( __strex(v35 - 1, v34) );
    }
    else
      v35 = (*v34)--;
    if ( v35 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  }
  j_xbox::services::tournaments::team_request_result::~team_request_result((xbox::services::tournaments::team_request_result *)&v49);
  v47 = v54;
  v48 = v55;
  if ( v55 )
    v12 = (unsigned int *)(v55 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 + 1, v12) );
      ++*v12;
  v36 = *(_DWORD *)v4;
  v14 = *(_DWORD *)(v4 + 4);
  v37 = v14;
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 + 1, v15) );
      ++*v15;
  v38 = *(_DWORD *)(v4 + 8);
  v17 = *(_DWORD *)(v4 + 12);
  if ( v17 )
    v18 = (unsigned int *)(v17 + 4);
    __dmb();
    do
      v19 = __ldrex(v18);
    while ( __strex(v19 + 1, v18) );
  v39 = v17;
  v43 = 0;
  v44 = 0;
  v41 = 0;
  ptr = 0;
  v40 = 0;
  v20 = *(_WORD *)(v4 + 40);
  v45 = *(_WORD *)(v4 + 40);
  v46 = HIBYTE(v20);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>(
    v3,
    (int)&v47,
    (int)&v36);
  if ( ptr )
    j_operator delete(ptr);
  v21 = v39;
  if ( v39 )
    v22 = (unsigned int *)(v39 + 4);
      v23 = __ldrex(v22);
    while ( __strex(v23 - 1, v22) );
    if ( v23 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v21 + 8))(v21);
  result = 0;
  v39 = 0;
  v25 = v37;
  if ( v37 )
    v26 = (unsigned int *)(v37 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
    if ( result == 1 )
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
      }
      else
        result = (*v27)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  v28 = v48;
  if ( v48 )
    v29 = (unsigned int *)(v48 + 4);
        result = __ldrex(v29);
      while ( __strex(result - 1, v29) );
      result = (*v29)--;
      v30 = (unsigned int *)(v28 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
          result = __ldrex(v30);
        while ( __strex(result - 1, v30) );
        result = (*v30)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
  v31 = v55;
    v32 = (unsigned int *)(v55 + 4);
        result = __ldrex(v32);
      while ( __strex(result - 1, v32) );
      result = (*v32)--;
      v33 = (unsigned int *)(v31 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 8))(v31);
          result = __ldrex(v33);
        while ( __strex(result - 1, v33) );
        result = (*v33)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v31 + 12))(v31);
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<int>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<int>),std::function<unsigned char ()(pplx::task<int>)> pplx::details::_MakeTToUnitFunc<pplx::task<int>>(std::function const&<void ()(pplx::task<int>)>)::{lambda(pplx::task<int>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<int>)> pplx::details::_MakeTToUnitFunc<pplx::task<int>>(std::function const&<void ()(pplx::task<int>)>)::{lambda(pplx::task<int>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


unsigned int __fastcall pplx::task<bool>::then<Concurrency::streams::details::streambuf_state_manager<char>::sync(void)::{lambda(bool)#2}>(int a1, int *a2, int a3)
{
  return pplx::task<bool>::then<Concurrency::streams::details::streambuf_state_manager<char>::sync(void)::{lambda(bool)#2}>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_FinalizeAndRunContinuations(int a1, unsigned __int64 *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<std::string>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 6);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 4);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v11);
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    operator delete((void *)v12);
  return v1;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_Task_impl(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CreateImpl(
           a1,
           a2,
           a3);
}


xbox::services::title_storage::title_storage_quota *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::get(xbox::services::title_storage::title_storage_quota *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::title_storage::title_storage_quota *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2764B9C;
  v12 = (xbox::services *)j_xbox::services::user_statistics::user_statistics_result::user_statistics_result((xbox::services::user_statistics::user_statistics_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 96) = 0;
  *(_DWORD *)(v3 + 100) = v13;
  *(_DWORD *)(v3 + 104) = &unk_28898CC;
  return v3;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27646C4;
  v12 = j_xbox::services::social::xbox_user_profile::xbox_user_profile((xbox::services::social::xbox_user_profile *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 164) = 0;
  *(_DWORD *)(v3 + 168) = v13;
  *(_DWORD *)(v3 + 172) = &unk_28898CC;
  return v3;
}


xbox::services::privacy::permission_check_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::get(xbox::services::privacy::permission_check_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::privacy::permission_check_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::details::_Task_impl<bool>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r6@5
  int v12; // r8@5
  unsigned int *v13; // r0@7
  unsigned int v14; // r1@9
  bool v15; // zf@11
  signed __int64 v16; // r6@16
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = pthread_mutex_lock(v6);
    if ( v9 )
      sub_119CCFC(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v15 = v10 == 3;
    if ( v10 != 3 )
      v15 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v15 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v16 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
        v11 = *(_DWORD *)(v5 + 16);
      }
      else
        ++*v13;
    }
    if ( v11 )
      v17 = (unsigned int *)(v11 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    *(_DWORD *)(v5 + 16) = v12;
LABEL_33:
  if ( v8 == 1 )
    v16 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v16 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    pthread_mutex_unlock(v6);
  if ( v16 )
    result = v16 ^ 1;
    if ( &pthread_create )
      v23 = pthread_mutex_lock((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_119CCFC(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v5 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<bool>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<bool>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = operator new(0x10u);
      v26[2] = 0;
      v27 = operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<bool>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<bool>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}::operator() const(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::~_Task_impl(a1);
}


int *__fastcall pplx::task<bool>::task<pplx::task_completion_event<bool>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  pplx::task<bool>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_119C874();
      v28 = operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      _aeabi_memmove4(v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  pplx::task_completion_event<bool>::_RegisterTask((_DWORD *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_RegisterTask(
           a1,
           a2);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6system12token_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#2}>(int a1, int *a2, int a3, int a4)
{
  pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#2}>(
    a1,
    a2,
    a3,
    a4);
}


int (**__fastcall pplx::details::_Task_impl_base::_ScheduleContinuation(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  pthread_mutex_t *v3; // r6@1
  int v4; // r4@1
  int v5; // r0@2
  signed int v6; // r7@4
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@13
  unsigned int *v8; // r1@19
  int v9; // r5@23
  unsigned int *v10; // r1@24
  unsigned int v11; // r0@26
  unsigned int *v12; // r1@29
  unsigned int v13; // r0@31
  unsigned int *v14; // r6@35
  unsigned int v15; // r0@37
  int (__fastcall *v16)(int); // r1@48
  unsigned int *v17; // r5@53
  int v18; // [sp+4h] [bp-2Ch]@28
  int v19; // [sp+8h] [bp-28h]@28
  int v20; // [sp+Ch] [bp-24h]@23
  int v21; // [sp+10h] [bp-20h]@23
  int v22; // [sp+14h] [bp-1Ch]@18
  int v23; // [sp+18h] [bp-18h]@18

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 20);
  v4 = a2;
  if ( &pthread_create )
  {
    v5 = pthread_mutex_lock(v3);
    if ( v5 )
      sub_DA7664(v5);
  }
  if ( *(_DWORD *)(v2 + 4) == 3 )
    v6 = 1;
  else if ( *(_DWORD *)(v2 + 4) == 4 && *(_BYTE *)(v4 + 9) )
  else if ( *(_DWORD *)(v2 + 4) == 4 )
    v6 = 2;
    if ( *(_DWORD *)(v2 + 12) )
      v6 = 3;
  else
    v6 = 0;
    *(_DWORD *)(v4 + 4) = *(_DWORD *)(v2 + 32);
    *(_DWORD *)(v2 + 32) = v4;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v3);
  if ( v6 == 3 )
    (*(void (__fastcall **)(int *, int))(*(_DWORD *)v4 + 12))(&v18, v4);
    (*(void (__cdecl **)(int))(*(_DWORD *)v18 + 8))(v18);
    v9 = v19;
    if ( v19 )
    {
      v12 = (unsigned int *)(v19 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        v14 = (unsigned int *)(v9 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
        if ( &pthread_create )
        {
          __dmb();
          do
            v15 = __ldrex(v14);
          while ( __strex(v15 - 1, v14) );
LABEL_46:
          if ( v15 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
          goto LABEL_48;
        }
LABEL_45:
        v15 = (*v14)--;
        goto LABEL_46;
    }
LABEL_48:
    v16 = *(int (__fastcall **)(int))(*(_DWORD *)v4 + 4);
    return (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))v16(v4);
  if ( v6 == 2 )
    (*(void (__fastcall **)(int *, int))(*(_DWORD *)v4 + 12))(&v20, v4);
    (*(void (__cdecl **)(int))(*(_DWORD *)v20 + 8))(v20);
    v9 = v21;
    if ( v21 )
      v10 = (unsigned int *)(v21 + 4);
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
        v11 = (*v10)--;
      if ( v11 == 1 )
          goto LABEL_46;
        goto LABEL_45;
    goto LABEL_48;
  if ( v6 == 1 )
    (*(void (__fastcall **)(int *, _DWORD))(*(_DWORD *)v4 + 12))(&v22, v4);
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_ScheduleTask(
                                                                                         v22,
                                                                                         v4,
                                                                                         *(_DWORD *)(v4 + 12));
    v4 = v23;
    if ( v23 )
      v8 = (unsigned int *)(v23 + 4);
          result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))__ldrex(v8);
        while ( __strex((unsigned int)result - 1, v8) );
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))(*v8)--;
      if ( result == (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))1 )
        v17 = (unsigned int *)(v4 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
            result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))__ldrex(v17);
          while ( __strex((unsigned int)result - 1, v17) );
        else
          result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))(*v17)--;
        if ( result == (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))1 )
          v16 = *(int (__fastcall **)(int))(*(_DWORD *)v4 + 12);
          return (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))v16(v4);
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(
           a1,
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::set(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<web::http::http_response>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@5
  int *result; // r0@7
  int v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int *v14; // r5@11
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    __dmb();
    do
      v10 = __ldrex(v9);
    while ( __strex(v10 + 1, v9) );
  }
  result = j_pplx::task<web::http::http_response>::task<pplx::task_completion_event<web::http::http_response>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    result = (int *)(v16 + 4);
      v13 = __ldrex((unsigned int *)result);
    while ( __strex(v13 - 1, (unsigned int *)result) );
    if ( v13 == 1 )
    {
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      __dmb();
      do
        result = (int *)__ldrex(v14);
      while ( __strex((unsigned int)result - 1, v14) );
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
    }
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_2767AF0;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 264);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::tournaments::team_info::~team_info((xbox::services::tournaments::team_info *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


signed int __fastcall pplx::details::_Task_impl<Social::XboxProfile>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r6@5
  int v12; // r8@5
  unsigned int *v13; // r0@7
  unsigned int v14; // r1@9
  bool v15; // zf@11
  signed __int64 v16; // r6@16
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = pthread_mutex_lock(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v15 = v10 == 3;
    if ( v10 != 3 )
      v15 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v15 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v16 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
        v11 = *(_DWORD *)(v5 + 16);
      }
      else
        ++*v13;
    }
    if ( v11 )
      v17 = (unsigned int *)(v11 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    *(_DWORD *)(v5 + 16) = v12;
LABEL_33:
  if ( v8 == 1 )
    v16 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v16 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    pthread_mutex_unlock(v6);
  if ( v16 )
    result = v16 ^ 1;
    if ( &pthread_create )
      v23 = pthread_mutex_lock((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<Social::XboxProfile>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<Social::XboxProfile>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = operator new(0x10u);
      v26[2] = 0;
      v27 = operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<Social::XboxProfile>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<Social::XboxProfile>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>),std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  j_pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<void>>(std::function const&<void ()(pplx::task<void>)>)::{lambda(pplx::task<void>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<void>>(std::function const&<void ()(pplx::task<void>)>)::{lambda(pplx::task<void>)#1}::operator() const(
           a1,
           a2);
}


void __fastcall pplx::details::_CancellationTokenCallback<pplx::details::_JoinAllTokens_Add(pplx::cancellation_token_source const&,pplx::details::_CancellationTokenState *)::{lambda(void)#1}>::~_CancellationTokenCallback(void *ptr)
{
  void *v1; // r5@1
  int v2; // r0@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@3

  v1 = ptr;
  *(_DWORD *)ptr = &off_26DD698;
  v2 = *((_DWORD *)ptr + 5);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 - 1, v3) );
    if ( v4 == 1 )
      (*(void (**)(void))(*(_DWORD *)v2 + 8))();
  }
  j_j_j__ZdlPv_4(v1);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::system::token_result::token_result((xbox::services::system::token_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 72) = 0;
  *(_DWORD *)(v1 + 76) = v3;
  *(_DWORD *)(v1 + 80) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 96) = 0;
  *(_DWORD *)(v1 + 88) = 0;
  *(_DWORD *)(v1 + 92) = 0;
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<void>>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  char *v8; // r0@7
  unsigned int *v9; // r2@8
  signed int v10; // r1@10
  int v11; // r1@12 OVERLAPPED
  int v12; // r2@12
  int v13; // r2@13
  unsigned int *v14; // r1@14
  unsigned int v15; // r2@16
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@21
  __int64 v17; // [sp+8h] [bp-28h]@7
  char *v18; // [sp+10h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 28) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 36) )
    v7 = *v2;
    v18 = (char *)&unk_28898CC;
    v17 = *(_QWORD *)(v4 + 16);
    EntityInteraction::setInteractText((int *)&v18, (int *)(v4 + 24));
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_FinalizeAndRunContinuations(v7, (int)&v17);
    v8 = v18 - 12;
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v9 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
  else
    *(_QWORD *)&v11 = *(_QWORD *)(v4 + 4);
    if ( v11 == v12 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v11 = *v2;
      v13 = v2[1];
      *(_DWORD *)(v11 + 4) = v13;
      if ( v13 )
        v14 = (unsigned int *)(v13 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v15 = __ldrex(v14);
          while ( __strex(v15 + 1, v14) );
        }
        else
          ++*v14;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


  return pplx::task<std::error_code>::then<web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(pplx::task<std::error_code>)
{
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27657CC;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 132);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::contextual_search::contextual_search_game_clips_result::~contextual_search_game_clips_result((xbox::services::contextual_search::contextual_search_game_clips_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_FinalizeAndRunContinuations(int a1, unsigned __int64 *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  unsigned __int64 *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_std::vector<xbox::services::system::fqdn_nsal_endpoint,std::allocator<xbox::services::system::fqdn_nsal_endpoint>>::operator=(
    a1 + 80,
    a2);
  j_std::vector<xbox::services::system::wildcard_nsal_endpoint,std::allocator<xbox::services::system::wildcard_nsal_endpoint>>::operator=(
    v2 + 92,
    (unsigned __int64 *)((char *)v3 + 12));
  j_std::vector<xbox::services::system::ip_nsal_endpoint,std::allocator<xbox::services::system::ip_nsal_endpoint>>::operator=(
    v2 + 104,
    v3 + 3);
  j_std::vector<xbox::services::system::cidr_nsal_endpoint,std::allocator<xbox::services::system::cidr_nsal_endpoint>>::operator=(
    v2 + 116,
    (unsigned __int64 *)((char *)v3 + 36));
  j_std::vector<xbox::services::system::signature_policy,std::allocator<xbox::services::system::signature_policy>>::operator=(
    v2 + 128,
    v3 + 6);
  *(_QWORD *)(v2 + 140) = *(unsigned __int64 *)((char *)v3 + 60);
  EntityInteraction::setInteractText((int *)(v2 + 148), (int *)v3 + 17);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


void __fastcall pplx::details::_Task_impl<TransactionStatus>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl<TransactionStatus>::~_Task_impl(this);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::get(xbox::services::game_server_platform::game_server_metadata_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::game_server_platform::game_server_metadata_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_RegisterTask(
    (_DWORD *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::matchmaking::hopper_statistics_response::hopper_statistics_response((xbox::services::matchmaking::hopper_statistics_response *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 40) = 0;
  *(_DWORD *)(v1 + 44) = v3;
  *(_DWORD *)(v1 + 48) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 64) = 0;
  *(_DWORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 60) = 0;
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  EntityInteraction::setInteractText((int *)(v2 + 84), v3 + 1);
  *(_DWORD *)(v2 + 88) = v3[2];
  EntityInteraction::setInteractText((int *)(v2 + 92), v3 + 3);
  *(_DWORD *)(v2 + 96) = v3[4];
  EntityInteraction::setInteractText((int *)(v2 + 100), v3 + 5);
  EntityInteraction::setInteractText((int *)(v2 + 104), v3 + 6);
  j_std::vector<xbox::services::game_server_platform::game_server_port_mapping,std::allocator<xbox::services::game_server_platform::game_server_port_mapping>>::operator=(
    v2 + 108,
    (unsigned __int64 *)(v3 + 7));
  EntityInteraction::setInteractText((int *)(v2 + 120), v3 + 10);
  EntityInteraction::setInteractText((int *)(v2 + 124), v3 + 11);
  *(_QWORD *)(v2 + 128) = *((_QWORD *)v3 + 6);
  EntityInteraction::setInteractText((int *)(v2 + 136), v3 + 14);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_RegisterTask(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::~_Task_impl(a1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<std::string>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  __int64 v8; // r0@7
  int v9; // r6@7
  unsigned int *v10; // r7@14
  int v11; // r6@21
  unsigned int *v12; // r7@28
  int v13; // r6@35
  unsigned int *v14; // r7@42
  int v15; // r0@50
  int v16; // r1@50
  unsigned int *v17; // r1@51
  unsigned int v18; // r2@53
  unsigned int *v19; // r2@57
  unsigned int v20; // r1@59
  int v22; // [sp+0h] [bp-38h]@50
  int v23; // [sp+4h] [bp-34h]@50
  int v24; // [sp+8h] [bp-30h]@1
  int v25; // [sp+Ch] [bp-2Ch]@1
  int v26; // [sp+10h] [bp-28h]@7
  char v27; // [sp+14h] [bp-24h]@7
  int v28; // [sp+18h] [bp-20h]@7
  int v29; // [sp+1Ch] [bp-1Ch]@7
  char v30; // [sp+20h] [bp-18h]@7

  v3 = a1;
  v24 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v25 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v26 = *(_DWORD *)(a3 + 8);
  v29 = v4;
  std::__shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>>,pplx::details::_CancellationTokenState *&,pplx::scheduler_ptr &>(
    (int)&v27,
    (int)&v30,
    &v29,
    (int)&v24);
  v8 = *(_QWORD *)&v27;
  *(_DWORD *)&v27 = 0;
  v28 = 0;
  *(_DWORD *)v3 = v8;
  v9 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = HIDWORD(v8);
  if ( v9 )
    HIDWORD(v8) = v9 + 4;
        LODWORD(v8) = __ldrex((unsigned int *)HIDWORD(v8));
      while ( __strex(v8 - 1, (unsigned int *)HIDWORD(v8)) );
      LODWORD(v8) = (*(_DWORD *)HIDWORD(v8))--;
    if ( (_DWORD)v8 == 1 )
      v10 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          LODWORD(v8) = __ldrex(v10);
        while ( __strex(v8 - 1, v10) );
      }
      else
        LODWORD(v8) = (*v10)--;
      if ( (_DWORD)v8 == 1 )
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v11 = v28;
  if ( v28 )
    HIDWORD(v8) = v28 + 4;
      v12 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          LODWORD(v8) = __ldrex(v12);
        while ( __strex(v8 - 1, v12) );
        LODWORD(v8) = (*v12)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v13 = v25;
  if ( v25 )
    HIDWORD(v8) = v25 + 4;
      v14 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          LODWORD(v8) = __ldrex(v14);
        while ( __strex(v8 - 1, v14) );
        LODWORD(v8) = (*v14)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  if ( v4 != 2 )
    v15 = *(_DWORD *)v3;
    v22 = *(_DWORD *)v3;
    v16 = *(_DWORD *)(v3 + 4);
    v23 = v16;
    if ( v16 )
      v17 = (unsigned int *)(v16 + 8);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    pplx::details::_Task_impl_base::_RegisterCancellation(v15, (unsigned __int64 *)&v22);
    LODWORD(v8) = v23;
    if ( v23 )
      v19 = (unsigned int *)(v23 + 8);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        LODWORD(v8) = (*(int (__cdecl **)(_DWORD))(*(_DWORD *)v8 + 12))(v8);
  return v8;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<void>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r5@1
  void **v5; // r0@2
  void **v6; // r0@3
  int v7; // r6@3
  void **v8; // r4@3
  void (__fastcall *v9)(void **, int, signed int); // r3@3
  int result; // r0@5
  void **v11; // r4@6
  void (__fastcall *v12)(void **, void **, signed int); // r3@7

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<void>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1};
      goto LABEL_12;
    case 2:
      v6 = (void **)j_operator new(0x10u);
      v7 = *v3;
      v8 = v6;
      v6[2] = 0;
      v9 = *(void (__fastcall **)(void **, int, signed int))(v7 + 8);
      if ( v9 )
      {
        v9(v6, v7, 2);
        v8[3] = *(void **)(v7 + 12);
        v8[2] = *(void **)(v7 + 8);
      }
      result = 0;
      *v4 = v8;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(*a1, *a1, 3);
        j_operator delete(v11);
      goto def_1C11DD2;
    case 1:
      v5 = (void **)*a2;
LABEL_12:
      *v4 = v5;
      break;
    default:
def_1C11DD2:
  }
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a2;
  v3 = a1;
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  EntityInteraction::setInteractText((int *)(a1 + 84), (int *)(a2 + 4));
  EntityInteraction::setInteractText((int *)(v3 + 88), (int *)(v2 + 8));
  EntityInteraction::setInteractText((int *)(v3 + 92), (int *)(v2 + 12));
  j_std::vector<xbox::services::game_server_platform::game_server_port_mapping,std::allocator<xbox::services::game_server_platform::game_server_port_mapping>>::operator=(
    v3 + 96,
    (unsigned __int64 *)(v2 + 16));
  EntityInteraction::setInteractText((int *)(v3 + 108), (int *)(v2 + 28));
  *(_QWORD *)(v3 + 112) = *(_QWORD *)(v2 + 32);
  EntityInteraction::setInteractText((int *)(v3 + 120), (int *)(v2 + 40));
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 36));
    }
    else
    v7 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_17contextual_search35contextual_search_game_clips_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::get(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<bool>),std::function<unsigned char ()(pplx::task<bool>)> pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(std::function const&<void ()(pplx::task<bool>)>)::{lambda(pplx::task<bool>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<bool>)> pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(std::function const&<void ()(pplx::task<bool>)>)::{lambda(pplx::task<bool>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


signed int __fastcall pplx::details::_Task_impl<TransactionStatus>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r6@5
  int v12; // r8@5
  unsigned int *v13; // r0@7
  unsigned int v14; // r1@9
  bool v15; // zf@11
  signed __int64 v16; // r6@16
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = pthread_mutex_lock(v6);
    if ( v9 )
      sub_119CCFC(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v15 = v10 == 3;
    if ( v10 != 3 )
      v15 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v15 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v16 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
        v11 = *(_DWORD *)(v5 + 16);
      }
      else
        ++*v13;
    }
    if ( v11 )
      v17 = (unsigned int *)(v11 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    *(_DWORD *)(v5 + 16) = v12;
LABEL_33:
  if ( v8 == 1 )
    v16 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v16 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    pthread_mutex_unlock(v6);
  if ( v16 )
    result = v16 ^ 1;
    if ( &pthread_create )
      v23 = pthread_mutex_lock((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_119CCFC(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v5 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<TransactionStatus>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<TransactionStatus>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = operator new(0x10u);
      v26[2] = 0;
      v27 = operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<TransactionStatus>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<TransactionStatus>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r5@8
  unsigned int *v9; // r1@9
  unsigned int v10; // r0@11
  unsigned int *v11; // r6@15
  unsigned int v12; // r0@17
  unsigned int *v14; // r2@23
  signed int v15; // r1@25

  v1 = this;
  *(_DWORD *)this = &off_2763624;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 24);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v14 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
    }
    else
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 21);
  if ( v8 )
    v9 = (unsigned int *)(v8 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
      }
      else
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


void __fastcall pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#1}>(int a1, int *a2, int a3, int a4)
{
  int v4; // lr@0
  int v5; // r7@1
  int v6; // r4@1
  int v7; // r5@1
  int *v8; // r6@1
  __int64 v9; // r0@1
  int v10; // [sp+0h] [bp-28h]@1
  void *ptr; // [sp+4h] [bp-24h]@1
  int v12; // [sp+8h] [bp-20h]@1
  int v13; // [sp+Ch] [bp-1Ch]@1

  v5 = a1;
  v12 = 0;
  v13 = 0;
  v6 = a4;
  ptr = 0;
  v7 = a3;
  v8 = a2;
  v10 = v4;
  *(_BYTE *)(a4 + 20) = 1;
  *(_DWORD *)(a4 + 24) = v4;
  LODWORD(v9) = a4 + 28;
  HIDWORD(v9) = (unsigned int)&v10 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v9);
  if ( ptr )
    operator delete(ptr);
  pplx::task<unsigned char>::_ThenImpl<void,Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#1}>(
    v5,
    v8,
    v7,
    v6);
}


unsigned int *__fastcall pplx::task<std::error_code>::then<web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(pplx::task<std::error_code>)#1}>(int a1, int *a2, int a3)
{
  int v3; // lr@0
  int v4; // r6@1
  int v5; // r4@1
  int *v6; // r5@1
  __int64 v7; // r0@1
  int v8; // r0@5
  unsigned int *v9; // r1@6
  unsigned int v10; // r2@7
  unsigned int *result; // r0@10
  int v12; // r4@10
  unsigned int v13; // r1@12
  unsigned int *v14; // r5@14
  int v15; // [sp+0h] [bp-58h]@1
  void *ptr; // [sp+4h] [bp-54h]@1
  int v17; // [sp+8h] [bp-50h]@1
  int v18; // [sp+Ch] [bp-4Ch]@1
  int v19; // [sp+10h] [bp-48h]@1
  int v20; // [sp+14h] [bp-44h]@1
  int v21; // [sp+18h] [bp-40h]@1
  int v22; // [sp+1Ch] [bp-3Ch]@1
  char v23; // [sp+24h] [bp-34h]@1
  int v24; // [sp+28h] [bp-30h]@1
  void *v25; // [sp+2Ch] [bp-2Ch]@1
  int v26; // [sp+30h] [bp-28h]@1
  int v27; // [sp+34h] [bp-24h]@1
  __int16 v28; // [sp+38h] [bp-20h]@1
  int v29; // [sp+3Ch] [bp-1Ch]@1
  int v30; // [sp+40h] [bp-18h]@1

  v4 = a1;
  v5 = a3;
  v6 = a2;
  j_pplx::get_ambient_scheduler((pplx *)&v29);
  v19 = v29;
  v20 = v30;
  v21 = v29;
  v22 = 0;
  v28 = 0;
  v26 = 0;
  v27 = 0;
  v25 = 0;
  v17 = 0;
  v18 = 0;
  ptr = 0;
  v23 = 1;
  v15 = v3;
  v24 = v3;
  LODWORD(v7) = &v25;
  HIDWORD(v7) = (unsigned int)&v15 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  j_pplx::task<std::error_code>::_ThenImpl<std::error_code,web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(pplx::task<std::error_code>)#1}>(
    v4,
    v6,
    v5,
    (int)&v19);
  if ( v25 )
    j_operator delete(v25);
  v8 = v22;
  if ( v22 )
  {
    v9 = (unsigned int *)(v22 + 4);
    __dmb();
    do
      v10 = __ldrex(v9);
    while ( __strex(v10 - 1, v9) );
    if ( v10 == 1 )
      (*(void (**)(void))(*(_DWORD *)v8 + 8))();
  }
  result = 0;
  v12 = v20;
  if ( v20 )
    result = (unsigned int *)(v20 + 4);
      v13 = __ldrex(result);
    while ( __strex(v13 - 1, result) );
    if ( v13 == 1 )
    {
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      __dmb();
      do
        result = (unsigned int *)__ldrex(v14);
      while ( __strex((unsigned int)result - 1, v14) );
      if ( result == (unsigned int *)1 )
        result = (unsigned int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
    }
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27657CC;
  v12 = j_xbox::services::contextual_search::contextual_search_game_clips_result::contextual_search_game_clips_result((xbox::services::contextual_search::contextual_search_game_clips_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 124) = 0;
  *(_DWORD *)(v3 + 128) = v13;
  *(_DWORD *)(v3 + 132) = &unk_28898CC;
  return v3;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)#1}::operator() const(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  void *v9; // r0@8
  unsigned int *v10; // r2@9
  signed int v11; // r1@11
  int v12; // r1@13 OVERLAPPED
  int v13; // r2@13
  int v14; // r2@14
  unsigned int *v15; // r1@15
  unsigned int v16; // r2@17
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@22
  unsigned int *v18; // r2@25
  signed int v19; // r1@27
  int v20; // [sp+4h] [bp-24h]@7
  int v21; // [sp+10h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 32) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 40) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<std::string>::xbox_live_result((int)&v20, v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_FinalizeAndRunContinuations(v7, &v20);
    v8 = (void *)(v21 - 12);
    if ( (int *)(v21 - 12) != &dword_28898C0 )
    {
      v18 = (unsigned int *)(v21 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
      }
      else
        v19 = (*v18)--;
      if ( v19 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    v9 = (void *)(v20 - 12);
    if ( (int *)(v20 - 12) != &dword_28898C0 )
      v10 = (unsigned int *)(v20 - 4);
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
        v11 = (*v10)--;
      if ( v11 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
  else
    *(_QWORD *)&v12 = *(_QWORD *)(v4 + 4);
    if ( v12 == v13 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v12 = *v2;
      v14 = v2[1];
      *(_DWORD *)(v12 + 4) = v14;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 + 1, v15) );
        }
        else
          ++*v15;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_Task_impl(
           a1,
           a2,
           a3);
}


_DWORD *__fastcall pplx::details::_Task_impl<int>::_Task_impl(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  pplx::details::_Task_impl_base::_Task_impl_base((int)v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *v3 = &off_26DD800;
  return v3;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>(
           a1,
           a2,
           a3);
}


  return pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}::operator()
{
           a2);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 47);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 44);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::achievements::achievement::~achievement((xbox::services::achievements::achievement *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2765A30;
  v12 = (xbox::services *)j_xbox::services::system::verify_string_result::verify_string_result((xbox::services::system::verify_string_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 88) = 0;
  *(_DWORD *)(v3 + 92) = v13;
  *(_DWORD *)(v3 + 96) = &unk_28898CC;
  return v3;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_StoreException<std::__exception_ptr::exception_ptr>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<void>>::_CancelInternal(void ***a1)
{
  void ***v1; // r6@1
  void **v2; // r0@1
  signed int v3; // r9@2
  pthread_mutex_t *v4; // r7@3
  int v5; // r0@4
  _DWORD *v6; // r8@6
  _DWORD *v7; // r10@6
  void **v8; // r0@7
  _DWORD *v9; // r5@12
  void **v10; // r1@15
  _DWORD *v11; // r5@18
  int v12; // r6@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r4@26
  unsigned int v16; // r0@28

  v1 = a1;
  v2 = *a1;
  if ( *((_BYTE *)v2 + 37) )
  {
    v3 = 0;
  }
  else
    v4 = (pthread_mutex_t *)(v2 + 3);
    if ( !&pthread_create )
      goto LABEL_40;
    v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 3));
    if ( v5 )
      sub_21E5E14(v5);
    v2 = *v1;
    if ( *((_BYTE *)*v1 + 37) )
    {
      v6 = 0;
      v7 = 0;
      v3 = 0;
    }
    else
LABEL_40:
      v3 = 1;
      *((_BYTE *)v2 + 37) = 1;
      v8 = *v1;
      v6 = **v1;
      *v8 = 0;
      v7 = v8[1];
      v8[1] = 0;
      v8[2] = 0;
    if ( &pthread_create )
      j_pthread_mutex_unlock_1(v4);
    if ( v6 != v7 && v3 == 1 )
      v9 = v6;
      if ( (*v1)[7] )
      {
        while ( 1 )
        {
          (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*v9 + 8))(*v9);
          v9 += 2;
          if ( v7 == v9 )
            break;
          v10 = *v1;
        }
      }
      else
        do
        while ( v7 != v9 );
    if ( v6 != v7 )
      v11 = v6;
      do
        v12 = v11[1];
        if ( v12 )
          v13 = (unsigned int *)(v12 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v14 = __ldrex(v13);
            while ( __strex(v14 - 1, v13) );
          }
          else
            v14 = (*v13)--;
          if ( v14 == 1 )
            v15 = (unsigned int *)(v12 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
            if ( &pthread_create )
            {
              __dmb();
              do
                v16 = __ldrex(v15);
              while ( __strex(v16 - 1, v15) );
            }
            else
              v16 = (*v15)--;
            if ( v16 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
        v11 += 2;
      while ( v11 != v7 );
    if ( v6 )
      j_operator delete(v6);
  return v3;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::set(
           a1,
           a2);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27646C4;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 172);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::social::xbox_user_profile::~xbox_user_profile((xbox::services::social::xbox_user_profile *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_11tournaments10tournamentEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_RegisterTask(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<std::shared_ptr<xbox::services::http_call_response>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r5@18
  unsigned int *v11; // r1@19
  unsigned int v12; // r0@21
  unsigned int *v13; // r4@25
  unsigned int v14; // r0@27
  int v15; // r5@32
  int v16; // r7@32
  int v17; // r4@33
  unsigned int *v18; // r1@34
  unsigned int v19; // r0@36
  unsigned int *v20; // r6@40
  unsigned int v21; // r0@42

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 7);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 5);
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v16 = *v1 >> 32;
  v15 = *v1;
  if ( v15 != v16 )
    do
      v17 = *(_DWORD *)(v15 + 4);
      if ( v17 )
        v18 = (unsigned int *)(v17 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
        }
        else
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
          if ( &pthread_create )
          {
            __dmb();
            do
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
          }
          else
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      v15 += 8;
    while ( v15 != v16 );
    v15 = *(_DWORD *)v1;
  if ( v15 )
    j_operator delete((void *)v15);
  return v1;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::leaderboard::leaderboard_result::operator=((int *)(a1 + 80), a2);
  *(_QWORD *)(v2 + 188) = *(_QWORD *)(v3 + 27);
  EntityInteraction::setInteractText((int *)(v2 + 196), v3 + 29);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_CancellationTokenCallback<web::http::client::details::asio_context::start_request(void)::{lambda(std::shared_ptr<web::http::client::details::asio_context>)#1}::operator() const(std::shared_ptr<web::http::client::details::asio_context>)::{lambda(void)#1}>::_Exec(int result)
{
  int v1; // r4@1
  unsigned int v2; // r1@2
  unsigned int *v3; // r6@2
  unsigned int v4; // r2@3
  bool v5; // zf@6
  unsigned int *v6; // r5@13

  v1 = *(_DWORD *)(result + 24);
  if ( v1 )
  {
    v2 = *(_DWORD *)(v1 + 4);
    v3 = (unsigned int *)(v1 + 4);
    while ( 1 )
    {
      v4 = v2;
      if ( !v2 )
        break;
      __dmb();
      v2 = __ldrex(v3);
      if ( v2 == v4 && !__strex(v4 + 1, v3) )
      {
        __dmb();
        v5 = *v3 == 0;
        if ( *v3 )
        {
          result = *(_DWORD *)(result + 20);
          v5 = result == 0;
        }
        if ( !v5 )
          j_web::http::client::details::asio_connection::close(*(web::http::client::details::asio_connection **)(result + 200));
        do
          result = __ldrex(v3);
        while ( __strex(result - 1, v3) );
        if ( result == 1 )
          v6 = (unsigned int *)(v1 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v1 + 8))(v1);
          __dmb();
          do
            result = __ldrex(v6);
          while ( __strex(result - 1, v6) );
          if ( result == 1 )
            result = (*(int (__fastcall **)(int))(*(_DWORD *)v1 + 12))(v1);
        return result;
      }
    }
  }
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


xbox::services::title_storage::title_storage_blob_metadata *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::get(xbox::services::title_storage::title_storage_blob_metadata *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::title_storage::title_storage_blob_metadata *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::details::_Task_impl_base::_Wait(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pthread_mutex_t *v2; // r5@1
  pplx::details::_ExceptionHolder *v3; // r0@4
  signed int result; // r0@5

  v1 = this;
  v2 = (pthread_mutex_t *)((char *)this + 36);
  if ( *((_BYTE *)this + 8) || (pplx::details::event_impl::wait(v2, 0xFFFFFFFF), *((_BYTE *)v1 + 9)) )
    pplx::details::event_impl::wait(v2, 0xFFFFFFFF);
  v3 = (pplx::details::_ExceptionHolder *)*((_DWORD *)v1 + 3);
  if ( v3 )
    pplx::details::_ExceptionHolder::_RethrowUserException(v3);
  result = 1;
  if ( *((_DWORD *)v1 + 1) == 4 )
    result = 2;
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-90h]@10
  int v33; // [sp+4h] [bp-8Ch]@10
  int v34; // [sp+8h] [bp-88h]@16
  int v35; // [sp+Ch] [bp-84h]@20
  char v36; // [sp+14h] [bp-7Ch]@20
  int v37; // [sp+18h] [bp-78h]@20
  void *ptr; // [sp+1Ch] [bp-74h]@20
  int v39; // [sp+20h] [bp-70h]@20
  int v40; // [sp+24h] [bp-6Ch]@20
  char v41; // [sp+28h] [bp-68h]@20
  char v42; // [sp+29h] [bp-67h]@20
  int v43; // [sp+30h] [bp-60h]@4
  int v44; // [sp+34h] [bp-5Ch]@4
  char v45; // [sp+38h] [bp-58h]@3
  int v46; // [sp+68h] [bp-28h]@3
  int v47; // [sp+70h] [bp-20h]@1
  int v48; // [sp+74h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_20game_server_platform14cluster_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>::xbox_live_result(
    (xbox::services::game_server_platform::cluster_result *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::game_server_platform::cluster_result::~cluster_result((xbox::services::game_server_platform::cluster_result *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}::operator() const(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27688B8;
  v12 = (xbox::services *)j_xbox::services::system::token_and_signature_result::token_and_signature_result((xbox::services::system::token_and_signature_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 116) = 0;
  *(_DWORD *)(v3 + 120) = v13;
  *(_DWORD *)(v3 + 124) = &unk_28898CC;
  return v3;
}


unsigned int __fastcall pplx::task_from_result<std::shared_ptr<xbox::services::http_call_response>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r7@1
  int v5; // r5@1
  int v6; // r6@1
  _DWORD *v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int v11; // r6@9
  unsigned int *v12; // r1@10
  unsigned int v13; // r0@12
  unsigned int *v14; // r7@16
  unsigned int v15; // r0@18
  unsigned int *v16; // r0@24
  unsigned int v17; // r1@26
  int v18; // r0@29
  unsigned int *v19; // r0@30
  unsigned int v20; // r1@32
  int v21; // r0@35
  unsigned int *v22; // r1@36
  unsigned int v23; // r2@37
  __int16 v24; // r0@39
  int v25; // r0@41
  unsigned int *v26; // r1@42
  unsigned int v27; // r2@43
  unsigned int result; // r0@46
  int v29; // r4@46
  unsigned int *v30; // r1@47
  unsigned int *v31; // r5@53
  int v32; // r4@60
  unsigned int *v33; // r1@61
  unsigned int *v34; // r5@67
  int v35; // r4@74
  unsigned int *v36; // r1@75
  unsigned int *v37; // r5@81
  int v38; // [sp+0h] [bp-58h]@29
  int v39; // [sp+4h] [bp-54h]@29
  int v40; // [sp+8h] [bp-50h]@35
  int v41; // [sp+Ch] [bp-4Ch]@39
  char v42; // [sp+14h] [bp-44h]@39
  int v43; // [sp+18h] [bp-40h]@39
  void *ptr; // [sp+1Ch] [bp-3Ch]@39
  int v45; // [sp+20h] [bp-38h]@39
  int v46; // [sp+24h] [bp-34h]@39
  char v47; // [sp+28h] [bp-30h]@39
  char v48; // [sp+29h] [bp-2Fh]@39
  int v49; // [sp+2Ch] [bp-2Ch]@23
  int v50; // [sp+30h] [bp-28h]@23
  int v51; // [sp+34h] [bp-24h]@3
  int v52; // [sp+38h] [bp-20h]@3
  int v53; // [sp+3Ch] [bp-1Ch]@1
  int v54; // [sp+40h] [bp-18h]@1

  v3 = a1;
  v4 = 0;
  v5 = a3;
  v6 = a2;
  v53 = 0;
  v7 = j_operator new(0x30u);
  v7[1] = 1;
  v7[2] = 1;
  *v7 = &off_276A038;
  v7[3] = 0;
  v7[4] = 0;
  v7[5] = 0;
  v7[6] = 0;
  *((_WORD *)v7 + 22) = 0;
  v7[7] = 0;
  v7[8] = 0;
  v7[9] = 0;
  v7[10] = 0;
  v54 = (int)v7;
  if ( v7 )
    v4 = (*(int (**)(void))(*v7 + 16))();
  v53 = v4;
  v51 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v52 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  j_pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>::set((void ***)&v53, (int)&v51);
  v11 = v52;
  if ( v52 )
    v12 = (unsigned int *)(v52 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
      v13 = (*v12)--;
    if ( v13 == 1 )
      v14 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
      if ( &pthread_create )
      {
        __dmb();
        do
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
      }
      else
        v15 = (*v14)--;
      if ( v15 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v49 = v53;
  v50 = v54;
  if ( v54 )
    v16 = (unsigned int *)(v54 + 4);
        v17 = __ldrex(v16);
      while ( __strex(v17 + 1, v16) );
      ++*v16;
  v38 = *(_DWORD *)v5;
  v18 = *(_DWORD *)(v5 + 4);
  v39 = v18;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v40 = *(_DWORD *)(v5 + 8);
  v21 = *(_DWORD *)(v5 + 12);
  if ( v21 )
    v22 = (unsigned int *)(v21 + 4);
    __dmb();
    do
      v23 = __ldrex(v22);
    while ( __strex(v23 + 1, v22) );
  v41 = v21;
  v45 = 0;
  v46 = 0;
  v43 = 0;
  ptr = 0;
  v42 = 0;
  v24 = *(_WORD *)(v5 + 40);
  v47 = *(_WORD *)(v5 + 40);
  v48 = HIBYTE(v24);
  j_pplx::create_task<pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>>(
    v3,
    (int)&v49,
    (int)&v38);
  if ( ptr )
    j_operator delete(ptr);
  v25 = v41;
  if ( v41 )
    v26 = (unsigned int *)(v41 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v25 + 8))(v25);
  result = 0;
  v41 = 0;
  v29 = v39;
  if ( v39 )
    v30 = (unsigned int *)(v39 + 4);
        result = __ldrex(v30);
      while ( __strex(result - 1, v30) );
      result = (*v30)--;
    if ( result == 1 )
      v31 = (unsigned int *)(v29 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
          result = __ldrex(v31);
        while ( __strex(result - 1, v31) );
        result = (*v31)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
  v32 = v50;
  if ( v50 )
    v33 = (unsigned int *)(v50 + 4);
        result = __ldrex(v33);
      while ( __strex(result - 1, v33) );
      result = (*v33)--;
      v34 = (unsigned int *)(v32 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v32 + 8))(v32);
          result = __ldrex(v34);
        while ( __strex(result - 1, v34) );
        result = (*v34)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v32 + 12))(v32);
  v35 = v54;
    v36 = (unsigned int *)(v54 + 4);
        result = __ldrex(v36);
      while ( __strex(result - 1, v36) );
      result = (*v36)--;
      v37 = (unsigned int *)(v35 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 8))(v35);
          result = __ldrex(v37);
        while ( __strex(result - 1, v37) );
        result = (*v37)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v35 + 12))(v35);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::set(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_276621C;
  v12 = (xbox::services *)j_xbox::services::game_server_platform::game_server_ticket_status::game_server_ticket_status((xbox::services::game_server_platform::game_server_ticket_status *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 128) = 0;
  *(_DWORD *)(v3 + 132) = v13;
  *(_DWORD *)(v3 + 136) = &unk_28898CC;
  return v3;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 20);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 18);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::game_server_platform::game_server_ticket_status::~game_server_ticket_status((xbox::services::game_server_platform::game_server_ticket_status *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_RegisterTask(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int *v12; // r0@21
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@1
  int v16; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v14 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v15 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v16 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v14);
  v7 = v15;
  if ( v15 )
    v8 = (unsigned int *)(v15 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2763270;
  *(_DWORD *)(v3 + 104) = 0;
  *(_DWORD *)(v3 + 108) = 0;
  *(_DWORD *)(v3 + 96) = 0;
  *(_DWORD *)(v3 + 100) = 0;
  *(_DWORD *)(v3 + 88) = 0;
  *(_DWORD *)(v3 + 92) = 0;
  *(_DWORD *)(v3 + 80) = 0;
  *(_DWORD *)(v3 + 84) = 0;
  *(_DWORD *)(v3 + 112) = &unk_28898CC;
  *(_DWORD *)(v3 + 116) = 0;
  *(_DWORD *)(v3 + 120) = 0;
  *(_DWORD *)(v3 + 124) = 0;
  *(_DWORD *)(v3 + 140) = 0;
  *(_DWORD *)(v3 + 144) = 0;
  *(_DWORD *)(v3 + 148) = 0;
  *(_DWORD *)(v3 + 152) = &unk_28898CC;
  v12 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&unk_28898CC);
  *(_DWORD *)(v3 + 156) = 0;
  *(_DWORD *)(v3 + 160) = v12;
  *(_DWORD *)(v3 + 164) = &unk_28898CC;
  return v3;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<int>)> pplx::details::_MakeTToUnitFunc<pplx::task<int>>(std::function const&<void ()(pplx::task<int>)>)::{lambda(pplx::task<int>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int *__fastcall pplx::task<std::shared_ptr<xbox::services::http_call_response>>::task<pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>>(int a1, int a2, int a3)
{
  return pplx::task<std::shared_ptr<xbox::services::http_call_response>>::task<pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 53);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 50);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::tournaments::team_info::~team_info((xbox::services::tournaments::team_info *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_11matchmaking26hopper_statistics_responseEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r6@11
  int v13; // r7@12
  void **v14; // r0@16
  void *v15; // r5@17
  unsigned int *v16; // r1@18
  unsigned int v17; // r0@20
  unsigned int *v18; // r6@27
  unsigned int v19; // r0@29
  int *v20; // r6@36
  int v21; // r7@37
  unsigned int *v22; // r1@38
  unsigned int v23; // r0@40
  unsigned int *v24; // r5@44
  unsigned int v25; // r0@46
  char v27; // [sp+4h] [bp-44h]@14

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 28);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 28);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      v4[5] = *(void **)(v3 + 4);
      j_std::vector<xbox::services::presence::presence_device_record,std::allocator<xbox::services::presence::presence_device_record>>::operator=(
        (int)(v4 + 6),
        (unsigned __int64 *)(v3 + 8));
      *(_QWORD *)(v4 + 9) = *(_QWORD *)(v3 + 20);
      EntityInteraction::setInteractText((int *)v4 + 11, (int *)(v3 + 28));
      *((_BYTE *)*v2 + 56) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v13 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v13 + 8))(v13, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::xbox_live_result(
              (xbox::services::presence::presence_record *)&v27,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_FinalizeAndRunContinuations(
              v13,
              (int *)&v27);
            j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::~xbox_live_result((int)&v27);
          v12 += 2;
        }
        while ( v11 != v12 );
      }
      v14 = *v2;
      if ( (*v2)[12] )
        v14[12] = 0;
        v15 = v14[13];
        v14[13] = 0;
        if ( v15 )
          v16 = (unsigned int *)((char *)v15 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v17 = __ldrex(v16);
            while ( __strex(v17 - 1, v16) );
            v17 = (*v16)--;
          if ( v17 == 1 )
            v18 = (unsigned int *)((char *)v15 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v15 + 8))(v15);
            if ( &pthread_create )
            {
              __dmb();
              do
                v19 = __ldrex(v18);
              while ( __strex(v19 - 1, v18) );
            }
            else
              v19 = (*v18)--;
            if ( v19 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v15 + 12))(v15);
      v5 = 1;
    if ( v10 != v11 )
      v20 = v10;
      do
        v21 = v20[1];
        if ( v21 )
          v22 = (unsigned int *)(v21 + 4);
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            v24 = (unsigned int *)(v21 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
                v25 = __ldrex(v24);
              while ( __strex(v25 - 1, v24) );
              v25 = (*v24)--;
            if ( v25 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
        v20 += 2;
      while ( v20 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::set(
           a1,
           a2);
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  void *v4; // r0@2
  unsigned int *v6; // r2@4
  signed int v7; // r1@6
  unsigned int *v8; // r2@8
  signed int v9; // r1@10
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+18h] [bp-20h]@1

  v2 = *a1;
  j_xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>::xbox_live_result(
    (xbox::services::matchmaking::create_match_ticket_response *)&v10,
    a2);
  j_pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}::operator() const(
    v2,
    (int)&v10);
  v3 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v6 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 <= 0 )
      j_j_j_j__ZdlPv_9(v3);
  }
  v4 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v8 = (unsigned int *)(v10 - 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v4);
  return 0;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::set(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<int>::set(_DWORD *a1, int a2)
{
  _DWORD *v2; // r6@1
  int v3; // r4@1
  int v4; // r0@1
  signed int v5; // r8@1
  unsigned int v6; // r1@1
  pthread_mutex_t *v7; // r5@3
  int v8; // r0@4
  int *v9; // r9@8
  int *v10; // r10@8
  int *v11; // r4@11
  int v12; // r0@12
  int v13; // r0@16
  int v14; // r5@17
  unsigned int *v15; // r1@18
  unsigned int v16; // r0@20
  unsigned int *v17; // r4@27
  unsigned int v18; // r0@29
  int *v19; // r5@36
  int v20; // r6@37
  unsigned int *v21; // r1@38
  unsigned int v22; // r0@40
  unsigned int *v23; // r7@44
  unsigned int v24; // r0@46

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *(_WORD *)(v4 + 28);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 12);
    if ( &pthread_create )
    {
      v8 = pthread_mutex_lock((pthread_mutex_t *)(v4 + 12));
      if ( v8 )
        sub_119CCFC(v8);
      v4 = *v2;
      v6 = *(_WORD *)(*v2 + 28);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        pthread_mutex_unlock(v7);
      v9 = 0;
      v10 = 0;
      v5 = 0;
    else
      *(_DWORD *)(v4 + 16) = v3;
      *(_BYTE *)(v4 + 28) = 1;
      v9 = *(int **)v4;
      *(_DWORD *)v4 = 0;
      v10 = *(int **)(v4 + 4);
      *(_DWORD *)(v4 + 4) = 0;
      *(_DWORD *)(v4 + 8) = 0;
      if ( v9 != v10 )
      {
        v11 = v9;
        do
        {
          v12 = *v11;
          if ( *(_DWORD *)(*v11 + 4) == 2 )
            (*(void (__cdecl **)(int))(*(_DWORD *)v12 + 8))(v12);
          else
            pplx::details::_Task_impl<int>::_FinalizeAndRunContinuations(v12, *(_DWORD *)(*v2 + 16));
          v11 += 2;
        }
        while ( v10 != v11 );
      }
      v13 = *v2;
      if ( *(_DWORD *)(*v2 + 20) )
        *(_DWORD *)(v13 + 20) = 0;
        v14 = *(_DWORD *)(v13 + 24);
        *(_DWORD *)(v13 + 24) = 0;
        if ( v14 )
          v15 = (unsigned int *)(v14 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
            v16 = (*v15)--;
          if ( v16 == 1 )
            v17 = (unsigned int *)(v14 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
            if ( &pthread_create )
            {
              __dmb();
              do
                v18 = __ldrex(v17);
              while ( __strex(v18 - 1, v17) );
            }
            else
              v18 = (*v17)--;
            if ( v18 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v5 = 1;
    if ( v9 != v10 )
      v19 = v9;
      do
        v20 = v19[1];
        if ( v20 )
          v21 = (unsigned int *)(v20 + 4);
              v22 = __ldrex(v21);
            while ( __strex(v22 - 1, v21) );
            v22 = (*v21)--;
          if ( v22 == 1 )
            v23 = (unsigned int *)(v20 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
                v24 = __ldrex(v23);
              while ( __strex(v24 - 1, v23) );
              v24 = (*v23)--;
            if ( v24 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
        v19 += 2;
      while ( v19 != v10 );
    if ( v9 )
      operator delete(v9);
  }
  return v5;
}


xbox::services::game_server_platform::allocation_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>>::get(xbox::services::game_server_platform::allocation_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::game_server_platform::allocation_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::game_server_platform::allocation_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8((void *)v1);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r5@7
  unsigned int *v7; // r1@8
  unsigned int v8; // r0@10
  unsigned int *v9; // r6@14
  unsigned int v10; // r0@16

  v1 = this;
  *(_DWORD *)this = &off_276916C;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 21);
  if ( v6 )
    v7 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 == 1 )
      v9 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_5(v1);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  void *v9; // r0@8
  unsigned int *v10; // r2@9
  signed int v11; // r1@11
  int v12; // r1@13 OVERLAPPED
  int v13; // r2@13
  int v14; // r2@14
  unsigned int *v15; // r1@15
  unsigned int v16; // r2@17
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@22
  unsigned int *v18; // r2@25
  signed int v19; // r1@27
  int v20; // [sp+8h] [bp-40h]@7
  int v21; // [sp+28h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 56) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 64) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>::xbox_live_result(
      (xbox::services::matchmaking::hopper_statistics_response *)&v20,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_FinalizeAndRunContinuations(
      v7,
      &v20);
    v8 = (void *)(v21 - 12);
    if ( (int *)(v21 - 12) != &dword_28898C0 )
    {
      v18 = (unsigned int *)(v21 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
      }
      else
        v19 = (*v18)--;
      if ( v19 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    v9 = (void *)(v20 - 12);
    if ( (int *)(v20 - 12) != &dword_28898C0 )
      v10 = (unsigned int *)(v20 - 4);
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
        v11 = (*v10)--;
      if ( v11 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
  else
    *(_QWORD *)&v12 = *(_QWORD *)(v4 + 4);
    if ( v12 == v13 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v12 = *v2;
      v14 = v2[1];
      *(_DWORD *)(v12 + 4) = v14;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 + 1, v15) );
        }
        else
          ++*v15;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  char v17; // [sp+8h] [bp-B8h]@7
  int v18; // [sp+A0h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 176) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 184) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::tournaments::tournament>::xbox_live_result(
      (xbox::services::tournaments::tournament *)&v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::tournaments::tournament::~tournament((xbox::services::tournaments::tournament *)&v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


unsigned int __fastcall pplx::task<bool>::then<pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}>(int a1, int *a2, int a3)
{
  return pplx::task<bool>::then<pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


unsigned int *__fastcall pplx::task<std::error_code>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@3
  unsigned int *result; // r0@5
  int v9; // r1@6
  int v10; // r6@8
  unsigned int v11; // r1@10
  unsigned int *v12; // r7@12
  int v13; // r6@16
  unsigned int v14; // r1@18
  unsigned int *v15; // r7@20
  int v16; // r6@24
  unsigned int v17; // r1@26
  unsigned int *v18; // r7@28
  __int64 v19; // kr00_8@33
  unsigned int *v20; // r0@34
  unsigned int v21; // r1@35
  unsigned int v22; // r1@37
  void *v23; // r1@39
  unsigned int *v24; // r0@40
  unsigned int v25; // r2@41
  unsigned int *v26; // r5@44
  unsigned int v27; // r0@45
  int v28; // [sp+8h] [bp-30h]@1
  int v29; // [sp+Ch] [bp-2Ch]@1
  int v30; // [sp+10h] [bp-28h]@5
  int v31; // [sp+14h] [bp-24h]@5
  int v32; // [sp+18h] [bp-20h]@5
  int v33; // [sp+1Ch] [bp-1Ch]@5
  char v34; // [sp+20h] [bp-18h]@5

  v3 = a1;
  v28 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v29 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 + 1, v6) );
  }
  v30 = *(_DWORD *)(a3 + 8);
  v33 = v4;
  v31 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implISt10error_codeEESaIS8_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v32,
    0,
    (int)&v34,
    &v33,
    (int)&v28);
  result = (unsigned int *)v32;
  if ( v32 )
    v9 = (*(int (**)(void))(*(_DWORD *)v32 + 16))();
    result = (unsigned int *)v32;
  else
    v9 = 0;
  v32 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    result = (unsigned int *)(v10 + 4);
      v11 = __ldrex(result);
    while ( __strex(v11 - 1, result) );
    if ( v11 == 1 )
    {
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      __dmb();
      do
        result = (unsigned int *)__ldrex(v12);
      while ( __strex((unsigned int)result - 1, v12) );
      if ( result == (unsigned int *)1 )
        result = (unsigned int *)(*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
    }
  v13 = v32;
    result = (unsigned int *)(v32 + 4);
      v14 = __ldrex(result);
    while ( __strex(v14 - 1, result) );
    if ( v14 == 1 )
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
        result = (unsigned int *)__ldrex(v15);
      while ( __strex((unsigned int)result - 1, v15) );
        result = (unsigned int *)(*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v29;
  if ( v29 )
    result = (unsigned int *)(v29 + 4);
      v17 = __ldrex(result);
    while ( __strex(v17 - 1, result) );
    if ( v17 == 1 )
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        result = (unsigned int *)__ldrex(v18);
      while ( __strex((unsigned int)result - 1, v18) );
        result = (unsigned int *)(*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_QWORD *)v3;
    if ( *(_QWORD *)v3 >> 32 )
      v20 = (unsigned int *)(HIDWORD(v19) + 8);
        v21 = __ldrex(v20);
      while ( __strex(v21 + 1, v20) );
        v22 = __ldrex(v20);
      while ( __strex(v22 + 1, v20) );
    v23 = j_operator new(0x1Cu);
    *((_DWORD *)v23 + 1) = 1;
    *((_DWORD *)v23 + 2) = 3;
    *((_DWORD *)v23 + 4) = 0;
    *(_DWORD *)v23 = &off_26D7B28;
    *(_QWORD *)((char *)v23 + 20) = v19;
    if ( HIDWORD(v19) )
      v24 = (unsigned int *)(HIDWORD(v19) + 8);
        v25 = __ldrex(v24);
      while ( __strex(v25 + 1, v24) );
    *(_DWORD *)(v19 + 28) = v23;
    result = j_pplx::details::_CancellationTokenState::_RegisterCallback(
               *(pplx::details::_CancellationTokenState **)(v19 + 24),
               (pplx::details::_CancellationTokenRegistration *)v23);
      v26 = (unsigned int *)(HIDWORD(v19) + 8);
        v27 = __ldrex(v26);
      while ( __strex(v27 - 1, v26) );
      if ( v27 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v19) + 12))(HIDWORD(v19));
        result = (unsigned int *)__ldrex(v26);
      while ( __strex((unsigned int)result - 1, v26) );
        result = (unsigned int *)(*(int (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v19) + 12))(HIDWORD(v19));
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27696AC;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 136);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::matchmaking::match_ticket_details_response::~match_ticket_details_response((xbox::services::matchmaking::match_ticket_details_response *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<web::http::http_response>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r6@5
  int v12; // r8@5
  unsigned int *v13; // r0@7
  unsigned int v14; // r1@9
  bool v15; // zf@11
  signed __int64 v16; // r6@16
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = pthread_mutex_lock(v6);
    if ( v9 )
      sub_119CCFC(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v15 = v10 == 3;
    if ( v10 != 3 )
      v15 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v15 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v16 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
        v11 = *(_DWORD *)(v5 + 16);
      }
      else
        ++*v13;
    }
    if ( v11 )
      v17 = (unsigned int *)(v11 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    *(_DWORD *)(v5 + 16) = v12;
LABEL_33:
  if ( v8 == 1 )
    v16 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v16 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    pthread_mutex_unlock(v6);
  if ( v16 )
    result = v16 ^ 1;
    if ( &pthread_create )
      v23 = pthread_mutex_lock((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_119CCFC(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v5 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<web::http::http_response>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<web::http::http_response>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = operator new(0x10u);
      v26[2] = 0;
      v27 = operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<web::http::http_response>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<web::http::http_response>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v5; // r0@8
  int v6; // r1@12
  int v7; // r5@13

  v2 = a1;
  *(_QWORD *)(a1 + 80) = *(_QWORD *)a2;
  EntityInteraction::setInteractText((int *)(a1 + 88), (int *)(a2 + 8));
  if ( &pthread_create )
  {
    v3 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v3 )
      sub_21E5E14(v3);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v5 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v5 )
        sub_21E5E14(v5);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v6 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v6 )
      do
      {
        v7 = *(_DWORD *)(v6 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v6);
        v6 = v7;
      }
      while ( v7 );
  return result;
}


int __fastcall pplx::task<int>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  __int64 v8; // r0@7
  int v9; // r6@7
  unsigned int *v10; // r7@14
  int v11; // r6@21
  unsigned int *v12; // r7@28
  int v13; // r6@35
  unsigned int *v14; // r7@42
  int v15; // r0@50
  int v16; // r1@50
  unsigned int *v17; // r1@51
  unsigned int v18; // r2@53
  unsigned int *v19; // r2@57
  unsigned int v20; // r1@59
  int v22; // [sp+0h] [bp-38h]@50
  int v23; // [sp+4h] [bp-34h]@50
  int v24; // [sp+8h] [bp-30h]@1
  int v25; // [sp+Ch] [bp-2Ch]@1
  int v26; // [sp+10h] [bp-28h]@7
  char v27; // [sp+14h] [bp-24h]@7
  int v28; // [sp+18h] [bp-20h]@7
  int v29; // [sp+1Ch] [bp-1Ch]@7
  char v30; // [sp+20h] [bp-18h]@7

  v3 = a1;
  v24 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v25 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v26 = *(_DWORD *)(a3 + 8);
  v29 = v4;
  std::__shared_ptr<pplx::details::_Task_impl<int>,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_Task_impl<int>>,pplx::details::_CancellationTokenState *&,pplx::scheduler_ptr &>(
    (int)&v27,
    (int)&v30,
    &v29,
    (int)&v24);
  v8 = *(_QWORD *)&v27;
  *(_DWORD *)&v27 = 0;
  v28 = 0;
  *(_DWORD *)v3 = v8;
  v9 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = HIDWORD(v8);
  if ( v9 )
    HIDWORD(v8) = v9 + 4;
        LODWORD(v8) = __ldrex((unsigned int *)HIDWORD(v8));
      while ( __strex(v8 - 1, (unsigned int *)HIDWORD(v8)) );
      LODWORD(v8) = (*(_DWORD *)HIDWORD(v8))--;
    if ( (_DWORD)v8 == 1 )
      v10 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          LODWORD(v8) = __ldrex(v10);
        while ( __strex(v8 - 1, v10) );
      }
      else
        LODWORD(v8) = (*v10)--;
      if ( (_DWORD)v8 == 1 )
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v11 = v28;
  if ( v28 )
    HIDWORD(v8) = v28 + 4;
      v12 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          LODWORD(v8) = __ldrex(v12);
        while ( __strex(v8 - 1, v12) );
        LODWORD(v8) = (*v12)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v13 = v25;
  if ( v25 )
    HIDWORD(v8) = v25 + 4;
      v14 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          LODWORD(v8) = __ldrex(v14);
        while ( __strex(v8 - 1, v14) );
        LODWORD(v8) = (*v14)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  if ( v4 != 2 )
    v15 = *(_DWORD *)v3;
    v22 = *(_DWORD *)v3;
    v16 = *(_DWORD *)(v3 + 4);
    v23 = v16;
    if ( v16 )
      v17 = (unsigned int *)(v16 + 8);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    pplx::details::_Task_impl_base::_RegisterCancellation(v15, (unsigned __int64 *)&v22);
    LODWORD(v8) = v23;
    if ( v23 )
      v19 = (unsigned int *)(v23 + 8);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        LODWORD(v8) = (*(int (__cdecl **)(_DWORD))(*(_DWORD *)v8 + 12))(v8);
  return v8;
}


void __fastcall pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::~_Task_impl(a1);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_12achievements19achievements_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int (**__fastcall pplx::task_completion_event<int>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r1@8 OVERLAPPED
  int v8; // r2@8
  int v9; // r2@9
  unsigned int *v10; // r2@10
  unsigned int v11; // r1@12
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@17

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = pthread_mutex_lock((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_119CCFC(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 20) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 28) )
    pplx::details::_Task_impl<int>::_FinalizeAndRunContinuations(*v2, *(_DWORD *)(v4 + 16));
  else
    *(_QWORD *)&v7 = *(_QWORD *)(v4 + 4);
    if ( v7 == v8 )
    {
      std::vector<std::shared_ptr<pplx::details::_Task_impl<int>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<int>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<int>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    }
    else
      *(_DWORD *)v7 = *v2;
      v9 = v2[1];
      *(_DWORD *)(v7 + 4) = v9;
      if ( v9 )
      {
        v10 = (unsigned int *)(v9 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 + 1, v10) );
          v7 = *(_DWORD *)(v4 + 4);
        }
        else
          ++*v10;
      }
      *(_DWORD *)(v4 + 4) = v7 + 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v5);
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_11leaderboard18leaderboard_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8((void *)v1);
}


xbox::services::social::xbox_social_relationship_result *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::get(xbox::services::social::xbox_social_relationship_result *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::get(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r7@1
  unsigned int *v5; // r0@3
  unsigned int v6; // r1@5
  int v7; // r8@8
  unsigned int *v8; // r1@9
  unsigned int v9; // r0@11
  unsigned int *v10; // r6@15
  unsigned int v11; // r0@17
  int v12; // r0@24
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@26
  int v14; // r0@30
  int v15; // r1@34
  int v16; // r5@35

  v2 = a2;
  v3 = a1;
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  v4 = *(_DWORD *)(a2 + 4);
  if ( v4 != *(_DWORD *)(a1 + 84) )
  {
    if ( v4 )
    {
      v5 = (unsigned int *)(v4 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 + 1, v5) );
      }
      else
        ++*v5;
    }
    v7 = *(_DWORD *)(v3 + 84);
    if ( v7 )
      v8 = (unsigned int *)(v7 + 4);
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
        v9 = (*v8)--;
      if ( v9 == 1 )
        v10 = (unsigned int *)(v7 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 - 1, v10) );
        }
        else
          v11 = (*v10)--;
        if ( v11 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
    *(_DWORD *)(v3 + 84) = v4;
  }
  *(_QWORD *)(v3 + 88) = *(_QWORD *)(v2 + 8);
  EntityInteraction::setInteractText((int *)(v3 + 96), (int *)(v2 + 16));
  if ( &pthread_create )
    v12 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 20));
    if ( v12 )
      sub_21E5E14(v12);
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
      v14 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 36));
      if ( v14 )
        sub_21E5E14(v14);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 36));
    else
    v15 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v15 )
      do
        v16 = *(_DWORD *)(v15 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v15);
        v15 = v16;
      while ( v16 );
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_CreateImpl(
           a1,
           a2,
           a3);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 23);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 20);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::system::token_result::~token_result((xbox::services::system::token_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


unsigned int __fastcall pplx::task_from_result<std::string>(int a1, int *a2, int a3)
{
  int *v3; // r6@1
  int v4; // r4@1
  int v5; // r5@1
  void *v6; // r0@1
  unsigned int *v7; // r0@3
  unsigned int v8; // r1@5
  int v9; // r0@8
  unsigned int *v10; // r0@9
  unsigned int v11; // r1@11
  int v12; // r0@14
  unsigned int *v13; // r1@15
  unsigned int v14; // r2@16
  __int16 v15; // r0@18
  int v16; // r0@20
  unsigned int *v17; // r1@21
  unsigned int v18; // r2@22
  unsigned int result; // r0@25
  int v20; // r4@25
  unsigned int *v21; // r1@26
  unsigned int *v22; // r5@32
  int v23; // r4@39
  unsigned int *v24; // r1@40
  unsigned int *v25; // r5@46
  int v26; // r4@53
  unsigned int *v27; // r1@54
  unsigned int *v28; // r5@60
  unsigned int *v29; // r2@68
  signed int v30; // r1@70
  int v31; // [sp+0h] [bp-58h]@8
  int v32; // [sp+4h] [bp-54h]@8
  int v33; // [sp+8h] [bp-50h]@14
  int v34; // [sp+Ch] [bp-4Ch]@18
  char v35; // [sp+14h] [bp-44h]@18
  int v36; // [sp+18h] [bp-40h]@18
  void *ptr; // [sp+1Ch] [bp-3Ch]@18
  int v38; // [sp+20h] [bp-38h]@18
  int v39; // [sp+24h] [bp-34h]@18
  char v40; // [sp+28h] [bp-30h]@18
  char v41; // [sp+29h] [bp-2Fh]@18
  int v42; // [sp+30h] [bp-28h]@2
  int v43; // [sp+34h] [bp-24h]@2
  int v44; // [sp+38h] [bp-20h]@1
  int v45; // [sp+3Ch] [bp-1Ch]@1
  int v46; // [sp+40h] [bp-18h]@2

  v3 = a2;
  v4 = a1;
  v5 = a3;
  j__ZNSt12__shared_ptrIN4pplx7details27_Task_completion_event_implISsEELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS3_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)&v45);
  sub_119C854(&v44, v3);
  pplx::task_completion_event<std::string>::set(&v45, &v44);
  v6 = (void *)(v44 - 12);
  if ( (int *)(v44 - 12) != &dword_28898C0 )
  {
    v29 = (unsigned int *)(v44 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
    }
    else
      v30 = (*v29)--;
    if ( v30 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v6);
  }
  v42 = v45;
  v43 = v46;
  if ( v46 )
    v7 = (unsigned int *)(v46 + 4);
        v8 = __ldrex(v7);
      while ( __strex(v8 + 1, v7) );
      ++*v7;
  v31 = *(_DWORD *)v5;
  v9 = *(_DWORD *)(v5 + 4);
  v32 = v9;
  if ( v9 )
    v10 = (unsigned int *)(v9 + 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 + 1, v10) );
      ++*v10;
  v33 = *(_DWORD *)(v5 + 8);
  v12 = *(_DWORD *)(v5 + 12);
  if ( v12 )
    v13 = (unsigned int *)(v12 + 4);
    __dmb();
    do
      v14 = __ldrex(v13);
    while ( __strex(v14 + 1, v13) );
  v34 = v12;
  v38 = 0;
  v39 = 0;
  v36 = 0;
  ptr = 0;
  v35 = 0;
  v15 = *(_WORD *)(v5 + 40);
  v40 = *(_WORD *)(v5 + 40);
  v41 = HIBYTE(v15);
  pplx::create_task<pplx::task_completion_event<std::string>>(v4, (int)&v42, (int)&v31);
  if ( ptr )
    operator delete(ptr);
  v16 = v34;
  if ( v34 )
    v17 = (unsigned int *)(v34 + 4);
      v18 = __ldrex(v17);
    while ( __strex(v18 - 1, v17) );
    if ( v18 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v16 + 8))(v16);
  result = 0;
  v34 = 0;
  v20 = v32;
  if ( v32 )
    v21 = (unsigned int *)(v32 + 4);
        result = __ldrex(v21);
      while ( __strex(result - 1, v21) );
      result = (*v21)--;
    if ( result == 1 )
      v22 = (unsigned int *)(v20 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v22);
        while ( __strex(result - 1, v22) );
      }
      else
        result = (*v22)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
  v23 = v43;
  if ( v43 )
    v24 = (unsigned int *)(v43 + 4);
        result = __ldrex(v24);
      while ( __strex(result - 1, v24) );
      result = (*v24)--;
      v25 = (unsigned int *)(v23 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 8))(v23);
          result = __ldrex(v25);
        while ( __strex(result - 1, v25) );
        result = (*v25)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v23 + 12))(v23);
  v26 = v46;
    v27 = (unsigned int *)(v46 + 4);
        result = __ldrex(v27);
      while ( __strex(result - 1, v27) );
      result = (*v27)--;
      v28 = (unsigned int *)(v26 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
          result = __ldrex(v28);
        while ( __strex(result - 1, v28) );
        result = (*v28)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(std::string)> pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r4@1
  void **v5; // r0@2
  int result; // r0@4
  void **v7; // r0@5
  int v8; // r6@5
  void **v9; // r5@5
  void (__fastcall *v10)(void **, int, signed int); // r3@5
  void **v11; // r4@8
  void (__fastcall *v12)(void **, void **, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<unsigned char ()(std::string)> pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1};
      goto LABEL_4;
    case 1:
      v5 = (void **)*a2;
LABEL_4:
      *v4 = v5;
      return 0;
    case 2:
      v7 = (void **)j_operator new(0x10u);
      v8 = *v3;
      v9 = v7;
      v7[2] = 0;
      v10 = *(void (__fastcall **)(void **, int, signed int))(v8 + 8);
      if ( v10 )
      {
        v10(v7, v8, 2);
        v9[3] = *(void **)(v8 + 12);
        v9[2] = *(void **)(v8 + 8);
      }
      result = 0;
      *v4 = v9;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(v11, v11, 3);
        j_operator delete(v11);
      break;
    default:
  }
  return 0;
}


int __fastcall std::_Function_handler<std::string ()(unsigned char),std::function<std::string ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::string>(std::function const&<std::string ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke(int a1, int *a2)
{
  int v2; // r1@1

  v2 = *a2;
  if ( !*(_DWORD *)(v2 + 8) )
    sub_21E5F48();
  return (*(int (**)(void))(v2 + 12))();
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::achievements::achievements_result::achievements_result((xbox::services::achievements::achievements_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 92) = 0;
  *(_DWORD *)(v1 + 96) = v3;
  *(_DWORD *)(v1 + 100) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 112) = 0;
  *(_DWORD *)(v1 + 104) = 0;
  *(_DWORD *)(v1 + 108) = 0;
  return result;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r5@8
  unsigned int *v9; // r1@9
  unsigned int v10; // r0@11
  unsigned int *v11; // r6@15
  unsigned int v12; // r0@17
  unsigned int *v14; // r2@23
  signed int v15; // r1@25

  v1 = this;
  *(_DWORD *)this = &off_2763728;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 24);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v14 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
    }
    else
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 21);
  if ( v8 )
    v9 = (unsigned int *)(v8 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
      }
      else
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<void>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = pplx::task<void>::task<pplx::task_completion_event<void>>(v4, (int)&v15, v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


void __fastcall pplx::details::_Task_impl<Social::XboxProfile>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<Social::XboxProfile>::~_Task_impl(a1);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>),std::function<unsigned char ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


_DWORD *__fastcall pplx::details::_CancellationTokenCallback<web::http::client::details::asio_context::start_request(void)::{lambda(std::shared_ptr<web::http::client::details::asio_context>)#1}::operator() const(std::shared_ptr<web::http::client::details::asio_context>)::{lambda(void)#1}>::~_CancellationTokenCallback(int a1)
{
  _DWORD *v1; // r5@1
  int v2; // r0@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@3

  v1 = (_DWORD *)a1;
  *(_DWORD *)a1 = &off_276CA80;
  v2 = *(_DWORD *)(a1 + 24);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 8);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 - 1, v3) );
    if ( v4 == 1 )
      (*(void (**)(void))(*(_DWORD *)v2 + 12))();
  }
  *v1 = &off_26D7B40;
  return v1;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  unsigned int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-88h]@10
  int v33; // [sp+4h] [bp-84h]@10
  int v34; // [sp+8h] [bp-80h]@16
  int v35; // [sp+Ch] [bp-7Ch]@20
  char v36; // [sp+14h] [bp-74h]@20
  int v37; // [sp+18h] [bp-70h]@20
  void *ptr; // [sp+1Ch] [bp-6Ch]@20
  int v39; // [sp+20h] [bp-68h]@20
  int v40; // [sp+24h] [bp-64h]@20
  char v41; // [sp+28h] [bp-60h]@20
  char v42; // [sp+29h] [bp-5Fh]@20
  int v43; // [sp+30h] [bp-58h]@4
  int v44; // [sp+34h] [bp-54h]@4
  char v45; // [sp+38h] [bp-50h]@3
  int v46; // [sp+64h] [bp-24h]@3
  int v47; // [sp+68h] [bp-20h]@1
  int v48; // [sp+6Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_6system26token_and_signature_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>::xbox_live_result(
    (xbox::services::system::token_and_signature_result *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<void>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<void>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<void>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<void>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)#1}::operator() const(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


void __fastcall pplx::details::_Task_impl<Social::XboxProfile>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = pplx::details::_Task_impl<Social::XboxProfile>::~_Task_impl(a1);
  j_j_j__ZdlPv_5((void *)v1);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<bool>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = this;
  *(_DWORD *)this = &off_26DD958;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_2(v1);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::game_server_platform::game_server_ticket_status::game_server_ticket_status((xbox::services::game_server_platform::game_server_ticket_status *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 64) = 0;
  *(_DWORD *)(v1 + 68) = v3;
  *(_DWORD *)(v1 + 72) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 84) = 0;
  *(_DWORD *)(v1 + 76) = 0;
  *(_DWORD *)(v1 + 80) = 0;
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<bool>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r1@8 OVERLAPPED
  int v8; // r2@8
  int v9; // r2@9
  unsigned int *v10; // r2@10
  unsigned int v11; // r1@12
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@17

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = pthread_mutex_lock((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_119CCFC(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 20) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 28) )
    pplx::details::_Task_impl<bool>::_FinalizeAndRunContinuations(*v2, *(_BYTE *)(v4 + 16));
  else
    *(_QWORD *)&v7 = *(_QWORD *)(v4 + 4);
    if ( v7 == v8 )
    {
      std::vector<std::shared_ptr<pplx::details::_Task_impl<bool>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<bool>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<bool>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    }
    else
      *(_DWORD *)v7 = *v2;
      v9 = v2[1];
      *(_DWORD *)(v7 + 4) = v9;
      if ( v9 )
      {
        v10 = (unsigned int *)(v9 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 + 1, v10) );
          v7 = *(_DWORD *)(v4 + 4);
        }
        else
          ++*v10;
      }
      *(_DWORD *)(v4 + 4) = v7 + 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v5);
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_276687C;
  v12 = (xbox::services *)j_xbox::services::presence::presence_record::presence_record((xbox::services::presence::presence_record *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 100) = 0;
  *(_DWORD *)(v3 + 104) = v13;
  *(_DWORD *)(v3 + 108) = &unk_28898CC;
  return v3;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int (__fastcall *__fastcall pplx::details::_MakeUnitToTFunc<std::error_code>(int a1, int a2))(int a1, int *a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  int (__fastcall *result)(int, int *); // r0@5
  char v8; // [sp+4h] [bp-24h]@2
  int (*v9)(void); // [sp+Ch] [bp-1Ch]@1
  int v10; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v9 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v8);
    v10 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v9 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v8, 2);
    v5 = v9;
    v6[3] = v10;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  result = std::_Function_handler<std::error_code ()(unsigned char),std::function<std::error_code ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::error_code>(std::function const&<std::error_code ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke;
  *(_DWORD *)(v3 + 8) = std::_Function_base::_Base_manager<std::function<std::error_code ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::error_code>(std::function const&<std::error_code ()(void)>)::{lambda(unsigned char)#1}>::_M_manager;
  *(_DWORD *)(v3 + 12) = std::_Function_handler<std::error_code ()(unsigned char),std::function<std::error_code ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::error_code>(std::function const&<std::error_code ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke;
    result = (int (__fastcall *)(int, int *))v5();
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::~_Task_impl(a1);
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  __int64 v8; // r6@4
  void *v9; // r0@9
  unsigned int *v10; // r0@11
  unsigned int v11; // r1@13
  int v12; // r0@16
  unsigned int *v13; // r0@17
  unsigned int v14; // r1@19
  int v15; // r0@22
  unsigned int *v16; // r1@23
  unsigned int v17; // r2@24
  __int16 v18; // r0@26
  int v19; // r0@28
  unsigned int *v20; // r1@29
  unsigned int v21; // r2@30
  unsigned int result; // r0@33
  int v23; // r4@33
  unsigned int *v24; // r1@34
  unsigned int *v25; // r5@40
  int v26; // r4@47
  unsigned int *v27; // r1@48
  unsigned int *v28; // r5@54
  int v29; // r4@61
  unsigned int *v30; // r1@62
  unsigned int *v31; // r5@68
  unsigned int *v32; // r2@76
  signed int v33; // r1@78
  unsigned int *v34; // r2@80
  signed int v35; // r1@82
  int v36; // [sp+0h] [bp-70h]@16
  int v37; // [sp+4h] [bp-6Ch]@16
  int v38; // [sp+8h] [bp-68h]@22
  int v39; // [sp+Ch] [bp-64h]@26
  char v40; // [sp+14h] [bp-5Ch]@26
  int v41; // [sp+18h] [bp-58h]@26
  void *ptr; // [sp+1Ch] [bp-54h]@26
  int v43; // [sp+20h] [bp-50h]@26
  int v44; // [sp+24h] [bp-4Ch]@26
  char v45; // [sp+28h] [bp-48h]@26
  char v46; // [sp+29h] [bp-47h]@26
  int v47; // [sp+2Ch] [bp-44h]@10
  int v48; // [sp+30h] [bp-40h]@10
  int v49; // [sp+34h] [bp-3Ch]@3
  __int64 v50; // [sp+38h] [bp-38h]@4
  int v51; // [sp+4Ch] [bp-24h]@3
  int v52; // [sp+50h] [bp-20h]@1
  int v53; // [sp+54h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v52 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_15user_statistics22user_statistics_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v53);
  if ( v53 )
    v6 = (*(int (**)(void))(*(_DWORD *)v53 + 16))();
  v52 = v6;
  j_xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>::xbox_live_result(
    (xbox::services::user_statistics::user_statistics_result *)&v49,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::set(
    (void ***)&v52,
    (int)&v49);
  v7 = (void *)(v51 - 12);
  if ( (int *)(v51 - 12) != &dword_28898C0 )
  {
    v32 = (unsigned int *)(v51 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
    }
    else
      v33 = (*v32)--;
    if ( v33 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  v8 = v50;
  if ( (_DWORD)v50 != HIDWORD(v50) )
    do
      j_std::_Destroy<xbox::services::user_statistics::service_configuration_statistic>(v8);
      LODWORD(v8) = v8 + 16;
    while ( HIDWORD(v8) != (_DWORD)v8 );
    LODWORD(v8) = v50;
  if ( (_DWORD)v8 )
    j_operator delete((void *)v8);
  v9 = (void *)(v49 - 12);
  if ( (int *)(v49 - 12) != &dword_28898C0 )
    v34 = (unsigned int *)(v49 - 4);
        v35 = __ldrex(v34);
      while ( __strex(v35 - 1, v34) );
      v35 = (*v34)--;
    if ( v35 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  v47 = v52;
  v48 = v53;
    v10 = (unsigned int *)(v53 + 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 + 1, v10) );
      ++*v10;
  v36 = *(_DWORD *)v4;
  v12 = *(_DWORD *)(v4 + 4);
  v37 = v12;
  if ( v12 )
    v13 = (unsigned int *)(v12 + 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 + 1, v13) );
      ++*v13;
  v38 = *(_DWORD *)(v4 + 8);
  v15 = *(_DWORD *)(v4 + 12);
  if ( v15 )
    v16 = (unsigned int *)(v15 + 4);
    __dmb();
      v17 = __ldrex(v16);
    while ( __strex(v17 + 1, v16) );
  v39 = v15;
  v43 = 0;
  v44 = 0;
  v41 = 0;
  ptr = 0;
  v40 = 0;
  v18 = *(_WORD *)(v4 + 40);
  v45 = *(_WORD *)(v4 + 40);
  v46 = HIBYTE(v18);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>(
    v3,
    (int)&v47,
    (int)&v36);
  if ( ptr )
    j_operator delete(ptr);
  v19 = v39;
  if ( v39 )
    v20 = (unsigned int *)(v39 + 4);
      v21 = __ldrex(v20);
    while ( __strex(v21 - 1, v20) );
    if ( v21 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v19 + 8))(v19);
  result = 0;
  v39 = 0;
  v23 = v37;
  if ( v37 )
    v24 = (unsigned int *)(v37 + 4);
        result = __ldrex(v24);
      while ( __strex(result - 1, v24) );
      result = (*v24)--;
    if ( result == 1 )
      v25 = (unsigned int *)(v23 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 8))(v23);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v25);
        while ( __strex(result - 1, v25) );
      }
      else
        result = (*v25)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v23 + 12))(v23);
  v26 = v48;
  if ( v48 )
    v27 = (unsigned int *)(v48 + 4);
        result = __ldrex(v27);
      while ( __strex(result - 1, v27) );
      result = (*v27)--;
      v28 = (unsigned int *)(v26 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
          result = __ldrex(v28);
        while ( __strex(result - 1, v28) );
        result = (*v28)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
  v29 = v53;
    v30 = (unsigned int *)(v53 + 4);
        result = __ldrex(v30);
      while ( __strex(result - 1, v30) );
      result = (*v30)--;
      v31 = (unsigned int *)(v29 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
          result = __ldrex(v31);
        while ( __strex(result - 1, v31) );
        result = (*v31)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr const&<pplx::details::_ExceptionHolder>)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_RegisterTask(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::set(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::task<bool>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  __int64 v8; // r0@7
  int v9; // r6@7
  unsigned int *v10; // r7@14
  int v11; // r6@21
  unsigned int *v12; // r7@28
  int v13; // r6@35
  unsigned int *v14; // r7@42
  int v15; // r0@50
  int v16; // r1@50
  unsigned int *v17; // r1@51
  unsigned int v18; // r2@53
  unsigned int *v19; // r2@57
  unsigned int v20; // r1@59
  int v22; // [sp+0h] [bp-38h]@50
  int v23; // [sp+4h] [bp-34h]@50
  int v24; // [sp+8h] [bp-30h]@1
  int v25; // [sp+Ch] [bp-2Ch]@1
  int v26; // [sp+10h] [bp-28h]@7
  char v27; // [sp+14h] [bp-24h]@7
  int v28; // [sp+18h] [bp-20h]@7
  int v29; // [sp+1Ch] [bp-1Ch]@7
  char v30; // [sp+20h] [bp-18h]@7

  v3 = a1;
  v24 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v25 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v26 = *(_DWORD *)(a3 + 8);
  v29 = v4;
  std::__shared_ptr<pplx::details::_Task_impl<bool>,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_Task_impl<bool>>,pplx::details::_CancellationTokenState *&,pplx::scheduler_ptr &>(
    (int)&v27,
    (int)&v30,
    &v29,
    (int)&v24);
  v8 = *(_QWORD *)&v27;
  *(_DWORD *)&v27 = 0;
  v28 = 0;
  *(_DWORD *)v3 = v8;
  v9 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = HIDWORD(v8);
  if ( v9 )
    HIDWORD(v8) = v9 + 4;
        LODWORD(v8) = __ldrex((unsigned int *)HIDWORD(v8));
      while ( __strex(v8 - 1, (unsigned int *)HIDWORD(v8)) );
      LODWORD(v8) = (*(_DWORD *)HIDWORD(v8))--;
    if ( (_DWORD)v8 == 1 )
      v10 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          LODWORD(v8) = __ldrex(v10);
        while ( __strex(v8 - 1, v10) );
      }
      else
        LODWORD(v8) = (*v10)--;
      if ( (_DWORD)v8 == 1 )
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v11 = v28;
  if ( v28 )
    HIDWORD(v8) = v28 + 4;
      v12 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          LODWORD(v8) = __ldrex(v12);
        while ( __strex(v8 - 1, v12) );
        LODWORD(v8) = (*v12)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v13 = v25;
  if ( v25 )
    HIDWORD(v8) = v25 + 4;
      v14 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          LODWORD(v8) = __ldrex(v14);
        while ( __strex(v8 - 1, v14) );
        LODWORD(v8) = (*v14)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  if ( v4 != 2 )
    v15 = *(_DWORD *)v3;
    v22 = *(_DWORD *)v3;
    v16 = *(_DWORD *)(v3 + 4);
    v23 = v16;
    if ( v16 )
      v17 = (unsigned int *)(v16 + 8);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    pplx::details::_Task_impl_base::_RegisterCancellation(v15, (unsigned __int64 *)&v22);
    LODWORD(v8) = v23;
    if ( v23 )
      v19 = (unsigned int *)(v23 + 8);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        LODWORD(v8) = (*(int (__cdecl **)(_DWORD))(*(_DWORD *)v8 + 12))(v8);
  return v8;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r6@1
  int v3; // r4@1
  int *v4; // r5@1
  int v5; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v7; // r0@8
  int v8; // r1@12
  int v9; // r5@13

  v2 = a2;
  v3 = a1;
  v4 = (int *)(a2 + 28);
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  EntityInteraction::setInteractText((int *)(a1 + 84), (int *)(a2 + 4));
  EntityInteraction::setInteractText((int *)(v3 + 88), (int *)(v2 + 8));
  EntityInteraction::setInteractText((int *)(v3 + 92), (int *)(v2 + 12));
  EntityInteraction::setInteractText((int *)(v3 + 96), (int *)(v2 + 16));
  EntityInteraction::setInteractText((int *)(v3 + 100), (int *)(v2 + 20));
  EntityInteraction::setInteractText((int *)(v3 + 104), (int *)(v2 + 24));
  EntityInteraction::setInteractText((int *)(v3 + 108), v4);
  if ( &pthread_create )
  {
    v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v3 + 20));
    if ( v5 )
      sub_21E5E14(v5);
  }
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
    {
      v7 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v3 + 36));
      if ( v7 )
        sub_21E5E14(v7);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v3 + 36));
    }
    else
    v8 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v8 )
      do
      {
        v9 = *(_DWORD *)(v8 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v8);
        v8 = v9;
      }
      while ( v9 );
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<std::string>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)#1}::operator() const(int a1, int a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  unsigned int *v5; // r2@3
  signed int v6; // r1@5
  char v7; // [sp+4h] [bp-74h]@1
  int v8; // [sp+60h] [bp-18h]@1

  v2 = a1;
  xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>::xbox_live_result(
    (xbox::services::social::xbox_user_profile *)&v7,
    a2);
  std::function<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>::operator()(
    v2,
    (int)&v7);
  v3 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
  {
    v5 = (unsigned int *)(v8 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 <= 0 )
      j_j_j_j__ZdlPv_9(v3);
  }
  xbox::services::social::xbox_user_profile::~xbox_user_profile((xbox::services::social::xbox_user_profile *)&v7);
  return 0;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(std::function const&<void ()(xbox::services::xbox_live_result<void>)>)::{lambda(xbox::services::xbox_live_result<void>)#1}::operator() const(int a1, int a2)
{
  int v2; // r4@1
  char *v3; // r0@1
  unsigned int *v5; // r2@3
  signed int v6; // r1@5
  __int64 v7; // [sp+0h] [bp-28h]@1
  char *v8; // [sp+8h] [bp-20h]@1

  v2 = a1;
  v8 = (char *)&unk_28898CC;
  v7 = *(_QWORD *)a2;
  EntityInteraction::setInteractText((int *)&v8, (int *)(a2 + 8));
  std::function<void ()(xbox::services::xbox_live_result<void>)>::operator()(v2, (int)&v7);
  v3 = v8 - 12;
  if ( (int *)(v8 - 12) != &dword_28898C0 )
  {
    v5 = (unsigned int *)(v8 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 <= 0 )
      j_j_j_j_j__ZdlPv_9(v3);
  }
  return 0;
}


int __fastcall pplx::task<TransactionStatus>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  __int64 v8; // r0@7
  int v9; // r6@7
  unsigned int *v10; // r7@14
  int v11; // r6@21
  unsigned int *v12; // r7@28
  int v13; // r6@35
  unsigned int *v14; // r7@42
  int v15; // r0@50
  int v16; // r1@50
  unsigned int *v17; // r1@51
  unsigned int v18; // r2@53
  unsigned int *v19; // r2@57
  unsigned int v20; // r1@59
  int v22; // [sp+0h] [bp-38h]@50
  int v23; // [sp+4h] [bp-34h]@50
  int v24; // [sp+8h] [bp-30h]@1
  int v25; // [sp+Ch] [bp-2Ch]@1
  int v26; // [sp+10h] [bp-28h]@7
  char v27; // [sp+14h] [bp-24h]@7
  int v28; // [sp+18h] [bp-20h]@7
  int v29; // [sp+1Ch] [bp-1Ch]@7
  char v30; // [sp+20h] [bp-18h]@7

  v3 = a1;
  v24 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v25 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v26 = *(_DWORD *)(a3 + 8);
  v29 = v4;
  std::__shared_ptr<pplx::details::_Task_impl<TransactionStatus>,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_Task_impl<TransactionStatus>>,pplx::details::_CancellationTokenState *&,pplx::scheduler_ptr &>(
    (int)&v27,
    (int)&v30,
    &v29,
    (int)&v24);
  v8 = *(_QWORD *)&v27;
  *(_DWORD *)&v27 = 0;
  v28 = 0;
  *(_DWORD *)v3 = v8;
  v9 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = HIDWORD(v8);
  if ( v9 )
    HIDWORD(v8) = v9 + 4;
        LODWORD(v8) = __ldrex((unsigned int *)HIDWORD(v8));
      while ( __strex(v8 - 1, (unsigned int *)HIDWORD(v8)) );
      LODWORD(v8) = (*(_DWORD *)HIDWORD(v8))--;
    if ( (_DWORD)v8 == 1 )
      v10 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          LODWORD(v8) = __ldrex(v10);
        while ( __strex(v8 - 1, v10) );
      }
      else
        LODWORD(v8) = (*v10)--;
      if ( (_DWORD)v8 == 1 )
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v11 = v28;
  if ( v28 )
    HIDWORD(v8) = v28 + 4;
      v12 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          LODWORD(v8) = __ldrex(v12);
        while ( __strex(v8 - 1, v12) );
        LODWORD(v8) = (*v12)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v13 = v25;
  if ( v25 )
    HIDWORD(v8) = v25 + 4;
      v14 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          LODWORD(v8) = __ldrex(v14);
        while ( __strex(v8 - 1, v14) );
        LODWORD(v8) = (*v14)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  if ( v4 != 2 )
    v15 = *(_DWORD *)v3;
    v22 = *(_DWORD *)v3;
    v16 = *(_DWORD *)(v3 + 4);
    v23 = v16;
    if ( v16 )
      v17 = (unsigned int *)(v16 + 8);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    pplx::details::_Task_impl_base::_RegisterCancellation(v15, (unsigned __int64 *)&v22);
    LODWORD(v8) = v23;
    if ( v23 )
      v19 = (unsigned int *)(v23 + 8);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        LODWORD(v8) = (*(int (__cdecl **)(_DWORD))(*(_DWORD *)v8 + 12))(v8);
  return v8;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::system::auth_flow_result>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r5@18
  int v11; // r7@18
  int v12; // r4@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r6@26
  unsigned int v16; // r0@28

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 13);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  j_xbox::services::system::auth_flow_result::~auth_flow_result((xbox::services::system::auth_flow_result *)(v1 + 2));
  v11 = *v1 >> 32;
  v10 = *v1;
  if ( v10 != v11 )
    do
      v12 = *(_DWORD *)(v10 + 4);
      if ( v12 )
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      v10 += 8;
    while ( v10 != v11 );
    v10 = *(_DWORD *)v1;
  if ( v10 )
    j_operator delete((void *)v10);
  return v1;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::~_Task_impl(a1);
}


signed int __fastcall pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r10@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r9@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r6@46
  _DWORD *v25; // r5@46
  _DWORD *v26; // r0@46
  _DWORD *v27; // [sp+0h] [bp-30h]@46
  int (__fastcall *v28)(void **, void ***, int); // [sp+8h] [bp-28h]@46
  int (__fastcall *v29)(int **); // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v27 = v24;
      v28 = std::_Function_base::_Base_manager<pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      v29 = std::_Function_handler<void ()(void),pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v25 = j_operator new(0x10u);
      v25[2] = 0;
      v26 = j_operator new(4u);
      *v26 = *v24;
      *v25 = v26;
      v25[2] = std::_Function_base::_Base_manager<pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      v25[3] = std::_Function_handler<void ()(void),pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v25,
        16);
      if ( v28 )
        ((void (__cdecl *)(_DWORD **))v28)(&v27);
    result = 1;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_Task_impl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_GetResult(xbox::services::system::token_and_signature_result *a1, int a2)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_GetResult(
           a1,
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>(int a1, int a2, int a3)
{
  int v3; // r8@1
  int v4; // r9@1
  int v5; // r6@1
  _DWORD *v6; // r7@1
  __int64 v7; // r0@1
  int *v8; // r0@1
  int v9; // r0@1
  int v10; // r0@1
  char *v11; // r0@1
  unsigned int *v12; // r0@3
  unsigned int v13; // r1@5
  int v14; // r0@8
  unsigned int *v15; // r0@9
  unsigned int v16; // r1@11
  int v17; // r0@14
  unsigned int *v18; // r1@15
  unsigned int v19; // r2@16
  __int16 v20; // r0@18
  int v21; // r0@20
  unsigned int *v22; // r1@21
  unsigned int v23; // r2@22
  int result; // r0@25
  int v25; // r4@25
  unsigned int *v26; // r1@26
  unsigned int *v27; // r5@32
  int v28; // r4@39
  unsigned int *v29; // r1@40
  unsigned int *v30; // r5@46
  int v31; // r4@53
  unsigned int *v32; // r1@54
  unsigned int *v33; // r5@60
  unsigned int *v34; // r2@68
  signed int v35; // r1@70
  int v36; // [sp+0h] [bp-A0h]@8
  int v37; // [sp+4h] [bp-9Ch]@8
  int v38; // [sp+8h] [bp-98h]@14
  int v39; // [sp+Ch] [bp-94h]@18
  char v40; // [sp+14h] [bp-8Ch]@18
  int v41; // [sp+18h] [bp-88h]@18
  void *ptr; // [sp+1Ch] [bp-84h]@18
  int v43; // [sp+20h] [bp-80h]@18
  int v44; // [sp+24h] [bp-7Ch]@18
  char v45; // [sp+28h] [bp-78h]@18
  char v46; // [sp+29h] [bp-77h]@18
  int v47; // [sp+30h] [bp-70h]@2
  int v48; // [sp+34h] [bp-6Ch]@2
  char v49; // [sp+38h] [bp-68h]@1
  void *v50; // [sp+64h] [bp-3Ch]@1
  int v51; // [sp+68h] [bp-38h]@1
  int v52; // [sp+6Ch] [bp-34h]@1
  char *v53; // [sp+70h] [bp-30h]@1
  int v54; // [sp+78h] [bp-28h]@1
  int v55; // [sp+7Ch] [bp-24h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v54 = 0;
  v55 = 0;
  v6 = j_operator new(0x64u);
  HIDWORD(v7) = 1;
  LODWORD(v7) = &off_276B088;
  *(_QWORD *)v6 = v7;
  v6[2] = 1;
  v6[3] = 0;
  v6[4] = 0;
  v6[5] = 0;
  v6[6] = 0;
  j___aeabi_memclr4_1((int)(v6 + 7), 44);
  v6[18] = &unk_28898CC;
  v8 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&unk_28898CC);
  v6[19] = 0;
  v6[20] = v8;
  v6[21] = &unk_28898CC;
  *((_WORD *)v6 + 48) = 0;
  v6[22] = 0;
  v6[23] = 0;
  v9 = *v6;
  v55 = (int)v6;
  v54 = (*(int (__fastcall **)(_DWORD *, void **))(v9 + 16))(v6, &`typeinfo for'std::_Sp_make_shared_tag);
  v10 = j___aeabi_memclr8_1((int)&v49, 44);
  v50 = &unk_28898CC;
  v51 = 0;
  v52 = ((int (__fastcall *)(int))byte_21E9640)(v10);
  v53 = (char *)&unk_28898CC;
  j_xbox::services::tournaments::tournament_request_result::operator=((int)&v49, v5);
  *(_QWORD *)&v51 = *(_QWORD *)(v5 + 48);
  EntityInteraction::setInteractText((int *)&v53, (int *)(v5 + 56));
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::set(
    (void ***)&v54,
    (int)&v49);
  v11 = v53 - 12;
  if ( (int *)(v53 - 12) != &dword_28898C0 )
  {
    v34 = (unsigned int *)(v53 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v35 = __ldrex(v34);
      while ( __strex(v35 - 1, v34) );
    }
    else
      v35 = (*v34)--;
    if ( v35 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  }
  j_xbox::services::tournaments::tournament_request_result::~tournament_request_result((xbox::services::tournaments::tournament_request_result *)&v49);
  v47 = v54;
  v48 = v55;
  if ( v55 )
    v12 = (unsigned int *)(v55 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 + 1, v12) );
      ++*v12;
  v36 = *(_DWORD *)v4;
  v14 = *(_DWORD *)(v4 + 4);
  v37 = v14;
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 + 1, v15) );
      ++*v15;
  v38 = *(_DWORD *)(v4 + 8);
  v17 = *(_DWORD *)(v4 + 12);
  if ( v17 )
    v18 = (unsigned int *)(v17 + 4);
    __dmb();
    do
      v19 = __ldrex(v18);
    while ( __strex(v19 + 1, v18) );
  v39 = v17;
  v43 = 0;
  v44 = 0;
  v41 = 0;
  ptr = 0;
  v40 = 0;
  v20 = *(_WORD *)(v4 + 40);
  v45 = *(_WORD *)(v4 + 40);
  v46 = HIBYTE(v20);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>>(
    v3,
    (int)&v47,
    (int)&v36);
  if ( ptr )
    j_operator delete(ptr);
  v21 = v39;
  if ( v39 )
    v22 = (unsigned int *)(v39 + 4);
      v23 = __ldrex(v22);
    while ( __strex(v23 - 1, v22) );
    if ( v23 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v21 + 8))(v21);
  result = 0;
  v39 = 0;
  v25 = v37;
  if ( v37 )
    v26 = (unsigned int *)(v37 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
    if ( result == 1 )
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
      }
      else
        result = (*v27)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  v28 = v48;
  if ( v48 )
    v29 = (unsigned int *)(v48 + 4);
        result = __ldrex(v29);
      while ( __strex(result - 1, v29) );
      result = (*v29)--;
      v30 = (unsigned int *)(v28 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
          result = __ldrex(v30);
        while ( __strex(result - 1, v30) );
        result = (*v30)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
  v31 = v55;
    v32 = (unsigned int *)(v55 + 4);
        result = __ldrex(v32);
      while ( __strex(result - 1, v32) );
      result = (*v32)--;
      v33 = (unsigned int *)(v31 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 8))(v31);
          result = __ldrex(v33);
        while ( __strex(result - 1, v33) );
        result = (*v33)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v31 + 12))(v31);
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_11tournaments19team_request_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::create_task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(int result, int a2)
{
  return pplx::create_task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(
           result,
           a2);
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>),std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  j_pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<int>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r5@18
  int v11; // r7@18
  int v12; // r4@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r6@26
  unsigned int v16; // r0@28

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 6);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v11 = *v1 >> 32;
  v10 = *v1;
  if ( v10 != v11 )
    do
      v12 = *(_DWORD *)(v10 + 4);
      if ( v12 )
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      v10 += 8;
    while ( v10 != v11 );
    v10 = *(_DWORD *)v1;
  if ( v10 )
    operator delete((void *)v10);
  return v1;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_FinalizeAndRunContinuations(int a1, unsigned __int64 *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r9@3
  int v8; // r0@4
  int v9; // r10@8
  unsigned int *v10; // r0@10
  unsigned int v11; // r1@12
  int *v12; // r4@16
  int *v13; // r10@16
  void *v14; // r8@18
  unsigned int *v15; // r1@19
  unsigned int v16; // r0@21
  unsigned int *v17; // r6@25
  unsigned int v18; // r0@27
  void **v19; // r0@33
  int *v20; // r9@36
  unsigned int *v21; // r2@37
  signed int v22; // r1@39
  int v23; // r7@45
  void *v24; // r0@47
  int v25; // r8@48
  unsigned int *v26; // r1@49
  unsigned int v27; // r0@51
  unsigned int *v28; // r7@55
  unsigned int v29; // r0@57
  void **v30; // r0@63
  void *v31; // r5@64
  unsigned int *v32; // r1@65
  unsigned int v33; // r0@67
  unsigned int *v34; // r6@72
  unsigned int v35; // r0@74
  int *v36; // r6@81
  int v37; // r7@82
  unsigned int *v38; // r1@83
  unsigned int v39; // r0@85
  unsigned int *v40; // r5@89
  unsigned int v41; // r0@91
  char v43; // [sp+Ch] [bp-3Ch]@47
  int v44; // [sp+10h] [bp-38h]@48
  int v45; // [sp+1Ch] [bp-2Ch]@37

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 22);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 22);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v12 = 0;
      v13 = 0;
      v5 = 0;
    else
      v4[4] = *(void **)v3;
      v9 = *(_DWORD *)(v3 + 4);
      if ( (void *)v9 != v4[5] )
      {
        if ( v9 )
        {
          v10 = (unsigned int *)(v9 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v11 = __ldrex(v10);
            while ( __strex(v11 + 1, v10) );
          }
          else
            ++*v10;
        }
        v14 = v4[5];
        if ( v14 )
          v15 = (unsigned int *)((char *)v14 + 4);
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
            v16 = (*v15)--;
          if ( v16 == 1 )
            v17 = (unsigned int *)((char *)v14 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v14 + 8))(v14);
            if ( &pthread_create )
            {
              __dmb();
              do
                v18 = __ldrex(v17);
              while ( __strex(v18 - 1, v17) );
            }
            else
              v18 = (*v17)--;
            if ( v18 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v14 + 12))(v14);
        v4[5] = (void *)v9;
      }
      *((_QWORD *)v4 + 3) = *(_QWORD *)(v3 + 8);
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      *((_BYTE *)*v2 + 44) = 1;
      v19 = *v2;
      v12 = (int *)**v2;
      *v19 = 0;
      v13 = (int *)v19[1];
      v19[1] = 0;
      v19[2] = 0;
      if ( v12 != v13 )
        v20 = v12;
        do
          v23 = *v20;
          if ( *(_DWORD *)(*v20 + 4) == 2 )
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v23 + 8))(v23, 1, 0, 0);
            j_xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>::xbox_live_result(
              (int)&v43,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_FinalizeAndRunContinuations(
              v23,
              (int)&v43);
            v24 = (void *)(v45 - 12);
            if ( (int *)(v45 - 12) != &dword_28898C0 )
              v21 = (unsigned int *)(v45 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v22 = __ldrex(v21);
                while ( __strex(v22 - 1, v21) );
              }
              else
                v22 = (*v21)--;
              if ( v22 <= 0 )
                j_j_j_j__ZdlPv_9(v24);
            v25 = v44;
            if ( v44 )
              v26 = (unsigned int *)(v44 + 4);
                  v27 = __ldrex(v26);
                while ( __strex(v27 - 1, v26) );
                v27 = (*v26)--;
              if ( v27 == 1 )
                v28 = (unsigned int *)(v25 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v29 = __ldrex(v28);
                  while ( __strex(v29 - 1, v28) );
                }
                else
                  v29 = (*v28)--;
                if ( v29 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
          v20 += 2;
        while ( v20 != v13 );
      v30 = *v2;
      if ( (*v2)[9] )
        v30[9] = 0;
        v31 = v30[10];
        v30[10] = 0;
        if ( v31 )
          v32 = (unsigned int *)((char *)v31 + 4);
              v33 = __ldrex(v32);
            while ( __strex(v33 - 1, v32) );
            v33 = (*v32)--;
          if ( v33 == 1 )
            v34 = (unsigned int *)((char *)v31 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
                v35 = __ldrex(v34);
              while ( __strex(v35 - 1, v34) );
              v35 = (*v34)--;
            if ( v35 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
        v5 = 1;
      else
    if ( v12 != v13 )
      v36 = v12;
      do
        v37 = v36[1];
        if ( v37 )
          v38 = (unsigned int *)(v37 + 4);
              v39 = __ldrex(v38);
            while ( __strex(v39 - 1, v38) );
            v39 = (*v38)--;
          if ( v39 == 1 )
            v40 = (unsigned int *)(v37 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v37 + 8))(v37);
                v41 = __ldrex(v40);
              while ( __strex(v41 - 1, v40) );
              v41 = (*v40)--;
            if ( v41 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v37 + 12))(v37);
        v36 += 2;
      while ( v36 != v13 );
    if ( v12 )
      j_operator delete(v12);
  }
  return v5;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


_DWORD *__fastcall pplx::details::_CancellationTokenCallback<pplx::details::_JoinAllTokens_Add(pplx::cancellation_token_source const&,pplx::details::_CancellationTokenState *)::{lambda(void)#1}>::~_CancellationTokenCallback(int a1)
{
  _DWORD *v1; // r5@1
  int v2; // r0@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@3

  v1 = (_DWORD *)a1;
  *(_DWORD *)a1 = &off_26DD698;
  v2 = *(_DWORD *)(a1 + 20);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 - 1, v3) );
    if ( v4 == 1 )
      (*(void (**)(void))(*(_DWORD *)v2 + 8))();
  }
  *v1 = &off_26D7B40;
  return v1;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7((void *)v1);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = a1;
  *(_DWORD *)a1 = &off_2768720;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  j_xbox::services::system::auth_flow_result::~auth_flow_result((xbox::services::system::auth_flow_result *)(v1 + 80));
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_5((pplx::details::_Task_impl_base *)v1);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r6@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  char v17; // [sp+4h] [bp-4Ch]@7
  int v18; // [sp+8h] [bp-48h]@8
  int v19; // [sp+34h] [bp-1Ch]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 68) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 76) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>::xbox_live_result(
      (int)&v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v17);
    v8 = (void *)(v19 - 12);
    if ( (int *)(v19 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v19 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)&v18);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


__int64 __fastcall pplx::task<std::error_code>::get(_QWORD *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  _QWORD *v3; // r4@1
  __int64 result; // r0@3
  char *v5; // r0@4
  int v6; // r3@4
  char *v7; // r4@6
  int v8; // r3@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26D7A9C;
    sub_21E94B4((void **)v7 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v7,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v8);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26DD7D0;
    *((_DWORD *)v5 + 1) = &unk_28898CC;
    j_j___cxa_throw_0((int)v5, (int)&`typeinfo for'pplx::task_canceled, (int)pplx::task_canceled::~task_canceled, v6);
  LODWORD(result) = *((_QWORD *)*v2 + 10) >> 32;
  HIDWORD(result) = *((_QWORD *)*v2 + 10);
  *v3 = *((_QWORD *)*v2 + 10);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::set(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<web::http::http_response>::_StoreException<std::__exception_ptr::exception_ptr>(int *a1, const std::__exception_ptr::exception_ptr *a2, int a3)
{
  return pplx::task_completion_event<web::http::http_response>::_StoreException<std::__exception_ptr::exception_ptr>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


  return pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}::operator()
{
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::set(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::set(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<std::error_code>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@1
  int v10; // r0@2
  int v11; // r6@4
  int v12; // r8@4
  unsigned int *v13; // r0@6
  unsigned int v14; // r1@7
  unsigned int *v15; // r0@10
  unsigned int v16; // r1@11
  unsigned int *v17; // r7@13
  unsigned int v18; // r0@14
  bool v19; // zf@18
  signed __int64 v20; // r6@23
  int v21; // r1@26
  signed int result; // r0@28
  int v23; // r0@29
  _DWORD *v24; // r6@31
  _DWORD *v25; // r5@31
  _DWORD *v26; // r0@31
  int v27; // r4@31
  unsigned int *v28; // r0@32
  unsigned int v29; // r1@33
  unsigned int *v30; // r5@35
  unsigned int v31; // r0@36
  _DWORD *v32; // [sp+4h] [bp-34h]@31
  void (*v33)(void); // [sp+Ch] [bp-2Ch]@31
  int (__fastcall *v34)(int **); // [sp+10h] [bp-28h]@31
  void (***v35)(void); // [sp+14h] [bp-24h]@31
  int v36; // [sp+18h] [bp-20h]@31

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  v9 = j_pthread_mutex_lock_1((pthread_mutex_t *)(a1 + 20));
  if ( v9 )
    sub_21E5E14(v9);
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
  {
    v19 = v10 == 3;
    if ( v10 != 3 )
      v19 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v19 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_24;
LABEL_23:
    v20 = 4294967297LL;
    goto LABEL_27;
  }
  if ( v10 == 4 )
    goto LABEL_23;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      __dmb();
      do
        v14 = __ldrex(v13);
      while ( __strex(v14 + 1, v13) );
      v11 = *(_DWORD *)(v5 + 16);
    }
    if ( v11 )
      v15 = (unsigned int *)(v11 + 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
      if ( v16 == 1 )
      {
        v17 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        __dmb();
        do
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        if ( v18 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
      }
    *(_DWORD *)(v5 + 16) = v12;
LABEL_24:
  if ( v8 == 1 )
    v20 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v20 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_27:
  j_pthread_mutex_unlock_1(v6);
  if ( v20 )
    result = v20 ^ 1;
    v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
    if ( v23 )
      sub_21E5E14(v23);
    *(_BYTE *)(v5 + 44) = 1;
    sub_21E03D8((pthread_cond_t *)(v5 + 40));
    j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v32 = v24;
      v33 = (void (*)(void))std::_Function_base::_Base_manager<pplx::details::_Task_impl<std::error_code>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      v34 = std::_Function_handler<void ()(void),pplx::details::_Task_impl<std::error_code>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v25 = j_operator new(0x10u);
      v25[2] = 0;
      v26 = j_operator new(4u);
      *v26 = *v24;
      *v25 = v26;
      v25[2] = std::_Function_base::_Base_manager<pplx::details::_Task_impl<std::error_code>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      v25[3] = std::_Function_handler<void ()(void),pplx::details::_Task_impl<std::error_code>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      j_pplx::get_ambient_scheduler((pplx *)&v35);
      (**v35)();
      v27 = v36;
      if ( v36 )
        v28 = (unsigned int *)(v36 + 4);
          v29 = __ldrex(v28);
        while ( __strex(v29 - 1, v28) );
        if ( v29 == 1 )
        {
          v30 = (unsigned int *)(v27 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          __dmb();
          do
            v31 = __ldrex(v30);
          while ( __strex(v31 - 1, v30) );
          if ( v31 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
        }
      if ( v33 )
        v33();
    result = 1;
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7((void *)v1);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8((void *)v1);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7((void *)v1);
}


  return pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}::operator()
{
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int (**__fastcall pplx::task_completion_event<xbox::services::system::java_rps_ticket>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r7@1
  int v3; // r5@1
  int *v4; // r6@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r6@7
  int *v8; // r0@7
  void *v9; // r0@7
  void *v10; // r0@8
  unsigned int *v11; // r2@9
  signed int v12; // r1@11
  __int64 v13; // r0@13
  int v14; // r1@14
  unsigned int *v15; // r0@15
  unsigned int v16; // r1@17
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@22
  unsigned int *v18; // r2@25
  signed int v19; // r1@27
  int v20; // [sp+4h] [bp-24h]@7
  int v21; // [sp+8h] [bp-20h]@7
  int v22; // [sp+Ch] [bp-1Ch]@7

  v2 = a1;
  v3 = *a1;
  v4 = a2;
  v5 = (pthread_mutex_t *)(*a1 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1(v5);
    if ( v6 )
      sub_21E5E14(v6);
    v3 = *v2;
  }
  if ( *(_DWORD *)(v3 + 28) )
    (*(void (__cdecl **)(int))(*(_DWORD *)*v4 + 8))(*v4);
  else if ( *(_BYTE *)(v3 + 36) )
    v7 = *v4;
    v8 = sub_21E8AF4(&v20, (int *)(v3 + 16));
    v21 = *(_DWORD *)(v3 + 20);
    sub_21E8AF4(v8 + 2, (int *)(v3 + 24));
    j_pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_FinalizeAndRunContinuations(v7, &v20);
    v9 = (void *)(v22 - 12);
    if ( (int *)(v22 - 12) != &dword_28898C0 )
    {
      v18 = (unsigned int *)(v22 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
      }
      else
        v19 = (*v18)--;
      if ( v19 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
    }
    v10 = (void *)(v20 - 12);
    if ( (int *)(v20 - 12) != &dword_28898C0 )
      v11 = (unsigned int *)(v20 - 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 <= 0 )
        j_j_j_j__ZdlPv_9(v10);
  else
    v13 = *(_QWORD *)(v3 + 4);
    if ( (_DWORD)v13 == HIDWORD(v13) )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>> const&>(
        (unsigned __int64 *)v3,
        (int)v4);
    else
      *(_DWORD *)v13 = *v4;
      HIDWORD(v13) = v4[1];
      *(_DWORD *)(v13 + 4) = HIDWORD(v13);
      if ( HIDWORD(v13) )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 + 1, v15) );
        }
        else
          ++*v15;
      *(_DWORD *)(v3 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r5@18
  int v11; // r7@18
  int v12; // r4@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r6@26
  unsigned int v16; // r0@28

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 13);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::~xbox_live_result((int)(v1 + 2));
  v11 = *v1 >> 32;
  v10 = *v1;
  if ( v10 != v11 )
    do
      v12 = *(_DWORD *)(v10 + 4);
      if ( v12 )
        v13 = (unsigned int *)(v12 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      v10 += 8;
    while ( v10 != v11 );
    v10 = *(_DWORD *)v1;
  if ( v10 )
    j_operator delete((void *)v10);
  return v1;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = (xbox::services *)j_xbox::services::game_server_platform::cluster_result::cluster_result((xbox::services::game_server_platform::cluster_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 60) = v3;
  *(_DWORD *)(v1 + 64) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 72) = 0;
  *(_DWORD *)(v1 + 76) = 0;
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::~_Task_impl(a1);
  j_j_j__ZdlPv_8((void *)v1);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  char v17; // [sp+4h] [bp-34h]@7
  int v18; // [sp+20h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 48) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 56) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>::xbox_live_result(
      (xbox::services::privacy::permission_check_result *)&v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::privacy::permission_check_result::~permission_check_result((xbox::services::privacy::permission_check_result *)&v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


int *__fastcall pplx::task<web::websockets::client::websocket_incoming_message>::task<pplx::task_completion_event<web::websockets::client::websocket_incoming_message>>(int a1, int a2, int a3)
{
  return pplx::task<web::websockets::client::websocket_incoming_message>::task<pplx::task_completion_event<web::websockets::client::websocket_incoming_message>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::string>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int *v12; // r0@21
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@1
  int v16; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v14 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v15 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v16 = *(_DWORD *)(a3 + 8);
  pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v14);
  v7 = v15;
  if ( v15 )
    v8 = (unsigned int *)(v15 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_26E766C;
  *(_DWORD *)(v3 + 80) = &unk_28898CC;
  v12 = xbox::services::xbox_services_error_code_category((xbox::services *)&unk_28898CC);
  *(_DWORD *)(v3 + 84) = 0;
  *(_DWORD *)(v3 + 88) = v12;
  *(_DWORD *)(v3 + 92) = &unk_28898CC;
  return v3;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}::operator() const(
           a1,
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@6
  int v8; // r5@10
  void *v9; // r0@10
  int v10; // r5@11
  unsigned int *v11; // r1@12
  unsigned int v12; // r0@14
  int v13; // r1@16 OVERLAPPED
  int v14; // r2@16
  int v15; // r2@17
  unsigned int *v16; // r1@18
  unsigned int v17; // r2@20
  unsigned int *v18; // r6@24
  unsigned int v19; // r0@26
  unsigned int *v20; // r2@34
  signed int v21; // r1@36
  char v22; // [sp+4h] [bp-2Ch]@10
  int v23; // [sp+8h] [bp-28h]@11
  int v24; // [sp+14h] [bp-1Ch]@10

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 36) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 44) )
    v8 = *v2;
    j_xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>::xbox_live_result(
      (int)&v22,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_FinalizeAndRunContinuations(
      v8,
      (int)&v22);
    v9 = (void *)(v24 - 12);
    if ( (int *)(v24 - 12) != &dword_28898C0 )
    {
      v20 = (unsigned int *)(v24 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v21 = __ldrex(v20);
        while ( __strex(v21 - 1, v20) );
      }
      else
        v21 = (*v20)--;
      if ( v21 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
    }
    v10 = v23;
    if ( v23 )
      v11 = (unsigned int *)(v23 + 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        v18 = (unsigned int *)(v10 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
        if ( &pthread_create )
        {
          __dmb();
          do
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
        }
        else
          v19 = (*v18)--;
        if ( v19 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  else
    *(_QWORD *)&v13 = *(_QWORD *)(v4 + 4);
    if ( v13 == v14 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v13 = *v2;
      v15 = v2[1];
      *(_DWORD *)(v13 + 4) = v15;
      if ( v15 )
        v16 = (unsigned int *)(v15 + 4);
            v17 = __ldrex(v16);
          while ( __strex(v17 + 1, v16) );
          ++*v16;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


void __fastcall pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::~_Task_impl(a1);
  j_j_j__ZdlPv_8((void *)v1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_13title_storage19title_storage_quotaEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_RegisterTask(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  char v30; // [sp+8h] [bp-48h]@25
  int v31; // [sp+24h] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 28);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 28);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      *((_BYTE *)v4 + 16) = *(_BYTE *)v3;
      j_std::vector<xbox::services::privacy::permission_deny_reason,std::allocator<xbox::services::privacy::permission_deny_reason>>::operator=(
        (int)(v4 + 5),
        (unsigned __int64 *)(v3 + 4));
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      *(_QWORD *)(v4 + 9) = *(_QWORD *)(v3 + 20);
      EntityInteraction::setInteractText((int *)v4 + 11, (int *)(v3 + 28));
      *((_BYTE *)*v2 + 56) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>::xbox_live_result(
              (xbox::services::privacy::permission_check_result *)&v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_FinalizeAndRunContinuations(
              v15,
              (int)&v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::privacy::permission_check_result::~permission_check_result((xbox::services::privacy::permission_check_result *)&v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[12] )
        v17[12] = 0;
        v18 = v17[13];
        v17[13] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl_base::_Task_impl_base(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r8@1
  int v5; // r5@1 OVERLAPPED
  int v6; // r6@1 OVERLAPPED
  unsigned int *v7; // r0@2
  unsigned int v8; // r1@4
  int v9; // r9@7
  unsigned int *v10; // r0@8
  unsigned int v11; // r1@10
  unsigned int v12; // r1@16
  unsigned int *v13; // r5@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r0@28
  unsigned int v16; // r1@29

  v3 = a1;
  v4 = a2;
  *(_DWORD *)a1 = &off_26D7AC4;
  *(_DWORD *)(a1 + 4) = 0;
  *(_BYTE *)(a1 + 8) = 0;
  *(_BYTE *)(a1 + 9) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  *(_DWORD *)(a1 + 16) = 0;
  *(_DWORD *)(a1 + 20) = 0;
  *(_DWORD *)(a1 + 28) = 0;
  *(_DWORD *)(a1 + 32) = 0;
  *(_QWORD *)&v5 = *(_QWORD *)a3;
  if ( *(_QWORD *)a3 >> 32 )
  {
    v7 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 + 1, v7) );
    }
    else
      ++*v7;
  }
  v9 = *(_DWORD *)(a3 + 8);
  *(_DWORD *)(v3 + 36) = 0;
  sub_DA8AC4((_DWORD *)(v3 + 40));
  *(_BYTE *)(v3 + 44) = 0;
  *(_QWORD *)(v3 + 48) = *(_QWORD *)&v5;
  if ( v6 )
    v10 = (unsigned int *)(v6 + 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 + 1, v10) );
      ++*v10;
    *(_DWORD *)(v3 + 56) = v9;
        v12 = __ldrex(v10);
      while ( __strex(v12 - 1, v10) );
      v12 = (*v10)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
      }
      else
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  else
  *(_DWORD *)(v3 + 60) = 0;
  *(_DWORD *)(v3 + 64) = 0;
  *(_DWORD *)(v3 + 68) = 0;
  *(_DWORD *)(v3 + 72) = 0;
  *(_DWORD *)(v3 + 24) = v4;
  if ( v4 != 2 )
    v15 = (unsigned int *)(v4 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  return v3;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<void>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultIvEEEESaISB_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


pplx::details::_CancellationTokenState *__fastcall pplx::details::_CancellationTokenState::~_CancellationTokenState(pplx::details::_CancellationTokenState *this)
{
  pplx::details::_CancellationTokenState *v1; // r8@1
  int v2; // r0@2
  int v3; // r5@3
  int v4; // r7@6
  int v5; // r0@7
  unsigned int *v6; // r1@7
  unsigned int v7; // r2@8
  int v8; // r4@12
  int v9; // r0@13
  int v10; // r4@14

  v1 = this;
  *(_DWORD *)this = &off_26DD654;
  if ( &pthread_create )
  {
    v2 = pthread_mutex_lock((pthread_mutex_t *)this + 1);
    if ( v2 )
      sub_119CCFC(v2);
  }
  v3 = *((_DWORD *)v1 + 7);
  *((_DWORD *)v1 + 7) = 0;
  *((_DWORD *)v1 + 8) = 0;
    pthread_mutex_unlock((pthread_mutex_t *)v1 + 1);
  if ( v3 )
    v4 = v3;
    do
    {
      v5 = *(_DWORD *)v4;
      __dmb();
      v6 = (unsigned int *)(v5 + 4);
      *(_DWORD *)(v5 + 8) = 2;
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      if ( v7 == 1 )
        (*(void (**)(void))(*(_DWORD *)v5 + 8))();
      v4 = *(_DWORD *)(v4 + 4);
    }
    while ( v4 );
      v8 = *(_DWORD *)(v3 + 4);
      free((void *)v3);
      v3 = v8;
    while ( v8 );
  v9 = *((_DWORD *)v1 + 7);
  if ( v9 )
      v10 = *(_DWORD *)(v9 + 4);
      free((void *)v9);
      v9 = v10;
    while ( v10 );
  sub_119E408((pthread_cond_t *)((char *)v1 + 16));
  *(_DWORD *)v1 = &off_26D7B40;
  return v1;
}


int __fastcall pplx::task<web::websockets::client::websocket_incoming_message>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r8@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r5@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r6@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r5@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r5@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+4h] [bp-3Ch]@53
  int v26; // [sp+8h] [bp-38h]@53
  int v27; // [sp+Ch] [bp-34h]@1
  int v28; // [sp+10h] [bp-30h]@1
  int v29; // [sp+14h] [bp-2Ch]@7
  int v30; // [sp+18h] [bp-28h]@7
  int v31; // [sp+1Ch] [bp-24h]@7
  int v32; // [sp+20h] [bp-20h]@7
  char v33; // [sp+24h] [bp-1Ch]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN3web10websockets6client26websocket_incoming_messageEEESaISB_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)result + 12))(result);
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_RegisterTask(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_0(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_0(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27692EC;
  v12 = j_xbox::services::leaderboard::leaderboard_result::leaderboard_result((xbox::services::leaderboard::leaderboard_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 188) = 0;
  *(_DWORD *)(v3 + 192) = v13;
  *(_DWORD *)(v3 + 196) = &unk_28898CC;
  return v3;
}


xbox::services::matchmaking::match_ticket_details_response *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::get(xbox::services::matchmaking::match_ticket_details_response *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::get(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  j_std::function<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27677D0;
  v12 = j_xbox::services::tournaments::tournament_request_result::tournament_request_result((xbox::services::tournaments::tournament_request_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 128) = 0;
  *(_DWORD *)(v3 + 132) = v13;
  *(_DWORD *)(v3 + 136) = &unk_28898CC;
  return v3;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(std::function const&<void ()(pplx::task<std::string>)>)::{lambda(pplx::task<std::string>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  std::function<void ()(pplx::task<std::string>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


int __fastcall pplx::task<int>::get(pplx::details::_Task_impl_base **a1)
{
  pplx::details::_Task_impl_base **v1; // r4@1
  pplx::details::_Task_impl_base *v2; // r0@1
  char *v4; // r0@4
  char *v5; // r4@6
  int v6; // r3@6

  v1 = a1;
  v2 = *a1;
  if ( !v2 )
  {
    v5 = j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_119C884((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( pplx::details::_Task_impl_base::_Wait(v2) == 2 )
    v4 = j___cxa_allocate_exception(8);
    *(_DWORD *)v4 = &off_26DD7D0;
    *((_DWORD *)v4 + 1) = &unk_28898CC;
      (int)v4,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return *((_DWORD *)*v1 + 20);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_11matchmaking29match_ticket_details_responseEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


_DWORD *__fastcall pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_Task_impl(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r7@14
  unsigned int v11; // r0@16
  int v13; // [sp+0h] [bp-20h]@1
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base((int)v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *v3 = &off_276E020;
  j_Concurrency::streams::container_buffer<std::string>::container_buffer((int)(v3 + 20), 0x10u);
  return v3;
}


xbox::services::title_storage::title_storage_blob_metadata *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::get(xbox::services::title_storage::title_storage_blob_metadata *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::get(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::system::java_rps_ticket>::task<pplx::task_completion_event<xbox::services::system::java_rps_ticket>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::system::java_rps_ticket>::task<pplx::task_completion_event<xbox::services::system::java_rps_ticket>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_CancellationTokenCallback<pplx::details::_JoinAllTokens_Add(pplx::cancellation_token_source const&,pplx::details::_CancellationTokenState *)::{lambda(void)#1}>::~_CancellationTokenCallback(void *ptr)
{
  pplx::details::_CancellationTokenCallback<pplx::details::_JoinAllTokens_Add(pplx::cancellation_token_source const&,pplx::details::_CancellationTokenState *)::{lambda(void)#1}>::~_CancellationTokenCallback(ptr);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_2768088;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 144);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::system::token_result::~token_result((xbox::services::system::token_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r5@1
  void **v5; // r0@2
  void **v6; // r0@3
  int v7; // r6@3
  void **v8; // r4@3
  void (__fastcall *v9)(void **, int, signed int); // r3@3
  int result; // r0@5
  void **v11; // r4@6
  void (__fastcall *v12)(void **, void **, signed int); // r3@7

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1};
      goto LABEL_12;
    case 2:
      v6 = (void **)j_operator new(0x10u);
      v7 = *v3;
      v8 = v6;
      v6[2] = 0;
      v9 = *(void (__fastcall **)(void **, int, signed int))(v7 + 8);
      if ( v9 )
      {
        v9(v6, v7, 2);
        v8[3] = *(void **)(v7 + 12);
        v8[2] = *(void **)(v7 + 8);
      }
      result = 0;
      *v4 = v8;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(*a1, *a1, 3);
        j_operator delete(v11);
      goto def_1D1C3E2;
    case 1:
      v5 = (void **)*a2;
LABEL_12:
      *v4 = v5;
      break;
    default:
def_1D1C3E2:
  }
  return result;
}


int (**__fastcall pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@6
  int v8; // r2@10
  int v9; // r1@10
  unsigned int *v10; // r1@11
  unsigned int v11; // r3@13
  int v12; // r1@15 OVERLAPPED
  int v13; // r2@15
  int v14; // r2@16
  unsigned int *v15; // r1@17
  unsigned int v16; // r2@19
  int v17; // r5@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r0@25
  unsigned int *v20; // r6@29
  unsigned int v21; // r0@31
  void **v22; // [sp+8h] [bp-28h]@10
  int v23; // [sp+Ch] [bp-24h]@10
  int v24; // [sp+10h] [bp-20h]@10
  int v25; // [sp+14h] [bp-1Ch]@22

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 32) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 40) )
    v8 = *v2;
    v22 = &off_26DDA34;
    v23 = *(_DWORD *)(v4 + 20);
    v9 = *(_DWORD *)(v4 + 24);
    v24 = v9;
    if ( v9 )
    {
      v10 = (unsigned int *)(v9 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 + 1, v10) );
      }
      else
        ++*v10;
    }
    v22 = &off_26DD410;
    v25 = *(_DWORD *)(v4 + 28);
    j_pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_FinalizeAndRunContinuations(
      v8,
      (int)&v22);
    v17 = v24;
    if ( v24 )
      v18 = (unsigned int *)(v24 + 4);
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
        v19 = (*v18)--;
      if ( v19 == 1 )
        v20 = (unsigned int *)(v17 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
        if ( &pthread_create )
        {
          __dmb();
          do
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
        }
        else
          v21 = (*v20)--;
        if ( v21 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
  else
    *(_QWORD *)&v12 = *(_QWORD *)(v4 + 4);
    if ( v12 == v13 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v12 = *v2;
      v14 = v2[1];
      *(_DWORD *)(v12 + 4) = v14;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
            v16 = __ldrex(v15);
          while ( __strex(v16 + 1, v15) );
          ++*v15;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


void __fastcall pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#2}>(int a1, int *a2, int a3, int a4)
{
  int v4; // lr@0
  int v5; // r7@1
  int v6; // r4@1
  int v7; // r5@1
  int *v8; // r6@1
  __int64 v9; // r0@1
  int v10; // [sp+0h] [bp-28h]@1
  void *ptr; // [sp+4h] [bp-24h]@1
  int v12; // [sp+8h] [bp-20h]@1
  int v13; // [sp+Ch] [bp-1Ch]@1

  v5 = a1;
  v12 = 0;
  v13 = 0;
  v6 = a4;
  ptr = 0;
  v7 = a3;
  v8 = a2;
  v10 = v4;
  *(_BYTE *)(a4 + 20) = 1;
  *(_DWORD *)(a4 + 24) = v4;
  LODWORD(v9) = a4 + 28;
  HIDWORD(v9) = (unsigned int)&v10 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v9);
  if ( ptr )
    operator delete(ptr);
  pplx::task<unsigned char>::_ThenImpl<void,Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#2}>(
    v5,
    v8,
    v7,
    v6);
}


int __fastcall pplx::details::event_impl::wait(pthread_mutex_t *mutex, unsigned int a2)
{
  pthread_mutex_t *v2; // r8@1
  unsigned int v3; // r4@1
  int v4; // r0@2
  signed __int64 v5; // kr00_8@4
  signed int v6; // r0@6
  signed int v7; // r1@8
  pthread_mutex_t *v13; // r0@22
  pthread_mutex_t *mutexa; // [sp+0h] [bp-48h]@1
  unsigned __int8 v17; // [sp+4h] [bp-44h]@1
  __int64 v18; // [sp+8h] [bp-40h]@4
  unsigned int v19; // [sp+10h] [bp-38h]@6
  int v20; // [sp+14h] [bp-34h]@8
  struct timespec abstime; // [sp+1Ch] [bp-2Ch]@6

  v2 = mutex;
  v3 = a2;
  mutexa = mutex;
  v17 = 0;
  if ( &pthread_create )
  {
    v4 = pthread_mutex_lock(mutex);
    if ( v4 )
      sub_DA7664(v4);
  }
  v17 = 1;
  if ( v3 == -1 )
    if ( LOBYTE(v2->__owner) )
    {
      _R4 = 0;
    }
    else
      do
        sub_DA8C04((pthread_cond_t *)&v2->__count, &mutexa);
      while ( !LOBYTE(v2->__owner) );
  else
    sub_DA7F0C(&v18);
    v5 = 1000000LL * v3 + v18;
    do
      if ( LOBYTE(v2->__owner) )
      {
        _R0 = 0;
        goto LABEL_19;
      }
      abstime.tv_sec = v5 / 1000000000;
      abstime.tv_nsec = v5 % 1000000000;
      pthread_cond_timedwait((pthread_cond_t *)&v2->__count, mutexa, &abstime);
      sub_DA7F0C(&v19);
      v6 = 0;
      if ( v19 < (unsigned int)v5 )
        v6 = 1;
      v7 = 0;
      if ( v20 < SHIDWORD(v5) )
        v7 = 1;
      if ( v20 == HIDWORD(v5) )
        v7 = v6;
    while ( v7 );
    _R0 = 0;
    if ( !LOBYTE(v2->__owner) )
      _R0 = 1;
LABEL_19:
    __asm { SBFX.W          R4, R0, #0, #1 }
  v13 = (pthread_mutex_t *)v17;
  _ZF = v17 == 0;
  if ( v17 )
    v13 = mutexa;
    _ZF = mutexa == 0;
  if ( !_ZF )
    if ( &pthread_create )
      pthread_mutex_unlock(v13);
    v17 = 0;
  return _R4;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int *v12; // r0@21
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@1
  int v16; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v14 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v15 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v16 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v14);
  v7 = v15;
  if ( v15 )
    v8 = (unsigned int *)(v15 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2768590;
  v12 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&off_2768590);
  *(_DWORD *)(v3 + 84) = 0;
  *(_DWORD *)(v3 + 88) = v12;
  *(_DWORD *)(v3 + 92) = &unk_28898CC;
  return v3;
}


int __fastcall pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(std::shared_ptr<xbox::services::http_call_response>),std::function<unsigned char ()(std::shared_ptr<xbox::services::http_call_response>)> pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(std::shared_ptr<xbox::services::http_call_response>)> pplx::details::_MakeTToUnitFunc<std::shared_ptr<xbox::services::http_call_response>>(std::function const&<void ()(std::shared_ptr<xbox::services::http_call_response>)>)::{lambda(std::shared_ptr<xbox::services::http_call_response>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<std::string>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<std::string>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::set(
           a1,
           a2);
}


unsigned int __fastcall pplx::task_from_result<web::json::value>(int a1, const web::json::value *a2, int a3)
{
  const web::json::value *v3; // r6@1
  int v4; // r4@1
  int v5; // r5@1
  unsigned int *v6; // r0@4
  unsigned int v7; // r1@6
  int v8; // r0@9
  unsigned int *v9; // r0@10
  unsigned int v10; // r1@12
  int v11; // r0@15
  unsigned int *v12; // r1@16
  unsigned int v13; // r2@17
  __int16 v14; // r0@19
  int v15; // r0@21
  unsigned int *v16; // r1@22
  unsigned int v17; // r2@23
  unsigned int result; // r0@26
  int v19; // r4@26
  unsigned int *v20; // r1@27
  unsigned int *v21; // r5@33
  int v22; // r4@40
  unsigned int *v23; // r1@41
  unsigned int *v24; // r5@47
  int v25; // r4@54
  unsigned int *v26; // r1@55
  unsigned int *v27; // r5@61
  int v28; // [sp+0h] [bp-58h]@9
  int v29; // [sp+4h] [bp-54h]@9
  int v30; // [sp+8h] [bp-50h]@15
  int v31; // [sp+Ch] [bp-4Ch]@19
  char v32; // [sp+14h] [bp-44h]@19
  int v33; // [sp+18h] [bp-40h]@19
  void *ptr; // [sp+1Ch] [bp-3Ch]@19
  int v35; // [sp+20h] [bp-38h]@19
  int v36; // [sp+24h] [bp-34h]@19
  char v37; // [sp+28h] [bp-30h]@19
  char v38; // [sp+29h] [bp-2Fh]@19
  int v39; // [sp+30h] [bp-28h]@3
  int v40; // [sp+34h] [bp-24h]@3
  int v41; // [sp+38h] [bp-20h]@1
  int v42; // [sp+3Ch] [bp-1Ch]@1
  int v43; // [sp+40h] [bp-18h]@3

  v3 = a2;
  v4 = a1;
  v5 = a3;
  j__ZNSt12__shared_ptrIN4pplx7details27_Task_completion_event_implIN3web4json5valueEEELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS6_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)&v42);
  web::json::value::value((web::json::value *)&v41, v3);
  pplx::task_completion_event<web::json::value>::set(&v42, &v41);
  if ( v41 )
    (*(void (**)(void))(*(_DWORD *)v41 + 96))();
  v41 = 0;
  v39 = v42;
  v40 = v43;
  if ( v43 )
  {
    v6 = (unsigned int *)(v43 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v28 = *(_DWORD *)v5;
  v8 = *(_DWORD *)(v5 + 4);
  v29 = v8;
  if ( v8 )
    v9 = (unsigned int *)(v8 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
      ++*v9;
  v30 = *(_DWORD *)(v5 + 8);
  v11 = *(_DWORD *)(v5 + 12);
  if ( v11 )
    v12 = (unsigned int *)(v11 + 4);
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  v31 = v11;
  v35 = 0;
  v36 = 0;
  v33 = 0;
  ptr = 0;
  v32 = 0;
  v14 = *(_WORD *)(v5 + 40);
  v37 = *(_WORD *)(v5 + 40);
  v38 = HIBYTE(v14);
  pplx::create_task<pplx::task_completion_event<web::json::value>>(v4, (int)&v39, (int)&v28);
  if ( ptr )
    operator delete(ptr);
  v15 = v31;
  if ( v31 )
    v16 = (unsigned int *)(v31 + 4);
      v17 = __ldrex(v16);
    while ( __strex(v17 - 1, v16) );
    if ( v17 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v15 + 8))(v15);
  result = 0;
  v31 = 0;
  v19 = v29;
  if ( v29 )
    v20 = (unsigned int *)(v29 + 4);
        result = __ldrex(v20);
      while ( __strex(result - 1, v20) );
      result = (*v20)--;
    if ( result == 1 )
      v21 = (unsigned int *)(v19 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v21);
        while ( __strex(result - 1, v21) );
      }
      else
        result = (*v21)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
  v22 = v40;
  if ( v40 )
    v23 = (unsigned int *)(v40 + 4);
        result = __ldrex(v23);
      while ( __strex(result - 1, v23) );
      result = (*v23)--;
      v24 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
          result = __ldrex(v24);
        while ( __strex(result - 1, v24) );
        result = (*v24)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  v25 = v43;
    v26 = (unsigned int *)(v43 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
        result = (*v27)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r0@1
  signed int v5; // r8@1
  unsigned int v6; // r1@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void *v9; // r1@8
  void **v10; // r0@8
  int *v11; // r4@8
  int *v12; // r11@8
  int *v13; // r10@11
  int *v14; // r7@14
  unsigned int *v15; // r2@15
  signed int v16; // r1@17
  int v17; // r4@22
  void **v18; // r0@24
  int v19; // r2@24
  char *v20; // r0@24
  void **v21; // r0@26
  void *v22; // r5@27
  unsigned int *v23; // r1@28
  unsigned int v24; // r0@30
  unsigned int *v25; // r4@35
  unsigned int v26; // r0@37
  int *v27; // r6@44
  int v28; // r4@45
  unsigned int *v29; // r1@46
  unsigned int v30; // r0@48
  unsigned int *v31; // r5@52
  unsigned int v32; // r0@54
  int *ptr; // [sp+8h] [bp-48h]@10
  int v35; // [sp+10h] [bp-40h]@24
  char v36; // [sp+14h] [bp-3Ch]@24
  __int64 v37; // [sp+18h] [bp-38h]@24
  char *v38; // [sp+20h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)v4 + 22);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 22);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v14 = 0;
      v12 = 0;
      v5 = 0;
    else
      v9 = *(void **)v3;
      *((_BYTE *)v4 + 20) = *(_BYTE *)(v3 + 4);
      v4[4] = v9;
      *((_QWORD *)v4 + 3) = *(_QWORD *)(v3 + 8);
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      *((_BYTE *)*v2 + 44) = 1;
      v10 = *v2;
      v11 = (int *)**v2;
      *v10 = 0;
      v12 = (int *)v10[1];
      v10[1] = 0;
      v10[2] = 0;
      ptr = v11;
      if ( v11 != v12 )
      {
        v13 = v11;
        do
        {
          v17 = *v13;
          if ( *(_DWORD *)(*v13 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v17 + 8))(v17, 1, 0, 0);
          }
          else
            v18 = *v2;
            v38 = (char *)&unk_28898CC;
            v19 = (int)v18[4];
            v36 = *((_BYTE *)v18 + 20);
            v35 = v19;
            v37 = *((_QWORD *)v18 + 3);
            EntityInteraction::setInteractText((int *)&v38, (int *)v18 + 8);
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_FinalizeAndRunContinuations(
              v17,
              (int)&v35);
            v20 = v38 - 12;
            if ( (int *)(v38 - 12) != &dword_28898C0 )
            {
              v15 = (unsigned int *)(v38 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v16 = __ldrex(v15);
                while ( __strex(v16 - 1, v15) );
              }
              else
                v16 = (*v15)--;
              if ( v16 <= 0 )
                j_j_j_j__ZdlPv_9(v20);
            }
          v13 += 2;
        }
        while ( v13 != v12 );
      }
      v21 = *v2;
      if ( (*v2)[9] )
        v14 = ptr;
        v21[9] = 0;
        v22 = v21[10];
        v21[10] = 0;
        if ( v22 )
          v23 = (unsigned int *)((char *)v22 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v24 = __ldrex(v23);
            while ( __strex(v24 - 1, v23) );
            v24 = (*v23)--;
          if ( v24 == 1 )
            v25 = (unsigned int *)((char *)v22 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v22 + 8))(v22);
            if ( &pthread_create )
              __dmb();
              do
                v26 = __ldrex(v25);
              while ( __strex(v26 - 1, v25) );
            else
              v26 = (*v25)--;
            if ( v26 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v22 + 12))(v22);
        v5 = 1;
      else
    if ( v14 != v12 )
      v27 = v14;
      do
        v28 = v27[1];
        if ( v28 )
          v29 = (unsigned int *)(v28 + 4);
              v30 = __ldrex(v29);
            while ( __strex(v30 - 1, v29) );
            v30 = (*v29)--;
          if ( v30 == 1 )
            v31 = (unsigned int *)(v28 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
                v32 = __ldrex(v31);
              while ( __strex(v32 - 1, v31) );
              v32 = (*v31)--;
            if ( v32 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
        v27 += 2;
      while ( v27 != v12 );
    if ( v14 )
      j_operator delete(v14);
  }
  return v5;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<web::json::value>),std::function<unsigned char ()(pplx::task<web::json::value>)> pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(std::function const&<void ()(pplx::task<web::json::value>)>)::{lambda(pplx::task<web::json::value>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<web::json::value>)> pplx::details::_MakeTToUnitFunc<pplx::task<web::json::value>>(std::function const&<void ()(pplx::task<web::json::value>)>)::{lambda(pplx::task<web::json::value>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::achievements::achievement::operator=((int *)(a1 + 80), a2);
  *(_QWORD *)(v2 + 232) = *((_QWORD *)v3 + 19);
  EntityInteraction::setInteractText((int *)(v2 + 240), v3 + 40);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  int v30[14]; // [sp+Ch] [bp-64h]@25
  int v31; // [sp+44h] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 42);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 42);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      EntityInteraction::setInteractText((int *)v4 + 5, (int *)(v3 + 4));
      v4[6] = *(void **)(v3 + 8);
      EntityInteraction::setInteractText((int *)v4 + 7, (int *)(v3 + 12));
      v4[8] = *(void **)(v3 + 16);
      EntityInteraction::setInteractText((int *)v4 + 9, (int *)(v3 + 20));
      EntityInteraction::setInteractText((int *)v4 + 10, (int *)(v3 + 24));
      j_std::vector<xbox::services::game_server_platform::game_server_port_mapping,std::allocator<xbox::services::game_server_platform::game_server_port_mapping>>::operator=(
        (int)(v4 + 11),
        (unsigned __int64 *)(v3 + 28));
      EntityInteraction::setInteractText((int *)v4 + 14, (int *)(v3 + 40));
      EntityInteraction::setInteractText((int *)v4 + 15, (int *)(v3 + 44));
      *((_QWORD *)v4 + 8) = *(_QWORD *)(v3 + 48);
      EntityInteraction::setInteractText((int *)v4 + 18, (int *)(v3 + 56));
      *((_BYTE *)*v2 + 84) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>::xbox_live_result(
              (xbox::services::game_server_platform::game_server_ticket_status *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::game_server_platform::game_server_ticket_status::~game_server_ticket_status((xbox::services::game_server_platform::game_server_ticket_status *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[19] )
        v17[19] = 0;
        v18 = v17[20];
        v17[20] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int (**__fastcall pplx::details::_Task_impl<TransactionStatus>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  pthread_mutex_t *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 20);
  *(_DWORD *)(a1 + 80) = a2;
  if ( &pthread_create )
  {
    v4 = pthread_mutex_lock(v3);
    if ( v4 )
      sub_119CCFC(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v3);
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (pthread_mutex_unlock(v3), &pthread_create) )
    {
      v6 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_119CCFC(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@1
  int v5; // r3@2
  char *v6; // r0@3
  unsigned int *v8; // r2@5
  signed int v9; // r1@7
  int v10; // [sp+0h] [bp-28h]@1
  char v11; // [sp+4h] [bp-24h]@2
  int v12; // [sp+8h] [bp-20h]@1
  int v13; // [sp+Ch] [bp-1Ch]@1
  char *v14; // [sp+10h] [bp-18h]@1

  v2 = a2;
  v3 = *a1;
  v10 = 0;
  v12 = 0;
  sub_119E6EC();
  v13 = v4;
  v14 = (char *)&unk_28898CC;
  if ( &v10 != (int *)v2 )
  {
    v5 = *(_DWORD *)v2;
    v11 = *(_BYTE *)(v2 + 4);
    v10 = v5;
    *(_QWORD *)&v12 = *(_QWORD *)(v2 + 8);
    xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
      (int *)&v14,
      (int *)(v2 + 16));
  }
  pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)#1}::operator() const(
    v3,
    (int)&v10);
  v6 = v14 - 12;
  if ( (int *)(v14 - 12) != &dword_28898C0 )
    v8 = (unsigned int *)(v14 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v6);
  return 0;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  void *v8; // r5@8 OVERLAPPED
  void *v9; // r6@8 OVERLAPPED
  int v10; // r1@13
  void *v11; // r0@13
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  unsigned int *v15; // r2@19
  signed int v16; // r1@21

  v1 = a1;
  *(_DWORD *)a1 = &off_2764B9C;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 104);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v13 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
    }
    else
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  *(_QWORD *)&v8 = *(_QWORD *)(v1 + 84);
  if ( v8 != v9 )
      j_std::_Destroy<xbox::services::user_statistics::service_configuration_statistic>((int)v8);
      v8 = (char *)v8 + 16;
    while ( v9 != v8 );
    v8 = *(void **)(v1 + 84);
  if ( v8 )
    j_operator delete(v8);
  v10 = *(_DWORD *)(v1 + 80);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v15 = (unsigned int *)(v10 - 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::contextual_search::contextual_search_game_clips_result::contextual_search_game_clips_result((xbox::services::contextual_search::contextual_search_game_clips_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 60) = 0;
  *(_DWORD *)(v1 + 64) = v3;
  *(_DWORD *)(v1 + 68) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 72) = 0;
  *(_DWORD *)(v1 + 76) = 0;
  return result;
}


signed int __fastcall pplx::task_completion_event<web::http::http_response>::set_exception(int *a1, const std::__exception_ptr::exception_ptr *a2)
{
  int v2; // lr@0
  int *v3; // r4@1
  signed int v4; // r5@1
  signed int v5; // r4@2
  int v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@1
  int v9; // [sp+8h] [bp-20h]@1
  int v10; // [sp+Ch] [bp-1Ch]@1
  char v11; // [sp+10h] [bp-18h]@1
  char v12; // [sp+14h] [bp-14h]@1

  v3 = a1;
  j_std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v11, a2);
  v9 = 0;
  v10 = 0;
  v8 = 0;
  v7 = v2;
  j_std::__exception_ptr::exception_ptr::exception_ptr(
    (std::__exception_ptr::exception_ptr *)&v12,
    (const std::__exception_ptr::exception_ptr *)&v11);
  v4 = j_pplx::task_completion_event<web::http::http_response>::_StoreException<std::__exception_ptr::exception_ptr>(
         v3,
         (const std::__exception_ptr::exception_ptr *)&v12,
         (int)&v7);
  j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v12);
  if ( v4 == 1 )
    v5 = j_pplx::task_completion_event<web::http::http_response>::_CancelInternal((void ***)v3);
  else
    v5 = 0;
  j_std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v11);
  return v5;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7(v1);
}


void __fastcall pplx::details::_CancellationTokenCallback<pplx::details::_Task_impl_base::_RegisterCancellation(std::weak_ptr<pplx::details::_Task_impl_base>)::{lambda(void)#1}>::~_CancellationTokenCallback(void *ptr)
{
  pplx::details::_CancellationTokenCallback<pplx::details::_Task_impl_base::_RegisterCancellation(std::weak_ptr<pplx::details::_Task_impl_base>)::{lambda(void)#1}>::~_CancellationTokenCallback(ptr);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_11tournaments9team_infoEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<bool>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = pplx::task<bool>::task<pplx::task_completion_event<bool>>(v4, (int)&v15, v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<web::http::http_response>::_CancelInternal(void ***a1)
{
  void ***v1; // r6@1
  void **v2; // r0@1
  signed int v3; // r10@2
  pthread_mutex_t *v4; // r7@3
  int v5; // r0@4
  _DWORD *v6; // r11@7
  _DWORD *v7; // r8@7
  void **v8; // r0@8
  _DWORD *v9; // r5@13
  int v10; // ST00_4@14
  _DWORD *v11; // r5@18
  int v12; // r6@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r4@26
  unsigned int v16; // r0@28

  v1 = a1;
  v2 = *a1;
  if ( *((_BYTE *)v2 + 33) )
  {
    v3 = 0;
  }
  else
    v4 = (pthread_mutex_t *)(v2 + 3);
    if ( !&pthread_create )
      goto LABEL_39;
    v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 3));
    if ( v5 )
      sub_21E5E14(v5);
    v2 = *v1;
    if ( *((_BYTE *)*v1 + 33) )
    {
      v6 = 0;
      v7 = 0;
      v3 = 0;
    }
    else
LABEL_39:
      v3 = 1;
      *((_BYTE *)v2 + 33) = 1;
      v8 = *v1;
      v7 = **v1;
      *v8 = 0;
      v6 = v8[1];
      v8[1] = 0;
      v8[2] = 0;
    if ( &pthread_create )
      j_pthread_mutex_unlock_1(v4);
    if ( v7 != v6 && v3 == 1 )
      v9 = v7;
      if ( (*v1)[6] )
      {
        do
        {
          v10 = (int)(*v1 + 6);
          (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*v9 + 8))(*v9);
          v9 += 2;
        }
        while ( v6 != v9 );
      }
      else
    if ( v7 != v6 )
      v11 = v7;
      do
        v12 = v11[1];
        if ( v12 )
          v13 = (unsigned int *)(v12 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v14 = __ldrex(v13);
            while ( __strex(v14 - 1, v13) );
          }
          else
            v14 = (*v13)--;
          if ( v14 == 1 )
            v15 = (unsigned int *)(v12 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
            if ( &pthread_create )
            {
              __dmb();
              do
                v16 = __ldrex(v15);
              while ( __strex(v16 - 1, v15) );
            }
            else
              v16 = (*v15)--;
            if ( v16 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
        v11 += 2;
      while ( v11 != v6 );
    if ( v7 )
      j_operator delete(v7);
  return v3;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v5; // r0@8
  int v6; // r1@12
  int v7; // r5@13

  v2 = a1;
  j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>::operator=(a1 + 80, a2);
  if ( &pthread_create )
  {
    v3 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v3 )
      sub_21E5E14(v3);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v5 )
        sub_21E5E14(v5);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v6 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v6 )
      do
      {
        v7 = *(_DWORD *)(v6 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v6);
        v6 = v7;
      }
      while ( v7 );
  return result;
}


int (**__fastcall pplx::details::_Task_impl<bool>::_FinalizeAndRunContinuations(int a1, char a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  pthread_mutex_t *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 20);
  *(_BYTE *)(a1 + 77) = a2;
  if ( &pthread_create )
  {
    v4 = pthread_mutex_lock(v3);
    if ( v4 )
      sub_119CCFC(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v3);
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (pthread_mutex_unlock(v3), &pthread_create) )
    {
      v6 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_119CCFC(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)#1}::operator() const(
           a1,
           a2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  unsigned int *v15; // r2@19
  signed int v16; // r1@21
  int v17; // r7@30
  void *v18; // r0@32
  void *v19; // r0@33
  void **v20; // r0@35
  void *v21; // r5@36
  unsigned int *v22; // r1@37
  unsigned int v23; // r0@39
  unsigned int *v24; // r6@43
  unsigned int v25; // r0@45
  int *v26; // r6@52
  int v27; // r7@53
  unsigned int *v28; // r1@54
  unsigned int v29; // r0@56
  unsigned int *v30; // r5@60
  unsigned int v31; // r0@62
  int v33; // [sp+8h] [bp-48h]@19
  int v34; // [sp+20h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 28);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 28);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      *((_QWORD *)v4 + 3) = *(_QWORD *)(v3 + 8);
      *((_QWORD *)v4 + 4) = *(_QWORD *)(v3 + 16);
      EntityInteraction::setInteractText((int *)v4 + 10, (int *)(v3 + 24));
      *((_BYTE *)*v2 + 56) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v17 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v17 + 8))(v17, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>::xbox_live_result(
              (xbox::services::matchmaking::create_match_ticket_response *)&v33,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_FinalizeAndRunContinuations(
              v17,
              &v33);
            v18 = (void *)(v34 - 12);
            if ( (int *)(v34 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v34 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v18);
            }
            v19 = (void *)(v33 - 12);
            if ( (int *)(v33 - 12) != &dword_28898C0 )
              v15 = (unsigned int *)(v33 - 4);
                  v16 = __ldrex(v15);
                while ( __strex(v16 - 1, v15) );
                v16 = (*v15)--;
              if ( v16 <= 0 )
                j_j_j_j__ZdlPv_9(v19);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v20 = *v2;
      if ( (*v2)[12] )
        v20[12] = 0;
        v21 = v20[13];
        v20[13] = 0;
        if ( v21 )
          v22 = (unsigned int *)((char *)v21 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            v24 = (unsigned int *)((char *)v21 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v21 + 8))(v21);
            if ( &pthread_create )
              __dmb();
              do
                v25 = __ldrex(v24);
              while ( __strex(v25 - 1, v24) );
            else
              v25 = (*v24)--;
            if ( v25 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v21 + 12))(v21);
      v5 = 1;
    if ( v10 != v11 )
      v26 = v10;
      do
        v27 = v26[1];
        if ( v27 )
          v28 = (unsigned int *)(v27 + 4);
              v29 = __ldrex(v28);
            while ( __strex(v29 - 1, v28) );
            v29 = (*v28)--;
          if ( v29 == 1 )
            v30 = (unsigned int *)(v27 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
                v31 = __ldrex(v30);
              while ( __strex(v31 - 1, v30) );
              v31 = (*v30)--;
            if ( v31 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
        v26 += 2;
      while ( v26 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_2767670;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 144);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_11matchmaking28create_match_ticket_responseEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>),std::function<unsigned char ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(std::function const&<void ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)>)::{lambda(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(std::function const&<void ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)>)::{lambda(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6social17xbox_user_profileEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  j_std::function<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>::operator()(a1, (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2767240;
  v12 = (xbox::services *)j_xbox::services::title_storage::title_storage_quota::title_storage_quota((xbox::services::title_storage::title_storage_quota *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 120) = 0;
  *(_DWORD *)(v3 + 124) = v13;
  *(_DWORD *)(v3 + 128) = &unk_28898CC;
  return v3;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::system::java_rps_ticket>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r1@19
  void *v13; // r0@19
  int v14; // r5@20
  int v15; // r7@20
  int v16; // r4@21
  unsigned int *v17; // r1@22
  unsigned int v18; // r0@24
  unsigned int *v19; // r6@28
  unsigned int v20; // r0@30
  unsigned int *v22; // r2@40
  signed int v23; // r1@42
  unsigned int *v24; // r2@44
  signed int v25; // r1@46

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 8);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 6);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v22 = (unsigned int *)(v10 - 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = *((_DWORD *)v1 + 4);
  v13 = (void *)(v12 - 12);
  if ( (int *)(v12 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v12 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j__ZdlPv_9(v13);
  v15 = *v1 >> 32;
  v14 = *v1;
  if ( v14 != v15 )
    do
      v16 = *(_DWORD *)(v14 + 4);
      if ( v16 )
        v17 = (unsigned int *)(v16 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
        }
        else
          v18 = (*v17)--;
        if ( v18 == 1 )
          v19 = (unsigned int *)(v16 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          if ( &pthread_create )
          {
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
          }
          else
            v20 = (*v19)--;
          if ( v20 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
      v14 += 8;
    while ( v14 != v15 );
    v14 = *(_DWORD *)v1;
  if ( v14 )
    j_operator delete((void *)v14);
  return v1;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::~_Task_impl(a1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


void __fastcall pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::~_Task_impl(a1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-A0h]@10
  int v33; // [sp+4h] [bp-9Ch]@10
  int v34; // [sp+8h] [bp-98h]@16
  int v35; // [sp+Ch] [bp-94h]@20
  char v36; // [sp+14h] [bp-8Ch]@20
  int v37; // [sp+18h] [bp-88h]@20
  void *ptr; // [sp+1Ch] [bp-84h]@20
  int v39; // [sp+20h] [bp-80h]@20
  int v40; // [sp+24h] [bp-7Ch]@20
  char v41; // [sp+28h] [bp-78h]@20
  char v42; // [sp+29h] [bp-77h]@20
  int v43; // [sp+30h] [bp-70h]@4
  int v44; // [sp+34h] [bp-6Ch]@4
  char v45; // [sp+38h] [bp-68h]@3
  int v46; // [sp+78h] [bp-28h]@3
  int v47; // [sp+80h] [bp-20h]@1
  int v48; // [sp+84h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_13title_storage27title_storage_blob_metadataEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>::xbox_live_result(
    (xbox::services::title_storage::title_storage_blob_metadata *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<std::string>),std::function<unsigned char ()(pplx::task<std::string>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(std::function const&<void ()(pplx::task<std::string>)>)::{lambda(pplx::task<std::string>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<std::string>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::string>>(std::function const&<void ()(pplx::task<std::string>)>)::{lambda(pplx::task<std::string>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r9@3
  int v8; // r0@4
  int v9; // r10@8
  unsigned int *v10; // r0@10
  unsigned int v11; // r1@12
  int *v12; // r4@16
  int *v13; // r10@16
  void *v14; // r8@18
  unsigned int *v15; // r1@19
  unsigned int v16; // r0@21
  unsigned int *v17; // r6@25
  unsigned int v18; // r0@27
  void **v19; // r0@33
  int *v20; // r9@36
  unsigned int *v21; // r2@37
  signed int v22; // r1@39
  int v23; // r7@45
  void *v24; // r0@47
  int v25; // r8@48
  unsigned int *v26; // r1@49
  unsigned int v27; // r0@51
  unsigned int *v28; // r7@55
  unsigned int v29; // r0@57
  void **v30; // r0@63
  void *v31; // r5@64
  unsigned int *v32; // r1@65
  unsigned int v33; // r0@67
  unsigned int *v34; // r6@72
  unsigned int v35; // r0@74
  int *v36; // r6@81
  int v37; // r7@82
  unsigned int *v38; // r1@83
  unsigned int v39; // r0@85
  unsigned int *v40; // r5@89
  unsigned int v41; // r0@91
  char v43; // [sp+Ch] [bp-3Ch]@47
  int v44; // [sp+10h] [bp-38h]@48
  int v45; // [sp+1Ch] [bp-2Ch]@37

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 22);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 22);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v12 = 0;
      v13 = 0;
      v5 = 0;
    else
      v4[4] = *(void **)v3;
      v9 = *(_DWORD *)(v3 + 4);
      if ( (void *)v9 != v4[5] )
      {
        if ( v9 )
        {
          v10 = (unsigned int *)(v9 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v11 = __ldrex(v10);
            while ( __strex(v11 + 1, v10) );
          }
          else
            ++*v10;
        }
        v14 = v4[5];
        if ( v14 )
          v15 = (unsigned int *)((char *)v14 + 4);
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
            v16 = (*v15)--;
          if ( v16 == 1 )
            v17 = (unsigned int *)((char *)v14 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v14 + 8))(v14);
            if ( &pthread_create )
            {
              __dmb();
              do
                v18 = __ldrex(v17);
              while ( __strex(v18 - 1, v17) );
            }
            else
              v18 = (*v17)--;
            if ( v18 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v14 + 12))(v14);
        v4[5] = (void *)v9;
      }
      *((_QWORD *)v4 + 3) = *(_QWORD *)(v3 + 8);
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      *((_BYTE *)*v2 + 44) = 1;
      v19 = *v2;
      v12 = (int *)**v2;
      *v19 = 0;
      v13 = (int *)v19[1];
      v19[1] = 0;
      v19[2] = 0;
      if ( v12 != v13 )
        v20 = v12;
        do
          v23 = *v20;
          if ( *(_DWORD *)(*v20 + 4) == 2 )
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v23 + 8))(v23, 1, 0, 0);
            j_xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>::xbox_live_result(
              (int)&v43,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_FinalizeAndRunContinuations(
              v23,
              (int)&v43);
            v24 = (void *)(v45 - 12);
            if ( (int *)(v45 - 12) != &dword_28898C0 )
              v21 = (unsigned int *)(v45 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v22 = __ldrex(v21);
                while ( __strex(v22 - 1, v21) );
              }
              else
                v22 = (*v21)--;
              if ( v22 <= 0 )
                j_j_j_j__ZdlPv_9(v24);
            v25 = v44;
            if ( v44 )
              v26 = (unsigned int *)(v44 + 4);
                  v27 = __ldrex(v26);
                while ( __strex(v27 - 1, v26) );
                v27 = (*v26)--;
              if ( v27 == 1 )
                v28 = (unsigned int *)(v25 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v29 = __ldrex(v28);
                  while ( __strex(v29 - 1, v28) );
                }
                else
                  v29 = (*v28)--;
                if ( v29 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
          v20 += 2;
        while ( v20 != v13 );
      v30 = *v2;
      if ( (*v2)[9] )
        v30[9] = 0;
        v31 = v30[10];
        v30[10] = 0;
        if ( v31 )
          v32 = (unsigned int *)((char *)v31 + 4);
              v33 = __ldrex(v32);
            while ( __strex(v33 - 1, v32) );
            v33 = (*v32)--;
          if ( v33 == 1 )
            v34 = (unsigned int *)((char *)v31 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
                v35 = __ldrex(v34);
              while ( __strex(v35 - 1, v34) );
              v35 = (*v34)--;
            if ( v35 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
        v5 = 1;
      else
    if ( v12 != v13 )
      v36 = v12;
      do
        v37 = v36[1];
        if ( v37 )
          v38 = (unsigned int *)(v37 + 4);
              v39 = __ldrex(v38);
            while ( __strex(v39 - 1, v38) );
            v39 = (*v38)--;
          if ( v39 == 1 )
            v40 = (unsigned int *)(v37 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v37 + 8))(v37);
                v41 = __ldrex(v40);
              while ( __strex(v41 - 1, v40) );
              v41 = (*v40)--;
            if ( v41 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v37 + 12))(v37);
        v36 += 2;
      while ( v36 != v13 );
    if ( v12 )
      j_operator delete(v12);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27678E8;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 232);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::tournaments::tournament::~tournament((xbox::services::tournaments::tournament *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[23]; // [sp+4h] [bp-74h]@7
  int v18; // [sp+60h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 112) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 120) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>::xbox_live_result(
      (xbox::services::social::xbox_user_profile *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::social::xbox_user_profile::~xbox_user_profile((xbox::services::social::xbox_user_profile *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_FinalizeAndRunContinuations(int a1, unsigned __int64 *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  unsigned __int64 *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_std::vector<xbox::services::game_server_platform::game_variant,std::allocator<xbox::services::game_server_platform::game_variant>>::operator=(
    a1 + 80,
    a2);
  j_std::vector<xbox::services::game_server_platform::game_variant_schema,std::allocator<xbox::services::game_server_platform::game_variant_schema>>::operator=(
    v2 + 92,
    (unsigned __int64 *)((char *)v3 + 12));
  j_std::vector<xbox::services::game_server_platform::game_server_image_set,std::allocator<xbox::services::game_server_platform::game_server_image_set>>::operator=(
    v2 + 104,
    v3 + 3);
  *(_QWORD *)(v2 + 116) = *(unsigned __int64 *)((char *)v3 + 36);
  EntityInteraction::setInteractText((int *)(v2 + 124), (int *)v3 + 11);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_RegisterTask(
           a1,
           a2);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r1@8
  void *v9; // r0@8
  unsigned int *v11; // r2@10
  signed int v12; // r1@12
  unsigned int *v13; // r2@14
  signed int v14; // r1@16

  v1 = this;
  *(_DWORD *)this = &off_2765A30;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 24);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v11 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
    }
    else
      v12 = (*v11)--;
    if ( v12 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 21);
  v9 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
    v13 = (unsigned int *)(v8 - 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6system14sign_in_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>)#1}::operator()
{
           a2);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_2768628;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 128);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)(v1 + 84));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int __fastcall pplx::task<void>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r3@1
  unsigned int *v4; // r3@2
  unsigned int v5; // r6@4
  int result; // r0@7
  int v7; // r4@7
  unsigned int *v8; // r1@8
  unsigned int *v9; // r5@14
  int v10; // [sp+4h] [bp-1Ch]@1
  int v11; // [sp+8h] [bp-18h]@1
  int v12; // [sp+Ch] [bp-14h]@7

  v10 = *(_DWORD *)a3;
  v3 = *(_DWORD *)(a3 + 4);
  v11 = v3;
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 + 1, v4) );
    }
    else
      ++*v4;
  }
  v12 = *(_DWORD *)(a3 + 8);
  result = pplx::task<unsigned char>::_CreateImpl(a1, a2, (int)&v10);
  v7 = v11;
  if ( v11 )
    v8 = (unsigned int *)(v11 + 4);
        result = __ldrex(v8);
      while ( __strex(result - 1, v8) );
      result = (*v8)--;
    if ( result == 1 )
      v9 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v9);
        while ( __strex(result - 1, v9) );
      }
      else
        result = (*v9)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r5@1
  void **v5; // r0@2
  void **v6; // r0@3
  int v7; // r6@3
  void **v8; // r4@3
  void (__fastcall *v9)(void **, int, signed int); // r3@3
  int result; // r0@5
  void **v11; // r4@6
  void (__fastcall *v12)(void **, void **, signed int); // r3@7

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1};
      goto LABEL_12;
    case 2:
      v6 = (void **)j_operator new(0x10u);
      v7 = *v3;
      v8 = v6;
      v6[2] = 0;
      v9 = *(void (__fastcall **)(void **, int, signed int))(v7 + 8);
      if ( v9 )
      {
        v9(v6, v7, 2);
        v8[3] = *(void **)(v7 + 12);
        v8[2] = *(void **)(v7 + 8);
      }
      result = 0;
      *v4 = v8;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(*a1, *a1, 3);
        j_operator delete(v11);
      goto def_1E607F2;
    case 1:
      v5 = (void **)*a2;
LABEL_12:
      *v4 = v5;
      break;
    default:
def_1E607F2:
  }
  return result;
}


void __fastcall pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(pplx::task<void>)#1}>(int a1, int *a2, int a3, int a4)
{
  pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(pplx::task<void>)#1}>(
    a1,
    a2,
    a3,
    a4);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::~_Task_impl(a1);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::system::java_rps_ticket>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::system::java_rps_ticket>::task<pplx::task_completion_event<xbox::services::system::java_rps_ticket>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>(
           a1,
           a2);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_RegisterTask(
           a1,
           a2);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_RegisterTask(
           a1,
           a2);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<std::string>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r1@19
  void *v13; // r0@19
  int v14; // r5@20
  int v15; // r7@20
  int v16; // r4@21
  unsigned int *v17; // r1@22
  unsigned int v18; // r0@24
  unsigned int *v19; // r6@28
  unsigned int v20; // r0@30
  unsigned int *v22; // r2@40
  signed int v23; // r1@42
  unsigned int *v24; // r2@44
  signed int v25; // r1@46

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 9);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 7);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v22 = (unsigned int *)(v10 - 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = *((_DWORD *)v1 + 4);
  v13 = (void *)(v12 - 12);
  if ( (int *)(v12 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v12 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j__ZdlPv_9(v13);
  v15 = *v1 >> 32;
  v14 = *v1;
  if ( v14 != v15 )
    do
      v16 = *(_DWORD *)(v14 + 4);
      if ( v16 )
        v17 = (unsigned int *)(v16 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
        }
        else
          v18 = (*v17)--;
        if ( v18 == 1 )
          v19 = (unsigned int *)(v16 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          if ( &pthread_create )
          {
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
          }
          else
            v20 = (*v19)--;
          if ( v20 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
      v14 += 8;
    while ( v14 != v15 );
    v14 = *(_DWORD *)v1;
  if ( v14 )
    j_operator delete((void *)v14);
  return v1;
}


int __fastcall pplx::details::_MakeTToUnitFunc<bool>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(bool),std::function<unsigned char ()(bool)> pplx::details::_MakeTToUnitFunc<bool>(std::function const&<void ()(bool)>)::{lambda(bool)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(bool)> pplx::details::_MakeTToUnitFunc<bool>(std::function const&<void ()(bool)>)::{lambda(bool)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>),std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-90h]@10
  int v33; // [sp+4h] [bp-8Ch]@10
  int v34; // [sp+8h] [bp-88h]@16
  int v35; // [sp+Ch] [bp-84h]@20
  char v36; // [sp+14h] [bp-7Ch]@20
  int v37; // [sp+18h] [bp-78h]@20
  void *ptr; // [sp+1Ch] [bp-74h]@20
  int v39; // [sp+20h] [bp-70h]@20
  int v40; // [sp+24h] [bp-6Ch]@20
  char v41; // [sp+28h] [bp-68h]@20
  char v42; // [sp+29h] [bp-67h]@20
  int v43; // [sp+2Ch] [bp-64h]@4
  int v44; // [sp+30h] [bp-60h]@4
  char v45; // [sp+34h] [bp-5Ch]@3
  int v46; // [sp+6Ch] [bp-24h]@3
  int v47; // [sp+70h] [bp-20h]@1
  int v48; // [sp+74h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_20game_server_platform25game_server_ticket_statusEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>::xbox_live_result(
    (xbox::services::game_server_platform::game_server_ticket_status *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::game_server_platform::game_server_ticket_status::~game_server_ticket_status((xbox::services::game_server_platform::game_server_ticket_status *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


void __fastcall pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#2}::operator() const(void)::{lambda(void)#1}>(int a1, int *a2, int a3, int a4)
{
  pplx::task<void>::then<Concurrency::streams::details::streambuf_state_manager<char>::close(std::_Ios_Openmode)::{lambda(void)#2}::operator() const(void)::{lambda(void)#1}>(
    a1,
    a2,
    a3,
    a4);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  pplx::details::_Task_impl_base *v4; // r1@3
  int v5; // r2@3
  char *v7; // r4@4
  int v8; // r3@4
  char *v9; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26D7A9C;
    sub_21E94B4((void **)v7 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v7,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v8);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v9 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v9 = &off_26DD7D0;
    *((_DWORD *)v9 + 1) = &unk_28898CC;
      (int)v9,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  v4 = *v2;
  *(_DWORD *)(v3 + 16) = &unk_28898CC;
  v5 = *((_DWORD *)v4 + 20);
  *(_BYTE *)(v3 + 4) = *((_BYTE *)v4 + 84);
  *(_DWORD *)v3 = v5;
  *(_QWORD *)(v3 + 8) = *((_QWORD *)v4 + 11);
  return EntityInteraction::setInteractText((int *)(v3 + 16), (int *)v4 + 24);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r1@8
  void *v9; // r0@8
  unsigned int *v11; // r2@10
  signed int v12; // r1@12
  unsigned int *v13; // r2@14
  signed int v14; // r1@16

  v1 = this;
  *(_DWORD *)this = &off_27697C4;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 28);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v11 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
    }
    else
      v12 = (*v11)--;
    if ( v12 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 20);
  v9 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
    v13 = (unsigned int *)(v8 - 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>::_Task_impl(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::~_Task_impl(a1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::get(xbox::services::contextual_search::contextual_search_game_clips_result *a1, pplx::details::_Task_impl_base **a2)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::get(
           a1,
           a2);
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<std::error_code>),std::function<unsigned char ()(pplx::task<std::error_code>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::error_code>>(std::function const&<void ()(pplx::task<std::error_code>)>)::{lambda(pplx::task<std::error_code>)#1}>::_M_invoke(int *a1, int a2)
{
  __int64 v2; // kr00_8@1
  int v3; // r0@1
  bool v4; // zf@1
  unsigned int *v5; // r1@2
  unsigned int v6; // r3@3
  void (*v7)(void); // r3@7
  int v8; // r5@7
  unsigned int *v9; // r0@8
  unsigned int v10; // r1@9
  unsigned int *v11; // r6@11
  unsigned int v12; // r0@12
  unsigned int *v13; // r0@16
  unsigned int v14; // r1@17
  unsigned int *v15; // r5@19
  unsigned int v16; // r0@20
  __int64 v18; // [sp+4h] [bp-1Ch]@7

  v2 = *(_QWORD *)a2;
  v3 = *a1;
  v4 = *(_QWORD *)a2 >> 32 == 0;
  *(_DWORD *)a2 = 0;
  *(_DWORD *)(a2 + 4) = 0;
  if ( !v4 )
  {
    v5 = (unsigned int *)(HIDWORD(v2) + 4);
    __dmb();
    do
      v6 = __ldrex(v5);
    while ( __strex(v6 + 1, v5) );
  }
  if ( !*(_DWORD *)(v3 + 8) )
    sub_21E5F48();
  v7 = *(void (**)(void))(v3 + 12);
  v18 = v2;
  v7();
  v8 = HIDWORD(v18);
  if ( HIDWORD(v18) )
    v9 = (unsigned int *)(HIDWORD(v18) + 4);
      v10 = __ldrex(v9);
    while ( __strex(v10 - 1, v9) );
    if ( v10 == 1 )
    {
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
    }
  if ( HIDWORD(v2) )
    v13 = (unsigned int *)(HIDWORD(v2) + 4);
      v14 = __ldrex(v13);
    while ( __strex(v14 - 1, v13) );
    if ( v14 == 1 )
      v15 = (unsigned int *)(HIDWORD(v2) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v2) + 8))(HIDWORD(v2));
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
      if ( v16 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v2) + 12))(HIDWORD(v2));
  return 0;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r5@1
  void **v5; // r0@2
  void **v6; // r0@3
  int v7; // r6@3
  void **v8; // r4@3
  void (__fastcall *v9)(void **, int, signed int); // r3@3
  int result; // r0@5
  void **v11; // r4@6
  void (__fastcall *v12)(void **, void **, signed int); // r3@7

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<unsigned char ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::shared_ptr<xbox::services::http_call_response>>>(std::function const&<void ()(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)>)::{lambda(pplx::task<std::shared_ptr<xbox::services::http_call_response>>)#1};
      goto LABEL_12;
    case 2:
      v6 = (void **)j_operator new(0x10u);
      v7 = *v3;
      v8 = v6;
      v6[2] = 0;
      v9 = *(void (__fastcall **)(void **, int, signed int))(v7 + 8);
      if ( v9 )
      {
        v9(v6, v7, 2);
        v8[3] = *(void **)(v7 + 12);
        v8[2] = *(void **)(v7 + 8);
      }
      result = 0;
      *v4 = v8;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(*a1, *a1, 3);
        j_operator delete(v11);
      goto def_1E7E9FE;
    case 1:
      v5 = (void **)*a2;
LABEL_12:
      *v4 = v5;
      break;
    default:
def_1E7E9FE:
  }
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_20game_server_platform14cluster_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::~_Task_impl(a1);
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<std::error_code>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::error_code>>(std::function const&<void ()(pplx::task<std::error_code>)>)::{lambda(pplx::task<std::error_code>)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r4@1
  void **v5; // r0@2
  int result; // r0@4
  void **v7; // r0@5
  int v8; // r6@5
  void **v9; // r5@5
  void (__fastcall *v10)(void **, int, signed int); // r3@5
  void **v11; // r4@8
  void (__fastcall *v12)(void **, void **, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<unsigned char ()(pplx::task<std::error_code>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::error_code>>(std::function const&<void ()(pplx::task<std::error_code>)>)::{lambda(pplx::task<std::error_code>)#1};
      goto LABEL_4;
    case 1:
      v5 = (void **)*a2;
LABEL_4:
      *v4 = v5;
      return 0;
    case 2:
      v7 = (void **)j_operator new(0x10u);
      v8 = *v3;
      v9 = v7;
      v7[2] = 0;
      v10 = *(void (__fastcall **)(void **, int, signed int))(v8 + 8);
      if ( v10 )
      {
        v10(v7, v8, 2);
        v9[3] = *(void **)(v8 + 12);
        v9[2] = *(void **)(v8 + 8);
      }
      result = 0;
      *v4 = v9;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(v11, v11, 3);
        j_operator delete(v11);
      break;
    default:
  }
  return 0;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_RegisterTask(_DWORD *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  void *v9; // r0@8
  unsigned int *v10; // r2@9
  signed int v11; // r1@11
  int v12; // r1@13 OVERLAPPED
  int v13; // r2@13
  int v14; // r2@14
  unsigned int *v15; // r1@15
  unsigned int v16; // r2@17
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@22
  unsigned int *v18; // r2@25
  signed int v19; // r1@27
  int v20; // [sp+8h] [bp-38h]@7
  int v21; // [sp+20h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 48) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 56) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>::xbox_live_result(
      (xbox::services::matchmaking::create_match_ticket_response *)&v20,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_FinalizeAndRunContinuations(
      v7,
      &v20);
    v8 = (void *)(v21 - 12);
    if ( (int *)(v21 - 12) != &dword_28898C0 )
    {
      v18 = (unsigned int *)(v21 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
      }
      else
        v19 = (*v18)--;
      if ( v19 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    v9 = (void *)(v20 - 12);
    if ( (int *)(v20 - 12) != &dword_28898C0 )
      v10 = (unsigned int *)(v20 - 4);
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
        v11 = (*v10)--;
      if ( v11 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
  else
    *(_QWORD *)&v12 = *(_QWORD *)(v4 + 4);
    if ( v12 == v13 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v12 = *v2;
      v14 = v2[1];
      *(_DWORD *)(v12 + 4) = v14;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 + 1, v15) );
        }
        else
          ++*v15;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


int (__fastcall *__fastcall pplx::details::_MakeTToUnitFunc<pplx::task<std::error_code>>(int a1, int a2))(int *a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  int (__fastcall *result)(int *, int); // r0@5
  char v8; // [sp+4h] [bp-24h]@2
  int (*v9)(void); // [sp+Ch] [bp-1Ch]@1
  int v10; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v9 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v8);
    v10 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v9 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v8, 2);
    v5 = v9;
    v6[3] = v10;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  result = std::_Function_handler<unsigned char ()(pplx::task<std::error_code>),std::function<unsigned char ()(pplx::task<std::error_code>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::error_code>>(std::function const&<void ()(pplx::task<std::error_code>)>)::{lambda(pplx::task<std::error_code>)#1}>::_M_invoke;
  *(_DWORD *)(v3 + 8) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<std::error_code>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::error_code>>(std::function const&<void ()(pplx::task<std::error_code>)>)::{lambda(pplx::task<std::error_code>)#1}>::_M_manager;
  *(_DWORD *)(v3 + 12) = std::_Function_handler<unsigned char ()(pplx::task<std::error_code>),std::function<unsigned char ()(pplx::task<std::error_code>)> pplx::details::_MakeTToUnitFunc<pplx::task<std::error_code>>(std::function const&<void ()(pplx::task<std::error_code>)>)::{lambda(pplx::task<std::error_code>)#1}>::_M_invoke;
    result = (int (__fastcall *)(int *, int))v5();
  return result;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r1@8
  void *v9; // r0@8
  unsigned int *v11; // r2@10
  signed int v12; // r1@12
  unsigned int *v13; // r2@14
  signed int v14; // r1@16

  v1 = this;
  *(_DWORD *)this = &off_27684F8;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 22);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v11 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
    }
    else
      v12 = (*v11)--;
    if ( v12 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 20);
  v9 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
    v13 = (unsigned int *)(v8 - 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::title_storage::title_storage_blob_metadata_result::title_storage_blob_metadata_result((xbox::services::title_storage::title_storage_blob_metadata_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 84) = v3;
  *(_DWORD *)(v1 + 88) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 100) = 0;
  *(_DWORD *)(v1 + 92) = 0;
  *(_DWORD *)(v1 + 96) = 0;
  return result;
}


int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<void>>::~task_completion_event(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 4);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  return v1;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27679D8;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 136);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::tournaments::team_request_result::~team_request_result((xbox::services::tournaments::team_request_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


xbox::services::achievements::achievement *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::get(xbox::services::achievements::achievement *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::achievements::achievement *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::achievements::achievement>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::task_completion_event<void>::set_exception<web::websockets::client::websocket_exception>(int a1, int a2)
{
  int result; // r0@3
  void **v7; // [sp+10h] [bp-30h]@1
  __int64 v8; // [sp+14h] [bp-2Ch]@1
  int v9; // [sp+1Ch] [bp-24h]@1
  char v10; // [sp+20h] [bp-20h]@2

  v7 = &off_276C1E0;
  v8 = *(_QWORD *)(a2 + 4);
  sub_21E8AF4(&v9, (int *)(a2 + 12));
  j_std::make_exception_ptr<web::websockets::client::websocket_exception>((int)&v10, (int)&v7);
  return result;
}


int *__fastcall pplx::task<web::websockets::client::websocket_incoming_message>::task<pplx::task_completion_event<web::websockets::client::websocket_incoming_message>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r10@1
  int v5; // r9@1
  int v6; // r7@1
  int v7; // r8@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r7@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r4@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r5@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r5@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r4@52
  int v32; // r4@57
  __int64 v33; // r0@60
  int v34; // r6@62
  unsigned int *v35; // r0@63
  unsigned int v36; // r1@65
  unsigned int *v37; // r1@69
  unsigned int v38; // r0@71
  unsigned int *v39; // r5@75
  unsigned int v40; // r0@77
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+10h] [bp-30h]@24
  int v47; // [sp+14h] [bp-2Ch]@24
  int v48; // [sp+18h] [bp-28h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<web::websockets::client::websocket_incoming_message>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::_RegisterTask((int *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl_base::~_Task_impl_base(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  int v2; // r0@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@3
  void *v5; // r0@6
  int v6; // r5@8
  unsigned int *v7; // r1@9
  unsigned int v8; // r0@11
  unsigned int *v9; // r6@15
  unsigned int v10; // r0@17
  int v11; // r5@22
  unsigned int *v12; // r1@23
  unsigned int v13; // r0@25
  unsigned int *v14; // r6@29
  unsigned int v15; // r0@31

  v1 = this;
  *(_DWORD *)this = &off_26D7AC4;
  v2 = *((_DWORD *)this + 6);
  if ( v2 != 2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 - 1, v3) );
    if ( v4 == 1 )
      (*(void (**)(void))(*(_DWORD *)v2 + 8))();
  }
  v5 = (void *)*((_DWORD *)v1 + 16);
  if ( v5 )
    operator delete(v5);
  v6 = *((_DWORD *)v1 + 13);
  if ( v6 )
    v7 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 == 1 )
      v9 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  sub_DA7F4C((pthread_cond_t *)((char *)v1 + 40));
  v11 = *((_DWORD *)v1 + 4);
  if ( v11 )
    v12 = (unsigned int *)(v11 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
      v13 = (*v12)--;
    if ( v13 == 1 )
      v14 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
        v15 = (*v14)--;
      if ( v15 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  return v1;
}


int __fastcall pplx::task<web::json::value>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  __int64 v8; // r0@7
  int v9; // r6@7
  unsigned int *v10; // r7@14
  int v11; // r6@21
  unsigned int *v12; // r7@28
  int v13; // r6@35
  unsigned int *v14; // r7@42
  int v15; // r0@50
  int v16; // r1@50
  unsigned int *v17; // r1@51
  unsigned int v18; // r2@53
  unsigned int *v19; // r2@57
  unsigned int v20; // r1@59
  int v22; // [sp+0h] [bp-38h]@50
  int v23; // [sp+4h] [bp-34h]@50
  int v24; // [sp+8h] [bp-30h]@1
  int v25; // [sp+Ch] [bp-2Ch]@1
  int v26; // [sp+10h] [bp-28h]@7
  char v27; // [sp+14h] [bp-24h]@7
  int v28; // [sp+18h] [bp-20h]@7
  int v29; // [sp+1Ch] [bp-1Ch]@7
  char v30; // [sp+20h] [bp-18h]@7

  v3 = a1;
  v24 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v25 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v26 = *(_DWORD *)(a3 + 8);
  v29 = v4;
  std::__shared_ptr<pplx::details::_Task_impl<web::json::value>,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_Task_impl<web::json::value>>,pplx::details::_CancellationTokenState *&,pplx::scheduler_ptr &>(
    (int)&v27,
    (int)&v30,
    &v29,
    (int)&v24);
  v8 = *(_QWORD *)&v27;
  *(_DWORD *)&v27 = 0;
  v28 = 0;
  *(_DWORD *)v3 = v8;
  v9 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = HIDWORD(v8);
  if ( v9 )
    HIDWORD(v8) = v9 + 4;
        LODWORD(v8) = __ldrex((unsigned int *)HIDWORD(v8));
      while ( __strex(v8 - 1, (unsigned int *)HIDWORD(v8)) );
      LODWORD(v8) = (*(_DWORD *)HIDWORD(v8))--;
    if ( (_DWORD)v8 == 1 )
      v10 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          LODWORD(v8) = __ldrex(v10);
        while ( __strex(v8 - 1, v10) );
      }
      else
        LODWORD(v8) = (*v10)--;
      if ( (_DWORD)v8 == 1 )
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v11 = v28;
  if ( v28 )
    HIDWORD(v8) = v28 + 4;
      v12 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          LODWORD(v8) = __ldrex(v12);
        while ( __strex(v8 - 1, v12) );
        LODWORD(v8) = (*v12)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v13 = v25;
  if ( v25 )
    HIDWORD(v8) = v25 + 4;
      v14 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          LODWORD(v8) = __ldrex(v14);
        while ( __strex(v8 - 1, v14) );
        LODWORD(v8) = (*v14)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  if ( v4 != 2 )
    v15 = *(_DWORD *)v3;
    v22 = *(_DWORD *)v3;
    v16 = *(_DWORD *)(v3 + 4);
    v23 = v16;
    if ( v16 )
      v17 = (unsigned int *)(v16 + 8);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    pplx::details::_Task_impl_base::_RegisterCancellation(v15, (unsigned __int64 *)&v22);
    LODWORD(v8) = v23;
    if ( v23 )
      v19 = (unsigned int *)(v23 + 8);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        LODWORD(v8) = (*(int (__cdecl **)(_DWORD))(*(_DWORD *)v8 + 12))(v8);
  return v8;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  unsigned __int64 v17[6]; // [sp+4h] [bp-4Ch]@7
  int v18; // [sp+38h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 72) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 80) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>::xbox_live_result(
      (xbox::services::contextual_search::contextual_search_game_clips_result *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::contextual_search::contextual_search_game_clips_result::~contextual_search_game_clips_result((xbox::services::contextual_search::contextual_search_game_clips_result *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 20);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 18);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::tournaments::tournament_request_result::~tournament_request_result((xbox::services::tournaments::tournament_request_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  int v8; // r1@8
  void *v9; // r0@8
  int v10; // r1@9
  void *v11; // r0@9
  unsigned int *v13; // r2@11
  signed int v14; // r1@13
  unsigned int *v15; // r2@15
  signed int v16; // r1@17
  unsigned int *v17; // r2@19
  signed int v18; // r1@21

  v1 = this;
  *(_DWORD *)this = &off_2764E20;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 24);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v13 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
    }
    else
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 21);
  v9 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
    v15 = (unsigned int *)(v8 - 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  v10 = *((_DWORD *)v1 + 20);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v17 = (unsigned int *)(v10 - 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
      v18 = (*v17)--;
    if ( v18 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::set(
           a1,
           a2);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::title_storage::title_storage_blob_result::title_storage_blob_result((xbox::services::title_storage::title_storage_blob_result *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 84) = v3;
  *(_DWORD *)(v1 + 88) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 104) = 0;
  *(_DWORD *)(v1 + 96) = 0;
  *(_DWORD *)(v1 + 100) = 0;
  return result;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<std::string>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = this;
  *(_DWORD *)this = &off_26DE7D4;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 20);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v7);
  pplx::details::_Task_impl_base::~_Task_impl_base(v1);
  return v1;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::~_Task_impl(a1);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>(
           a1,
           a2,
           a3);
}


  if ( pplx::details::_Task_impl_base::_Wait(v2) == 2 )
{
    v4 = j___cxa_allocate_exception(8);
    *(_DWORD *)v4 = &off_26DD7D0;
    *((_DWORD *)v4 + 1) = &unk_28898CC;
    j___cxa_throw(
      (int)v4,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  }
  return *((_BYTE *)*v1 + 77);
}


pthread_t pplx::details::platform::GetCurrentThreadId(void)
{
  return pplx::details::platform::GetCurrentThreadId();
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v5; // r0@8
  int v6; // r1@12
  int v7; // r5@13

  v2 = a1;
  *(_DWORD *)(a1 + 80) = *(_DWORD *)a2;
  *(_QWORD *)(a1 + 84) = *(_QWORD *)(a2 + 4);
  EntityInteraction::setInteractText((int *)(a1 + 92), (int *)(a2 + 12));
  if ( &pthread_create )
  {
    v3 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v3 )
      sub_21E5E14(v3);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v5 )
        sub_21E5E14(v5);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v6 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v6 )
      do
      {
        v7 = *(_DWORD *)(v6 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v6);
        v6 = v7;
      }
      while ( v7 );
  return result;
}


_DWORD *__fastcall pplx::details::_Task_impl<web::http::http_response>::_Task_impl(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+0h] [bp-20h]@1
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  pplx::details::_Task_impl_base::_Task_impl_base((int)v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *v3 = &off_26DE174;
  j__ZNSt12__shared_ptrIN3web4http7details14_http_responseELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS3_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)(v3 + 20));
  return v3;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-100h]@10
  int v33; // [sp+4h] [bp-FCh]@10
  int v34; // [sp+8h] [bp-F8h]@16
  int v35; // [sp+Ch] [bp-F4h]@20
  char v36; // [sp+14h] [bp-ECh]@20
  int v37; // [sp+18h] [bp-E8h]@20
  void *ptr; // [sp+1Ch] [bp-E4h]@20
  int v39; // [sp+20h] [bp-E0h]@20
  int v40; // [sp+24h] [bp-DCh]@20
  char v41; // [sp+28h] [bp-D8h]@20
  char v42; // [sp+29h] [bp-D7h]@20
  int v43; // [sp+30h] [bp-D0h]@4
  int v44; // [sp+34h] [bp-CCh]@4
  char v45; // [sp+38h] [bp-C8h]@3
  int v46; // [sp+D8h] [bp-28h]@3
  int v47; // [sp+E0h] [bp-20h]@1
  int v48; // [sp+E4h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_12achievements11achievementEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::achievements::achievement>::xbox_live_result(
    (xbox::services::achievements::achievement *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::achievements::achievement::~achievement((xbox::services::achievements::achievement *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_13title_storage34title_storage_blob_metadata_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::set(
           a1,
           a2);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


signed int __fastcall pplx::task_completion_event<std::string>::set(_DWORD *a1, int *a2)
{
  _DWORD *v2; // r5@1
  int *v3; // r4@1
  int v4; // r0@1
  signed int v5; // r9@1
  unsigned int v6; // r1@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  int v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@22
  void *v16; // r0@24
  int v17; // r0@26
  int v18; // r5@27
  unsigned int *v19; // r1@28
  unsigned int v20; // r0@30
  unsigned int *v21; // r6@34
  unsigned int v22; // r0@36
  int *v23; // r6@43
  int v24; // r7@44
  unsigned int *v25; // r1@45
  unsigned int v26; // r0@47
  unsigned int *v27; // r5@51
  unsigned int v28; // r0@53
  int v30; // [sp+8h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *(_WORD *)(v4 + 28);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 12);
    if ( &pthread_create )
    {
      v8 = pthread_mutex_lock((pthread_mutex_t *)(v4 + 12));
      if ( v8 )
        sub_119CCFC(v8);
      v4 = *v2;
      v6 = *(_WORD *)(*v2 + 28);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        pthread_mutex_unlock(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)(v4 + 16), v3);
      v9 = *v2;
      *(_BYTE *)(v9 + 28) = 1;
      v10 = *(int **)v9;
      *(_DWORD *)v9 = 0;
      v11 = *(int **)(v9 + 4);
      *(_DWORD *)(v9 + 4) = 0;
      *(_DWORD *)(v9 + 8) = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            sub_119C854(&v30, (int *)(*v2 + 16));
            pplx::details::_Task_impl<std::string>::_FinalizeAndRunContinuations(v15, &v30);
            v16 = (void *)(v30 - 12);
            if ( (int *)(v30 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v30 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v16);
            }
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( *(_DWORD *)(*v2 + 20) )
        *(_DWORD *)(v17 + 20) = 0;
        v18 = *(_DWORD *)(v17 + 24);
        *(_DWORD *)(v17 + 24) = 0;
        if ( v18 )
          v19 = (unsigned int *)(v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)(v18 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2767510;
  v12 = j_xbox::services::title_storage::title_storage_blob_result::title_storage_blob_result((xbox::services::title_storage::title_storage_blob_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 144) = 0;
  *(_DWORD *)(v3 + 148) = v13;
  *(_DWORD *)(v3 + 152) = &unk_28898CC;
  return v3;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = a1;
  *(_DWORD *)a1 = &off_276687C;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  j_xbox::services::xbox_live_result<xbox::services::presence::presence_record>::~xbox_live_result(v1 + 80);
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_4((pplx::details::_Task_impl_base *)v1);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::system::java_rps_ticket>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r4@8
  int *v11; // r8@8
  int *v12; // r9@11
  int *v13; // r7@14
  unsigned int *v14; // r2@15
  signed int v15; // r1@17
  unsigned int *v16; // r2@19
  signed int v17; // r1@21
  int v18; // r4@30
  void **v19; // r7@32
  void *v20; // r0@32
  void *v21; // r0@33
  void **v22; // r0@35
  void *v23; // r5@36
  unsigned int *v24; // r1@37
  unsigned int v25; // r0@39
  unsigned int *v26; // r4@44
  unsigned int v27; // r0@46
  int *v28; // r6@53
  int v29; // r4@54
  unsigned int *v30; // r1@55
  unsigned int v31; // r0@57
  unsigned int *v32; // r5@61
  unsigned int v33; // r0@63
  int *ptr; // [sp+8h] [bp-38h]@10
  int v36; // [sp+Ch] [bp-34h]@19
  void *v37; // [sp+10h] [bp-30h]@32
  int v38; // [sp+14h] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 18);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 18);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v7);
      v13 = 0;
      v11 = 0;
      v5 = 0;
    else
      EntityInteraction::setInteractText((int *)v4 + 4, (int *)v3);
      v4[5] = *(void **)(v3 + 4);
      EntityInteraction::setInteractText((int *)v4 + 6, (int *)(v3 + 8));
      *((_BYTE *)*v2 + 36) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      ptr = v10;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v18 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v18 + 8))(v18, 1, 0, 0);
          }
          else
            v19 = *v2;
            sub_21E8AF4(&v36, (int *)*v2 + 4);
            v37 = v19[5];
            sub_21E8AF4(&v38, (int *)v19 + 6);
            j_pplx::details::_Task_impl<xbox::services::system::java_rps_ticket>::_FinalizeAndRunContinuations(
              v18,
              &v36);
            v20 = (void *)(v38 - 12);
            if ( (int *)(v38 - 12) != &dword_28898C0 )
            {
              v14 = (unsigned int *)(v38 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v15 = __ldrex(v14);
                while ( __strex(v15 - 1, v14) );
              }
              else
                v15 = (*v14)--;
              if ( v15 <= 0 )
                j_j_j_j__ZdlPv_9(v20);
            }
            v21 = (void *)(v36 - 12);
            if ( (int *)(v36 - 12) != &dword_28898C0 )
              v16 = (unsigned int *)(v36 - 4);
                  v17 = __ldrex(v16);
                while ( __strex(v17 - 1, v16) );
                v17 = (*v16)--;
              if ( v17 <= 0 )
                j_j_j_j__ZdlPv_9(v21);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v22 = *v2;
      if ( (*v2)[7] )
        v13 = ptr;
        v22[7] = 0;
        v23 = v22[8];
        v22[8] = 0;
        if ( v23 )
          v24 = (unsigned int *)((char *)v23 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v25 = __ldrex(v24);
            while ( __strex(v25 - 1, v24) );
            v25 = (*v24)--;
          if ( v25 == 1 )
            v26 = (unsigned int *)((char *)v23 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v23 + 8))(v23);
            if ( &pthread_create )
              __dmb();
              do
                v27 = __ldrex(v26);
              while ( __strex(v27 - 1, v26) );
            else
              v27 = (*v26)--;
            if ( v27 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v23 + 12))(v23);
        v5 = 1;
      else
    if ( v13 != v11 )
      v28 = v13;
      do
        v29 = v28[1];
        if ( v29 )
          v30 = (unsigned int *)(v29 + 4);
              v31 = __ldrex(v30);
            while ( __strex(v31 - 1, v30) );
            v31 = (*v30)--;
          if ( v31 == 1 )
            v32 = (unsigned int *)(v29 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
                v33 = __ldrex(v32);
              while ( __strex(v33 - 1, v32) );
              v33 = (*v32)--;
            if ( v33 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
        v28 += 2;
      while ( v28 != v11 );
    if ( v13 )
      j_operator delete(v13);
  }
  return v5;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_user_profile>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<void>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<void>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<void>>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<void>>::_RegisterTask((_DWORD *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r4@26
  unsigned int v16; // r0@28
  int v17; // r5@33
  int v18; // r7@33
  int v19; // r4@34
  unsigned int *v20; // r1@35
  unsigned int v21; // r0@37
  unsigned int *v22; // r6@41
  unsigned int v23; // r0@43
  unsigned int *v25; // r2@53
  signed int v26; // r1@55

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 10);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 8);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v25 = (unsigned int *)(v10 - 4);
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
      v26 = (*v25)--;
    if ( v26 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = *((_DWORD *)v1 + 5);
  if ( v12 )
    v13 = (unsigned int *)(v12 + 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      v14 = (*v13)--;
    if ( v14 == 1 )
      v15 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        v16 = (*v15)--;
      if ( v16 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  v18 = *v1 >> 32;
  v17 = *v1;
  if ( v17 != v18 )
    do
      v19 = *(_DWORD *)(v17 + 4);
      if ( v19 )
        v20 = (unsigned int *)(v19 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
        }
        else
          v21 = (*v20)--;
        if ( v21 == 1 )
          v22 = (unsigned int *)(v19 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
          if ( &pthread_create )
          {
            __dmb();
            do
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
          }
          else
            v23 = (*v22)--;
          if ( v23 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
      v17 += 8;
    while ( v17 != v18 );
    v17 = *(_DWORD *)v1;
  if ( v17 )
    j_operator delete((void *)v17);
  return v1;
}


int (**__fastcall pplx::details::_Task_impl<std::string>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v5; // r0@8
  int v6; // r1@12
  int v7; // r5@13

  v2 = a1;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  if ( &pthread_create )
  {
    v3 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
    if ( v3 )
      sub_119CCFC(v3);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v5 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 36));
      if ( v5 )
        sub_119CCFC(v5);
      *(_BYTE *)(v2 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)(v2 + 36));
    }
    else
    v6 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v6 )
      do
      {
        v7 = *(_DWORD *)(v6 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v6);
        v6 = v7;
      }
      while ( v7 );
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::tournaments::tournament_request_result::operator=(a1 + 80, a2);
  *(_QWORD *)(v2 + 128) = *(_QWORD *)(v3 + 48);
  EntityInteraction::setInteractText((int *)(v2 + 136), (int *)(v3 + 56));
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[12]; // [sp+8h] [bp-50h]@7
  int v18; // [sp+38h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 72) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 80) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>::xbox_live_result(
      (xbox::services::title_storage::title_storage_quota *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::title_storage::title_storage_quota::~title_storage_quota((xbox::services::title_storage::title_storage_quota *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::set(
           a1,
           a2);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_RegisterTask(
           a1,
           a2);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::get(xbox::services::title_storage::title_storage_blob_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::title_storage::title_storage_blob_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int *__fastcall pplx::details::_JoinAllTokens_Add(int *result, int a2)
{
  pplx::details::_CancellationTokenState *v2; // r8@1
  unsigned int *v3; // r7@2
  unsigned int v4; // r1@3
  int v5; // r5@4
  unsigned int *v6; // r0@5
  unsigned int v7; // r1@6
  void *v8; // r4@9
  unsigned int *v9; // r6@9
  unsigned int *v10; // r0@10
  unsigned int v11; // r1@11
  unsigned int v12; // r0@14
  unsigned int *v13; // r0@18
  unsigned int v14; // r1@19
  char *v15; // r0@27

  v2 = (pplx::details::_CancellationTokenState *)a2;
  if ( (a2 | 2) != 2 )
  {
    v3 = (unsigned int *)(a2 + 4);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 + 1, v3) );
    v5 = *result;
    if ( *result )
    {
      v6 = (unsigned int *)(v5 + 4);
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    if ( !v2 )
      v15 = j___cxa_allocate_exception(8);
      *(_DWORD *)v15 = &off_26D7A9C;
      *((_DWORD *)v15 + 1) = &unk_28898CC;
      j___cxa_throw(
        (int)v15,
        (int)&`typeinfo for'pplx::invalid_operation,
        (int)pplx::invalid_operation::~invalid_operation,
        (int)&unk_28898CC);
    v8 = operator new(0x18u);
    *((_DWORD *)v8 + 1) = 1;
    v9 = (unsigned int *)((char *)v8 + 4);
    *((_DWORD *)v8 + 2) = 3;
    *((_DWORD *)v8 + 4) = 0;
    *(_DWORD *)v8 = &off_26DD698;
    if ( v5 )
      v10 = (unsigned int *)(v5 + 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 + 1, v10) );
    *((_DWORD *)v8 + 5) = v5;
    pplx::details::_CancellationTokenState::_RegisterCallback(v2, (pplx::details::_CancellationTokenRegistration *)v8);
      v12 = __ldrex(v9);
    while ( __strex(v12 - 1, v9) );
    if ( v12 == 1 )
      (*(void (__fastcall **)(void *))(*(_DWORD *)v8 + 8))(v8);
      v13 = (unsigned int *)(v5 + 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      result = (int *)__ldrex(v3);
    while ( __strex((unsigned int)result - 1, v3) );
    if ( result == (int *)1 )
      result = (int *)(*(int (__fastcall **)(pplx::details::_CancellationTokenState *))(*(_DWORD *)v2 + 8))(v2);
  }
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_RegisterTask(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::~_Task_impl(a1);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 24);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 22);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::title_storage::title_storage_blob_metadata_result::~title_storage_blob_metadata_result((xbox::services::title_storage::title_storage_blob_metadata_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<web::http::http_response>::~_Task_impl(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base *v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r5@7
  unsigned int *v7; // r1@8
  unsigned int v8; // r0@10
  unsigned int *v9; // r6@14
  unsigned int v10; // r0@16

  v1 = this;
  *(_DWORD *)this = &off_26DE174;
  v2 = (pplx::details::_CancellationTokenRegistration *)*((_DWORD *)this + 7);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *((pplx::details::_CancellationTokenState **)this + 6),
      v2);
    v3 = *((_DWORD *)v1 + 7);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *((_DWORD *)v1 + 7) = 0;
  }
  v6 = *((_DWORD *)v1 + 21);
  if ( v6 )
    v7 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 == 1 )
      v9 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_2(v1);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::~_Task_impl(a1);
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7((void *)v1);
}


signed int __fastcall pplx::details::_Task_impl<std::string>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r9@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r6@5
  int v12; // r8@5
  unsigned int *v13; // r0@7
  unsigned int v14; // r1@9
  bool v15; // zf@11
  signed __int64 v16; // r6@16
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = pthread_mutex_lock(v6);
    if ( v9 )
      sub_119CCFC(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v15 = v10 == 3;
    if ( v10 != 3 )
      v15 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v15 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v16 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(v5 + 16);
  v12 = *(_DWORD *)(a5 + 4);
  if ( v12 != v11 )
    if ( v12 )
    {
      v13 = (unsigned int *)(v12 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
        v11 = *(_DWORD *)(v5 + 16);
      }
      else
        ++*v13;
    }
    if ( v11 )
      v17 = (unsigned int *)(v11 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    *(_DWORD *)(v5 + 16) = v12;
LABEL_33:
  if ( v8 == 1 )
    v16 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v16 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    pthread_mutex_unlock(v6);
  if ( v16 )
    result = v16 ^ 1;
    if ( &pthread_create )
      v23 = pthread_mutex_lock((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_119CCFC(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v5 + 40));
        pthread_mutex_unlock((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<std::string>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<std::string>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = operator new(0x10u);
      v26[2] = 0;
      v27 = operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<std::string>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<std::string>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-118h]@10
  int v33; // [sp+4h] [bp-114h]@10
  int v34; // [sp+8h] [bp-110h]@16
  int v35; // [sp+Ch] [bp-10Ch]@20
  char v36; // [sp+14h] [bp-104h]@20
  int v37; // [sp+18h] [bp-100h]@20
  void *ptr; // [sp+1Ch] [bp-FCh]@20
  int v39; // [sp+20h] [bp-F8h]@20
  int v40; // [sp+24h] [bp-F4h]@20
  char v41; // [sp+28h] [bp-F0h]@20
  char v42; // [sp+29h] [bp-EFh]@20
  int v43; // [sp+30h] [bp-E8h]@4
  int v44; // [sp+34h] [bp-E4h]@4
  char v45; // [sp+38h] [bp-E0h]@3
  int v46; // [sp+F0h] [bp-28h]@3
  int v47; // [sp+F8h] [bp-20h]@1
  int v48; // [sp+FCh] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_11tournaments9team_infoEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::tournaments::team_info>::xbox_live_result(
    (xbox::services::tournaments::team_info *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::tournaments::team_info::~team_info((xbox::services::tournaments::team_info *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@1
  int v5; // r1@1
  int v6; // r2@1
  int v7; // r3@1
  int v8; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v10; // r0@8
  int v11; // r1@12
  int v12; // r5@13

  v2 = a2;
  v3 = a1;
  v4 = *(_DWORD *)a2;
  v5 = *(_DWORD *)(a2 + 4);
  v6 = *(_DWORD *)(v2 + 8);
  v7 = v3 + 80;
  *(_DWORD *)v7 = v4;
  *(_DWORD *)(v7 + 4) = v5;
  *(_DWORD *)(v7 + 8) = v6;
  EntityInteraction::setInteractText((int *)(v3 + 92), (int *)(v2 + 12));
  EntityInteraction::setInteractText((int *)(v3 + 96), (int *)(v2 + 16));
  EntityInteraction::setInteractText((int *)(v3 + 100), (int *)(v2 + 20));
  j_std::vector<xbox::services::game_server_platform::game_server_port_mapping,std::allocator<xbox::services::game_server_platform::game_server_port_mapping>>::operator=(
    v3 + 104,
    (unsigned __int64 *)(v2 + 24));
  *(_QWORD *)(v3 + 120) = *(_QWORD *)(v2 + 40);
  EntityInteraction::setInteractText((int *)(v3 + 128), (int *)(v2 + 48));
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 20));
    if ( v8 )
      sub_21E5E14(v8);
  }
  if ( *(_DWORD *)(v3 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20));
  else
    *(_DWORD *)(v3 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 20)), &pthread_create) )
    {
      v10 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v3 + 36));
      if ( v10 )
        sub_21E5E14(v10);
      *(_BYTE *)(v3 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v3 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_0((pthread_mutex_t *)(v3 + 36));
    }
    else
    v11 = *(_DWORD *)(v3 + 32);
    result = 0;
    *(_DWORD *)(v3 + 32) = 0;
    if ( v11 )
      do
      {
        v12 = *(_DWORD *)(v11 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v3,
                                                                                             v11);
        v11 = v12;
      }
      while ( v12 );
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::~_Task_impl(a1);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 20);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 18);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::tournaments::team_request_result::~team_request_result((xbox::services::tournaments::team_request_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<bool>),std::function<unsigned char ()(pplx::task<bool>)> pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(std::function const&<void ()(pplx::task<bool>)>)::{lambda(pplx::task<bool>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(std::function const&<void ()(pplx::task<bool>)>)::{lambda(pplx::task<bool>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


void __fastcall pplx::details::_Task_impl<web::json::value>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<web::json::value>::~_Task_impl(a1);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<std::string>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<std::string>>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<std::string>>::_RegisterTask((_DWORD *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27697C4;
  v12 = (xbox::services *)j_xbox::services::matchmaking::hopper_statistics_response::hopper_statistics_response((xbox::services::matchmaking::hopper_statistics_response *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 104) = 0;
  *(_DWORD *)(v3 + 108) = v13;
  *(_DWORD *)(v3 + 112) = &unk_28898CC;
  return v3;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<int>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = pplx::task<int>::task<pplx::task_completion_event<int>>(v4, (int)&v15, v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


  return pplx::details::_MakeTToUnitFunc<std::string>(std::function const&<void ()(std::string)>)::{lambda(std::string)#1}::operator()
{
           a2);
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::nsal>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6system4nsalEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall pplx::details::_CancellationTokenCallback<web::http::client::details::asio_context::start_request(void)::{lambda(std::shared_ptr<web::http::client::details::asio_context>)#1}::operator() const(std::shared_ptr<web::http::client::details::asio_context>)::{lambda(void)#1}>::~_CancellationTokenCallback(void *ptr)
{
  pplx::details::_CancellationTokenCallback<web::http::client::details::asio_context::start_request(void)::{lambda(std::shared_ptr<web::http::client::details::asio_context>)#1}::operator() const(std::shared_ptr<web::http::client::details::asio_context>)::{lambda(void)#1}>::~_CancellationTokenCallback(ptr);
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<Social::XboxProfile>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3

  v1 = a1;
  *(_DWORD *)a1 = &off_26E787C;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  Social::XboxProfile::~XboxProfile((Social::XboxProfile *)(v1 + 80));
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_3((pplx::details::_Task_impl_base *)v1);
}


int __fastcall std::_Function_handler<pplx::task<void> ()(unsigned char),std::function<pplx::task<void> ()(unsigned char)> pplx::details::_MakeUnitToTFunc<pplx::task<void>>(std::function const&<pplx::task<void> ()(void)>)::{lambda(unsigned char)#1}>::_M_invoke(int a1, int *a2)
{
  int v2; // r1@1

  v2 = *a2;
  if ( !*(_DWORD *)(v2 + 8) )
    sub_119C8E4();
  return (*(int (__fastcall **)(int))(v2 + 12))(a1);
}


int *__fastcall pplx::task<std::string>::get(int *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_119C884((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return sub_119C854(v3, (int *)*v2 + 20);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>(int a1, int a2, int a3)
{
  int v3; // r8@1
  int v4; // r5@1
  int v5; // r6@1
  _DWORD *v6; // r0@1
  int v7; // r7@1
  int *v8; // r0@1
  int v9; // r0@1
  void *v10; // r0@1
  int v11; // r6@2
  unsigned int *v12; // r1@3
  unsigned int v13; // r0@5
  unsigned int *v14; // r4@9
  unsigned int v15; // r0@11
  unsigned int *v16; // r0@17
  unsigned int v17; // r1@19
  int v18; // r0@22
  unsigned int *v19; // r0@23
  unsigned int v20; // r1@25
  int v21; // r0@28
  unsigned int *v22; // r1@29
  unsigned int v23; // r2@30
  __int16 v24; // r0@32
  int v25; // r0@34
  unsigned int *v26; // r1@35
  unsigned int v27; // r2@36
  int result; // r0@39
  int v29; // r4@39
  unsigned int *v30; // r1@40
  unsigned int *v31; // r5@46
  int v32; // r4@53
  unsigned int *v33; // r1@54
  unsigned int *v34; // r5@60
  int v35; // r4@67
  unsigned int *v36; // r1@68
  unsigned int *v37; // r5@74
  unsigned int *v38; // r2@82
  signed int v39; // r1@84
  int v40; // [sp+0h] [bp-70h]@22
  int v41; // [sp+4h] [bp-6Ch]@22
  int v42; // [sp+8h] [bp-68h]@28
  int v43; // [sp+Ch] [bp-64h]@32
  char v44; // [sp+14h] [bp-5Ch]@32
  int v45; // [sp+18h] [bp-58h]@32
  void *ptr; // [sp+1Ch] [bp-54h]@32
  int v47; // [sp+20h] [bp-50h]@32
  int v48; // [sp+24h] [bp-4Ch]@32
  char v49; // [sp+28h] [bp-48h]@32
  char v50; // [sp+29h] [bp-47h]@32
  int v51; // [sp+30h] [bp-40h]@16
  int v52; // [sp+34h] [bp-3Ch]@16
  char v53; // [sp+38h] [bp-38h]@1
  int v54; // [sp+3Ch] [bp-34h]@2
  int v55; // [sp+48h] [bp-28h]@1
  int v56; // [sp+4Ch] [bp-24h]@1
  int v57; // [sp+50h] [bp-20h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v56 = 0;
  v57 = 0;
  v6 = j_operator new(0x3Cu);
  v7 = (int)v6;
  v6[1] = 1;
  v6[2] = 1;
  *v6 = &off_276382C;
  v6[3] = 0;
  v6[4] = 0;
  v6[5] = 0;
  v6[6] = 0;
  v6[7] = 0;
  v6[8] = 0;
  v8 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&off_276382C);
  *(_DWORD *)(v7 + 36) = 0;
  *(_DWORD *)(v7 + 40) = v8;
  *(_DWORD *)(v7 + 44) = &unk_28898CC;
  *(_WORD *)(v7 + 56) = 0;
  *(_DWORD *)(v7 + 48) = 0;
  *(_DWORD *)(v7 + 52) = 0;
  v9 = *(_DWORD *)v7;
  v57 = v7;
  v56 = (*(int (__fastcall **)(int, void **))(v9 + 16))(v7, &`typeinfo for'std::_Sp_make_shared_tag);
  j_xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>::xbox_live_result(
    (int)&v53,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::set(
    (void ***)&v56,
    (int)&v53);
  v10 = (void *)(v55 - 12);
  if ( (int *)(v55 - 12) != &dword_28898C0 )
  {
    v38 = (unsigned int *)(v55 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v39 = __ldrex(v38);
      while ( __strex(v39 - 1, v38) );
    }
    else
      v39 = (*v38)--;
    if ( v39 <= 0 )
      j_j_j_j__ZdlPv_9(v10);
  }
  v11 = v54;
  if ( v54 )
    v12 = (unsigned int *)(v54 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
      v13 = (*v12)--;
    if ( v13 == 1 )
      v14 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
      if ( &pthread_create )
      {
        __dmb();
        do
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
      }
      else
        v15 = (*v14)--;
      if ( v15 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v51 = v56;
  v52 = v57;
  if ( v57 )
    v16 = (unsigned int *)(v57 + 4);
        v17 = __ldrex(v16);
      while ( __strex(v17 + 1, v16) );
      ++*v16;
  v40 = *(_DWORD *)v4;
  v18 = *(_DWORD *)(v4 + 4);
  v41 = v18;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v42 = *(_DWORD *)(v4 + 8);
  v21 = *(_DWORD *)(v4 + 12);
  if ( v21 )
    v22 = (unsigned int *)(v21 + 4);
    __dmb();
    do
      v23 = __ldrex(v22);
    while ( __strex(v23 + 1, v22) );
  v43 = v21;
  v47 = 0;
  v48 = 0;
  v45 = 0;
  ptr = 0;
  v44 = 0;
  v24 = *(_WORD *)(v4 + 40);
  v49 = *(_WORD *)(v4 + 40);
  v50 = HIBYTE(v24);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(
    v3,
    (int)&v51,
    (int)&v40);
  if ( ptr )
    j_operator delete(ptr);
  v25 = v43;
  if ( v43 )
    v26 = (unsigned int *)(v43 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v25 + 8))(v25);
  result = 0;
  v43 = 0;
  v29 = v41;
  if ( v41 )
    v30 = (unsigned int *)(v41 + 4);
        result = __ldrex(v30);
      while ( __strex(result - 1, v30) );
      result = (*v30)--;
    if ( result == 1 )
      v31 = (unsigned int *)(v29 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
          result = __ldrex(v31);
        while ( __strex(result - 1, v31) );
        result = (*v31)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
  v32 = v52;
  if ( v52 )
    v33 = (unsigned int *)(v52 + 4);
        result = __ldrex(v33);
      while ( __strex(result - 1, v33) );
      result = (*v33)--;
      v34 = (unsigned int *)(v32 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v32 + 8))(v32);
          result = __ldrex(v34);
        while ( __strex(result - 1, v34) );
        result = (*v34)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v32 + 12))(v32);
  v35 = v57;
    v36 = (unsigned int *)(v57 + 4);
        result = __ldrex(v36);
      while ( __strex(result - 1, v36) );
      result = (*v36)--;
      v37 = (unsigned int *)(v35 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 8))(v35);
          result = __ldrex(v37);
        while ( __strex(result - 1, v37) );
        result = (*v37)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v35 + 12))(v35);
  return result;
}


unsigned int *__fastcall pplx::task<web::http::http_response>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  int v3; // r4@1
  pplx::details::_Task_impl_base *v4; // r0@3
  unsigned int *result; // r0@3
  unsigned int v6; // r1@6
  char *v7; // r4@10
  int v8; // r3@10
  char *v9; // r0@12

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v7 = j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26D7A9C;
    sub_119C884((void **)v7 + 1, "get() cannot be called on a default constructed task.");
    j___cxa_throw(
      (int)v7,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v8);
  }
  if ( pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v9 = j___cxa_allocate_exception(8);
    *(_DWORD *)v9 = &off_26DD7D0;
    *((_DWORD *)v9 + 1) = &unk_28898CC;
      (int)v9,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  v4 = *v2;
  *(_DWORD *)v3 = *((_DWORD *)*v2 + 20);
  result = (unsigned int *)*((_DWORD *)v4 + 21);
  *(_DWORD *)(v3 + 4) = result;
  if ( result )
    ++result;
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(result);
      while ( __strex(v6 + 1, result) );
    }
    else
      ++*result;
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


  return pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}::operator()
{
           *a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  int v30[40]; // [sp+8h] [bp-D0h]@25
  int v31; // [sp+A8h] [bp-30h]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 96);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 96);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::achievements::achievement::operator=((int *)v4 + 4, (int *)v3);
      *((_QWORD *)v4 + 21) = *(_QWORD *)(v3 + 152);
      EntityInteraction::setInteractText((int *)v4 + 44, (int *)(v3 + 160));
      *((_BYTE *)*v2 + 192) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::achievements::achievement>::xbox_live_result(
              (xbox::services::achievements::achievement *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::achievements::achievement::~achievement((xbox::services::achievements::achievement *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[46] )
        v17[46] = 0;
        v18 = v17[47];
        v17[47] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall pplx::details::_Task_impl<std::error_code>::_Task_impl(int a1, int a2, int a3)
{
  __int64 v3; // kr00_8@1
  int v4; // r8@1
  int v5; // r4@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@3
  int v8; // r10@5
  unsigned int *v9; // r0@6
  unsigned int v10; // r1@7
  signed int v11; // r6@8
  unsigned int *v12; // r0@12
  unsigned int v13; // r1@13
  unsigned int v14; // r1@15
  unsigned int *v15; // r6@17
  unsigned int v16; // r0@18
  unsigned int *v17; // r0@22
  unsigned int v18; // r1@23
  unsigned int *v19; // r0@26
  unsigned int v20; // r1@27
  unsigned int *v21; // r6@29
  unsigned int v22; // r0@30

  v3 = *(_QWORD *)a3;
  v4 = a2;
  v5 = a1;
  if ( *(_QWORD *)a3 >> 32 )
  {
    v6 = (unsigned int *)(HIDWORD(v3) + 4);
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 + 1, v6) );
  }
  v8 = *(_DWORD *)(a3 + 8);
  *(_DWORD *)v5 = &off_26D7AC4;
  *(_DWORD *)(v5 + 4) = 0;
  *(_BYTE *)(v5 + 8) = 0;
  *(_BYTE *)(v5 + 9) = 0;
  *(_DWORD *)(v5 + 12) = 0;
  *(_DWORD *)(v5 + 16) = 0;
  *(_DWORD *)(v5 + 20) = 0;
  *(_DWORD *)(v5 + 28) = 0;
  *(_DWORD *)(v5 + 32) = 0;
  if ( HIDWORD(v3) )
    v9 = (unsigned int *)(HIDWORD(v3) + 4);
      v10 = __ldrex(v9);
    while ( __strex(v10 + 1, v9) );
    v11 = 0;
  else
    v11 = 1;
  *(_DWORD *)(v5 + 36) = 0;
  sub_21E03A4((_DWORD *)(v5 + 40));
  *(_BYTE *)(v5 + 44) = 0;
  *(_QWORD *)(v5 + 48) = v3;
  if ( v11 == 1 )
    *(_DWORD *)(v5 + 56) = v8;
    v12 = (unsigned int *)(HIDWORD(v3) + 4);
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
      v14 = __ldrex(v12);
    while ( __strex(v14 - 1, v12) );
    if ( v14 == 1 )
    {
      v15 = (unsigned int *)(HIDWORD(v3) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v3) + 8))(HIDWORD(v3));
      __dmb();
      do
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
      if ( v16 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v3) + 12))(HIDWORD(v3));
    }
  *(_DWORD *)(v5 + 60) = 0;
  *(_DWORD *)(v5 + 64) = 0;
  *(_DWORD *)(v5 + 68) = 0;
  *(_DWORD *)(v5 + 72) = 0;
  *(_DWORD *)(v5 + 24) = v4;
  if ( v4 != 2 )
    v17 = (unsigned int *)(v4 + 4);
      v18 = __ldrex(v17);
    while ( __strex(v18 + 1, v17) );
    v19 = (unsigned int *)(HIDWORD(v3) + 4);
      v20 = __ldrex(v19);
    while ( __strex(v20 - 1, v19) );
    if ( v20 == 1 )
      v21 = (unsigned int *)(HIDWORD(v3) + 8);
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
      if ( v22 == 1 )
  *(_DWORD *)v5 = &off_276DE9C;
  *(_DWORD *)(v5 + 80) = 0;
  *(_DWORD *)(v5 + 84) = ((int (*)(void))byte_21E9640)();
  return v5;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


unsigned int __fastcall pplx::_pplx_g_sched_t::set_scheduler(_DWORD *a1, int a2)
{
  _DWORD *v2; // r5@1
  int v3; // r4@1
  unsigned int *v4; // r6@2
  pplx::details::platform *v5; // r0@2
  unsigned int v6; // r1@3
  char *v7; // r4@7
  int v8; // r3@7
  char *v9; // r4@13
  int v10; // r3@13
  __int64 v11; // r0@16
  int v12; // r8@16
  unsigned int *v13; // r1@17
  unsigned int v14; // r0@19
  unsigned int *v15; // r4@23
  unsigned int v16; // r0@25
  unsigned int v17; // r0@31
  unsigned int result; // r0@31

  v2 = a1;
  v3 = a2;
  if ( (*a1 | 2) == 2 )
  {
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26D7A9C;
    sub_21E94B4((void **)v7 + 1, "Scheduler cannot be initialized now");
    j_j___cxa_throw_0(
      (int)v7,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v8);
  }
  v4 = a1 + 1;
  v5 = (pplx::details::platform *)1;
  __dmb();
  do
    v6 = __ldrex(v4);
    if ( v6 )
    {
      __dmb();
      while ( 1 )
      {
        j_pplx::details::platform::YieldExecution(v5);
        __dmb();
        while ( 1 )
        {
          v5 = (pplx::details::platform *)__ldrex(v4);
          if ( v5 )
            break;
          if ( !__strex(1u, v4) )
            goto LABEL_12;
        }
      }
    }
  while ( __strex(1u, v4) );
LABEL_12:
  if ( v2[2] )
    v9 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v9 = &off_26D7A9C;
    sub_21E94B4((void **)v9 + 1, "Scheduler is already initialized");
      (int)v9,
      v10);
  v11 = *(_QWORD *)v3;
  *(_DWORD *)v3 = 0;
  *(_DWORD *)(v3 + 4) = 0;
  v2[2] = v11;
  v12 = v2[3];
  v2[3] = HIDWORD(v11);
  if ( v12 )
    v13 = (unsigned int *)(v12 + 4);
    if ( &pthread_create )
      do
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
    else
      v14 = (*v13)--;
    if ( v14 == 1 )
      v15 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      else
        v16 = (*v15)--;
      if ( v16 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
    v17 = __ldrex(v4);
    result = __strex(0, v4);
  while ( result );
  return result;
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>),std::function<unsigned char ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(std::function const&<void ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)>)::{lambda(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  int v4; // r4@2
  unsigned int *v5; // r1@3
  unsigned int v6; // r0@5
  unsigned int *v7; // r5@9
  unsigned int v8; // r0@11
  void *v9; // r0@16
  int v10; // r4@17
  unsigned int *v11; // r1@18
  unsigned int v12; // r0@20
  unsigned int *v13; // r5@24
  unsigned int v14; // r0@26
  unsigned int *v16; // r2@32
  signed int v17; // r1@34
  unsigned int *v18; // r2@36
  signed int v19; // r1@38
  char v20; // [sp+4h] [bp-3Ch]@1
  int v21; // [sp+8h] [bp-38h]@17
  int v22; // [sp+14h] [bp-2Ch]@16
  char v23; // [sp+18h] [bp-28h]@1
  int v24; // [sp+1Ch] [bp-24h]@2
  int v25; // [sp+28h] [bp-18h]@1

  v2 = *a1;
  xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>::xbox_live_result(
    (int)&v20,
    a2);
    (int)&v23,
    (int)&v20);
  std::function<void ()(xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>)>::operator()(
    v2,
    (int)&v23);
  v3 = (void *)(v25 - 12);
  if ( (int *)(v25 - 12) != &dword_28898C0 )
  {
    v16 = (unsigned int *)(v25 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v17 = __ldrex(v16);
      while ( __strex(v17 - 1, v16) );
    }
    else
      v17 = (*v16)--;
    if ( v17 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v3);
  }
  v4 = v24;
  if ( v24 )
    v5 = (unsigned int *)(v24 + 4);
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
      v6 = (*v5)--;
    if ( v6 == 1 )
      v7 = (unsigned int *)(v4 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  v9 = (void *)(v22 - 12);
  if ( (int *)(v22 - 12) != &dword_28898C0 )
    v18 = (unsigned int *)(v22 - 4);
        v19 = __ldrex(v18);
      while ( __strex(v19 - 1, v18) );
      v19 = (*v18)--;
    if ( v19 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v9);
  v10 = v21;
  if ( v21 )
    v11 = (unsigned int *)(v21 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  return 0;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(std::function const&<void ()(pplx::task<bool>)>)::{lambda(pplx::task<bool>)#1}::operator() const(int a1, int a2)
{
  return pplx::details::_MakeTToUnitFunc<pplx::task<bool>>(std::function const&<void ()(pplx::task<bool>)>)::{lambda(pplx::task<bool>)#1}::operator() const(
           a1,
           a2);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v6; // r0@8
  int v7; // r1@12
  int v8; // r5@13

  v2 = a1;
  v3 = a2;
  j_xbox::services::tournaments::team_info::operator=((int *)(a1 + 80), a2);
  *(_QWORD *)(v2 + 256) = *((_QWORD *)v3 + 22);
  EntityInteraction::setInteractText((int *)(v2 + 264), v3 + 46);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v4 )
      sub_21E5E14(v4);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v6 )
        sub_21E5E14(v6);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v7 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v7 )
      do
      {
        v8 = *(_DWORD *)(v7 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v7);
        v7 = v8;
      }
      while ( v8 );
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  unsigned __int64 v30[6]; // [sp+8h] [bp-60h]@25
  int v31; // [sp+3Ch] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 40);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 40);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::contextual_search::contextual_search_game_clips_result::operator=(
        (int)(v4 + 4),
        (unsigned __int64 *)v3);
      *(_QWORD *)(v4 + 15) = *(_QWORD *)(v3 + 44);
      EntityInteraction::setInteractText((int *)v4 + 17, (int *)(v3 + 52));
      *((_BYTE *)*v2 + 80) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>::xbox_live_result(
              (xbox::services::contextual_search::contextual_search_game_clips_result *)v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_FinalizeAndRunContinuations(
              v15,
              v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::contextual_search::contextual_search_game_clips_result::~contextual_search_game_clips_result((xbox::services::contextual_search::contextual_search_game_clips_result *)v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[18] )
        v17[18] = 0;
        v18 = v17[19];
        v17[19] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(Social::XboxProfile)> pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(std::function const&<void ()(Social::XboxProfile)>)::{lambda(Social::XboxProfile)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = j_operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>),std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_Task_impl(
           a1,
           a2,
           a3);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  unsigned int *v5; // r2@3
  signed int v6; // r1@5
  char v7; // [sp+4h] [bp-6Ch]@1
  int v8; // [sp+58h] [bp-18h]@1

  v2 = *a1;
  xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>::xbox_live_result(
    (xbox::services::achievements::achievements_result *)&v7,
    a2);
  pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)#1}::operator() const(
    v2,
    (int)&v7);
  v3 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
  {
    v5 = (unsigned int *)(v8 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v3);
  }
  xbox::services::achievements::achievements_result::~achievements_result((xbox::services::achievements::achievements_result *)&v7);
  return 0;
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  void *v8; // r0@4
  unsigned int *v9; // r0@6
  unsigned int v10; // r1@8
  int v11; // r0@11
  unsigned int *v12; // r0@12
  unsigned int v13; // r1@14
  int v14; // r0@17
  unsigned int *v15; // r1@18
  unsigned int v16; // r2@19
  __int16 v17; // r0@21
  int v18; // r0@23
  unsigned int *v19; // r1@24
  unsigned int v20; // r2@25
  unsigned int result; // r0@28
  int v22; // r4@28
  unsigned int *v23; // r1@29
  unsigned int *v24; // r5@35
  int v25; // r4@42
  unsigned int *v26; // r1@43
  unsigned int *v27; // r5@49
  int v28; // r4@56
  unsigned int *v29; // r1@57
  unsigned int *v30; // r5@63
  unsigned int *v31; // r2@71
  signed int v32; // r1@73
  unsigned int *v33; // r2@75
  signed int v34; // r1@77
  int v35; // [sp+0h] [bp-78h]@11
  int v36; // [sp+4h] [bp-74h]@11
  int v37; // [sp+8h] [bp-70h]@17
  int v38; // [sp+Ch] [bp-6Ch]@21
  char v39; // [sp+14h] [bp-64h]@21
  int v40; // [sp+18h] [bp-60h]@21
  void *ptr; // [sp+1Ch] [bp-5Ch]@21
  int v42; // [sp+20h] [bp-58h]@21
  int v43; // [sp+24h] [bp-54h]@21
  char v44; // [sp+28h] [bp-50h]@21
  char v45; // [sp+29h] [bp-4Fh]@21
  int v46; // [sp+30h] [bp-48h]@5
  int v47; // [sp+34h] [bp-44h]@5
  int v48; // [sp+38h] [bp-40h]@3
  int v49; // [sp+50h] [bp-28h]@3
  int v50; // [sp+58h] [bp-20h]@1
  int v51; // [sp+5Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v50 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_11matchmaking28create_match_ticket_responseEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v51);
  if ( v51 )
    v6 = (*(int (**)(void))(*(_DWORD *)v51 + 16))();
  v50 = v6;
  j_xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>::xbox_live_result(
    (xbox::services::matchmaking::create_match_ticket_response *)&v48,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::set(
    (void ***)&v50,
    (int)&v48);
  v7 = (void *)(v49 - 12);
  if ( (int *)(v49 - 12) != &dword_28898C0 )
  {
    v31 = (unsigned int *)(v49 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v32 = __ldrex(v31);
      while ( __strex(v32 - 1, v31) );
    }
    else
      v32 = (*v31)--;
    if ( v32 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  v8 = (void *)(v48 - 12);
  if ( (int *)(v48 - 12) != &dword_28898C0 )
    v33 = (unsigned int *)(v48 - 4);
        v34 = __ldrex(v33);
      while ( __strex(v34 - 1, v33) );
      v34 = (*v33)--;
    if ( v34 <= 0 )
      j_j_j_j__ZdlPv_9(v8);
  v46 = v50;
  v47 = v51;
    v9 = (unsigned int *)(v51 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
      ++*v9;
  v35 = *(_DWORD *)v4;
  v11 = *(_DWORD *)(v4 + 4);
  v36 = v11;
  if ( v11 )
    v12 = (unsigned int *)(v11 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 + 1, v12) );
      ++*v12;
  v37 = *(_DWORD *)(v4 + 8);
  v14 = *(_DWORD *)(v4 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v38 = v14;
  v42 = 0;
  v43 = 0;
  v40 = 0;
  ptr = 0;
  v39 = 0;
  v17 = *(_WORD *)(v4 + 40);
  v44 = *(_WORD *)(v4 + 40);
  v45 = HIBYTE(v17);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>>(
    v3,
    (int)&v46,
    (int)&v35);
  if ( ptr )
    j_operator delete(ptr);
  v18 = v38;
  if ( v38 )
    v19 = (unsigned int *)(v38 + 4);
      v20 = __ldrex(v19);
    while ( __strex(v20 - 1, v19) );
    if ( v20 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v18 + 8))(v18);
  result = 0;
  v38 = 0;
  v22 = v36;
  if ( v36 )
    v23 = (unsigned int *)(v36 + 4);
        result = __ldrex(v23);
      while ( __strex(result - 1, v23) );
      result = (*v23)--;
    if ( result == 1 )
      v24 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v24);
        while ( __strex(result - 1, v24) );
      }
      else
        result = (*v24)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  v25 = v47;
  if ( v47 )
    v26 = (unsigned int *)(v47 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
        result = (*v27)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  v28 = v51;
    v29 = (unsigned int *)(v51 + 4);
        result = __ldrex(v29);
      while ( __strex(result - 1, v29) );
      result = (*v29)--;
      v30 = (unsigned int *)(v28 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
          result = __ldrex(v30);
        while ( __strex(result - 1, v30) );
        result = (*v30)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
  return result;
}


pplx::details::_Task_impl_base *__fastcall pplx::details::_Task_impl<web::json::value>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r0@7

  v1 = a1;
  *(_DWORD *)a1 = &off_26DE220;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 80);
  if ( v6 )
    (*(void (**)(void))(*(_DWORD *)v6 + 96))();
  *(_DWORD *)(v1 + 80) = 0;
  return j_j_j__ZN4pplx7details15_Task_impl_baseD2Ev_2((pplx::details::_Task_impl_base *)v1);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  void *v8; // r0@4
  unsigned int *v9; // r0@6
  unsigned int v10; // r1@8
  int v11; // r0@11
  unsigned int *v12; // r0@12
  unsigned int v13; // r1@14
  int v14; // r0@17
  unsigned int *v15; // r1@18
  unsigned int v16; // r2@19
  __int16 v17; // r0@21
  int v18; // r0@23
  unsigned int *v19; // r1@24
  unsigned int v20; // r2@25
  int result; // r0@28
  int v22; // r4@28
  unsigned int *v23; // r1@29
  unsigned int *v24; // r5@35
  int v25; // r4@42
  unsigned int *v26; // r1@43
  unsigned int *v27; // r5@49
  int v28; // r4@56
  unsigned int *v29; // r1@57
  unsigned int *v30; // r5@63
  unsigned int *v31; // r2@71
  signed int v32; // r1@73
  unsigned int *v33; // r2@75
  signed int v34; // r1@77
  int v35; // [sp+0h] [bp-80h]@11
  int v36; // [sp+4h] [bp-7Ch]@11
  int v37; // [sp+8h] [bp-78h]@17
  int v38; // [sp+Ch] [bp-74h]@21
  char v39; // [sp+14h] [bp-6Ch]@21
  int v40; // [sp+18h] [bp-68h]@21
  void *ptr; // [sp+1Ch] [bp-64h]@21
  int v42; // [sp+20h] [bp-60h]@21
  int v43; // [sp+24h] [bp-5Ch]@21
  char v44; // [sp+28h] [bp-58h]@21
  char v45; // [sp+29h] [bp-57h]@21
  int v46; // [sp+30h] [bp-50h]@5
  int v47; // [sp+34h] [bp-4Ch]@5
  int v48; // [sp+38h] [bp-48h]@3
  int v49; // [sp+58h] [bp-28h]@3
  int v50; // [sp+60h] [bp-20h]@1
  int v51; // [sp+64h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v50 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_11matchmaking26hopper_statistics_responseEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v51);
  if ( v51 )
    v6 = (*(int (**)(void))(*(_DWORD *)v51 + 16))();
  v50 = v6;
  j_xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>::xbox_live_result(
    (xbox::services::matchmaking::hopper_statistics_response *)&v48,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::set(
    (void ***)&v50,
    (int)&v48);
  v7 = (void *)(v49 - 12);
  if ( (int *)(v49 - 12) != &dword_28898C0 )
  {
    v31 = (unsigned int *)(v49 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v32 = __ldrex(v31);
      while ( __strex(v32 - 1, v31) );
    }
    else
      v32 = (*v31)--;
    if ( v32 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  v8 = (void *)(v48 - 12);
  if ( (int *)(v48 - 12) != &dword_28898C0 )
    v33 = (unsigned int *)(v48 - 4);
        v34 = __ldrex(v33);
      while ( __strex(v34 - 1, v33) );
      v34 = (*v33)--;
    if ( v34 <= 0 )
      j_j_j_j__ZdlPv_9(v8);
  v46 = v50;
  v47 = v51;
    v9 = (unsigned int *)(v51 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
      ++*v9;
  v35 = *(_DWORD *)v4;
  v11 = *(_DWORD *)(v4 + 4);
  v36 = v11;
  if ( v11 )
    v12 = (unsigned int *)(v11 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 + 1, v12) );
      ++*v12;
  v37 = *(_DWORD *)(v4 + 8);
  v14 = *(_DWORD *)(v4 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v38 = v14;
  v42 = 0;
  v43 = 0;
  v40 = 0;
  ptr = 0;
  v39 = 0;
  v17 = *(_WORD *)(v4 + 40);
  v44 = *(_WORD *)(v4 + 40);
  v45 = HIBYTE(v17);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>>(
    v3,
    (int)&v46,
    (int)&v35);
  if ( ptr )
    j_operator delete(ptr);
  v18 = v38;
  if ( v38 )
    v19 = (unsigned int *)(v38 + 4);
      v20 = __ldrex(v19);
    while ( __strex(v20 - 1, v19) );
    if ( v20 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v18 + 8))(v18);
  result = 0;
  v38 = 0;
  v22 = v36;
  if ( v36 )
    v23 = (unsigned int *)(v36 + 4);
        result = __ldrex(v23);
      while ( __strex(result - 1, v23) );
      result = (*v23)--;
    if ( result == 1 )
      v24 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v24);
        while ( __strex(result - 1, v24) );
      }
      else
        result = (*v24)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  v25 = v47;
  if ( v47 )
    v26 = (unsigned int *)(v47 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
        result = (*v27)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  v28 = v51;
    v29 = (unsigned int *)(v51 + 4);
        result = __ldrex(v29);
      while ( __strex(result - 1, v29) );
      result = (*v29)--;
      v30 = (unsigned int *)(v28 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
          result = __ldrex(v30);
        while ( __strex(result - 1, v30) );
        result = (*v30)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
  return result;
}


unsigned int *__fastcall pplx::task<std::error_code>::then<web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(pplx::task<std::error_code>)#1}>(int a1, int *a2, int a3)
{
  return pplx::task<std::error_code>::then<web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(pplx::task<std::error_code>)#1}>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::~_Task_impl(int a1)
{
  void *v1; // r0@1

  v1 = (void *)j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_8(v1);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-D0h]@10
  int v33; // [sp+4h] [bp-CCh]@10
  int v34; // [sp+8h] [bp-C8h]@16
  int v35; // [sp+Ch] [bp-C4h]@20
  char v36; // [sp+14h] [bp-BCh]@20
  int v37; // [sp+18h] [bp-B8h]@20
  void *ptr; // [sp+1Ch] [bp-B4h]@20
  int v39; // [sp+20h] [bp-B0h]@20
  int v40; // [sp+24h] [bp-ACh]@20
  char v41; // [sp+28h] [bp-A8h]@20
  char v42; // [sp+29h] [bp-A7h]@20
  int v43; // [sp+30h] [bp-A0h]@4
  int v44; // [sp+34h] [bp-9Ch]@4
  char v45; // [sp+38h] [bp-98h]@3
  int v46; // [sp+ACh] [bp-24h]@3
  int v47; // [sp+B0h] [bp-20h]@1
  int v48; // [sp+B4h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_11leaderboard18leaderboard_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>::xbox_live_result(
    (xbox::services::leaderboard::leaderboard_result *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::leaderboard::leaderboard_result::~leaderboard_result((xbox::services::leaderboard::leaderboard_result *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::leaderboard::leaderboard_result>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_8presence15presence_recordEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-98h]@10
  int v33; // [sp+4h] [bp-94h]@10
  int v34; // [sp+8h] [bp-90h]@16
  int v35; // [sp+Ch] [bp-8Ch]@20
  char v36; // [sp+14h] [bp-84h]@20
  int v37; // [sp+18h] [bp-80h]@20
  void *ptr; // [sp+1Ch] [bp-7Ch]@20
  int v39; // [sp+20h] [bp-78h]@20
  int v40; // [sp+24h] [bp-74h]@20
  char v41; // [sp+28h] [bp-70h]@20
  char v42; // [sp+29h] [bp-6Fh]@20
  int v43; // [sp+30h] [bp-68h]@4
  int v44; // [sp+34h] [bp-64h]@4
  char v45; // [sp+38h] [bp-60h]@3
  int v46; // [sp+70h] [bp-28h]@3
  int v47; // [sp+78h] [bp-20h]@1
  int v48; // [sp+7Ch] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_11matchmaking29match_ticket_details_responseEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>::xbox_live_result(
    (xbox::services::matchmaking::match_ticket_details_response *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::matchmaking::match_ticket_details_response::~match_ticket_details_response((xbox::services::matchmaking::match_ticket_details_response *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::system::auth_flow_result>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int v13; // [sp+4h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-18h]@1
  int v15; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v13 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v14 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v15 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v13);
  v7 = v14;
  if ( v14 )
    v8 = (unsigned int *)(v14 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2768720;
  *(_DWORD *)(v3 + 84) = &unk_28898CC;
  *(_DWORD *)(v3 + 88) = &unk_28898CC;
  *(_DWORD *)(v3 + 92) = &unk_28898CC;
  *(_DWORD *)(v3 + 96) = &unk_28898CC;
  *(_DWORD *)(v3 + 100) = &unk_28898CC;
  *(_DWORD *)(v3 + 104) = &unk_28898CC;
  *(_DWORD *)(v3 + 108) = &unk_28898CC;
  return v3;
}


void __fastcall pplx::details::_CancellationTokenCallback<web::http::client::details::asio_context::start_request(void)::{lambda(std::shared_ptr<web::http::client::details::asio_context>)#1}::operator() const(std::shared_ptr<web::http::client::details::asio_context>)::{lambda(void)#1}>::~_CancellationTokenCallback(void *ptr)
{
  void *v1; // r5@1
  int v2; // r0@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@3

  v1 = ptr;
  *(_DWORD *)ptr = &off_276CA80;
  v2 = *((_DWORD *)ptr + 6);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 8);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 - 1, v3) );
    if ( v4 == 1 )
      (*(void (**)(void))(*(_DWORD *)v2 + 12))();
  }
  j_j_j__ZdlPv_8(v1);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2764354;
  v12 = (xbox::services *)j_xbox::services::privacy::permission_check_result::permission_check_result((xbox::services::privacy::permission_check_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 100) = 0;
  *(_DWORD *)(v3 + 104) = v13;
  *(_DWORD *)(v3 + 108) = &unk_28898CC;
  return v3;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 19);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 17);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::contextual_search::contextual_search_game_clips_result::~contextual_search_game_clips_result((xbox::services::contextual_search::contextual_search_game_clips_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::hopper_statistics_response>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<void>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 8);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 6);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int __fastcall pplx::task<bool>::get(pplx::details::_Task_impl_base **a1)
{
  pplx::details::_Task_impl_base **v1; // r4@1
  pplx::details::_Task_impl_base *v2; // r0@1
  char *v4; // r0@4
  char *v5; // r4@6
  int v6; // r3@6

  v1 = a1;
  v2 = *a1;
  if ( !v2 )
  {
    v5 = j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_119C884((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( pplx::details::_Task_impl_base::_Wait(v2) == 2 )
    v4 = j___cxa_allocate_exception(8);
    *(_DWORD *)v4 = &off_26DD7D0;
    *((_DWORD *)v4 + 1) = &unk_28898CC;
      (int)v4,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return *((_BYTE *)*v1 + 77);
}


signed int __fastcall pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r8@2
  pthread_mutex_t *v6; // r10@5
  unsigned int v7; // r6@5
  int v8; // r0@6
  int *v9; // r11@12
  int *v10; // r4@12
  int v11; // r9@13
  unsigned int *v12; // r0@15
  unsigned int v13; // r1@17
  void *v14; // r8@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int v19; // r4@35
  void **v20; // r0@35
  int v21; // r1@35
  int *v22; // r9@38
  int v23; // r8@38
  int v24; // r0@39
  void **v25; // r1@41
  int v26; // r2@41
  unsigned int *v27; // r2@42
  unsigned int v28; // r3@44
  int v29; // r10@47
  unsigned int *v30; // r1@48
  unsigned int v31; // r0@50
  unsigned int *v32; // r7@54
  unsigned int v33; // r0@56
  void **v34; // r0@62
  void *v35; // r5@63
  unsigned int *v36; // r1@64
  unsigned int v37; // r0@66
  unsigned int *v38; // r6@70
  unsigned int v39; // r0@72
  int *v40; // r5@81
  int v41; // r9@81
  int v42; // r7@82
  unsigned int *v43; // r1@83
  unsigned int v44; // r0@85
  unsigned int *v45; // r6@89
  unsigned int v46; // r0@91
  int *v48; // [sp+4h] [bp-3Ch]@35
  void **v49; // [sp+Ch] [bp-34h]@41
  void *v50; // [sp+10h] [bp-30h]@41
  int v51; // [sp+14h] [bp-2Ch]@41
  void *v52; // [sp+18h] [bp-28h]@47

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  if ( *((_BYTE *)*a1 + 40) )
    return 0;
  if ( *((_BYTE *)v4 + 41) )
  v6 = (pthread_mutex_t *)(v4 + 3);
  v7 = 0xFFFF4424;
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
    if ( v8 )
      sub_21E5E14(v8);
    v4 = *v2;
    if ( *((_BYTE *)*v2 + 40) )
      goto LABEL_102;
  }
LABEL_102:
    if ( &pthread_create )
      j_pthread_mutex_unlock_1(v6);
    v9 = 0;
    v10 = 0;
    v5 = 0;
    goto LABEL_80;
  v4[5] = *(void **)(v3 + 4);
  v11 = *(_DWORD *)(v3 + 8);
  if ( (void *)v11 != v4[6] )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v14 = v4[6];
    if ( v14 )
      v15 = (unsigned int *)((char *)v14 + 4);
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        v16 = (*v15)--;
      if ( v16 == 1 )
        v17 = (unsigned int *)((char *)v14 + 8);
        (*(void (__fastcall **)(void *))(*(_DWORD *)v14 + 8))(v14);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
        }
        else
          v18 = (*v17)--;
        v7 = 0xFFFF4424;
        if ( v18 == 1 )
          (*(void (__fastcall **)(void *))(*(_DWORD *)v14 + 12))(v14);
    v4[6] = (void *)v11;
  v4[7] = *(void **)(v3 + 12);
  v19 = v7;
  *((_BYTE *)*v2 + 40) = 1;
  v20 = *v2;
  v48 = (int *)**v2;
  *v20 = 0;
  v9 = (int *)v20[1];
  v21 = *(int *)((char *)&GLOBAL_OFFSET_TABLE_ + v7);
  v20[1] = 0;
  v20[2] = 0;
  if ( v21 )
    j_pthread_mutex_unlock_1(v6);
  if ( v48 != v9 )
    v22 = v48;
    v23 = *(int *)((char *)&GLOBAL_OFFSET_TABLE_ + v7);
    do
      v24 = *v22;
      if ( *(_DWORD *)(*v22 + 4) == 2 )
        (*(void (__cdecl **)(int))(*(_DWORD *)v24 + 8))(v24);
        v25 = *v2;
        v49 = &off_26DDA34;
        v50 = v25[5];
        v26 = (int)v25[6];
        v51 = v26;
        if ( v26 )
          v27 = (unsigned int *)(v26 + 4);
          if ( v23 )
          {
            __dmb();
            do
              v28 = __ldrex(v27);
            while ( __strex(v28 + 1, v27) );
          }
          else
            ++*v27;
        v49 = &off_26DD410;
        v52 = v25[7];
        j_pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_FinalizeAndRunContinuations(
          v24,
          (int)&v49);
        v29 = v51;
        if ( v51 )
          v30 = (unsigned int *)(v51 + 4);
              v31 = __ldrex(v30);
            while ( __strex(v31 - 1, v30) );
            v31 = (*v30)--;
          if ( v31 == 1 )
            v32 = (unsigned int *)(v29 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
            if ( v23 )
            {
              __dmb();
              do
                v33 = __ldrex(v32);
              while ( __strex(v33 - 1, v32) );
            }
            else
              v33 = (*v32)--;
            if ( v33 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
      v22 += 2;
    while ( v22 != v9 );
  v34 = *v2;
  if ( (*v2)[8] )
    v34[8] = 0;
    v35 = v34[9];
    v34[9] = 0;
    if ( !v35 )
      goto LABEL_78;
    v36 = (unsigned int *)((char *)v35 + 4);
    if ( *(int (__fastcall **)(_DWORD))((char *)&GLOBAL_OFFSET_TABLE_ + v7) )
      __dmb();
      do
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
    else
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)((char *)v35 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v35 + 8))(v35);
      if ( *(int (__fastcall **)(_DWORD))((char *)&GLOBAL_OFFSET_TABLE_ + v19) )
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      v7 = v19;
      if ( v39 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v35 + 12))(v35);
        v5 = 1;
        goto LABEL_79;
LABEL_78:
      v5 = 1;
      goto LABEL_79;
  v5 = 1;
LABEL_79:
  v10 = v48;
LABEL_80:
  if ( v10 != v9 )
    v40 = v10;
    v41 = *(int *)((char *)&GLOBAL_OFFSET_TABLE_ + v7);
      v42 = v40[1];
      if ( v42 )
        v43 = (unsigned int *)(v42 + 4);
        if ( v41 )
            v44 = __ldrex(v43);
          while ( __strex(v44 - 1, v43) );
          v44 = (*v43)--;
        if ( v44 == 1 )
          v45 = (unsigned int *)(v42 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v42 + 8))(v42);
          if ( v41 )
              v46 = __ldrex(v45);
            while ( __strex(v46 - 1, v45) );
            v46 = (*v45)--;
          if ( v46 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v42 + 12))(v42);
      v40 += 2;
    while ( v40 != v9 );
  if ( v10 )
    j_operator delete(v10);
  return v5;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_RegisterTask(
           a1,
           a2);
}


void __fastcall pplx::task<void>::then<web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(void)#1}>(int a1, int *a2, int a3, int a4)
{
  pplx::task<void>::then<web::websockets::client::details::wspp_callback_client::send_msg(web::websockets::client::websocket_outgoing_message &)::{lambda(void)#1}>(
    a1,
    a2,
    a3,
    a4);
}


int __fastcall pplx::details::_MakeTToUnitFunc<TransactionStatus>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(TransactionStatus),std::function<unsigned char ()(TransactionStatus)> pplx::details::_MakeTToUnitFunc<TransactionStatus>(std::function const&<void ()(TransactionStatus)>)::{lambda(TransactionStatus)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(TransactionStatus)> pplx::details::_MakeTToUnitFunc<TransactionStatus>(std::function const&<void ()(TransactionStatus)>)::{lambda(TransactionStatus)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int __fastcall pplx::task_completion_event<void>::set_exception<web::http::oauth1::experimental::oauth1_exception>(int a1, int a2)
{
  int result; // r0@3
  void **v7; // [sp+10h] [bp-28h]@1
  int v8; // [sp+14h] [bp-24h]@1
  char v9; // [sp+18h] [bp-20h]@2

  v7 = &off_276BAD4;
  sub_21E8AF4(&v8, (int *)(a2 + 4));
  j_std::make_exception_ptr<web::http::oauth1::experimental::oauth1_exception>((int)&v9, (int)&v7);
  return result;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::~_Task_impl(a1);
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<void>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<void>>(std::function const&<void ()(xbox::services::xbox_live_result<void>)>)::{lambda(xbox::services::xbox_live_result<void>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<std::shared_ptr<xbox::services::http_call_response>>::task<pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_quota>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)#1}>::_M_manager(int *a1, int *a2, int a3)
{
  int *v3; // r6@1
  int *v4; // r4@1
  int result; // r0@4
  _DWORD *v6; // r0@5
  int v7; // r6@5
  _DWORD *v8; // r5@5
  void (__fastcall *v9)(_DWORD *, int, signed int); // r3@5
  int v10; // r4@8
  void (__fastcall *v11)(int, int, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  if ( a3 == 3 )
  {
    v10 = *a1;
    if ( *a1 )
    {
      v11 = *(void (__fastcall **)(int, int, signed int))(v10 + 8);
      if ( v11 )
        v11(v10, v10, 3);
      operator delete((void *)v10);
    }
    return 0;
  }
  if ( a3 != 2 )
    if ( a3 == 1 )
      *a1 = *a2;
      return 0;
  v6 = operator new(0x10u);
  v7 = *v3;
  v8 = v6;
  v6[2] = 0;
  v9 = *(void (__fastcall **)(_DWORD *, int, signed int))(v7 + 8);
  if ( v9 )
    v9(v6, v7, 2);
    v8[3] = *(_DWORD *)(v7 + 12);
    v8[2] = *(_DWORD *)(v7 + 8);
  result = 0;
  *v4 = (int)v8;
  return result;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_request_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


void __fastcall pplx::details::_Task_impl_base::~_Task_impl_base(pplx::details::_Task_impl_base *this)
{
  pplx::details::_Task_impl_base::~_Task_impl_base(this);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CreateImpl(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CreateImpl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(pplx::task<web::http::http_response>),std::function<unsigned char ()(pplx::task<web::http::http_response>)> pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(std::function const&<void ()(pplx::task<web::http::http_response>)>)::{lambda(pplx::task<web::http::http_response>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(pplx::task<web::http::http_response>)> pplx::details::_MakeTToUnitFunc<pplx::task<web::http::http_response>>(std::function const&<void ()(pplx::task<web::http::http_response>)>)::{lambda(pplx::task<web::http::http_response>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::get(xbox::services::system::token_and_signature_result *a1, pplx::details::_Task_impl_base **a2)
{
  int *v2; // r5@1
  xbox::services::system::token_and_signature_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = (int *)a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_GetResult(
           v3,
           *v2);
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  int v15; // r7@23
  void *v16; // r0@25
  void **v17; // r0@28
  void *v18; // r5@29
  unsigned int *v19; // r1@30
  unsigned int v20; // r0@32
  unsigned int *v21; // r6@36
  unsigned int v22; // r0@38
  int *v23; // r6@45
  int v24; // r7@46
  unsigned int *v25; // r1@47
  unsigned int v26; // r0@49
  unsigned int *v27; // r5@53
  unsigned int v28; // r0@55
  char v30; // [sp+8h] [bp-80h]@25
  int v31; // [sp+5Ch] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 56);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 56);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      j_xbox::services::achievements::achievements_result::operator=((int)(v4 + 4), v3);
      *(_QWORD *)(v4 + 23) = *(_QWORD *)(v3 + 76);
      EntityInteraction::setInteractText((int *)v4 + 25, (int *)(v3 + 84));
      *((_BYTE *)*v2 + 112) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v15 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>::xbox_live_result(
              (int)&v30,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::_FinalizeAndRunContinuations(
              v15,
              (int)&v30);
            v16 = (void *)(v31 - 12);
            if ( (int *)(v31 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v31 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v16);
            }
            j_xbox::services::achievements::achievements_result::~achievements_result((xbox::services::achievements::achievements_result *)&v30);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v17 = *v2;
      if ( (*v2)[26] )
        v17[26] = 0;
        v18 = v17[27];
        v17[27] = 0;
        if ( v18 )
          v19 = (unsigned int *)((char *)v18 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
            v20 = (*v19)--;
          if ( v20 == 1 )
            v21 = (unsigned int *)((char *)v18 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            if ( &pthread_create )
              __dmb();
              do
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
            else
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
      v5 = 1;
    if ( v10 != v11 )
      v23 = v10;
      do
        v24 = v23[1];
        if ( v24 )
          v25 = (unsigned int *)(v24 + 4);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            v27 = (unsigned int *)(v24 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
              v28 = (*v27)--;
            if ( v28 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
        v23 += 2;
      while ( v23 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


  return pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<xbox::services::system::token_result>>)#1}::operator()
{
           a2);
}


int *__fastcall pplx::task<xbox::services::system::java_rps_ticket>::get(int a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r4@1
  int v3; // r5@1
  pplx::details::_Task_impl_base *v4; // r4@3
  char *v6; // r4@4
  int v7; // r3@4
  char *v8; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v6 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v6 = &off_26D7A9C;
    sub_21E94B4((void **)v6 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v6,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v7);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v8 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v8 = &off_26DD7D0;
    *((_DWORD *)v8 + 1) = &unk_28898CC;
      (int)v8,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  v4 = *v2;
  sub_21E8AF4((int *)v3, (int *)v4 + 20);
  *(_DWORD *)(v3 + 4) = *((_DWORD *)v4 + 21);
  return sub_21E8AF4((int *)(v3 + 8), (int *)v4 + 22);
}


signed int __fastcall pplx::task_completion_event<web::http::http_response>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r10@2
  pthread_mutex_t *v6; // r6@5
  unsigned int v7; // r8@5
  int v8; // r0@6
  int *v9; // r9@12
  int *v10; // r4@12
  int *v11; // r5@14
  int v12; // r8@14
  int v13; // r7@15
  unsigned int *v14; // r1@16
  unsigned int v15; // r0@18
  unsigned int *v16; // r6@22
  unsigned int v17; // r0@24
  int v19; // r10@33
  unsigned int *v20; // r0@35
  unsigned int v21; // r1@37
  void *v22; // r9@40
  unsigned int *v23; // r1@41
  unsigned int v24; // r0@43
  unsigned int *v25; // r4@47
  unsigned int v26; // r0@49
  void **v27; // r0@55
  int *v28; // r6@58
  int v29; // r0@59
  void **v30; // r1@61
  int v31; // r1@61
  unsigned int *v32; // r1@62
  unsigned int v33; // r2@64
  int v34; // r8@67
  unsigned int *v35; // r1@68
  unsigned int v36; // r0@70
  unsigned int *v37; // r7@74
  unsigned int v38; // r0@76
  void **v39; // r0@82
  void *v40; // r5@83
  unsigned int *v41; // r1@84
  unsigned int v42; // r0@86
  unsigned int *v43; // r6@91
  unsigned int v44; // r0@93
  void *v45; // [sp+4h] [bp-2Ch]@61
  int v46; // [sp+8h] [bp-28h]@61

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  if ( *((_BYTE *)*a1 + 32) )
  {
    v5 = 0;
  }
  else if ( *((_BYTE *)v4 + 33) )
  else
    v6 = (pthread_mutex_t *)(v4 + 3);
    v7 = 0xFFFF4424;
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      if ( *((_BYTE *)*v2 + 32) )
        goto LABEL_101;
    }
    if ( *((_BYTE *)v4 + 33) )
LABEL_101:
      if ( &pthread_create )
        j_pthread_mutex_unlock_1(v6);
      v9 = 0;
      v10 = 0;
      v5 = 0;
    else
      v4[4] = *(void **)v3;
      v19 = *(_DWORD *)(v3 + 4);
      if ( (void *)v19 != v4[5] )
      {
        if ( v19 )
        {
          v20 = (unsigned int *)(v19 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v21 = __ldrex(v20);
            while ( __strex(v21 + 1, v20) );
          }
          else
            ++*v20;
        }
        v22 = v4[5];
        if ( v22 )
          v23 = (unsigned int *)((char *)v22 + 4);
              v24 = __ldrex(v23);
            while ( __strex(v24 - 1, v23) );
            v24 = (*v23)--;
          if ( v24 == 1 )
            v25 = (unsigned int *)((char *)v22 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v22 + 8))(v22);
            if ( &pthread_create )
            {
              __dmb();
              do
                v26 = __ldrex(v25);
              while ( __strex(v26 - 1, v25) );
            }
            else
              v26 = (*v25)--;
            if ( v26 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v22 + 12))(v22);
        v4[5] = (void *)v19;
      }
      *((_BYTE *)*v2 + 32) = 1;
      v27 = *v2;
      v10 = (int *)**v2;
      *v27 = 0;
      v9 = (int *)v27[1];
      v27[1] = 0;
      v27[2] = 0;
      if ( v10 != v9 )
        v28 = v10;
        do
          v29 = *v28;
          if ( *(_DWORD *)(*v28 + 4) == 2 )
            (*(void (__cdecl **)(int, signed int))(*(_DWORD *)v29 + 8))(v29, 1);
            v30 = *v2;
            v45 = (*v2)[4];
            v31 = (int)v30[5];
            v46 = v31;
            if ( v31 )
              v32 = (unsigned int *)(v31 + 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v33 = __ldrex(v32);
                while ( __strex(v33 + 1, v32) );
              }
              else
                ++*v32;
            j_pplx::details::_Task_impl<web::http::http_response>::_FinalizeAndRunContinuations(v29, (int)&v45);
            v34 = v46;
            if ( v46 )
              v35 = (unsigned int *)(v46 + 4);
                  v36 = __ldrex(v35);
                while ( __strex(v36 - 1, v35) );
                v36 = (*v35)--;
              if ( v36 == 1 )
                v37 = (unsigned int *)(v34 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v38 = __ldrex(v37);
                  while ( __strex(v38 - 1, v37) );
                }
                else
                  v38 = (*v37)--;
                if ( v38 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
          v28 += 2;
        while ( v28 != v9 );
      v39 = *v2;
      if ( (*v2)[6] )
        v7 = 0xFFFF4424;
        v39[6] = 0;
        v40 = v39[7];
        v39[7] = 0;
        if ( v40 )
          v41 = (unsigned int *)((char *)v40 + 4);
              v42 = __ldrex(v41);
            while ( __strex(v42 - 1, v41) );
            v42 = (*v41)--;
          if ( v42 == 1 )
            v43 = (unsigned int *)((char *)v40 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v40 + 8))(v40);
                v44 = __ldrex(v43);
              while ( __strex(v44 - 1, v43) );
              v44 = (*v43)--;
            if ( v44 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v40 + 12))(v40);
        v5 = 1;
      else
    if ( v10 != v9 )
      v11 = v10;
      v12 = *(int *)((char *)&GLOBAL_OFFSET_TABLE_ + v7);
      do
        v13 = v11[1];
        if ( v13 )
          v14 = (unsigned int *)(v13 + 4);
          if ( v12 )
              v15 = __ldrex(v14);
            while ( __strex(v15 - 1, v14) );
            v15 = (*v14)--;
          if ( v15 == 1 )
            v16 = (unsigned int *)(v13 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
            if ( v12 )
                v17 = __ldrex(v16);
              while ( __strex(v17 - 1, v16) );
              v17 = (*v16)--;
            if ( v17 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
        v11 += 2;
      while ( v11 != v9 );
    if ( v10 )
      j_operator delete(v10);
  return v5;
}


int *__fastcall pplx::task<web::json::value>::task<pplx::task_completion_event<web::json::value>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  pplx::task<web::json::value>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_119C874();
      v28 = operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      _aeabi_memmove4(v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  pplx::task_completion_event<web::json::value>::_RegisterTask((int *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6system25xbox_shell_sign_in_statusEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<Social::XboxProfile>(std::function const&<void ()(Social::XboxProfile)>)::{lambda(Social::XboxProfile)#1}::operator() const(int a1, const Social::XboxProfile *a2)
{
  int v2; // r4@1
  void (__fastcall *v3)(int, void **); // r12@2
  int v4; // r1@2
  int v5; // r1@2
  int v6; // r1@2
  int v7; // r1@2
  int v8; // r1@2
  int v9; // r1@2
  void *v11; // [sp+0h] [bp-68h]@1
  void *v12; // [sp+4h] [bp-64h]@2
  void *v13; // [sp+8h] [bp-60h]@2
  void *v14; // [sp+Ch] [bp-5Ch]@2
  void *v15; // [sp+10h] [bp-58h]@2
  int v16; // [sp+14h] [bp-54h]@2
  int v17; // [sp+18h] [bp-50h]@2
  int v18; // [sp+1Ch] [bp-4Ch]@2
  void *v19; // [sp+20h] [bp-48h]@2
  void *v20; // [sp+24h] [bp-44h]@2
  void *v21; // [sp+28h] [bp-40h]@2
  int v22; // [sp+2Ch] [bp-3Ch]@2
  void *v23; // [sp+30h] [bp-38h]@2
  int v24; // [sp+34h] [bp-34h]@2
  int v25; // [sp+38h] [bp-30h]@2
  int v26; // [sp+3Ch] [bp-2Ch]@2
  void *v27; // [sp+40h] [bp-28h]@2
  int v28; // [sp+44h] [bp-24h]@2
  int v29; // [sp+48h] [bp-20h]@2
  int v30; // [sp+4Ch] [bp-1Ch]@2
  int v31; // [sp+50h] [bp-18h]@2
  int v32; // [sp+54h] [bp-14h]@2
  int v33; // [sp+58h] [bp-10h]@2
  int v34; // [sp+5Ch] [bp-Ch]@2

  v2 = a1;
  Social::XboxProfile::XboxProfile((Social::XboxProfile *)&v11, a2);
  if ( !*(_DWORD *)(v2 + 8) )
    sub_21E5F48();
  v3 = *(void (__fastcall **)(int, void **))(v2 + 12);
  v23 = v11;
  v11 = &unk_28898CC;
  v4 = (int)v12;
  v12 = &unk_28898CC;
  v24 = v4;
  v5 = (int)v13;
  v13 = &unk_28898CC;
  v25 = v5;
  v6 = (int)v14;
  v14 = &unk_28898CC;
  v26 = v6;
  v27 = v15;
  v15 = &unk_28898CC;
  v30 = v18;
  v28 = v16;
  v29 = v17;
  v7 = (int)v19;
  v19 = &unk_28898CC;
  v31 = v7;
  v8 = (int)v20;
  v20 = &unk_28898CC;
  v32 = v8;
  v9 = (int)v21;
  v21 = &unk_28898CC;
  v33 = v9;
  v34 = v22;
  v3(v2, &v23);
  Social::XboxProfile::~XboxProfile((Social::XboxProfile *)&v23);
  Social::XboxProfile::~XboxProfile((Social::XboxProfile *)&v11);
  return 0;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_RegisterTask(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl_base *v1; // r0@1

  v1 = j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::~_Task_impl(a1);
  j_j_j__ZdlPv_7((void *)v1);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_0((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::privacy::permission_check_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::set(void ***a1, int a2)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::set(
           a1,
           a2);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 19);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 16);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::game_server_platform::cluster_result::~cluster_result((xbox::services::game_server_platform::cluster_result *)(v1 + 2));
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_RegisterTask(
           a1,
           a2);
}


unsigned int __fastcall pplx::task_from_result<bool>(int a1, char a2, int a3)
{
  char v3; // r7@1
  int v4; // r4@1
  int v5; // r5@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int v8; // r0@7
  unsigned int *v9; // r0@8
  unsigned int v10; // r1@10
  int v11; // r0@13
  unsigned int *v12; // r1@14
  unsigned int v13; // r2@15
  __int16 v14; // r0@17
  int v15; // r0@19
  unsigned int *v16; // r1@20
  unsigned int v17; // r2@21
  unsigned int result; // r0@24
  int v19; // r4@24
  unsigned int *v20; // r1@25
  unsigned int *v21; // r5@31
  int v22; // r4@38
  unsigned int *v23; // r1@39
  unsigned int *v24; // r5@45
  int v25; // r4@52
  unsigned int *v26; // r1@53
  unsigned int *v27; // r5@59
  int v28; // [sp+0h] [bp-58h]@7
  int v29; // [sp+4h] [bp-54h]@7
  int v30; // [sp+8h] [bp-50h]@13
  int v31; // [sp+Ch] [bp-4Ch]@17
  char v32; // [sp+14h] [bp-44h]@17
  int v33; // [sp+18h] [bp-40h]@17
  void *ptr; // [sp+1Ch] [bp-3Ch]@17
  int v35; // [sp+20h] [bp-38h]@17
  int v36; // [sp+24h] [bp-34h]@17
  char v37; // [sp+28h] [bp-30h]@17
  char v38; // [sp+29h] [bp-2Fh]@17
  int v39; // [sp+30h] [bp-28h]@1
  int v40; // [sp+34h] [bp-24h]@1
  int v41; // [sp+38h] [bp-20h]@1
  int v42; // [sp+3Ch] [bp-1Ch]@1

  v3 = a2;
  v4 = a1;
  v5 = a3;
  j__ZNSt12__shared_ptrIN4pplx7details27_Task_completion_event_implIbEELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS3_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)&v41);
  pplx::task_completion_event<bool>::set(&v41, v3);
  v39 = v41;
  v40 = v42;
  if ( v42 )
  {
    v6 = (unsigned int *)(v42 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v28 = *(_DWORD *)v5;
  v8 = *(_DWORD *)(v5 + 4);
  v29 = v8;
  if ( v8 )
    v9 = (unsigned int *)(v8 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
      ++*v9;
  v30 = *(_DWORD *)(v5 + 8);
  v11 = *(_DWORD *)(v5 + 12);
  if ( v11 )
    v12 = (unsigned int *)(v11 + 4);
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  v31 = v11;
  v35 = 0;
  v36 = 0;
  v33 = 0;
  ptr = 0;
  v32 = 0;
  v14 = *(_WORD *)(v5 + 40);
  v37 = *(_WORD *)(v5 + 40);
  v38 = HIBYTE(v14);
  pplx::create_task<pplx::task_completion_event<bool>>(v4, (int)&v39, (int)&v28);
  if ( ptr )
    operator delete(ptr);
  v15 = v31;
  if ( v31 )
    v16 = (unsigned int *)(v31 + 4);
      v17 = __ldrex(v16);
    while ( __strex(v17 - 1, v16) );
    if ( v17 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v15 + 8))(v15);
  result = 0;
  v31 = 0;
  v19 = v29;
  if ( v29 )
    v20 = (unsigned int *)(v29 + 4);
        result = __ldrex(v20);
      while ( __strex(result - 1, v20) );
      result = (*v20)--;
    if ( result == 1 )
      v21 = (unsigned int *)(v19 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v21);
        while ( __strex(result - 1, v21) );
      }
      else
        result = (*v21)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
  v22 = v40;
  if ( v40 )
    v23 = (unsigned int *)(v40 + 4);
        result = __ldrex(v23);
      while ( __strex(result - 1, v23) );
      result = (*v23)--;
      v24 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
          result = __ldrex(v24);
        while ( __strex(result - 1, v24) );
        result = (*v24)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  v25 = v42;
    v26 = (unsigned int *)(v42 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
      result = (*v26)--;
      v27 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
        result = (*v27)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[11]; // [sp+4h] [bp-44h]@7
  int v18; // [sp+30h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 64) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 72) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>::xbox_live_result(
      (xbox::services::system::token_and_signature_result *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::system::token_and_signature_result::~token_and_signature_result((xbox::services::system::token_and_signature_result *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::~_Task_impl(a1);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)#1}::operator() const(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r2@1
  char *v4; // r0@1
  unsigned int *v6; // r2@3
  signed int v7; // r1@5
  int v8; // [sp+0h] [bp-28h]@1
  char v9; // [sp+4h] [bp-24h]@1
  __int64 v10; // [sp+8h] [bp-20h]@1
  char *v11; // [sp+10h] [bp-18h]@1

  v2 = a1;
  v11 = (char *)&unk_28898CC;
  v3 = *(_DWORD *)a2;
  v9 = *(_BYTE *)(a2 + 4);
  v8 = v3;
  v10 = *(_QWORD *)(a2 + 8);
  EntityInteraction::setInteractText((int *)&v11, (int *)(a2 + 16));
  std::function<void ()(xbox::services::xbox_live_result<xbox::services::system::sign_in_result>)>::operator()(
    v2,
    (int)&v8);
  v4 = v11 - 12;
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v6 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v4);
  }
  return 0;
}


int __fastcall pplx::task<xbox::services::system::auth_flow_result>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services6system16auth_flow_resultEEESaISB_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)#1}::operator() const(int a1, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4
  int v5; // r4@7
  unsigned int *v6; // r1@8
  unsigned int v7; // r0@10
  unsigned int *v8; // r5@14
  unsigned int v9; // r0@16
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v11 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v12 = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  j_std::function<void ()(pplx::task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>)>::operator()(
    a1,
    (int)&v11);
  v5 = v12;
  if ( v12 )
    v6 = (unsigned int *)(v12 + 4);
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return 0;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament_request_result>>::~_Task_impl(int a1)
{
  int v1; // r4@1
  pplx::details::_CancellationTokenRegistration *v2; // r1@1
  int v3; // r0@2
  unsigned int *v4; // r1@2
  unsigned int v5; // r2@3
  int v6; // r1@7
  void *v7; // r0@7
  unsigned int *v9; // r2@9
  signed int v10; // r1@11

  v1 = a1;
  *(_DWORD *)a1 = &off_27677D0;
  v2 = *(pplx::details::_CancellationTokenRegistration **)(a1 + 28);
  if ( v2 )
  {
    j_pplx::details::_CancellationTokenState::_DeregisterCallback(
      *(pplx::details::_CancellationTokenState **)(a1 + 24),
      v2);
    v3 = *(_DWORD *)(v1 + 28);
    __dmb();
    v4 = (unsigned int *)(v3 + 4);
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 - 1, v4) );
    if ( v5 == 1 )
      (*(void (**)(void))(*(_DWORD *)v3 + 8))();
    *(_DWORD *)(v1 + 28) = 0;
  }
  v6 = *(_DWORD *)(v1 + 136);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v9 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  j_xbox::services::tournaments::tournament_request_result::~tournament_request_result((xbox::services::tournaments::tournament_request_result *)(v1 + 80));
  j_pplx::details::_Task_impl_base::~_Task_impl_base((pplx::details::_Task_impl_base *)v1);
  return v1;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  void *v9; // r5@8 OVERLAPPED
  void *v10; // r6@8 OVERLAPPED
  void *v11; // r0@13
  unsigned int *v12; // r2@14
  signed int v13; // r1@16
  int v14; // r1@18 OVERLAPPED
  int v15; // r2@18
  int v16; // r2@19
  unsigned int *v17; // r1@20
  unsigned int v18; // r2@22
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@27
  unsigned int *v20; // r2@30
  signed int v21; // r1@32
  int v22; // [sp+4h] [bp-34h]@7
  __int64 v23; // [sp+8h] [bp-30h]@8
  int v24; // [sp+1Ch] [bp-1Ch]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 44) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 52) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>::xbox_live_result(
      (xbox::services::user_statistics::user_statistics_result *)&v22,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>::_FinalizeAndRunContinuations(
      v7,
      &v22);
    v8 = (void *)(v24 - 12);
    if ( (int *)(v24 - 12) != &dword_28898C0 )
    {
      v20 = (unsigned int *)(v24 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v21 = __ldrex(v20);
        while ( __strex(v21 - 1, v20) );
      }
      else
        v21 = (*v20)--;
      if ( v21 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    *(_QWORD *)&v9 = v23;
    if ( (_DWORD)v23 != HIDWORD(v23) )
      do
        j_std::_Destroy<xbox::services::user_statistics::service_configuration_statistic>((int)v9);
        v9 = (char *)v9 + 16;
      while ( v10 != v9 );
      v9 = (void *)v23;
    if ( v9 )
      j_operator delete(v9);
    v11 = (void *)(v22 - 12);
    if ( (int *)(v22 - 12) != &dword_28898C0 )
      v12 = (unsigned int *)(v22 - 4);
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
        v13 = (*v12)--;
      if ( v13 <= 0 )
        j_j_j_j__ZdlPv_9(v11);
  else
    *(_QWORD *)&v14 = *(_QWORD *)(v4 + 4);
    if ( v14 == v15 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v14 = *v2;
      v16 = v2[1];
      *(_DWORD *)(v14 + 4) = v16;
      if ( v16 )
        v17 = (unsigned int *)(v16 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 + 1, v17) );
        }
        else
          ++*v17;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


int __fastcall std::_Function_handler<unsigned char ()(pplx::task<xbox::services::xbox_live_result<void>>),std::function<unsigned char ()(pplx::task<xbox::services::xbox_live_result<void>>)> pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}>::_M_invoke(int *a1, int a2)
{
  int v2; // r0@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = *a1;
  v9 = *(_DWORD *)a2;
  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = 0;
  v10 = v3;
  *(_DWORD *)a2 = 0;
  j_pplx::details::_MakeTToUnitFunc<pplx::task<xbox::services::xbox_live_result<void>>>(std::function const&<void ()(pplx::task<xbox::services::xbox_live_result<void>>)>)::{lambda(pplx::task<xbox::services::xbox_live_result<void>>)#1}::operator() const(
    v2,
    (int)&v9);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  return 0;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  unsigned __int64 v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+0h] [bp-20h]@1
  int v16; // [sp+4h] [bp-1Ch]@1
  int v17; // [sp+8h] [bp-18h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2763318;
  *(_DWORD *)(v3 + 80) = 0;
  v12 = __PAIR__(&unk_28898CC, ((int (__cdecl *)(void **))byte_21E9640)(&off_2763318));
  *(_QWORD *)(v3 + 84) = v12;
  v13 = j_xbox::services::xbox_services_error_code_category((xbox::services *)v12);
  *(_DWORD *)(v3 + 84) = v13;
  return v3;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_FinalizeAndRunContinuations(int a1, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::http_call_response>>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_CreateImpl(
    (int)v4,
    v17,
    (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::_RegisterTask(
    (int *)v5,
    v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<void>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::system::sign_in_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  int v13; // r7@19
  int v14; // r4@20
  unsigned int *v15; // r1@21
  unsigned int v16; // r0@23
  unsigned int *v17; // r6@27
  unsigned int v18; // r0@29
  unsigned int *v20; // r2@39
  signed int v21; // r1@41

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 10);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 8);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v10 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v13 = *v1 >> 32;
  v12 = *v1;
  if ( v12 != v13 )
    do
      v14 = *(_DWORD *)(v12 + 4);
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v14 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
      v12 += 8;
    while ( v12 != v13 );
    v12 = *(_DWORD *)v1;
  if ( v12 )
    j_operator delete((void *)v12);
  return v1;
}


int (**__fastcall pplx::task_completion_event<std::shared_ptr<xbox::services::http_call_response>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@6
  int v8; // r2@10
  int v9; // r0@10
  unsigned int *v10; // r0@11
  unsigned int v11; // r1@13
  int v12; // r1@15 OVERLAPPED
  int v13; // r2@15
  int v14; // r2@16
  unsigned int *v15; // r1@17
  unsigned int v16; // r2@19
  int v17; // r5@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r0@25
  unsigned int *v20; // r6@29
  unsigned int v21; // r0@31
  int v22; // [sp+4h] [bp-1Ch]@10
  int v23; // [sp+8h] [bp-18h]@10

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 24) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 32) )
    v8 = *v2;
    v22 = *(_DWORD *)(v4 + 16);
    v9 = *(_DWORD *)(v4 + 20);
    v23 = v9;
    if ( v9 )
    {
      v10 = (unsigned int *)(v9 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 + 1, v10) );
      }
      else
        ++*v10;
    }
    j_pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>::_FinalizeAndRunContinuations(
      v8,
      (int)&v22);
    v17 = v23;
    if ( v23 )
      v18 = (unsigned int *)(v23 + 4);
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
        v19 = (*v18)--;
      if ( v19 == 1 )
        v20 = (unsigned int *)(v17 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
        if ( &pthread_create )
        {
          __dmb();
          do
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
        }
        else
          v21 = (*v20)--;
        if ( v21 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
  else
    *(_QWORD *)&v12 = *(_QWORD *)(v4 + 4);
    if ( v12 == v13 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<std::shared_ptr<xbox::services::http_call_response>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v12 = *v2;
      v14 = v2[1];
      *(_DWORD *)(v12 + 4) = v14;
      if ( v14 )
        v15 = (unsigned int *)(v14 + 4);
            v16 = __ldrex(v15);
          while ( __strex(v16 + 1, v15) );
          ++*v15;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


int *__fastcall pplx::task<xbox::services::system::auth_flow_result>::task<pplx::task_completion_event<xbox::services::system::auth_flow_result>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  j_pplx::task<xbox::services::system::auth_flow_result>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_21E57F4();
      v28 = j_operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      j___aeabi_memmove4_1((int)v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    j_operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  j_pplx::task_completion_event<xbox::services::system::auth_flow_result>::_RegisterTask((int *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r6@1
  __int64 v7; // r0@1
  int v8; // r0@3
  unsigned int *v9; // r0@4
  unsigned int v10; // r1@6
  int *result; // r0@9
  int v12; // r4@9
  unsigned int *v13; // r1@10
  unsigned int *v14; // r5@16
  int v15; // [sp+0h] [bp-28h]@3
  int v16; // [sp+4h] [bp-24h]@3
  int v17; // [sp+8h] [bp-20h]@1
  void *ptr; // [sp+Ch] [bp-1Ch]@1
  int v19; // [sp+10h] [bp-18h]@1
  int v20; // [sp+14h] [bp-14h]@1

  v4 = a1;
  v19 = 0;
  v20 = 0;
  v5 = a3;
  ptr = 0;
  v6 = a2;
  v17 = v3;
  *(_BYTE *)(a3 + 20) = 1;
  *(_DWORD *)(a3 + 24) = v3;
  LODWORD(v7) = a3 + 28;
  HIDWORD(v7) = (unsigned int)&v17 | 4;
  j_std::vector<void *,std::allocator<void *>>::operator=(v7);
  if ( ptr )
    j_operator delete(ptr);
  v15 = *(_DWORD *)v6;
  v8 = *(_DWORD *)(v6 + 4);
  v16 = v8;
  if ( v8 )
  {
    v9 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
  }
  result = j_pplx::task<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>>(
             v4,
             (int)&v15,
             v5);
  v12 = v16;
  if ( v16 )
    v13 = (unsigned int *)(v16 + 4);
        result = (int *)__ldrex(v13);
      while ( __strex((unsigned int)result - 1, v13) );
      result = (int *)(*v13)--;
    if ( result == (int *)1 )
      v14 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v14);
        while ( __strex((unsigned int)result - 1, v14) );
      }
      else
        result = (int *)(*v14)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  int *v12; // r0@21
  int v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@1
  int v16; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v14 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v15 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v16 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v14);
  v7 = v15;
  if ( v15 )
    v8 = (unsigned int *)(v15 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_2763624;
  *(_DWORD *)(v3 + 80) = 0;
  *(_DWORD *)(v3 + 84) = 0;
  v12 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&off_2763624);
  *(_DWORD *)(v3 + 88) = 0;
  *(_DWORD *)(v3 + 92) = v12;
  *(_DWORD *)(v3 + 96) = &unk_28898CC;
  return v3;
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int *v3; // r5@1
  int v4; // r12@1
  int v5; // r1@1
  int v6; // r2@1
  int v7; // r3@1
  int v8; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v10; // r0@8
  int v11; // r1@12
  int v12; // r5@13

  v2 = a1;
  v3 = a2;
  EntityInteraction::setInteractText((int *)(a1 + 80), a2);
  *(_DWORD *)(v2 + 84) = v3[1];
  EntityInteraction::setInteractText((int *)(v2 + 88), v3 + 2);
  *(_DWORD *)(v2 + 92) = v3[3];
  EntityInteraction::setInteractText((int *)(v2 + 96), v3 + 4);
  EntityInteraction::setInteractText((int *)(v2 + 100), v3 + 5);
  v4 = v2 + 104;
  v5 = v3[7];
  v6 = v3[8];
  v7 = v3[9];
  *(_DWORD *)v4 = v3[6];
  *(_DWORD *)(v4 + 4) = v5;
  *(_DWORD *)(v4 + 8) = v6;
  *(_DWORD *)(v4 + 12) = v7;
  EntityInteraction::setInteractText((int *)(v2 + 120), v3 + 10);
  EntityInteraction::setInteractText((int *)(v2 + 124), v3 + 11);
  EntityInteraction::setInteractText((int *)(v2 + 128), v3 + 12);
  *(_QWORD *)(v2 + 136) = *((_QWORD *)v3 + 7);
  EntityInteraction::setInteractText((int *)(v2 + 144), v3 + 16);
  if ( &pthread_create )
  {
    v8 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 20));
    if ( v8 )
      sub_21E5E14(v8);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v10 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 36));
      if ( v10 )
        sub_21E5E14(v10);
      *(_BYTE *)(v2 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v2 + 36));
    }
    else
    v11 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v11 )
      do
      {
        v12 = *(_DWORD *)(v11 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v11);
        v11 = v12;
      }
      while ( v12 );
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


void __fastcall pplx::task_canceled::~task_canceled(pplx::task_canceled *this)
{
  pplx::task_canceled *v1; // r4@1
  int v2; // r1@1
  void *v3; // r0@1
  unsigned int *v4; // r12@3
  signed int v5; // r1@5

  v1 = this;
  *(_DWORD *)this = &off_26DD7D0;
  v2 = *((_DWORD *)this + 1);
  v3 = (void *)(v2 - 12);
  if ( (int *)(v2 - 12) != &dword_28898C0 )
  {
    v4 = (unsigned int *)(v2 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v3);
  }
  std::exception::~exception();
  operator delete((void *)v1);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>(int a1, int a2, int a3)
{
  return pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>(
           a1,
           a2,
           a3);
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::create_match_ticket_response>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r1@19
  void *v13; // r0@19
  int v14; // r5@20
  int v15; // r7@20
  int v16; // r4@21
  unsigned int *v17; // r1@22
  unsigned int v18; // r0@24
  unsigned int *v19; // r6@28
  unsigned int v20; // r0@30
  unsigned int *v22; // r2@40
  signed int v23; // r1@42
  unsigned int *v24; // r2@44
  signed int v25; // r1@46

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 13);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 10);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v22 = (unsigned int *)(v10 - 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = *((_DWORD *)v1 + 4);
  v13 = (void *)(v12 - 12);
  if ( (int *)(v12 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v12 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j__ZdlPv_9(v13);
  v15 = *v1 >> 32;
  v14 = *v1;
  if ( v14 != v15 )
    do
      v16 = *(_DWORD *)(v14 + 4);
      if ( v16 )
        v17 = (unsigned int *)(v16 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
        }
        else
          v18 = (*v17)--;
        if ( v18 == 1 )
          v19 = (unsigned int *)(v16 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          if ( &pthread_create )
          {
            __dmb();
            do
              v20 = __ldrex(v19);
            while ( __strex(v20 - 1, v19) );
          }
          else
            v20 = (*v19)--;
          if ( v20 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
      v14 += 8;
    while ( v14 != v15 );
    v14 = *(_DWORD *)v1;
  if ( v14 )
    j_operator delete((void *)v14);
  return v1;
}


unsigned __int64 *__fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::~_Task_completion_event_impl(unsigned __int64 *a1)
{
  unsigned __int64 *v1; // r9@1
  _DWORD *v2; // r0@1
  _DWORD *i; // r4@1
  unsigned __int64 v4; // kr00_8@1
  int v5; // r5@4
  unsigned int *v6; // r1@5
  unsigned int v7; // r0@7
  unsigned int *v8; // r4@11
  unsigned int v9; // r0@13
  int v10; // r1@18
  void *v11; // r0@18
  int v12; // r5@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r4@26
  unsigned int v16; // r0@28
  int v17; // r5@33
  int v18; // r7@33
  int v19; // r4@34
  unsigned int *v20; // r1@35
  unsigned int v21; // r0@37
  unsigned int *v22; // r6@41
  unsigned int v23; // r0@43
  unsigned int *v25; // r2@53
  signed int v26; // r1@55

  v1 = a1;
  v4 = *a1;
  v2 = (_DWORD *)(*a1 >> 32);
  for ( i = (_DWORD *)v4; i != v2; i += 2 )
  {
    (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*i + 8))(*i);
    v2 = (_DWORD *)*((_DWORD *)v1 + 1);
  }
  v5 = *((_DWORD *)v1 + 25);
  if ( v5 )
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v10 = *((_DWORD *)v1 + 22);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v25 = (unsigned int *)(v10 - 4);
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
      v26 = (*v25)--;
    if ( v26 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  j_xbox::services::title_storage::title_storage_blob_metadata::~title_storage_blob_metadata((xbox::services::title_storage::title_storage_blob_metadata *)(v1 + 3));
  v12 = *((_DWORD *)v1 + 5);
  if ( v12 )
    v13 = (unsigned int *)(v12 + 4);
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
      v14 = (*v13)--;
    if ( v14 == 1 )
      v15 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        v16 = (*v15)--;
      if ( v16 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  v18 = *v1 >> 32;
  v17 = *v1;
  if ( v17 != v18 )
    do
      v19 = *(_DWORD *)(v17 + 4);
      if ( v19 )
        v20 = (unsigned int *)(v19 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
        }
        else
          v21 = (*v20)--;
        if ( v21 == 1 )
          v22 = (unsigned int *)(v19 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
          if ( &pthread_create )
          {
            __dmb();
            do
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
          }
          else
            v23 = (*v22)--;
          if ( v23 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
      v17 += 8;
    while ( v17 != v18 );
    v17 = *(_DWORD *)v1;
  if ( v17 )
    j_operator delete((void *)v17);
  return v1;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  unsigned __int64 v17[9]; // [sp+8h] [bp-60h]@7
  int v18; // [sp+50h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 92) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 100) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>::xbox_live_result(
      (xbox::services::title_storage::title_storage_blob_metadata_result *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::title_storage::title_storage_blob_metadata_result::~title_storage_blob_metadata_result((xbox::services::title_storage::title_storage_blob_metadata_result *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


unsigned int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::user_context_auth_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  unsigned int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  unsigned int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_24user_context_auth_resultEEEEESaISC_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::get(xbox::services::title_storage::title_storage_blob_metadata_result *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::title_storage::title_storage_blob_metadata_result *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


  if ( pplx::details::_Task_impl_base::_Wait(v2) == 2 )
{
    v4 = j___cxa_allocate_exception(8);
    *(_DWORD *)v4 = &off_26DD7D0;
    *((_DWORD *)v4 + 1) = &unk_28898CC;
    j___cxa_throw(
      (int)v4,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  }
  return *((_DWORD *)*v1 + 20);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)#1}::operator() const(int a1, int a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  unsigned int *v5; // r2@3
  signed int v6; // r1@5
  char v7; // [sp+4h] [bp-6Ch]@1
  int v8; // [sp+58h] [bp-18h]@1

  v2 = a1;
  xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>::xbox_live_result(
    (xbox::services::achievements::achievements_result *)&v7,
    a2);
  std::function<void ()(xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>)>::operator()(
    v2,
    (int)&v7);
  v3 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
  {
    v5 = (unsigned int *)(v8 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v3);
  }
  xbox::services::achievements::achievements_result::~achievements_result((xbox::services::achievements::achievements_result *)&v7);
  return 0;
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::presence::presence_record>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>::_Task_impl(
           a1,
           a2,
           a3);
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(int a1, int a2, int a3)
{
  int v3; // r8@1
  int v4; // r5@1
  int v5; // r6@1
  _DWORD *v6; // r0@1
  int v7; // r7@1
  int *v8; // r0@1
  int v9; // r0@1
  void *v10; // r0@1
  int v11; // r6@2
  unsigned int *v12; // r1@3
  unsigned int v13; // r0@5
  unsigned int *v14; // r4@9
  unsigned int v15; // r0@11
  unsigned int *v16; // r0@17
  unsigned int v17; // r1@19
  int v18; // r0@22
  unsigned int *v19; // r0@23
  unsigned int v20; // r1@25
  int v21; // r0@28
  unsigned int *v22; // r1@29
  unsigned int v23; // r2@30
  __int16 v24; // r0@32
  int v25; // r0@34
  unsigned int *v26; // r1@35
  unsigned int v27; // r2@36
  unsigned int result; // r0@39
  int v29; // r4@39
  unsigned int *v30; // r1@40
  unsigned int *v31; // r5@46
  int v32; // r4@53
  unsigned int *v33; // r1@54
  unsigned int *v34; // r5@60
  int v35; // r4@67
  unsigned int *v36; // r1@68
  unsigned int *v37; // r5@74
  unsigned int *v38; // r2@82
  signed int v39; // r1@84
  int v40; // [sp+0h] [bp-70h]@22
  int v41; // [sp+4h] [bp-6Ch]@22
  int v42; // [sp+8h] [bp-68h]@28
  int v43; // [sp+Ch] [bp-64h]@32
  char v44; // [sp+14h] [bp-5Ch]@32
  int v45; // [sp+18h] [bp-58h]@32
  void *ptr; // [sp+1Ch] [bp-54h]@32
  int v47; // [sp+20h] [bp-50h]@32
  int v48; // [sp+24h] [bp-4Ch]@32
  char v49; // [sp+28h] [bp-48h]@32
  char v50; // [sp+29h] [bp-47h]@32
  int v51; // [sp+30h] [bp-40h]@16
  int v52; // [sp+34h] [bp-3Ch]@16
  char v53; // [sp+38h] [bp-38h]@1
  int v54; // [sp+3Ch] [bp-34h]@2
  int v55; // [sp+48h] [bp-28h]@1
  int v56; // [sp+4Ch] [bp-24h]@1
  int v57; // [sp+50h] [bp-20h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v56 = 0;
  v57 = 0;
  v6 = j_operator new(0x3Cu);
  v7 = (int)v6;
  v6[1] = 1;
  v6[2] = 1;
  *v6 = &off_27635D4;
  v6[3] = 0;
  v6[4] = 0;
  v6[5] = 0;
  v6[6] = 0;
  v6[7] = 0;
  v6[8] = 0;
  v8 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&off_27635D4);
  *(_DWORD *)(v7 + 36) = 0;
  *(_DWORD *)(v7 + 40) = v8;
  *(_DWORD *)(v7 + 44) = &unk_28898CC;
  *(_WORD *)(v7 + 56) = 0;
  *(_DWORD *)(v7 + 48) = 0;
  *(_DWORD *)(v7 + 52) = 0;
  v9 = *(_DWORD *)v7;
  v57 = v7;
  v56 = (*(int (__fastcall **)(int, void **))(v9 + 16))(v7, &`typeinfo for'std::_Sp_make_shared_tag);
  j_xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>::xbox_live_result(
    (int)&v53,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>::set(
    (void ***)&v56,
    (int)&v53);
  v10 = (void *)(v55 - 12);
  if ( (int *)(v55 - 12) != &dword_28898C0 )
  {
    v38 = (unsigned int *)(v55 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v39 = __ldrex(v38);
      while ( __strex(v39 - 1, v38) );
    }
    else
      v39 = (*v38)--;
    if ( v39 <= 0 )
      j_j_j_j__ZdlPv_9(v10);
  }
  v11 = v54;
  if ( v54 )
    v12 = (unsigned int *)(v54 + 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
      v13 = (*v12)--;
    if ( v13 == 1 )
      v14 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
      if ( &pthread_create )
      {
        __dmb();
        do
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
      }
      else
        v15 = (*v14)--;
      if ( v15 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v51 = v56;
  v52 = v57;
  if ( v57 )
    v16 = (unsigned int *)(v57 + 4);
        v17 = __ldrex(v16);
      while ( __strex(v17 + 1, v16) );
      ++*v16;
  v40 = *(_DWORD *)v4;
  v18 = *(_DWORD *)(v4 + 4);
  v41 = v18;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v42 = *(_DWORD *)(v4 + 8);
  v21 = *(_DWORD *)(v4 + 12);
  if ( v21 )
    v22 = (unsigned int *)(v21 + 4);
    __dmb();
    do
      v23 = __ldrex(v22);
    while ( __strex(v23 + 1, v22) );
  v43 = v21;
  v47 = 0;
  v48 = 0;
  v45 = 0;
  ptr = 0;
  v44 = 0;
  v24 = *(_WORD *)(v4 + 40);
  v49 = *(_WORD *)(v4 + 40);
  v50 = HIBYTE(v24);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>>(
    v3,
    (int)&v51,
    (int)&v40);
  if ( ptr )
    j_operator delete(ptr);
  v25 = v43;
  if ( v43 )
    v26 = (unsigned int *)(v43 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v25 + 8))(v25);
  result = 0;
  v43 = 0;
  v29 = v41;
  if ( v41 )
    v30 = (unsigned int *)(v41 + 4);
        result = __ldrex(v30);
      while ( __strex(result - 1, v30) );
      result = (*v30)--;
    if ( result == 1 )
      v31 = (unsigned int *)(v29 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
          result = __ldrex(v31);
        while ( __strex(result - 1, v31) );
        result = (*v31)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
  v32 = v52;
  if ( v52 )
    v33 = (unsigned int *)(v52 + 4);
        result = __ldrex(v33);
      while ( __strex(result - 1, v33) );
      result = (*v33)--;
      v34 = (unsigned int *)(v32 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v32 + 8))(v32);
          result = __ldrex(v34);
        while ( __strex(result - 1, v34) );
        result = (*v34)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v32 + 12))(v32);
  v35 = v57;
    v36 = (unsigned int *)(v57 + 4);
        result = __ldrex(v36);
      while ( __strex(result - 1, v36) );
      result = (*v36)--;
      v37 = (unsigned int *)(v35 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 8))(v35);
          result = __ldrex(v37);
        while ( __strex(result - 1, v37) );
        result = (*v37)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v35 + 12))(v35);
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27660B4;
  v12 = (xbox::services *)j_xbox::services::game_server_platform::cluster_result::cluster_result((xbox::services::game_server_platform::cluster_result *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 120) = 0;
  *(_DWORD *)(v3 + 124) = v13;
  *(_DWORD *)(v3 + 128) = &unk_28898CC;
  return v3;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::presence::presence_record>>::_Task_impl(
           a1,
           a2,
           a3);
}


signed int __fastcall pplx::task_completion_event<bool>::set_exception(_DWORD *a1, const std::__exception_ptr::exception_ptr *a2)
{
  int v2; // lr@0
  _DWORD *v3; // r4@1
  signed int v4; // r5@1
  signed int v5; // r4@2
  int v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@1
  int v9; // [sp+8h] [bp-20h]@1
  int v10; // [sp+Ch] [bp-1Ch]@1
  char v11; // [sp+10h] [bp-18h]@1
  char v12; // [sp+14h] [bp-14h]@1

  v3 = a1;
  std::__exception_ptr::exception_ptr::exception_ptr((std::__exception_ptr::exception_ptr *)&v11, a2);
  v9 = 0;
  v10 = 0;
  v8 = 0;
  v7 = v2;
  std::__exception_ptr::exception_ptr::exception_ptr(
    (std::__exception_ptr::exception_ptr *)&v12,
    (const std::__exception_ptr::exception_ptr *)&v11);
  v4 = pplx::task_completion_event<bool>::_StoreException<std::__exception_ptr::exception_ptr>(
         v3,
         (const std::__exception_ptr::exception_ptr *)&v12,
         (int)&v7);
  std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v12);
  if ( v4 == 1 )
    v5 = pplx::task_completion_event<bool>::_CancelInternal(v3);
  else
    v5 = 0;
  std::__exception_ptr::exception_ptr::~exception_ptr((std::__exception_ptr::exception_ptr *)&v11);
  return v5;
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services::achievements::achievement *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::achievements::achievement::achievement((xbox::services::achievements::achievement *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 168) = 0;
  *(_DWORD *)(v1 + 172) = v3;
  *(_DWORD *)(v1 + 176) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 192) = 0;
  *(_DWORD *)(v1 + 184) = 0;
  *(_DWORD *)(v1 + 188) = 0;
  return result;
}


int __fastcall pplx::create_task<xbox::services::xbox_live_result<std::shared_ptr<xbox::services::multiplayer::multiplayer_session>>>(int result, int a2)
{
  int v2; // r1@1
  unsigned int v3; // r1@4

  *(_DWORD *)result = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(result + 4) = v2;
  if ( v2 )
  {
    result = v2 + 4;
    if ( &pthread_create )
    {
      __dmb();
      do
        v3 = __ldrex((unsigned int *)result);
      while ( __strex(v3 + 1, (unsigned int *)result) );
    }
    else
      ++*(_DWORD *)result;
  }
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_Task_impl(int a1, int a2, int a3)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_Task_impl(
           a1,
           a2,
           a3);
}


int __fastcall pplx::task<web::http::http_response>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  __int64 v8; // r0@7
  int v9; // r6@7
  unsigned int *v10; // r7@14
  int v11; // r6@21
  unsigned int *v12; // r7@28
  int v13; // r6@35
  unsigned int *v14; // r7@42
  int v15; // r0@50
  int v16; // r1@50
  unsigned int *v17; // r1@51
  unsigned int v18; // r2@53
  unsigned int *v19; // r2@57
  unsigned int v20; // r1@59
  int v22; // [sp+0h] [bp-38h]@50
  int v23; // [sp+4h] [bp-34h]@50
  int v24; // [sp+8h] [bp-30h]@1
  int v25; // [sp+Ch] [bp-2Ch]@1
  int v26; // [sp+10h] [bp-28h]@7
  char v27; // [sp+14h] [bp-24h]@7
  int v28; // [sp+18h] [bp-20h]@7
  int v29; // [sp+1Ch] [bp-1Ch]@7
  char v30; // [sp+20h] [bp-18h]@7

  v3 = a1;
  v24 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v25 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v26 = *(_DWORD *)(a3 + 8);
  v29 = v4;
  std::__shared_ptr<pplx::details::_Task_impl<web::http::http_response>,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<pplx::details::_Task_impl<web::http::http_response>>,pplx::details::_CancellationTokenState *&,pplx::scheduler_ptr &>(
    (int)&v27,
    (int)&v30,
    &v29,
    (int)&v24);
  v8 = *(_QWORD *)&v27;
  *(_DWORD *)&v27 = 0;
  v28 = 0;
  *(_DWORD *)v3 = v8;
  v9 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = HIDWORD(v8);
  if ( v9 )
    HIDWORD(v8) = v9 + 4;
        LODWORD(v8) = __ldrex((unsigned int *)HIDWORD(v8));
      while ( __strex(v8 - 1, (unsigned int *)HIDWORD(v8)) );
      LODWORD(v8) = (*(_DWORD *)HIDWORD(v8))--;
    if ( (_DWORD)v8 == 1 )
      v10 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          LODWORD(v8) = __ldrex(v10);
        while ( __strex(v8 - 1, v10) );
      }
      else
        LODWORD(v8) = (*v10)--;
      if ( (_DWORD)v8 == 1 )
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v11 = v28;
  if ( v28 )
    HIDWORD(v8) = v28 + 4;
      v12 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          LODWORD(v8) = __ldrex(v12);
        while ( __strex(v8 - 1, v12) );
        LODWORD(v8) = (*v12)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  v13 = v25;
  if ( v25 )
    HIDWORD(v8) = v25 + 4;
      v14 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          LODWORD(v8) = __ldrex(v14);
        while ( __strex(v8 - 1, v14) );
        LODWORD(v8) = (*v14)--;
        LODWORD(v8) = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  if ( v4 != 2 )
    v15 = *(_DWORD *)v3;
    v22 = *(_DWORD *)v3;
    v16 = *(_DWORD *)(v3 + 4);
    v23 = v16;
    if ( v16 )
      v17 = (unsigned int *)(v16 + 8);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    pplx::details::_Task_impl_base::_RegisterCancellation(v15, (unsigned __int64 *)&v22);
    LODWORD(v8) = v23;
    if ( v23 )
      v19 = (unsigned int *)(v23 + 8);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        LODWORD(v8) = (*(int (__cdecl **)(_DWORD))(*(_DWORD *)v8 + 12))(v8);
  return v8;
}


unsigned int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>(int a1, int a2, int a3)
{
  int v3; // r8@1
  int v4; // r5@1
  int v5; // r6@1
  _DWORD *v6; // r0@1
  int v7; // r7@1
  int *v8; // r0@1
  int v9; // r0@1
  void *v10; // r0@1
  unsigned int *v11; // r0@3
  unsigned int v12; // r1@5
  int v13; // r0@8
  unsigned int *v14; // r0@9
  unsigned int v15; // r1@11
  int v16; // r0@14
  unsigned int *v17; // r1@15
  unsigned int v18; // r2@16
  __int16 v19; // r0@18
  int v20; // r0@20
  unsigned int *v21; // r1@21
  unsigned int v22; // r2@22
  unsigned int result; // r0@25
  int v24; // r4@25
  unsigned int *v25; // r1@26
  unsigned int *v26; // r5@32
  int v27; // r4@39
  unsigned int *v28; // r1@40
  unsigned int *v29; // r5@46
  int v30; // r4@53
  unsigned int *v31; // r1@54
  unsigned int *v32; // r5@60
  unsigned int *v33; // r2@68
  signed int v34; // r1@70
  int v35; // [sp+0h] [bp-B0h]@8
  int v36; // [sp+4h] [bp-ACh]@8
  int v37; // [sp+8h] [bp-A8h]@14
  int v38; // [sp+Ch] [bp-A4h]@18
  char v39; // [sp+14h] [bp-9Ch]@18
  int v40; // [sp+18h] [bp-98h]@18
  void *ptr; // [sp+1Ch] [bp-94h]@18
  int v42; // [sp+20h] [bp-90h]@18
  int v43; // [sp+24h] [bp-8Ch]@18
  char v44; // [sp+28h] [bp-88h]@18
  char v45; // [sp+29h] [bp-87h]@18
  int v46; // [sp+2Ch] [bp-84h]@2
  int v47; // [sp+30h] [bp-80h]@2
  char v48; // [sp+34h] [bp-7Ch]@1
  int v49; // [sp+88h] [bp-28h]@1
  int v50; // [sp+8Ch] [bp-24h]@1
  int v51; // [sp+90h] [bp-20h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v50 = 0;
  v51 = 0;
  v6 = j_operator new(0x80u);
  v7 = (int)v6;
  v6[1] = 1;
  v6[2] = 1;
  *v6 = &off_27631F8;
  v6[3] = 0;
  v6[4] = 0;
  v6[5] = 0;
  v6[6] = 0;
  v6[13] = 0;
  v6[14] = 0;
  v6[11] = 0;
  v6[12] = 0;
  v6[9] = 0;
  v6[10] = 0;
  v6[7] = 0;
  v6[8] = 0;
  v6[15] = &unk_28898CC;
  v6[16] = 0;
  v6[17] = 0;
  v6[18] = 0;
  v6[22] = 0;
  v6[23] = 0;
  v6[24] = 0;
  v6[25] = &unk_28898CC;
  v8 = j_xbox::services::xbox_services_error_code_category((xbox::services *)&unk_28898CC);
  *(_DWORD *)(v7 + 104) = 0;
  *(_DWORD *)(v7 + 108) = v8;
  *(_DWORD *)(v7 + 112) = &unk_28898CC;
  *(_WORD *)(v7 + 124) = 0;
  *(_DWORD *)(v7 + 116) = 0;
  *(_DWORD *)(v7 + 120) = 0;
  v9 = *(_DWORD *)v7;
  v51 = v7;
  v50 = (*(int (__fastcall **)(int, void **))(v9 + 16))(v7, &`typeinfo for'std::_Sp_make_shared_tag);
  j_xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>::xbox_live_result((int)&v48, v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>::set(
    (void ***)&v50,
    (int)&v48);
  v10 = (void *)(v49 - 12);
  if ( (int *)(v49 - 12) != &dword_28898C0 )
  {
    v33 = (unsigned int *)(v49 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v34 = __ldrex(v33);
      while ( __strex(v34 - 1, v33) );
    }
    else
      v34 = (*v33)--;
    if ( v34 <= 0 )
      j_j_j_j__ZdlPv_9(v10);
  }
  j_xbox::services::achievements::achievements_result::~achievements_result((xbox::services::achievements::achievements_result *)&v48);
  v46 = v50;
  v47 = v51;
  if ( v51 )
    v11 = (unsigned int *)(v51 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v35 = *(_DWORD *)v4;
  v13 = *(_DWORD *)(v4 + 4);
  v36 = v13;
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
        v15 = __ldrex(v14);
      while ( __strex(v15 + 1, v14) );
      ++*v14;
  v37 = *(_DWORD *)(v4 + 8);
  v16 = *(_DWORD *)(v4 + 12);
  if ( v16 )
    v17 = (unsigned int *)(v16 + 4);
    __dmb();
    do
      v18 = __ldrex(v17);
    while ( __strex(v18 + 1, v17) );
  v38 = v16;
  v42 = 0;
  v43 = 0;
  v40 = 0;
  ptr = 0;
  v39 = 0;
  v19 = *(_WORD *)(v4 + 40);
  v44 = *(_WORD *)(v4 + 40);
  v45 = HIBYTE(v19);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>(
    v3,
    (int)&v46,
    (int)&v35);
  if ( ptr )
    j_operator delete(ptr);
  v20 = v38;
  if ( v38 )
    v21 = (unsigned int *)(v38 + 4);
      v22 = __ldrex(v21);
    while ( __strex(v22 - 1, v21) );
    if ( v22 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v20 + 8))(v20);
  result = 0;
  v38 = 0;
  v24 = v36;
  if ( v36 )
    v25 = (unsigned int *)(v36 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
    if ( result == 1 )
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
      }
      else
        result = (*v26)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v47;
  if ( v47 )
    v28 = (unsigned int *)(v47 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  v30 = v51;
    v31 = (unsigned int *)(v51 + 4);
        result = __ldrex(v31);
      while ( __strex(result - 1, v31) );
      result = (*v31)--;
      v32 = (unsigned int *)(v30 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 8))(v30);
          result = __ldrex(v32);
        while ( __strex(result - 1, v32) );
        result = (*v32)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v30 + 12))(v30);
  return result;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::~_Task_impl(pplx::details::_Task_impl_base *a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::~_Task_impl(a1);
}


int __fastcall pplx::task_from_result<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r7@1
  void *v7; // r0@3
  unsigned int *v8; // r0@5
  unsigned int v9; // r1@7
  int v10; // r0@10
  unsigned int *v11; // r0@11
  unsigned int v12; // r1@13
  int v13; // r0@16
  unsigned int *v14; // r1@17
  unsigned int v15; // r2@18
  __int16 v16; // r0@20
  int v17; // r0@22
  unsigned int *v18; // r1@23
  unsigned int v19; // r2@24
  int result; // r0@27
  int v21; // r4@27
  unsigned int *v22; // r1@28
  unsigned int *v23; // r5@34
  int v24; // r4@41
  unsigned int *v25; // r1@42
  unsigned int *v26; // r5@48
  int v27; // r4@55
  unsigned int *v28; // r1@56
  unsigned int *v29; // r5@62
  unsigned int *v30; // r2@70
  signed int v31; // r1@72
  int v32; // [sp+0h] [bp-A0h]@10
  int v33; // [sp+4h] [bp-9Ch]@10
  int v34; // [sp+8h] [bp-98h]@16
  int v35; // [sp+Ch] [bp-94h]@20
  char v36; // [sp+14h] [bp-8Ch]@20
  int v37; // [sp+18h] [bp-88h]@20
  void *ptr; // [sp+1Ch] [bp-84h]@20
  int v39; // [sp+20h] [bp-80h]@20
  int v40; // [sp+24h] [bp-7Ch]@20
  char v41; // [sp+28h] [bp-78h]@20
  char v42; // [sp+29h] [bp-77h]@20
  int v43; // [sp+2Ch] [bp-74h]@4
  int v44; // [sp+30h] [bp-70h]@4
  char v45; // [sp+34h] [bp-6Ch]@3
  int v46; // [sp+7Ch] [bp-24h]@3
  int v47; // [sp+80h] [bp-20h]@1
  int v48; // [sp+84h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = 0;
  v47 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details27_Task_completion_event_implIN4xbox8services16xbox_live_resultINS8_13title_storage34title_storage_blob_metadata_resultEEEEESaISD_EJEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(&v48);
  if ( v48 )
    v6 = (*(int (**)(void))(*(_DWORD *)v48 + 16))();
  v47 = v6;
  j_xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>::xbox_live_result(
    (xbox::services::title_storage::title_storage_blob_metadata_result *)&v45,
    v5);
  j_pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>::set(
    (void ***)&v47,
    (int)&v45);
  v7 = (void *)(v46 - 12);
  if ( (int *)(v46 - 12) != &dword_28898C0 )
  {
    v30 = (unsigned int *)(v46 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
    }
    else
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  j_xbox::services::title_storage::title_storage_blob_metadata_result::~title_storage_blob_metadata_result((xbox::services::title_storage::title_storage_blob_metadata_result *)&v45);
  v43 = v47;
  v44 = v48;
    v8 = (unsigned int *)(v48 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
      ++*v8;
  v32 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  v33 = v10;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  v34 = *(_DWORD *)(v4 + 8);
  v13 = *(_DWORD *)(v4 + 12);
  if ( v13 )
    v14 = (unsigned int *)(v13 + 4);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  v35 = v13;
  v39 = 0;
  v40 = 0;
  v37 = 0;
  ptr = 0;
  v36 = 0;
  v16 = *(_WORD *)(v4 + 40);
  v41 = *(_WORD *)(v4 + 40);
  v42 = HIBYTE(v16);
  j_pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::title_storage::title_storage_blob_metadata_result>>>(
    v3,
    (int)&v43,
    (int)&v32);
  if ( ptr )
    j_operator delete(ptr);
  v17 = v35;
  if ( v35 )
    v18 = (unsigned int *)(v35 + 4);
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v17 + 8))(v17);
  result = 0;
  v35 = 0;
  v21 = v33;
  if ( v33 )
    v22 = (unsigned int *)(v33 + 4);
        result = __ldrex(v22);
      while ( __strex(result - 1, v22) );
      result = (*v22)--;
    if ( result == 1 )
      v23 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v23);
        while ( __strex(result - 1, v23) );
      }
      else
        result = (*v23)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        result = __ldrex(v25);
      while ( __strex(result - 1, v25) );
      result = (*v25)--;
      v26 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          result = __ldrex(v26);
        while ( __strex(result - 1, v26) );
        result = (*v26)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v27 = v48;
    v28 = (unsigned int *)(v48 + 4);
        result = __ldrex(v28);
      while ( __strex(result - 1, v28) );
      result = (*v28)--;
      v29 = (unsigned int *)(v27 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
          result = __ldrex(v29);
        while ( __strex(result - 1, v29) );
        result = (*v29)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r0@2
  int v10; // r0@3
  int v11; // r9@5
  unsigned int *v12; // r0@7
  unsigned int v13; // r1@9
  bool v14; // zf@11
  signed __int64 v15; // r6@16
  int v16; // r8@18
  unsigned int *v17; // r1@19
  unsigned int v18; // r0@21
  unsigned int *v19; // r7@25
  unsigned int v20; // r0@27
  int v21; // r1@35
  signed int result; // r0@39
  int v23; // r0@41
  _DWORD *v24; // r5@46
  __int64 v25; // r0@46
  _DWORD *v26; // r4@46
  _DWORD *v27; // r0@46
  __int64 v28; // r2@46
  _DWORD *v29; // [sp+4h] [bp-2Ch]@46
  __int64 v30; // [sp+Ch] [bp-24h]@46

  v5 = a1;
  v6 = (pthread_mutex_t *)(a1 + 20);
  v7 = a3;
  v8 = a2;
  if ( &pthread_create )
  {
    v9 = j_pthread_mutex_lock_1(v6);
    if ( v9 )
      sub_21E5E14(v9);
  }
  v10 = *(_DWORD *)(v5 + 4);
  if ( v7 != 1 )
    v14 = v10 == 3;
    if ( v10 != 3 )
      v14 = *(_DWORD *)(v5 + 4) == 4;
    if ( !v14 && (*(_DWORD *)(v5 + 4) != 2 || v8 == 1) )
      goto LABEL_33;
LABEL_16:
    v15 = 4294967297LL;
    goto LABEL_36;
  if ( v10 == 4 )
    goto LABEL_16;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)a5;
  v11 = *(_DWORD *)(a5 + 4);
  if ( v11 != *(_DWORD *)(v5 + 16) )
    if ( v11 )
    {
      v12 = (unsigned int *)(v11 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 + 1, v12) );
      }
      else
        ++*v12;
    }
    v16 = *(_DWORD *)(v5 + 16);
    if ( v16 )
      v17 = (unsigned int *)(v16 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
        if ( &pthread_create )
        {
          __dmb();
          do
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
        }
        else
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    *(_DWORD *)(v5 + 16) = v11;
LABEL_33:
  if ( v8 == 1 )
    v15 = 0LL;
    *(_DWORD *)(v5 + 4) = 4;
  else
    v15 = 0x100000000LL;
    v21 = *(_DWORD *)(v5 + 4);
    *(_DWORD *)(v5 + 4) = 2;
LABEL_36:
    j_pthread_mutex_unlock_1(v6);
  if ( v15 )
    result = v15 ^ 1;
    if ( &pthread_create )
      v23 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v5 + 36));
      if ( v23 )
        sub_21E5E14(v23);
      *(_BYTE *)(v5 + 44) = 1;
      sub_21E03D8((pthread_cond_t *)(v5 + 40));
        j_pthread_mutex_unlock_1((pthread_mutex_t *)(v5 + 36));
    else
    if ( *(_DWORD *)(v5 + 32) )
      v24 = j_operator new(4u);
      *v24 = v5;
      v29 = v24;
      LODWORD(v25) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      HIDWORD(v25) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      v30 = v25;
      v26 = j_operator new(0x10u);
      v26[2] = 0;
      v27 = j_operator new(4u);
      HIDWORD(v28) = std::_Function_handler<void ()(void),pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_invoke;
      LODWORD(v28) = std::_Function_base::_Base_manager<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::xbox_shell_sign_in_status>>::_CancelAndRunContinuations(bool,bool,bool,std::shared_ptr<pplx::details::_ExceptionHolder> const&)::{lambda(void)#1}>::_M_manager;
      *v27 = *v24;
      *v26 = v27;
      *((_QWORD *)v26 + 1) = v28;
      j_pplx::details::_TaskCollectionImpl::_RunTask(
        (int (__fastcall *)(int))pplx::details::_TaskProcThunk::_Bridge,
        (int)v26,
        16);
      if ( (_DWORD)v30 )
        ((void (*)(void))v30)();
    result = 1;
  return result;
}


xbox::services::game_server_platform::game_server_ticket_status *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::get(xbox::services::game_server_platform::game_server_ticket_status *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::game_server_platform::game_server_ticket_status *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int *__fastcall pplx::task<std::string>::task<pplx::task_completion_event<std::string>>(int a1, int a2, int a3)
{
  int v3; // lr@0
  int *v4; // r9@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r10@1
  int v8; // r6@1
  unsigned int *v9; // r0@2
  unsigned int v10; // r1@4
  unsigned int v11; // r1@9
  unsigned int *v12; // r4@13
  unsigned int v13; // r0@15
  int v14; // r5@20
  unsigned int *v15; // r0@21
  unsigned int v16; // r1@22
  int v17; // r1@24
  int v18; // r0@24
  unsigned int *v19; // r0@27
  unsigned int v20; // r2@29
  int v21; // r7@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r0@35
  unsigned int *v24; // r4@39
  unsigned int v25; // r0@41
  unsigned int *v26; // r0@47
  unsigned int v27; // r1@48
  void *v28; // r4@52
  int v29; // r1@52 OVERLAPPED
  int v30; // r2@52 OVERLAPPED
  unsigned int v31; // r7@52
  int v32; // r6@55
  __int64 v33; // r0@59
  int v34; // r5@61
  unsigned int *v35; // r0@62
  unsigned int v36; // r1@64
  unsigned int *v37; // r1@68
  unsigned int v38; // r0@70
  unsigned int *v39; // r4@74
  unsigned int v40; // r0@76
  int v42; // [sp+0h] [bp-40h]@52
  void *ptr; // [sp+4h] [bp-3Ch]@52
  char *v44; // [sp+8h] [bp-38h]@52
  char *v45; // [sp+Ch] [bp-34h]@52
  int v46; // [sp+14h] [bp-2Ch]@24
  int v47; // [sp+18h] [bp-28h]@24
  int v48; // [sp+1Ch] [bp-24h]@32

  v4 = (int *)a1;
  v5 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = v3;
  v8 = a3;
  if ( v6 )
  {
    v9 = (unsigned int *)(v6 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 + 1, v9) );
    }
    else
      ++*v9;
        v11 = __ldrex(v9);
      while ( __strex(v11 - 1, v9) );
      v11 = (*v9)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  v14 = *(_DWORD *)(v8 + 12);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  v46 = *(_DWORD *)v8;
  v17 = v14;
  v18 = *(_DWORD *)(v8 + 4);
  v47 = *(_DWORD *)(v8 + 4);
  if ( !v14 )
    v17 = 2;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
      ++*v19;
  v48 = *(_DWORD *)(v8 + 8);
  pplx::task<std::string>::_CreateImpl((int)v4, v17, (int)&v46);
  v21 = v47;
  if ( v47 )
    v22 = (unsigned int *)(v47 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
    v26 = (unsigned int *)(v14 + 4);
      v27 = __ldrex(v26);
    while ( __strex(v27 - 1, v26) );
    if ( v27 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
  if ( *(_BYTE *)(v8 + 20) )
    v42 = *(_DWORD *)(v8 + 24);
    v28 = 0;
    *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = 0;
    v44 = 0;
    v45 = 0;
    v31 = (v30 - v29) >> 2;
    if ( v31 )
      if ( v31 >= 0x40000000 )
        sub_119C874();
      v28 = operator new(v30 - v29);
      *(_QWORD *)&v29 = *(_QWORD *)(v8 + 28);
    ptr = v28;
    v44 = (char *)v28;
    v45 = (char *)v28 + 4 * v31;
    v32 = (v30 - v29) >> 2;
    if ( 0 != v32 )
      _aeabi_memmove4(v28, v29);
    v44 = (char *)v28 + 4 * v32;
    v7 = v42;
  else
    v42 = v3;
  LODWORD(v33) = *v4;
  *(_DWORD *)(v33 + 60) = v7;
  LODWORD(v33) = v33 + 64;
  HIDWORD(v33) = (unsigned int)&v42 | 4;
  std::vector<void *,std::allocator<void *>>::operator=(v33);
  if ( ptr )
    operator delete(ptr);
  v34 = *(_DWORD *)(v5 + 4);
  if ( v34 )
    v35 = (unsigned int *)(v34 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 + 1, v35) );
      ++*v35;
  pplx::task_completion_event<std::string>::_RegisterTask((_DWORD *)v5, v4);
    v37 = (unsigned int *)(v34 + 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 == 1 )
      v39 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  return v4;
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_metadata_result>>::~_Task_impl(a1);
}


int (**__fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>::_FinalizeAndRunContinuations(
           a1,
           a2);
}


void __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::~_Task_impl(int a1)
{
  pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::nsal>>::~_Task_impl(a1);
}


int __fastcall std::_Function_base::_Base_manager<std::function<std::error_code ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::error_code>(std::function const&<std::error_code ()(void)>)::{lambda(unsigned char)#1}>::_M_manager(void ***a1, int *a2, int a3)
{
  int *v3; // r6@1
  void ***v4; // r4@1
  void **v5; // r0@2
  int result; // r0@4
  void **v7; // r0@5
  int v8; // r6@5
  void **v9; // r5@5
  void (__fastcall *v10)(void **, int, signed int); // r3@5
  void **v11; // r4@8
  void (__fastcall *v12)(void **, void **, signed int); // r3@9

  v3 = a2;
  v4 = a1;
  switch ( a3 )
  {
    case 0:
      v5 = &`typeinfo for'std::function<std::error_code ()(unsigned char)> pplx::details::_MakeUnitToTFunc<std::error_code>(std::function const&<std::error_code ()(void)>)::{lambda(unsigned char)#1};
      goto LABEL_4;
    case 1:
      v5 = (void **)*a2;
LABEL_4:
      *v4 = v5;
      return 0;
    case 2:
      v7 = (void **)j_operator new(0x10u);
      v8 = *v3;
      v9 = v7;
      v7[2] = 0;
      v10 = *(void (__fastcall **)(void **, int, signed int))(v8 + 8);
      if ( v10 )
      {
        v10(v7, v8, 2);
        v9[3] = *(void **)(v8 + 12);
        v9[2] = *(void **)(v8 + 8);
      }
      result = 0;
      *v4 = v9;
      return result;
    case 3:
      v11 = *a1;
      if ( *a1 )
        v12 = (void (__fastcall *)(void **, void **, signed int))v11[2];
        if ( v12 )
          v12(v11, v11, 3);
        j_operator delete(v11);
      break;
    default:
  }
  return 0;
}


signed int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::contextual_search::contextual_search_game_clips_result>>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


signed int __fastcall pplx::task_completion_event<web::websockets::client::websocket_incoming_message>::_CancelInternal(void ***a1)
{
  void ***v1; // r6@1
  void **v2; // r0@1
  signed int v3; // r10@2
  pthread_mutex_t *v4; // r7@3
  int v5; // r0@4
  _DWORD *v6; // r11@7
  _DWORD *v7; // r8@7
  void **v8; // r0@8
  _DWORD *v9; // r5@13
  int v10; // ST00_4@14
  _DWORD *v11; // r5@18
  int v12; // r6@19
  unsigned int *v13; // r1@20
  unsigned int v14; // r0@22
  unsigned int *v15; // r4@26
  unsigned int v16; // r0@28

  v1 = a1;
  v2 = *a1;
  if ( *((_BYTE *)v2 + 41) )
  {
    v3 = 0;
  }
  else
    v4 = (pthread_mutex_t *)(v2 + 3);
    if ( !&pthread_create )
      goto LABEL_39;
    v5 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v2 + 3));
    if ( v5 )
      sub_21E5E14(v5);
    v2 = *v1;
    if ( *((_BYTE *)*v1 + 41) )
    {
      v6 = 0;
      v7 = 0;
      v3 = 0;
    }
    else
LABEL_39:
      v3 = 1;
      *((_BYTE *)v2 + 41) = 1;
      v8 = *v1;
      v7 = **v1;
      *v8 = 0;
      v6 = v8[1];
      v8[1] = 0;
      v8[2] = 0;
    if ( &pthread_create )
      j_pthread_mutex_unlock_1(v4);
    if ( v7 != v6 && v3 == 1 )
      v9 = v7;
      if ( (*v1)[8] )
      {
        do
        {
          v10 = (int)(*v1 + 8);
          (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*v9 + 8))(*v9);
          v9 += 2;
        }
        while ( v6 != v9 );
      }
      else
    if ( v7 != v6 )
      v11 = v7;
      do
        v12 = v11[1];
        if ( v12 )
          v13 = (unsigned int *)(v12 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v14 = __ldrex(v13);
            while ( __strex(v14 - 1, v13) );
          }
          else
            v14 = (*v13)--;
          if ( v14 == 1 )
            v15 = (unsigned int *)(v12 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
            if ( &pthread_create )
            {
              __dmb();
              do
                v16 = __ldrex(v15);
              while ( __strex(v16 - 1, v15) );
            }
            else
              v16 = (*v15)--;
            if ( v16 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
        v11 += 2;
      while ( v11 != v6 );
    if ( v7 )
      j_operator delete(v7);
  return v3;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  char v17; // [sp+8h] [bp-58h]@7
  int v18; // [sp+40h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_1((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 80) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 88) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>::xbox_live_result(
      (xbox::services::matchmaking::match_ticket_details_response *)&v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_FinalizeAndRunContinuations(
      v7,
      (int)&v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::matchmaking::match_ticket_details_response::~match_ticket_details_response((xbox::services::matchmaking::match_ticket_details_response *)&v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_1(v5);
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[14]; // [sp+8h] [bp-50h]@7
  int v18; // [sp+40h] [bp-18h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 76) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 84) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>::xbox_live_result(
      (xbox::services::game_server_platform::game_server_ticket_status *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::game_server_platform::game_server_ticket_status::~game_server_ticket_status((xbox::services::game_server_platform::game_server_ticket_status *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


int __fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::_CreateImpl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int result; // r0@7
  int v9; // r1@8
  int v10; // r6@10
  unsigned int *v11; // r1@11
  unsigned int *v12; // r7@17
  int v13; // r6@24
  unsigned int *v14; // r1@25
  unsigned int *v15; // r7@31
  int v16; // r6@38
  unsigned int *v17; // r1@39
  unsigned int *v18; // r7@45
  int v19; // r0@53
  int v20; // r1@53
  unsigned int *v21; // r1@54
  unsigned int v22; // r2@56
  unsigned int *v23; // r2@60
  unsigned int v24; // r1@62
  int v25; // [sp+8h] [bp-38h]@53
  int v26; // [sp+Ch] [bp-34h]@53
  int v27; // [sp+10h] [bp-30h]@1
  int v28; // [sp+14h] [bp-2Ch]@1
  int v29; // [sp+18h] [bp-28h]@7
  int v30; // [sp+1Ch] [bp-24h]@7
  int v31; // [sp+20h] [bp-20h]@7
  int v32; // [sp+24h] [bp-1Ch]@7
  char v33; // [sp+28h] [bp-18h]@7

  v3 = a1;
  v27 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v28 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v29 = *(_DWORD *)(a3 + 8);
  v32 = v4;
  v30 = 0;
  j_j__ZNSt14__shared_countILN9__gnu_cxx12_Lock_policyE2EEC2IN4pplx7details10_Task_implIN4xbox8services16xbox_live_resultINS8_6system23sign_in_and_auth_resultEEEEESaISD_EJRPNS5_23_CancellationTokenStateERNS4_13scheduler_ptrEEEESt19_Sp_make_shared_tagPT_RKT0_DpOT1_(
    &v31,
    0,
    (int)&v33,
    &v32,
    (int)&v27);
  result = v31;
  if ( v31 )
    v9 = (*(int (**)(void))(*(_DWORD *)v31 + 16))();
    result = v31;
  else
    v9 = 0;
  v31 = 0;
  *(_DWORD *)v3 = v9;
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = result;
  if ( v10 )
    v11 = (unsigned int *)(v10 + 4);
        result = __ldrex(v11);
      while ( __strex(result - 1, v11) );
      result = (*v11)--;
    if ( result == 1 )
      v12 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v12);
        while ( __strex(result - 1, v12) );
      }
      else
        result = (*v12)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v13 = v31;
    v14 = (unsigned int *)(v31 + 4);
        result = __ldrex(v14);
      while ( __strex(result - 1, v14) );
      result = (*v14)--;
      v15 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          result = __ldrex(v15);
        while ( __strex(result - 1, v15) );
        result = (*v15)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v16 = v28;
  if ( v28 )
    v17 = (unsigned int *)(v28 + 4);
        result = __ldrex(v17);
      while ( __strex(result - 1, v17) );
      result = (*v17)--;
      v18 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = __ldrex(v18);
        while ( __strex(result - 1, v18) );
        result = (*v18)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v4 != 2 )
    v19 = *(_DWORD *)v3;
    v25 = *(_DWORD *)v3;
    v20 = *(_DWORD *)(v3 + 4);
    v26 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 8);
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
        ++*v21;
    j_pplx::details::_Task_impl_base::_RegisterCancellation(v19, (unsigned __int64 *)&v25);
    result = v26;
    if ( v26 )
      v23 = (unsigned int *)(v26 + 8);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::token_and_signature_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  void (__fastcall *v4)(char *); // r3@1
  int (*v5)(void); // r7@1
  _DWORD *v6; // r6@3
  __int64 v7; // r0@5
  char v9; // [sp+4h] [bp-24h]@2
  int (*v10)(void); // [sp+Ch] [bp-1Ch]@1
  int v11; // [sp+10h] [bp-18h]@2

  v2 = a2;
  v10 = 0;
  v3 = a1;
  v4 = *(void (__fastcall **)(char *))(a2 + 8);
  v5 = 0;
  if ( v4 )
  {
    v4(&v9);
    v11 = *(_DWORD *)(v2 + 12);
    v5 = *(int (**)(void))(v2 + 8);
    v10 = *(int (**)(void))(v2 + 8);
  }
  *(_DWORD *)(v3 + 8) = 0;
  v6 = operator new(0x10u);
  v6[2] = 0;
  if ( v5 )
    ((void (__fastcall *)(_DWORD *, char *, signed int))v5)(v6, &v9, 2);
    v5 = v10;
    v6[3] = v11;
    v6[2] = v5;
  *(_DWORD *)v3 = v6;
  HIDWORD(v7) = std::_Function_handler<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>),std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)#1}>::_M_invoke;
  LODWORD(v7) = std::_Function_base::_Base_manager<std::function<unsigned char ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)> pplx::details::_MakeTToUnitFunc<xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>>(std::function const&<void ()(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)>)::{lambda(xbox::services::xbox_live_result<xbox::services::social::xbox_social_relationship_result>)#1}>::_M_manager;
  *(_QWORD *)(v3 + 8) = v7;
    LODWORD(v7) = v5();
  return v7;
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::team_info>>>(
           a1,
           a2,
           a3);
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_RegisterTask(
           a1,
           a2);
}


int __fastcall pplx::task_completion_event<int>::~task_completion_event(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 4);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  return v1;
}


signed int __fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::set(void ***a1, int a2)
{
  void ***v2; // r5@1
  int v3; // r4@1
  void **v4; // r7@1
  signed int v5; // r9@1
  unsigned int v6; // r0@1
  pthread_mutex_t *v7; // r6@3
  int v8; // r0@4
  void **v9; // r0@8
  int *v10; // r8@8
  int *v11; // r11@8
  int *v12; // r9@11
  unsigned int *v13; // r2@15
  signed int v14; // r1@17
  unsigned int *v15; // r2@19
  signed int v16; // r1@21
  int v17; // r7@30
  void *v18; // r0@32
  void *v19; // r0@33
  void **v20; // r0@35
  void *v21; // r5@36
  unsigned int *v22; // r1@37
  unsigned int v23; // r0@39
  unsigned int *v24; // r6@43
  unsigned int v25; // r0@45
  int *v26; // r6@52
  int v27; // r7@53
  unsigned int *v28; // r1@54
  unsigned int v29; // r0@56
  unsigned int *v30; // r5@60
  unsigned int v31; // r0@62
  char v33; // [sp+Ch] [bp-3Ch]@32
  int v34; // [sp+10h] [bp-38h]@19
  int v35; // [sp+1Ch] [bp-2Ch]@15

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  v5 = 0;
  v6 = *((_WORD *)*a1 + 22);
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v7 = (pthread_mutex_t *)(v4 + 3);
    if ( &pthread_create )
    {
      v8 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 3));
      if ( v8 )
        sub_21E5E14(v8);
      v4 = *v2;
      v6 = *((_WORD *)*v2 + 22);
    }
    if ( v6 > 0xFF || (_BYTE)v6 )
      if ( &pthread_create )
        j_pthread_mutex_unlock_0(v7);
      v10 = 0;
      v11 = 0;
      v5 = 0;
    else
      v4[4] = *(void **)v3;
      EntityInteraction::setInteractText((int *)v4 + 5, (int *)(v3 + 4));
      *((_QWORD *)v4 + 3) = *(_QWORD *)(v3 + 8);
      EntityInteraction::setInteractText((int *)v4 + 8, (int *)(v3 + 16));
      *((_BYTE *)*v2 + 44) = 1;
      v9 = *v2;
      v10 = (int *)**v2;
      *v9 = 0;
      v11 = (int *)v9[1];
      v9[1] = 0;
      v9[2] = 0;
      if ( v10 != v11 )
      {
        v12 = v10;
        do
        {
          v17 = *v12;
          if ( *(_DWORD *)(*v12 + 4) == 2 )
          {
            (*(void (__fastcall **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)v17 + 8))(v17, 1, 0, 0);
          }
          else
            j_xbox::services::xbox_live_result<xbox::services::system::verify_string_result>::xbox_live_result(
              (xbox::services::system::verify_string_result *)&v33,
              (int)(*v2 + 4));
            j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::system::verify_string_result>>::_FinalizeAndRunContinuations(
              v17,
              (int)&v33);
            v18 = (void *)(v35 - 12);
            if ( (int *)(v35 - 12) != &dword_28898C0 )
            {
              v13 = (unsigned int *)(v35 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v14 = __ldrex(v13);
                while ( __strex(v14 - 1, v13) );
              }
              else
                v14 = (*v13)--;
              if ( v14 <= 0 )
                j_j_j_j__ZdlPv_9(v18);
            }
            v19 = (void *)(v34 - 12);
            if ( (int *)(v34 - 12) != &dword_28898C0 )
              v15 = (unsigned int *)(v34 - 4);
                  v16 = __ldrex(v15);
                while ( __strex(v16 - 1, v15) );
                v16 = (*v15)--;
              if ( v16 <= 0 )
                j_j_j_j__ZdlPv_9(v19);
          v12 += 2;
        }
        while ( v12 != v11 );
      }
      v20 = *v2;
      if ( (*v2)[9] )
        v20[9] = 0;
        v21 = v20[10];
        v20[10] = 0;
        if ( v21 )
          v22 = (unsigned int *)((char *)v21 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v23 = __ldrex(v22);
            while ( __strex(v23 - 1, v22) );
            v23 = (*v22)--;
          if ( v23 == 1 )
            v24 = (unsigned int *)((char *)v21 + 8);
            (*(void (__fastcall **)(void *))(*(_DWORD *)v21 + 8))(v21);
            if ( &pthread_create )
              __dmb();
              do
                v25 = __ldrex(v24);
              while ( __strex(v25 - 1, v24) );
            else
              v25 = (*v24)--;
            if ( v25 == 1 )
              (*(void (__fastcall **)(void *))(*(_DWORD *)v21 + 12))(v21);
      v5 = 1;
    if ( v10 != v11 )
      v26 = v10;
      do
        v27 = v26[1];
        if ( v27 )
          v28 = (unsigned int *)(v27 + 4);
              v29 = __ldrex(v28);
            while ( __strex(v29 - 1, v28) );
            v29 = (*v28)--;
          if ( v29 == 1 )
            v30 = (unsigned int *)(v27 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
                v31 = __ldrex(v30);
              while ( __strex(v31 - 1, v30) );
              v31 = (*v30)--;
            if ( v31 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
        v26 += 2;
      while ( v26 != v11 );
    if ( v10 )
      j_operator delete(v10);
  }
  return v5;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::game_server_ticket_status>>::_RegisterTask(
           a1,
           a2);
}


int (**__fastcall pplx::details::_Task_impl<web::json::value>::_FinalizeAndRunContinuations(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r4@1
  int v3; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@4
  int v5; // r0@8
  int v6; // r1@12
  int v7; // r5@13

  v2 = a1;
  web::json::value::operator=((int *)(a1 + 80), a2);
  if ( &pthread_create )
  {
    v3 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
    if ( v3 )
      sub_119CCFC(v3);
  }
  if ( *(_DWORD *)(v2 + 4) == 4 )
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20));
  else
    *(_DWORD *)(v2 + 4) = 3;
    if ( &pthread_create && (pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20)), &pthread_create) )
    {
      v5 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 36));
      if ( v5 )
        sub_119CCFC(v5);
      *(_BYTE *)(v2 + 44) = 1;
      sub_119E3C8((pthread_cond_t *)(v2 + 40));
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)(v2 + 36));
    }
    else
    v6 = *(_DWORD *)(v2 + 32);
    result = 0;
    *(_DWORD *)(v2 + 32) = 0;
    if ( v6 )
      do
      {
        v7 = *(_DWORD *)(v6 + 4);
        result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pplx::details::_Task_impl_base::_RunContinuation(
                                                                                             v2,
                                                                                             v6);
        v6 = v7;
      }
      while ( v7 );
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  return pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::game_server_platform::cluster_result>>::_RegisterTask(
           a1,
           a2);
}


unsigned int __fastcall pplx::details::do_while(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r4@1
  void (__fastcall *v4)(char *, int, signed int); // r3@2
  unsigned int *v5; // r0@5
  unsigned int v6; // r1@7
  unsigned int result; // r0@10
  int v8; // r4@10
  unsigned int *v9; // r1@11
  unsigned int *v10; // r5@17
  int v11; // r4@26
  unsigned int *v12; // r1@27
  unsigned int *v13; // r5@33
  char v14; // [sp+4h] [bp-34h]@3
  int (*v15)(void); // [sp+Ch] [bp-2Ch]@2
  int v16; // [sp+10h] [bp-28h]@3
  int v17; // [sp+14h] [bp-24h]@4
  int v18; // [sp+18h] [bp-20h]@4
  int v19; // [sp+1Ch] [bp-1Ch]@2
  int v20; // [sp+20h] [bp-18h]@4

  v2 = a2;
  v3 = a1;
  if ( !*(_DWORD *)(a2 + 8) )
    sub_119C8E4();
  (*(void (__fastcall **)(int *))(a2 + 12))(&v19);
  v15 = 0;
  v4 = *(void (__fastcall **)(char *, int, signed int))(v2 + 8);
  if ( v4 )
  {
    v4(&v14, v2, 2);
    v16 = *(_DWORD *)(v2 + 12);
    v15 = *(int (**)(void))(v2 + 8);
  }
  v17 = v19;
  v18 = v20;
  if ( v20 )
    v5 = (unsigned int *)(v20 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  result = pplx::task<bool>::then<pplx::details::do_while(std::function<pplx::task<bool> ()(void)>)::{lambda(bool)#1}>(
             v3,
             &v19,
             (int)&v14);
  v8 = v18;
  if ( v18 )
    v9 = (unsigned int *)(v18 + 4);
        result = __ldrex(v9);
      while ( __strex(result - 1, v9) );
      result = (*v9)--;
    if ( result == 1 )
      v10 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v10);
        while ( __strex(result - 1, v10) );
      }
      else
        result = (*v10)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  if ( v15 )
    result = v15();
  v11 = v20;
    v12 = (unsigned int *)(v20 + 4);
        result = __ldrex(v12);
      while ( __strex(result - 1, v12) );
      result = (*v12)--;
      v13 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          result = __ldrex(v13);
        while ( __strex(result - 1, v13) );
        result = (*v13)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  return result;
}


unsigned int __fastcall pplx::details::_TaskCollectionImpl::_RunTask(int (__fastcall *a1)(int), int a2, int a3)
{
  unsigned int result; // r0@2
  int v4; // r4@2
  unsigned int *v5; // r1@3
  unsigned int *v6; // r5@10
  int (***v7)(void); // [sp+0h] [bp-18h]@2
  int v8; // [sp+4h] [bp-14h]@2

  if ( a3 == -1 )
  {
    result = a1(a2);
  }
  else
    pplx::get_ambient_scheduler((pplx *)&v7);
    result = (**v7)();
    v4 = v8;
    if ( v8 )
    {
      v5 = (unsigned int *)(v8 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v5);
        while ( __strex(result - 1, v5) );
      }
      else
        result = (*v5)--;
      if ( result == 1 )
        v6 = (unsigned int *)(v4 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
        if ( &pthread_create )
        {
          __dmb();
          do
            result = __ldrex(v6);
          while ( __strex(result - 1, v6) );
        }
        else
          result = (*v6)--;
        if ( result == 1 )
          result = (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
    }
  return result;
}


int (**__fastcall pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_RegisterTask(int *a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int *v2; // r5@1
  int *v3; // r6@1
  int v4; // r0@1
  pthread_mutex_t *v5; // r4@1
  int v6; // r0@2
  int v7; // r5@7
  void *v8; // r0@7
  int v9; // r1@9 OVERLAPPED
  int v10; // r2@9
  int v11; // r2@10
  unsigned int *v12; // r1@11
  unsigned int v13; // r2@13
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int v17[40]; // [sp+8h] [bp-C0h]@7
  int v18; // [sp+A8h] [bp-20h]@7

  v2 = a2;
  v3 = a1;
  v4 = *a1;
  v5 = (pthread_mutex_t *)(v4 + 12);
  if ( &pthread_create )
  {
    v6 = j_pthread_mutex_lock_0((pthread_mutex_t *)(v4 + 12));
    if ( v6 )
      sub_21E5E14(v6);
    v4 = *v3;
  }
  if ( *(_DWORD *)(v4 + 184) )
    (*(void (__fastcall **)(int, signed int, signed int, signed int))(*(_DWORD *)*v2 + 8))(*v2, 1, 1, 1);
  else if ( *(_BYTE *)(v4 + 192) )
    v7 = *v2;
    j_xbox::services::xbox_live_result<xbox::services::achievements::achievement>::xbox_live_result(
      (xbox::services::achievements::achievement *)v17,
      v4 + 16);
    j_pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>::_FinalizeAndRunContinuations(
      v7,
      v17);
    v8 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
    {
      v15 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    j_xbox::services::achievements::achievement::~achievement((xbox::services::achievements::achievement *)v17);
  else
    *(_QWORD *)&v9 = *(_QWORD *)(v4 + 4);
    if ( v9 == v10 )
      j_std::vector<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>,std::allocator<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>>>>::_M_emplace_back_aux<std::shared_ptr<pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::achievements::achievement>>> const&>(
        (unsigned __int64 *)v4,
        (int)v2);
    else
      *(_DWORD *)v9 = *v2;
      v11 = v2[1];
      *(_DWORD *)(v9 + 4) = v11;
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 + 1, v12) );
        }
        else
          ++*v12;
      *(_DWORD *)(v4 + 4) += 8;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v5);
  return result;
}


signed int __fastcall pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_CancelAndRunContinuations(int a1, int a2, int a3, int a4, int a5)
{
  return pplx::details::_Task_impl<web::websockets::client::websocket_incoming_message>::_CancelAndRunContinuations(
           a1,
           a2,
           a3,
           a4,
           a5);
}


int *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>(int a1, int a2, int a3)
{
  return pplx::task<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>::task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::system::sign_in_and_auth_result>>>(
           a1,
           a2,
           a3);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::user_statistics::user_statistics_result>>>(
           a1,
           a2,
           a3);
}


int __fastcall pplx::details::_Task_completion_event_impl<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::_Task_completion_event_impl(int a1)
{
  int v1; // r4@1
  xbox::services *v2; // r0@1
  int *v3; // r0@1
  int result; // r0@1

  v1 = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  v2 = j_xbox::services::tournaments::tournament::tournament((xbox::services::tournaments::tournament *)(a1 + 16));
  v3 = j_xbox::services::xbox_services_error_code_category(v2);
  *(_DWORD *)(v1 + 160) = 0;
  *(_DWORD *)(v1 + 164) = v3;
  *(_DWORD *)(v1 + 168) = &unk_28898CC;
  result = v1;
  *(_WORD *)(v1 + 184) = 0;
  *(_DWORD *)(v1 + 176) = 0;
  *(_DWORD *)(v1 + 180) = 0;
  return result;
}


int __fastcall pplx::details::_Task_impl<xbox::services::xbox_live_result<xbox::services::matchmaking::match_ticket_details_response>>::_Task_impl(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r3@4
  int v7; // r5@7
  unsigned int *v8; // r1@8
  unsigned int v9; // r0@10
  unsigned int *v10; // r6@14
  unsigned int v11; // r0@16
  xbox::services *v12; // r0@21
  int *v13; // r0@21
  int v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@7

  v3 = a1;
  v15 = *(_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 4);
  v16 = v4;
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v17 = *(_DWORD *)(a3 + 8);
  j_pplx::details::_Task_impl_base::_Task_impl_base(v3, a2, (int)&v15);
  v7 = v16;
  if ( v16 )
    v8 = (unsigned int *)(v16 + 4);
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
      v9 = (*v8)--;
    if ( v9 == 1 )
      v10 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
      }
      else
        v11 = (*v10)--;
      if ( v11 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  *(_DWORD *)v3 = &off_27696AC;
  v12 = j_xbox::services::matchmaking::match_ticket_details_response::match_ticket_details_response((xbox::services::matchmaking::match_ticket_details_response *)(v3 + 80));
  v13 = j_xbox::services::xbox_services_error_code_category(v12);
  *(_DWORD *)(v3 + 128) = 0;
  *(_DWORD *)(v3 + 132) = v13;
  *(_DWORD *)(v3 + 136) = &unk_28898CC;
  return v3;
}


xbox::services::tournaments::tournament *__fastcall pplx::task<xbox::services::xbox_live_result<xbox::services::tournaments::tournament>>::get(xbox::services::tournaments::tournament *a1, pplx::details::_Task_impl_base **a2)
{
  pplx::details::_Task_impl_base **v2; // r5@1
  xbox::services::tournaments::tournament *v3; // r4@1
  char *v5; // r4@4
  int v6; // r3@4
  char *v7; // r0@6

  v2 = a2;
  v3 = a1;
  if ( !*a2 )
  {
    v5 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v5 = &off_26D7A9C;
    sub_21E94B4((void **)v5 + 1, "get() cannot be called on a default constructed task.");
    j_j___cxa_throw_0(
      (int)v5,
      (int)&`typeinfo for'pplx::invalid_operation,
      (int)pplx::invalid_operation::~invalid_operation,
      v6);
  }
  if ( j_pplx::details::_Task_impl_base::_Wait(*a2) == 2 )
    v7 = j_j___cxa_allocate_exception_0(8);
    *(_DWORD *)v7 = &off_26DD7D0;
    *((_DWORD *)v7 + 1) = &unk_28898CC;
      (int)v7,
      (int)&`typeinfo for'pplx::task_canceled,
      (int)pplx::task_canceled::~task_canceled,
      (int)&unk_28898CC);
  return j_xbox::services::xbox_live_result<xbox::services::tournaments::tournament>::xbox_live_result(
           v3,
           (int)*v2 + 80);
}


int *__fastcall pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>(int a1, int a2, int a3)
{
  return pplx::create_task<pplx::task_completion_event<xbox::services::xbox_live_result<xbox::services::achievements::achievements_result>>>(
           a1,
           a2,
           a3);
}
