

char *__fastcall Social::MultiplayerService::setNetworkHandler(Social::MultiplayerService *this, NetworkHandler *a2)
{
  Social::MultiplayerService *v2; // r4@1
  NetworkHandler *v3; // r5@1
  int v4; // r0@1
  int v5; // r0@3

  v2 = this;
  v3 = a2;
  v4 = *((_DWORD *)this + 18);
  if ( v4 )
  {
    (*(void (**)(void))(*(_DWORD *)v4 + 52))();
    UPNPInterface::removeConnectionStateListener(*((_DWORD *)v2 + 19), (int)v2);
  }
  *((_DWORD *)v2 + 17) = v3;
  v5 = NetworkHandler::getConnector(v3);
  *((_DWORD *)v2 + 18) = v5;
  (*(void (**)(void))(*(_DWORD *)v5 + 48))();
  return j_j_j__ZN13UPNPInterface26addConnectionStateListenerEPNS_23ConnectionStateListenerE(
           *((_DWORD *)v2 + 19),
           (int)v2);
}


void __fastcall Social::XboxLiveUserInfo::_processProfiles(int a1, unsigned __int64 *a2, unsigned __int64 **a3)
{
  Social::XboxLiveUserInfo::_processProfiles(a1, a2, a3);
}


unsigned int __fastcall Social::MultiplayerGameInfo::addSupportedConnection(int a1, int *a2, int *a3, int a4)
{
  int v4; // r5@1
  __int64 v5; // kr00_8@1
  unsigned int result; // r0@2
  __int16 v7; // [sp+Ah] [bp-16h]@1
  int v8; // [sp+Ch] [bp-14h]@1

  v4 = a1;
  v8 = a4;
  v7 = 3;
  v5 = *(_QWORD *)(a1 + 4);
  if ( (_DWORD)v5 == HIDWORD(v5) )
  {
    result = std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType,std::string const&,int &,std::string const&>(
               (unsigned __int64 *)a1,
               &v7,
               a3,
               &v8,
               a2);
  }
  else
    Social::GameConnectionInfo::GameConnectionInfo(v5, 3, a3, a4, a2);
    result = *(_DWORD *)(v4 + 4) + 60;
    *(_DWORD *)(v4 + 4) = result;
  return result;
}


int __fastcall Social::XboxLiveUserManager::onSuccessfulSignin(Social::XboxLiveUserManager *this, int a2)
{
  Social::XboxLiveUserManager *v2; // r4@1
  int v3; // r5@1
  __int64 v4; // r0@1
  int v5; // r6@1
  unsigned int *v6; // r1@2
  unsigned int v7; // r0@4
  unsigned int *v8; // r7@8
  unsigned int v9; // r0@10
  int v10; // r6@15
  unsigned int *v11; // r1@16
  unsigned int v12; // r0@18
  unsigned int *v13; // r7@22
  unsigned int v14; // r0@24
  int result; // r0@29
  int v16; // r3@30
  int *v17; // r0@32
  void *v18; // r0@32
  void *v19; // r0@33
  int v20; // r5@34
  unsigned int *v21; // r1@35
  unsigned int v22; // r0@37
  unsigned int *v23; // r6@41
  unsigned int v24; // r0@43
  int *v25; // r0@48
  int *v26; // r0@48
  void *v27; // r0@48
  void *v28; // r0@49
  int v29; // r5@50
  unsigned int *v30; // r1@51
  unsigned int v31; // r0@53
  unsigned int *v32; // r6@57
  unsigned int v33; // r0@59
  void *v34; // r0@64
  void *v35; // r0@65
  int v36; // r5@66
  unsigned int *v37; // r1@67
  unsigned int v38; // r0@69
  unsigned int *v39; // r6@73
  unsigned int v40; // r0@75
  void *v41; // r0@80
  void *v42; // r0@81
  int v43; // r5@82
  unsigned int *v44; // r1@83
  unsigned int v45; // r0@85
  unsigned int *v46; // r6@89
  unsigned int v47; // r0@91
  int v48; // r5@96
  unsigned int *v49; // r1@97
  unsigned int v50; // r0@99
  unsigned int *v51; // r6@103
  unsigned int v52; // r0@105
  void *v53; // r0@110
  int v54; // r3@113
  int v55; // r4@113
  int i; // r5@113
  __int64 v57; // kr00_8@113
  unsigned int *v58; // r2@117
  signed int v59; // r1@119
  unsigned int *v60; // r2@121
  signed int v61; // r1@123
  unsigned int *v62; // r2@125
  signed int v63; // r1@127
  unsigned int *v64; // r2@129
  signed int v65; // r1@131
  unsigned int *v66; // r2@133
  signed int v67; // r1@135
  unsigned int *v68; // r2@137
  signed int v69; // r1@139
  unsigned int *v70; // r2@141
  signed int v71; // r1@143
  unsigned int *v72; // r2@145
  signed int v73; // r1@147
  unsigned int *v74; // r2@149
  signed int v75; // r1@151
  int v76; // [sp+0h] [bp-90h]@113
  void *v77; // [sp+8h] [bp-88h]@111
  void (*v78)(void); // [sp+10h] [bp-80h]@111
  int (*v79)(); // [sp+14h] [bp-7Ch]@111
  int v80; // [sp+1Ch] [bp-74h]@110
  int v81; // [sp+20h] [bp-70h]@48
  int v82; // [sp+24h] [bp-6Ch]@50
  int v83; // [sp+28h] [bp-68h]@48
  int v84; // [sp+2Ch] [bp-64h]@48
  xbox::services::xbox_live_app_config *v85; // [sp+30h] [bp-60h]@48
  int v86; // [sp+34h] [bp-5Ch]@66
  int v87; // [sp+38h] [bp-58h]@48
  int v88; // [sp+3Ch] [bp-54h]@48
  xbox::services::xbox_live_app_config *v89; // [sp+40h] [bp-50h]@48
  int v90; // [sp+44h] [bp-4Ch]@82
  int v91; // [sp+48h] [bp-48h]@48
  int v92; // [sp+4Ch] [bp-44h]@48
  xbox::services::xbox_live_app_config *v93; // [sp+50h] [bp-40h]@48
  int v94; // [sp+54h] [bp-3Ch]@96
  xbox::services::system::xbox_live_user *v95; // [sp+58h] [bp-38h]@32
  int v96; // [sp+5Ch] [bp-34h]@34
  int v97; // [sp+60h] [bp-30h]@32
  int v98; // [sp+64h] [bp-2Ch]@32
  char v99; // [sp+68h] [bp-28h]@1
  int v100; // [sp+6Ch] [bp-24h]@1
  char v101; // [sp+70h] [bp-20h]@1

  v2 = this;
  v3 = a2;
  std::__shared_ptr<xbox::services::xbox_live_context,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<xbox::services::xbox_live_context>,std::shared_ptr<xbox::services::system::xbox_live_user> &>(
    (int)&v99,
    (int)&v101,
    (int)this + 136);
  v4 = *(_QWORD *)&v99;
  *(_DWORD *)&v99 = 0;
  v100 = 0;
  *((_DWORD *)v2 + 36) = v4;
  v5 = *((_DWORD *)v2 + 37);
  *((_DWORD *)v2 + 37) = HIDWORD(v4);
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  }
  v10 = v100;
  if ( v100 )
    v11 = (unsigned int *)(v100 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  result = *((_DWORD *)v2 + 36);
  if ( result )
    Social::XboxLiveUserManager::setLocale(v2);
    MinecraftEventing::onUserSignIn(*((MinecraftEventing **)v2 + 30), v2);
    Social::XboxLiveUserManager::_loadVisitedBiomes(v2);
    v16 = 4;
    if ( v3 )
      v16 = 5;
    MinecraftEventing::fireEventSignInToXboxLive(*((_DWORD *)v2 + 30), (int)v2, 0, v16);
    xbox::services::xbox_live_context::user((int)&v95, *((int **)v2 + 36));
    v17 = (int *)xbox::services::system::xbox_live_user::gamertag(v95);
    sub_119C854(&v97, v17);
    utility::conversions::to_utf8string(&v98, &v97);
    v18 = (void *)(v98 - 12);
    if ( (int *)(v98 - 12) != &dword_28898C0 )
      v58 = (unsigned int *)(v98 - 4);
          v59 = __ldrex(v58);
        while ( __strex(v59 - 1, v58) );
        v59 = (*v58)--;
      if ( v59 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v18);
    v19 = (void *)(v97 - 12);
    if ( (int *)(v97 - 12) != &dword_28898C0 )
      v60 = (unsigned int *)(v97 - 4);
          v61 = __ldrex(v60);
        while ( __strex(v61 - 1, v60) );
        v61 = (*v60)--;
      if ( v61 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v19);
    v20 = v96;
    if ( v96 )
      v21 = (unsigned int *)(v96 + 4);
          v22 = __ldrex(v21);
        while ( __strex(v22 - 1, v21) );
        v22 = (*v21)--;
      if ( v22 == 1 )
        v23 = (unsigned int *)(v20 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
        if ( &pthread_create )
        {
          __dmb();
          do
            v24 = __ldrex(v23);
          while ( __strex(v24 - 1, v23) );
        }
        else
          v24 = (*v23)--;
        if ( v24 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
    xbox::services::xbox_live_context::application_config((xbox::services::xbox_live_context *)&v93, *((int **)v2 + 36));
    xbox::services::xbox_live_app_config::title_id(v93);
    xbox::services::xbox_live_context::application_config((xbox::services::xbox_live_context *)&v89, *((int **)v2 + 36));
    v25 = (int *)xbox::services::xbox_live_app_config::sandbox(v89);
    sub_119C854(&v91, v25);
    utility::conversions::to_utf8string(&v92, &v91);
    xbox::services::xbox_live_context::application_config((xbox::services::xbox_live_context *)&v85, *((int **)v2 + 36));
    v26 = (int *)xbox::services::xbox_live_app_config::environment(v85);
    sub_119C854(&v87, v26);
    utility::conversions::to_utf8string(&v88, &v87);
    xbox::services::xbox_live_context::application_config((xbox::services::xbox_live_context *)&v81, *((int **)v2 + 36));
    xbox::services::xbox_live_app_config::scid((xbox::services::xbox_live_app_config *)&v83, v81);
    utility::conversions::to_utf8string(&v84, &v83);
    v27 = (void *)(v84 - 12);
    if ( (int *)(v84 - 12) != &dword_28898C0 )
      v62 = (unsigned int *)(v84 - 4);
          v63 = __ldrex(v62);
        while ( __strex(v63 - 1, v62) );
        v63 = (*v62)--;
      if ( v63 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v27);
    v28 = (void *)(v83 - 12);
    if ( (int *)(v83 - 12) != &dword_28898C0 )
      v64 = (unsigned int *)(v83 - 4);
          v65 = __ldrex(v64);
        while ( __strex(v65 - 1, v64) );
        v65 = (*v64)--;
      if ( v65 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v28);
    v29 = v82;
    if ( v82 )
      v30 = (unsigned int *)(v82 + 4);
          v31 = __ldrex(v30);
        while ( __strex(v31 - 1, v30) );
        v31 = (*v30)--;
      if ( v31 == 1 )
        v32 = (unsigned int *)(v29 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
            v33 = __ldrex(v32);
          while ( __strex(v33 - 1, v32) );
          v33 = (*v32)--;
        if ( v33 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
    v34 = (void *)(v88 - 12);
    if ( (int *)(v88 - 12) != &dword_28898C0 )
      v66 = (unsigned int *)(v88 - 4);
          v67 = __ldrex(v66);
        while ( __strex(v67 - 1, v66) );
        v67 = (*v66)--;
      if ( v67 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v34);
    v35 = (void *)(v87 - 12);
    if ( (int *)(v87 - 12) != &dword_28898C0 )
      v68 = (unsigned int *)(v87 - 4);
          v69 = __ldrex(v68);
        while ( __strex(v69 - 1, v68) );
        v69 = (*v68)--;
      if ( v69 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v35);
    v36 = v86;
    if ( v86 )
      v37 = (unsigned int *)(v86 + 4);
          v38 = __ldrex(v37);
        while ( __strex(v38 - 1, v37) );
        v38 = (*v37)--;
      if ( v38 == 1 )
        v39 = (unsigned int *)(v36 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v36 + 8))(v36);
            v40 = __ldrex(v39);
          while ( __strex(v40 - 1, v39) );
          v40 = (*v39)--;
        if ( v40 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v36 + 12))(v36);
    v41 = (void *)(v92 - 12);
    if ( (int *)(v92 - 12) != &dword_28898C0 )
      v70 = (unsigned int *)(v92 - 4);
          v71 = __ldrex(v70);
        while ( __strex(v71 - 1, v70) );
        v71 = (*v70)--;
      if ( v71 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v41);
    v42 = (void *)(v91 - 12);
    if ( (int *)(v91 - 12) != &dword_28898C0 )
      v72 = (unsigned int *)(v91 - 4);
          v73 = __ldrex(v72);
        while ( __strex(v73 - 1, v72) );
        v73 = (*v72)--;
      if ( v73 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v42);
    v43 = v90;
    if ( v90 )
      v44 = (unsigned int *)(v90 + 4);
          v45 = __ldrex(v44);
        while ( __strex(v45 - 1, v44) );
        v45 = (*v44)--;
      if ( v45 == 1 )
        v46 = (unsigned int *)(v43 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v43 + 8))(v43);
            v47 = __ldrex(v46);
          while ( __strex(v47 - 1, v46) );
          v47 = (*v46)--;
        if ( v47 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v43 + 12))(v43);
    v48 = v94;
    if ( v94 )
      v49 = (unsigned int *)(v94 + 4);
          v50 = __ldrex(v49);
        while ( __strex(v50 - 1, v49) );
        v50 = (*v49)--;
      if ( v50 == 1 )
        v51 = (unsigned int *)(v48 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v48 + 8))(v48);
            v52 = __ldrex(v51);
          while ( __strex(v52 - 1, v51) );
          v52 = (*v51)--;
        if ( v52 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v48 + 12))(v48);
    sub_119C884((void **)&v80, "Menus");
    Social::XboxLiveUserManager::updateRichPresence((int)v2, &v80);
    v53 = (void *)(v80 - 12);
    if ( (int *)(v80 - 12) != &dword_28898C0 )
      v74 = (unsigned int *)(v80 - 4);
          v75 = __ldrex(v74);
        while ( __strex(v75 - 1, v74) );
        v75 = (*v74)--;
      if ( v75 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v53);
    Social::XboxLiveUserManager::_updateAchievementData(v2);
    v77 = operator new(1u);
    v78 = (void (*)(void))sub_1051CD2;
    v79 = nullsub_5;
    Social::XboxLiveUserManager::RefreshXboxLiveUserInfo((int)v2, (int)&v77);
    if ( v78 )
      v78();
    sub_119D2DC(&v101);
    v54 = (int)v2 + 16;
    *(_QWORD *)v54 = *(_QWORD *)&v101;
    *(_DWORD *)(v54 + 8) = 0;
    *((_DWORD *)v2 + 7) = 0;
    sub_119D2DC(&v76);
    result = v76;
    *((_QWORD *)v2 + 20) = *(_QWORD *)&v76;
    v57 = *((_QWORD *)v2 + 28);
    v55 = *((_QWORD *)v2 + 28) >> 32;
    for ( i = v57; v55 != i; i += 16 )
      if ( !*(_DWORD *)(i + 8) )
        sub_119C8E4();
      result = (*(int (__fastcall **)(int))(i + 12))(i);
  return result;
}


int __fastcall Social::MultiplayerServiceManager::RegisterService(Social::MultiplayerServiceManager *a1, int *a2)
{
  Social::MultiplayerServiceManager *v2; // r4@1
  __int64 v3; // kr00_8@1
  int v4; // r2@2
  int v5; // r0@2

  v2 = a1;
  v3 = *(_QWORD *)((char *)a1 + 4);
  if ( (_DWORD)v3 == HIDWORD(v3) )
  {
    std::vector<std::unique_ptr<Social::MultiplayerService,std::default_delete<Social::MultiplayerService>>,std::allocator<std::unique_ptr<Social::MultiplayerService,std::default_delete<Social::MultiplayerService>>>>::_M_emplace_back_aux<std::unique_ptr<Social::MultiplayerService,std::default_delete<Social::MultiplayerService>>>(
      a1,
      a2);
    v5 = *((_DWORD *)v2 + 1);
  }
  else
    v4 = *a2;
    *a2 = 0;
    *(_DWORD *)v3 = v4;
    v5 = *((_DWORD *)a1 + 1) + 4;
    *((_DWORD *)v2 + 1) = v5;
  return j_j_j__ZN6Social18MultiplayerService17setServiceManagerERNS_25MultiplayerServiceManagerE(
           *(Social::MultiplayerService **)(v5 - 4),
           v2);
}


int __fastcall Social::User::setUserManager(int result, Social::UserManager *a2)
{
  *(_DWORD *)(result + 32) = a2;
  return result;
}


signed int __fastcall Social::MultiplayerServiceManager::needToHandleInvite(_QWORD *a1, int a2)
{
  Social::MultiplayerService **v2; // r5@1 OVERLAPPED
  Social::MultiplayerService **v3; // r6@1 OVERLAPPED
  int v4; // r4@1
  signed int result; // r0@5

  *(_QWORD *)&v2 = *a1;
  v4 = a2;
  if ( v2 == v3 )
  {
LABEL_5:
    result = 0;
  }
  else
    while ( Social::MultiplayerService::getServiceId(*v2) != v4 || !(*(int (**)(void))(*(_DWORD *)*v2 + 64))() )
    {
      ++v2;
      if ( v3 == v2 )
        goto LABEL_5;
    }
    result = 1;
  return result;
}


void __fastcall Social::XboxLiveUserManager::getCurrentGamertag(Social::XboxLiveUserManager *this, int a2)
{
  Social::XboxLiveUserManager::getCurrentGamertag(this, a2);
}


unsigned int __fastcall Social::XboxLiveUserManager::favoriteUser(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  int *v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  void *v11; // r9@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  __int64 v16; // kr00_8@25
  unsigned int *v17; // r1@26
  unsigned int v18; // r2@28
  char *v19; // r0@31
  unsigned int v20; // r0@33
  void (__fastcall *v21)(int *, int, signed int); // r3@36
  int v22; // r5@38
  unsigned int *v23; // r1@39
  unsigned int v24; // r0@41
  unsigned int *v25; // r6@45
  unsigned int v26; // r0@47
  void *v27; // r0@54
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  void *v31; // r6@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int result; // r0@93
  unsigned int *v41; // r2@99
  signed int v42; // r1@101
  void *v43; // [sp+0h] [bp-50h]@31
  int v44; // [sp+4h] [bp-4Ch]@31
  int v45; // [sp+8h] [bp-48h]@36
  int v46; // [sp+Ch] [bp-44h]@37
  int v47; // [sp+10h] [bp-40h]@38
  int v48; // [sp+14h] [bp-3Ch]@36
  int v49; // [sp+18h] [bp-38h]@37
  char v50; // [sp+1Ch] [bp-34h]@31
  void *v51; // [sp+20h] [bp-30h]@38
  char v52; // [sp+24h] [bp-2Ch]@38
  int v53; // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(void **)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_QWORD *)(v3 + 144);
  if ( HIDWORD(v16) )
    v17 = (unsigned int *)(HIDWORD(v16) + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
      ++*v17;
  v19 = xbox::services::xbox_live_context::social_service((xbox::services::xbox_live_context *)v16);
  xbox::services::social::social_service::favorite_user((int)&v50, (int)v19, v6);
  v43 = v11;
  v44 = v5;
      v20 = __ldrex(v12);
    while ( __strex(v20 + 1, v12) );
  sub_119C854(&v45, v6);
  v48 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  if ( v21 )
    v21(&v46, v4, 2);
    v49 = *(_DWORD *)(v4 + 12);
    v48 = *(_DWORD *)(v4 + 8);
  sub_103C598((int)&v52, (int)&v50, (int)&v43, (int)v21, v43, v44, v45, v46, v47, v48, v49, *(int *)&v50, v51);
  v22 = v53;
  if ( v53 )
    v23 = (unsigned int *)(v53 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
      }
      else
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  if ( v48 )
    ((void (*)(void))v48)();
  v27 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v45 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
  v28 = v44;
  if ( v44 )
    v29 = (unsigned int *)(v44 + 8);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 == 1 )
      (*(void (**)(void))(*(_DWORD *)v28 + 12))();
  v31 = v51;
  if ( v51 )
    v32 = (unsigned int *)((char *)v51 + 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      v34 = (unsigned int *)((char *)v31 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
    v36 = (unsigned int *)(HIDWORD(v16) + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(HIDWORD(v16) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 8))(HIDWORD(v16));
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 12))(HIDWORD(v16));
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::unMuteUser(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  int *v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  void *v11; // r9@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  __int64 v16; // kr00_8@25
  unsigned int *v17; // r1@26
  unsigned int v18; // r2@28
  char *v19; // r0@31
  unsigned int v20; // r0@33
  void (__fastcall *v21)(int *, int, signed int); // r3@36
  int v22; // r5@38
  unsigned int *v23; // r1@39
  unsigned int v24; // r0@41
  unsigned int *v25; // r6@45
  unsigned int v26; // r0@47
  void *v27; // r0@54
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  void *v31; // r6@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int result; // r0@93
  unsigned int *v41; // r2@99
  signed int v42; // r1@101
  void *v43; // [sp+0h] [bp-50h]@31
  int v44; // [sp+4h] [bp-4Ch]@31
  int v45; // [sp+8h] [bp-48h]@36
  int v46; // [sp+Ch] [bp-44h]@37
  int v47; // [sp+10h] [bp-40h]@38
  int v48; // [sp+14h] [bp-3Ch]@36
  int v49; // [sp+18h] [bp-38h]@37
  char v50; // [sp+1Ch] [bp-34h]@31
  void *v51; // [sp+20h] [bp-30h]@38
  char v52; // [sp+24h] [bp-2Ch]@38
  int v53; // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(void **)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_QWORD *)(v3 + 144);
  if ( HIDWORD(v16) )
    v17 = (unsigned int *)(HIDWORD(v16) + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
      ++*v17;
  v19 = xbox::services::xbox_live_context::privacy_service((xbox::services::xbox_live_context *)v16);
  xbox::services::privacy::privacy_service::unmute_user((int)&v50, (int)v19, v6);
  v43 = v11;
  v44 = v5;
      v20 = __ldrex(v12);
    while ( __strex(v20 + 1, v12) );
  sub_119C854(&v45, v6);
  v48 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  if ( v21 )
    v21(&v46, v4, 2);
    v49 = *(_DWORD *)(v4 + 12);
    v48 = *(_DWORD *)(v4 + 8);
  sub_1039124((int)&v52, (int)&v50, (int)&v43, (int)v21, v43, v44, v45, v46, v47, v48, v49, *(int *)&v50, v51);
  v22 = v53;
  if ( v53 )
    v23 = (unsigned int *)(v53 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
      }
      else
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  if ( v48 )
    ((void (*)(void))v48)();
  v27 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v45 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
  v28 = v44;
  if ( v44 )
    v29 = (unsigned int *)(v44 + 8);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 == 1 )
      (*(void (**)(void))(*(_DWORD *)v28 + 12))();
  v31 = v51;
  if ( v51 )
    v32 = (unsigned int *)((char *)v51 + 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      v34 = (unsigned int *)((char *)v31 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
    v36 = (unsigned int *)(HIDWORD(v16) + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(HIDWORD(v16) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 8))(HIDWORD(v16));
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 12))(HIDWORD(v16));
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


void __fastcall Social::XboxLiveUserManager::tick(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  unsigned __int8 *v2; // r5@2
  unsigned int v3; // r0@3
  int v4; // r0@5
  __int64 v5; // r1@6
  void (*v6)(void); // r7@6
  void (__fastcall *v7)(_DWORD); // r0@6
  void (*v8)(void); // r3@6
  int v9; // r0@8
  void (*v10)(void); // r3@8
  int v11; // r0@11
  int v12; // r0@14
  xbox::services::system::xbox_live_user *v13; // r0@18
  bool v14; // zf@18
  unsigned int v15; // r0@22
  bool v16; // cf@24
  __int64 v17; // r0@24
  signed int v18; // r3@26
  char v19; // r0@32
  xbox::services::system::xbox_live_user *v20; // r0@33
  bool v21; // zf@33
  unsigned int v22; // r0@37
  signed int v23; // r9@41
  __int64 v24; // r0@41
  bool v25; // zf@43
  bool v26; // nf@43
  unsigned __int8 v27; // vf@43
  signed int v28; // r1@43
  int v29; // r0@48
  signed __int64 v30; // kr00_8@51
  int v31; // r3@51
  int v32; // r2@51
  signed int v33; // r0@51
  int v34; // [sp+0h] [bp-88h]@50
  char v35; // [sp+8h] [bp-80h]@48
  void (*v36)(void); // [sp+10h] [bp-78h]@48
  int v37; // [sp+18h] [bp-70h]@41
  char v38; // [sp+20h] [bp-68h]@31
  __int64 v39; // [sp+28h] [bp-60h]@24
  __int64 v40; // [sp+30h] [bp-58h]@6
  void (*v41)(void); // [sp+38h] [bp-50h]@2
  void (__fastcall *v42)(_DWORD); // [sp+3Ch] [bp-4Ch]@6
  __int64 v43; // [sp+40h] [bp-48h]@6
  void (*v44)(void); // [sp+48h] [bp-40h]@6
  void (__fastcall *v45)(_DWORD); // [sp+4Ch] [bp-3Ch]@6
  char v46; // [sp+50h] [bp-38h]@58
  __int64 v47; // [sp+58h] [bp-30h]@51

  v1 = this;
  if ( *((_BYTE *)this + 256) )
  {
    v2 = (unsigned __int8 *)this + 208;
    v41 = 0;
    while ( 1 )
    {
      do
      {
        do
          v3 = __ldrex(v2);
        while ( __strex(1u, v2) );
        __dmb();
      }
      while ( v3 );
      v4 = *((_DWORD *)v1 + 44);
      if ( *((_DWORD *)v1 + 48) == v4 )
        break;
      LODWORD(v5) = *(_DWORD *)v4;
      HIDWORD(v5) = *(_DWORD *)(v4 + 4);
      v6 = *(void (**)(void))(v4 + 8);
      *(_DWORD *)(v4 + 8) = 0;
      v7 = *(void (__fastcall **)(_DWORD))(v4 + 12);
      v43 = v40;
      v40 = v5;
      v8 = v41;
      v41 = v6;
      v44 = v8;
      v45 = v42;
      v42 = v7;
      if ( v8 )
        ((void (__fastcall *)(__int64 *, __int64 *, signed int))v8)(&v43, &v43, 3);
      v9 = *((_DWORD *)v1 + 44);
      v10 = *(void (**)(void))(v9 + 8);
      if ( v9 == *((_DWORD *)v1 + 46) - 16 )
        if ( v10 )
          v10();
        operator delete(*((void **)v1 + 45));
        v12 = *((_DWORD *)v1 + 47);
        *((_DWORD *)v1 + 47) = v12 + 4;
        v11 = *(_DWORD *)(v12 + 4);
        *((_DWORD *)v1 + 45) = v11;
        *((_DWORD *)v1 + 46) = v11 + 512;
      else
        {
          v9 = *((_DWORD *)v1 + 44);
        }
        v11 = v9 + 16;
      *((_DWORD *)v1 + 44) = v11;
      __dmb();
      *v2 = 0;
      if ( !v41 )
        sub_119C8E4();
      v42(&v40);
    }
    __dmb();
    *((_BYTE *)v1 + 208) = 0;
    v13 = (xbox::services::system::xbox_live_user *)*((_DWORD *)v1 + 34);
    v14 = v13 == 0;
    if ( v13 )
      v14 = *((_DWORD *)v1 + 36) == 0;
    if ( !v14 && xbox::services::system::xbox_live_user::is_signed_in(v13) == 1 )
      v15 = *((_WORD *)v1 + 62);
      if ( v15 <= 0xFF && !(_BYTE)v15 )
        sub_119D2DC(&v39);
        v17 = v39 - *((_QWORD *)v1 + 33);
        v16 = (unsigned int)v17 >= 0xD964B801;
        LODWORD(v17) = 0;
        if ( !v16 )
          LODWORD(v17) = 1;
        v18 = 0;
        if ( SHIDWORD(v17) < 69 )
          v18 = 1;
        if ( HIDWORD(v17) == 69 )
          v18 = v17;
        if ( !v18 )
          Social::XboxLiveUserManager::_updateAchievementData(v1);
          sub_119D2DC(&v38);
          *((_QWORD *)v1 + 33) = *(_QWORD *)&v38;
        v19 = *((_BYTE *)v1 + 336);
        if ( v19 & 1 )
          v20 = (xbox::services::system::xbox_live_user *)*((_DWORD *)v1 + 34);
          v21 = v20 == 0;
          if ( v20 )
            v21 = *((_DWORD *)v1 + 36) == 0;
          if ( !v21 && xbox::services::system::xbox_live_user::is_signed_in(v20) == 1 )
          {
            v22 = *((_WORD *)v1 + 62);
            if ( v22 <= 0xFF && !(_BYTE)v22 )
            {
              Social::XboxLiveUserManager::_sortAchievementData(v1);
              PlayerAchievementData::operator=((int)v1 + 272, (int)v1 + 304);
            }
          }
          PlayerAchievementData::clear((Social::XboxLiveUserManager *)((char *)v1 + 304));
          *((_BYTE *)v1 + 337) = 0;
          __dmb();
          *((_BYTE *)v1 + 336) = 0;
        sub_119D2DC(&v37);
        v23 = 0;
        v24 = *(_QWORD *)&v37 - *((_QWORD *)v1 + 20);
        v16 = (unsigned int)v24 >= 0xF08EB001;
        LODWORD(v24) = 0;
          LODWORD(v24) = 1;
        v27 = __OFSUB__(HIDWORD(v24), 27);
        v25 = HIDWORD(v24) == 27;
        v26 = HIDWORD(v24) - 27 < 0;
        v28 = 0;
        if ( v26 ^ v27 )
          v28 = 1;
        if ( v25 )
          v28 = v24;
        if ( !v28 )
          v29 = *((_DWORD *)v1 + 62);
          v36 = 0;
          Social::XboxLiveUserInfo::_refresh(v29, (int)&v35);
          if ( v36 )
            v36();
          Social::XboxLiveUserManager::_refreshUserData(v1);
          sub_119D2DC(&v34);
          *((_QWORD *)v1 + 20) = *(_QWORD *)&v34;
        sub_119D2DC(&v47);
        v30 = 1000000000LL * *((_DWORD *)v1 + 6);
        v32 = HIDWORD(v30) + 1000000000 * *((_DWORD *)v1 + 7);
        v31 = (unsigned __int64)(v47 - *((_QWORD *)v1 + 2)) >> 32;
        v33 = 0;
        if ( (signed int)v47 - *((_DWORD *)v1 + 4) < (unsigned int)v30 )
          v33 = 1;
        if ( v31 < v32 )
          v23 = 1;
        if ( v31 == v32 )
          v23 = v33;
        if ( !v23 )
          Social::XboxLiveUserManager::refreshMuteList(v1);
          sub_119D2DC(&v46);
          *((_QWORD *)v1 + 2) = *(_QWORD *)&v46;
          *((_DWORD *)v1 + 6) = 300;
          *((_DWORD *)v1 + 7) = 0;
        Social::XboxLiveUserManager::_updateNewXuids(v1);
    if ( v41 )
      v41();
  }
}


void __fastcall Social::RealmsUriListener::onUri(int a1, int a2)
{
  int v2; // r7@1
  unsigned int v3; // r11@1
  __int64 v4; // kr00_8@1
  unsigned int v5; // r5@1
  int v6; // r8@1
  int v7; // r9@2
  _DWORD *v8; // r10@2
  int v9; // r6@2
  _DWORD *v10; // r1@4
  size_t v11; // r2@4
  int v12; // r7@6
  int v13; // r4@8
  const void **v14; // r4@13
  int v15; // r1@17
  unsigned int v16; // r11@22
  unsigned int v17; // r8@22
  int v18; // r9@22
  int v19; // r4@22
  int v20; // r5@23
  _DWORD *v21; // r10@23
  int v22; // r6@23
  _DWORD *v23; // r1@25
  size_t v24; // r2@25
  int v25; // r7@27
  int v26; // r4@29
  void *v27; // r0@34
  unsigned int v28; // r11@35
  unsigned int v29; // r8@35
  int v30; // r9@35
  int v31; // r4@35
  int v32; // r5@36
  _DWORD *v33; // r10@36
  int v34; // r6@36
  _DWORD *v35; // r1@38
  size_t v36; // r2@38
  int v37; // r7@40
  int v38; // r4@42
  void *v39; // r0@47
  unsigned int v40; // r11@48
  unsigned int v41; // r8@48
  int v42; // r9@48
  int v43; // r4@48
  int v44; // r5@49
  _DWORD *v45; // r10@49
  int v46; // r6@49
  _DWORD *v47; // r1@51
  size_t v48; // r2@51
  int v49; // r7@53
  int v50; // r4@55
  void *v51; // r0@60
  unsigned int v52; // r10@61
  unsigned int v53; // r8@61
  int v54; // r11@61
  int v55; // r4@61
  int v56; // r7@62
  _DWORD *v57; // r9@62
  int v58; // r5@62
  _DWORD *v59; // r1@64
  size_t v60; // r2@64
  int v61; // r6@66
  int v62; // r4@68
  void *v63; // r0@84
  unsigned int *v64; // r2@86
  signed int v65; // r1@88
  unsigned int *v66; // r2@90
  signed int v67; // r1@92
  unsigned int *v68; // r2@94
  signed int v69; // r1@96
  unsigned int *v70; // r2@98
  signed int v71; // r1@100
  unsigned int *v72; // r2@102
  signed int v73; // r1@104
  unsigned int *v74; // r2@106
  signed int v75; // r1@108
  unsigned int *v76; // r2@110
  signed int v77; // r1@112
  unsigned int *v78; // r2@114
  signed int v79; // r1@116
  unsigned int *v80; // r2@118
  signed int v81; // r1@120
  int v82; // [sp+0h] [bp-68h]@1
  int v83; // [sp+4h] [bp-64h]@2
  int v84; // [sp+4h] [bp-64h]@23
  int v85; // [sp+4h] [bp-64h]@36
  int v86; // [sp+4h] [bp-64h]@49
  int v87; // [sp+8h] [bp-60h]@84
  void *v88; // [sp+10h] [bp-58h]@61
  int v89; // [sp+14h] [bp-54h]@60
  void *v90; // [sp+1Ch] [bp-4Ch]@48
  int v91; // [sp+20h] [bp-48h]@47
  void *v92; // [sp+28h] [bp-40h]@35
  int v93; // [sp+2Ch] [bp-3Ch]@34
  void *v94; // [sp+34h] [bp-34h]@22
  void *s1; // [sp+3Ch] [bp-2Ch]@1

  v2 = a2;
  v82 = a1;
  sub_119C884(&s1, "env");
  v3 = sub_119C9A4((int *)s1, *((_DWORD *)s1 - 3), -955291385);
  v4 = *(_QWORD *)(v2 + 4);
  v5 = v3 % (unsigned int)(*(_QWORD *)(v2 + 4) >> 32);
  v6 = *(_DWORD *)(v4 + 4 * v5);
  if ( v6 )
  {
    v7 = *(_DWORD *)v6;
    v8 = s1;
    v83 = v2;
    v9 = *(_DWORD *)(*(_DWORD *)v6 + 12);
    while ( 1 )
    {
      if ( v9 == v3 )
      {
        v10 = *(_DWORD **)(v7 + 4);
        v11 = *(v8 - 3);
        if ( v11 == *(v10 - 3) && !memcmp(v8, v10, v11) )
          break;
      }
      v12 = *(_DWORD *)v7;
      if ( *(_DWORD *)v7 )
        v9 = *(_DWORD *)(v12 + 12);
        v6 = v7;
        v7 = *(_DWORD *)v7;
        if ( *(_DWORD *)(v12 + 12) % HIDWORD(v4) == v5 )
          continue;
      goto LABEL_8;
    }
    if ( !v6 )
LABEL_8:
      v13 = 0;
      goto LABEL_9;
    v13 = *(_DWORD *)v6;
LABEL_9:
    v2 = v83;
  }
  else
    v13 = 0;
  if ( v8 - 3 != &dword_28898C0 )
    v64 = v8 - 1;
    if ( &pthread_create )
      __dmb();
      do
        v65 = __ldrex(v64);
      while ( __strex(v65 - 1, v64) );
    else
      v65 = (*v64)--;
    if ( v65 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v8 - 3);
  if ( v13 )
    v14 = (const void **)(v13 + 8);
    if ( sub_119C9E8(v14, "production") )
      if ( sub_119C9E8(v14, "staging") )
        if ( sub_119C9E8(v14, "dev") )
        {
          if ( sub_119C9E8(v14, "local") )
            goto LABEL_22;
          v15 = 3;
        }
        else
          v15 = 2;
      else
        v15 = 1;
      v15 = 0;
    Options::setRealmsEnvironment(*(_DWORD *)(v82 + 4), v15);
LABEL_22:
  sub_119C884(&v94, "realmsEndpoint");
  v16 = sub_119C9A4((int *)v94, *((_DWORD *)v94 - 3), -955291385);
  v17 = *(_QWORD *)(v2 + 4) >> 32;
  v18 = v16 % v17;
  v19 = *(_DWORD *)(*(_QWORD *)(v2 + 4) + 4 * v18);
  if ( v19 )
    v20 = *(_DWORD *)v19;
    v21 = v94;
    v84 = v2;
    v22 = *(_DWORD *)(*(_DWORD *)v19 + 12);
      if ( v22 == v16 )
        v23 = *(_DWORD **)(v20 + 4);
        v24 = *(v21 - 3);
        if ( v24 == *(v23 - 3) && !memcmp(v21, v23, v24) )
      v25 = *(_DWORD *)v20;
      if ( *(_DWORD *)v20 )
        v22 = *(_DWORD *)(v25 + 12);
        v19 = v20;
        v20 = *(_DWORD *)v20;
        if ( *(_DWORD *)(v25 + 12) % v17 == v18 )
      goto LABEL_29;
    if ( !v19 )
LABEL_29:
      v26 = 0;
      goto LABEL_30;
    v26 = *(_DWORD *)v19;
LABEL_30:
    v2 = v84;
    v26 = 0;
  if ( v21 - 3 != &dword_28898C0 )
    v66 = v21 - 1;
        v67 = __ldrex(v66);
      while ( __strex(v67 - 1, v66) );
      v67 = (*v66)--;
    if ( v67 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v21 - 3);
  if ( v26 )
    Util::base64_decode((const void **)&v93, (int *)(v26 + 8));
    Options::setRealmsEndpoint(*(_DWORD *)(v82 + 4), (const void **)&v93);
    v27 = (void *)(v93 - 12);
    if ( (int *)(v93 - 12) != &dword_28898C0 )
      v74 = (unsigned int *)(v93 - 4);
      if ( &pthread_create )
        __dmb();
        do
          v75 = __ldrex(v74);
        while ( __strex(v75 - 1, v74) );
        v75 = (*v74)--;
      if ( v75 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v27);
  sub_119C884(&v92, "realmsEndpointPayment");
  v28 = sub_119C9A4((int *)v92, *((_DWORD *)v92 - 3), -955291385);
  v29 = *(_QWORD *)(v2 + 4) >> 32;
  v30 = v28 % v29;
  v31 = *(_DWORD *)(*(_QWORD *)(v2 + 4) + 4 * v30);
  if ( v31 )
    v32 = *(_DWORD *)v31;
    v33 = v92;
    v85 = v2;
    v34 = *(_DWORD *)(*(_DWORD *)v31 + 12);
      if ( v34 == v28 )
        v35 = *(_DWORD **)(v32 + 4);
        v36 = *(v33 - 3);
        if ( v36 == *(v35 - 3) && !memcmp(v33, v35, v36) )
      v37 = *(_DWORD *)v32;
      if ( *(_DWORD *)v32 )
        v34 = *(_DWORD *)(v37 + 12);
        v31 = v32;
        v32 = *(_DWORD *)v32;
        if ( *(_DWORD *)(v37 + 12) % v29 == v30 )
      goto LABEL_42;
    if ( !v31 )
LABEL_42:
      v38 = 0;
      goto LABEL_43;
    v38 = *(_DWORD *)v31;
LABEL_43:
    v2 = v85;
    v38 = 0;
  if ( v33 - 3 != &dword_28898C0 )
    v68 = v33 - 1;
        v69 = __ldrex(v68);
      while ( __strex(v69 - 1, v68) );
      v69 = (*v68)--;
    if ( v69 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v33 - 3);
  if ( v38 )
    Util::base64_decode((const void **)&v91, (int *)(v38 + 8));
    Options::setRealmsEndpointPayment(*(_DWORD *)(v82 + 4), (const void **)&v91);
    v39 = (void *)(v91 - 12);
    if ( (int *)(v91 - 12) != &dword_28898C0 )
      v76 = (unsigned int *)(v91 - 4);
          v77 = __ldrex(v76);
        while ( __strex(v77 - 1, v76) );
        v77 = (*v76)--;
      if ( v77 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v39);
  sub_119C884(&v90, "relyingParty");
  v40 = sub_119C9A4((int *)v90, *((_DWORD *)v90 - 3), -955291385);
  v41 = *(_QWORD *)(v2 + 4) >> 32;
  v42 = v40 % v41;
  v43 = *(_DWORD *)(*(_QWORD *)(v2 + 4) + 4 * v42);
  if ( v43 )
    v44 = *(_DWORD *)v43;
    v45 = v90;
    v86 = v2;
    v46 = *(_DWORD *)(*(_DWORD *)v43 + 12);
      if ( v46 == v40 )
        v47 = *(_DWORD **)(v44 + 4);
        v48 = *(v45 - 3);
        if ( v48 == *(v47 - 3) && !memcmp(v45, v47, v48) )
      v49 = *(_DWORD *)v44;
      if ( *(_DWORD *)v44 )
        v46 = *(_DWORD *)(v49 + 12);
        v43 = v44;
        v44 = *(_DWORD *)v44;
        if ( *(_DWORD *)(v49 + 12) % v41 == v42 )
      goto LABEL_55;
    if ( !v43 )
LABEL_55:
      v50 = 0;
      goto LABEL_56;
    v50 = *(_DWORD *)v43;
LABEL_56:
    v2 = v86;
    v50 = 0;
  if ( v45 - 3 != &dword_28898C0 )
    v70 = v45 - 1;
        v71 = __ldrex(v70);
      while ( __strex(v71 - 1, v70) );
      v71 = (*v70)--;
    if ( v71 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v45 - 3);
  if ( v50 )
    Util::base64_decode((const void **)&v89, (int *)(v50 + 8));
    Options::setRealmsRelyingParty(*(_DWORD *)(v82 + 4), (const void **)&v89);
    v51 = (void *)(v89 - 12);
    if ( (int *)(v89 - 12) != &dword_28898C0 )
      v78 = (unsigned int *)(v89 - 4);
          v79 = __ldrex(v78);
        while ( __strex(v79 - 1, v78) );
        v79 = (*v78)--;
      if ( v79 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v51);
  sub_119C884(&v88, "relyingPartyPayment");
  v52 = sub_119C9A4((int *)v88, *((_DWORD *)v88 - 3), -955291385);
  v53 = *(_QWORD *)(v2 + 4) >> 32;
  v54 = v52 % v53;
  v55 = *(_DWORD *)(*(_QWORD *)(v2 + 4) + 4 * v54);
  if ( v55 )
    v56 = *(_DWORD *)v55;
    v57 = v88;
    v58 = *(_DWORD *)(*(_DWORD *)v55 + 12);
      if ( v58 == v52 )
        v59 = *(_DWORD **)(v56 + 4);
        v60 = *(v57 - 3);
        if ( v60 == *(v59 - 3) && !memcmp(v57, v59, v60) )
      v61 = *(_DWORD *)v56;
      if ( !*(_DWORD *)v56 )
        v62 = 0;
        goto LABEL_82;
      v58 = *(_DWORD *)(v61 + 12);
      v55 = v56;
      v56 = *(_DWORD *)v56;
      if ( *(_DWORD *)(v61 + 12) % v53 != v54 )
    if ( v55 )
      v62 = *(_DWORD *)v55;
      v62 = 0;
    v62 = 0;
LABEL_82:
  if ( v57 - 3 != &dword_28898C0 )
    v72 = v57 - 1;
        v73 = __ldrex(v72);
      while ( __strex(v73 - 1, v72) );
      v73 = (*v72)--;
    if ( v73 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v57 - 3);
  if ( v62 )
    Util::base64_decode((const void **)&v87, (int *)(v62 + 8));
    Options::setRealmsRelyingPartyPayment(*(_DWORD *)(v82 + 4), (const void **)&v87);
    v63 = (void *)(v87 - 12);
    if ( (int *)(v87 - 12) != &dword_28898C0 )
      v80 = (unsigned int *)(v87 - 4);
          v81 = __ldrex(v80);
        while ( __strex(v81 - 1, v80) );
        v81 = (*v80)--;
      if ( v81 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v63);
}


void __fastcall Social::Events::convertJsonTypes(web::json::value *a1, Json::Value *a2)
{
  Social::Events::convertJsonTypes(a1, a2);
}


signed int __fastcall Social::Events::EventManager::setPlayerCommonProperty<bool>(int a1, int a2, unsigned int a3, int **a4, bool *a5)
{
  unsigned int v5; // r7@1
  int *v6; // r10@1
  int v7; // r11@1
  int v8; // r4@1
  int v9; // r11@1
  int v10; // t1@1
  int v11; // r4@1
  int v12; // r0@1
  _DWORD *v13; // r9@2
  int v14; // r6@2
  _DWORD *v15; // r8@4
  bool v16; // zf@7
  int v17; // r0@11
  int v19; // [sp+8h] [bp-40h]@1
  char v20; // [sp+Ch] [bp-3Ch]@12
  unsigned int v21; // [sp+14h] [bp-34h]@1
  int *v22; // [sp+1Ch] [bp-2Ch]@11

  v5 = a3;
  v6 = (int *)a4;
  v7 = a2;
  v8 = a1;
  v19 = a1;
  v21 = a3;
  Social::Events::EventManager::removePlayerCommonProperty(a2, a3, a4);
  sub_21E8AF4((int *)v8, v6);
  Json::Value::Value((Json::Value *)(v8 + 8), *a5);
  v10 = *(_DWORD *)(v7 + 68);
  v9 = v7 + 68;
  v11 = v5 % *(_DWORD *)(v9 + 4);
  v12 = *(_DWORD *)(v10 + 4 * v11);
  if ( !v12 )
    goto LABEL_11;
  v13 = *(_DWORD **)v12;
  v14 = *(_DWORD *)(*(_DWORD *)v12 + 4);
  while ( v14 != v5 )
  {
    v15 = (_DWORD *)*v13;
    if ( *v13 )
    {
      v14 = v15[1];
      v12 = (int)v13;
      v13 = (_DWORD *)*v13;
      if ( v15[1] % *(_DWORD *)(v9 + 4) == v11 )
        continue;
    }
  }
  v16 = v12 == 0;
  if ( v12 )
    v12 = *(_DWORD *)v12;
    v16 = v12 == 0;
  if ( v16 )
LABEL_11:
    v22 = (int *)&v21;
    v17 = j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            v9,
            (int)&unk_262D414,
            &v22);
    v12 = std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
            v11,
            v5,
            v17);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v20,
           (unsigned __int64 *)(v12 + 8),
           v6,
           v19);
}


int __fastcall Social::XboxLiveUserManager::setCancellationToken(int result, int a2)
{
  int v2; // r8@0
  int v3; // r4@1
  int v4; // r5@1
  unsigned int *v5; // r7@2
  int v6; // r2@5
  unsigned int v7; // r3@6
  bool v8; // zf@8
  unsigned int v9; // r0@13
  unsigned int *v10; // r1@17
  unsigned int v11; // r0@19
  unsigned int *v12; // r6@23
  unsigned int v13; // r0@25
  unsigned int *v14; // r5@37

  v3 = *(_DWORD *)(a2 + 4);
  v4 = result;
  if ( v3 )
  {
    result = *(_DWORD *)(v3 + 4);
    v5 = (unsigned int *)(v3 + 4);
    while ( result )
    {
      __dmb();
      v6 = __ldrex(v5);
      if ( v6 == result )
      {
        v7 = __strex(result + 1, v5);
        result = v6;
        if ( !v7 )
        {
          __dmb();
          if ( *v5 )
          {
            v8 = *(_DWORD *)a2 == 0;
            if ( *(_DWORD *)a2 )
            {
              *(_DWORD *)(v4 + 44) = *(_DWORD *)a2;
              v2 = *(_DWORD *)(v4 + 48);
              v8 = v3 == v2;
            }
            if ( !v8 )
              if ( &pthread_create )
              {
                __dmb();
                do
                  v9 = __ldrex(v5);
                while ( __strex(v9 + 1, v5) );
                v2 = *(_DWORD *)(v4 + 48);
              }
              else
                ++*v5;
              if ( v2 )
                v10 = (unsigned int *)(v2 + 4);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v11 = __ldrex(v10);
                  while ( __strex(v11 - 1, v10) );
                }
                else
                  v11 = (*v10)--;
                if ( v11 == 1 )
                  v12 = (unsigned int *)(v2 + 8);
                  (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
                  if ( &pthread_create )
                  {
                    __dmb();
                    do
                      v13 = __ldrex(v12);
                    while ( __strex(v13 - 1, v12) );
                  }
                  else
                    v13 = (*v12)--;
                  if ( v13 == 1 )
                    (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
              *(_DWORD *)(v4 + 48) = v3;
          }
          if ( &pthread_create )
            __dmb();
            do
              result = __ldrex(v5);
            while ( __strex(result - 1, v5) );
          else
            result = (*v5)--;
          if ( result == 1 )
            v14 = (unsigned int *)(v3 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
            if ( &pthread_create )
              __dmb();
              do
                result = __ldrex(v14);
              while ( __strex(result - 1, v14) );
            else
              result = (*v14)--;
            if ( result == 1 )
              result = (*(int (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
          return result;
        }
      }
      else
        __clrex();
    }
  }
  return result;
}


char *__fastcall Social::User::getOptions(Social::User *this)
{
  return (char *)this + 48;
}


int __fastcall Social::User::getSettingsDirectoryPath(int result, int a2)
{
  __int64 v2; // r1@1

  LODWORD(v2) = *(_DWORD *)(a2 + 44);
  HIDWORD(v2) = *(_DWORD *)(v2 - 12);
  *(_QWORD *)result = v2;
  return result;
}


          if ( v10 || Social::XboxLiveUserManager::isSignedIn(*(Social::XboxLiveUserManager **)(v2 + 8)) != 1 )
{
          Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v49, *(_DWORD *)(v2 + 8));
          v11 = xbox::services::xbox_live_context::profile_service(v49);
          xbox::services::social::profile_service::get_user_profiles_for_gamertag((int)&v51, (int)v11, (int *)(v4 + 8));
          v45 = *(_DWORD *)v4;
          v12 = *(_DWORD *)(v4 + 4);
          v46 = v12;
          if ( v12 )
          {
            v13 = (unsigned int *)(v12 + 8);
            if ( &pthread_create )
            {
              __dmb();
              do
                v14 = __ldrex(v13);
              while ( __strex(v14 + 1, v13) );
            }
            else
              ++*v13;
          }
          v47 = v3;
          v48 = &v55;
          sub_13A0E18((int)&v53, (int)&v51, (int)&v45);
          if ( !v53 )
            v43 = j___cxa_allocate_exception(8);
            *(_DWORD *)v43 = &off_26D7A9C;
            sub_21E94B4((void **)v43 + 1, "wait() cannot be called on a default constructed task.");
            j___cxa_throw(
              (int)v43,
              (int)&`typeinfo for'pplx::invalid_operation,
              (int)pplx::invalid_operation::~invalid_operation,
              v44);
          pplx::details::_Task_impl_base::_Wait(v53);
          v15 = v54;
          if ( v54 )
            v16 = (unsigned int *)(v54 + 4);
                v17 = __ldrex(v16);
              while ( __strex(v17 - 1, v16) );
              v17 = (*v16)--;
            if ( v17 == 1 )
              v18 = (unsigned int *)(v15 + 8);
              (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 8))(v15);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v19 = __ldrex(v18);
                while ( __strex(v19 - 1, v18) );
              }
              else
                v19 = (*v18)--;
              if ( v19 == 1 )
                (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
          v20 = v46;
          if ( v46 )
            v21 = (unsigned int *)(v46 + 8);
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
              v22 = (*v21)--;
            if ( v22 == 1 )
              (*(void (__cdecl **)(int))(*(_DWORD *)v20 + 12))(v20);
          v23 = v52;
          if ( v52 )
            v24 = (unsigned int *)(v52 + 4);
                v25 = __ldrex(v24);
              while ( __strex(v25 - 1, v24) );
              v25 = (*v24)--;
            if ( v25 == 1 )
              v26 = (unsigned int *)(v23 + 8);
              (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 8))(v23);
                  v27 = __ldrex(v26);
                while ( __strex(v27 - 1, v26) );
                v27 = (*v26)--;
              if ( v27 == 1 )
                (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 12))(v23);
          v28 = v50;
          if ( v50 )
            v29 = (unsigned int *)(v50 + 4);
                v30 = __ldrex(v29);
              while ( __strex(v30 - 1, v29) );
              v30 = (*v29)--;
            if ( v30 == 1 )
              v31 = (unsigned int *)(v28 + 8);
              (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
                  v32 = __ldrex(v31);
                while ( __strex(v32 - 1, v31) );
                v32 = (*v31)--;
              if ( v32 == 1 )
                (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
          if ( v5 )
LABEL_106:
                v33 = __ldrex(v7);
              while ( __strex(v33 - 1, v7) );
              v33 = (*v7)--;
            if ( v33 == 1 )
              v34 = (unsigned int *)(v5 + 8);
              (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
                  v35 = __ldrex(v34);
                while ( __strex(v35 - 1, v34) );
                v35 = (*v34)--;
              if ( v35 == 1 )
                (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
          break;
        }
      }
      else
      {
        __clrex();
        v6 = v8;
    }
  }
  v37 = v56;
  v36 = v55;
  if ( v55 != v56 )
  {
    do
    {
      v38 = *(_DWORD *)(v36 + 4);
      if ( v38 )
        v39 = (unsigned int *)(v38 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v40 = __ldrex(v39);
          while ( __strex(v40 - 1, v39) );
        else
          v40 = (*v39)--;
        if ( v40 == 1 )
          v41 = (unsigned int *)(v38 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v38 + 8))(v38);
          if ( &pthread_create )
            __dmb();
            do
              v42 = __ldrex(v41);
            while ( __strex(v42 - 1, v41) );
          else
            v42 = (*v41)--;
          if ( v42 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v38 + 12))(v38);
      v36 += 8;
    while ( v36 != v37 );
    v36 = v55;
  if ( v36 )
    operator delete((void *)v36);
}


int __fastcall Social::Events::XboxLiveTelemetry::XboxLiveTelemetry(__int64 this, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  int *v4; // r7@1

  v2 = this;
  v3 = a2;
  v4 = (int *)HIDWORD(this);
  Social::Events::AggregationEventListener::AggregationEventListener(this, 0x64u, 0x3Cu, 0x78u);
  *(_DWORD *)v2 = &off_26E8E98;
  *(_DWORD *)(v2 + 96) = v3;
  sub_21E8AF4((int *)(v2 + 100), v4);
  Core::FileStream::FileStream((Core::FileStream *)(v2 + 104));
  return v2;
}


void __fastcall Social::MultiplayerXBL::_handleMemberPropertyChanged(int a1, int **a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int **v5; // r10@1
  int v6; // r0@2
  int v7; // r0@2
  int v8; // r5@2
  void **v9; // r0@3
  void *v10; // r0@3
  void *v11; // r0@4
  unsigned int *v12; // r2@5
  signed int v13; // r1@7
  int v14; // r7@9
  void *v15; // r0@9
  const void **v16; // r0@11
  void *v17; // r0@11
  bool v18; // zf@13
  int v19; // r5@17
  int v20; // r7@18
  void (__fastcall *v21)(int, char *); // r6@18
  int v22; // r4@18
  unsigned int *v23; // r2@21
  signed int v24; // r1@23
  unsigned int *v25; // r2@25
  signed int v26; // r1@27
  unsigned int *v27; // r2@40
  signed int v28; // r1@42
  char v29; // [sp+8h] [bp-138h]@18
  unsigned __int16 v30; // [sp+44h] [bp-FCh]@17
  int v31; // [sp+84h] [bp-BCh]@11
  int v32; // [sp+88h] [bp-B8h]@11
  __int16 v33; // [sp+8Ch] [bp-B4h]@17
  int v34; // [sp+90h] [bp-B0h]@18
  int v35; // [sp+94h] [bp-ACh]@18
  int v36; // [sp+98h] [bp-A8h]@18
  int v37; // [sp+9Ch] [bp-A4h]@18
  int v38; // [sp+A0h] [bp-A0h]@18
  int v39; // [sp+BCh] [bp-84h]@18
  int v40; // [sp+C0h] [bp-80h]@18
  char v41; // [sp+C4h] [bp-7Ch]@18
  int v42; // [sp+CCh] [bp-74h]@9
  int v43; // [sp+D4h] [bp-6Ch]@3
  int v44; // [sp+DCh] [bp-64h]@3
  unsigned __int16 v45; // [sp+E0h] [bp-60h]@2

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( *(_BYTE *)(a1 + 176) )
  {
    v6 = NetworkHandler::getConnector(*(NetworkHandler **)(a1 + 68));
    v7 = (*(int (**)(void))(*(_DWORD *)v6 + 60))();
    Social::MultiplayerGameInfo::getOptimumConnection((Social::MultiplayerGameInfo *)&v45, v3 + 88, v7);
    v8 = v45;
    Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v45);
    if ( v8 == 4 )
    {
      sub_119C884((void **)&v44, (const char *)&unk_257BC67);
      v9 = sub_119C884((void **)&v43, (const char *)&unk_257BC67);
      Social::MultiplayerService::_changeMultiplayerState(v3, 1, (const char **)&v44, 0, (const char **)v9);
      v10 = (void *)(v43 - 12);
      if ( (int *)(v43 - 12) != &dword_28898C0 )
      {
        v25 = (unsigned int *)(v43 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v26 = __ldrex(v25);
          while ( __strex(v26 - 1, v25) );
        }
        else
          v26 = (*v25)--;
        if ( v26 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v10);
      }
      v11 = (void *)(v44 - 12);
      if ( (int *)(v44 - 12) != &dword_28898C0 )
        v12 = (unsigned int *)(v44 - 4);
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
          v13 = (*v12)--;
        if ( v13 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v11);
    }
    else
      sub_119C884((void **)&v42, "ClientConnectionState");
      v14 = (*(int (**)(void))(**(_DWORD **)v4 + 4))();
      v15 = (void *)(v42 - 12);
      if ( (int *)(v42 - 12) != &dword_28898C0 )
        v23 = (unsigned int *)(v42 - 4);
            v24 = __ldrex(v23);
          while ( __strex(v24 - 1, v23) );
          v24 = (*v23)--;
        if ( v24 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v15);
      if ( v14 == 1 )
        sub_119C884((void **)&v31, "ClientConnectionState");
        v16 = web::json::value::at(v4, (const void **)&v31);
        Social::ClientConnectionState::fromJson((Social::ClientConnectionState *)&v32, (const web::json::value *)v16);
        v17 = (void *)(v31 - 12);
        if ( (int *)(v31 - 12) != &dword_28898C0 )
          v27 = (unsigned int *)(v31 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v28 = __ldrex(v27);
            while ( __strex(v28 - 1, v27) );
          }
          else
            v28 = (*v27)--;
          if ( v28 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v17);
        if ( v32 == 9 )
          goto LABEL_50;
        v18 = v32 == 8;
        if ( v32 == 8 )
          v18 = *(_DWORD *)(v3 + 8) == 4;
        if ( v18 )
LABEL_50:
          Social::GameConnectionInfo::GameConnectionInfo(
            (Social::GameConnectionInfo *)&v30,
            (const Social::GameConnectionInfo *)&v33);
          v19 = v30;
          Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v30);
          if ( v19 == 3 )
            v20 = *(_DWORD *)(v3 + 72);
            v21 = *(void (__fastcall **)(int, char *))(*(_DWORD *)v20 + 44);
            Social::GameConnectionInfo::GameConnectionInfo(
              (Social::GameConnectionInfo *)&v29,
              (const Social::GameConnectionInfo *)&v33);
            v21(v20, &v29);
            Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v29);
            v22 = std::__detail::_Map_base<std::string,std::pair<std::string const,Social::ClientConnectionState>,std::allocator<std::pair<std::string const,Social::ClientConnectionState>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>,true>::operator[](
                    (unsigned __int64 *)(v3 + 192),
                    v5);
            *(_DWORD *)v22 = v32;
            *(_WORD *)(v22 + 4) = v33;
            EntityInteraction::setInteractText((int *)(v22 + 8), &v34);
            EntityInteraction::setInteractText((int *)(v22 + 12), &v35);
            *(_DWORD *)(v22 + 16) = v36;
            EntityInteraction::setInteractText((int *)(v22 + 20), &v37);
            std::_Hashtable<std::string,std::string,std::allocator<std::string>,std::__detail::_Identity,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,true,true>>::operator=(
              (unsigned __int64 *)(v22 + 24),
              (int)&v38);
            EntityInteraction::setInteractText((int *)(v22 + 52), &v39);
            EntityInteraction::setInteractText((int *)(v22 + 56), &v40);
            *(_BYTE *)(v22 + 60) = v41;
        Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v33);
  }
}


void __fastcall Social::Events::Event::addProperty<bool>(int a1, int *a2, bool *a3)
{
  int v3; // r6@1
  bool *v4; // r7@1
  int *v5; // r4@1
  Json::Value *v6; // r5@1
  void *v7; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+8h] [bp-30h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = (Json::Value *)(sub_21E8AF4(&v11, a2) + 2);
  Json::Value::Value(v6, *v4);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v10,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v11);
  Json::Value::~Value(v6);
  v7 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
}


void __fastcall Social::XboxLiveUserManager::~XboxLiveUserManager(Social::XboxLiveUserManager *this, int a2)
{
  Social::XboxLiveUserManager *v2; // r0@1

  v2 = Social::XboxLiveUserManager::~XboxLiveUserManager(this, a2);
  j_j_j__ZdlPv_4((void *)v2);
}


int __fastcall Social::User::setGameControllerId(int result, int a2)
{
  *(_DWORD *)(result + 8) = a2;
  return result;
}


void __fastcall Social::GameConnectionInfo::fromJson(Social::GameConnectionInfo *this, const web::json::value *a2)
{
  int v2; // r6@1
  __int64 v3; // kr00_8@1
  int *v4; // r10@2
  int *v5; // r5@2
  char *v6; // r0@4
  char *v7; // r0@5
  unsigned int *v8; // r2@7
  signed int v9; // r1@9
  unsigned int *v10; // r2@15
  signed int v11; // r1@17
  unsigned int *v12; // r2@19
  signed int v13; // r1@21
  unsigned int *v14; // r2@23
  signed int v15; // r1@25
  unsigned int *v16; // r2@27
  signed int v17; // r1@29
  int *v18; // r12@41
  int *v19; // r5@44
  int *v20; // r7@45
  int *v21; // r0@49
  void *v22; // r0@49
  void *v23; // r0@50
  int *v24; // r0@56
  void *v25; // r0@56
  void *v26; // r0@57
  void *v27; // r0@61
  unsigned int *v28; // r2@64
  signed int v29; // r1@66
  unsigned int *v30; // r2@68
  signed int v31; // r1@70
  Social::GameConnectionInfo *v32; // [sp+1Ch] [bp-54h]@1
  int v33; // [sp+20h] [bp-50h]@2
  __int16 v34; // [sp+24h] [bp-4Ch]@2
  int v35; // [sp+28h] [bp-48h]@27
  int v36; // [sp+2Ch] [bp-44h]@23
  int v37; // [sp+30h] [bp-40h]@19
  int v38; // [sp+34h] [bp-3Ch]@15
  int v39; // [sp+38h] [bp-38h]@45
  int v40; // [sp+3Ch] [bp-34h]@2
  char *v41; // [sp+40h] [bp-30h]@1
  char *v42; // [sp+44h] [bp-2Ch]@1
  int v43; // [sp+60h] [bp-10h]@7

  v41 = (char *)&unk_28898CC;
  v42 = (char *)&unk_28898CC;
  v32 = this;
  v3 = *(_QWORD *)web::json::value::as_object(a2);
  v2 = v3;
  if ( (_DWORD)v3 == HIDWORD(v3) )
  {
    v33 = 0;
    v34 = -1;
  }
  else
    v4 = &v40;
    v5 = &dword_28898C0;
    do
    {
      v20 = v5;
      sub_21E8AF4(v4, (int *)v2);
      web::json::value::value((web::json::value *)&v39, (const web::json::value *)(v2 + 4));
      if ( !sub_21E7D6C((const void **)v4, "ConnectionType")
        && web::json::value::is_integer((web::json::value *)&v39) == 1 )
      {
        v34 = web::json::value::as_integer((web::json::value *)&v39);
      }
      if ( !sub_21E7D6C((const void **)v4, "HostIpAddress") )
        v21 = (int *)web::json::value::as_string((web::json::value *)&v39);
        sub_21E8AF4(&v37, v21);
        utility::conversions::to_utf8string(&v38, &v37);
        xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
          (int *)&v42,
          &v38);
        v22 = (void *)(v38 - 12);
        if ( (int *)(v38 - 12) != v5 )
        {
          v10 = (unsigned int *)(v38 - 4);
          if ( v43 )
          {
            __dmb();
            do
              v11 = __ldrex(v10);
            while ( __strex(v11 - 1, v10) );
          }
          else
            v11 = (*v10)--;
          if ( v11 <= 0 )
            j_j_j_j__ZdlPv_9(v22);
        }
        v23 = (void *)(v37 - 12);
        if ( (int *)(v37 - 12) != v5 )
          v12 = (unsigned int *)(v37 - 4);
              v13 = __ldrex(v12);
            while ( __strex(v13 - 1, v12) );
            v13 = (*v12)--;
          if ( v13 <= 0 )
            j_j_j_j__ZdlPv_9(v23);
        v20 = v5;
        v4 = &v40;
      if ( !sub_21E7D6C((const void **)v4, "HostPort") && web::json::value::is_integer((web::json::value *)&v39) == 1 )
        v33 = web::json::value::as_integer((web::json::value *)&v39);
      if ( !sub_21E7D6C((const void **)v4, "RakNetGUID") )
        v24 = (int *)web::json::value::as_string((web::json::value *)&v39);
        sub_21E8AF4(&v35, v24);
        utility::conversions::to_utf8string(&v36, &v35);
          (int *)&v41,
          &v36);
        v18 = v20;
        v25 = (void *)(v36 - 12);
        if ( (int *)(v36 - 12) != v20 )
          v14 = (unsigned int *)(v36 - 4);
              v15 = __ldrex(v14);
            while ( __strex(v15 - 1, v14) );
            v15 = (*v14)--;
          if ( v15 <= 0 )
            j_j_j_j__ZdlPv_9(v25);
            v18 = v20;
        v26 = (void *)(v35 - 12);
        if ( (int *)(v35 - 12) != v18 )
          v16 = (unsigned int *)(v35 - 4);
              v17 = __ldrex(v16);
            while ( __strex(v17 - 1, v16) );
            v17 = (*v16)--;
          if ( v17 <= 0 )
            v19 = v18;
            j_j_j_j__ZdlPv_9(v26);
            v18 = v19;
        v20 = v18;
      if ( v39 )
        (*(void (**)(void))(*(_DWORD *)v39 + 96))();
      v5 = v20;
      v27 = (void *)(v40 - 12);
      if ( (int *)(v40 - 12) != v20 )
        v8 = (unsigned int *)(v40 - 4);
        if ( v43 )
          __dmb();
          do
            v9 = __ldrex(v8);
          while ( __strex(v9 - 1, v8) );
        else
          v9 = (*v8)--;
        if ( v9 <= 0 )
          j_j_j_j__ZdlPv_9(v27);
      v2 += 8;
    }
    while ( v2 != HIDWORD(v3) );
  Social::GameConnectionInfo::GameConnectionInfo((int)v32, v34, (int *)&v42, v33, (int *)&v41);
  v6 = v41 - 12;
  if ( (int *)(v41 - 12) != &dword_28898C0 )
    v28 = (unsigned int *)(v41 - 4);
    if ( &pthread_create )
      __dmb();
      do
        v29 = __ldrex(v28);
      while ( __strex(v29 - 1, v28) );
    else
      v29 = (*v28)--;
    if ( v29 <= 0 )
      j_j_j_j__ZdlPv_9(v6);
  v7 = v42 - 12;
  if ( (int *)(v42 - 12) != &dword_28898C0 )
    v30 = (unsigned int *)(v42 - 4);
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
}


void __fastcall Social::MultiplayerXBL::_handleMemberPropertyChanged(int a1, int **a2, int a3)
{
  Social::MultiplayerXBL::_handleMemberPropertyChanged(a1, a2, a3);
}


void __fastcall Social::XboxLiveUserManager::getProfiles(double a1, int a2)
{
  unsigned __int64 *v2; // r8@1
  int v3; // r10@1
  int **v4; // r0@1
  int **v5; // r6@1
  int v6; // r9@1
  double v7; // r0@3
  unsigned int v8; // r0@3
  int v9; // r5@5
  int *v10; // r4@5
  _DWORD *v11; // r7@6
  int v12; // r5@9
  int v13; // r4@9
  bool v14; // zf@10
  __int64 *v15; // r4@16
  unsigned int v16; // r0@16
  int v17; // r7@18
  int *v18; // r6@18
  int **v19; // r7@19
  unsigned int *v20; // r2@21
  signed int v21; // r1@23
  _DWORD *v22; // r6@29
  Social::XboxProfile *v23; // r0@29
  int v24; // r1@29
  void *v25; // r0@29
  int *v26; // r0@31
  int *v27; // r1@32
  int **v28; // r5@33
  int **i; // r6@33
  int v30; // r0@34
  unsigned int *v31; // r2@35
  unsigned int v32; // r1@37
  void (__fastcall *v33)(char *, int, signed int); // r3@43
  void *v34; // r6@44
  unsigned __int64 v35; // r0@44
  unsigned int v36; // r4@44
  __int64 v37; // r0@47
  __int64 v38; // kr18_8@48
  void (*v39)(void); // r3@48
  int v40; // r3@48
  void **v41; // r1@49
  unsigned int *v42; // r2@50
  signed int v43; // r1@52
  int v44; // r6@58
  unsigned int v45; // r1@59
  unsigned int *v46; // r0@59
  unsigned int v47; // r2@62
  unsigned int v48; // r3@63
  signed int v49; // r5@64
  int v50; // r8@68
  const Social::XboxProfile *v51; // r1@68
  void *v52; // r0@70
  unsigned int *v53; // r1@72
  unsigned int v54; // r0@74
  unsigned int *v55; // r5@78
  unsigned int v56; // r0@80
  int v57; // r0@85
  unsigned int *v58; // r2@86
  unsigned int v59; // r1@88
  _DWORD *v60; // r7@95
  unsigned int *v61; // r2@97
  signed int v62; // r1@99
  _DWORD *v63; // r6@105
  Social::XboxProfile *v64; // r0@105
  int v65; // r1@105
  void *v66; // r0@105
  _DWORD *v67; // r6@110
  unsigned int *v68; // r2@112
  signed int v69; // r1@114
  _DWORD *v70; // r5@120
  Social::XboxProfile *v71; // r0@120
  int v72; // r1@120
  void *v73; // r0@120
  void *v74; // r4@127
  void *v75; // r6@127
  unsigned int *v76; // r2@129
  signed int v77; // r1@131
  int *v78; // r0@137
  int **v79; // [sp+Ch] [bp-ECh]@19
  char v80; // [sp+10h] [bp-E8h]@44
  void (*v81)(void); // [sp+18h] [bp-E0h]@44
  int v82; // [sp+1Ch] [bp-DCh]@44
  void *v83; // [sp+20h] [bp-D8h]@44
  void *v84; // [sp+24h] [bp-D4h]@44
  char *v85; // [sp+28h] [bp-D0h]@44
  char v86; // [sp+2Ch] [bp-CCh]@34
  int v87; // [sp+30h] [bp-C8h]@34
  void *ptr; // [sp+34h] [bp-C4h]@95
  int v89; // [sp+38h] [bp-C0h]@95
  _DWORD *v90; // [sp+3Ch] [bp-BCh]@95
  int v91; // [sp+40h] [bp-B8h]@95
  __int64 v92; // [sp+44h] [bp-B4h]@95
  int v93; // [sp+4Ch] [bp-ACh]@108
  char v94; // [sp+50h] [bp-A8h]@70
  int v95; // [sp+58h] [bp-A0h]@58
  int v96; // [sp+5Ch] [bp-9Ch]@58
  int v97; // [sp+60h] [bp-98h]@50
  int v98; // [sp+64h] [bp-94h]@70
  void *v99; // [sp+94h] [bp-64h]@19
  int v100; // [sp+98h] [bp-60h]@16
  _DWORD *v101; // [sp+9Ch] [bp-5Ch]@16
  int v102; // [sp+A0h] [bp-58h]@16
  signed int v103; // [sp+A4h] [bp-54h]@16
  int v104; // [sp+A8h] [bp-50h]@16
  int v105; // [sp+ACh] [bp-4Ch]@123
  int *v106; // [sp+B0h] [bp-48h]@6
  unsigned int v107; // [sp+B4h] [bp-44h]@3
  _DWORD *v108; // [sp+B8h] [bp-40h]@3
  int v109; // [sp+BCh] [bp-3Ch]@3
  signed int v110; // [sp+C0h] [bp-38h]@3
  int v111; // [sp+C4h] [bp-34h]@3
  int v112; // [sp+C8h] [bp-30h]@32
  void **v113; // [sp+CCh] [bp-2Ch]@95

  v2 = (unsigned __int64 *)HIDWORD(a1);
  v3 = LODWORD(a1);
  LODWORD(a1) = *(_QWORD *)HIDWORD(a1) >> 32;
  v5 = (int **)*(_QWORD *)HIDWORD(a1);
  v6 = a2;
  if ( (int **)LODWORD(a1) == v5 )
  {
    if ( *(_DWORD *)(a2 + 8) )
    {
      v108 = 0;
      v109 = 0;
      v110 = 1065353216;
      v111 = 0;
      HIDWORD(v7) = 10;
      LODWORD(v7) = &v110;
      v8 = sub_119C844(v7);
      v107 = v8;
      if ( v8 == 1 )
      {
        v10 = &v112;
        v112 = 0;
      }
      else
        if ( v8 >= 0x40000000 )
          sub_119C874();
        v9 = 4 * v8;
        v10 = (int *)operator new(4 * v8);
        _aeabi_memclr4(v10, v9);
      v106 = v10;
      std::function<void ()(std::unordered_map<std::string,Social::XboxProfile,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::XboxProfile>>>)>::operator()(
        v6,
        (int)&v106);
      v11 = v108;
      while ( v11 )
        v22 = v11;
        v23 = (Social::XboxProfile *)(v11 + 2);
        v11 = (_DWORD *)*v11;
        Social::XboxProfile::~XboxProfile(v23);
        v24 = v22[1];
        v25 = (void *)(v24 - 12);
        if ( (int *)(v24 - 12) != &dword_28898C0 )
        {
          v20 = (unsigned int *)(v24 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
          }
          else
            v21 = (*v20)--;
          if ( v21 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v25);
        }
        operator delete(v22);
      _aeabi_memclr4(v106, 4 * v107);
      v26 = v106;
      if ( v106 )
        v27 = &v112;
        goto LABEL_124;
    }
  }
  else
    if ( v5 == v4 )
      goto LABEL_152;
    v12 = (int)(v4 - 1);
    LOBYTE(v13) = 1;
    do
      *(_QWORD *)&a1 = (unsigned int)std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
                                       (unsigned __int64 *)(v3 + 80),
                                       v5);
      v14 = v12 == (_DWORD)v5;
      v13 = (unsigned __int8)v13 & (LODWORD(a1) != 0);
      if ( (int **)v12 != v5 )
        ++v5;
        v14 = HIDWORD(a1) == 1;
    while ( !v14 );
    if ( v13 != 1 )
      v28 = (int **)(*v2 >> 32);
      for ( i = (int **)*v2; i != v28; ++i )
        Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v86, v3, i);
        v30 = v87;
        if ( v87 )
          v31 = (unsigned int *)(v87 + 8);
              v32 = __ldrex(v31);
            while ( __strex(v32 - 1, v31) );
            v32 = (*v31)--;
          if ( v32 == 1 )
            (*(void (**)(void))(*(_DWORD *)v30 + 12))();
      v33 = *(void (__fastcall **)(char *, int, signed int))(v6 + 8);
      if ( v33 )
        v34 = 0;
        v81 = 0;
        v33(&v80, v6, 2);
        v82 = *(_DWORD *)(v6 + 12);
        v81 = *(void (**)(void))(v6 + 8);
        v35 = *v2;
        v83 = 0;
        v84 = 0;
        v85 = 0;
        v36 = (HIDWORD(v35) - (signed int)v35) >> 2;
        if ( 0 != v36 )
          if ( v36 >= 0x40000000 )
            sub_119C874();
          v34 = operator new(HIDWORD(v35) - v35);
          v35 = *v2;
        v83 = v34;
        v84 = v34;
        v85 = (char *)v34 + 4 * v36;
        v84 = (void *)std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,std::string *>(
                        v35,
                        SHIDWORD(v35),
                        (int)v34);
        v37 = *(_QWORD *)(v3 + 396);
        if ( (_DWORD)v37 == HIDWORD(v37) )
          std::vector<Social::XboxLiveUserManager::ProfileCallback,std::allocator<Social::XboxLiveUserManager::ProfileCallback>>::_M_emplace_back_aux<Social::XboxLiveUserManager::ProfileCallback>(
            (unsigned __int64 *)(v3 + 392),
            (int)&v80);
        else
          *(_DWORD *)(v37 + 8) = 0;
          v38 = *(_QWORD *)&v80;
          *(_QWORD *)&v80 = *(_QWORD *)v37;
          *(_QWORD *)v37 = v38;
          v39 = v81;
          v81 = *(void (**)(void))(v37 + 8);
          *(_DWORD *)(v37 + 8) = v39;
          v40 = v82;
          v82 = *(_DWORD *)(v37 + 12);
          *(_DWORD *)(v37 + 12) = v40;
          *(_DWORD *)(v37 + 16) = 0;
          *(_DWORD *)(v37 + 20) = 0;
          *(_DWORD *)(v37 + 24) = 0;
          *(_DWORD *)(v37 + 16) = v83;
          v83 = 0;
          HIDWORD(v37) = *(_DWORD *)(v37 + 20);
          *(_DWORD *)(v37 + 20) = v84;
          v84 = (void *)HIDWORD(v37);
          HIDWORD(v37) = *(_DWORD *)(v37 + 24);
          *(_DWORD *)(v37 + 24) = v85;
          v85 = (char *)HIDWORD(v37);
          *(_DWORD *)(v3 + 396) += 28;
        v75 = v84;
        v74 = v83;
        if ( v83 != v84 )
          do
            v78 = (int *)(*(_DWORD *)v74 - 12);
            if ( v78 != &dword_28898C0 )
            {
              v76 = (unsigned int *)(*(_DWORD *)v74 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v77 = __ldrex(v76);
                while ( __strex(v77 - 1, v76) );
              }
              else
                v77 = (*v76)--;
              if ( v77 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v78);
            }
            v74 = (char *)v74 + 4;
          while ( v74 != v75 );
          v74 = v83;
        if ( v74 )
          operator delete(v74);
        if ( v81 )
          v81();
    else
LABEL_152:
      if ( *(_DWORD *)(v6 + 8) )
        v101 = 0;
        v102 = 0;
        v103 = 1065353216;
        v104 = 0;
        v15 = (__int64 *)&v103;
        LODWORD(a1) = &v103;
        v16 = sub_119C844(a1);
        v100 = v16;
        if ( v16 == 1 )
          v105 = 0;
          v18 = &v105;
          if ( v16 >= 0x40000000 )
          v17 = 4 * v16;
          v18 = (int *)operator new(4 * v16);
          _aeabi_memclr4(v18, v17);
        v99 = v18;
        v19 = (int **)*v2;
        v79 = (int **)(*v2 >> 32);
        if ( v19 == v79 )
          v41 = &v99;
            Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v95, v3, v19);
            v44 = v96;
            if ( v96 )
              v45 = *(_DWORD *)(v96 + 4);
              v46 = (unsigned int *)(v96 + 4);
              while ( v45 )
                v47 = __ldrex(v46);
                if ( v47 == v45 )
                {
                  v48 = __strex(v45 + 1, v46);
                  v45 = v47;
                  if ( !v48 )
                  {
                    __dmb();
                    v49 = 0;
                    if ( !*v46 )
                      v49 = 1;
                    goto LABEL_68;
                  }
                }
                else
                  __clrex();
            v49 = 1;
            v44 = 0;
LABEL_68:
            v50 = v95;
            sub_119C854(&v97, (int *)v19);
            v51 = (const Social::XboxProfile *)(v50 + 56);
            if ( v49 )
              v51 = (const Social::XboxProfile *)56;
            Social::XboxProfile::XboxProfile((Social::XboxProfile *)&v98, v51);
            std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::pair<std::string,Social::XboxProfile>>(
              &v94,
              (unsigned __int64 *)&v99,
              (int)&v97);
            Social::XboxProfile::~XboxProfile((Social::XboxProfile *)&v98);
            v52 = (void *)(v97 - 12);
            if ( (int *)(v97 - 12) != &dword_28898C0 )
              v42 = (unsigned int *)(v97 - 4);
                  v43 = __ldrex(v42);
                while ( __strex(v43 - 1, v42) );
                v43 = (*v42)--;
              if ( v43 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v52);
            if ( v44 )
              v53 = (unsigned int *)(v44 + 4);
                  v54 = __ldrex(v53);
                while ( __strex(v54 - 1, v53) );
                v54 = (*v53)--;
              if ( v54 == 1 )
                v55 = (unsigned int *)(v44 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 8))(v44);
                if ( &pthread_create )
                  __dmb();
                  do
                    v56 = __ldrex(v55);
                  while ( __strex(v56 - 1, v55) );
                  v56 = (*v55)--;
                if ( v56 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 12))(v44);
            v57 = v96;
              v58 = (unsigned int *)(v96 + 8);
                  v59 = __ldrex(v58);
                while ( __strex(v59 - 1, v58) );
                v59 = (*v58)--;
              if ( v59 == 1 )
                (*(void (**)(void))(*(_DWORD *)v57 + 12))();
            ++v19;
          while ( v19 != v79 );
          v15 = (__int64 *)&v103;
        ptr = 0;
        v89 = v100;
        v90 = 0;
        v91 = v102;
        v92 = *v15;
        v113 = &ptr;
        std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_assign<std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::(std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>> const&)::{lambda(std::__detail::_Hash_node<std::pair<std::string const,Social::XboxProfile>,true> const*)#1}>(
          (unsigned int *)&ptr,
          (int)v41,
          (int *)&v113);
        std::function<void ()(std::unordered_map<std::string,Social::XboxProfile,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::XboxProfile>>>)>::operator()(
          v6,
          (int)&ptr);
        v60 = v90;
        while ( v60 )
          v63 = v60;
          v64 = (Social::XboxProfile *)(v60 + 2);
          v60 = (_DWORD *)*v60;
          Social::XboxProfile::~XboxProfile(v64);
          v65 = v63[1];
          v66 = (void *)(v65 - 12);
          if ( (int *)(v65 - 12) != &dword_28898C0 )
            v61 = (unsigned int *)(v65 - 4);
            if ( &pthread_create )
              __dmb();
              do
                v62 = __ldrex(v61);
              while ( __strex(v62 - 1, v61) );
            else
              v62 = (*v61)--;
            if ( v62 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v66);
          operator delete(v63);
        _aeabi_memclr4(ptr, 4 * v89);
        v91 = 0;
        if ( ptr && &v93 != ptr )
          operator delete(ptr);
        v67 = v101;
        while ( v67 )
          v70 = v67;
          v71 = (Social::XboxProfile *)(v67 + 2);
          v67 = (_DWORD *)*v67;
          Social::XboxProfile::~XboxProfile(v71);
          v72 = v70[1];
          v73 = (void *)(v72 - 12);
          if ( (int *)(v72 - 12) != &dword_28898C0 )
            v68 = (unsigned int *)(v72 - 4);
                v69 = __ldrex(v68);
              while ( __strex(v69 - 1, v68) );
              v69 = (*v68)--;
            if ( v69 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v73);
          operator delete(v70);
        _aeabi_memclr4(v99, 4 * v100);
        v26 = (int *)v99;
        if ( v99 )
          v27 = &v105;
LABEL_124:
          if ( v27 != v26 )
            operator delete(v26);
          return;
}


int __fastcall Social::XboxLiveUserManager::_cleanupEventListeners(int result)
{
  int v1; // r4@1

  v1 = result + 128;
  if ( *(_BYTE *)(result + 128) )
  {
    xbox::services::system::xbox_live_user::remove_sign_out_completed_handler(
      *(xbox::services::system::xbox_live_user **)(result + 132),
      *(_BYTE *)(result + 128));
    result = 0;
    *(_DWORD *)v1 = 0;
    *(_DWORD *)(v1 + 4) = 0;
  }
  return result;
}


int __fastcall Social::Events::Event::getUserId(int a1)
{
  return *(_DWORD *)a1;
}


int __fastcall Social::MultiplayerServiceManager::userControlledUpdateGameList(int result)
{
  __int64 i; // r4@1
  int v2; // t1@2

  for ( i = *(_QWORD *)result; HIDWORD(i) != (_DWORD)i; result = (*(int (**)(void))(*(_DWORD *)v2 + 36))() )
  {
    v2 = *(_DWORD *)i;
    LODWORD(i) = i + 4;
  }
  return result;
}


void __fastcall Social::XboxLiveUserManager::updateRichPresence(int a1, int *a2)
{
  int v2; // r5@1
  int *v3; // r4@1
  xbox::services::system::xbox_live_user *v4; // r0@4
  bool v5; // zf@4
  unsigned int v6; // r0@8
  int *v7; // r6@10
  int v8; // r4@10
  unsigned int *v9; // r1@11
  unsigned int v10; // r0@13
  unsigned int *v11; // r5@17
  unsigned int v12; // r0@19
  void *v13; // r0@24
  void *v14; // r0@25
  int v15; // r4@26
  unsigned int *v16; // r1@27
  unsigned int v17; // r0@29
  unsigned int *v18; // r5@33
  unsigned int v19; // r0@35
  unsigned int *v20; // r2@41
  signed int v21; // r1@43
  unsigned int *v22; // r2@45
  signed int v23; // r1@47
  int v24; // [sp+4h] [bp-44h]@10
  int v25; // [sp+8h] [bp-40h]@10
  int v26; // [sp+Ch] [bp-3Ch]@26
  int v27; // [sp+10h] [bp-38h]@10
  char v28; // [sp+14h] [bp-34h]@10
  char v29; // [sp+2Ch] [bp-1Ch]@10
  int v30; // [sp+30h] [bp-18h]@10

  v2 = a1;
  v3 = (int *)(a1 + 152);
  if ( *(_DWORD *)(*a2 - 12) )
    EntityInteraction::setInteractText(v3, a2);
  else
    sub_119CAD8((void **)v3, "Menus", (_BYTE *)5);
  v4 = *(xbox::services::system::xbox_live_user **)(v2 + 136);
  v5 = v4 == 0;
  if ( v4 )
    v5 = *(_DWORD *)(v2 + 144) == 0;
  if ( !v5 && xbox::services::system::xbox_live_user::is_signed_in(v4) == 1 )
  {
    v6 = *(_WORD *)(v2 + 124);
    if ( v6 <= 0xFF && !(_BYTE)v6 )
    {
      v7 = (int *)xbox::services::xbox_live_context::presence_service(*(xbox::services::xbox_live_context **)(v2 + 144));
      xbox::services::xbox_live_context::application_config(
        (xbox::services::xbox_live_context *)&v25,
        *(int **)(v2 + 144));
      xbox::services::xbox_live_app_config::scid((xbox::services::xbox_live_app_config *)&v27, v25);
      utility::conversions::to_string_t(&v24, v3);
      xbox::services::presence::presence_data::presence_data((int)&v28, &v27, &v24);
      xbox::services::presence::presence_service::set_presence(
        (int)&v29,
        v7,
        1,
        (const xbox::services::presence::presence_data *)&v28);
      v8 = v30;
      if ( v30 )
      {
        v9 = (unsigned int *)(v30 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v10 = __ldrex(v9);
          while ( __strex(v10 - 1, v9) );
        }
        else
          v10 = (*v9)--;
        if ( v10 == 1 )
          v11 = (unsigned int *)(v8 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
          if ( &pthread_create )
          {
            __dmb();
            do
              v12 = __ldrex(v11);
            while ( __strex(v12 - 1, v11) );
          }
          else
            v12 = (*v11)--;
          if ( v12 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
      }
      xbox::services::presence::presence_data::~presence_data((xbox::services::presence::presence_data *)&v28);
      v13 = (void *)(v24 - 12);
      if ( (int *)(v24 - 12) != &dword_28898C0 )
        v20 = (unsigned int *)(v24 - 4);
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
          v21 = (*v20)--;
        if ( v21 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v13);
      v14 = (void *)(v27 - 12);
      if ( (int *)(v27 - 12) != &dword_28898C0 )
        v22 = (unsigned int *)(v27 - 4);
            v23 = __ldrex(v22);
          while ( __strex(v23 - 1, v22) );
          v23 = (*v22)--;
        if ( v23 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v14);
      v15 = v26;
      if ( v26 )
        v16 = (unsigned int *)(v26 + 4);
            v17 = __ldrex(v16);
          while ( __strex(v17 - 1, v16) );
          v17 = (*v16)--;
        if ( v17 == 1 )
          v18 = (unsigned int *)(v15 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 8))(v15);
              v19 = __ldrex(v18);
            while ( __strex(v19 - 1, v18) );
            v19 = (*v18)--;
          if ( v19 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
    }
  }
}


signed int __fastcall Social::Events::EventManager::setCommonProperty<bool>(int a1, int a2, int **a3, bool *a4)
{
  int *v4; // r4@1
  int v5; // r7@1
  int v6; // r5@1
  bool *v7; // r6@1
  int v9; // [sp+0h] [bp-28h]@1

  v4 = (int *)a3;
  v5 = a2;
  v6 = a1;
  v7 = a4;
  Social::Events::EventManager::removeCommonProperty(a2, a3);
  sub_21E8AF4((int *)v6, v4);
  Json::Value::Value((Json::Value *)(v6 + 8), *v7);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v9,
           (unsigned __int64 *)(v5 + 40),
           v4,
           v6);
}


int __fastcall Social::XboxLiveUserManager::_refreshPrivacyList(int a1, __int64 *a2)
{
  __int64 *v2; // r6@1
  int v3; // r5@1
  __int64 v4; // r0@1
  int v5; // r4@2
  unsigned int v6; // r1@3
  unsigned int *v7; // r0@3
  unsigned int v8; // r2@6
  unsigned int v9; // r3@7
  int v10; // r8@8
  unsigned int *v11; // r10@8
  unsigned int v12; // r1@10
  unsigned int v13; // r1@15
  unsigned int v14; // r0@21
  __int64 v15; // kr00_8@26
  unsigned int *v16; // r1@27
  unsigned int v17; // r2@29
  char *v18; // r7@32
  void *v19; // r2@32
  __int64 v20; // r0@32
  unsigned int v21; // r5@32
  void *v22; // r2@35
  __int64 v23; // r0@35
  unsigned int v24; // r5@35
  __int64 v25; // r0@38
  unsigned int v26; // r0@40
  int v27; // r6@43
  unsigned int *v28; // r1@44
  unsigned int v29; // r0@46
  unsigned int *v30; // r5@50
  unsigned int v31; // r0@52
  int v32; // r0@57
  unsigned int *v33; // r2@58
  unsigned int v34; // r1@60
  int v35; // r6@65
  unsigned int *v36; // r1@66
  unsigned int v37; // r0@68
  unsigned int *v38; // r5@72
  unsigned int v39; // r0@74
  void *v40; // r5@79
  void *v41; // r6@79
  char *v42; // r1@80
  unsigned int *v43; // r2@81
  signed int v44; // r7@83
  char *v45; // r4@87
  int *v46; // r0@88
  void *v47; // r5@93
  void *v48; // r6@93
  unsigned int *v49; // r2@95
  signed int v50; // r1@97
  int *v51; // r0@103
  unsigned int *v52; // r1@109
  unsigned int v53; // r0@111
  unsigned int *v54; // r5@115
  unsigned int v55; // r0@117
  int v57; // [sp+4h] [bp-5Ch]@65
  int v58; // [sp+8h] [bp-58h]@38
  int v59; // [sp+Ch] [bp-54h]@38
  void *v60; // [sp+10h] [bp-50h]@35
  void *v61; // [sp+14h] [bp-4Ch]@35
  char *v62; // [sp+18h] [bp-48h]@35
  void *ptr; // [sp+1Ch] [bp-44h]@32
  void *v64; // [sp+20h] [bp-40h]@32
  char *v65; // [sp+24h] [bp-3Ch]@32
  char v66; // [sp+28h] [bp-38h]@38
  int v67; // [sp+2Ch] [bp-34h]@65
  char v68; // [sp+30h] [bp-30h]@43
  int v69; // [sp+34h] [bp-2Ch]@43
  char v70; // [sp+38h] [bp-28h]@80

  v2 = a2;
  v3 = a1;
  v4 = *a2;
  if ( (_DWORD)v4 != HIDWORD(v4) )
  {
    v5 = *(_DWORD *)(v3 + 12);
    if ( !v5 )
      std::__throw_bad_weak_ptr();
    v6 = *(_DWORD *)(v5 + 4);
    v7 = (unsigned int *)(v5 + 4);
    do
    {
      while ( 1 )
      {
        if ( !v6 )
          std::__throw_bad_weak_ptr();
        __dmb();
        v8 = __ldrex(v7);
        if ( v8 == v6 )
          break;
        __clrex();
        v6 = v8;
      }
      v9 = __strex(v6 + 1, v7);
      v6 = v8;
    }
    while ( v9 );
    __dmb();
    v10 = *(_DWORD *)(v3 + 8);
    v11 = (unsigned int *)(v5 + 8);
    if ( &pthread_create )
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
    else
      ++*v11;
        v13 = __ldrex(v7);
      while ( __strex(v13 - 1, v7) );
      v13 = (*v7)--;
    if ( v13 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
        do
          v14 = __ldrex(v11);
        while ( __strex(v14 - 1, v11) );
      else
        v14 = (*v11)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
    v15 = *(_QWORD *)(v3 + 144);
    if ( HIDWORD(v15) )
      v16 = (unsigned int *)(HIDWORD(v15) + 4);
          v17 = __ldrex(v16);
        while ( __strex(v17 + 1, v16) );
        ++*v16;
    v18 = xbox::services::xbox_live_context::privacy_service((xbox::services::xbox_live_context *)v15);
    v19 = 0;
    v20 = *(_QWORD *)&dword_27D53C4;
    ptr = 0;
    v64 = 0;
    v65 = 0;
    v21 = (dword_27D53C8 - dword_27D53C4) >> 2;
    if ( v21 )
      if ( v21 >= 0x40000000 )
        sub_119C874();
      v19 = operator new(dword_27D53C8 - dword_27D53C4);
      v20 = *(_QWORD *)&dword_27D53C4;
    ptr = v19;
    v65 = (char *)v19 + 4 * v21;
    v64 = (void *)std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,std::string *>(
                    v20,
                    SHIDWORD(v20),
                    (int)v19);
    v22 = 0;
    v23 = *v2;
    v60 = 0;
    v61 = 0;
    v62 = 0;
    v24 = (HIDWORD(v23) - (signed int)v23) >> 2;
    if ( v24 )
      if ( v24 >= 0x40000000 )
      v22 = operator new(HIDWORD(v23) - v23);
      v23 = *v2;
    v60 = v22;
    v62 = (char *)v22 + 4 * v24;
    v61 = (void *)std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,std::string *>(
                    v23,
                    SHIDWORD(v23),
                    (int)v22);
    LODWORD(v25) = &v66;
    HIDWORD(v25) = v18;
    xbox::services::privacy::privacy_service::check_multiple_permissions_with_multiple_target_users(
      v25,
      (__int64 *)&ptr,
      &v60);
    v58 = v10;
    v59 = v5;
        v26 = __ldrex(v11);
      while ( __strex(v26 + 1, v11) );
    sub_1036C74((int)&v68, (int)&v66, (int)&v58);
    v27 = v69;
    if ( v69 )
      v28 = (unsigned int *)(v69 + 4);
          v29 = __ldrex(v28);
        while ( __strex(v29 - 1, v28) );
        v29 = (*v28)--;
      if ( v29 == 1 )
        v30 = (unsigned int *)(v27 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
        if ( &pthread_create )
        {
          __dmb();
          do
            v31 = __ldrex(v30);
          while ( __strex(v31 - 1, v30) );
        }
        else
          v31 = (*v30)--;
        if ( v31 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
    v32 = v59;
    if ( v59 )
      v33 = (unsigned int *)(v59 + 8);
          v34 = __ldrex(v33);
        while ( __strex(v34 - 1, v33) );
        v34 = (*v33)--;
      if ( v34 == 1 )
        (*(void (**)(void))(*(_DWORD *)v32 + 12))();
    v35 = v67;
    v57 = v5;
    if ( v67 )
      v36 = (unsigned int *)(v67 + 4);
          v37 = __ldrex(v36);
        while ( __strex(v37 - 1, v36) );
        v37 = (*v36)--;
      if ( v37 == 1 )
        v38 = (unsigned int *)(v35 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 8))(v35);
            v39 = __ldrex(v38);
          while ( __strex(v39 - 1, v38) );
          v39 = (*v38)--;
        if ( v39 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 12))(v35);
    v40 = v61;
    v41 = v60;
    if ( v60 != v61 )
      v42 = &v70;
        v46 = (int *)(*(_DWORD *)v41 - 12);
        if ( v46 != &dword_28898C0 )
          v43 = (unsigned int *)(*(_DWORD *)v41 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v44 = __ldrex(v43);
            while ( __strex(v44 - 1, v43) );
          }
          else
            v44 = (*v43)--;
          if ( v44 <= 0 )
            v45 = v42;
            j_j_j_j_j__ZdlPv_9_1(v46);
            v42 = v45;
        v41 = (char *)v41 + 4;
      while ( v41 != v40 );
      v41 = v60;
    if ( v41 )
      operator delete(v41);
    v47 = v64;
    v48 = ptr;
    if ( ptr != v64 )
        v51 = (int *)(*(_DWORD *)v48 - 12);
        if ( v51 != &dword_28898C0 )
          v49 = (unsigned int *)(*(_DWORD *)v48 - 4);
              v50 = __ldrex(v49);
            while ( __strex(v50 - 1, v49) );
            v50 = (*v49)--;
          if ( v50 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v51);
        v48 = (char *)v48 + 4;
      while ( v48 != v47 );
      v48 = ptr;
    if ( v48 )
      operator delete(v48);
      v52 = (unsigned int *)(HIDWORD(v15) + 4);
          v53 = __ldrex(v52);
        while ( __strex(v53 - 1, v52) );
        v53 = (*v52)--;
      if ( v53 == 1 )
        v54 = (unsigned int *)(HIDWORD(v15) + 8);
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v15) + 8))(HIDWORD(v15));
            v55 = __ldrex(v54);
          while ( __strex(v55 - 1, v54) );
          v55 = (*v54)--;
        if ( v55 == 1 )
          (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v15) + 12))(HIDWORD(v15));
        LODWORD(v4) = __ldrex(v11);
      while ( __strex(v4 - 1, v11) );
      LODWORD(v4) = (*v11)--;
    if ( (_DWORD)v4 == 1 )
      LODWORD(v4) = (*(int (__fastcall **)(int))(*(_DWORD *)v57 + 12))(v57);
  }
  return v4;
}


int __fastcall Social::XboxLiveUserInfo::_choosePresenceInfo(xbox::services::presence::presence_record *a1, int *a2, int *a3, int *a4, int *a5)
{
  char *v5; // r0@1
  xbox::services::presence::presence_device_record *v6; // r1@1
  int result; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  unsigned int *v10; // r2@7
  signed int v11; // r1@9
  int v12; // r0@19
  void *v13; // r0@19
  void *v14; // r0@20
  xbox::services::presence::presence_title_record *j; // r10@21
  __int64 v16; // kr00_8@21
  int *v17; // r0@24
  void *v18; // r0@24
  void *v19; // r0@25
  int *v20; // r0@26
  void *v21; // r0@26
  void *v22; // r0@27
  unsigned int *v23; // r2@30
  signed int v24; // r1@32
  unsigned int *v25; // r2@34
  signed int v26; // r1@36
  unsigned int *v27; // r2@38
  signed int v28; // r1@40
  unsigned int *v29; // r2@42
  signed int v30; // r1@44
  int i; // [sp+8h] [bp-58h]@1
  int *v32; // [sp+10h] [bp-50h]@1
  xbox::services::presence::presence_device_record *v33; // [sp+14h] [bp-4Ch]@1
  int *v34; // [sp+18h] [bp-48h]@1
  int *v35; // [sp+1Ch] [bp-44h]@1
  int v36; // [sp+20h] [bp-40h]@26
  int v37; // [sp+24h] [bp-3Ch]@26
  int v38; // [sp+28h] [bp-38h]@24
  int v39; // [sp+2Ch] [bp-34h]@24
  int v40; // [sp+30h] [bp-30h]@7
  int v41; // [sp+34h] [bp-2Ch]@3

  v34 = a4;
  v35 = a3;
  v32 = a2;
  v5 = xbox::services::presence::presence_record::presence_device_records(a1);
  v6 = *(xbox::services::presence::presence_device_record **)v5;
  result = *((_DWORD *)v5 + 1);
  v33 = v6;
  for ( i = result;
        v33 != (xbox::services::presence::presence_device_record *)i;
        v33 = (xbox::services::presence::presence_device_record *)((char *)v33 + 16) )
  {
    v12 = xbox::services::presence::presence_device_record::device_type(v33);
    xbox::services::presence::presence_device_record::_Convert_presence_device_type_to_string((void **)&v40, v12);
    utility::conversions::to_utf8string(&v41, &v40);
    xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v32, &v41);
    v13 = (void *)(v41 - 12);
    if ( (int *)(v41 - 12) != &dword_28898C0 )
    {
      v8 = (unsigned int *)(v41 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 <= 0 )
        j_j_j_j__ZdlPv_9(v13);
    }
    v14 = (void *)(v40 - 12);
    if ( (int *)(v40 - 12) != &dword_28898C0 )
      v10 = (unsigned int *)(v40 - 4);
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
        v11 = (*v10)--;
      if ( v11 <= 0 )
        j_j_j_j__ZdlPv_9(v14);
    v16 = *(_QWORD *)xbox::services::presence::presence_device_record::presence_title_records(v33);
    for ( j = (xbox::services::presence::presence_title_record *)v16;
          j != (xbox::services::presence::presence_title_record *)HIDWORD(v16);
          j = (xbox::services::presence::presence_title_record *)((char *)j + 56) )
      v17 = (int *)xbox::services::presence::presence_title_record::title_name(j);
      sub_21E8AF4(&v38, v17);
      utility::conversions::to_utf8string(&v39, &v38);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v35, &v39);
      v18 = (void *)(v39 - 12);
      if ( (int *)(v39 - 12) != &dword_28898C0 )
        v23 = (unsigned int *)(v39 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v24 = __ldrex(v23);
          while ( __strex(v24 - 1, v23) );
        }
        else
          v24 = (*v23)--;
        if ( v24 <= 0 )
          j_j_j_j__ZdlPv_9(v18);
      v19 = (void *)(v38 - 12);
      if ( (int *)(v38 - 12) != &dword_28898C0 )
        v25 = (unsigned int *)(v38 - 4);
            v26 = __ldrex(v25);
          while ( __strex(v26 - 1, v25) );
          v26 = (*v25)--;
        if ( v26 <= 0 )
          j_j_j_j__ZdlPv_9(v19);
      v20 = (int *)xbox::services::presence::presence_title_record::presence(j);
      sub_21E8AF4(&v36, v20);
      utility::conversions::to_utf8string(&v37, &v36);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v34, &v37);
      v21 = (void *)(v37 - 12);
      if ( (int *)(v37 - 12) != &dword_28898C0 )
        v27 = (unsigned int *)(v37 - 4);
            v28 = __ldrex(v27);
          while ( __strex(v28 - 1, v27) );
          v28 = (*v27)--;
        if ( v28 <= 0 )
          j_j_j_j__ZdlPv_9(v21);
      v22 = (void *)(v36 - 12);
      if ( (int *)(v36 - 12) != &dword_28898C0 )
        v29 = (unsigned int *)(v36 - 4);
            v30 = __ldrex(v29);
          while ( __strex(v30 - 1, v29) );
          v30 = (*v29)--;
        if ( v30 <= 0 )
          j_j_j_j__ZdlPv_9(v22);
      *a5 = xbox::services::presence::presence_title_record::title_id(j);
      result = xbox::services::presence::presence_title_record::title_id(j);
      if ( result != 328178078 )
        return result;
    result = i;
  }
  return result;
}


signed int __fastcall Social::Events::EventManager::setPlayerGlobalProperty<std::string>(int *a1, int a2, unsigned int a3, int **a4, const char **a5)
{
  unsigned int v5; // r7@1
  int *v6; // r10@1
  int v7; // r11@1
  int *v8; // r4@1
  int v9; // r11@1
  int v10; // t1@1
  int v11; // r4@1
  int v12; // r0@1
  _DWORD *v13; // r9@2
  int v14; // r6@2
  _DWORD *v15; // r8@4
  bool v16; // zf@7
  int v17; // r0@11
  int *v19; // [sp+8h] [bp-40h]@1
  char v20; // [sp+Ch] [bp-3Ch]@12
  unsigned int v21; // [sp+14h] [bp-34h]@1
  int *v22; // [sp+1Ch] [bp-2Ch]@11

  v5 = a3;
  v6 = (int *)a4;
  v7 = a2;
  v8 = a1;
  v19 = a1;
  v21 = a3;
  Social::Events::EventManager::removePlayerGlobalProperty(a2, a3, a4);
  sub_21E8AF4(v8, v6);
  Json::Value::Value((int)(v8 + 2), a5);
  v10 = *(_DWORD *)(v7 + 96);
  v9 = v7 + 96;
  v11 = v5 % *(_DWORD *)(v9 + 4);
  v12 = *(_DWORD *)(v10 + 4 * v11);
  if ( !v12 )
    goto LABEL_11;
  v13 = *(_DWORD **)v12;
  v14 = *(_DWORD *)(*(_DWORD *)v12 + 4);
  while ( v14 != v5 )
  {
    v15 = (_DWORD *)*v13;
    if ( *v13 )
    {
      v14 = v15[1];
      v12 = (int)v13;
      v13 = (_DWORD *)*v13;
      if ( v15[1] % *(_DWORD *)(v9 + 4) == v11 )
        continue;
    }
  }
  v16 = v12 == 0;
  if ( v12 )
    v12 = *(_DWORD *)v12;
    v16 = v12 == 0;
  if ( v16 )
LABEL_11:
    v22 = (int *)&v21;
    v17 = j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            v9,
            (int)&unk_262D414,
            &v22);
    v12 = std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
            v11,
            v5,
            v17);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
           (int)&v20,
           (unsigned __int64 *)(v12 + 8),
           v6,
           (int)v19);
}


void __fastcall Social::XboxLiveUserManager::_processAchievementPage(Social::XboxLiveUserManager *this, xbox::services::achievements::achievements_result *a2)
{
  Social::XboxLiveUserManager::_processAchievementPage(this, a2);
}


const void **__fastcall Social::User_generic::_getPlatformDisplayName(Social::User_generic *this)
{
  return &Util::EMPTY_STRING;
}


int __fastcall Social::MultiplayerServiceManager::setGameHostInfo(int result, Level *a2, int a3)
{
  __int64 i; // r6@1
  int v4; // t1@2

  for ( i = *(_QWORD *)result; HIDWORD(i) != (_DWORD)i; result = (*(int (**)(void))(*(_DWORD *)v4 + 24))() )
  {
    v4 = *(_DWORD *)i;
    LODWORD(i) = i + 4;
  }
  return result;
}


signed int __fastcall Social::MultiplayerXBL::mayChatWith(int a1, const void **a2)
{
  const void **v2; // r4@1
  Social::XboxLiveUserManager *v3; // r0@1
  signed int v4; // r4@1
  int v5; // r5@1
  unsigned int *v6; // r1@2
  unsigned int v7; // r0@4
  unsigned int *v8; // r6@8
  unsigned int v9; // r0@10
  Social::User *v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v2 = a2;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v11, *(_DWORD *)(a1 + 44));
  v3 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v11);
  v4 = Social::XboxLiveUserManager::mayChatWith(v3, v2);
  v5 = v12;
  if ( v12 )
  {
    v6 = (unsigned int *)(v12 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  }
  return v4;
}


Social::MultiplayerService *__fastcall Social::MultiplayerService::~MultiplayerService(Social::MultiplayerService *this)
{
  Social::MultiplayerService *v1; // r11@1
  Social::MultiplayerGameInfo *v2; // r0@1
  Social::MultiplayerGameInfo *v3; // r5@1
  Social::MultiplayerGameInfo *v4; // r0@6
  Social::MultiplayerGameInfo *v5; // r5@6
  _DWORD *v6; // r7@11
  unsigned int *v7; // r2@13
  signed int v8; // r1@15
  _DWORD *v9; // r6@21
  Social::GameConnectionInfo *v10; // r0@21
  int v11; // r1@21
  void *v12; // r0@21
  char *v13; // r0@23
  Social::GameConnectionInfo *v14; // r0@26
  Social::GameConnectionInfo *v15; // r5@26
  int v16; // r1@31
  void *v17; // r0@31
  void (*v18)(void); // r3@32
  void (*v19)(void); // r3@34
  unsigned int *v21; // r2@37
  signed int v22; // r1@39

  v1 = this;
  *(_DWORD *)this = &off_26E7524;
  *((_DWORD *)this + 1) = &off_26E7618;
  (*(void (**)(void))(**((_DWORD **)this + 18) + 52))();
  UPNPInterface::removeConnectionStateListener(*((_DWORD *)v1 + 19), (int)v1);
  v3 = (Social::MultiplayerGameInfo *)(*((_QWORD *)v1 + 29) >> 32);
  v2 = (Social::MultiplayerGameInfo *)*((_QWORD *)v1 + 29);
  if ( v2 != v3 )
  {
    do
      v2 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v2) + 88);
    while ( v3 != v2 );
    v2 = (Social::MultiplayerGameInfo *)*((_DWORD *)v1 + 58);
  }
  if ( v2 )
    operator delete((void *)v2);
  v5 = (Social::MultiplayerGameInfo *)(*(_QWORD *)((char *)v1 + 220) >> 32);
  v4 = (Social::MultiplayerGameInfo *)*(_QWORD *)((char *)v1 + 220);
  if ( v4 != v5 )
      v4 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v4) + 88);
    while ( v5 != v4 );
    v4 = (Social::MultiplayerGameInfo *)*((_DWORD *)v1 + 55);
  if ( v4 )
    operator delete((void *)v4);
  v6 = (_DWORD *)*((_DWORD *)v1 + 50);
  while ( v6 )
    v9 = v6;
    v10 = (Social::GameConnectionInfo *)(v6 + 3);
    v6 = (_DWORD *)*v6;
    Social::GameConnectionInfo::~GameConnectionInfo(v10);
    v11 = v9[1];
    v12 = (void *)(v11 - 12);
    if ( (int *)(v11 - 12) != &dword_28898C0 )
    {
      v7 = (unsigned int *)(v11 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 <= 0 )
        j_j_j_j__ZdlPv_9(v12);
    }
    operator delete(v9);
  _aeabi_memclr4(*((_QWORD *)v1 + 24), 4 * (*((_QWORD *)v1 + 24) >> 32));
  *((_DWORD *)v1 + 50) = 0;
  *((_DWORD *)v1 + 51) = 0;
  v13 = (char *)*((_DWORD *)v1 + 48);
  if ( v13 && (char *)v1 + 216 != v13 )
    operator delete(v13);
  v15 = (Social::GameConnectionInfo *)(*(_QWORD *)((char *)v1 + 180) >> 32);
  v14 = (Social::GameConnectionInfo *)*(_QWORD *)((char *)v1 + 180);
  if ( v14 != v15 )
      v14 = (Social::GameConnectionInfo *)((char *)Social::GameConnectionInfo::~GameConnectionInfo(v14) + 60);
    while ( v15 != v14 );
    v14 = (Social::GameConnectionInfo *)*((_DWORD *)v1 + 45);
  if ( v14 )
    operator delete((void *)v14);
  Social::MultiplayerGameInfo::~MultiplayerGameInfo((Social::MultiplayerService *)((char *)v1 + 88));
  v16 = *((_DWORD *)v1 + 20);
  v17 = (void *)(v16 - 12);
  if ( (int *)(v16 - 12) != &dword_28898C0 )
    v21 = (unsigned int *)(v16 - 4);
    if ( &pthread_create )
      __dmb();
      do
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
    else
      v22 = (*v21)--;
    if ( v22 <= 0 )
      j_j_j_j__ZdlPv_9(v17);
  v18 = (void (*)(void))*((_DWORD *)v1 + 15);
  if ( v18 )
    v18();
  v19 = (void (*)(void))*((_DWORD *)v1 + 5);
  if ( v19 )
    v19();
  return v1;
}


unsigned int __fastcall Social::XboxLiveUserManager::unfavoriteUser(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  int *v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  void *v11; // r9@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  __int64 v16; // kr00_8@25
  unsigned int *v17; // r1@26
  unsigned int v18; // r2@28
  char *v19; // r0@31
  unsigned int v20; // r0@33
  void (__fastcall *v21)(int *, int, signed int); // r3@36
  int v22; // r5@38
  unsigned int *v23; // r1@39
  unsigned int v24; // r0@41
  unsigned int *v25; // r6@45
  unsigned int v26; // r0@47
  void *v27; // r0@54
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  void *v31; // r6@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int result; // r0@93
  unsigned int *v41; // r2@99
  signed int v42; // r1@101
  void *v43; // [sp+0h] [bp-50h]@31
  int v44; // [sp+4h] [bp-4Ch]@31
  int v45; // [sp+8h] [bp-48h]@36
  int v46; // [sp+Ch] [bp-44h]@37
  int v47; // [sp+10h] [bp-40h]@38
  int v48; // [sp+14h] [bp-3Ch]@36
  int v49; // [sp+18h] [bp-38h]@37
  char v50; // [sp+1Ch] [bp-34h]@31
  void *v51; // [sp+20h] [bp-30h]@38
  char v52; // [sp+24h] [bp-2Ch]@38
  int v53; // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(void **)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_QWORD *)(v3 + 144);
  if ( HIDWORD(v16) )
    v17 = (unsigned int *)(HIDWORD(v16) + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
      ++*v17;
  v19 = xbox::services::xbox_live_context::social_service((xbox::services::xbox_live_context *)v16);
  xbox::services::social::social_service::unfavorite_user((int)&v50, (int)v19, v6);
  v43 = v11;
  v44 = v5;
      v20 = __ldrex(v12);
    while ( __strex(v20 + 1, v12) );
  sub_119C854(&v45, v6);
  v48 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  if ( v21 )
    v21(&v46, v4, 2);
    v49 = *(_DWORD *)(v4 + 12);
    v48 = *(_DWORD *)(v4 + 8);
  sub_103D714((int)&v52, (int)&v50, (int)&v43, (int)v21, v43, v44, v45, v46, v47, v48, v49, *(int *)&v50, v51);
  v22 = v53;
  if ( v53 )
    v23 = (unsigned int *)(v53 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
      }
      else
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  if ( v48 )
    ((void (*)(void))v48)();
  v27 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v45 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
  v28 = v44;
  if ( v44 )
    v29 = (unsigned int *)(v44 + 8);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 == 1 )
      (*(void (**)(void))(*(_DWORD *)v28 + 12))();
  v31 = v51;
  if ( v51 )
    v32 = (unsigned int *)((char *)v51 + 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      v34 = (unsigned int *)((char *)v31 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
    v36 = (unsigned int *)(HIDWORD(v16) + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(HIDWORD(v16) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 8))(HIDWORD(v16));
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 12))(HIDWORD(v16));
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


void __fastcall Social::XboxLiveUserManager::getSandbox(Social::XboxLiveUserManager *this, int a2)
{
  int v2; // r5@1
  int *v3; // r8@1
  int *v4; // r1@1
  __int64 v5; // kr00_8@2
  unsigned int *v6; // r1@3
  unsigned int v7; // r0@5
  unsigned int *v8; // r6@9
  unsigned int v9; // r0@11
  int *v10; // r0@17
  int v11; // r5@17
  unsigned int *v12; // r1@18
  unsigned int v13; // r0@20
  unsigned int *v14; // r4@24
  unsigned int v15; // r0@26
  void *v16; // r0@31
  void *v17; // r0@32
  void *v18; // r0@33
  unsigned int *v19; // r2@35
  signed int v20; // r1@37
  unsigned int *v21; // r2@39
  signed int v22; // r1@41
  unsigned int *v23; // r2@43
  signed int v24; // r1@45
  int v25; // [sp+4h] [bp-3Ch]@31
  int v26; // [sp+8h] [bp-38h]@31
  xbox::services::xbox_live_app_config *v27; // [sp+Ch] [bp-34h]@17
  int v28; // [sp+10h] [bp-30h]@17
  int v29; // [sp+14h] [bp-2Ch]@17
  char v30; // [sp+18h] [bp-28h]@2
  int v31; // [sp+1Ch] [bp-24h]@2

  v2 = a2;
  v3 = (int *)this;
  sub_119C884((void **)this, (const char *)&unk_257BC67);
  v4 = *(int **)(v2 + 144);
  if ( v4 )
  {
    xbox::services::xbox_live_context::application_config((xbox::services::xbox_live_context *)&v30, v4);
    v5 = *(_QWORD *)&v30;
    if ( v31 )
    {
      v6 = (unsigned int *)(v31 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        v8 = (unsigned int *)(HIDWORD(v5) + 8);
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v5) + 8))(HIDWORD(v5));
        if ( &pthread_create )
        {
          __dmb();
          do
            v9 = __ldrex(v8);
          while ( __strex(v9 - 1, v8) );
        }
        else
          v9 = (*v8)--;
        if ( v9 == 1 )
          (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v5) + 12))(HIDWORD(v5));
    }
    if ( (_DWORD)v5 )
      xbox::services::xbox_live_context::application_config(
        (xbox::services::xbox_live_context *)&v27,
        *(int **)(v2 + 144));
      v10 = (int *)xbox::services::xbox_live_app_config::sandbox(v27);
      sub_119C854(&v29, v10);
      v11 = v28;
      if ( v28 )
        v12 = (unsigned int *)(v28 + 4);
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
          v13 = (*v12)--;
        if ( v13 == 1 )
          v14 = (unsigned int *)(v11 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          if ( &pthread_create )
          {
            __dmb();
            do
              v15 = __ldrex(v14);
            while ( __strex(v15 - 1, v14) );
          }
          else
            v15 = (*v14)--;
          if ( v15 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
      sub_119C854(&v25, &v29);
      utility::conversions::to_utf8string(&v26, &v25);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v3, &v26);
      v16 = (void *)(v26 - 12);
      if ( (int *)(v26 - 12) != &dword_28898C0 )
        v19 = (unsigned int *)(v26 - 4);
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
          v20 = (*v19)--;
        if ( v20 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v16);
      v17 = (void *)(v25 - 12);
      if ( (int *)(v25 - 12) != &dword_28898C0 )
        v21 = (unsigned int *)(v25 - 4);
            v22 = __ldrex(v21);
          while ( __strex(v22 - 1, v21) );
          v22 = (*v21)--;
        if ( v22 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v17);
      v18 = (void *)(v29 - 12);
      if ( (int *)(v29 - 12) != &dword_28898C0 )
        v23 = (unsigned int *)(v29 - 4);
            v24 = __ldrex(v23);
          while ( __strex(v24 - 1, v23) );
          v24 = (*v23)--;
        if ( v24 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v18);
  }
}


void __fastcall Social::XboxLiveUserManager::_processAchievementPage(Social::XboxLiveUserManager *this, xbox::services::achievements::achievements_result *a2)
{
  Social::XboxLiveUserManager *v2; // r4@1
  unsigned __int64 *v3; // r0@1
  xbox::services::achievements::achievement *v4; // r10@1
  int *v5; // r6@2
  signed int v6; // r7@2
  signed int *v7; // r1@2
  void *v12; // r5@2
  int *v13; // r0@3
  void *v14; // r0@3
  void *v15; // r0@4
  xbox::services::achievements::achievement_reward *i; // r7@5
  __int64 v17; // kr00_8@5
  int *v18; // r0@9
  void *v19; // r0@9
  void *v20; // r0@10
  unsigned int *v21; // r2@11
  signed int v22; // r1@13
  unsigned int *v23; // r2@15
  signed int v24; // r1@17
  int *v25; // r0@27
  void *v26; // r0@27
  void *v27; // r0@28
  int *v28; // r0@30
  void *v29; // r0@30
  void *v30; // r0@31
  char *v31; // r0@32
  int v32; // r0@32
  int v33; // r0@32
  int v34; // r0@33
  int v35; // r5@33
  int v36; // r0@33
  int *v37; // r0@34
  void *v38; // r0@34
  void *v39; // r0@35
  int v40; // r0@36
  int v41; // r0@37
  char *v42; // r0@38
  unsigned __int64 *v43; // r0@38
  unsigned __int64 *v44; // r7@38
  signed int v45; // r0@38
  unsigned int v46; // r5@38
  xbox::services::achievements::achievement_requirement *v47; // r2@38
  int v48; // r6@41
  xbox::services::achievements::achievement_requirement *v49; // r8@41
  unsigned int *v50; // r2@43
  signed int v51; // r1@45
  unsigned int *v52; // r2@47
  signed int v53; // r1@49
  unsigned int *v54; // r2@59
  signed int v55; // r1@61
  unsigned int *v56; // r2@63
  signed int v57; // r1@65
  unsigned int *v58; // r2@67
  signed int v59; // r1@69
  unsigned int *v60; // r2@71
  signed int v61; // r1@73
  unsigned int *v62; // r2@75
  signed int v63; // r1@77
  unsigned int *v64; // r2@79
  signed int v65; // r1@81
  int *v66; // r0@99
  void *v67; // r0@99
  int *v68; // r0@100
  void *v69; // r0@100
  int v71; // r1@103
  int *v73; // r0@105
  void *v74; // r0@108
  int v75; // r7@113
  __int64 v76; // r0@113
  int v77; // r3@113
  int *v78; // r0@114
  void *v79; // r0@114
  unsigned int *v80; // r2@125
  signed int v81; // r1@127
  unsigned int *v82; // r2@129
  signed int v83; // r1@131
  unsigned int *v84; // r2@133
  signed int v85; // r1@135
  unsigned int *v86; // r2@137
  signed int v87; // r1@139
  unsigned int *v88; // r2@141
  signed int v89; // r1@143
  int v90; // r6@168
  unsigned int v91; // r1@169
  unsigned int *v92; // r0@169
  unsigned int v93; // r2@172
  unsigned int v94; // r3@173
  __int64 v95; // kr08_8@176
  unsigned int *v96; // r0@177
  unsigned int v97; // r2@179
  int v98; // r4@181
  unsigned int *v99; // r7@181
  void *v100; // r0@184
  int v101; // r6@185
  unsigned int *v102; // r1@186
  unsigned int v103; // r0@188
  unsigned int *v104; // r7@192
  unsigned int v105; // r0@194
  unsigned int *v106; // r1@200
  unsigned int v107; // r0@202
  unsigned int *v108; // r6@206
  unsigned int v109; // r0@208
  int v110; // r11@213
  unsigned int v111; // r1@214
  unsigned int *v112; // r0@214
  unsigned int v113; // r2@217
  unsigned int v114; // r3@218
  int v115; // r8@221
  unsigned int *v116; // r5@221
  unsigned int *v117; // r2@223
  signed int v118; // r1@225
  unsigned int v119; // r1@233
  unsigned int v120; // r1@237
  unsigned int v121; // r0@243
  unsigned int v122; // r0@250
  int v123; // r0@253
  unsigned int *v124; // r2@254
  unsigned int v125; // r1@256
  int v126; // r4@261
  unsigned int *v127; // r1@262
  unsigned int v128; // r0@264
  unsigned int *v129; // r5@268
  unsigned int v130; // r0@270
  int v131; // r4@275
  unsigned int *v132; // r1@276
  unsigned int v133; // r0@278
  unsigned int *v134; // r5@282
  unsigned int v135; // r0@284
  unsigned int v136; // r0@291
  unsigned int v137; // r1@298
  unsigned int v138; // r1@302
  unsigned int v139; // r0@308
  __int64 v140; // kr10_8@313
  unsigned int *v141; // r1@314
  unsigned int v142; // r2@316
  char *v143; // r6@319
  __int64 v144; // kr18_8@319
  unsigned int *v145; // r1@320
  unsigned int v146; // r2@322
  int *v147; // r7@325
  __int64 v148; // kr20_8@325
  unsigned int *v149; // r0@326
  unsigned int v150; // r2@328
  int *v151; // r0@331
  unsigned int v152; // r0@333
  int v153; // r0@336
  unsigned int *v154; // r2@337
  unsigned int v155; // r1@339
  int v156; // r6@344
  unsigned int *v157; // r1@345
  unsigned int v158; // r0@347
  unsigned int *v159; // r7@351
  unsigned int v160; // r0@353
  void *v161; // r0@358
  void *v162; // r0@359
  int v163; // r6@360
  unsigned int *v164; // r1@361
  unsigned int v165; // r0@363
  unsigned int *v166; // r7@367
  unsigned int v167; // r0@369
  unsigned int *v168; // r1@375
  unsigned int v169; // r0@377
  unsigned int *v170; // r6@381
  unsigned int v171; // r0@383
  unsigned int *v172; // r1@389
  unsigned int v173; // r0@391
  unsigned int *v174; // r4@395
  unsigned int v175; // r0@397
  unsigned int *v176; // r1@403
  unsigned int v177; // r0@405
  unsigned int *v178; // r4@409
  unsigned int v179; // r0@411
  int v180; // r4@416
  unsigned int *v181; // r1@417
  unsigned int v182; // r0@419
  unsigned int *v183; // r6@423
  unsigned int v184; // r0@425
  unsigned int v185; // r0@432
  void *v186; // r0@437
  xbox::services::achievements::achievement *v187; // r0@438
  xbox::services::achievements::achievement *v188; // r4@438
  unsigned int *v189; // r2@444
  signed int v190; // r1@446
  unsigned int *v191; // r2@448
  signed int v192; // r1@450
  unsigned int *v193; // r2@452
  signed int v194; // r1@454
  xbox::services::achievements::achievements_result *v195; // [sp+38h] [bp-148h]@1
  PlayerAchievementData *v196; // [sp+3Ch] [bp-144h]@2
  int v197; // [sp+44h] [bp-13Ch]@331
  int v198; // [sp+48h] [bp-138h]@331
  int v199; // [sp+50h] [bp-130h]@331
  int v200; // [sp+54h] [bp-12Ch]@331
  int v201; // [sp+58h] [bp-128h]@360
  int v202; // [sp+5Ch] [bp-124h]@331
  char v203; // [sp+60h] [bp-120h]@331
  int v204; // [sp+64h] [bp-11Ch]@344
  char v205; // [sp+68h] [bp-118h]@336
  int v206; // [sp+6Ch] [bp-114h]@416
  int v207; // [sp+70h] [bp-110h]@184
  int v208; // [sp+74h] [bp-10Ch]@185
  int v209; // [sp+78h] [bp-108h]@184
  int v210; // [sp+7Ch] [bp-104h]@184
  int v211; // [sp+80h] [bp-100h]@248
  int v212; // [sp+84h] [bp-FCh]@248
  char v213; // [sp+88h] [bp-F8h]@248
  int v214; // [sp+8Ch] [bp-F4h]@261
  char v215; // [sp+90h] [bp-F0h]@253
  int v216; // [sp+94h] [bp-ECh]@275
  int v217; // [sp+98h] [bp-E8h]@114
  int v218; // [sp+9Ch] [bp-E4h]@104
  int v219; // [sp+A0h] [bp-E0h]@102
  int v220; // [sp+A4h] [bp-DCh]@71
  int v221; // [sp+A8h] [bp-D8h]@100
  int v222; // [sp+ACh] [bp-D4h]@67
  int v223; // [sp+B0h] [bp-D0h]@79
  xbox::services::achievements::achievement_requirement *v224; // [sp+B4h] [bp-CCh]@38
  xbox::services::achievements::achievement_requirement *v225; // [sp+B8h] [bp-C8h]@38
  xbox::services::achievements::achievement_requirement *v226; // [sp+BCh] [bp-C4h]@38
  int v227; // [sp+C0h] [bp-C0h]@36
  int v228; // [sp+C4h] [bp-BCh]@34
  int v229; // [sp+C8h] [bp-B8h]@34
  int v230; // [sp+CCh] [bp-B4h]@32
  int v231; // [sp+D0h] [bp-B0h]@30
  int v232; // [sp+D4h] [bp-ACh]@30
  int v233; // [sp+D8h] [bp-A8h]@27
  int v234; // [sp+DCh] [bp-A4h]@27
  int v235; // [sp+E0h] [bp-A0h]@9
  int v236; // [sp+E4h] [bp-9Ch]@9
  int v237; // [sp+E8h] [bp-98h]@3
  int v238; // [sp+ECh] [bp-94h]@3
  char v239; // [sp+F0h] [bp-90h]@2
  void *v240; // [sp+F4h] [bp-8Ch]@3
  void *v241; // [sp+F8h] [bp-88h]@3
  _DWORD *v242; // [sp+FCh] [bp-84h]@3
  int v243; // [sp+100h] [bp-80h]@32
  void *v244; // [sp+104h] [bp-7Ch]@3
  char v245; // [sp+108h] [bp-78h]@3
  char v246; // [sp+109h] [bp-77h]@3
  int v247; // [sp+10Ch] [bp-74h]@3
  int v248; // [sp+110h] [bp-70h]@3
  int v249; // [sp+118h] [bp-68h]@2
  void *ptr; // [sp+120h] [bp-60h]@1
  xbox::services::achievements::achievement *v251; // [sp+124h] [bp-5Ch]@1

  v2 = this;
  v195 = a2;
  v3 = (unsigned __int64 *)xbox::services::achievements::achievements_result::items(a2);
  std::vector<xbox::services::achievements::achievement,std::allocator<xbox::services::achievements::achievement>>::vector(
    (int)&ptr,
    v3);
  v4 = (xbox::services::achievements::achievement *)ptr;
  if ( ptr != (void *)v251 )
  {
    v5 = (int *)&v239;
    v6 = -1240428288;
    v196 = (Social::XboxLiveUserManager *)((char *)v2 + 304);
    v7 = &v249;
    __asm { VLDR            S16, =0.0 }
    v12 = &unk_28898CC;
    do
    {
      *(_DWORD *)&v239 = v12;
      v240 = v12;
      v241 = v12;
      v242 = v12;
      v244 = v12;
      v245 = 0;
      v246 = 0;
      v247 = 0;
      v248 = 0;
      *v7 = v6;
      v7[1] = 2;
      v13 = (int *)xbox::services::achievements::achievement::name((int)v4);
      sub_119C854(&v237, v13);
      utility::conversions::to_utf8string(&v238, &v237);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
        (int *)((unsigned int)&v239 | 4),
        &v238);
      v14 = (void *)(v238 - 12);
      if ( (int *)(v238 - 12) != &dword_28898C0 )
      {
        v50 = (unsigned int *)(v238 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v51 = __ldrex(v50);
          while ( __strex(v51 - 1, v50) );
        }
        else
          v51 = (*v50)--;
        if ( v51 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v14);
      }
      v15 = (void *)(v237 - 12);
      if ( (int *)(v237 - 12) != &dword_28898C0 )
        v52 = (unsigned int *)(v237 - 4);
            v53 = __ldrex(v52);
          while ( __strex(v53 - 1, v52) );
          v53 = (*v52)--;
        if ( v53 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v15);
      v17 = *(_QWORD *)xbox::services::achievements::achievement::rewards(v4);
      for ( i = (xbox::services::achievements::achievement_reward *)v17;
            i != (xbox::services::achievements::achievement_reward *)HIDWORD(v17);
            i = (xbox::services::achievements::achievement_reward *)((char *)i + 60) )
        if ( xbox::services::achievements::achievement_reward::reward_type(i) == 1 )
          v18 = (int *)xbox::services::achievements::achievement_reward::value(i);
          sub_119C854(&v235, v18);
          utility::conversions::to_utf8string(&v236, &v235);
          xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
            (int *)&v242,
            &v236);
          v19 = (void *)(v236 - 12);
          if ( (int *)(v236 - 12) != &dword_28898C0 )
          {
            v23 = (unsigned int *)(v236 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v24 = __ldrex(v23);
              while ( __strex(v24 - 1, v23) );
            }
            else
              v24 = (*v23)--;
            if ( v24 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v19);
          }
          v20 = (void *)(v235 - 12);
          if ( (int *)(v235 - 12) != &dword_28898C0 )
            v21 = (unsigned int *)(v235 - 4);
                v22 = __ldrex(v21);
              while ( __strex(v22 - 1, v21) );
              v22 = (*v21)--;
            if ( v22 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v20);
      v25 = (int *)xbox::services::achievements::achievement::id(v4);
      sub_119C854(&v233, v25);
      utility::conversions::to_utf8string(&v234, &v233);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v5, &v234);
      v26 = (void *)(v234 - 12);
      if ( (int *)(v234 - 12) != &dword_28898C0 )
        v54 = (unsigned int *)(v234 - 4);
            v55 = __ldrex(v54);
          while ( __strex(v55 - 1, v54) );
          v55 = (*v54)--;
        if ( v55 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v26);
      v27 = (void *)(v233 - 12);
      if ( (int *)(v233 - 12) != &dword_28898C0 )
        v56 = (unsigned int *)(v233 - 4);
            v57 = __ldrex(v56);
          while ( __strex(v57 - 1, v56) );
          v57 = (*v56)--;
        if ( v57 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v27);
      if ( xbox::services::achievements::achievement::progress_state(v4) == 1 )
        v245 = 0;
        ++v247;
        v28 = (int *)xbox::services::achievements::achievement::unlocked_description(v4);
        sub_119C854(&v231, v28);
        utility::conversions::to_utf8string(&v232, &v231);
        xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
          (int *)&v241,
          &v232);
        v29 = (void *)(v232 - 12);
        if ( (int *)(v232 - 12) != &dword_28898C0 )
          v80 = (unsigned int *)(v232 - 4);
          if ( &pthread_create )
            __dmb();
            do
              v81 = __ldrex(v80);
            while ( __strex(v81 - 1, v80) );
          else
            v81 = (*v80)--;
          if ( v81 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v29);
        v30 = (void *)(v231 - 12);
        if ( (int *)(v231 - 12) != &dword_28898C0 )
          v82 = (unsigned int *)(v231 - 4);
              v83 = __ldrex(v82);
            while ( __strex(v83 - 1, v82) );
            v83 = (*v82)--;
          if ( v83 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v30);
        v248 = 1065353216;
        v31 = xbox::services::achievements::achievement::progression(v4);
        v243 = *(_QWORD *)xbox::services::achievements::achievement_progression::time_unlocked((xbox::services::achievements::achievement_progression *)v31)
             / 0x989680uLL
             + 1240428288;
        *(_QWORD *)&v249 = v243;
        v32 = PlayerAchievementData::getAchievementsUnlocked(v196);
        PlayerAchievementData::setAchievementsUnlocked(v196, v32 + 1);
        v33 = PlayerAchievementData::getMaxAchievements(v196);
        PlayerAchievementData::setMaxAchievements(v196, v33 + 1);
        v230 = 0;
        if ( *(v242 - 3) )
          Util::toInt<int,(void *)0>((unsigned int *)&v242, &v230);
          v34 = PlayerAchievementData::getCurrGamerScore(v196);
          v35 = v230;
          PlayerAchievementData::setCurrGamerScore(v196, v230 + v34);
          v36 = PlayerAchievementData::getMaxGamerScore(v196);
          PlayerAchievementData::setMaxGamerScore(v196, v35 + v36);
      else
        v245 = 1;
        v37 = (int *)xbox::services::achievements::achievement::locked_description(v4);
        sub_119C854(&v228, v37);
        utility::conversions::to_utf8string(&v229, &v228);
          &v229);
        v38 = (void *)(v229 - 12);
        if ( (int *)(v229 - 12) != &dword_28898C0 )
          v84 = (unsigned int *)(v229 - 4);
              v85 = __ldrex(v84);
            while ( __strex(v85 - 1, v84) );
            v85 = (*v84)--;
          if ( v85 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v38);
        v39 = (void *)(v228 - 12);
        if ( (int *)(v228 - 12) != &dword_28898C0 )
          v86 = (unsigned int *)(v228 - 4);
              v87 = __ldrex(v86);
            while ( __strex(v87 - 1, v86) );
            v87 = (*v86)--;
          if ( v87 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v39);
        v40 = PlayerAchievementData::getMaxAchievements(v196);
        PlayerAchievementData::setMaxAchievements(v196, v40 + 1);
        v227 = 0;
          Util::toInt<int,(void *)0>((unsigned int *)&v242, &v227);
          v41 = PlayerAchievementData::getMaxGamerScore(v196);
          PlayerAchievementData::setMaxGamerScore(v196, v227 + v41);
        v42 = xbox::services::achievements::achievement::progression(v4);
        v43 = (unsigned __int64 *)xbox::services::achievements::achievement_progression::requirements((xbox::services::achievements::achievement_progression *)v42);
        v44 = v43;
        v45 = (*v43 >> 32) - *v43;
        v46 = -1431655765 * (v45 >> 2);
        v47 = 0;
        v224 = 0;
        v225 = 0;
        v226 = 0;
        if ( v45 )
          if ( v46 >= 0x15555556 )
            sub_119C874();
          v47 = (xbox::services::achievements::achievement_requirement *)operator new(v45);
        v224 = v47;
        v225 = v47;
        v226 = (xbox::services::achievements::achievement_requirement *)((char *)v47 + 12 * v46);
        v48 = std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<xbox::services::achievements::achievement_requirement const*,std::vector<xbox::services::achievements::achievement_requirement,std::allocator<xbox::services::achievements::achievement_requirement>>>,xbox::services::achievements::achievement_requirement*>(
                *v44,
                *v44 >> 32,
                (int)v47);
        __asm { VMOV.F32        S18, S16 }
        v225 = (xbox::services::achievements::achievement_requirement *)v48;
        __asm { VMOV.F32        S20, S16 }
        v49 = v224;
        while ( v49 != (xbox::services::achievements::achievement_requirement *)v48 )
          v66 = (int *)xbox::services::achievements::achievement_requirement::current_progress_value(v49);
          sub_119C854(&v222, v66);
          utility::conversions::to_utf8string(&v223, &v222);
          v67 = (void *)(v222 - 12);
          if ( (int *)(v222 - 12) != &dword_28898C0 )
            v58 = (unsigned int *)(v222 - 4);
                v59 = __ldrex(v58);
              while ( __strex(v59 - 1, v58) );
              v59 = (*v58)--;
            if ( v59 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v67);
          v68 = (int *)xbox::services::achievements::achievement_requirement::target_progress_value(v49);
          sub_119C854(&v220, v68);
          utility::conversions::to_utf8string(&v221, &v220);
          v69 = (void *)(v220 - 12);
          if ( (int *)(v220 - 12) != &dword_28898C0 )
            v60 = (unsigned int *)(v220 - 4);
                v61 = __ldrex(v60);
              while ( __strex(v61 - 1, v60) );
              v61 = (*v60)--;
            if ( v61 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v69);
          __asm { VMOV.F32        S22, S16 }
          if ( *(_DWORD *)(v223 - 12) )
            v219 = 0;
            Util::toInt<int,(void *)0>((unsigned int *)&v223, &v219);
            _R0 = v219;
            __asm
              VMOV            S0, R0
              VCVT.F32.S32    S22, S0
          __asm { VMOV.F32        S24, S16 }
          v71 = v221;
          if ( *(_DWORD *)(v221 - 12) )
            v218 = 0;
            Util::toInt<int,(void *)0>((unsigned int *)&v221, &v218);
            _R0 = v218;
              VCVT.F32.S32    S24, S0
            v71 = v221;
          __asm { VCMPE.F32       S22, S24 }
          v73 = (int *)(v71 - 12);
          __asm { VMRS            APSR_nzcv, FPSCR }
          if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
            __asm { VMOVGT.F32      S22, S24 }
          if ( v73 != &dword_28898C0 )
            v62 = (unsigned int *)(v71 - 4);
                v63 = __ldrex(v62);
              while ( __strex(v63 - 1, v62) );
              v63 = (*v62)--;
            if ( v63 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v73);
          v74 = (void *)(v223 - 12);
          if ( (int *)(v223 - 12) != &dword_28898C0 )
            v64 = (unsigned int *)(v223 - 4);
                v65 = __ldrex(v64);
              while ( __strex(v65 - 1, v64) );
              v65 = (*v64)--;
            if ( v65 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v74);
          __asm { VADD.F32        S18, S24, S18 }
          v49 = (xbox::services::achievements::achievement_requirement *)((char *)v49 + 12);
          __asm { VADD.F32        S20, S22, S20 }
        __asm
          VCMPE.F32       S18, #0.0
          VDIV.F32        S0, S20, S18
          VMRS            APSR_nzcv, FPSCR
          VMOV.F32        S2, S16
        if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
          __asm { VMOVGT.F32      S2, S0 }
        __asm { VSTR            S2, [SP,#0x180+var_70] }
        std::vector<xbox::services::achievements::achievement_requirement,std::allocator<xbox::services::achievements::achievement_requirement>>::~vector((unsigned __int64 *)&v224);
        v5 = (int *)&v239;
      v246 = xbox::services::achievements::achievement::is_secret(v4);
      v75 = *((_DWORD *)v2 + 65);
      v76 = *(_QWORD *)xbox::services::achievements::achievement::media_assets(v4);
      if ( HIDWORD(v76) == (_DWORD)v76 )
        sub_119CA78("vector::_M_range_check: __n (which is %zu) >= this->size() (which is %zu)", 0, 0, v77);
      v78 = (int *)xbox::services::achievements::achievement_media_asset::url((xbox::services::achievements::achievement_media_asset *)v76);
      Social::ImageService::GetDisplayPicture((void **)&v217, v75, v78, 2u);
        (int *)&v244,
        &v217);
      v79 = (void *)(v217 - 12);
      if ( (int *)(v217 - 12) != &dword_28898C0 )
        v88 = (unsigned int *)(v217 - 4);
            v89 = __ldrex(v88);
          while ( __strex(v89 - 1, v88) );
          v89 = (*v88)--;
        if ( v89 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v79);
      PlayerAchievementData::addAchievementData(v196, (AchievementData *)v5);
      AchievementData::~AchievementData((AchievementData *)v5);
      v7 = &v249;
      v6 = -1240428288;
      v12 = &unk_28898CC;
      v4 = (xbox::services::achievements::achievement *)((char *)v4 + 152);
    }
    while ( v4 != v251 );
  }
  if ( xbox::services::achievements::achievements_result::has_next(v195) == 1 )
    v90 = *((_DWORD *)v2 + 3);
    if ( !v90 )
      std::__throw_bad_weak_ptr();
    v91 = *(_DWORD *)(v90 + 4);
    v92 = (unsigned int *)(v90 + 4);
      while ( 1 )
        if ( !v91 )
          std::__throw_bad_weak_ptr();
        __dmb();
        v93 = __ldrex(v92);
        if ( v93 == v91 )
          break;
        __clrex();
        v91 = v93;
      v94 = __strex(v91 + 1, v92);
      v91 = v93;
    while ( v94 );
    __dmb();
    v98 = *((_DWORD *)v2 + 2);
    v99 = (unsigned int *)(v90 + 8);
    if ( &pthread_create )
      __dmb();
      do
        v119 = __ldrex(v99);
      while ( __strex(v119 + 1, v99) );
    else
      ++*v99;
        v120 = __ldrex(v92);
      while ( __strex(v120 - 1, v92) );
      v120 = (*v92)--;
    if ( v120 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v90 + 8))(v90);
      if ( &pthread_create )
        do
          v121 = __ldrex(v99);
        while ( __strex(v121 - 1, v99) );
        v121 = (*v99)--;
      if ( v121 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v90 + 12))(v90);
    xbox::services::achievements::achievements_result::get_next(
      (xbox::services::achievements::achievements_result *)&v213,
      (unsigned int)v195,
      25);
    v211 = v98;
    v212 = v90;
        v122 = __ldrex(v99);
      while ( __strex(v122 + 1, v99) );
    sub_102D61C((int)&v215, (int)&v213, (int)&v211);
    v123 = v212;
    if ( v212 )
      v124 = (unsigned int *)(v212 + 8);
          v125 = __ldrex(v124);
        while ( __strex(v125 - 1, v124) );
        v125 = (*v124)--;
      if ( v125 == 1 )
        (*(void (**)(void))(*(_DWORD *)v123 + 12))();
    v126 = v214;
    if ( v214 )
      v127 = (unsigned int *)(v214 + 4);
          v128 = __ldrex(v127);
        while ( __strex(v128 - 1, v127) );
        v128 = (*v127)--;
      if ( v128 == 1 )
        v129 = (unsigned int *)(v126 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v126 + 8))(v126);
            v130 = __ldrex(v129);
          while ( __strex(v130 - 1, v129) );
          v130 = (*v129)--;
        if ( v130 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v126 + 12))(v126);
    v131 = v216;
    if ( v216 )
      v132 = (unsigned int *)(v216 + 4);
          v133 = __ldrex(v132);
        while ( __strex(v133 - 1, v132) );
        v133 = (*v132)--;
      if ( v133 == 1 )
        v134 = (unsigned int *)(v131 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v131 + 8))(v131);
            v135 = __ldrex(v134);
          while ( __strex(v135 - 1, v134) );
          v135 = (*v134)--;
        if ( v135 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v131 + 12))(v131);
        v136 = __ldrex(v99);
      while ( __strex(v136 - 1, v99) );
      v136 = (*v99)--;
    if ( v136 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v90 + 12))(v90);
  else
    v95 = *((_QWORD *)v2 + 18);
    if ( HIDWORD(v95) )
      v96 = (unsigned int *)(HIDWORD(v95) + 4);
          v97 = __ldrex(v96);
        while ( __strex(v97 + 1, v96) );
        ++*v96;
    xbox::services::xbox_live_context::application_config((xbox::services::xbox_live_context *)&v207, (int *)v95);
    xbox::services::xbox_live_app_config::scid((xbox::services::xbox_live_app_config *)&v209, v207);
    utility::conversions::to_utf8string(&v210, &v209);
    v100 = (void *)(v209 - 12);
    if ( (int *)(v209 - 12) != &dword_28898C0 )
      v117 = (unsigned int *)(v209 - 4);
          v118 = __ldrex(v117);
        while ( __strex(v118 - 1, v117) );
        v118 = (*v117)--;
      if ( v118 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v100);
    v101 = v208;
    if ( v208 )
      v102 = (unsigned int *)(v208 + 4);
          v103 = __ldrex(v102);
        while ( __strex(v103 - 1, v102) );
        v103 = (*v102)--;
      if ( v103 == 1 )
        v104 = (unsigned int *)(v101 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v101 + 8))(v101);
            v105 = __ldrex(v104);
          while ( __strex(v105 - 1, v104) );
          v105 = (*v104)--;
        if ( v105 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v101 + 12))(v101);
      v106 = (unsigned int *)(HIDWORD(v95) + 4);
          v107 = __ldrex(v106);
        while ( __strex(v107 - 1, v106) );
        v107 = (*v106)--;
      if ( v107 == 1 )
        v108 = (unsigned int *)(HIDWORD(v95) + 8);
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v95) + 8))(HIDWORD(v95));
            v109 = __ldrex(v108);
          while ( __strex(v109 - 1, v108) );
          v109 = (*v108)--;
        if ( v109 == 1 )
          (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v95) + 12))(HIDWORD(v95));
    v110 = *((_DWORD *)v2 + 3);
    if ( !v110 )
    v111 = *(_DWORD *)(v110 + 4);
    v112 = (unsigned int *)(v110 + 4);
        if ( !v111 )
        v113 = __ldrex(v112);
        if ( v113 == v111 )
        v111 = v113;
      v114 = __strex(v111 + 1, v112);
      v111 = v113;
    while ( v114 );
    v115 = *((_DWORD *)v2 + 2);
    v116 = (unsigned int *)(v110 + 8);
        v137 = __ldrex(v116);
      while ( __strex(v137 + 1, v116) );
      ++*v116;
        v138 = __ldrex(v112);
      while ( __strex(v138 - 1, v112) );
      v138 = (*v112)--;
    if ( v138 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v110 + 8))(v110);
          v139 = __ldrex(v116);
        while ( __strex(v139 - 1, v116) );
        v139 = (*v116)--;
      if ( v139 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v110 + 12))(v110);
    v140 = *((_QWORD *)v2 + 18);
    if ( HIDWORD(v140) )
      v141 = (unsigned int *)(HIDWORD(v140) + 4);
          v142 = __ldrex(v141);
        while ( __strex(v142 + 1, v141) );
        ++*v141;
    v143 = xbox::services::xbox_live_context::user_statistics_service((xbox::services::xbox_live_context *)v140);
    v144 = *((_QWORD *)v2 + 17);
    if ( HIDWORD(v144) )
      v145 = (unsigned int *)(HIDWORD(v144) + 4);
          v146 = __ldrex(v145);
        while ( __strex(v146 + 1, v145) );
        ++*v145;
    v147 = (int *)xbox::services::system::xbox_live_user::xbox_user_id((xbox::services::system::xbox_live_user *)v144);
    v148 = *((_QWORD *)v2 + 18);
    if ( HIDWORD(v148) )
      v149 = (unsigned int *)(HIDWORD(v148) + 4);
          v150 = __ldrex(v149);
        while ( __strex(v150 + 1, v149) );
        ++*v149;
    xbox::services::xbox_live_context::application_config((xbox::services::xbox_live_context *)&v200, (int *)v148);
    xbox::services::xbox_live_app_config::scid((xbox::services::xbox_live_app_config *)&v202, v200);
    v151 = (int *)sub_119C884((void **)&v199, "MinutesPlayed");
    xbox::services::user_statistics::user_statistics_service::get_single_user_statistics(
      (int)&v203,
      (int)v143,
      v147,
      &v202,
      v151);
    v197 = v115;
    v198 = v110;
        v152 = __ldrex(v116);
      while ( __strex(v152 + 1, v116) );
    sub_102E000((int)&v205, (int)&v203, (int)&v197);
    v153 = v198;
    if ( v198 )
      v154 = (unsigned int *)(v198 + 8);
          v155 = __ldrex(v154);
        while ( __strex(v155 - 1, v154) );
        v155 = (*v154)--;
      if ( v155 == 1 )
        (*(void (**)(void))(*(_DWORD *)v153 + 12))();
    v156 = v204;
    if ( v204 )
      v157 = (unsigned int *)(v204 + 4);
          v158 = __ldrex(v157);
        while ( __strex(v158 - 1, v157) );
        v158 = (*v157)--;
      if ( v158 == 1 )
        v159 = (unsigned int *)(v156 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v156 + 8))(v156);
            v160 = __ldrex(v159);
          while ( __strex(v160 - 1, v159) );
          v160 = (*v159)--;
        if ( v160 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v156 + 12))(v156);
    v161 = (void *)(v199 - 12);
    if ( (int *)(v199 - 12) != &dword_28898C0 )
      v189 = (unsigned int *)(v199 - 4);
          v190 = __ldrex(v189);
        while ( __strex(v190 - 1, v189) );
        v190 = (*v189)--;
      if ( v190 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v161);
    v162 = (void *)(v202 - 12);
    if ( (int *)(v202 - 12) != &dword_28898C0 )
      v191 = (unsigned int *)(v202 - 4);
          v192 = __ldrex(v191);
        while ( __strex(v192 - 1, v191) );
        v192 = (*v191)--;
      if ( v192 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v162);
    v163 = v201;
    if ( v201 )
      v164 = (unsigned int *)(v201 + 4);
          v165 = __ldrex(v164);
        while ( __strex(v165 - 1, v164) );
        v165 = (*v164)--;
      if ( v165 == 1 )
        v166 = (unsigned int *)(v163 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v163 + 8))(v163);
            v167 = __ldrex(v166);
          while ( __strex(v167 - 1, v166) );
          v167 = (*v166)--;
        if ( v167 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v163 + 12))(v163);
      v168 = (unsigned int *)(HIDWORD(v148) + 4);
          v169 = __ldrex(v168);
        while ( __strex(v169 - 1, v168) );
        v169 = (*v168)--;
      if ( v169 == 1 )
        v170 = (unsigned int *)(HIDWORD(v148) + 8);
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v148) + 8))(HIDWORD(v148));
            v171 = __ldrex(v170);
          while ( __strex(v171 - 1, v170) );
          v171 = (*v170)--;
        if ( v171 == 1 )
          (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v148) + 12))(HIDWORD(v148));
      v172 = (unsigned int *)(HIDWORD(v144) + 4);
          v173 = __ldrex(v172);
        while ( __strex(v173 - 1, v172) );
        v173 = (*v172)--;
      if ( v173 == 1 )
        v174 = (unsigned int *)(HIDWORD(v144) + 8);
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v144) + 8))(HIDWORD(v144));
            v175 = __ldrex(v174);
          while ( __strex(v175 - 1, v174) );
          v175 = (*v174)--;
        if ( v175 == 1 )
          (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v144) + 12))(HIDWORD(v144));
      v176 = (unsigned int *)(HIDWORD(v140) + 4);
          v177 = __ldrex(v176);
        while ( __strex(v177 - 1, v176) );
        v177 = (*v176)--;
      if ( v177 == 1 )
        v178 = (unsigned int *)(HIDWORD(v140) + 8);
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v140) + 8))(HIDWORD(v140));
            v179 = __ldrex(v178);
          while ( __strex(v179 - 1, v178) );
          v179 = (*v178)--;
        if ( v179 == 1 )
          (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v140) + 12))(HIDWORD(v140));
    v180 = v206;
    if ( v206 )
      v181 = (unsigned int *)(v206 + 4);
          v182 = __ldrex(v181);
        while ( __strex(v182 - 1, v181) );
        v182 = (*v181)--;
      if ( v182 == 1 )
        v183 = (unsigned int *)(v180 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v180 + 8))(v180);
            v184 = __ldrex(v183);
          while ( __strex(v184 - 1, v183) );
          v184 = (*v183)--;
        if ( v184 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v180 + 12))(v180);
        v185 = __ldrex(v116);
      while ( __strex(v185 - 1, v116) );
      v185 = (*v116)--;
    if ( v185 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v110 + 12))(v110);
    v186 = (void *)(v210 - 12);
    if ( (int *)(v210 - 12) != &dword_28898C0 )
      v193 = (unsigned int *)(v210 - 4);
          v194 = __ldrex(v193);
        while ( __strex(v194 - 1, v193) );
        v194 = (*v193)--;
      if ( v194 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v186);
  v188 = v251;
  v187 = (xbox::services::achievements::achievement *)ptr;
      v187 = (xbox::services::achievements::achievement *)((char *)xbox::services::achievements::achievement::~achievement(v187)
                                                         + 152);
    while ( v188 != v187 );
    v187 = (xbox::services::achievements::achievement *)ptr;
  if ( v187 )
    operator delete((void *)v187);
}


void __fastcall Social::User::getDisplayName(Social::User *this, int a2)
{
  int v2; // r5@1
  int *v3; // r4@1
  int *v4; // r1@1

  v2 = a2;
  v3 = (int *)this;
  v4 = (int *)(*(int (__fastcall **)(_DWORD))(*(_DWORD *)a2 + 44))(a2);
  if ( *(_DWORD *)(*v4 - 12) )
    sub_119C854(v3, v4);
  else
    Social::XboxLiveUserManager::getCurrentGamertag((Social::XboxLiveUserManager *)v3, *(_DWORD *)(v2 + 24));
}


void __fastcall Social::Events::Event::addMeasurement<int>(int a1, int *a2, int a3, int *a4)
{
  Social::Events::Event::addMeasurement<int>(a1, a2, a3, a4);
}


void __fastcall Social::GameConnectionInfo::toJson(Social::GameConnectionInfo *this, web::json::value *a2)
{
  Social::GameConnectionInfo::toJson(this, a2);
}


signed int __fastcall Social::XboxLiveUserManager::refreshMuteListIfNeeded(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r8@1
  signed __int64 v2; // kr00_8@1
  int v3; // r2@1
  int v4; // r4@1
  signed int result; // r0@1
  signed int v6; // r1@3
  int v7; // [sp+0h] [bp-30h]@8
  __int64 v8; // [sp+8h] [bp-28h]@1

  v1 = this;
  sub_119D2DC(&v8);
  v2 = 1000000000LL * *((_DWORD *)v1 + 6);
  v4 = HIDWORD(v2) + 1000000000 * *((_DWORD *)v1 + 7);
  v3 = (unsigned __int64)(v8 - *((_QWORD *)v1 + 2)) >> 32;
  result = 0;
  if ( (signed int)v8 - *((_DWORD *)v1 + 4) < (unsigned int)v2 )
    result = 1;
  v6 = 0;
  if ( v3 < v4 )
    v6 = 1;
  if ( v3 == v4 )
    v6 = result;
  if ( !v6 )
  {
    Social::XboxLiveUserManager::refreshMuteList(v1);
    sub_119D2DC(&v7);
    *((_QWORD *)v1 + 2) = *(_QWORD *)&v7;
    result = 300;
    *((_DWORD *)v1 + 6) = 300;
    *((_DWORD *)v1 + 7) = 0;
  }
  return result;
}


signed int __fastcall Social::MultiplayerXBL::isPlayerOnline(int a1, int *a2)
{
  int *v2; // r5@1
  Social::XboxLiveUserManager *v3; // r0@2
  int v4; // r4@2
  int v5; // r6@2
  unsigned int *v6; // r1@3
  unsigned int v7; // r0@5
  unsigned int *v8; // r7@9
  unsigned int v9; // r0@11
  int v10; // r4@17
  unsigned int *v11; // r1@18
  unsigned int v12; // r0@20
  signed int v13; // r8@22
  unsigned int *v15; // r6@26
  unsigned int v16; // r0@28
  char *v17; // r0@34
  char *v18; // r0@37
  char *v19; // r6@37
  int v20; // r1@37 OVERLAPPED
  int v21; // r2@37 OVERLAPPED
  char *v22; // r9@37
  signed int v23; // r0@37
  unsigned int v24; // r10@40
  int v25; // r12@41
  char *v26; // r6@41
  int v27; // r4@42
  unsigned int *v28; // r4@43
  unsigned int v29; // r0@45
  int v30; // r6@50
  unsigned int *v31; // r1@51
  unsigned int v32; // r0@53
  unsigned int *v33; // r4@57
  unsigned int v34; // r0@59
  int v35; // r6@64
  unsigned int *v36; // r1@65
  unsigned int v37; // r0@67
  unsigned int *v38; // r4@71
  unsigned int v39; // r0@73
  xbox::services::multiplayer::manager::multiplayer_member **v40; // r4@79
  _DWORD *v41; // r0@80
  char *v42; // r6@80
  size_t v43; // r2@80
  char *v44; // r7@89
  int v45; // r5@90
  unsigned int *v46; // r1@91
  unsigned int v47; // r0@93
  unsigned int *v48; // r6@97
  unsigned int v49; // r0@99
  int v50; // r4@107
  unsigned int *v51; // r1@108
  unsigned int v52; // r0@110
  unsigned int *v53; // r6@114
  unsigned int v54; // r0@116
  unsigned int *v55; // r2@121
  signed int v56; // r1@123
  void *s2; // [sp+0h] [bp-50h]@78
  int v58; // [sp+4h] [bp-4Ch]@37
  int v59; // [sp+8h] [bp-48h]@64
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v60; // [sp+Ch] [bp-44h]@37
  int v61; // [sp+10h] [bp-40h]@50
  int v62; // [sp+14h] [bp-3Ch]@17
  int v63; // [sp+18h] [bp-38h]@17
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v64; // [sp+1Ch] [bp-34h]@17
  int v65; // [sp+20h] [bp-30h]@107
  Social::User *v66; // [sp+24h] [bp-2Ch]@2
  int v67; // [sp+28h] [bp-28h]@2

  v2 = a2;
  if ( !*(_DWORD *)(*a2 - 12) )
    goto LABEL_132;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v66, *(_DWORD *)(a1 + 44));
  v3 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v66);
  v4 = Social::XboxLiveUserManager::isSignedIn(v3);
  v5 = v67;
  if ( v67 )
  {
    v6 = (unsigned int *)(v67 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  }
  if ( v4 )
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v62);
    xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
      (xbox::services::multiplayer::manager::multiplayer_manager *)&v64,
      v62);
    v10 = v63;
    if ( v63 )
      v11 = (unsigned int *)(v63 + 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        v15 = (unsigned int *)(v10 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
    if ( v64 )
      v17 = xbox::services::multiplayer::manager::multiplayer_lobby_session::local_members(v64);
      if ( *(_QWORD *)v17 >> 32 == (unsigned int)*(_QWORD *)v17 )
        v13 = 0;
        xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v58);
        xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
          (xbox::services::multiplayer::manager::multiplayer_manager *)&v60,
          v58);
        v18 = xbox::services::multiplayer::manager::multiplayer_lobby_session::members(v60);
        v19 = v18;
        *(_QWORD *)&v20 = *(_QWORD *)v18;
        v22 = 0;
        v23 = v21 - v20;
        if ( (v21 - v20) >> 3 )
          if ( (unsigned int)(v23 >> 3) >= 0x20000000 )
            sub_119C874();
          v22 = (char *)operator new(v23);
          *(_QWORD *)&v20 = *(_QWORD *)v19;
        v24 = (unsigned int)v22;
        if ( v20 != v21 )
          v25 = -v20;
          v26 = v22;
          {
            *(_DWORD *)v26 = *(_DWORD *)v20;
            v27 = *(_DWORD *)(v20 + 4);
            *((_DWORD *)v26 + 1) = v27;
            if ( v27 )
            {
              v28 = (unsigned int *)(v27 + 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v29 = __ldrex(v28);
                while ( __strex(v29 + 1, v28) );
              }
              else
                ++*v28;
            }
            v20 += 8;
            v26 += 8;
          }
          while ( v20 != v21 );
          v24 = (unsigned int)&v22[((v21 - 8 + v25) & 0xFFFFFFF8) + 8];
        v30 = v61;
        if ( v61 )
          v31 = (unsigned int *)(v61 + 4);
          if ( &pthread_create )
            __dmb();
            do
              v32 = __ldrex(v31);
            while ( __strex(v32 - 1, v31) );
          else
            v32 = (*v31)--;
          if ( v32 == 1 )
            v33 = (unsigned int *)(v30 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 8))(v30);
            if ( &pthread_create )
              __dmb();
              do
                v34 = __ldrex(v33);
              while ( __strex(v34 - 1, v33) );
            else
              v34 = (*v33)--;
            if ( v34 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 12))(v30);
        v35 = v59;
        if ( v59 )
          v36 = (unsigned int *)(v59 + 4);
              v37 = __ldrex(v36);
            while ( __strex(v37 - 1, v36) );
            v37 = (*v36)--;
          if ( v37 == 1 )
            v38 = (unsigned int *)(v35 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 8))(v35);
                v39 = __ldrex(v38);
              while ( __strex(v39 - 1, v38) );
              v39 = (*v38)--;
            if ( v39 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 12))(v35);
        utility::conversions::to_string_t((int *)&s2, v2);
        if ( v22 == (char *)v24 )
          v42 = (char *)s2;
LABEL_85:
          v13 = 0;
          v40 = (xbox::services::multiplayer::manager::multiplayer_member **)v22;
          while ( 1 )
            v41 = *(_DWORD **)xbox::services::multiplayer::manager::multiplayer_member::debug_gamertag(*v40);
            v42 = (char *)s2;
            v43 = *(v41 - 3);
            if ( v43 == *((_DWORD *)s2 - 3) && !memcmp(v41, s2, v43) )
              break;
            v40 += 2;
            if ( (xbox::services::multiplayer::manager::multiplayer_member **)v24 == v40 )
              goto LABEL_85;
          v13 = 1;
        if ( (int *)(v42 - 12) != &dword_28898C0 )
          v55 = (unsigned int *)(v42 - 4);
              v56 = __ldrex(v55);
            while ( __strex(v56 - 1, v55) );
            v56 = (*v55)--;
          if ( v56 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v42 - 12);
        if ( v22 != (char *)v24 )
          v44 = v22;
            v45 = *((_DWORD *)v44 + 1);
            if ( v45 )
              v46 = (unsigned int *)(v45 + 4);
                  v47 = __ldrex(v46);
                while ( __strex(v47 - 1, v46) );
                v47 = (*v46)--;
              if ( v47 == 1 )
                v48 = (unsigned int *)(v45 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v45 + 8))(v45);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v49 = __ldrex(v48);
                  while ( __strex(v49 - 1, v48) );
                }
                else
                  v49 = (*v48)--;
                if ( v49 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v45 + 12))(v45);
            v44 += 8;
          while ( v44 != (char *)v24 );
        if ( v22 )
          operator delete(v22);
      v13 = 0;
    v50 = v65;
    if ( v65 )
      v51 = (unsigned int *)(v65 + 4);
          v52 = __ldrex(v51);
        while ( __strex(v52 - 1, v51) );
        v52 = (*v51)--;
      if ( v52 == 1 )
        v53 = (unsigned int *)(v50 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v50 + 8))(v50);
            v54 = __ldrex(v53);
          while ( __strex(v54 - 1, v53) );
          v54 = (*v53)--;
        if ( v54 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v50 + 12))(v50);
  else
LABEL_132:
    v13 = 0;
  return v13;
}


signed int __fastcall Social::User_generic::_checkPlatformUserXBLSignInConstraints(Social::User_generic *this)
{
  int v1; // r0@1
  signed int v2; // r1@1

  v1 = Social::User::getType(this);
  v2 = 0;
  if ( !v1 )
    v2 = 1;
  return v2;
}


void __fastcall Social::MultiplayerXBL::_buildRichPresence(Social::MultiplayerXBL *this, Social::User *a2, Level *a3)
{
  Social::User *v3; // r4@1
  Social::MultiplayerXBL *v4; // r6@1
  Level *v5; // r5@1
  Social::XboxLiveUserManager *v6; // r0@1
  char *v7; // r0@3
  int v8; // r0@3
  void *v9; // r0@3
  int v10; // r4@4
  void *v11; // r0@4
  char *v12; // r0@5
  unsigned int *v13; // r2@7
  signed int v14; // r1@9
  unsigned int *v15; // r2@11
  signed int v16; // r1@13
  unsigned int *v17; // r2@15
  signed int v18; // r1@17
  int v19; // [sp+0h] [bp-20h]@4
  int v20; // [sp+4h] [bp-1Ch]@3
  char *v21; // [sp+8h] [bp-18h]@1

  v3 = a2;
  v4 = this;
  v5 = a3;
  v6 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(a2);
  Social::XboxLiveUserManager::needToRefreshPrivacyLists(v6);
  v21 = (char *)&unk_28898CC;
  if ( (*(int (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v4 + 116))(v4) == 1 )
    sub_119CAD8((void **)&v21, "Realm_", (_BYTE *)6);
  v7 = Level::getLevelData(v5);
  v8 = LevelData::getGameType((LevelData *)v7);
  GameTypeConv::gameTypeToNonLocString((void **)&v20, v8);
  sub_119C8A4((const void **)&v21, (const void **)&v20);
  v9 = (void *)(v20 - 12);
  if ( (int *)(v20 - 12) != &dword_28898C0 )
  {
    v13 = (unsigned int *)(v20 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
    }
    else
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v9);
  }
  v10 = Social::User::getLiveUser(v3);
  sub_119C854(&v19, (int *)&v21);
  Social::XboxLiveUserManager::updateRichPresence(v10, &v19);
  v11 = (void *)(v19 - 12);
  if ( (int *)(v19 - 12) != &dword_28898C0 )
    v15 = (unsigned int *)(v19 - 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v11);
  v12 = v21 - 12;
  if ( (int *)(v21 - 12) != &dword_28898C0 )
    v17 = (unsigned int *)(v21 - 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
      v18 = (*v17)--;
    if ( v18 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v12);
}


Social::XboxLiveUserInfo *__fastcall Social::XboxLiveUserInfo::~XboxLiveUserInfo(Social::XboxLiveUserInfo *this)
{
  Social::XboxLiveUserInfo *v1; // r10@1
  void *v2; // r5@1
  void *v3; // r7@1
  unsigned int *v4; // r2@3
  signed int v5; // r1@5
  int *v6; // r0@11
  _DWORD *v7; // r7@16
  unsigned int *v8; // r2@18
  signed int v9; // r1@20
  _DWORD *v10; // r6@26
  Social::XboxProfile *v11; // r0@26
  int v12; // r1@26
  void *v13; // r0@26
  char *v14; // r0@28
  int v15; // r5@31
  int v16; // r1@32
  void *v17; // r0@32
  int v18; // r0@34
  unsigned int *v19; // r2@35
  unsigned int v20; // r1@37
  unsigned int *v22; // r2@43
  signed int v23; // r1@45

  v1 = this;
  v3 = (void *)(*((_QWORD *)this + 6) >> 32);
  v2 = (void *)*((_QWORD *)this + 6);
  if ( v2 != v3 )
  {
    do
    {
      v6 = (int *)(*(_DWORD *)v2 - 12);
      if ( v6 != &dword_28898C0 )
      {
        v4 = (unsigned int *)(*(_DWORD *)v2 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v5 = __ldrex(v4);
          while ( __strex(v5 - 1, v4) );
        }
        else
          v5 = (*v4)--;
        if ( v5 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v6);
      }
      v2 = (char *)v2 + 4;
    }
    while ( v2 != v3 );
    v2 = (void *)*((_DWORD *)v1 + 12);
  }
  if ( v2 )
    operator delete(v2);
  v7 = (_DWORD *)*((_DWORD *)v1 + 7);
  while ( v7 )
    v10 = v7;
    v11 = (Social::XboxProfile *)(v7 + 2);
    v7 = (_DWORD *)*v7;
    Social::XboxProfile::~XboxProfile(v11);
    v12 = v10[1];
    v13 = (void *)(v12 - 12);
    if ( (int *)(v12 - 12) != &dword_28898C0 )
      v8 = (unsigned int *)(v12 - 4);
      if ( &pthread_create )
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      else
        v9 = (*v8)--;
      if ( v9 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v13);
    operator delete(v10);
  _aeabi_memclr4(*(_QWORD *)((char *)v1 + 20), 4 * (*(_QWORD *)((char *)v1 + 20) >> 32));
  *((_DWORD *)v1 + 7) = 0;
  *((_DWORD *)v1 + 8) = 0;
  v14 = (char *)*((_DWORD *)v1 + 5);
  if ( v14 && (char *)v1 + 44 != v14 )
    operator delete(v14);
  v15 = *((_DWORD *)v1 + 3);
  if ( v15 )
    v16 = *(_DWORD *)(v15 + 8);
    v17 = (void *)(v16 - 12);
    if ( (int *)(v16 - 12) != &dword_28898C0 )
      v22 = (unsigned int *)(v16 - 4);
          v23 = __ldrex(v22);
        while ( __strex(v23 - 1, v22) );
        v23 = (*v22)--;
      if ( v23 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v17);
    operator delete((void *)v15);
  *((_DWORD *)v1 + 3) = 0;
  v18 = *((_DWORD *)v1 + 1);
  if ( v18 )
    v19 = (unsigned int *)(v18 + 8);
    if ( &pthread_create )
      __dmb();
      do
        v20 = __ldrex(v19);
      while ( __strex(v20 - 1, v19) );
    else
      v20 = (*v19)--;
    if ( v20 == 1 )
      (*(void (**)(void))(*(_DWORD *)v18 + 12))();
  return v1;
}


Social::XboxProfile *__fastcall Social::XboxProfile::~XboxProfile(Social::XboxProfile *this)
{
  Social::XboxProfile *v1; // r5@1
  int v2; // r1@1
  void *v3; // r0@1
  int v4; // r1@2
  void *v5; // r0@2
  int v6; // r1@3
  void *v7; // r0@3
  int v8; // r1@4
  void *v9; // r0@4
  int v10; // r1@5
  void *v11; // r0@5
  int v12; // r1@6
  void *v13; // r0@6
  int v14; // r1@7
  void *v15; // r0@7
  int *v16; // r0@8
  unsigned int *v18; // r2@10
  signed int v19; // r1@12
  unsigned int *v20; // r2@14
  signed int v21; // r1@16
  unsigned int *v22; // r2@18
  signed int v23; // r1@20
  unsigned int *v24; // r2@22
  signed int v25; // r1@24
  unsigned int *v26; // r2@26
  signed int v27; // r1@28
  unsigned int *v28; // r2@30
  signed int v29; // r1@32
  unsigned int *v30; // r2@34
  signed int v31; // r1@36
  unsigned int *v32; // r2@38
  signed int v33; // r1@40

  v1 = this;
  v2 = *((_DWORD *)this + 10);
  v3 = (void *)(v2 - 12);
  if ( (int *)(v2 - 12) != &dword_28898C0 )
  {
    v18 = (unsigned int *)(v2 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v19 = __ldrex(v18);
      while ( __strex(v19 - 1, v18) );
    }
    else
      v19 = (*v18)--;
    if ( v19 <= 0 )
      j_j_j_j_j__ZdlPv_9(v3);
  }
  v4 = *((_DWORD *)v1 + 9);
  v5 = (void *)(v4 - 12);
  if ( (int *)(v4 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v4 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j_j__ZdlPv_9(v5);
  v6 = *((_DWORD *)v1 + 8);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v22 = (unsigned int *)(v6 - 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 <= 0 )
      j_j_j_j_j__ZdlPv_9(v7);
  v8 = *((_DWORD *)v1 + 4);
  v9 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v8 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j_j__ZdlPv_9(v9);
  v10 = *((_DWORD *)v1 + 3);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v26 = (unsigned int *)(v10 - 4);
        v27 = __ldrex(v26);
      while ( __strex(v27 - 1, v26) );
      v27 = (*v26)--;
    if ( v27 <= 0 )
      j_j_j_j_j__ZdlPv_9(v11);
  v12 = *((_DWORD *)v1 + 2);
  v13 = (void *)(v12 - 12);
  if ( (int *)(v12 - 12) != &dword_28898C0 )
    v28 = (unsigned int *)(v12 - 4);
        v29 = __ldrex(v28);
      while ( __strex(v29 - 1, v28) );
      v29 = (*v28)--;
    if ( v29 <= 0 )
      j_j_j_j_j__ZdlPv_9(v13);
  v14 = *((_DWORD *)v1 + 1);
  v15 = (void *)(v14 - 12);
  if ( (int *)(v14 - 12) != &dword_28898C0 )
    v30 = (unsigned int *)(v14 - 4);
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j_j__ZdlPv_9(v15);
  v16 = (int *)(*(_DWORD *)v1 - 12);
  if ( v16 != &dword_28898C0 )
    v32 = (unsigned int *)(*(_DWORD *)v1 - 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 <= 0 )
      j_j_j_j_j__ZdlPv_9(v16);
  return v1;
}


void __fastcall Social::XboxLiveUserManager::getAuthorizationHeader(int a1, int *a2, int a3)
{
  int v3; // r6@1
  int v4; // r4@1
  xbox::services::system::xbox_live_user *v5; // r0@1
  int *v6; // r5@1
  bool v7; // zf@1
  unsigned int v8; // r0@5
  void (__fastcall *v9)(char *, int, signed int); // r3@7
  int v10; // r4@9
  unsigned int *v11; // r1@10
  unsigned int v12; // r0@12
  void *v13; // r0@15
  unsigned int *v14; // r2@17
  signed int v15; // r1@19
  unsigned int *v16; // r5@23
  unsigned int v17; // r0@25
  void *v18; // r4@35
  unsigned int *v19; // r1@36
  unsigned int v20; // r0@38
  unsigned int *v21; // r5@42
  unsigned int v22; // r0@44
  void *v23; // [sp+0h] [bp-40h]@0
  int v24; // [sp+4h] [bp-3Ch]@0
  int v25; // [sp+8h] [bp-38h]@9
  char v26; // [sp+Ch] [bp-34h]@8
  int v27; // [sp+10h] [bp-30h]@9
  int v28; // [sp+14h] [bp-2Ch]@7
  int v29; // [sp+18h] [bp-28h]@8
  char v30; // [sp+1Ch] [bp-24h]@7
  void *v31; // [sp+20h] [bp-20h]@9
  char v32; // [sp+24h] [bp-1Ch]@9
  int v33; // [sp+28h] [bp-18h]@9

  v3 = a1;
  v4 = a3;
  v5 = *(xbox::services::system::xbox_live_user **)(a1 + 136);
  v6 = a2;
  v7 = v5 == 0;
  if ( v5 )
    v7 = *(_DWORD *)(v3 + 144) == 0;
  if ( v7
    || xbox::services::system::xbox_live_user::is_signed_in(v5) != 1
    || (v8 = *(_WORD *)(v3 + 124), v8 > 0xFF)
    || (_BYTE)v8 )
  {
    sub_119C884((void **)&v25, (const char *)&unk_257BC67);
    if ( !*(_DWORD *)(v4 + 8) )
      sub_119C8E4();
    (*(void (__fastcall **)(int, signed int, int *))(v4 + 12))(v4, 1, &v25);
    v13 = (void *)(v25 - 12);
    if ( (int *)(v25 - 12) != &dword_28898C0 )
    {
      v14 = (unsigned int *)(v25 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
      }
      else
        v15 = (*v14)--;
      if ( v15 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v13);
    }
  }
  else
    Social::XboxLiveUserManager::getAuthorizationHeader((int)&v30, v3, v6);
    v28 = 0;
    v9 = *(void (__fastcall **)(char *, int, signed int))(v4 + 8);
    if ( v9 )
      v9(&v26, v4, 2);
      v29 = *(_DWORD *)(v4 + 12);
      v28 = *(_DWORD *)(v4 + 8);
    sub_1042058((int)&v32, (int)&v30, (int)&v26, (int)v9, v23, v24, v25, *(int *)&v26, v27, v28, v29, *(int *)&v30, v31);
    v10 = v33;
    if ( v33 )
      v11 = (unsigned int *)(v33 + 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        v16 = (unsigned int *)(v10 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
        if ( &pthread_create )
        {
          __dmb();
          do
            v17 = __ldrex(v16);
          while ( __strex(v17 - 1, v16) );
        }
        else
          v17 = (*v16)--;
        if ( v17 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
    if ( v28 )
      ((void (*)(void))v28)();
    v18 = v31;
    if ( v31 )
      v19 = (unsigned int *)((char *)v31 + 4);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        v21 = (unsigned int *)((char *)v18 + 8);
        (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 8))(v18);
            v22 = __ldrex(v21);
          while ( __strex(v22 - 1, v21) );
          v22 = (*v21)--;
        if ( v22 == 1 )
          (*(void (__fastcall **)(void *))(*(_DWORD *)v18 + 12))(v18);
}


void __fastcall Social::Events::Event::addProperty<short>(int a1, int *a2, _WORD *a3)
{
  Social::Events::Event::addProperty<short>(a1, a2, a3);
}


int __fastcall Social::ImageService::_clearImageCache(int result)
{
  int v1; // r0@2
  void *v2; // [sp+4h] [bp-34h]@2
  int (*v3)(void); // [sp+Ch] [bp-2Ch]@2
  int (__fastcall *v4)(int, __int32, int); // [sp+10h] [bp-28h]@2
  int v5; // [sp+14h] [bp-24h]@2
  int v6; // [sp+18h] [bp-20h]@2
  char v7; // [sp+1Ch] [bp-1Ch]@2
  int (*v8)(void); // [sp+24h] [bp-14h]@2

  if ( *(_BYTE *)(result + 4) )
  {
    v1 = *(_DWORD *)(result + 8);
    v5 = v1;
    v6 = *(_DWORD *)(v1 - 12);
    v2 = operator new(1u);
    v3 = (int (*)(void))sub_1386F18;
    v4 = sub_1386E98;
    result = (int)Core::FileSystem::iterateOverDirectory((int)&v7, (__int64 *)&v5, 194LL, (int)&v2);
    if ( v8 )
      result = v8();
    if ( v3 )
      result = v3();
  }
  return result;
}


RakNet *__fastcall Social::MultiplayerXBL::_natDiscovery(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  bool v2; // zf@1
  char *v3; // r0@4
  char *v4; // r6@4
  _BYTE *v5; // r0@4
  void **v6; // r0@7
  void *v7; // r0@7
  void *v8; // r0@8
  unsigned int *v9; // r2@9
  signed int v10; // r1@11
  void **v11; // r0@14
  void *v12; // r0@14
  unsigned int *v13; // r2@21
  signed int v14; // r1@23
  RakNet *result; // r0@28
  unsigned int *v16; // r2@34
  signed int v17; // r1@36
  int v18; // [sp+8h] [bp-200h]@14
  int v19; // [sp+10h] [bp-1F8h]@14
  int v20; // [sp+18h] [bp-1F0h]@7
  int v21; // [sp+20h] [bp-1E8h]@7
  char v22; // [sp+24h] [bp-1E4h]@4
  char v23; // [sp+2Ch] [bp-1DCh]@13
  char v24; // [sp+C4h] [bp-144h]@4
  int v25; // [sp+C8h] [bp-140h]@4
  int v26; // [sp+15Ch] [bp-ACh]@1
  RakNet *v27; // [sp+1F4h] [bp-14h]@1

  v1 = this;
  v27 = _stack_chk_guard;
  (*(void (__fastcall **)(int *))(**((_DWORD **)this + 18) + 40))(&v26);
  v2 = (v26 & 0xFF0000) == 0;
  if ( v26 & 0xFF0000 )
    v2 = (unsigned __int8)v26 == 0;
  if ( v2 )
  {
    (*(void (__fastcall **)(char *))(**((_DWORD **)v1 + 18) + 40))(&v23);
    if ( !v23 )
    {
      (*(void (**)(void))(**((_DWORD **)v1 + 18) + 36))();
      goto LABEL_28;
    }
    sub_119C884((void **)&v19, "NAT");
    v11 = sub_119C884((void **)&v18, "Client NAT discovery failed");
    Social::MultiplayerService::_changeMultiplayerState((int)v1, 0, (const char **)&v19, 0, (const char **)v11);
    v12 = (void *)(v18 - 12);
    if ( (int *)(v18 - 12) != &dword_28898C0 )
      v16 = (unsigned int *)(v18 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
      }
      else
        v17 = (*v16)--;
      if ( v17 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v12);
    v8 = (void *)(v19 - 12);
    if ( (int *)(v19 - 12) != &dword_28898C0 )
      v9 = (unsigned int *)(v19 - 4);
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
LABEL_26:
        if ( v10 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v8);
        goto LABEL_28;
LABEL_25:
      v10 = (*v9)--;
      goto LABEL_26;
  }
  else
    (*(void (__fastcall **)(char *))(**((_DWORD **)v1 + 18) + 40))(&v24);
    v3 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v25, 0, 124);
    v4 = v3;
    v5 = (_BYTE *)strlen(v3);
    sub_119CAD8((void **)v1 + 109, v4, v5);
    if ( RegionalOffer::shouldCheckRegion((RegionalOffer *)&v22) == 1
      && RegionalOffer::isInRegion((int)&v22, (int *)v1 + 109) == 1 )
      *((_BYTE *)v1 + 440) = 1;
    sub_119C884((void **)&v21, "NAT");
    v6 = sub_119C884((void **)&v20, "Client succeeded in detecting NAT");
    Social::MultiplayerService::_changeMultiplayerState((int)v1, 0, (const char **)&v21, 0, (const char **)v6);
    v7 = (void *)(v20 - 12);
    if ( (int *)(v20 - 12) != &dword_28898C0 )
      v13 = (unsigned int *)(v20 - 4);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v7);
    v8 = (void *)(v21 - 12);
    if ( (int *)(v21 - 12) != &dword_28898C0 )
      v9 = (unsigned int *)(v21 - 4);
        goto LABEL_26;
      goto LABEL_25;
LABEL_28:
  result = (RakNet *)(_stack_chk_guard - v27);
  if ( _stack_chk_guard != v27 )
    _stack_chk_fail(result);
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::removeFriend(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  int *v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  void *v11; // r9@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  __int64 v16; // kr00_8@25
  unsigned int *v17; // r1@26
  unsigned int v18; // r2@28
  char *v19; // r0@31
  unsigned int v20; // r0@33
  void (__fastcall *v21)(int *, int, signed int); // r3@36
  int v22; // r5@38
  unsigned int *v23; // r1@39
  unsigned int v24; // r0@41
  unsigned int *v25; // r6@45
  unsigned int v26; // r0@47
  void *v27; // r0@54
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  void *v31; // r6@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int result; // r0@93
  unsigned int *v41; // r2@99
  signed int v42; // r1@101
  void *v43; // [sp+0h] [bp-50h]@31
  int v44; // [sp+4h] [bp-4Ch]@31
  int v45; // [sp+8h] [bp-48h]@36
  int v46; // [sp+Ch] [bp-44h]@37
  int v47; // [sp+10h] [bp-40h]@38
  int v48; // [sp+14h] [bp-3Ch]@36
  int v49; // [sp+18h] [bp-38h]@37
  char v50; // [sp+1Ch] [bp-34h]@31
  void *v51; // [sp+20h] [bp-30h]@38
  char v52; // [sp+24h] [bp-2Ch]@38
  int v53; // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(void **)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_QWORD *)(v3 + 144);
  if ( HIDWORD(v16) )
    v17 = (unsigned int *)(HIDWORD(v16) + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
      ++*v17;
  v19 = xbox::services::xbox_live_context::social_service((xbox::services::xbox_live_context *)v16);
  xbox::services::social::social_service::remove_friend((int)&v50, (int)v19, v6);
  v43 = v11;
  v44 = v5;
      v20 = __ldrex(v12);
    while ( __strex(v20 + 1, v12) );
  sub_119C854(&v45, v6);
  v48 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  if ( v21 )
    v21(&v46, v4, 2);
    v49 = *(_DWORD *)(v4 + 12);
    v48 = *(_DWORD *)(v4 + 8);
  sub_103B41C((int)&v52, (int)&v50, (int)&v43, (int)v21, v43, v44, v45, v46, v47, v48, v49, *(int *)&v50, v51);
  v22 = v53;
  if ( v53 )
    v23 = (unsigned int *)(v53 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
      }
      else
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  if ( v48 )
    ((void (*)(void))v48)();
  v27 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v45 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
  v28 = v44;
  if ( v44 )
    v29 = (unsigned int *)(v44 + 8);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 == 1 )
      (*(void (**)(void))(*(_DWORD *)v28 + 12))();
  v31 = v51;
  if ( v51 )
    v32 = (unsigned int *)((char *)v51 + 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      v34 = (unsigned int *)((char *)v31 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
    v36 = (unsigned int *)(HIDWORD(v16) + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(HIDWORD(v16) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 8))(HIDWORD(v16));
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 12))(HIDWORD(v16));
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


int __fastcall Social::XboxLiveUserManager::_updateUserBlockWithGamertag(int a1, int *a2, int **a3, int a4)
{
  int v4; // r9@0
  int v5; // r6@1
  int *v6; // r8@1
  int v7; // r7@1
  int v8; // r4@1
  unsigned int v9; // r0@2
  unsigned int *v10; // r5@2
  unsigned int v11; // r1@5
  unsigned int v12; // r2@6
  bool v13; // zf@7
  signed int v14; // r0@10
  unsigned int v15; // r0@15
  unsigned int *v16; // r5@19
  unsigned int v17; // r0@21
  unsigned int *v18; // r0@27
  unsigned int v19; // r1@29
  int v20; // r0@32
  unsigned int *v21; // r2@33
  unsigned int v22; // r1@35
  int v23; // r0@40
  unsigned int *v24; // r2@41
  unsigned int v25; // r1@43
  int result; // r0@48
  unsigned int *v27; // r2@49
  unsigned int v28; // r1@51
  int v29; // [sp+4h] [bp-34h]@26
  int v30; // [sp+8h] [bp-30h]@26
  char v31; // [sp+Ch] [bp-2Ch]@32
  int v32; // [sp+10h] [bp-28h]@32
  int v33; // [sp+14h] [bp-24h]@1
  int v34; // [sp+18h] [bp-20h]@1

  v5 = a1;
  v6 = a2;
  v7 = a4;
  Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v33, a1, a3);
  v8 = v34;
  if ( v34 )
  {
    v9 = *(_DWORD *)(v34 + 4);
    v10 = (unsigned int *)(v34 + 4);
    while ( v9 )
    {
      __dmb();
      v11 = __ldrex(v10);
      if ( v11 == v9 )
      {
        v12 = __strex(v9 + 1, v10);
        v9 = v11;
        if ( !v12 )
        {
          __dmb();
          v13 = *v10 == 0;
          if ( *v10 )
          {
            v4 = v33;
            v13 = v33 == 0;
          }
          if ( !v13 )
            EntityInteraction::setInteractText((int *)(v4 + 4), v6);
            v14 = 2;
            if ( v7 )
              v14 = 1;
            *(_DWORD *)(v4 + 28) = v14;
          if ( &pthread_create )
            __dmb();
            do
              v15 = __ldrex(v10);
            while ( __strex(v15 - 1, v10) );
          else
            v15 = (*v10)--;
          if ( v15 == 1 )
            v16 = (unsigned int *)(v8 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
            if ( &pthread_create )
            {
              __dmb();
              do
                v17 = __ldrex(v16);
              while ( __strex(v17 - 1, v16) );
            }
            else
              v17 = (*v16)--;
            if ( v17 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
          break;
        }
      }
      else
        __clrex();
    }
  }
  v29 = v33;
  v30 = v34;
    v18 = (unsigned int *)(v34 + 8);
    if ( &pthread_create )
      do
        v19 = __ldrex(v18);
      while ( __strex(v19 + 1, v18) );
    else
      ++*v18;
  Social::XboxLiveUserManager::_getUserProfileDataWithGamertag((int)&v31, v5, (int **)v6, (int)&v29);
  v20 = v32;
  if ( v32 )
    v21 = (unsigned int *)(v32 + 8);
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
      v22 = (*v21)--;
    if ( v22 == 1 )
      (*(void (**)(void))(*(_DWORD *)v20 + 12))();
  v23 = v30;
  if ( v30 )
    v24 = (unsigned int *)(v30 + 8);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 == 1 )
      (*(void (**)(void))(*(_DWORD *)v23 + 12))();
  result = v34;
    v27 = (unsigned int *)(v34 + 8);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 == 1 )
      result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


int __fastcall Social::XboxLiveUserManager::isMutedPlayer(int a1, int **a2)
{
  int v2; // r0@1
  int result; // r0@2

  v2 = std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a1 + 80),
         a2);
  if ( v2 )
  {
    result = *(_DWORD *)(*(_DWORD *)(v2 + 8) + 24);
    if ( result != 1 )
      result = 0;
  }
  else
    result = 0;
  return result;
}


void __fastcall Social::XboxLiveUserManager::getAuthorizationHeader(int a1, int a2, int *a3)
{
  int v3; // r6@1
  int v4; // r4@1
  xbox::services::system::xbox_live_user *v5; // r0@1
  int *v6; // r5@1
  bool v7; // zf@1
  unsigned int v8; // r0@5
  int v9; // r6@7
  void **v10; // r0@7
  int v11; // r4@7
  unsigned int *v12; // r1@8
  unsigned int v13; // r0@10
  int v14; // r5@12
  unsigned int *v15; // r1@13
  unsigned int v16; // r0@15
  unsigned int *v17; // r4@19
  unsigned int v18; // r0@21
  char *v19; // r0@26
  unsigned int *v20; // r2@28
  signed int v21; // r1@30
  unsigned int *v22; // r5@34
  unsigned int v23; // r0@36
  void *v24; // r0@41
  void *v25; // r0@42
  unsigned int *v26; // r2@52
  signed int v27; // r1@54
  unsigned int *v28; // r2@56
  signed int v29; // r1@58
  int v30; // [sp+8h] [bp-68h]@12
  int v31; // [sp+Ch] [bp-64h]@12
  int v32; // [sp+10h] [bp-60h]@12
  int v33; // [sp+14h] [bp-5Ch]@12
  char v34; // [sp+1Ch] [bp-54h]@12
  int v35; // [sp+20h] [bp-50h]@12
  int v36; // [sp+24h] [bp-4Ch]@12
  int v37; // [sp+28h] [bp-48h]@12
  int v38; // [sp+2Ch] [bp-44h]@12
  __int16 v39; // [sp+30h] [bp-40h]@12
  char *v40; // [sp+34h] [bp-3Ch]@12
  int v41; // [sp+3Ch] [bp-34h]@7
  int v42; // [sp+40h] [bp-30h]@7
  int v43; // [sp+48h] [bp-28h]@7
  char v44; // [sp+4Ch] [bp-24h]@7
  int v45; // [sp+50h] [bp-20h]@7
  int v46; // [sp+54h] [bp-1Ch]@12
  int v47; // [sp+58h] [bp-18h]@12

  v3 = a2;
  v4 = a1;
  v5 = *(xbox::services::system::xbox_live_user **)(a2 + 136);
  v6 = a3;
  v7 = v5 == 0;
  if ( v5 )
    v7 = *(_DWORD *)(a2 + 144) == 0;
  if ( v7
    || xbox::services::system::xbox_live_user::is_signed_in(v5) != 1
    || (v8 = *(_WORD *)(v3 + 124), v8 > 0xFF)
    || (_BYTE)v8 )
  {
    v40 = (char *)&unk_28898CC;
    pplx::get_ambient_scheduler((pplx *)&v46);
    v14 = v47;
    v30 = v46;
    v31 = v47;
    v32 = v46;
    v33 = 0;
    v34 = 0;
    v39 = 0;
    v37 = 0;
    v38 = 0;
    v35 = 0;
    v36 = 0;
    pplx::task_from_result<std::string>(v4, (int *)&v40, (int)&v30);
    if ( v14 )
    {
      v15 = (unsigned int *)(v14 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 == 1 )
        v17 = (unsigned int *)(v14 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
        }
        else
          v18 = (*v17)--;
        if ( v18 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
    }
    v19 = v40 - 12;
    if ( (int *)(v40 - 12) != &dword_28898C0 )
      v20 = (unsigned int *)(v40 - 4);
          v21 = __ldrex(v20);
        while ( __strex(v21 - 1, v20) );
        goto LABEL_49;
      goto LABEL_48;
  }
  else
    v9 = *(_DWORD *)(v3 + 136);
    sub_119C884((void **)&v43, "GET");
    utility::conversions::to_string_t(&v42, v6);
    v10 = sub_119C884((void **)&v41, (const char *)&unk_257BC67);
    xbox::services::system::xbox_live_user::get_token_and_signature((int)&v44, v9, (int)&v43, (int)&v42, (int)v10);
    sub_1042AD0(v4, (int)&v44);
    v11 = v45;
    if ( v45 )
      v12 = (unsigned int *)(v45 + 4);
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
        v13 = (*v12)--;
      if ( v13 == 1 )
        v22 = (unsigned int *)(v11 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
            v23 = __ldrex(v22);
          while ( __strex(v23 - 1, v22) );
          v23 = (*v22)--;
        if ( v23 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
    v24 = (void *)(v41 - 12);
    if ( (int *)(v41 - 12) != &dword_28898C0 )
      v26 = (unsigned int *)(v41 - 4);
          v27 = __ldrex(v26);
        while ( __strex(v27 - 1, v26) );
        v27 = (*v26)--;
      if ( v27 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v24);
    v25 = (void *)(v42 - 12);
    if ( (int *)(v42 - 12) != &dword_28898C0 )
      v28 = (unsigned int *)(v42 - 4);
          v29 = __ldrex(v28);
        while ( __strex(v29 - 1, v28) );
        v29 = (*v28)--;
      if ( v29 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v25);
    v19 = (char *)(v43 - 12);
    if ( (int *)(v43 - 12) != &dword_28898C0 )
      v20 = (unsigned int *)(v43 - 4);
LABEL_48:
      v21 = (*v20)--;
LABEL_49:
      if ( v21 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v19);
      return;
}


signed int __fastcall Social::Events::Event::passesFilter(int a1, int a2)
{
  int v2; // r2@1
  signed int result; // r0@1

  v2 = *(_DWORD *)(a1 + 12);
  result = 0;
  if ( !(v2 & a2) )
    result = 1;
  return result;
}


unsigned int *__fastcall Social::UserManager::getUser(Social::UserManager *this, const Social::XboxLiveUserManager *a2, int a3)
{
  __int64 v3; // r6@1
  int v4; // r5@1
  Social::UserManager *v5; // r4@1
  unsigned int *result; // r0@4
  unsigned int v7; // r1@9

  v3 = *((_QWORD *)a2 + 1);
  v4 = a3;
  v5 = this;
  if ( (_DWORD)v3 == HIDWORD(v3) )
  {
LABEL_4:
    result = 0;
    *(_DWORD *)v5 = 0;
    *((_DWORD *)v5 + 1) = 0;
  }
  else
    while ( Social::User::getLiveUser(*(Social::User **)v3) != v4 )
    {
      LODWORD(v3) = v3 + 8;
      if ( HIDWORD(v3) == (_DWORD)v3 )
        goto LABEL_4;
    }
    *(_DWORD *)v5 = *(_DWORD *)v3;
    result = *(unsigned int **)(v3 + 4);
    *((_DWORD *)v5 + 1) = result;
    if ( result )
      ++result;
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(result);
        while ( __strex(v7 + 1, result) );
      }
      else
        ++*result;
  return result;
}


void __fastcall Social::Events::Event::addProperty<float>(int a1, int *a2, int a3)
{
  int v3; // r6@1
  int *v5; // r4@1
  int *v6; // r0@1
  Json::Value *v11; // r5@1
  int v13; // r1@1
  void *v14; // r0@1
  unsigned int *v15; // r2@3
  signed int v16; // r1@5
  int v17; // [sp+0h] [bp-38h]@1
  int v18; // [sp+8h] [bp-30h]@1

  v3 = a1;
  _R5 = a3;
  v5 = a2;
  v6 = sub_21E8AF4(&v18, a2);
  __asm { VLDR            S0, [R5] }
  v11 = (Json::Value *)(v6 + 2);
  __asm
  {
    VCVT.F64.F32    D0, S0
    VMOV            R2, R3, D0
  }
  Json::Value::Value((Json::Value *)(v6 + 2), v13, _R2);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v17,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v18);
  Json::Value::~Value(v11);
  v14 = (void *)(v18 - 12);
  if ( (int *)(v18 - 12) != &dword_28898C0 )
    v15 = (unsigned int *)(v18 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
    }
    else
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j__ZdlPv_9(v14);
}


signed int __fastcall Social::MultiplayerService::_buildGameListIfNeeded(Social::MultiplayerService *this, int a2)
{
  Social::MultiplayerService *v2; // r4@1
  signed int v3; // r5@1
  signed int v4; // r1@2
  __int64 v5; // r2@4
  int v6; // r0@4
  __int64 v7; // kr08_8@4
  bool v8; // cf@4
  signed int v9; // r2@4
  bool v10; // zf@6
  bool v11; // nf@6
  unsigned __int8 v12; // vf@6
  signed int v13; // r0@6
  int v15; // [sp+0h] [bp-28h]@11
  int v16; // [sp+8h] [bp-20h]@4

  v2 = this;
  v3 = 0;
  if ( !a2 )
  {
    v4 = 2;
    if ( !*((_BYTE *)this + 252) )
      v4 = 10;
    *((_DWORD *)this + 72) = v4;
    *((_DWORD *)this + 73) = 0;
    *((_BYTE *)this + 252) = 0;
    sub_21E034C(&v16);
    v5 = *((_QWORD *)v2 + 36);
    v6 = (1000000000 * (unsigned __int64)(unsigned int)v5 >> 32) + 1000000000 * HIDWORD(v5);
    v7 = *(_QWORD *)&v16 - *((_QWORD *)v2 + 35);
    v8 = (unsigned int)v7 >= 1000000000 * (signed int)v5;
    v9 = 0;
    if ( !v8 )
      v9 = 1;
    v12 = __OFSUB__(HIDWORD(v7), v6);
    v10 = HIDWORD(v7) == v6;
    v11 = HIDWORD(v7) - v6 < 0;
    v13 = 0;
    if ( v11 ^ v12 )
      v13 = 1;
    if ( v10 )
      v13 = v9;
    if ( !v13 )
    {
      Social::MultiplayerService::_buildGameList(v2);
      sub_21E034C(&v15);
      *((_QWORD *)v2 + 35) = *(_QWORD *)&v15;
      v3 = 1;
    }
  }
  return v3;
}


char *__fastcall Social::UserManager::registerSignInHandler(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r4@1
  void (__fastcall *v5)(int); // r3@2
  char *result; // r0@4

  v2 = a1;
  v3 = a2;
  v4 = *(_QWORD *)(a1 + 36);
  if ( v4 == *(_QWORD *)(a1 + 36) >> 32 )
  {
    result = j_j_j__ZNSt6vectorISt8functionIFviEESaIS2_EE19_M_emplace_back_auxIJRKS2_EEEvDpOT_((_QWORD *)(a1 + 32), a2);
  }
  else
    *(_DWORD *)(v4 + 8) = 0;
    v5 = *(void (__fastcall **)(int))(a2 + 8);
    if ( v5 )
    {
      v5(v4);
      *(_DWORD *)(v4 + 12) = *(_DWORD *)(v3 + 12);
      *(_DWORD *)(v4 + 8) = *(_DWORD *)(v3 + 8);
      v4 = *(_DWORD *)(v2 + 36);
    }
    result = (char *)(v4 + 16);
    *(_DWORD *)(v2 + 36) = v4 + 16;
  return result;
}


int __fastcall Social::MultiplayerServiceManager::joinGame(_QWORD *a1, const void **a2, int a3, signed int a4)
{
  _QWORD *v4; // r10@1
  const void **v5; // r8@1
  __int64 v6; // r0@1
  signed int v7; // r9@1
  int v8; // r4@1
  int v9; // r5@5
  int v10; // r7@5
  const void *v11; // r9@6
  size_t v12; // r6@6
  __int64 i; // r6@12
  int v14; // r1@13
  Social::MultiplayerService *v15; // r0@13
  int v16; // r5@14
  int (__fastcall *v17)(int, const void **, int *); // r11@14
  void (__fastcall *v18)(int *, int, signed int); // r3@14
  int v20; // [sp+0h] [bp-90h]@15
  int (__fastcall *v21)(int *, int *, signed int); // [sp+8h] [bp-88h]@14
  int v22; // [sp+Ch] [bp-84h]@15
  int v23; // [sp+10h] [bp-80h]@2
  int v24; // [sp+14h] [bp-7Ch]@2
  int v25; // [sp+18h] [bp-78h]@2
  void *v26; // [sp+1Ch] [bp-74h]@2
  void *v27; // [sp+20h] [bp-70h]@2
  void *v28; // [sp+24h] [bp-6Ch]@2
  void *v29; // [sp+28h] [bp-68h]@2
  void *v30; // [sp+2Ch] [bp-64h]@2
  void *v31; // [sp+30h] [bp-60h]@2
  void *v32; // [sp+34h] [bp-5Ch]@2
  void *v33; // [sp+38h] [bp-58h]@2
  int v34; // [sp+40h] [bp-50h]@2
  int v35; // [sp+44h] [bp-4Ch]@2
  void *v36; // [sp+48h] [bp-48h]@2
  void *v37; // [sp+4Ch] [bp-44h]@2

  v4 = a1;
  v5 = a2;
  v6 = *a1;
  v7 = a4;
  v8 = a3;
  if ( (_DWORD)v6 == HIDWORD(v6) )
  {
    v23 = 0;
    v24 = 0;
    v25 = 0;
    v26 = &unk_28898CC;
    v27 = &unk_28898CC;
    v28 = &unk_28898CC;
    v29 = &unk_28898CC;
    v30 = &unk_28898CC;
    v31 = &unk_28898CC;
    v32 = &unk_28898CC;
    v33 = &unk_28898CC;
    v34 = 0;
    v35 = 0;
    v36 = &unk_28898CC;
    v37 = &unk_28898CC;
    if ( !*(_DWORD *)(a3 + 8) )
      sub_119C8E4();
    (*(void (__fastcall **)(int, _DWORD, int *, _DWORD))(a3 + 12))(a3, 0, &v23, 0);
    LODWORD(v6) = Social::MultiplayerGameInfo::~MultiplayerGameInfo((Social::MultiplayerGameInfo *)&v23);
  }
  if ( v7 == 3 )
    v9 = *(_QWORD *)((char *)v4 + 12) >> 32;
    v10 = *(_QWORD *)((char *)v4 + 12);
    if ( v10 == v9 )
    {
LABEL_10:
      v7 = 3;
    }
    else
      v11 = *v5;
      v12 = *((_DWORD *)*v5 - 3);
      while ( 1 )
      {
        LODWORD(v6) = *(_DWORD *)(v10 + 20);
        if ( *(_DWORD *)(v6 - 12) == v12 )
        {
          LODWORD(v6) = memcmp((const void *)v6, v11, v12);
          if ( !(_DWORD)v6 )
            break;
        }
        v10 += 88;
        if ( v9 == v10 )
          goto LABEL_10;
      }
      v7 = *(_DWORD *)(v10 + 80);
  for ( i = *v4; HIDWORD(i) != (_DWORD)i; LODWORD(i) = i + 4 )
    v14 = Social::MultiplayerService::getServiceId(*(Social::MultiplayerService **)i);
    v15 = *(Social::MultiplayerService **)i;
    if ( v14 == v7 )
      Social::MultiplayerService::setActive(v15, 1);
      v16 = *(_DWORD *)i;
      v17 = *(int (__fastcall **)(int, const void **, int *))(**(_DWORD **)i + 40);
      v21 = 0;
      v18 = *(void (__fastcall **)(int *, int, signed int))(v8 + 8);
      if ( v18 )
        v18(&v20, v8, 2);
        v22 = *(_DWORD *)(v8 + 12);
        v21 = *(int (__fastcall **)(int *, int *, signed int))(v8 + 8);
      LODWORD(v6) = v17(v16, v5, &v20);
      if ( v21 )
        LODWORD(v6) = v21(&v20, &v20, 3);
      LODWORD(v6) = Social::MultiplayerService::setActive(v15, 0);
  return v6;
}


_DWORD *__fastcall Social::Events::EventManager::removePlayerGlobalProperty(int a1, unsigned int a2, int **a3)
{
  unsigned int v3; // r10@1
  unsigned int v4; // r1@1
  int v5; // r4@1
  _DWORD *result; // r0@1
  int v7; // r1@1
  _DWORD *v8; // t0@1
  int v9; // r11@1
  _DWORD *v10; // r7@1
  _DWORD *v11; // r5@2
  int v12; // r4@2
  _DWORD *v13; // r9@2
  int v14; // r6@2
  int v15; // r8@4
  bool v16; // zf@7
  _DWORD *v17; // r6@11
  unsigned int v18; // r0@12
  int v19; // r1@12
  bool v20; // zf@15
  unsigned int v21; // [sp+8h] [bp-28h]@1

  v3 = a2;
  v4 = *(_QWORD *)(a1 + 96) >> 32;
  v5 = *(_QWORD *)(a1 + 96);
  v21 = v4;
  v8 = (_DWORD *)(v3 / v4);
  v7 = v3 % v4;
  result = v8;
  v9 = v7;
  v10 = *(_DWORD **)(v5 + 4 * v7);
  if ( v10 )
  {
    v11 = (_DWORD *)*v10;
    result = *(_DWORD **)(v5 + 4 * v7);
    v12 = *(_DWORD *)(*v10 + 4);
    v13 = (_DWORD *)*v10;
    v14 = *(_DWORD *)(*v10 + 4);
    while ( v14 != v3 )
    {
      v15 = *v13;
      if ( *v13 )
      {
        v14 = *(_DWORD *)(v15 + 4);
        result = v13;
        v13 = (_DWORD *)*v13;
        if ( *(_DWORD *)(v15 + 4) % v21 == v7 )
          continue;
      }
      return result;
    }
    v16 = result == 0;
    if ( result )
      result = (_DWORD *)*result;
      v16 = result == 0;
    if ( !v16 )
      while ( v12 != v3 )
        v17 = (_DWORD *)*v11;
        if ( *v11 )
        {
          v12 = v17[1];
          v18 = v17[1];
          v19 = v18 % v21;
          result = (_DWORD *)(v18 / v21);
          v10 = v11;
          v11 = (_DWORD *)*v11;
          if ( v19 == v9 )
            continue;
        }
        goto LABEL_19;
      v20 = v10 == 0;
      if ( v10 )
        result = (_DWORD *)*v10;
        v20 = *v10 == 0;
      if ( v20 )
LABEL_19:
        sub_21E5A84("_Map_base::at");
      result = (_DWORD *)j_j_j__ZNSt10_HashtableISsSt4pairIKSsN6Social6Events8PropertyEESaIS5_ENSt8__detail10_Select1stESt8equal_toISsESt4hashISsENS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_20_Prime_rehash_policyENS7_17_Hashtable_traitsILb1ELb0ELb1EEEE8_M_eraseESt17integral_constantIbLb1EERS1_(
                           (unsigned __int64 *)result + 1,
                           a3);
  }
  return result;
}


char *__fastcall Social::XboxLiveUserManager::_sortAchievementData(Social::XboxLiveUserManager *this)
{
  PlayerAchievementData *v1; // r5@1
  int v2; // r4@1
  char *result; // r0@1
  int *v4; // r5@1
  int v5; // r6@3
  bool v6; // zf@4

  v1 = (Social::XboxLiveUserManager *)((char *)this + 304);
  v2 = *(_DWORD *)PlayerAchievementData::getAchievementData((Social::XboxLiveUserManager *)((char *)this + 304));
  result = PlayerAchievementData::getAchievementData(v1);
  v4 = (int *)*((_DWORD *)result + 1);
  if ( (int *)v2 != v4 )
  {
    std::__introsort_loop<__gnu_cxx::__normal_iterator<AchievementData *,std::vector<AchievementData,std::allocator<AchievementData>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(AchievementData const&,AchievementData const&)>>(
      v2,
      *((_DWORD *)result + 1),
      2 * (31 - __clz(-1431655765 * (((signed int)v4 - v2) >> 4))),
      (int)AchievementData::achievementComparisonForSorting);
    if ( (signed int)v4 - v2 <= 768 )
    {
      result = (char *)j_j_j__ZSt16__insertion_sortIN9__gnu_cxx17__normal_iteratorIP15AchievementDataSt6vectorIS2_SaIS2_EEEENS0_5__ops15_Iter_comp_iterIPFbRKS2_SB_EEEEvT_SF_T0_(
                         v2,
                         v4,
                         (int (__fastcall *)(int *, int))AchievementData::achievementComparisonForSorting);
    }
    else
      v5 = v2 + 768;
      result = (char *)std::__insertion_sort<__gnu_cxx::__normal_iterator<AchievementData *,std::vector<AchievementData,std::allocator<AchievementData>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(AchievementData const&,AchievementData const&)>>(
                         (int *)(v2 + 768),
      if ( (int *)(v2 + 768) != v4 )
      {
        do
        {
          std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<AchievementData *,std::vector<AchievementData,std::allocator<AchievementData>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(AchievementData const&,AchievementData const&)>>(
            v5,
            (int (__fastcall *)(int *, int))AchievementData::achievementComparisonForSorting);
          result = (char *)(v2 + 48);
          v5 = v2 + 816;
          v6 = v4 - 192 == (int *)(v2 + 48);
          v2 += 48;
        }
        while ( !v6 );
      }
  }
  return result;
}


void __fastcall Social::User_generic::~User_generic(Social::User_generic *this)
{
  Social::User *v1; // r0@1

  v1 = Social::User::~User(this);
  j_j_j__ZdlPv_4((void *)v1);
}


void __fastcall Social::XboxLiveUserManager::getCurrentXUID(Social::XboxLiveUserManager *this, int a2)
{
  int v2; // r5@1
  int *v3; // r4@1
  xbox::services::system::xbox_live_user *v4; // r0@1
  bool v5; // zf@1
  unsigned int v6; // r0@5
  int *v7; // r0@7
  void *v8; // r0@7
  void *v9; // r0@8
  unsigned int *v10; // r2@10
  signed int v11; // r1@12
  unsigned int *v12; // r2@14
  signed int v13; // r1@16
  int v14; // [sp+0h] [bp-30h]@7
  int v15; // [sp+4h] [bp-2Ch]@7

  v2 = a2;
  v3 = (int *)this;
  sub_119C884((void **)this, (const char *)&unk_257BC67);
  v4 = *(xbox::services::system::xbox_live_user **)(v2 + 136);
  v5 = v4 == 0;
  if ( v4 )
    v5 = *(_DWORD *)(v2 + 144) == 0;
  if ( !v5 && xbox::services::system::xbox_live_user::is_signed_in(v4) == 1 )
  {
    v6 = *(_WORD *)(v2 + 124);
    if ( v6 <= 0xFF && !(_BYTE)v6 )
    {
      v7 = (int *)xbox::services::system::xbox_live_user::xbox_user_id(*(xbox::services::system::xbox_live_user **)(v2 + 136));
      sub_119C854(&v14, v7);
      utility::conversions::to_utf8string(&v15, &v14);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v3, &v15);
      v8 = (void *)(v15 - 12);
      if ( (int *)(v15 - 12) != &dword_28898C0 )
      {
        v10 = (unsigned int *)(v15 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 - 1, v10) );
        }
        else
          v11 = (*v10)--;
        if ( v11 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v8);
      }
      v9 = (void *)(v14 - 12);
      if ( (int *)(v14 - 12) != &dword_28898C0 )
        v12 = (unsigned int *)(v14 - 4);
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
          v13 = (*v12)--;
        if ( v13 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v9);
    }
  }
}


CallbackToken *__fastcall Social::User::connectAsync(int a1, int a2, int a3)
{
  int v3; // r7@0
  int v4; // r11@1
  int v5; // r8@1
  int v6; // r5@1
  int v7; // r0@2
  signed int v8; // r9@4
  void *v9; // r0@10
  void (__fastcall *v10)(char *, int, signed int); // r3@11
  void *v11; // r9@13
  void (*v12)(void); // r7@14
  int v13; // r4@16
  _DWORD *v14; // r0@16
  int v15; // r0@20
  int v16; // r5@20
  unsigned int *v17; // r0@21
  unsigned int v18; // r1@23
  int v19; // r0@26
  unsigned int *v20; // r2@27
  unsigned int v21; // r1@29
  void (__fastcall *v22)(int, void **); // r2@34
  unsigned int *v23; // r0@35
  unsigned int v24; // r1@37
  int v25; // r6@40
  unsigned int *v26; // r1@41
  unsigned int v27; // r0@43
  unsigned int *v28; // r4@47
  unsigned int v29; // r0@49
  CallbackToken *result; // r0@54
  unsigned int *v31; // r1@55
  unsigned int *v32; // r4@61
  int v33; // r6@71
  void (__fastcall *v34)(int, _DWORD **); // r10@71
  void (__fastcall *v35)(int *, int, signed int); // r3@71
  void (*v36)(void); // r5@72
  int v37; // r4@74
  _DWORD *v38; // r0@74
  int v39; // r1@74
  void *v40; // [sp+4h] [bp-A4h]@34
  int v41; // [sp+8h] [bp-A0h]@34
  char v42; // [sp+Ch] [bp-9Ch]@26
  char v43; // [sp+14h] [bp-94h]@12
  void (*v44)(void); // [sp+1Ch] [bp-8Ch]@11
  int v45; // [sp+20h] [bp-88h]@12
  int v46; // [sp+24h] [bp-84h]@13
  int v47; // [sp+28h] [bp-80h]@72
  int v48; // [sp+2Ch] [bp-7Ch]@74
  void (*v49)(void); // [sp+30h] [bp-78h]@71
  int v50; // [sp+34h] [bp-74h]@72
  int v51; // [sp+38h] [bp-70h]@74
  _DWORD *v52; // [sp+3Ch] [bp-6Ch]@74
  void (*v53)(void); // [sp+44h] [bp-64h]@74
  int (__fastcall *v54)(int *); // [sp+48h] [bp-60h]@74
  int v55; // [sp+54h] [bp-54h]@20
  __int64 v56; // [sp+58h] [bp-50h]@14
  void (*v57)(void); // [sp+60h] [bp-48h]@13
  int v58; // [sp+64h] [bp-44h]@14
  int v59; // [sp+68h] [bp-40h]@16
  _DWORD *v60; // [sp+6Ch] [bp-3Ch]@16
  void (*v61)(void); // [sp+74h] [bp-34h]@16
  int (__fastcall *v62)(int, int); // [sp+78h] [bp-30h]@16
  int v63; // [sp+7Ch] [bp-2Ch]@20
  int v64; // [sp+80h] [bp-28h]@20

  v4 = a2;
  v5 = a1;
  v6 = a3;
  if ( !*(_BYTE *)(a2 + 20) )
  {
    v7 = *(_DWORD *)(a2 + 16);
    if ( v7 != 1 )
    {
      if ( !v7 )
      {
        v8 = 0;
LABEL_9:
        if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
          v9 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
        else
          v9 = &ServiceLocator<AppPlatform>::mDefaultService;
        v33 = *(_DWORD *)v9;
        v34 = *(void (__fastcall **)(int, _DWORD **))(**(_DWORD **)v9 + 348);
        v49 = 0;
        v35 = *(void (__fastcall **)(int *, int, signed int))(v6 + 8);
        if ( v35 )
        {
          v35(&v47, v6, 2);
          v3 = *(_DWORD *)(v6 + 12);
          v50 = *(_DWORD *)(v6 + 12);
          v36 = *(void (**)(void))(v6 + 8);
          v49 = v36;
        }
          v36 = 0;
        v53 = 0;
        v51 = dword_262D0D8[3 * v8 + 1];
        v37 = v51;
        v38 = operator new(0x14u);
        v39 = v48;
        *v38 = v47;
        v38[1] = v39;
        v38[2] = v36;
        v38[3] = v3;
        v38[4] = v37;
        v52 = v38;
        v53 = (void (*)(void))sub_1024418;
        v54 = sub_1024406;
        v34(v33, &v52);
        if ( v53 )
          v53();
        if ( v49 )
          v49();
        return (CallbackToken *)CallbackToken::CallbackToken(v5);
      }
      if ( v7 == 3 )
        v8 = 2;
        goto LABEL_9;
      if ( v7 == 4 )
        v8 = 3;
    }
  }
  *(_BYTE *)(a2 + 20) = 0;
  *(_DWORD *)(a2 + 16) = 2;
  v44 = 0;
  v10 = *(void (__fastcall **)(char *, int, signed int))(a3 + 8);
  if ( v10 )
    v10(&v43, a3, 2);
    v45 = *(_DWORD *)(v6 + 12);
    v44 = *(void (**)(void))(v6 + 8);
  v46 = v4;
  v11 = operator new(0x18u);
  v57 = 0;
  if ( v44 )
    ((void (__fastcall *)(__int64 *, char *, signed int))v44)(&v56, &v43, 2);
    v6 = v45;
    v12 = v44;
    v58 = v45;
    v57 = v44;
  else
    v12 = 0;
  v13 = v46;
  v59 = v46;
  v61 = 0;
  v14 = operator new(0x14u);
  *(_QWORD *)v14 = v56;
  v14[2] = v12;
  v14[3] = v6;
  v14[4] = v13;
  v60 = v14;
  v61 = (void (*)(void))sub_10247A4;
  v62 = sub_1024670;
  CallbackTokenContext<std::function<void ()(Social::UserPlatformConnectionResult)>>::CallbackTokenContext(
    (int)v11,
    (int)&v60);
  if ( v61 )
    v61();
  if ( v57 )
    v57();
  std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<CallbackTokenContext<std::function<void ()(Social::UserPlatformConnectionResult)>> *,std::__shared_ptr<CallbackTokenContext<std::function<void ()(Social::UserPlatformConnectionResult)>> *,(std::__shared_count<(__gnu_cxx::_Lock_policy)2>)2>::_Deleter<std::allocator<CallbackTokenContext<std::function<void ()(Social::UserPlatformConnectionResult)>> *>>,std::__shared_ptr<CallbackTokenContext<std::function<void ()(Social::UserPlatformConnectionResult)>> *,(std::__shared_count<(__gnu_cxx::_Lock_policy)2>)2>::_Deleter<std::allocator<CallbackTokenContext<std::function<void ()(Social::UserPlatformConnectionResult)>> *>>>(
    &v55,
    (int)v11);
  v63 = *((_DWORD *)v11 + 4);
  v15 = *((_DWORD *)v11 + 5);
  v16 = v55;
  v64 = v15;
  if ( v15 )
    v17 = (unsigned int *)(v15 + 8);
    if ( &pthread_create )
      __dmb();
      do
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
    else
      ++*v17;
  CallbackToken::CallbackToken((int)&v42, (int)&v63);
  v19 = v64;
  if ( v64 )
    v20 = (unsigned int *)(v64 + 8);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 == 1 )
      (*(void (**)(void))(*(_DWORD *)v19 + 12))();
  v22 = *(void (__fastcall **)(int, void **))(*(_DWORD *)v4 + 36);
  v40 = v11;
  v41 = v16;
  if ( v16 )
    v23 = (unsigned int *)(v16 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 + 1, v23) );
      ++*v23;
  v22(v4, &v40);
  v25 = v41;
  if ( v41 )
    v26 = (unsigned int *)(v41 + 4);
        v27 = __ldrex(v26);
      while ( __strex(v27 - 1, v26) );
      v27 = (*v26)--;
    if ( v27 == 1 )
      v28 = (unsigned int *)(v25 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
      if ( &pthread_create )
        __dmb();
        do
          v29 = __ldrex(v28);
        while ( __strex(v29 - 1, v28) );
      else
        v29 = (*v28)--;
      if ( v29 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
  CallbackToken::CallbackToken(v5, (int)&v42);
  result = CallbackToken::~CallbackToken((CallbackToken *)&v42);
    v31 = (unsigned int *)(v16 + 4);
        result = (CallbackToken *)__ldrex(v31);
      while ( __strex((unsigned int)result - 1, v31) );
      result = (CallbackToken *)(*v31)--;
    if ( result == (CallbackToken *)1 )
      v32 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          result = (CallbackToken *)__ldrex(v32);
        while ( __strex((unsigned int)result - 1, v32) );
        result = (CallbackToken *)(*v32)--;
      if ( result == (CallbackToken *)1 )
        result = (CallbackToken *)(*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    result = (CallbackToken *)((int (*)(void))v44)();
  return result;
}


void __fastcall Social::User::updateSettingsPathAndLoad(Social::User *this)
{
  Social::User *v1; // r4@1
  Core::FileStorageArea *v2; // r0@1
  int v3; // r3@2
  void *v4; // r0@4
  __int64 v5; // r0@5
  int v6; // r4@5
  __int64 v7; // kr00_8@5
  void *v8; // r0@5
  unsigned int *v9; // r2@9
  signed int v10; // r1@11
  unsigned int *v11; // r2@13
  signed int v12; // r1@15
  int v13; // [sp+4h] [bp-54h]@5
  __int64 v14; // [sp+8h] [bp-50h]@5
  char v15; // [sp+10h] [bp-48h]@5
  void (*v16)(void); // [sp+18h] [bp-40h]@6
  char v17; // [sp+20h] [bp-38h]@5
  char v18; // [sp+24h] [bp-34h]@2
  int v19; // [sp+2Ch] [bp-2Ch]@2
  unsigned __int64 v20; // [sp+30h] [bp-28h]@2
  int v21; // [sp+38h] [bp-20h]@2
  int v22; // [sp+3Ch] [bp-1Ch]@2

  v1 = this;
  v2 = (Core::FileStorageArea *)*((_DWORD *)this + 9);
  if ( v2 )
  {
    Core::FileStorageArea::setLoggingEnabled(v2, 0);
    Core::FileStorageArea::getRootPath((Core::FileStorageArea *)&v18, *((_DWORD *)v1 + 9));
    v3 = *(_DWORD *)(AppPlatform::SETTINGS_PATH - 12);
    v20 = *(_QWORD *)&v18;
    v21 = AppPlatform::SETTINGS_PATH;
    v22 = v3;
    Core::PathBuffer<std::string>::_join<Core::PathPart>((const void **)&v19, (unsigned int)&v20, 2u);
    if ( (int *)((char *)v1 + 44) != &v19 )
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
        (int *)v1 + 11,
        &v19);
    v4 = (void *)(v19 - 12);
    if ( (int *)(v19 - 12) != &dword_28898C0 )
    {
      v9 = (unsigned int *)(v19 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v4);
    }
    LODWORD(v5) = *((_DWORD *)v1 + 11);
    HIDWORD(v5) = *(_DWORD *)(v5 - 12);
    v14 = v5;
    Core::FileSystem::createDirectoryRecursively((int)&v15, &v14);
    v17 |= 2u;
    v7 = *(_QWORD *)((char *)v1 + 44);
    v6 = *(_QWORD *)((char *)v1 + 44) >> 32;
    v20 = __PAIR__(*(_DWORD *)(v7 - 12), (unsigned int)v7);
    *(_QWORD *)&v21 = *(_QWORD *)&Social::User::OPTIONS_FILENAME;
    Core::PathBuffer<std::string>::_join<Core::PathPart>((const void **)&v13, (unsigned int)&v20, 2u);
    Options::load(v6, &v13);
    v8 = (void *)(v13 - 12);
    if ( (int *)(v13 - 12) != &dword_28898C0 )
      v11 = (unsigned int *)(v13 - 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v8);
    if ( v16 )
      v16();
  }
}


void __fastcall Social::MultiplayerXBL::onConnectionStateChanged(int a1, const char **a2, const char **a3, int a4, int a5, int a6, const char **a7)
{
  Social::MultiplayerXBL::onConnectionStateChanged(a1, a2, a3, a4, a5, a6, a7);
}


int __fastcall Social::UserManager::needToShowPlatformPlayConnectConfirmationScreen(Social::UserManager *this)
{
  return 0;
}


void __fastcall Social::MultiplayerXBL::_tickMultiplayerManager(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL::_tickMultiplayerManager(this);
}


int __fastcall Social::MultiplayerXBL::_setMemberProperties(Social::MultiplayerXBL *this, Social::ClientConnectionState *a2)
{
  Social::MultiplayerXBL *v2; // r6@1
  Social::ClientConnectionState *v3; // r5@1
  int v4; // r5@1
  int v5; // r0@1
  void *v6; // r0@1
  void *v7; // r0@2
  int v8; // r4@3
  unsigned int *v9; // r1@4
  unsigned int v10; // r0@6
  unsigned int *v11; // r5@10
  unsigned int v12; // r0@12
  int v13; // r4@17
  unsigned int *v14; // r1@18
  unsigned int v15; // r0@20
  unsigned int *v16; // r5@24
  unsigned int v17; // r0@26
  int v18; // r4@31
  unsigned int *v19; // r1@32
  unsigned int v20; // r0@34
  unsigned int *v21; // r5@38
  unsigned int v22; // r0@40
  int v23; // r4@45
  unsigned int *v24; // r1@46
  unsigned int v25; // r0@48
  unsigned int *v26; // r5@52
  unsigned int v27; // r0@54
  int result; // r0@59
  unsigned int *v29; // r2@62
  signed int v30; // r1@64
  unsigned int *v31; // r2@66
  signed int v32; // r1@68
  int v33; // [sp+10h] [bp-48h]@1
  Social::User *v34; // [sp+14h] [bp-44h]@1
  int v35; // [sp+18h] [bp-40h]@17
  char v36; // [sp+1Ch] [bp-3Ch]@1
  int v37; // [sp+20h] [bp-38h]@3
  int v38; // [sp+24h] [bp-34h]@1
  int v39; // [sp+28h] [bp-30h]@45
  int v40; // [sp+2Ch] [bp-2Ch]@1
  int v41; // [sp+30h] [bp-28h]@31
  char v42; // [sp+34h] [bp-24h]@1
  int v43; // [sp+3Ch] [bp-1Ch]@1
  int v44; // [sp+40h] [bp-18h]@1

  v2 = this;
  v3 = a2;
  web::json::value::value((web::json::value *)&v44);
  Social::ClientConnectionState::toJson(v3, (web::json::value *)&v44);
  xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v38);
  xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
    (xbox::services::multiplayer::manager::multiplayer_manager *)&v40,
    v38);
  v4 = v40;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v34, *((_DWORD *)v2 + 11));
  v5 = Social::User::getLiveUser(v34);
  Social::XboxLiveUserManager::getCurrentUser((Social::XboxLiveUserManager *)&v36, v5);
  sub_119C884((void **)&v33, "ClientConnectionState");
  xbox::services::multiplayer::manager::multiplayer_lobby_session::set_local_member_properties(
    (web::json::value *)&v42,
    v4,
    (int)&v36,
    &v33,
    (web::json::value *)&v44,
    0);
  v6 = (void *)(v43 - 12);
  if ( (int *)(v43 - 12) != &dword_28898C0 )
  {
    v29 = (unsigned int *)(v43 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
    }
    else
      v30 = (*v29)--;
    if ( v30 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v6);
  }
  v7 = (void *)(v33 - 12);
  if ( (int *)(v33 - 12) != &dword_28898C0 )
    v31 = (unsigned int *)(v33 - 4);
        v32 = __ldrex(v31);
      while ( __strex(v32 - 1, v31) );
      v32 = (*v31)--;
    if ( v32 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v7);
  v8 = v37;
  if ( v37 )
    v9 = (unsigned int *)(v37 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
      }
      else
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  v13 = v35;
  if ( v35 )
    v14 = (unsigned int *)(v35 + 4);
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
      v15 = (*v14)--;
    if ( v15 == 1 )
      v16 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v18 = v41;
  if ( v41 )
    v19 = (unsigned int *)(v41 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 - 1, v19) );
      v20 = (*v19)--;
    if ( v20 == 1 )
      v21 = (unsigned int *)(v18 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 8))(v18);
          v22 = __ldrex(v21);
        while ( __strex(v22 - 1, v21) );
        v22 = (*v21)--;
      if ( v22 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 12))(v18);
  v23 = v39;
  if ( v39 )
    v24 = (unsigned int *)(v39 + 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 == 1 )
      v26 = (unsigned int *)(v23 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 8))(v23);
          v27 = __ldrex(v26);
        while ( __strex(v27 - 1, v26) );
        v27 = (*v26)--;
      if ( v27 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 12))(v23);
  result = v44;
  if ( v44 )
    result = (*(int (**)(void))(*(_DWORD *)v44 + 96))();
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::_notifyXboxUserUnblocked(int a1, int *a2)
{
  int v2; // r5@1
  int *v3; // r6@1
  int v4; // r8@1
  unsigned int v5; // r1@2
  unsigned int *v6; // r0@2
  unsigned int v7; // r2@5
  unsigned int v8; // r3@6
  int v9; // r7@7
  unsigned int *v10; // r4@7
  unsigned int v11; // r1@9
  unsigned int v12; // r1@14
  unsigned int v13; // r0@20
  unsigned int v14; // r0@27
  void *v15; // r6@30
  unsigned int *v16; // r0@31
  unsigned int v17; // r1@33
  __int64 v18; // r1@36
  void *v19; // r0@38
  unsigned int *v20; // r2@40
  unsigned int v21; // r1@42
  unsigned int result; // r0@49
  unsigned int *v23; // r2@55
  signed int v24; // r1@57
  int v25; // [sp+8h] [bp-30h]@30
  void *v26; // [sp+Ch] [bp-2Ch]@36
  void (*v27)(void); // [sp+14h] [bp-24h]@30

  v2 = a1;
  v3 = a2;
  v4 = *(_DWORD *)(a1 + 12);
  if ( !v4 )
    std::__throw_bad_weak_ptr();
  v5 = *(_DWORD *)(v4 + 4);
  v6 = (unsigned int *)(v4 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v5 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v7 = __ldrex(v6);
      if ( v7 == v5 )
        break;
      __clrex();
      v5 = v7;
    }
    v8 = __strex(v5 + 1, v6);
    v5 = v7;
  }
  while ( v8 );
  __dmb();
  v9 = *(_DWORD *)(v2 + 8);
  v10 = (unsigned int *)(v4 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v11 = __ldrex(v10);
    while ( __strex(v11 + 1, v10) );
  else
    ++*v10;
      v12 = __ldrex(v6);
    while ( __strex(v12 - 1, v6) );
    v12 = (*v6)--;
  if ( v12 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
    if ( &pthread_create )
      do
        v13 = __ldrex(v10);
      while ( __strex(v13 - 1, v10) );
    else
      v13 = (*v10)--;
    if ( v13 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
      v14 = __ldrex(v10);
    while ( __strex(v14 + 1, v10) );
  sub_119C854(&v25, v3);
  v27 = 0;
  v15 = operator new(0xCu);
  *(_DWORD *)v15 = v9;
  *((_DWORD *)v15 + 1) = v4;
  if ( v4 )
    v16 = (unsigned int *)(v4 + 8);
        v17 = __ldrex(v16);
      while ( __strex(v17 + 1, v16) );
      ++*v16;
  sub_119C854((int *)v15 + 2, &v25);
  LODWORD(v18) = sub_106C034;
  v26 = v15;
  HIDWORD(v18) = sub_106BE88;
  *(_QWORD *)&v27 = v18;
  MPMCQueue<std::function<void ()(void)>>::push(v2 + 168, (int)&v26);
  if ( v27 )
    v27();
  v19 = (void *)(v25 - 12);
  if ( (int *)(v25 - 12) != &dword_28898C0 )
    v23 = (unsigned int *)(v25 - 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v19);
    v20 = (unsigned int *)(v4 + 8);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 == 1 )
      (*(void (**)(void))(*(_DWORD *)v4 + 12))();
      result = __ldrex(v10);
    while ( __strex(result - 1, v10) );
    result = (*v10)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  return result;
}


int __fastcall Social::MultiplayerService::isInviteEnabled(Social::MultiplayerService *this)
{
  return 0;
}


void __fastcall Social::Events::Event::addProperty<std::string>(int a1, int *a2, const char **a3)
{
  int v3; // r6@1
  const char **v4; // r7@1
  int *v5; // r4@1
  Json::Value *v6; // r5@1
  void *v7; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+8h] [bp-30h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = (Json::Value *)(sub_21E8AF4(&v11, a2) + 2);
  Json::Value::Value((int)v6, v4);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v10,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v11);
  Json::Value::~Value(v6);
  v7 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
}


__int64 __fastcall Social::XboxLiveUserManager::needToRefreshPrivacyLists(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  __int64 result; // r0@1
  int v3; // r3@1
  int v4; // [sp+0h] [bp-10h]@1

  v1 = this;
  sub_119D2DC(&v4);
  result = *(_QWORD *)&v4;
  v3 = (int)v1 + 16;
  *(_QWORD *)v3 = *(_QWORD *)&v4;
  *(_DWORD *)(v3 + 8) = 0;
  *((_DWORD *)v1 + 7) = 0;
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::reportUser(int a1, int *a2, int a3, int *a4, int a5)
{
  int v5; // r6@1
  int *v6; // r11@1
  int v7; // r9@1
  int v8; // r5@1
  int *v9; // r4@1
  unsigned int *v10; // r0@2
  unsigned int v11; // r1@2
  unsigned int v12; // r2@5
  unsigned int v13; // r3@6
  int v14; // r8@7
  unsigned int *v15; // r7@7
  unsigned int v16; // r1@9
  unsigned int v17; // r1@14
  unsigned int v18; // r0@20
  __int64 v19; // r0@25
  unsigned int *v20; // r1@26
  unsigned int v21; // r2@28
  char *v22; // r6@31
  unsigned int v23; // r4@32
  unsigned int v24; // r0@36
  void (__fastcall *v25)(int *, int, signed int); // r3@39
  int v26; // r5@41
  unsigned int *v27; // r1@42
  unsigned int v28; // r0@44
  unsigned int *v29; // r6@48
  unsigned int v30; // r0@50
  int v31; // r0@57
  unsigned int *v32; // r2@58
  unsigned int v33; // r1@60
  int v34; // r4@65
  unsigned int *v35; // r1@66
  unsigned int v36; // r0@68
  unsigned int *v37; // r5@72
  unsigned int v38; // r0@74
  char *v39; // r0@79
  void *v40; // r0@80
  char *v41; // r0@81
  void *v42; // r0@82
  unsigned int *v43; // r1@84
  unsigned int v44; // r0@86
  unsigned int *v45; // r4@90
  unsigned int v46; // r0@92
  unsigned int result; // r0@99
  unsigned int *v48; // r2@105
  signed int v49; // r1@107
  unsigned int *v50; // r2@109
  signed int v51; // r1@111
  unsigned int *v52; // r2@113
  signed int v53; // r1@115
  unsigned int *v54; // r2@117
  signed int v55; // r1@119
  void *v56; // [sp+0h] [bp-70h]@34
  int v57; // [sp+4h] [bp-6Ch]@34
  int v58; // [sp+8h] [bp-68h]@34
  int v59; // [sp+Ch] [bp-64h]@25
  int v60; // [sp+Ch] [bp-64h]@41
  int v61; // [sp+10h] [bp-60h]@34
  int v62; // [sp+14h] [bp-5Ch]@34
  int v63; // [sp+18h] [bp-58h]@40
  int v64; // [sp+1Ch] [bp-54h]@41
  void *v65; // [sp+20h] [bp-50h]@39
  int v66; // [sp+24h] [bp-4Ch]@40
  char *v67; // [sp+28h] [bp-48h]@34
  int v68; // [sp+2Ch] [bp-44h]@34
  char *v69; // [sp+30h] [bp-40h]@34
  int v70; // [sp+34h] [bp-3Ch]@31
  char v71; // [sp+38h] [bp-38h]@34
  int v72; // [sp+3Ch] [bp-34h]@65
  char v73; // [sp+40h] [bp-30h]@41
  int v74; // [sp+44h] [bp-2Ch]@41

  v5 = a1;
  v6 = a4;
  v7 = *(_DWORD *)(a1 + 12);
  v8 = a3;
  v9 = a2;
  if ( !v7 )
    std::__throw_bad_weak_ptr();
  v10 = (unsigned int *)(v7 + 4);
  v11 = *(_DWORD *)(v7 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v11 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v12 = __ldrex(v10);
      if ( v12 == v11 )
        break;
      __clrex();
      v11 = v12;
    }
    v13 = __strex(v11 + 1, v10);
    v11 = v12;
  }
  while ( v13 );
  __dmb();
  v14 = *(_DWORD *)(v5 + 8);
  v15 = (unsigned int *)(v7 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v16 = __ldrex(v15);
    while ( __strex(v16 + 1, v15) );
  else
    ++*v15;
      v17 = __ldrex(v10);
    while ( __strex(v17 - 1, v10) );
    v17 = (*v10)--;
  if ( v17 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
    if ( &pthread_create )
      do
        v18 = __ldrex(v15);
      while ( __strex(v18 - 1, v15) );
    else
      v18 = (*v15)--;
    if ( v18 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  v19 = *(_QWORD *)(v5 + 144);
  v59 = *(_QWORD *)(v5 + 144) >> 32;
  if ( HIDWORD(v19) )
    v20 = (unsigned int *)(v59 + 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 + 1, v20) );
      ++*v20;
  v22 = xbox::services::xbox_live_context::reputation_service((xbox::services::xbox_live_context *)v19);
  utility::conversions::to_string_t(&v70, v9);
  if ( (unsigned int)(v8 - 1) > 5 )
    v23 = 9;
    v23 = dword_262D130[v8 - 1];
  v69 = (char *)&unk_28898CC;
  utility::conversions::to_string_t(&v68, v6);
  v67 = (char *)&unk_28898CC;
  xbox::services::social::reputation_service::submit_reputation_feedback(
    (int)&v71,
    (int)v22,
    &v70,
    v23,
    (int *)&v69,
    &v68,
    (int *)&v67);
  v61 = v14;
  v62 = v7;
      v24 = __ldrex(v15);
    while ( __strex(v24 + 1, v15) );
  v65 = 0;
  v25 = *(void (__fastcall **)(int *, int, signed int))(a5 + 8);
  if ( v25 )
    v25(&v63, a5, 2);
    v66 = *(_DWORD *)(a5 + 12);
    v65 = *(void **)(a5 + 8);
  sub_1040D8C((int)&v73, (int)&v71, (int)&v61, (int)v25, v56, v57, v58, v59, v61, v62, v63, v64, v65);
  v26 = v74;
  if ( v74 )
    v27 = (unsigned int *)(v74 + 4);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 == 1 )
      v29 = (unsigned int *)(v26 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
      if ( &pthread_create )
      {
        __dmb();
        do
          v30 = __ldrex(v29);
        while ( __strex(v30 - 1, v29) );
      }
      else
        v30 = (*v29)--;
      if ( v30 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
  if ( v65 )
    ((void (*)(void))v65)();
  v31 = v62;
  if ( v62 )
    v32 = (unsigned int *)(v62 + 8);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      (*(void (**)(void))(*(_DWORD *)v31 + 12))();
  v34 = v72;
  if ( v72 )
    v35 = (unsigned int *)(v72 + 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 - 1, v35) );
      v36 = (*v35)--;
    if ( v36 == 1 )
      v37 = (unsigned int *)(v34 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
          v38 = __ldrex(v37);
        while ( __strex(v38 - 1, v37) );
        v38 = (*v37)--;
      if ( v38 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
  v39 = v67 - 12;
  if ( (int *)(v67 - 12) != &dword_28898C0 )
    v48 = (unsigned int *)(v67 - 4);
        v49 = __ldrex(v48);
      while ( __strex(v49 - 1, v48) );
      v49 = (*v48)--;
    if ( v49 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v39);
  v40 = (void *)(v68 - 12);
  if ( (int *)(v68 - 12) != &dword_28898C0 )
    v50 = (unsigned int *)(v68 - 4);
        v51 = __ldrex(v50);
      while ( __strex(v51 - 1, v50) );
      v51 = (*v50)--;
    if ( v51 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v40);
  v41 = v69 - 12;
  if ( (int *)(v69 - 12) != &dword_28898C0 )
    v52 = (unsigned int *)(v69 - 4);
        v53 = __ldrex(v52);
      while ( __strex(v53 - 1, v52) );
      v53 = (*v52)--;
    if ( v53 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v41);
  v42 = (void *)(v70 - 12);
  if ( (int *)(v70 - 12) != &dword_28898C0 )
    v54 = (unsigned int *)(v70 - 4);
        v55 = __ldrex(v54);
      while ( __strex(v55 - 1, v54) );
      v55 = (*v54)--;
    if ( v55 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v42);
  if ( v60 )
    v43 = (unsigned int *)(v60 + 4);
        v44 = __ldrex(v43);
      while ( __strex(v44 - 1, v43) );
      v44 = (*v43)--;
    if ( v44 == 1 )
      v45 = (unsigned int *)(v60 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v60 + 8))(v60);
          v46 = __ldrex(v45);
        while ( __strex(v46 - 1, v45) );
        v46 = (*v45)--;
      if ( v46 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v60 + 12))(v60);
      result = __ldrex(v15);
    while ( __strex(result - 1, v15) );
    result = (*v15)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  return result;
}


void __fastcall Social::MultiplayerXBL::_getPrimaryUserNickname(Social::MultiplayerXBL *this, int a2)
{
  Social::MultiplayerXBL::_getPrimaryUserNickname(this, a2);
}


void __fastcall Social::Events::XboxLiveTelemetry::~XboxLiveTelemetry(Social::Events::XboxLiveTelemetry *this)
{
  Social::Events::XboxLiveTelemetry *v1; // r0@1

  v1 = Social::Events::XboxLiveTelemetry::~XboxLiveTelemetry(this);
  j_j_j__ZdlPv_5((void *)v1);
}


void *__fastcall Social::Events::Event::measurementsAsJsonValue(Json::Value *a1, int a2)
{
  int v2; // r5@1
  Json::Value *v3; // r4@1
  void *result; // r0@1
  int i; // r7@1
  int v6; // r6@2
  int v14; // r1@4
  int v15; // [sp+0h] [bp-28h]@4

  v2 = a2;
  v3 = a1;
  result = Json::Value::Value(a1, 0);
  for ( i = *(_DWORD *)(v2 + 52); i; i = *(_DWORD *)i )
  {
    v6 = Json::Value::operator[](v3, (const char **)(i + 8));
    if ( *(_DWORD *)(i + 44) == 4 )
    {
      if ( *(_DWORD *)(i + 40) )
      {
        _R0 = Json::Value::asFloat((Json::Value *)(i + 24), 0.0);
        __asm { VMOV            S0, R0 }
        _R0 = *(_DWORD *)(i + 40);
        __asm
        {
          VMOV            S2, R0
          VCVT.F32.S32    S2, S2
          VDIV.F32        S0, S0, S2
          VCVT.F64.F32    D0, S0
          VMOV            R2, R3, D0
        }
        Json::Value::Value((Json::Value *)&v15, v14, _R2);
      }
      else
        Json::Value::Value((Json::Value *)&v15, 0);
    }
    else
      Json::Value::Value((Json::Value *)&v15, (const Json::Value *)(i + 24));
    Json::Value::operator=(v6, (const Json::Value *)&v15);
    result = (void *)Json::Value::~Value((Json::Value *)&v15);
  }
  return result;
}


void __fastcall Social::Events::Event::addProperty<BlockID>(int a1, int *a2, _BYTE *a3)
{
  Social::Events::Event::addProperty<BlockID>(a1, a2, a3);
}


int (**__fastcall Social::MultiplayerServiceManager::_buildGameList(Social::MultiplayerServiceManager *this))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  Social::MultiplayerServiceManager *v1; // r5@1
  pthread_mutex_t *v2; // r8@1
  int v3; // r0@2
  Social::MultiplayerGameInfo *v4; // r4@3
  Social::MultiplayerGameInfo *v5; // r6@3
  Social::MultiplayerGameInfo *v6; // r0@4
  int i; // r7@6
  int v8; // r10@6
  const Social::MultiplayerGameInfo *v9; // r4@7
  const Social::MultiplayerGameInfo *v10; // r6@7
  __int64 v11; // r0@8
  Social::MultiplayerGameInfo *v12; // r0@12
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@18
  Social::MultiplayerGameInfo *v14; // [sp+0h] [bp-30h]@7
  const Social::MultiplayerGameInfo *v15; // [sp+4h] [bp-2Ch]@7

  v1 = this;
  v2 = (pthread_mutex_t *)((char *)this + 28);
  if ( &pthread_create )
  {
    v3 = pthread_mutex_lock(v2);
    if ( v3 )
      sub_119CCFC(v3);
  }
  v4 = (Social::MultiplayerGameInfo *)*((_DWORD *)v1 + 3);
  v5 = (Social::MultiplayerGameInfo *)*((_DWORD *)v1 + 4);
  if ( v5 != v4 )
    v6 = (Social::MultiplayerGameInfo *)*((_DWORD *)v1 + 3);
    do
      v6 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v6) + 88);
    while ( v5 != v6 );
  *((_DWORD *)v1 + 4) = v4;
  v8 = *(_QWORD *)v1 >> 32;
  for ( i = *(_QWORD *)v1; i != v8; i += 4 )
    (*(void (__fastcall **)(Social::MultiplayerGameInfo **))(**(_DWORD **)i + 32))(&v14);
    v10 = v15;
    v9 = v14;
    if ( v14 != v15 )
    {
      do
      {
        v11 = *((_QWORD *)v1 + 2);
        if ( (_DWORD)v11 == HIDWORD(v11) )
        {
          std::vector<Social::MultiplayerGameInfo,std::allocator<Social::MultiplayerGameInfo>>::_M_emplace_back_aux<Social::MultiplayerGameInfo const&>(
            (unsigned __int64 *)((char *)v1 + 12),
            v9);
        }
        else
          Social::MultiplayerGameInfo::MultiplayerGameInfo((Social::MultiplayerGameInfo *)v11, v9);
          *((_DWORD *)v1 + 4) += 88;
        v9 = (const Social::MultiplayerGameInfo *)((char *)v9 + 88);
      }
      while ( v10 != v9 );
      v9 = v15;
      v12 = v14;
      if ( v14 != v15 )
        do
          v12 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v12) + 88);
        while ( v9 != v12 );
        v9 = v14;
    }
    if ( v9 )
      operator delete((void *)v9);
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v2);
  return result;
}


int __fastcall Social::UserManager::needsAsyncUserSelection(Social::UserManager *this, int a2)
{
  return 0;
}


void __fastcall Social::Events::Event::addProperty<int>(int a1, int *a2, int *a3)
{
  Social::Events::Event::addProperty<int>(a1, a2, a3);
}


void **__fastcall Social::XboxLiveUserManager::_fromPrivacyValue(void **a1, int a2, _DWORD *a3)
{
  void **result; // r0@2

  switch ( *a3 )
  {
    case 0:
      result = sub_119C884(a1, "Unknown");
      break;
    case 1:
      result = sub_119C884(a1, "CommunicateUsingText");
    case 2:
      result = sub_119C884(a1, "CommunicateUsingVideo");
    case 3:
      result = sub_119C884(a1, "CommunicateUsingVoice");
    case 4:
      result = sub_119C884(a1, "ViewTargetProfile");
    case 5:
      result = sub_119C884(a1, "ViewTargetGameHistory");
    case 6:
      result = sub_119C884(a1, "ViewTargetVideoHistory");
    case 7:
      result = sub_119C884(a1, "ViewTargetMusicHistory");
    case 9:
      result = sub_119C884(a1, "ViewTargetPresence");
    case 0xA:
      result = sub_119C884(a1, "ViewTargetVideoStatus");
    case 0xB:
      result = sub_119C884(a1, "ViewTargetMusicStatus");
    case 0xC:
      result = sub_119C884(a1, "PlayMultiplayer");
    case 0xD:
      result = sub_119C884(a1, "BroadcastWithTwitch");
    case 0xE:
      result = sub_119C884(a1, "ViewTargetUserCreatedContent");
    case 8:
      result = sub_119C884(a1, "ViewTargetExerciseInfo");
    default:
      result = sub_119C884(a1, "Unknown Fix Me");
  }
  return result;
}


Json::Value *__fastcall Social::Events::EventManager::getPlayerCommonProperty(int a1, int a2, unsigned int a3, int *a4)
{
  __int64 v4; // kr00_8@1
  int v5; // r5@1
  unsigned int v6; // r1@1
  unsigned int v7; // r9@1
  int *v8; // r7@1
  _DWORD *v9; // r8@2
  int v10; // r0@2
  int v11; // r4@2
  _DWORD *v12; // r6@4
  bool v13; // zf@7
  Json::Value *result; // r0@11
  int v15; // r8@13
  int *v16; // r5@14
  int v17; // r4@14
  _DWORD *v18; // r6@16
  unsigned int v19; // r0@17
  int v20; // r1@17
  bool v21; // zf@19
  int v22; // r0@22
  int v23; // r4@22
  int *v24; // [sp+4h] [bp-34h]@1

  v24 = a4;
  v4 = *(_QWORD *)(a2 + 68);
  v5 = a1;
  v6 = a3 % (unsigned int)(*(_QWORD *)(a2 + 68) >> 32);
  v7 = v6;
  v8 = *(int **)(v4 + 4 * v6);
  if ( !v8 )
    goto LABEL_11;
  v9 = (_DWORD *)*v8;
  v10 = *(_DWORD *)(v4 + 4 * v6);
  v11 = *(_DWORD *)(*v8 + 4);
  while ( v11 != a3 )
  {
    v12 = (_DWORD *)*v9;
    if ( *v9 )
    {
      v11 = v12[1];
      v10 = (int)v9;
      v9 = (_DWORD *)*v9;
      if ( v12[1] % HIDWORD(v4) == v6 )
        continue;
    }
  }
  v13 = v10 == 0;
  if ( v10 )
    v10 = *(_DWORD *)v10;
    v13 = v10 == 0;
  if ( v13 )
LABEL_11:
    sub_21E8AF4((int *)v5, a4);
    result = (Json::Value *)j_Json::Value::Value((Json::Value *)(v5 + 8), 0);
  else
    v15 = v5;
    if ( !v8 )
      goto LABEL_18;
    v16 = (int *)*v8;
    v17 = *(_DWORD *)(*v8 + 4);
    while ( v17 != a3 )
      v18 = (_DWORD *)*v16;
      if ( *v16 )
      {
        v17 = v18[1];
        v19 = v18[1];
        v20 = v19 % HIDWORD(v4);
        v10 = v19 / HIDWORD(v4);
        v8 = v16;
        v16 = (int *)*v16;
        if ( v20 == v7 )
          continue;
      }
    v21 = v8 == 0;
    if ( v8 )
      v10 = *v8;
      v21 = *v8 == 0;
    if ( v21 )
LABEL_18:
      sub_21E5A84("_Map_base::at");
    v22 = j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
            (unsigned __int64 *)(v10 + 8),
            (int **)a4);
    v23 = v22;
    if ( v22 )
      sub_21E8AF4((int *)v15, (int *)(v22 + 16));
      result = j_Json::Value::Value((Json::Value *)(v15 + 8), (const Json::Value *)(v23 + 24));
    else
      sub_21E8AF4((int *)v15, v24);
      result = (Json::Value *)j_Json::Value::Value((Json::Value *)(v15 + 8), 0);
  return result;
}


int __fastcall Social::User::_setNeedsPlatformReconnect(int result)
{
  *(_BYTE *)(result + 20) = 1;
  return result;
}


signed int __fastcall Social::XboxLiveUserManager::checkPrivilegeSilently(Social::XboxLiveUserManager *this, int a2)
{
  Social::XboxLiveUserManager *v2; // r6@1
  int v3; // r4@1
  xbox::services::system::xbox_live_user *v4; // r0@1
  unsigned int v5; // r0@4
  signed int v6; // r5@4
  int *v7; // r0@6
  void *v8; // r0@6
  void *v9; // r0@7
  signed __int64 v10; // r6@8
  signed int v11; // r0@9
  bool v12; // zf@9
  unsigned int *v13; // r2@21
  signed int v14; // r1@23
  int *v15; // r0@29
  unsigned int *v17; // r2@35
  signed int v18; // r1@37
  unsigned int *v19; // r2@39
  signed int v20; // r1@41
  int v21; // [sp+4h] [bp-3Ch]@9
  int v22; // [sp+8h] [bp-38h]@6
  int v23; // [sp+Ch] [bp-34h]@6
  unsigned int v24; // [sp+10h] [bp-30h]@6
  unsigned int v25; // [sp+14h] [bp-2Ch]@8

  v2 = this;
  v3 = a2;
  v4 = (xbox::services::system::xbox_live_user *)*((_DWORD *)this + 34);
  if ( v4 )
  {
    if ( *((_DWORD *)v2 + 36) )
    {
      if ( xbox::services::system::xbox_live_user::is_signed_in(v4) == 1 )
      {
        v5 = *((_WORD *)v2 + 62);
        v6 = 1;
        if ( v5 <= 0xFF && !(_BYTE)v5 )
        {
          v7 = (int *)xbox::services::system::xbox_live_user::privileges(*((xbox::services::system::xbox_live_user **)v2
                                                                         + 34));
          sub_119C854(&v22, v7);
          utility::conversions::to_utf8string(&v23, &v22);
          Util::split((int)&v24, &v23, 32);
          v8 = (void *)(v23 - 12);
          if ( (int *)(v23 - 12) != &dword_28898C0 )
          {
            v17 = (unsigned int *)(v23 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v18 = __ldrex(v17);
              while ( __strex(v18 - 1, v17) );
            }
            else
              v18 = (*v17)--;
            if ( v18 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v8);
          }
          v9 = (void *)(v22 - 12);
          if ( (int *)(v22 - 12) != &dword_28898C0 )
            v19 = (unsigned int *)(v22 - 4);
                v20 = __ldrex(v19);
              while ( __strex(v20 - 1, v19) );
              v20 = (*v19)--;
            if ( v20 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v9);
          v10 = *(_QWORD *)&v24;
          if ( v24 == v25 )
            v6 = 0;
          else
            while ( 1 )
              v11 = Util::toInt<int,(void *)0>((unsigned int *)v10, &v21);
              v12 = v11 == 0;
              if ( !v11 )
                v12 = v21 == v3;
              if ( v12 )
                break;
              LODWORD(v10) = v10 + 4;
              if ( HIDWORD(v10) == (_DWORD)v10 )
              {
                v6 = 0;
                goto LABEL_19;
              }
            v6 = 1;
LABEL_19:
            v10 = __PAIR__(v24, v25);
            if ( v24 != v25 )
                v15 = (int *)(*(_DWORD *)HIDWORD(v10) - 12);
                if ( v15 != &dword_28898C0 )
                {
                  v13 = (unsigned int *)(*(_DWORD *)HIDWORD(v10) - 4);
                  if ( &pthread_create )
                  {
                    __dmb();
                    do
                      v14 = __ldrex(v13);
                    while ( __strex(v14 - 1, v13) );
                  }
                  else
                    v14 = (*v13)--;
                  if ( v14 <= 0 )
                    j_j_j_j_j__ZdlPv_9_1(v15);
                }
                HIDWORD(v10) += 4;
              while ( HIDWORD(v10) != (_DWORD)v10 );
              LODWORD(v10) = v24;
          if ( (_DWORD)v10 )
            operator delete((void *)v10);
        }
      }
      else
    }
    else
      v6 = 1;
  }
  else
    v6 = 1;
  return v6;
}


void __fastcall Social::Events::Event::addProperty<double>(int a1, int *a2, int a3)
{
  int v3; // r6@1
  int *v5; // r4@1
  int *v6; // r0@1
  Json::Value *v11; // r5@1
  int v13; // r1@1
  void *v14; // r0@1
  unsigned int *v15; // r2@3
  signed int v16; // r1@5
  int v17; // [sp+0h] [bp-38h]@1
  int v18; // [sp+8h] [bp-30h]@1

  v3 = a1;
  _R5 = a3;
  v5 = a2;
  v6 = sub_21E8AF4(&v18, a2);
  __asm { VLDR            D0, [R5] }
  v11 = (Json::Value *)(v6 + 2);
  __asm { VMOV            R2, R3, D0 }
  Json::Value::Value((Json::Value *)(v6 + 2), v13, _R2);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v17,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v18);
  Json::Value::~Value(v11);
  v14 = (void *)(v18 - 12);
  if ( (int *)(v18 - 12) != &dword_28898C0 )
  {
    v15 = (unsigned int *)(v18 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
    }
    else
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j__ZdlPv_9(v14);
  }
}


void **__fastcall Social::MultiplayerServiceManager::getXBLInfo(void **a1, unsigned __int64 *a2, int a3)
{
  Social::MultiplayerService **v3; // r4@1
  Social::MultiplayerService **v4; // r6@1
  int v5; // r5@1
  void **v6; // r8@1
  int v7; // r7@2
  void **result; // r0@4

  v4 = (Social::MultiplayerService **)(*a2 >> 32);
  v3 = (Social::MultiplayerService **)*a2;
  v5 = a3;
  v6 = a1;
  if ( v3 == v4 )
  {
LABEL_4:
    result = sub_119C884(v6, "You are not using Xbox Live.");
  }
  else
    while ( 1 )
    {
      v7 = (int)(v3 + 1);
      if ( Social::MultiplayerService::getServiceId(*v3) == v5 )
        break;
      ++v3;
      if ( v4 == (Social::MultiplayerService **)v7 )
        goto LABEL_4;
    }
    result = (void **)(*(int (__fastcall **)(void **))(*(_DWORD *)*v3 + 104))(v6);
  return result;
}


RakNet *__fastcall Social::MultiplayerXBL::_updateLobby(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  RakNet *result; // r0@4
  bool v6; // zf@4

  v3 = a1;
  v4 = a3;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 176))() == 1 )
  {
    if ( !*(_DWORD *)(v4 + 8) )
      sub_119C8E4();
    (*(void (__fastcall **)(_DWORD))(v4 + 12))(v4);
  }
  Social::MultiplayerXBL::_updatePlayerCountInLobbyIfNeeded((Social::MultiplayerXBL *)v3);
  result = (RakNet *)*(_BYTE *)(v3 + 28);
  v6 = result == 0;
  if ( *(_BYTE *)(v3 + 28) )
    result = *(RakNet **)(v3 + 32);
    v6 = result == 0;
  if ( !v6 )
    result = j_j_j__ZN6Social14MultiplayerXBL20_sendRoundStartEventEv((Social::MultiplayerXBL *)v3);
  return result;
}


int __fastcall Social::XboxLiveUserManager::_runCallbacks(int result, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  int v4; // r5@1
  int v5; // r7@1
  int v6; // r7@4
  int v7; // r6@5
  int (__fastcall *v8)(int, int, signed int); // r3@6

  v2 = result;
  v3 = a2;
  v5 = *(_QWORD *)(result + 212) >> 32;
  v4 = *(_QWORD *)(result + 212);
  if ( v4 != v5 )
  {
    do
    {
      if ( !*(_DWORD *)(v4 + 8) )
        sub_119C8E4();
      result = (*(int (__fastcall **)(int, int))(v4 + 12))(v4, v3);
      v4 += 16;
    }
    while ( v5 != v4 );
    v6 = *(_QWORD *)(v2 + 212) >> 32;
    v4 = *(_QWORD *)(v2 + 212);
    if ( v6 != v4 )
      v7 = *(_QWORD *)(v2 + 212);
      do
      {
        v8 = *(int (__fastcall **)(int, int, signed int))(v7 + 8);
        if ( v8 )
          result = v8(v7, v7, 3);
        v7 += 16;
      }
      while ( v6 != v7 );
  }
  *(_DWORD *)(v2 + 216) = v4;
  return result;
}


void __fastcall Social::Events::EventManager::setupCommonProperties(Social::Events::EventManager *this)
{
  Social::Events::EventManager::setupCommonProperties(this);
}


void __fastcall Social::XboxLiveUserInfo::_processFriends(int a1, unsigned __int64 *a2, int a3, int a4)
{
  Social::XboxLiveUserInfo::_processFriends(a1, a2, a3, a4);
}


Social::User *__fastcall Social::User::~User(Social::User *this)
{
  Social::User *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10
  int v7; // r1@15
  void *v8; // r0@15
  int v9; // r5@16
  unsigned int *v10; // r1@17
  unsigned int v11; // r0@19
  unsigned int *v12; // r6@23
  unsigned int v13; // r0@25
  int v14; // r5@30
  unsigned int *v15; // r1@31
  unsigned int v16; // r0@33
  unsigned int *v17; // r6@37
  unsigned int v18; // r0@39
  unsigned int *v20; // r2@45
  signed int v21; // r1@47

  v1 = this;
  *(_DWORD *)this = &off_26DEB90;
  v2 = *((_DWORD *)this + 13);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  v7 = *((_DWORD *)v1 + 11);
  v8 = (void *)(v7 - 12);
  if ( (int *)(v7 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v7 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v8);
  v9 = *((_DWORD *)v1 + 10);
  if ( v9 )
    v10 = (unsigned int *)(v9 + 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 - 1, v10) );
      v11 = (*v10)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  v14 = *((_DWORD *)v1 + 7);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
      v16 = (*v15)--;
    if ( v16 == 1 )
      v17 = (unsigned int *)(v14 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
  return v1;
}


signed int __fastcall Social::MultiplayerServiceManager::mayChatWith(_QWORD *a1)
{
  int v1; // r5@1 OVERLAPPED
  int v2; // r6@1 OVERLAPPED
  int v3; // r0@2
  signed int result; // r0@5

  *(_QWORD *)&v1 = *a1;
  if ( v1 == v2 )
  {
    result = 1;
  }
  else
    while ( 1 )
    {
      v3 = (*(int (**)(void))(**(_DWORD **)v1 + 96))();
      if ( !v3 )
        return 0;
      if ( v3 == 2 )
        break;
      v1 += 4;
      if ( v2 == v1 )
        return 1;
    }
    result = 2;
  return result;
}


char *__fastcall Social::XboxLiveUserManager::registerSignOutHandler(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r4@1
  void (__fastcall *v5)(int); // r3@2
  char *result; // r0@4

  v2 = a1;
  v3 = a2;
  v4 = *(_QWORD *)(a1 + 240);
  if ( v4 == *(_QWORD *)(a1 + 240) >> 32 )
  {
    result = j_j_j__ZNSt6vectorISt8functionIFvvEESaIS2_EE19_M_emplace_back_auxIJRKS2_EEEvDpOT_((_QWORD *)(a1 + 236), a2);
  }
  else
    *(_DWORD *)(v4 + 8) = 0;
    v5 = *(void (__fastcall **)(int))(a2 + 8);
    if ( v5 )
    {
      v5(v4);
      *(_DWORD *)(v4 + 12) = *(_DWORD *)(v3 + 12);
      *(_DWORD *)(v4 + 8) = *(_DWORD *)(v3 + 8);
      v4 = *(_DWORD *)(v2 + 240);
    }
    result = (char *)(v4 + 16);
    *(_DWORD *)(v2 + 240) = v4 + 16;
  return result;
}


Social::GameConnectionInfo *__fastcall Social::MultiplayerGameInfo::getOptimumConnection(Social::MultiplayerGameInfo *this, int a2, int a3)
{
  unsigned __int64 *v3; // r6@1
  Social::MultiplayerGameInfo *v4; // r4@1
  __int64 v5; // kr00_8@1
  int v6; // r9@1
  int v7; // r0@1
  const Social::GameConnectionInfo *v9; // r0@5
  const Social::GameConnectionInfo *v10; // r1@5
  int *v11; // r5@11
  void *v12; // r1@11
  void *v13; // r1@11
  int *v14; // r2@11
  unsigned int v15; // r1@11
  int v16; // r0@11
  bool v17; // zf@11
  int v18; // r3@11
  int v19; // r7@11
  int v20; // r6@12
  const Social::GameConnectionInfo *v21; // r0@13
  const Social::GameConnectionInfo *v22; // r1@13
  int *v23; // r10@16
  int *v24; // r0@20
  void *v25; // r1@23
  void *v26; // r1@23
  int *v27; // r6@23
  unsigned int v28; // r1@23
  int v29; // r0@23
  int v30; // r2@23
  int v31; // r2@25
  const Social::GameConnectionInfo *v32; // r0@30
  const Social::GameConnectionInfo *v33; // r1@30
  void *v34; // r1@36
  void *v35; // r1@36
  int *v36; // r6@36
  unsigned int v37; // r1@36
  int v38; // r0@36
  int v39; // r2@36
  int v40; // r2@38
  const Social::GameConnectionInfo *v41; // r0@42
  const Social::GameConnectionInfo *v42; // r1@42
  int v43; // r3@47
  void *v44; // r1@48
  void *v45; // r1@48
  int *v46; // r6@48
  unsigned int v47; // r1@48
  int v48; // r0@48
  int v49; // r2@48
  int v50; // r2@50
  int v51; // r0@54
  unsigned __int64 v52; // kr28_8@56
  unsigned __int16 v53; // [sp+10h] [bp-150h]@45
  int v54; // [sp+14h] [bp-14Ch]@47
  int v55; // [sp+18h] [bp-148h]@47
  int v56; // [sp+1Ch] [bp-144h]@47
  int v57; // [sp+20h] [bp-140h]@47
  int v58; // [sp+24h] [bp-13Ch]@47
  int v59; // [sp+40h] [bp-120h]@47
  int v60; // [sp+44h] [bp-11Ch]@47
  char v61; // [sp+48h] [bp-118h]@47
  unsigned __int16 v62; // [sp+4Ch] [bp-114h]@33
  int v63; // [sp+50h] [bp-110h]@35
  int v64; // [sp+54h] [bp-10Ch]@35
  int v65; // [sp+58h] [bp-108h]@35
  int v66; // [sp+5Ch] [bp-104h]@35
  int v67; // [sp+60h] [bp-100h]@35
  int v68; // [sp+7Ch] [bp-E4h]@35
  int v69; // [sp+80h] [bp-E0h]@35
  char v70; // [sp+84h] [bp-DCh]@35
  unsigned __int16 v71; // [sp+88h] [bp-D8h]@16
  int v72; // [sp+8Ch] [bp-D4h]@22
  int v73; // [sp+90h] [bp-D0h]@22
  int v74; // [sp+94h] [bp-CCh]@22
  int v75; // [sp+98h] [bp-C8h]@22
  int v76; // [sp+9Ch] [bp-C4h]@22
  int v77; // [sp+B8h] [bp-A8h]@22
  int v78; // [sp+BCh] [bp-A4h]@22
  char v79; // [sp+C0h] [bp-A0h]@22
  unsigned __int16 v80; // [sp+C4h] [bp-9Ch]@8
  int v81; // [sp+C8h] [bp-98h]@10
  int v82; // [sp+CCh] [bp-94h]@10
  int v83; // [sp+D0h] [bp-90h]@10
  int v84; // [sp+D4h] [bp-8Ch]@10
  int v85; // [sp+D8h] [bp-88h]@10
  int v86; // [sp+F4h] [bp-6Ch]@10
  int v87; // [sp+F8h] [bp-68h]@10
  char v88; // [sp+FCh] [bp-64h]@10
  unsigned __int16 v89; // [sp+100h] [bp-60h]@5
  void *v90; // [sp+104h] [bp-5Ch]@10
  void *v91; // [sp+108h] [bp-58h]@10
  int v92; // [sp+10Ch] [bp-54h]@10
  void *v93; // [sp+110h] [bp-50h]@10
  int *v94; // [sp+114h] [bp-4Ch]@10
  unsigned int v95; // [sp+118h] [bp-48h]@11
  int v96; // [sp+11Ch] [bp-44h]@11
  int v97; // [sp+120h] [bp-40h]@11
  int v98; // [sp+124h] [bp-3Ch]@11
  int v99; // [sp+128h] [bp-38h]@11
  int v100; // [sp+12Ch] [bp-34h]@11
  int v101; // [sp+130h] [bp-30h]@10
  int v102; // [sp+134h] [bp-2Ch]@10
  char v103; // [sp+138h] [bp-28h]@10

  v3 = (unsigned __int64 *)a2;
  v4 = this;
  v5 = *(_QWORD *)a2;
  v6 = a3;
  v7 = -286331153 * ((HIDWORD(v5) - (signed int)v5) >> 2);
  if ( v7 == 1 )
    return Social::GameConnectionInfo::GameConnectionInfo(v4, (const Social::GameConnectionInfo *)v5);
  if ( !v7 )
    return Social::GameConnectionInfo::GameConnectionInfo(v4);
  Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v89);
  v9 = (const Social::GameConnectionInfo *)(*v3 >> 32);
  v10 = (const Social::GameConnectionInfo *)*v3;
  if ( v10 == v9 )
  {
LABEL_8:
    Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v80);
  }
  else
    while ( *(_WORD *)v10 != 4 )
    {
      v10 = (const Social::GameConnectionInfo *)((char *)v10 + 60);
      if ( v9 == v10 )
        goto LABEL_8;
    }
    Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v80, v10);
  v89 = v80;
  xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
    (int *)&v90,
    &v81);
    (int *)&v91,
    &v82);
  v92 = v83;
    (int *)&v93,
    &v84);
  std::_Hashtable<std::string,std::string,std::allocator<std::string>,std::__detail::_Identity,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,true,true>>::_M_move_assign(
    (int)&v94,
    (int)&v85);
  xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v101, &v86);
  xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v102, &v87);
  v103 = v88;
  Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v80);
  if ( v89 == 0xFFFF )
    v21 = (const Social::GameConnectionInfo *)(*v3 >> 32);
    v22 = (const Social::GameConnectionInfo *)*v3;
    if ( v22 == v21 )
LABEL_16:
      v23 = (int *)&v90;
      Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v71);
    else
      while ( *(_WORD *)v22 != 3 )
      {
        v22 = (const Social::GameConnectionInfo *)((char *)v22 + 60);
        if ( v21 == v22 )
          goto LABEL_16;
      }
      Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v71, v22);
    v89 = v71;
    xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v23, &v72);
    xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
      (int *)&v91,
      &v73);
    v92 = v74;
      (int *)&v93,
      &v75);
    std::_Hashtable<std::string,std::string,std::allocator<std::string>,std::__detail::_Identity,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,true,true>>::_M_move_assign(
      (int)&v94,
      (int)&v76);
    xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v101, &v77);
    xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v102, &v78);
    v103 = v79;
    Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v71);
    if ( v89 == 0xFFFF )
      if ( v6 != 1 )
        goto LABEL_61;
      v32 = (const Social::GameConnectionInfo *)(*v3 >> 32);
      v33 = (const Social::GameConnectionInfo *)*v3;
      if ( v33 == v32 )
LABEL_33:
        Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v62);
      else
        while ( *(_WORD *)v33 != 2 )
        {
          v33 = (const Social::GameConnectionInfo *)((char *)v33 + 60);
          if ( v32 == v33 )
            goto LABEL_33;
        }
        Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v62, v33);
      v89 = v62;
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v23, &v63);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
        (int *)&v91,
        &v64);
      v92 = v65;
        (int *)&v93,
        &v66);
      std::_Hashtable<std::string,std::string,std::allocator<std::string>,std::__detail::_Identity,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,true,true>>::_M_move_assign(
        (int)&v94,
        (int)&v67);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v101, &v68);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v102, &v69);
      v103 = v70;
      Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v62);
      if ( v89 == 0xFFFF )
LABEL_61:
        v41 = (const Social::GameConnectionInfo *)(*v3 >> 32);
        v42 = (const Social::GameConnectionInfo *)*v3;
        if ( v42 == v41 )
LABEL_45:
          Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v53);
        else
          while ( *(_WORD *)v42 != 1 )
          {
            v42 = (const Social::GameConnectionInfo *)((char *)v42 + 60);
            if ( v41 == v42 )
              goto LABEL_45;
          }
          Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v53, v42);
        v89 = v53;
        xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v23, &v54);
        xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
          (int *)&v91,
          &v55);
        v92 = v56;
          (int *)&v93,
          &v57);
        std::_Hashtable<std::string,std::string,std::allocator<std::string>,std::__detail::_Identity,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,true,true>>::_M_move_assign(
          (int)&v94,
          (int)&v58);
          &v101,
          &v59);
          &v102,
          &v60);
        v103 = v61;
        Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v53);
        if ( v89 == 0xFFFF )
          v52 = *v3;
          if ( HIDWORD(v52) == (_DWORD)v52 )
            sub_119CA78("vector::_M_range_check: __n (which is %zu) >= this->size() (which is %zu)", 0, 0, v43);
          Social::GameConnectionInfo::GameConnectionInfo(v4, (const Social::GameConnectionInfo *)v52);
          return Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v89);
        v11 = &v100;
        *(_WORD *)v4 = v89;
        *((_DWORD *)v4 + 1) = v90;
        v90 = &unk_28898CC;
        v44 = v91;
        v91 = &unk_28898CC;
        *((_DWORD *)v4 + 2) = v44;
        *((_DWORD *)v4 + 3) = v92;
        v45 = v93;
        v93 = &unk_28898CC;
        *((_DWORD *)v4 + 4) = v45;
        v46 = v94;
        v47 = v95;
        v48 = v96;
        v17 = &v100 == v94;
        v49 = v97;
        *((_DWORD *)v4 + 5) = v94;
        *((_DWORD *)v4 + 6) = v47;
        *((_DWORD *)v4 + 7) = v48;
        *((_DWORD *)v4 + 8) = v49;
        *(_QWORD *)((char *)v4 + 36) = *(_QWORD *)&v98;
        if ( v17 )
          v46 = (int *)((char *)v4 + 44);
          v50 = v100;
          *((_DWORD *)v4 + 5) = (char *)v4 + 44;
          *((_DWORD *)v4 + 11) = v50;
        if ( v48 )
          v46[*(_DWORD *)(v48 + 8) % v47] = (int)v4 + 28;
        v24 = (int *)&off_27775D4;
        v34 = v91;
        *((_DWORD *)v4 + 2) = v34;
        v35 = v93;
        *((_DWORD *)v4 + 4) = v35;
        v36 = v94;
        v37 = v95;
        v38 = v96;
        v39 = v97;
        *((_DWORD *)v4 + 6) = v37;
        *((_DWORD *)v4 + 7) = v38;
        *((_DWORD *)v4 + 8) = v39;
          v36 = (int *)((char *)v4 + 44);
          v40 = v100;
          *((_DWORD *)v4 + 11) = v40;
        if ( v38 )
          v36[*(_DWORD *)(v38 + 8) % v37] = (int)v4 + 28;
      v11 = &v100;
      *(_WORD *)v4 = v89;
      *((_DWORD *)v4 + 1) = v90;
      v90 = &unk_28898CC;
      v25 = v91;
      v91 = &unk_28898CC;
      *((_DWORD *)v4 + 2) = v25;
      *((_DWORD *)v4 + 3) = v92;
      v26 = v93;
      v93 = &unk_28898CC;
      *((_DWORD *)v4 + 4) = v26;
      v27 = v94;
      v28 = v95;
      v29 = v96;
      v17 = &v100 == v94;
      v30 = v97;
      *((_DWORD *)v4 + 5) = v94;
      *((_DWORD *)v4 + 6) = v28;
      *((_DWORD *)v4 + 7) = v29;
      *((_DWORD *)v4 + 8) = v30;
      *(_QWORD *)((char *)v4 + 36) = *(_QWORD *)&v98;
      if ( v17 )
        v27 = (int *)((char *)v4 + 44);
        v31 = v100;
        *((_DWORD *)v4 + 5) = (char *)v4 + 44;
        *((_DWORD *)v4 + 11) = v31;
      if ( v29 )
        v27[*(_DWORD *)(v29 + 8) % v28] = (int)v4 + 28;
      v24 = (int *)&off_27775D4;
    v11 = &v100;
    *(_WORD *)v4 = v89;
    *((_DWORD *)v4 + 1) = v90;
    v90 = &unk_28898CC;
    v12 = v91;
    v91 = &unk_28898CC;
    *((_DWORD *)v4 + 2) = v12;
    *((_DWORD *)v4 + 3) = v92;
    v13 = v93;
    v93 = &unk_28898CC;
    *((_DWORD *)v4 + 4) = v13;
    v14 = v94;
    v15 = v95;
    v16 = v96;
    v17 = &v100 == v94;
    v18 = v97;
    *((_DWORD *)v4 + 5) = v94;
    *((_DWORD *)v4 + 6) = v15;
    *((_DWORD *)v4 + 7) = v16;
    *((_DWORD *)v4 + 8) = v18;
    v19 = v99;
    *((_DWORD *)v4 + 9) = v98;
    *((_DWORD *)v4 + 10) = v19;
    if ( v17 )
      v20 = (int)v4 + 44;
      *((_DWORD *)v4 + 5) = (char *)v4 + 44;
      *((_DWORD *)v4 + 11) = *v14;
      v20 = (int)v14;
    if ( v16 )
      *(_DWORD *)(v20 + 4 * (*(_DWORD *)(v16 + 8) % v15)) = (char *)v4 + 28;
    v24 = (int *)&off_27775D4;
  v51 = *v24;
  v99 = 0;
  v95 = 1;
  v51 += 12;
  v100 = 0;
  v94 = v11;
  v96 = 0;
  v97 = 0;
  *((_DWORD *)v4 + 12) = v101;
  v101 = v51;
  *((_DWORD *)v4 + 13) = v102;
  v102 = v51;
  *((_BYTE *)v4 + 56) = v103;
  return Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v89);
}


Social::Events::XboxLiveTelemetry *__fastcall Social::Events::XboxLiveTelemetry::~XboxLiveTelemetry(Social::Events::XboxLiveTelemetry *this)
{
  Social::Events::XboxLiveTelemetry *v1; // r4@1
  int v2; // r1@1
  unsigned __int64 v3; // r2@1
  unsigned __int64 v4; // r2@1
  int v5; // r1@1
  void *v6; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5

  v1 = this;
  *(_DWORD *)this = &off_26E8E98;
  sub_21CB78C((char *)this + 112);
  Core::FileStdStreamBuf::close((Social::Events::XboxLiveTelemetry *)((char *)v1 + 116), v2, v3);
  *((_DWORD *)v1 + 26) = &off_26D66C4;
  *((_DWORD *)v1 + 1065) = &off_26D66EC;
  *((_DWORD *)v1 + 28) = &off_26D66D8;
  Core::FileStdStreamBuf::~FileStdStreamBuf(
    (Social::Events::XboxLiveTelemetry *)((char *)v1 + 116),
    (int)&off_26D66EC,
    v4);
  *((_DWORD *)v1 + 26) = &off_26D670C;
  *((_DWORD *)v1 + 1065) = &off_26D6720;
  *((_DWORD *)v1 + 27) = 0;
  sub_21B6560((_DWORD *)v1 + 1065);
  v5 = *((_DWORD *)v1 + 25);
  v6 = (void *)(v5 - 12);
  if ( (int *)(v5 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v5 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v6);
  }
  Social::Events::AggregationEventListener::~AggregationEventListener(v1);
  return v1;
}


void __fastcall Social::MultiplayerXBL::joinGame(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int *v4; // r8@1
  int v5; // r9@1
  Social::XboxLiveUserManager *v6; // r0@1
  int v7; // r7@1
  int v8; // r6@1
  unsigned int *v9; // r1@2
  unsigned int v10; // r0@4
  unsigned int *v11; // r4@8
  unsigned int v12; // r0@10
  int v13; // r6@18
  void *v14; // r0@18
  int v15; // r6@19
  unsigned int *v16; // r1@20
  unsigned int v17; // r0@22
  unsigned int *v18; // r4@26
  unsigned int v19; // r0@28
  Social::XboxLiveUserManager *v20; // r6@33
  void (__fastcall *v21)(int *, int, signed int); // r3@33
  void *v22; // r4@35
  __int64 v23; // r0@35
  void *v24; // r0@39
  void *v25; // r0@40
  int v26; // r4@41
  unsigned int *v27; // r1@42
  unsigned int v28; // r0@44
  unsigned int *v29; // r5@48
  unsigned int v30; // r0@50
  void *v31; // r0@55
  unsigned int *v32; // r2@57
  signed int v33; // r1@59
  unsigned int *v34; // r2@61
  signed int v35; // r1@63
  unsigned int *v36; // r2@65
  signed int v37; // r1@67
  unsigned int *v38; // r2@69
  signed int v39; // r1@71
  int v40; // [sp+8h] [bp-C8h]@33
  int v41; // [sp+Ch] [bp-C4h]@34
  void (__fastcall *v42)(int *, int *, signed int); // [sp+14h] [bp-BCh]@33
  int v43; // [sp+18h] [bp-B8h]@34
  void *v44; // [sp+1Ch] [bp-B4h]@35
  void (*v45)(void); // [sp+24h] [bp-ACh]@35
  void (__fastcall *v46)(int *, int); // [sp+28h] [bp-A8h]@35
  int v47; // [sp+30h] [bp-A0h]@33
  Social::User *v48; // [sp+34h] [bp-9Ch]@33
  int v49; // [sp+38h] [bp-98h]@41
  int v50; // [sp+40h] [bp-90h]@18
  int v51; // [sp+44h] [bp-8Ch]@18
  int v52; // [sp+48h] [bp-88h]@19
  int v53; // [sp+4Ch] [bp-84h]@18
  int v54; // [sp+50h] [bp-80h]@16
  int v55; // [sp+54h] [bp-7Ch]@16
  int v56; // [sp+58h] [bp-78h]@16
  void *v57; // [sp+5Ch] [bp-74h]@16
  void *v58; // [sp+60h] [bp-70h]@16
  void *v59; // [sp+64h] [bp-6Ch]@16
  void *v60; // [sp+68h] [bp-68h]@16
  void *v61; // [sp+6Ch] [bp-64h]@16
  void *v62; // [sp+70h] [bp-60h]@16
  void *v63; // [sp+74h] [bp-5Ch]@16
  void *v64; // [sp+78h] [bp-58h]@16
  int v65; // [sp+80h] [bp-50h]@16
  int v66; // [sp+84h] [bp-4Ch]@16
  void *v67; // [sp+88h] [bp-48h]@16
  void *v68; // [sp+8Ch] [bp-44h]@16
  Social::User *v69; // [sp+A8h] [bp-28h]@1
  int v70; // [sp+ACh] [bp-24h]@1

  v3 = a1;
  v4 = a2;
  v5 = a3;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v69, *(_DWORD *)(a1 + 44));
  v6 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v69);
  v7 = Social::XboxLiveUserManager::isSignedIn(v6);
  v8 = v70;
  if ( v70 )
  {
    v9 = (unsigned int *)(v70 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
      }
      else
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  }
  if ( !v7 )
    v54 = 0;
    v55 = 0;
    v56 = 0;
    v57 = &unk_28898CC;
    v58 = &unk_28898CC;
    v59 = &unk_28898CC;
    v60 = &unk_28898CC;
    v61 = &unk_28898CC;
    v62 = &unk_28898CC;
    v63 = &unk_28898CC;
    v64 = &unk_28898CC;
    v65 = 0;
    v66 = 0;
    v67 = &unk_28898CC;
    v68 = &unk_28898CC;
    if ( !*(_DWORD *)(v5 + 8) )
      sub_119C8E4();
    (*(void (__fastcall **)(int, signed int, int *, _DWORD))(v5 + 12))(v5, 5, &v54, 0);
    Social::MultiplayerGameInfo::~MultiplayerGameInfo((Social::MultiplayerGameInfo *)&v54);
  utility::conversions::to_string_t(&v53, v4);
  *(_BYTE *)(v3 + 443) = 0;
  xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v51);
  v13 = v51;
  sub_119C884((void **)&v50, "MinecraftLobby");
  xbox::services::multiplayer::manager::multiplayer_manager::initialize(v13, &v50);
  v14 = (void *)(v50 - 12);
  if ( (int *)(v50 - 12) != &dword_28898C0 )
    v32 = (unsigned int *)(v50 - 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v14);
  v15 = v52;
  if ( v52 )
    v16 = (unsigned int *)(v52 + 4);
        v17 = __ldrex(v16);
      while ( __strex(v17 - 1, v16) );
      v17 = (*v16)--;
    if ( v17 == 1 )
      v18 = (unsigned int *)(v15 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 8))(v15);
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
        v19 = (*v18)--;
      if ( v19 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v48, *(_DWORD *)(v3 + 44));
  v20 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v48);
  sub_119C884((void **)&v47, (const char *)&unk_257BC67);
  sub_119C854(&v40, &v53);
  v42 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v5 + 8);
  if ( v21 )
    v21(&v41, v5, 2);
    v43 = *(_DWORD *)(v5 + 12);
    v42 = *(void (__fastcall **)(int *, int *, signed int))(v5 + 8);
  v45 = 0;
  v22 = operator new(0x18u);
  *(_DWORD *)v22 = v3;
  sub_119C854((int *)v22 + 1, &v40);
  v23 = *(_QWORD *)&v41;
  *(_QWORD *)&v41 = *((_QWORD *)v22 + 1);
  *((_QWORD *)v22 + 1) = v23;
  LODWORD(v23) = v42;
  *((_DWORD *)v22 + 4) = v23;
  HIDWORD(v23) = v43;
  v43 = *((_DWORD *)v22 + 5);
  *((_DWORD *)v22 + 5) = HIDWORD(v23);
  v44 = v22;
  v45 = (void (*)(void))sub_1011538;
  v46 = sub_101104C;
  Social::XboxLiveUserManager::checkPrivilegeWithUIAsync(v20, 254, (int)&v47, (int)&v44);
  if ( v45 )
    v45();
  if ( v42 )
    v42(&v41, &v41, 3);
  v24 = (void *)(v40 - 12);
  if ( (int *)(v40 - 12) != &dword_28898C0 )
    v34 = (unsigned int *)(v40 - 4);
        v35 = __ldrex(v34);
      while ( __strex(v35 - 1, v34) );
      v35 = (*v34)--;
    if ( v35 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v24);
  v25 = (void *)(v47 - 12);
  if ( (int *)(v47 - 12) != &dword_28898C0 )
    v36 = (unsigned int *)(v47 - 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v25);
  v26 = v49;
  if ( v49 )
    v27 = (unsigned int *)(v49 + 4);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 == 1 )
      v29 = (unsigned int *)(v26 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
          v30 = __ldrex(v29);
        while ( __strex(v30 - 1, v29) );
        v30 = (*v29)--;
      if ( v30 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
  v31 = (void *)(v53 - 12);
  if ( (int *)(v53 - 12) != &dword_28898C0 )
    v38 = (unsigned int *)(v53 - 4);
        v39 = __ldrex(v38);
      while ( __strex(v39 - 1, v38) );
      v39 = (*v38)--;
    if ( v39 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v31);
}


int __fastcall Social::MultiplayerService::leaveGame(Social::MultiplayerService *this)
{
  Social::MultiplayerService *v1; // r4@1
  int result; // r0@1
  bool v3; // zf@1

  v1 = this;
  result = (*(int (**)(void))(*(_DWORD *)this + 140))();
  v3 = result == 1;
  if ( result == 1 )
  {
    result = *((_BYTE *)v1 + 253);
    v3 = result == 0;
  }
  if ( v3 )
    *((_BYTE *)v1 + 253) = 1;
    (*(void (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v1 + 112))(v1);
    result = (*(int (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v1 + 208))(v1);
  return result;
}


void __fastcall Social::MultiplayerXBL::_updatePlayerCountInLobbyIfNeeded(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10
  Level *v7; // r0@16
  bool v8; // zf@16
  int v9; // r0@19
  bool v10; // zf@19
  int v11; // r0@22
  int *v12; // r5@23
  void *v13; // r0@23
  void *v14; // r0@26
  int v15; // r4@27
  unsigned int *v16; // r1@28
  unsigned int v17; // r0@30
  unsigned int *v18; // r5@34
  unsigned int v19; // r0@36
  unsigned int *v20; // r2@42
  signed int v21; // r1@44
  unsigned int *v22; // r2@46
  signed int v23; // r1@48
  int v24; // [sp+4h] [bp-3Ch]@23
  int v25; // [sp+Ch] [bp-34h]@23
  char v26; // [sp+10h] [bp-30h]@23
  int v27; // [sp+18h] [bp-28h]@23
  int v28; // [sp+1Ch] [bp-24h]@1
  int v29; // [sp+20h] [bp-20h]@1
  Level *v30; // [sp+24h] [bp-1Ch]@1
  int v31; // [sp+28h] [bp-18h]@27

  v1 = this;
  xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v28);
  xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
    (xbox::services::multiplayer::manager::multiplayer_manager *)&v30,
    v28);
  v2 = v29;
  if ( v29 )
  {
    v3 = (unsigned int *)(v29 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  if ( *((_BYTE *)v1 + 36) )
    v7 = v30;
    v8 = v30 == 0;
    if ( v30 )
      v7 = (Level *)*((_DWORD *)v1 + 8);
      v8 = v7 == 0;
    if ( !v8 )
      v9 = *((_DWORD *)Level::getPlayerList(v7) + 3);
      v10 = v9 == 0;
      if ( v9 )
        v10 = *((_BYTE *)v1 + 176) == 0;
      if ( !v10 )
        v11 = *((_DWORD *)Level::getPlayerList(*((Level **)v1 + 8)) + 3);
        if ( *((_DWORD *)v1 + 41) != v11 )
        {
          *((_DWORD *)v1 + 41) = v11;
          v12 = (int *)v30;
          sub_119C884((void **)&v25, "MemberCount");
          web::json::value::number((web::json::value *)&v24, *((_DWORD *)v1 + 41));
          xbox::services::multiplayer::manager::multiplayer_lobby_session::set_properties(
            (int)&v26,
            v12,
            &v25,
            (web::json::value *)&v24,
            0);
          v13 = (void *)(v27 - 12);
          if ( (int *)(v27 - 12) != &dword_28898C0 )
          {
            v20 = (unsigned int *)(v27 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v21 = __ldrex(v20);
              while ( __strex(v21 - 1, v20) );
            }
            else
              v21 = (*v20)--;
            if ( v21 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v13);
          }
          if ( v24 )
            (*(void (**)(void))(*(_DWORD *)v24 + 96))();
          v24 = 0;
          v14 = (void *)(v25 - 12);
          if ( (int *)(v25 - 12) != &dword_28898C0 )
            v22 = (unsigned int *)(v25 - 4);
                v23 = __ldrex(v22);
              while ( __strex(v23 - 1, v22) );
              v23 = (*v22)--;
            if ( v23 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v14);
        }
  v15 = v31;
  if ( v31 )
    v16 = (unsigned int *)(v31 + 4);
        v17 = __ldrex(v16);
      while ( __strex(v17 - 1, v16) );
      v17 = (*v16)--;
    if ( v17 == 1 )
      v18 = (unsigned int *)(v15 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 8))(v15);
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
        v19 = (*v18)--;
      if ( v19 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
}


Social::UserManager *__fastcall Social::UserManager::CreateUserManager(Social::UserManager *this)
{
  Social::UserManager *v1; // r4@1
  Social::UserManager *v2; // r5@1
  Social::UserManager *result; // r0@1

  v1 = this;
  v2 = (Social::UserManager *)operator new(0x98u);
  result = Social::UserManager::UserManager(v2);
  *(_DWORD *)v1 = v2;
  return result;
}


unsigned int __fastcall Social::User::setStorageArea(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r8@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r2@4
  __int64 v7; // kr08_8@7
  int v8; // r7@7
  unsigned int *v9; // r1@8
  unsigned int v10; // r0@10
  unsigned int *v11; // r6@14
  unsigned int v12; // r0@16
  unsigned int result; // r0@21
  unsigned int *v14; // r1@23
  unsigned int *v15; // r1@28
  unsigned int *v16; // r5@34
  int v17; // [sp+0h] [bp-20h]@22
  int v18; // [sp+4h] [bp-1Ch]@22

  v2 = a1;
  v3 = *(_QWORD *)(a1 + 36) >> 32;
  v4 = *(_QWORD *)(a1 + 36);
  if ( v3 )
  {
    v5 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
    }
    else
      ++*v5;
  }
  v7 = *(_QWORD *)a2;
  *(_DWORD *)a2 = 0;
  *(_DWORD *)(a2 + 4) = 0;
  *(_DWORD *)(v2 + 36) = v7;
  v8 = *(_DWORD *)(v2 + 40);
  *(_DWORD *)(v2 + 40) = HIDWORD(v7);
  if ( v8 )
    v9 = (unsigned int *)(v8 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
      }
      else
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  result = *(_DWORD *)(v2 + 32);
  if ( result )
    v17 = v4;
    v18 = v3;
    result = Social::UserManager::notifyUserStorageAreaChanged(result, v2, (int)&v17);
    v3 = v18;
    if ( v18 )
      v14 = (unsigned int *)(v18 + 4);
          result = __ldrex(v14);
        while ( __strex(result - 1, v14) );
        result = (*v14)--;
      if ( result == 1 )
        v16 = (unsigned int *)(v3 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
        if ( &pthread_create )
        {
          __dmb();
          do
            result = __ldrex(v16);
          while ( __strex(result - 1, v16) );
          goto LABEL_45;
        }
LABEL_44:
        result = (*v16)--;
LABEL_45:
        if ( result == 1 )
          result = (*(int (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
        return result;
  else if ( v3 )
    v15 = (unsigned int *)(v3 + 4);
        result = __ldrex(v15);
      while ( __strex(result - 1, v15) );
      result = (*v15)--;
    if ( result == 1 )
      v16 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
          result = __ldrex(v16);
        while ( __strex(result - 1, v16) );
        goto LABEL_45;
      goto LABEL_44;
  return result;
}


void __fastcall Social::XboxLiveUserManager::~XboxLiveUserManager(Social::XboxLiveUserManager *this, int a2)
{
  Social::XboxLiveUserManager::~XboxLiveUserManager(this, a2);
}


char *__fastcall Social::MultiplayerServiceManager::addObserver(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  __int64 v4; // r0@1
  char *result; // r0@2
  void *v6; // r8@3
  unsigned int v7; // r2@3
  unsigned int v8; // r1@5
  unsigned int v9; // r6@5
  char *v10; // r7@11
  char *v11; // r5@13
  int v12; // r5@15

  v2 = a2;
  v3 = a1;
  *(_DWORD *)(a2 + 4) = a1 + 40;
  v4 = *(_QWORD *)(a1 + 48);
  if ( (_DWORD)v4 == HIDWORD(v4) )
  {
    v6 = *(void **)(v3 + 44);
    v7 = ((signed int)v4 - (signed int)v6) >> 2;
    if ( !v7 )
      v7 = 1;
    HIDWORD(v4) = v7 + (((signed int)v4 - (signed int)v6) >> 2);
    v9 = v7 + (((signed int)v4 - (signed int)v6) >> 2);
    if ( 0 != HIDWORD(v4) >> 30 )
      v9 = 0x3FFFFFFF;
    if ( v8 < v7 )
    if ( v9 )
    {
      if ( v9 >= 0x40000000 )
        sub_119C874();
      v10 = (char *)operator new(4 * v9);
      LODWORD(v4) = *(_QWORD *)(v3 + 44) >> 32;
      v6 = (void *)*(_QWORD *)(v3 + 44);
    }
    else
      v10 = 0;
    *(_DWORD *)&v10[v4 - (_DWORD)v6] = v2;
    v11 = &v10[v4 - (_DWORD)v6];
    if ( 0 != ((signed int)v4 - (signed int)v6) >> 2 )
      _aeabi_memmove4(v10, v6);
    v12 = (int)(v11 + 4);
    if ( v6 )
      operator delete(v6);
    result = &v10[4 * v9];
    *(_DWORD *)(v3 + 44) = v10;
    *(_DWORD *)(v3 + 48) = v12;
    *(_DWORD *)(v3 + 52) = result;
  }
  else
    *(_DWORD *)v4 = v2;
    result = (char *)(*(_DWORD *)(v3 + 48) + 4);
    *(_DWORD *)(v3 + 48) = result;
  return result;
}


pthread_mutex_t *__fastcall Social::XboxLiveUserInfo::_OnSignIn(Social::XboxLiveUserInfo *this)
{
  pthread_mutex_t *result; // r0@1
  int v2; // [sp+0h] [bp-18h]@1
  int (*v3)(void); // [sp+8h] [bp-10h]@1

  v3 = 0;
  result = Social::XboxLiveUserInfo::_refresh((int)this, (int)&v2);
  if ( v3 )
    result = (pthread_mutex_t *)v3();
  return result;
}


int __fastcall Social::Events::AutomationEventLogger::AutomationEventLogger(__int64 a1)
{
  int v1; // r4@1
  double v2; // r0@1
  unsigned int v3; // r0@1
  int v4; // r6@3
  void *v5; // r5@3
  int v7; // [sp+0h] [bp-18h]@4

  v1 = a1;
  LODWORD(a1) = &off_26E8E68;
  *(_QWORD *)v1 = a1;
  *(_DWORD *)(v1 + 16) = 0;
  *(_DWORD *)(v1 + 20) = 0;
  *(_DWORD *)(v1 + 24) = 1065353216;
  HIDWORD(v2) = 10;
  LODWORD(v2) = v1 + 24;
  *(_DWORD *)(LODWORD(v2) + 4) = 0;
  v3 = sub_21E6254(v2);
  *(_DWORD *)(v1 + 12) = v3;
  if ( v3 == 1 )
  {
    *(_DWORD *)(v1 + 32) = 0;
    v5 = (void *)(v1 + 32);
  }
  else
    if ( v3 >= 0x40000000 )
      sub_21E57F4();
    v4 = 4 * v3;
    v5 = operator new(4 * v3);
    _aeabi_memclr4(v5, v4);
  *(_DWORD *)(v1 + 8) = v5;
  *(_DWORD *)(v1 + 40) = 0;
  *(_DWORD *)(v1 + 44) = 1071644672;
  *(_DWORD *)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 52) = 0;
  sub_21E034C(&v7);
  *(_QWORD *)(v1 + 48) = *(_QWORD *)&v7;
  return v1;
}


signed int __fastcall Social::Events::EventManager::setPlayerCommonProperty<int>(int a1, int a2, unsigned int a3, int **a4, int *a5)
{
  unsigned int v5; // r7@1
  int *v6; // r10@1
  int v7; // r11@1
  int v8; // r4@1
  int v9; // r11@1
  int v10; // t1@1
  int v11; // r4@1
  int v12; // r0@1
  _DWORD *v13; // r9@2
  int v14; // r6@2
  _DWORD *v15; // r8@4
  bool v16; // zf@7
  int v17; // r0@11
  int v19; // [sp+8h] [bp-40h]@1
  char v20; // [sp+Ch] [bp-3Ch]@12
  unsigned int v21; // [sp+14h] [bp-34h]@1
  int *v22; // [sp+1Ch] [bp-2Ch]@11

  v5 = a3;
  v6 = (int *)a4;
  v7 = a2;
  v8 = a1;
  v19 = a1;
  v21 = a3;
  Social::Events::EventManager::removePlayerCommonProperty(a2, a3, a4);
  sub_21E8AF4((int *)v8, v6);
  Json::Value::Value((Json::Value *)(v8 + 8), *a5);
  v10 = *(_DWORD *)(v7 + 68);
  v9 = v7 + 68;
  v11 = v5 % *(_DWORD *)(v9 + 4);
  v12 = *(_DWORD *)(v10 + 4 * v11);
  if ( !v12 )
    goto LABEL_11;
  v13 = *(_DWORD **)v12;
  v14 = *(_DWORD *)(*(_DWORD *)v12 + 4);
  while ( v14 != v5 )
  {
    v15 = (_DWORD *)*v13;
    if ( *v13 )
    {
      v14 = v15[1];
      v12 = (int)v13;
      v13 = (_DWORD *)*v13;
      if ( v15[1] % *(_DWORD *)(v9 + 4) == v11 )
        continue;
    }
  }
  v16 = v12 == 0;
  if ( v12 )
    v12 = *(_DWORD *)v12;
    v16 = v12 == 0;
  if ( v16 )
LABEL_11:
    v22 = (int *)&v21;
    v17 = j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            v9,
            (int)&unk_262D414,
            &v22);
    v12 = std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
            v11,
            v5,
            v17);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v20,
           (unsigned __int64 *)(v12 + 8),
           v6,
           v19);
}


int __fastcall Social::MultiplayerService::getRealmWorld(Social::MultiplayerService *this)
{
  return 0;
}


unsigned int __fastcall Social::XboxLiveUserManager::signIn(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r5@1
  int v4; // r8@1
  unsigned int v5; // r1@2
  unsigned int *v6; // r0@2
  unsigned int v7; // r2@5
  unsigned int v8; // r3@6
  void *v9; // r4@7
  unsigned int *v10; // r7@7
  unsigned int v11; // r1@9
  unsigned int v12; // r1@14
  unsigned int v13; // r0@20
  unsigned int v14; // r0@27
  void (__fastcall *v15)(int *, int, signed int); // r3@30
  int v16; // r5@32
  unsigned int *v17; // r1@33
  unsigned int v18; // r0@35
  unsigned int *v19; // r4@39
  unsigned int v20; // r0@41
  int v21; // r0@48
  unsigned int *v22; // r2@49
  unsigned int v23; // r1@51
  int v24; // r5@56
  unsigned int *v25; // r1@57
  unsigned int v26; // r0@59
  unsigned int *v27; // r4@63
  unsigned int v28; // r0@65
  unsigned int result; // r0@72
  void *v30; // [sp+0h] [bp-40h]@25
  int v31; // [sp+4h] [bp-3Ch]@25
  int v32; // [sp+8h] [bp-38h]@31
  int v33; // [sp+Ch] [bp-34h]@32
  int v34; // [sp+10h] [bp-30h]@30
  int v35; // [sp+14h] [bp-2Ch]@31
  int v36; // [sp+18h] [bp-28h]@25
  int v37; // [sp+1Ch] [bp-24h]@32
  char v38; // [sp+20h] [bp-20h]@32
  int v39; // [sp+24h] [bp-1Ch]@32

  v2 = a1;
  v3 = a2;
  MinecraftEventing::fireEventSignInToXboxLive(*(_DWORD *)(a1 + 120), a1, 1, 1);
  *(_BYTE *)(v2 + 125) = 1;
  v4 = *(_DWORD *)(v2 + 12);
  if ( !v4 )
    std::__throw_bad_weak_ptr();
  v5 = *(_DWORD *)(v4 + 4);
  v6 = (unsigned int *)(v4 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v5 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v7 = __ldrex(v6);
      if ( v7 == v5 )
        break;
      __clrex();
      v5 = v7;
    }
    v8 = __strex(v5 + 1, v6);
    v5 = v7;
  }
  while ( v8 );
  __dmb();
  v9 = *(void **)(v2 + 8);
  v10 = (unsigned int *)(v4 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v11 = __ldrex(v10);
    while ( __strex(v11 + 1, v10) );
  else
    ++*v10;
      v12 = __ldrex(v6);
    while ( __strex(v12 - 1, v6) );
    v12 = (*v6)--;
  if ( v12 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
    if ( &pthread_create )
      do
        v13 = __ldrex(v10);
      while ( __strex(v13 - 1, v10) );
    else
      v13 = (*v10)--;
    if ( v13 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  xbox::services::system::xbox_live_user::signin((xbox::services::system::xbox_live_user *)&v36, *(_DWORD *)(v2 + 136));
  v30 = v9;
  v31 = v4;
      v14 = __ldrex(v10);
    while ( __strex(v14 + 1, v10) );
  v34 = 0;
  v15 = *(void (__fastcall **)(int *, int, signed int))(v3 + 8);
  if ( v15 )
    v15(&v32, v3, 2);
    v35 = *(_DWORD *)(v3 + 12);
    v34 = *(_DWORD *)(v3 + 8);
  sub_1043818((int)&v38, (int)&v36, (int)&v30, (int)v15, v30, v31, v32, v33, v34, v35, v36, v37, *(void **)&v38);
  v16 = v39;
  if ( v39 )
    v17 = (unsigned int *)(v39 + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
      v18 = (*v17)--;
    if ( v18 == 1 )
      v19 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
      if ( &pthread_create )
      {
        __dmb();
        do
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
      }
      else
        v20 = (*v19)--;
      if ( v20 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  if ( v34 )
    ((void (*)(void))v34)();
  v21 = v31;
  if ( v31 )
    v22 = (unsigned int *)(v31 + 8);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      (*(void (**)(void))(*(_DWORD *)v21 + 12))();
  v24 = v37;
  if ( v37 )
    v25 = (unsigned int *)(v37 + 4);
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
      v26 = (*v25)--;
    if ( v26 == 1 )
      v27 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          v28 = __ldrex(v27);
        while ( __strex(v28 - 1, v27) );
        v28 = (*v27)--;
      if ( v28 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
      result = __ldrex(v10);
    while ( __strex(result - 1, v10) );
    result = (*v10)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  return result;
}


const char *__fastcall Social::MultiplayerService::_stateToString(int a1, unsigned int a2)
{
  const char *result; // r0@2

  if ( a2 > 0xC )
    result = "INVALID";
  else
    result = off_26E7630[a2];
  return result;
}


Social::GameConnectionInfo *__fastcall Social::GameConnectionInfo::GameConnectionInfo(Social::GameConnectionInfo *this, const Social::GameConnectionInfo *a2)
{
  const Social::GameConnectionInfo *v2; // r7@1
  Social::GameConnectionInfo *v3; // r4@1
  int *v4; // r5@1

  v2 = a2;
  v3 = this;
  v4 = (int *)((char *)a2 + 8);
  *(_WORD *)this = *(_WORD *)a2;
  sub_DA73B4((int *)this + 1, (int *)a2 + 1);
  sub_DA73B4((int *)v3 + 2, v4);
  *((_DWORD *)v3 + 3) = *((_DWORD *)v2 + 3);
  sub_DA73B4((int *)v3 + 4, (int *)v2 + 4);
  ThirdPartyInfo::ThirdPartyInfo((int)v3 + 20, (int)v2 + 20);
  return v3;
}


void __fastcall Social::RealmsUriListener::~RealmsUriListener(Social::RealmsUriListener *this)
{
  Social::RealmsUriListener *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10

  v1 = this;
  *(_DWORD *)this = &off_26DEB7C;
  v2 = *((_DWORD *)this + 2);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  j_j_j__ZdlPv_4((void *)v1);
}


unsigned __int64 *__fastcall Social::MultiplayerServiceManager::onEnterLevel(unsigned __int64 *result, Social::User *a2, Level *a3, int a4)
{
  Social::MultiplayerService **v4; // r7@1
  Social::MultiplayerService **v5; // r11@1
  int v6; // r4@1
  Level *v7; // r8@1
  Social::User *v8; // r10@1
  int v9; // r5@2 OVERLAPPED
  unsigned __int64 *v10; // r6@2 OVERLAPPED
  int v11; // r0@2
  int v12; // r1@2
  int v13; // r2@3
  bool v14; // zf@4
  unsigned __int64 *v15; // r1@4
  int v16; // r3@7
  bool v17; // zf@7
  int v18; // r1@12

  v5 = (Social::MultiplayerService **)(*result >> 32);
  v4 = (Social::MultiplayerService **)*result;
  v6 = a4;
  v7 = a3;
  v8 = a2;
  if ( v4 != v5 )
  {
    while ( 1 )
    {
      *(_QWORD *)&v9 = *(_QWORD *)v6;
      v11 = Social::MultiplayerService::getServiceId(*v4);
      v12 = ((signed int)v10 - v9) >> 4;
      if ( v12 >= 1 )
      {
        v13 = v12 + 1;
        do
        {
          v14 = *(_DWORD *)v9 == v11;
          v15 = (unsigned __int64 *)v9;
          if ( *(_DWORD *)v9 != v11 )
          {
            v15 = (unsigned __int64 *)(v9 + 4);
            v14 = *(_DWORD *)(v9 + 4) == v11;
          }
          if ( v14 )
            goto LABEL_24;
          v15 = (unsigned __int64 *)(v9 + 8);
          v16 = *(_DWORD *)(v9 + 8);
          v17 = v16 == v11;
          if ( v16 != v11 )
            v15 = (unsigned __int64 *)(v9 + 12);
            v17 = *(_DWORD *)(v9 + 12) == v11;
          if ( v17 )
          --v13;
          v9 += 16;
        }
        while ( v13 > 1 );
      }
      if ( 1 == ((signed int)v10 - v9) >> 2 )
        v15 = (unsigned __int64 *)v9;
        goto LABEL_20;
      v18 = ((signed int)v10 - v9) >> 2;
      if ( v18 == 2 )
        break;
      if ( v18 != 3 )
        v15 = v10;
        goto LABEL_24;
      v15 = (unsigned __int64 *)v9;
      if ( *(_DWORD *)v9 != v11 )
        v15 = (unsigned __int64 *)(v9 + 4);
        goto LABEL_18;
LABEL_24:
      result = *(unsigned __int64 **)(v6 + 4);
      if ( v15 != result )
        result = (unsigned __int64 *)Social::MultiplayerService::onEnterLevel(*v4, v8, v7);
      ++v4;
      if ( v4 == v5 )
        return result;
    }
    v15 = (unsigned __int64 *)v9;
LABEL_18:
    if ( *(_DWORD *)v15 != v11 )
      v15 = (unsigned __int64 *)((char *)v15 + 4);
LABEL_20:
      if ( *(_DWORD *)v15 != v11 )
      goto LABEL_24;
    goto LABEL_24;
  }
  return result;
}


signed int __fastcall Social::Events::EventManager::setGlobalProperty<int>(int a1, int a2, int **a3, int *a4)
{
  int *v4; // r4@1
  int v5; // r7@1
  int v6; // r5@1
  int *v7; // r6@1
  int v9; // [sp+0h] [bp-28h]@1

  v4 = (int *)a3;
  v5 = a2;
  v6 = a1;
  v7 = a4;
  Social::Events::EventManager::removeGlobalProperty(a2, a3);
  sub_21E8AF4((int *)v6, v4);
  Json::Value::Value((Json::Value *)(v6 + 8), *v7);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v9,
           (unsigned __int64 *)(v5 + 12),
           v4,
           v6);
}


int __fastcall Social::UserManager::needPlatformConnectionBeforeServerSearch(Social::UserManager *this)
{
  return 0;
}


int __fastcall Social::Events::HttpTelemetry::HttpTelemetry(__int64 a1, int a2, int *a3)
{
  int *v3; // r7@1
  int v4; // r5@1
  int *v5; // r6@1
  int v6; // r4@1
  char *v7; // r0@1
  unsigned int *v9; // r2@3
  signed int v10; // r1@5
  char *v11; // [sp+0h] [bp-38h]@1

  v3 = a3;
  v4 = a2;
  v5 = (int *)HIDWORD(a1);
  v6 = a1;
  j_Social::Events::AggregationEventListener::AggregationEventListener(a1);
  *(_DWORD *)v6 = &off_2719E38;
  *(_DWORD *)(v6 + 96) = v4;
  *(_DWORD *)(v6 + 100) = 0;
  sub_21E8AF4((int *)(v6 + 104), v3);
  *(_DWORD *)(v6 + 108) = &unk_28898CC;
  sub_21E8AF4((int *)(v6 + 112), v5);
  j_Core::FileStream::FileStream((Core::FileStream *)(v6 + 116));
  j_std::make_unique<TaskGroup,WorkerPool &,char const(&)[15]>(
    (_DWORD *)(v6 + 4408),
    WorkerPool::NETWORK,
    "Http telemetry");
  v11 = (char *)&unk_28898CC;
  sub_21E6FCC((const void **)&v11, *(_DWORD *)(*(_DWORD *)(v6 + 104) - 12) + 82);
  sub_21E7408(
    (const void **)&v11,
    "https://minecraftprod.rtep.msgamestudios.com/tenants/minecraftprod/routes/android/",
    0x52u);
  sub_21E72F0((const void **)&v11, (const void **)(v6 + 104));
  xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
    (int *)(v6 + 108),
    (int *)&v11);
  v7 = v11 - 12;
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v9 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    }
    else
      v10 = (*v9)--;
    if ( v10 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  return v6;
}


int __fastcall Social::MultiplayerService::isInRealm(Social::MultiplayerService *this)
{
  return 0;
}


int __fastcall Social::MultiplayerXBL::setShouldAdvertiseGame(int result, int a2, int a3, int a4)
{
  if ( a2 == 1 )
  {
    if ( a3 == 1 )
      *(_DWORD *)(result + 304) = a4;
    else
      *(_DWORD *)(result + 304) = 1;
  }
  else
    *(_DWORD *)(result + 304) = 0;
  return result;
}


int (**__fastcall Social::Events::EventManager::recordEvent(int a1))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  unsigned __int64 *v1; // r6@1
  pthread_mutex_t *v2; // r4@1
  int v3; // r0@2
  int v4; // r6@3
  int i; // r7@3
  unsigned __int64 v6; // kr00_8@3
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@5

  v1 = (unsigned __int64 *)a1;
  v2 = (pthread_mutex_t *)(a1 + 124);
  if ( &pthread_create )
  {
    v3 = j_pthread_mutex_lock_0(v2);
    if ( v3 )
      sub_21E5E14(v3);
  }
  v6 = *v1;
  v4 = *v1 >> 32;
  for ( i = v6; v4 != i; i += 4 )
    (*(void (**)(void))(**(_DWORD **)i + 8))();
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v2);
  return result;
}


void __fastcall Social::MultiplayerXBL::_updatePlayerCountInLobbyIfNeeded(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL::_updatePlayerCountInLobbyIfNeeded(this);
}


signed int __fastcall Social::MultiplayerServiceManager::isMutedPlayer(_QWORD *a1)
{
  int *v1; // r5@1 OVERLAPPED
  int *v2; // r6@1 OVERLAPPED
  int v3; // t1@2
  signed int result; // r0@4

  *(_QWORD *)&v1 = *a1;
  if ( v1 == v2 )
  {
    result = 0;
  }
  else
    while ( 1 )
    {
      v3 = *v1;
      ++v1;
      if ( (*(int (**)(void))(*(_DWORD *)v3 + 88))() == 1 )
        break;
      if ( v2 == v1 )
        return 0;
    }
    result = 1;
  return result;
}


unsigned int *__fastcall Social::XboxLiveUserManager::getUserProfileDataByGamertag(int a1, int a2, int **a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *result; // r0@2
  unsigned int v6; // r1@5

  v3 = a1;
  v4 = std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a2 + 52),
         a3);
  if ( v4 )
  {
    *(_DWORD *)v3 = *(_DWORD *)(v4 + 8);
    result = *(unsigned int **)(v4 + 12);
    *(_DWORD *)(v3 + 4) = result;
    if ( result )
    {
      result += 2;
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(result);
        while ( __strex(v6 + 1, result) );
      }
      else
        ++*result;
    }
  }
  else
    result = 0;
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 0;
  return result;
}


Json::Value *__fastcall Social::Events::AggregationEventListener::_handleAggregation(int a1, unsigned __int64 *a2, int a3)
{
  unsigned __int64 *v3; // r5@1
  int v4; // r6@1
  Json::Value *v5; // r4@1
  Json::Value *v6; // r7@1
  int v7; // r8@1
  Json::Value *result; // r0@7

  v3 = a2;
  v4 = a3;
  v5 = (Json::Value *)(*a2 >> 32);
  v6 = (Json::Value *)*a2;
  v7 = a1;
  if ( v6 == v5 )
  {
LABEL_5:
    if ( v6 == *((Json::Value **)v3 + 2) )
    {
      j_std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>::_M_emplace_back_aux<Social::Events::Event const&>(
        v3,
        v4);
    }
    else
      j_Social::Events::Event::Event((int)v6, v4);
      *((_DWORD *)v3 + 1) += 72;
    result = (Json::Value *)(*(_DWORD *)(v7 + 60) + 1);
    *(_DWORD *)(v7 + 60) = result;
  }
  else
    while ( !j_Social::Events::Event::operator==(v4, (int)v6) )
      v6 = (Json::Value *)((char *)v6 + 72);
      if ( v5 == v6 )
      {
        v6 = (Json::Value *)*((_DWORD *)v3 + 1);
        goto LABEL_5;
      }
    result = j_j_j__ZN6Social6Events5Event18updateMeasurementsERKS1_(v6, v4);
  return result;
}


signed int __fastcall Social::MultiplayerService::_shouldAddGameToGameList(Social::MultiplayerService *this, const Social::MultiplayerGameInfo *a2)
{
  return 1;
}


RakNet *__fastcall Social::User::create(int a1, int a2, int a3, MinecraftEventing *a4, int a5, int a6)
{
  int v6; // r5@1
  RakNet *result; // r0@1
  int v8; // r4@1
  unsigned int *v9; // r1@2
  unsigned int *v10; // r5@8
  int v11; // [sp+8h] [bp-18h]@1
  int v12; // [sp+Ch] [bp-14h]@1

  v11 = *(_DWORD *)a5;
  v6 = *(_DWORD *)(a5 + 4);
  *(_DWORD *)(a5 + 4) = 0;
  v12 = v6;
  *(_DWORD *)a5 = 0;
  result = Social::User::_create(a1, a2, a3, a4, (int)&v11, a6);
  v8 = v12;
  if ( v12 )
  {
    v9 = (unsigned int *)(v12 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = (RakNet *)__ldrex(v9);
      while ( __strex((unsigned int)result - 1, v9) );
    }
    else
      result = (RakNet *)(*v9)--;
    if ( result == (RakNet *)1 )
      v10 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (RakNet *)__ldrex(v10);
        while ( __strex((unsigned int)result - 1, v10) );
      }
      else
        result = (RakNet *)(*v10)--;
      if ( result == (RakNet *)1 )
        result = (RakNet *)(*(int (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  }
  return result;
}


char *__fastcall Social::XboxLiveUserManager::_saveVisitedBiomes(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  xbox::services::system::xbox_live_user *v2; // r0@1
  bool v3; // zf@1
  unsigned int v4; // r0@5
  void *v5; // r0@9
  int *v6; // r0@11
  int v7; // r5@11
  int v8; // r8@11
  __int64 v9; // kr00_8@11
  unsigned int v10; // r1@11
  const void **v11; // r0@13
  const void **v12; // r0@15
  char *v13; // r7@15
  _DWORD *v14; // r6@15
  int *v15; // r6@15
  int v16; // t1@15
  char *v17; // r0@16
  void *v18; // r0@17
  void *v19; // r0@18
  int v20; // r7@19
  unsigned __int64 v21; // r2@19
  void **v22; // r1@19
  _BYTE *v23; // r5@19
  signed int v24; // r0@19
  int v25; // r4@20
  unsigned int v26; // r6@20
  int v27; // r7@20
  _BYTE *v28; // r0@27
  unsigned __int64 v29; // r2@30
  char *result; // r0@31
  unsigned int *v31; // r1@33
  signed int v32; // r0@35
  unsigned int *v33; // r2@37
  signed int v34; // r1@39
  unsigned int *v35; // r2@41
  signed int v36; // r1@43
  unsigned int *v37; // r2@45
  signed int v38; // r1@47
  int v39; // [sp+8h] [bp-14F8h]@11
  unsigned int v40; // [sp+10h] [bp-14F0h]@11
  char *v41; // [sp+14h] [bp-14ECh]@15
  int v42; // [sp+18h] [bp-14E8h]@15
  int v43; // [sp+1Ch] [bp-14E4h]@15
  char *v44; // [sp+20h] [bp-14E0h]@15
  int v45; // [sp+24h] [bp-14DCh]@15
  int v46[3]; // [sp+28h] [bp-14D8h]@19
  void **v47; // [sp+38h] [bp-14C8h]@19
  int v48; // [sp+3Ch] [bp-14C4h]@30
  void **v49; // [sp+40h] [bp-14C0h]@19
  int v50; // [sp+44h] [bp-14BCh]@30
  void **v51; // [sp+1074h] [bp-48Ch]@19
  int v52; // [sp+10E4h] [bp-41Ch]@19
  __int16 v53; // [sp+10E8h] [bp-418h]@19
  int v54; // [sp+10ECh] [bp-414h]@19
  int v55; // [sp+10F0h] [bp-410h]@19
  int v56; // [sp+10F4h] [bp-40Ch]@19
  int v57; // [sp+10F8h] [bp-408h]@19
  int v58; // [sp+10FCh] [bp-404h]@15
  int v59; // [sp+1100h] [bp-400h]@19
  int v60; // [sp+1500h] [bp+0h]@19
  RakNet *v61; // [sp+1504h] [bp+4h]@1

  v1 = this;
  v61 = _stack_chk_guard;
  v2 = (xbox::services::system::xbox_live_user *)*((_DWORD *)this + 34);
  v3 = v2 == 0;
  if ( v2 )
    v3 = *((_DWORD *)v1 + 36) == 0;
  if ( !v3 && xbox::services::system::xbox_live_user::is_signed_in(v2) == 1 )
  {
    v4 = *((_WORD *)v1 + 62);
    if ( v4 <= 0xFF && !(_BYTE)v4 && *((_QWORD *)v1 + 4) >> 32 != (unsigned int)*((_QWORD *)v1 + 4) )
    {
      if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
        v5 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
      else
        v5 = &ServiceLocator<AppPlatform>::mDefaultService;
      v6 = (int *)(*(int (**)(void))(**(_DWORD **)v5 + 284))();
      v7 = *v6;
      v8 = *(_DWORD *)(*v6 - 12);
      sub_119C884((void **)&v40, "ClientCorrelation");
      Social::XboxLiveUserManager::getCurrentXUID((Social::XboxLiveUserManager *)&v39, (int)v1);
      v9 = *(_QWORD *)(v40 - 12);
      v10 = *(_DWORD *)(v39 - 12) + v9;
      if ( v10 > HIDWORD(v9) && v10 <= *(_DWORD *)(v39 - 8) )
        v11 = sub_119C984((const void **)&v39, 0, v40, (_BYTE *)v9);
        v11 = sub_119C8A4((const void **)&v40, (const void **)&v39);
      v41 = (char *)*v11;
      *v11 = &unk_28898CC;
      v12 = sub_119C894((const void **)&v41, ".dat", 4u);
      v13 = (char *)*v12;
      v14 = *v12;
      *v12 = &unk_28898CC;
      v16 = *(v14 - 3);
      v15 = v14 - 3;
      v42 = v7;
      v43 = v8;
      v44 = v13;
      v45 = v16;
      Core::PathBuffer<Core::StackString<char,1024u>>::_join<Core::PathPart>((unsigned int *)&v58, (int)&v42, 2);
      if ( v15 != &dword_28898C0 )
      {
        v31 = (unsigned int *)(v13 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v32 = __ldrex(v31);
          while ( __strex(v32 - 1, v31) );
        }
        else
          v32 = (*v31)--;
        if ( v32 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v15);
      }
      v17 = v41 - 12;
      if ( (int *)(v41 - 12) != &dword_28898C0 )
        v33 = (unsigned int *)(v41 - 4);
            v34 = __ldrex(v33);
          while ( __strex(v34 - 1, v33) );
          v34 = (*v33)--;
        if ( v34 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v17);
      v18 = (void *)(v39 - 12);
      if ( (int *)(v39 - 12) != &dword_28898C0 )
        v35 = (unsigned int *)(v39 - 4);
            v36 = __ldrex(v35);
          while ( __strex(v36 - 1, v35) );
          v36 = (*v35)--;
        if ( v36 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v18);
      v19 = (void *)(v40 - 12);
      if ( (int *)(v40 - 12) != &dword_28898C0 )
        v37 = (unsigned int *)(v40 - 4);
            v38 = __ldrex(v37);
          while ( __strex(v38 - 1, v37) );
          v38 = (*v37)--;
        if ( v38 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v19);
      v20 = v60;
      sub_119D70C((int)&v51);
      v51 = &off_26D3AF0;
      v52 = 0;
      v53 = 0;
      v57 = 0;
      v56 = 0;
      v55 = 0;
      v54 = 0;
      v46[0] = (int)&v59;
      v46[1] = v20;
      Core::FileStream::FileStream((int)&v47, (int)off_26D81A4, (__int64 *)v46, 20);
      v47 = &off_26D8170;
      v22 = &off_26D8198;
      v51 = &off_26D8198;
      v49 = &off_26D8184;
      v23 = (_BYTE *)*((_QWORD *)v1 + 4);
      v24 = (*((_QWORD *)v1 + 4) >> 32) - (_DWORD)v23;
      if ( v24 >= 1 )
        v25 = v54;
        v26 = 0;
        v27 = (v24 >> 2) + 1;
        if ( !v54 )
          v26 = 1;
        do
          if ( !(_BYTE)v26 )
          {
            v22 = (void **)*v23;
            LODWORD(v21) = *(_QWORD *)(v25 + 20) >> 32;
            v28 = (_BYTE *)*(_QWORD *)(v25 + 20);
            if ( (unsigned int)v28 >= (unsigned int)v21 )
            {
              if ( (*(int (__fastcall **)(int))(*(_DWORD *)v25 + 52))(v25) == -1 )
                v26 = v26 & 0xFFFFFF00 | 1;
            }
            else
              *v28 = (_BYTE)v22;
              ++*(_DWORD *)(v25 + 20);
          }
          --v27;
          v23 += 4;
        while ( v27 > 1 );
      Core::FileStdStreamBuf::close((Core::FileStdStreamBuf *)&v50, (int)v22, v21);
      v47 = &off_26D679C;
      v51 = &off_26D67C4;
      v49 = &off_26D67B0;
      Core::FileStdStreamBuf::~FileStdStreamBuf((Core::FileStdStreamBuf *)&v50, (int)&off_26D67C4, v29);
      v47 = &off_26D67DC;
      v51 = &off_26D67F0;
      v48 = 0;
      sub_119C964(&v51);
    }
  }
  result = (char *)(_stack_chk_guard - v61);
  if ( _stack_chk_guard != v61 )
    _stack_chk_fail(result);
  return result;
}


unsigned int *__fastcall Social::XboxLiveUserManager::_updateUserPermissionWithXuid(int a1, int **a2, __int64 a3)
{
  int **v3; // r6@1
  unsigned int *result; // r0@1
  int v5; // r4@1
  unsigned int v6; // r0@2
  unsigned int *v7; // r7@2
  unsigned int v8; // r1@5
  unsigned int v9; // r2@6
  bool v10; // zf@7
  _BYTE *v11; // r11@10
  char *v12; // lr@10
  signed int v13; // r12@10
  int v14; // r2@10
  int v15; // r3@10
  int v16; // r5@11
  bool v17; // zf@12
  int v18; // r3@12
  int v19; // r0@15
  bool v20; // zf@15
  int v21; // r1@20
  int v22; // r1@22
  unsigned int v23; // r0@33
  char *v24; // r8@33
  unsigned int v25; // r1@35
  unsigned int v26; // r9@35
  int v27; // r1@42
  int v28; // r5@42
  int v29; // r5@44
  unsigned int v30; // r0@50
  unsigned int *v31; // r5@54
  unsigned int v32; // r0@56
  unsigned int *v33; // r2@62
  unsigned int v34; // r1@64
  int **v35; // [sp+0h] [bp-38h]@1
  int v36; // [sp+4h] [bp-34h]@1
  __int64 v37; // [sp+8h] [bp-30h]@1

  v3 = a2;
  v37 = a3;
  result = Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v35, a1, a2);
  v5 = v36;
  if ( v36 )
  {
    v6 = *(_DWORD *)(v36 + 4);
    v7 = (unsigned int *)(v36 + 4);
    while ( v6 )
    {
      __dmb();
      v8 = __ldrex(v7);
      if ( v8 == v6 )
      {
        v9 = __strex(v6 + 1, v7);
        v6 = v8;
        if ( !v9 )
        {
          __dmb();
          v10 = *v7 == 0;
          if ( *v7 )
          {
            v3 = v35;
            v10 = v35 == 0;
          }
          if ( v10 )
            goto LABEL_48;
          v12 = (char *)(*(_QWORD *)(v3 + 11) >> 32);
          v11 = (_BYTE *)*(_QWORD *)(v3 + 11);
          v13 = v12 - v11;
          v14 = *(_QWORD *)(v3 + 11);
          v15 = (v12 - v11) >> 5;
          if ( v15 >= 1 )
            v16 = v15 + 1;
            v14 = *(_QWORD *)(v3 + 11);
            do
            {
              v17 = *(_DWORD *)v14 == (_DWORD)v37;
              v18 = v14;
              if ( *(_DWORD *)v14 != (_DWORD)v37 )
              {
                v18 = v14 + 8;
                v17 = *(_DWORD *)(v14 + 8) == (_DWORD)v37;
              }
              if ( v17 )
                break;
              v18 = v14 + 16;
              v19 = *(_DWORD *)(v14 + 16);
              v20 = v19 == (_DWORD)v37;
              if ( v19 != (_DWORD)v37 )
                v18 = v14 + 24;
                v20 = *(_DWORD *)(v14 + 24) == (_DWORD)v37;
              if ( v20 )
              --v16;
              v14 += 32;
            }
            while ( v16 > 1 );
LABEL_29:
            if ( (char *)v18 != v12 )
              *(_BYTE *)(v18 + 4) = BYTE4(v37);
LABEL_47:
              if ( !v5 )
LABEL_48:
              if ( &pthread_create )
                __dmb();
                do
                  v30 = __ldrex(v7);
                while ( __strex(v30 - 1, v7) );
              else
                v30 = (*v7)--;
              if ( v30 == 1 )
                v31 = (unsigned int *)(v5 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v32 = __ldrex(v31);
                  while ( __strex(v32 - 1, v31) );
                }
                else
                  v32 = (*v31)--;
                if ( v32 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
              break;
LABEL_31:
            if ( (int *)v12 == v3[13] )
              v23 = v13 >> 3;
              v24 = 0;
              if ( !(v13 >> 3) )
                v23 = 1;
              v25 = v23 + (v13 >> 3);
              v26 = v23 + (v13 >> 3);
              if ( 0 != v25 >> 29 )
                v26 = 0x1FFFFFFF;
              if ( v25 < v23 )
              if ( v26 )
                if ( v26 >= 0x20000000 )
                  sub_119C874();
                v24 = (char *)operator new(8 * v26);
                v12 = (char *)(*(_QWORD *)(v3 + 11) >> 32);
                v11 = (_BYTE *)*(_QWORD *)(v3 + 11);
              v27 = HIDWORD(v37);
              v28 = (int)&v24[v12 - v11];
              *(_DWORD *)&v24[v12 - v11] = v37;
              *(_DWORD *)(v28 + 4) = v27;
              if ( 0 != (v12 - v11) >> 3 )
                _aeabi_memmove4(v24, v11);
              v29 = v28 + 8;
              if ( v11 )
                operator delete(v11);
              v3[11] = (int *)v24;
              v3[12] = (int *)v29;
              v3[13] = (int *)&v24[8 * v26];
            else
              *(_QWORD *)v12 = v37;
              v3[12] += 2;
            goto LABEL_47;
          if ( 1 == (signed int)&v12[-v14] >> 3 )
            v22 = v37;
            v18 = v14;
          else
            v21 = (signed int)&v12[-v14] >> 3;
            if ( v21 == 3 )
              v22 = v37;
              if ( *(_DWORD *)v14 == (_DWORD)v37 )
                goto LABEL_29;
              v18 = v14 + 8;
              if ( v21 != 2 )
                goto LABEL_31;
            if ( *(_DWORD *)v18 == v22 )
              goto LABEL_29;
            v18 += 8;
          if ( *(_DWORD *)v18 == v22 )
            goto LABEL_29;
          goto LABEL_31;
        }
      }
      else
        __clrex();
    }
    result = (unsigned int *)v36;
    if ( v36 )
      v33 = (unsigned int *)(v36 + 8);
      if ( &pthread_create )
        __dmb();
        do
          v34 = __ldrex(v33);
        while ( __strex(v34 - 1, v33) );
        v34 = (*v33)--;
      if ( v34 == 1 )
        result = (unsigned int *)(*(int (**)(void))(*result + 12))();
  }
  return result;
}


void __fastcall Social::MultiplayerService::~MultiplayerService(Social::MultiplayerService *this)
{
  Social::MultiplayerService *v1; // r0@1

  v1 = Social::MultiplayerService::~MultiplayerService(this);
  j_j_j__ZdlPv_5((void *)v1);
}


int __fastcall Social::UserManager::tick(Social::UserManager *this)
{
  Social::UserManager *v1; // r11@1
  unsigned __int8 *v2; // r5@1
  unsigned int v3; // r0@2
  int v4; // r0@4
  __int64 v5; // r1@5
  int (__cdecl *v6)(_DWORD); // r7@5
  void (__fastcall *v7)(_DWORD); // r0@5
  int (__cdecl *v8)(_DWORD); // r3@5
  int v9; // r0@7
  void (*v10)(void); // r3@7
  int v11; // r0@10
  int v12; // r0@13
  Social::User *v13; // r0@17
  Social::User **v14; // r5@17 OVERLAPPED
  Social::User **v15; // r6@17 OVERLAPPED
  int v16; // r5@22
  Social::XboxLiveUserManager *v17; // r6@23
  unsigned int *v18; // r1@24
  unsigned int v19; // r0@26
  unsigned int *v20; // r7@30
  unsigned int v21; // r0@32
  __int64 v22; // kr00_8@34
  unsigned int *v23; // r1@35
  unsigned int v24; // r2@37
  int result; // r0@42
  void *v26; // r0@44
  Social::User **v27; // r5@54 OVERLAPPED
  Social::User **v28; // r6@54 OVERLAPPED
  int v29; // r5@55
  Social::User *v30; // r6@55
  char *v31; // r0@63
  Social::XboxLiveUserManager *v32; // r0@64
  int v33; // r7@65
  unsigned int *v34; // r0@66
  unsigned int v35; // r1@68
  __int64 v36; // kr08_8@70
  unsigned int *v37; // r0@71
  unsigned int v38; // r1@73
  _DWORD *v39; // r0@78
  __int64 v40; // r1@78
  unsigned int *v41; // r1@81
  unsigned int *v42; // r6@87
  Social::User **v43; // r4@94
  Social::User **i; // r5@94
  _DWORD *v45; // [sp+0h] [bp-58h]@78
  __int64 v46; // [sp+8h] [bp-50h]@78
  __int64 v47; // [sp+10h] [bp-48h]@5
  int (__cdecl *v48)(_DWORD); // [sp+18h] [bp-40h]@1
  void (__fastcall *v49)(_DWORD); // [sp+1Ch] [bp-3Ch]@5
  __int64 v50; // [sp+20h] [bp-38h]@5
  int (__cdecl *v51)(_DWORD); // [sp+28h] [bp-30h]@5
  void (__fastcall *v52)(_DWORD); // [sp+2Ch] [bp-2Ch]@5

  v1 = this;
  v2 = (unsigned __int8 *)this + 124;
  v48 = 0;
  while ( 1 )
  {
    do
    {
      do
        v3 = __ldrex(v2);
      while ( __strex(1u, v2) );
      __dmb();
    }
    while ( v3 );
    v4 = *((_DWORD *)v1 + 23);
    if ( *((_DWORD *)v1 + 27) == v4 )
      break;
    LODWORD(v5) = *(_DWORD *)v4;
    HIDWORD(v5) = *(_DWORD *)(v4 + 4);
    v6 = *(int (__cdecl **)(_DWORD))(v4 + 8);
    *(_DWORD *)(v4 + 8) = 0;
    v7 = *(void (__fastcall **)(_DWORD))(v4 + 12);
    v50 = v47;
    v47 = v5;
    v8 = v48;
    v48 = v6;
    v51 = v8;
    v52 = v49;
    v49 = v7;
    if ( v8 )
      ((void (__fastcall *)(__int64 *, __int64 *, signed int))v8)(&v50, &v50, 3);
    v9 = *((_DWORD *)v1 + 23);
    v10 = *(void (**)(void))(v9 + 8);
    if ( v9 == *((_DWORD *)v1 + 25) - 16 )
      if ( v10 )
        v10();
      operator delete(*((void **)v1 + 24));
      v12 = *((_DWORD *)v1 + 26);
      *((_DWORD *)v1 + 26) = v12 + 4;
      v11 = *(_DWORD *)(v12 + 4);
      *((_DWORD *)v1 + 24) = v11;
      *((_DWORD *)v1 + 25) = v11 + 512;
    else
      {
        v9 = *((_DWORD *)v1 + 23);
      }
      v11 = v9 + 16;
    *((_DWORD *)v1 + 23) = v11;
    __dmb();
    *v2 = 0;
    if ( !v48 )
      sub_119C8E4();
    v49(&v47);
  }
  v13 = 0;
  __dmb();
  *((_BYTE *)v1 + 124) = 0;
  *(_QWORD *)&v14 = *((_QWORD *)v1 + 1);
  if ( v15 != v14 )
    if ( v14 == v15 )
LABEL_21:
      v13 = 0;
      while ( Social::User::getGameControllerId(*v14) != *((_DWORD *)v1 + 11) )
        v14 += 2;
        if ( v15 == v14 )
          goto LABEL_21;
      v22 = *(_QWORD *)v14;
      v16 = *(_QWORD *)v14 >> 32;
      v13 = (Social::User *)v22;
      if ( v16 )
        v23 = (unsigned int *)(v16 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v24 = __ldrex(v23);
          while ( __strex(v24 + 1, v23) );
        }
        else
          ++*v23;
        goto LABEL_23;
  v16 = 0;
LABEL_23:
  v17 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v13);
  if ( v16 )
    v18 = (unsigned int *)(v16 + 4);
    if ( &pthread_create )
        v19 = __ldrex(v18);
      while ( __strex(v19 - 1, v18) );
      v19 = (*v18)--;
    if ( v19 == 1 )
      v20 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
      if ( &pthread_create )
        __dmb();
        do
          v21 = __ldrex(v20);
        while ( __strex(v21 - 1, v20) );
      else
        v21 = (*v20)--;
      if ( v21 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  result = *((_DWORD *)v1 + 20);
  if ( result )
LABEL_50:
    if ( result < 1 )
      goto LABEL_94;
    goto LABEL_54;
  if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v26 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
  else
    v26 = &ServiceLocator<AppPlatform>::mDefaultService;
  if ( (*(int (**)(void))(**(_DWORD **)v26 + 640))() != 1
    || Social::XboxLiveUserManager::isSignedIn(v17)
    || Social::XboxLiveUserManager::signinInProgress(v17) )
    result = *((_DWORD *)v1 + 20);
    goto LABEL_50;
  result = 100;
  *((_DWORD *)v1 + 20) = 100;
LABEL_54:
  *((_DWORD *)v1 + 20) = --result;
  *(_QWORD *)&v27 = *((_QWORD *)v1 + 1);
  if ( v28 == v27 )
    v29 = 0;
    v30 = 0;
    if ( v27 == v28 )
LABEL_59:
      v29 = 0;
      v30 = 0;
      while ( Social::User::getGameControllerId(*v27) != *((_DWORD *)v1 + 11) )
        v27 += 2;
        if ( v28 == v27 )
          goto LABEL_59;
      v36 = *(_QWORD *)v27;
      v29 = *(_QWORD *)v27 >> 32;
      v30 = (Social::User *)v36;
      if ( v29 )
        v37 = (unsigned int *)(v29 + 4);
            v38 = __ldrex(v37);
          while ( __strex(v38 + 1, v37) );
          ++*v37;
        v29 = 0;
  if ( !result )
    result = Social::User::getPlatformConnectionState(v30);
    if ( result == 3 )
      v31 = Social::User::getOptions(v30);
      result = Options::getHasEverLoggedIntoXbl(*(Options **)v31);
      if ( result == 1 )
        v32 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v30);
        result = Social::XboxLiveUserManager::isUserReady(v32);
        if ( result == 1 )
          v33 = Social::User::getLiveUser(v30);
          if ( v29 )
          {
            v34 = (unsigned int *)(v29 + 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v35 = __ldrex(v34);
              while ( __strex(v35 + 1, v34) );
            }
            else
              ++*v34;
          }
          v39 = operator new(0xCu);
          LODWORD(v40) = sub_1028480;
          *v39 = v1;
          v39[1] = v30;
          HIDWORD(v40) = sub_1028340;
          v39[2] = v29;
          v45 = v39;
          v46 = v40;
          result = Social::XboxLiveUserManager::silentSignin(v33, (int)&v45);
          if ( (_DWORD)v46 )
            result = ((int (__cdecl *)(_DWORD **))v46)(&v45);
  if ( v29 )
    v41 = (unsigned int *)(v29 + 4);
        result = __ldrex(v41);
      while ( __strex(result - 1, v41) );
      result = (*v41)--;
    if ( result == 1 )
      v42 = (unsigned int *)(v29 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
          result = __ldrex(v42);
        while ( __strex(result - 1, v42) );
        result = (*v42)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
LABEL_94:
  v43 = (Social::User **)(*((_QWORD *)v1 + 1) >> 32);
  for ( i = (Social::User **)*((_QWORD *)v1 + 1); v43 != i; i += 2 )
    result = Social::User::tick(*i);
  if ( v48 )
    result = v48(&v47);
  return result;
}


Social::XboxLiveUserManager *__fastcall Social::XboxLiveUserManager::checkPrivilegeWithUIAsync(Social::XboxLiveUserManager *result, int a2, int a3, int a4)
{
  int v4; // r4@1
  signed int v5; // r1@2

  v4 = a4;
  if ( *(_DWORD *)(a4 + 8) )
  {
    v5 = Social::XboxLiveUserManager::checkPrivilegeSilently(result, a2);
    if ( !*(_DWORD *)(v4 + 8) )
      sub_119C8E4();
    result = (Social::XboxLiveUserManager *)(*(int (__fastcall **)(_DWORD, _DWORD))(v4 + 12))(v4, v5);
  }
  return result;
}


void __fastcall Social::Events::EventManager::setupCommonProperties(Social::Events::EventManager *this)
{
  Social::Events::EventManager *v1; // r4@1
  Json::Value *v2; // r8@1
  void *v3; // r0@1
  void *v4; // r0@2
  unsigned __int64 *v5; // r6@3
  AppPlatform **v6; // r0@4
  char *v7; // r4@6
  Json::Value *v8; // r9@6
  void *v9; // r0@6
  void *v10; // r0@8
  unsigned int v11; // r4@10
  Json::Value *v12; // r10@10
  void *v13; // r0@10
  void *v14; // r0@12
  Json::Value *v15; // r4@14
  void *v16; // r0@14
  void *v17; // r0@15
  Json::Value *v18; // r5@16
  void *v19; // r0@16
  void *v20; // r0@17
  void *v21; // r0@18
  void *v22; // r0@19
  void *v23; // r0@20
  void *v24; // r0@21
  unsigned int *v25; // r2@23
  signed int v26; // r1@25
  unsigned int *v27; // r2@27
  signed int v28; // r1@29
  unsigned int *v29; // r2@31
  signed int v30; // r1@33
  unsigned int *v31; // r2@35
  signed int v32; // r1@37
  unsigned int *v33; // r2@39
  signed int v34; // r1@41
  unsigned int *v35; // r2@43
  signed int v36; // r1@45
  unsigned int *v37; // r2@47
  signed int v38; // r1@49
  unsigned int *v39; // r2@51
  signed int v40; // r1@53
  unsigned int *v41; // r2@55
  signed int v42; // r1@57
  unsigned int *v43; // r2@59
  signed int v44; // r1@61
  unsigned int *v45; // r2@63
  signed int v46; // r1@65
  unsigned int *v47; // r2@67
  signed int v48; // r1@69
  int v49; // [sp+0h] [bp-100h]@17
  int v50; // [sp+Ch] [bp-F4h]@16
  int v51; // [sp+10h] [bp-F0h]@16
  char v52; // [sp+2Ch] [bp-D4h]@16
  int v53; // [sp+34h] [bp-CCh]@14
  int v54; // [sp+3Ch] [bp-C4h]@11
  int v55; // [sp+40h] [bp-C0h]@14
  char v56; // [sp+58h] [bp-A8h]@11
  int v57; // [sp+64h] [bp-9Ch]@7
  int v58; // [sp+68h] [bp-98h]@10
  char v59; // [sp+80h] [bp-80h]@7
  int v60; // [sp+8Ch] [bp-74h]@3
  int v61; // [sp+90h] [bp-70h]@6
  char v62; // [sp+ACh] [bp-54h]@3
  int v63; // [sp+B4h] [bp-4Ch]@1
  int v64; // [sp+BCh] [bp-44h]@1
  int v65; // [sp+C0h] [bp-40h]@1

  v1 = this;
  sub_21E94B4((void **)&v64, "BuildNumber");
  j_Common::getGameVersionStringNet((Common *)&v63);
  v2 = (Json::Value *)(sub_21E8AF4(&v65, &v64) + 2);
  j_Json::Value::Value((int)v2, (const char **)&v63);
  v3 = (void *)(v63 - 12);
  if ( (int *)(v63 - 12) != &dword_28898C0 )
  {
    v25 = (unsigned int *)(v63 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
    }
    else
      v26 = (*v25)--;
    if ( v26 <= 0 )
      j_j_j_j__ZdlPv_9(v3);
  }
  v4 = (void *)(v64 - 12);
  if ( (int *)(v64 - 12) != &dword_28898C0 )
    v27 = (unsigned int *)(v64 - 4);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 <= 0 )
      j_j_j_j__ZdlPv_9(v4);
  v5 = (unsigned __int64 *)((char *)v1 + 40);
  j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<char const(&)[6],Social::Events::Property&>(
    (int)&v62,
    (unsigned __int64 *)v1 + 5,
    "Build",
    (int)&v65);
  sub_21E94B4((void **)&v60, "Plat");
  if ( *(_DWORD *)j_ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v6 = (AppPlatform **)j_ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
  else
    v6 = (AppPlatform **)&ServiceLocator<AppPlatform>::mDefaultService;
  v7 = j_AppPlatform::getHardwareInformation(*v6);
  v8 = (Json::Value *)(sub_21E8AF4(&v61, &v60) + 2);
  j_Json::Value::Value((int)v8, (const char **)v7 + 1);
  v9 = (void *)(v60 - 12);
  if ( (int *)(v60 - 12) != &dword_28898C0 )
    v29 = (unsigned int *)(v60 - 4);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<char const(&)[5],Social::Events::Property&>(
    (int)&v59,
    v5,
    "Plat",
    (int)&v61);
  sub_21E94B4((void **)&v57, "BuildPlat");
    v10 = j_ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
    v10 = &ServiceLocator<AppPlatform>::mDefaultService;
  v11 = (*(int (**)(void))(**(_DWORD **)v10 + 440))();
  v12 = (Json::Value *)(sub_21E8AF4(&v58, &v57) + 2);
  j_Json::Value::Value(v12, v11);
  v13 = (void *)(v57 - 12);
  if ( (int *)(v57 - 12) != &dword_28898C0 )
    v31 = (unsigned int *)(v57 - 4);
        v32 = __ldrex(v31);
      while ( __strex(v32 - 1, v31) );
      v32 = (*v31)--;
    if ( v32 <= 0 )
      j_j_j_j__ZdlPv_9(v13);
  j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<char const(&)[10],Social::Events::Property&>(
    (int)&v56,
    "BuildPlat",
    (int)&v58);
  sub_21E94B4((void **)&v54, "ClientId");
    v14 = j_ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
    v14 = &ServiceLocator<AppPlatform>::mDefaultService;
  (*(void (__fastcall **)(int *))(**(_DWORD **)v14 + 488))(&v53);
  v15 = (Json::Value *)(sub_21E8AF4(&v55, &v54) + 2);
  j_Json::Value::Value((int)v15, (const char **)&v53);
  v16 = (void *)(v53 - 12);
  if ( (int *)(v53 - 12) != &dword_28898C0 )
    v33 = (unsigned int *)(v53 - 4);
        v34 = __ldrex(v33);
      while ( __strex(v34 - 1, v33) );
      v34 = (*v33)--;
    if ( v34 <= 0 )
      j_j_j_j__ZdlPv_9(v16);
  v17 = (void *)(v54 - 12);
  if ( (int *)(v54 - 12) != &dword_28898C0 )
    v35 = (unsigned int *)(v54 - 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 - 1, v35) );
      v36 = (*v35)--;
    if ( v36 <= 0 )
      j_j_j_j__ZdlPv_9(v17);
  j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<char const(&)[9],Social::Events::Property&>(
    (int)&v52,
    "ClientId",
    (int)&v55);
  sub_21E94B4((void **)&v50, "Cheevos");
  v18 = (Json::Value *)(sub_21E8AF4(&v51, &v50) + 2);
  j_Json::Value::Value(v18, 1);
  v19 = (void *)(v50 - 12);
  if ( (int *)(v50 - 12) != &dword_28898C0 )
    v37 = (unsigned int *)(v50 - 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 <= 0 )
      j_j_j_j__ZdlPv_9(v19);
  j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<char const(&)[8],Social::Events::Property&>(
    (int)&v49,
    "Cheevos",
    (int)&v51);
  j_Json::Value::~Value(v18);
  v20 = (void *)(v51 - 12);
  if ( (int *)(v51 - 12) != &dword_28898C0 )
    v39 = (unsigned int *)(v51 - 4);
        v40 = __ldrex(v39);
      while ( __strex(v40 - 1, v39) );
      v40 = (*v39)--;
    if ( v40 <= 0 )
      j_j_j_j__ZdlPv_9(v20);
  j_Json::Value::~Value(v15);
  v21 = (void *)(v55 - 12);
  if ( (int *)(v55 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v55 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j__ZdlPv_9(v21);
  j_Json::Value::~Value(v12);
  v22 = (void *)(v58 - 12);
  if ( (int *)(v58 - 12) != &dword_28898C0 )
    v43 = (unsigned int *)(v58 - 4);
        v44 = __ldrex(v43);
      while ( __strex(v44 - 1, v43) );
      v44 = (*v43)--;
    if ( v44 <= 0 )
      j_j_j_j__ZdlPv_9(v22);
  j_Json::Value::~Value(v8);
  v23 = (void *)(v61 - 12);
  if ( (int *)(v61 - 12) != &dword_28898C0 )
    v45 = (unsigned int *)(v61 - 4);
        v46 = __ldrex(v45);
      while ( __strex(v46 - 1, v45) );
      v46 = (*v45)--;
    if ( v46 <= 0 )
      j_j_j_j__ZdlPv_9(v23);
  j_Json::Value::~Value(v2);
  v24 = (void *)(v65 - 12);
  if ( (int *)(v65 - 12) != &dword_28898C0 )
    v47 = (unsigned int *)(v65 - 4);
        v48 = __ldrex(v47);
      while ( __strex(v48 - 1, v47) );
      v48 = (*v47)--;
    if ( v48 <= 0 )
      j_j_j_j__ZdlPv_9(v24);
}


int *__fastcall Social::XboxLiveUserManager::_updateUser(Social::XboxLiveUserManager *this, const Social::XboxProfile *a2)
{
  const Social::XboxProfile *v2; // r7@1
  int *result; // r0@1
  int v4; // r4@1
  unsigned int v5; // r1@2
  unsigned int *v6; // r0@2
  unsigned int v7; // r2@5
  unsigned int v8; // r3@6
  signed int v9; // r1@7
  Social::XboxLiveUserProfileData *v10; // r6@11
  unsigned int *v11; // r2@14
  unsigned int v12; // r1@16
  unsigned int *v13; // r1@24
  unsigned int *v14; // r5@30
  Social::XboxLiveUserProfileData *v15; // [sp+4h] [bp-1Ch]@1
  int v16; // [sp+8h] [bp-18h]@1

  v2 = a2;
  result = (int *)Social::XboxLiveUserManager::_getUserProfileDataWithProfile(
                    (Social::XboxLiveUserManager *)&v15,
                    this,
                    (int **)a2);
  v4 = v16;
  if ( v16 )
  {
    v5 = *(_DWORD *)(v16 + 4);
    v6 = (unsigned int *)(v16 + 4);
    do
    {
      while ( 1 )
      {
        if ( !v5 )
        {
          v9 = 1;
          v4 = 0;
          goto LABEL_11;
        }
        __dmb();
        v7 = __ldrex(v6);
        if ( v7 == v5 )
          break;
        __clrex();
        v5 = v7;
      }
      v8 = __strex(v5 + 1, v6);
      v5 = v7;
    }
    while ( v8 );
    __dmb();
    v9 = 0;
    if ( !*v6 )
      v9 = 1;
LABEL_11:
    result = (int *)v16;
    v10 = v15;
    if ( v9 )
      v10 = 0;
    if ( v16 )
      v11 = (unsigned int *)(v16 + 8);
      if ( &pthread_create )
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
      else
        v12 = (*v11)--;
      if ( v12 == 1 )
        result = (int *)(*(int (**)(void))(*result + 12))();
    if ( v10 )
      result = Social::XboxLiveUserProfileData::update(v10, v2);
    if ( v4 )
      v13 = (unsigned int *)(v4 + 4);
          result = (int *)__ldrex(v13);
        while ( __strex((unsigned int)result - 1, v13) );
        result = (int *)(*v13)--;
      if ( result == (int *)1 )
        v14 = (unsigned int *)(v4 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
        if ( &pthread_create )
          __dmb();
          do
            result = (int *)__ldrex(v14);
          while ( __strex((unsigned int)result - 1, v14) );
        else
          result = (int *)(*v14)--;
        if ( result == (int *)1 )
          result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  }
  return result;
}


signed int __fastcall Social::Events::EventManager::hasListeners(Social::Events::EventManager *this, int a2)
{
  Social::Events::EventManager *v2; // r6@1
  pthread_mutex_t *v3; // r4@1
  int v4; // r5@1
  int v5; // r0@2
  int v6; // r6@3
  int v7; // r7@3
  __int64 v8; // kr00_8@3
  signed int v9; // r5@6

  v2 = this;
  v3 = (pthread_mutex_t *)((char *)this + 124);
  v4 = a2;
  if ( &pthread_create )
  {
    v5 = j_pthread_mutex_lock_0(v3);
    if ( v5 )
      sub_21E5E14(v5);
  }
  v8 = *(_QWORD *)v2;
  v6 = *(_QWORD *)v2 >> 32;
  v7 = v8;
  if ( (_DWORD)v8 == v6 )
LABEL_6:
    v9 = 0;
  else
    while ( (*(int (**)(void))(**(_DWORD **)v7 + 16))() & v4 )
    {
      v7 += 4;
      if ( v6 == v7 )
        goto LABEL_6;
    }
    v9 = 1;
    j_pthread_mutex_unlock_0(v3);
  return v9;
}


void __fastcall Social::MultiplayerXBL::_tickMultiplayerManager(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r10@1
  Social::XboxLiveUserManager *v2; // r0@1
  int v3; // r4@1
  int v4; // r6@1
  unsigned int *v5; // r1@2
  unsigned int v6; // r0@4
  unsigned int *v7; // r5@8
  unsigned int v8; // r0@10
  xbox::services::multiplayer::manager::multiplayer_event *v9; // r4@16
  xbox::services::multiplayer::manager::multiplayer_event *v10; // r11@16
  xbox::services::multiplayer::manager::multiplayer_event *v11; // r9@17
  unsigned int *v12; // r2@18
  signed int v13; // r1@20
  unsigned int *v14; // r2@22
  signed int v15; // r1@24
  int v16; // r6@37
  unsigned int *v17; // r1@38
  unsigned int v18; // r0@40
  __int64 v19; // kr08_8@42
  unsigned int *v20; // r0@43
  unsigned int v21; // r1@45
  __int64 v22; // r5@47
  char *v23; // r0@47
  int v24; // r7@49 OVERLAPPED
  int v25; // r8@49 OVERLAPPED
  unsigned int *v26; // r0@50
  unsigned int v27; // r1@52
  int v28; // r6@56
  unsigned int *v29; // r1@57
  unsigned int v30; // r0@59
  int v31; // r6@62
  unsigned int *v32; // r1@63
  unsigned int v33; // r0@65
  unsigned int *v34; // r5@69
  unsigned int v35; // r0@71
  unsigned int *v36; // r5@75
  unsigned int v37; // r0@77
  char *v38; // r0@82
  unsigned int *v39; // r1@83
  unsigned int v40; // r0@85
  unsigned int *v41; // r5@89
  unsigned int v42; // r0@91
  int *v43; // r0@99
  void *v44; // r0@99
  int v45; // r6@100
  unsigned int *v46; // r1@101
  unsigned int v47; // r0@103
  unsigned int *v48; // r5@107
  unsigned int v49; // r0@109
  char *v50; // r0@114
  int v51; // r6@114
  unsigned int *v52; // r1@115
  unsigned int v53; // r0@117
  unsigned int *v54; // r5@121
  unsigned int v55; // r0@123
  void *v56; // r0@128
  void *v57; // r0@129
  unsigned int *v58; // r1@131
  unsigned int v59; // r0@133
  unsigned int *v60; // r5@137
  unsigned int v61; // r0@139
  unsigned int *v62; // r5@146
  unsigned int v63; // r0@148
  unsigned int *v64; // r2@150
  signed int v65; // r1@152
  unsigned int *v66; // r2@154
  signed int v67; // r1@156
  unsigned int *v68; // r2@158
  signed int v69; // r1@160
  char *v70; // r0@165
  int *v71; // r0@165
  void *v72; // r0@165
  void *v73; // r0@166
  __int64 v74; // kr10_8@167
  void **v75; // r5@167
  unsigned int *v76; // r0@168
  unsigned int v77; // r1@170
  int v78; // r9@173
  unsigned int *v79; // r1@174
  unsigned int v80; // r0@176
  unsigned int *v81; // r5@180
  unsigned int v82; // r0@182
  int *v83; // r8@199
  xbox::services::multiplayer::manager::multiplayer_member **v84; // r6@199 OVERLAPPED
  int *v85; // r7@199
  const char *v86; // r9@199
  int v87; // r5@201
  _DWORD *v88; // r0@201
  char *v89; // r0@203
  xbox::services::multiplayer::manager::multiplayer_member **v90; // r6@203
  int v91; // r5@204
  unsigned int *v92; // r1@205
  unsigned int v93; // r0@207
  signed int v94; // r5@209
  unsigned int *v95; // r2@210
  signed int v96; // r1@212
  unsigned int *v97; // r6@216
  unsigned int v98; // r0@218
  unsigned int *v99; // r2@221
  signed int v100; // r1@223
  unsigned int *v101; // r2@225
  signed int v102; // r1@227
  unsigned int *v103; // r2@229
  signed int v104; // r1@231
  unsigned int *v105; // r2@253
  signed int v106; // r1@255
  int *v107; // r0@261
  int *v108; // r6@261
  void *v109; // r0@261
  int v110; // r0@263
  _BOOL4 v111; // r6@263
  int v112; // r7@263
  unsigned int *v113; // r1@264
  unsigned int v114; // r0@266
  unsigned int *v115; // r5@270
  unsigned int v116; // r0@272
  bool v117; // zf@277
  int *v118; // r5@278
  void *v119; // r0@278
  void *v120; // r0@280
  void *v121; // r0@282
  int v122; // r5@286 OVERLAPPED
  int v123; // r9@287
  unsigned int *v124; // r1@288
  unsigned int v125; // r0@290
  int *v126; // r8@294
  unsigned int *v127; // r7@294
  unsigned int v128; // r0@296
  unsigned int *v129; // r1@306
  unsigned int v130; // r0@308
  unsigned int *v131; // r5@312
  unsigned int v132; // r3@314
  int v133; // r6@319
  unsigned int *v134; // r1@320
  unsigned int v135; // r0@322
  unsigned int *v136; // r5@326
  unsigned int v137; // r0@328
  int v138; // r7@334
  unsigned int *v139; // r2@336
  signed int v140; // r1@338
  int v141; // r5@344
  unsigned int *v142; // r1@345
  unsigned int v143; // r0@347
  unsigned int *v144; // r6@351
  unsigned int v145; // r0@353
  int v146; // r1@358
  void *v147; // r0@358
  int v148; // r4@363
  unsigned int *v149; // r1@364
  unsigned int v150; // r0@366
  unsigned int *v151; // r5@370
  unsigned int v152; // r0@372
  xbox::services::multiplayer::manager::multiplayer_member **v153; // [sp+28h] [bp-140h]@199
  xbox::services::multiplayer::manager::multiplayer_member **v154; // [sp+2Ch] [bp-13Ch]@261
  char v155; // [sp+44h] [bp-124h]@42
  int v156; // [sp+48h] [bp-120h]@42
  xbox::services::multiplayer::manager::multiplayer_member *v157; // [sp+4Ch] [bp-11Ch]@114
  int v158; // [sp+50h] [bp-118h]@114
  int v159; // [sp+54h] [bp-114h]@114
  xbox::services::multiplayer::manager::multiplayer_member *v160; // [sp+58h] [bp-110h]@99
  int v161; // [sp+5Ch] [bp-10Ch]@100
  int v162; // [sp+60h] [bp-108h]@99
  int v163; // [sp+64h] [bp-104h]@99
  char v164; // [sp+68h] [bp-100h]@17
  int v165; // [sp+6Ch] [bp-FCh]@49
  int v166; // [sp+74h] [bp-F4h]@167
  int v167; // [sp+7Ch] [bp-ECh]@229
  char v168; // [sp+80h] [bp-E8h]@278
  int v169; // [sp+88h] [bp-E0h]@278
  int v170; // [sp+8Ch] [bp-DCh]@278
  Social::MultiplayerXBL *v171; // [sp+C8h] [bp-A0h]@201
  char *v172; // [sp+CCh] [bp-9Ch]@201
  _DWORD *v173; // [sp+D0h] [bp-98h]@201
  void (*v174)(void); // [sp+D8h] [bp-90h]@201
  void (__fastcall *v175)(int **); // [sp+DCh] [bp-8Ch]@201
  Social::User *v176; // [sp+E0h] [bp-88h]@201
  int v177; // [sp+E4h] [bp-84h]@204
  Social::User *v178; // [sp+E8h] [bp-80h]@263
  int v179; // [sp+ECh] [bp-7Ch]@263
  int v180; // [sp+F0h] [bp-78h]@199
  int v181; // [sp+F4h] [bp-74h]@199
  xbox::services::multiplayer::manager::multiplayer_member **v182; // [sp+F8h] [bp-70h]@199
  xbox::services::multiplayer::manager::multiplayer_member **v183; // [sp+FCh] [bp-6Ch]@199
  char v184; // [sp+104h] [bp-64h]@167
  int v185; // [sp+108h] [bp-60h]@167
  int v186; // [sp+10Ch] [bp-5Ch]@22
  int v187; // [sp+110h] [bp-58h]@18
  int v188; // [sp+114h] [bp-54h]@37
  int v189; // [sp+118h] [bp-50h]@37
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v190; // [sp+11Ch] [bp-4Ch]@37
  int v191; // [sp+120h] [bp-48h]@319
  xbox::services::multiplayer::manager::multiplayer_event *v192; // [sp+124h] [bp-44h]@16
  xbox::services::multiplayer::manager::multiplayer_event *v193; // [sp+128h] [bp-40h]@16
  int v194; // [sp+130h] [bp-38h]@16
  int v195; // [sp+134h] [bp-34h]@363
  Social::User *v196; // [sp+138h] [bp-30h]@1
  int v197; // [sp+13Ch] [bp-2Ch]@1

  v1 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v196, *((_DWORD *)this + 11));
  v2 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v196);
  v3 = Social::XboxLiveUserManager::isSignedIn(v2);
  v4 = v197;
  if ( v197 )
  {
    v5 = (unsigned int *)(v197 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 == 1 )
      v7 = (unsigned int *)(v4 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  }
  if ( v3 )
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v194);
    xbox::services::multiplayer::manager::multiplayer_manager::do_work(
      (xbox::services::multiplayer::manager::multiplayer_manager *)&v192,
      v194);
    v10 = v193;
    v9 = v192;
    if ( v192 != v193 )
      v11 = (xbox::services::multiplayer::manager::multiplayer_event *)&v164;
        switch ( xbox::services::multiplayer::manager::multiplayer_event::event_type(v9) )
        {
          case 2:
            if ( *((_BYTE *)v1 + 176) && !*((_BYTE *)v1 + 442) )
            {
              xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v188);
              xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
                (xbox::services::multiplayer::manager::multiplayer_manager *)&v190,
                v188);
              v16 = v189;
              if ( v189 )
              {
                v17 = (unsigned int *)(v189 + 4);
                if ( &pthread_create )
                {
                  __dmb();
                  do
                    v18 = __ldrex(v17);
                  while ( __strex(v18 - 1, v17) );
                }
                else
                  v18 = (*v17)--;
                if ( v18 == 1 )
                  v62 = (unsigned int *)(v16 + 8);
                  (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
                  if ( &pthread_create )
                  {
                    __dmb();
                    do
                      v63 = __ldrex(v62);
                    while ( __strex(v63 - 1, v62) );
                  }
                  else
                    v63 = (*v62)--;
                  if ( v63 == 1 )
                    (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
              }
              v70 = xbox::services::multiplayer::manager::multiplayer_lobby_session::session_reference(v190);
              v71 = (int *)xbox::services::multiplayer::multiplayer_session_reference::session_name((xbox::services::multiplayer::multiplayer_session_reference *)v70);
              sub_119C854(&v186, v71);
              utility::conversions::to_utf8string(&v187, &v186);
              v72 = (void *)(v187 - 12);
              if ( (int *)(v187 - 12) != &dword_28898C0 )
                v12 = (unsigned int *)(v187 - 4);
                    v13 = __ldrex(v12);
                  while ( __strex(v13 - 1, v12) );
                  v13 = (*v12)--;
                if ( v13 <= 0 )
                  j_j_j_j_j__ZdlPv_9_1(v72);
              v73 = (void *)(v186 - 12);
              if ( (int *)(v186 - 12) != &dword_28898C0 )
                v14 = (unsigned int *)(v186 - 4);
                    v15 = __ldrex(v14);
                  while ( __strex(v15 - 1, v14) );
                  v15 = (*v14)--;
                if ( v15 <= 0 )
                  j_j_j_j_j__ZdlPv_9_1(v73);
              xbox::services::multiplayer::manager::multiplayer_event::event_args(
                (xbox::services::multiplayer::manager::multiplayer_event *)&v184,
                (int)v9);
              v74 = *(_QWORD *)&v184;
              v75 = (void **)&v166;
              if ( v185 )
                v76 = (unsigned int *)(v185 + 4);
                    v77 = __ldrex(v76);
                  while ( __strex(v77 + 1, v76) );
                  ++*v76;
                v78 = v185;
                if ( v185 )
                  v79 = (unsigned int *)(v185 + 4);
                      v80 = __ldrex(v79);
                    while ( __strex(v80 - 1, v79) );
                    v80 = (*v79)--;
                  if ( v80 == 1 )
                    v81 = (unsigned int *)(v78 + 8);
                    (*(void (__fastcall **)(int))(*(_DWORD *)v78 + 8))(v78);
                    if ( &pthread_create )
                    {
                      __dmb();
                      do
                        v82 = __ldrex(v81);
                      while ( __strex(v82 - 1, v81) );
                    }
                    else
                      v82 = (*v81)--;
                    v75 = (void **)&v166;
                    if ( v82 == 1 )
                      (*(void (__fastcall **)(int))(*(_DWORD *)v78 + 12))(v78);
              xbox::services::multiplayer::manager::member_joined_event_args::members(
                (xbox::services::multiplayer::manager::member_joined_event_args *)&v182,
                v74);
              v83 = &v180;
              v84 = v182;
              v85 = &v181;
              v86 = (const char *)&unk_257BC67;
              v153 = v183;
              if ( v182 != v183 )
                do
                  v154 = v84;
                  v107 = (int *)xbox::services::multiplayer::manager::multiplayer_member::xbox_user_id(*v84);
                  sub_119C854(v83, v107);
                  utility::conversions::to_utf8string(v85, v83);
                  v108 = &dword_28898C0;
                  v109 = (void *)(v180 - 12);
                  if ( (int *)(v180 - 12) != &dword_28898C0 )
                    v95 = (unsigned int *)(v180 - 4);
                        v96 = __ldrex(v95);
                      while ( __strex(v96 - 1, v95) );
                      v96 = (*v95)--;
                    if ( v96 <= 0 )
                      j_j_j_j_j__ZdlPv_9_1(v109);
                  if ( Level::getXBLBroadcastMode(*((Level **)v1 + 8)) != 2 )
                    goto LABEL_379;
                  Social::UserManager::getPrimaryUser((Social::UserManager *)&v178, *((_DWORD *)v1 + 11));
                  v110 = Social::User::getLiveUser(v178);
                  v111 = Social::XboxLiveUserManager::isUserOnFriendList(v110, (int **)v85);
                  v112 = v179;
                  if ( v179 )
                    v113 = (unsigned int *)(v179 + 4);
                        v114 = __ldrex(v113);
                      while ( __strex(v114 - 1, v113) );
                      v114 = (*v113)--;
                    if ( v114 == 1 )
                      v115 = (unsigned int *)(v112 + 8);
                      (*(void (__fastcall **)(int))(*(_DWORD *)v112 + 8))(v112);
                      if ( &pthread_create )
                      {
                        __dmb();
                        do
                          v116 = __ldrex(v115);
                        while ( __strex(v116 - 1, v115) );
                      }
                      else
                        v116 = (*v115)--;
                      v75 = (void **)&v166;
                      if ( v116 == 1 )
                        (*(void (__fastcall **)(int))(*(_DWORD *)v112 + 12))(v112);
                  v117 = v111 == 0;
                  v83 = &v180;
                  v85 = &v181;
                  v86 = (const char *)&unk_257BC67;
                  if ( v117 )
                    *((_BYTE *)v1 + 442) = 1;
                    Social::UserManager::getPrimaryUser((Social::UserManager *)&v176, *((_DWORD *)v1 + 11));
                    v87 = Social::User::getLiveUser(v176);
                    v171 = v1;
                    sub_119C854((int *)&v172, &v181);
                    v174 = 0;
                    v88 = operator new(8u);
                    *v88 = v171;
                    v88[1] = v172;
                    v172 = (char *)&unk_28898CC;
                    v173 = v88;
                    v175 = sub_1011670;
                    v174 = (void (*)(void))sub_1011958;
                    Social::XboxLiveUserManager::forceFriendRefresh(v87, (int)&v173);
                    if ( v174 )
                      v174();
                    v89 = v172 - 12;
                    v90 = v154;
                    if ( (int *)(v172 - 12) != &dword_28898C0 )
                      v105 = (unsigned int *)(v172 - 4);
                          v106 = __ldrex(v105);
                        while ( __strex(v106 - 1, v105) );
                        v85 = &v181;
                        v106 = (*v105)--;
                      if ( v106 <= 0 )
                        j_j_j_j_j__ZdlPv_9_1(v89);
                    v91 = v177;
                    if ( v177 )
                      v92 = (unsigned int *)(v177 + 4);
                          v93 = __ldrex(v92);
                        while ( __strex(v93 - 1, v92) );
                        v93 = (*v92)--;
                      if ( v93 == 1 )
                        v97 = (unsigned int *)(v91 + 8);
                        (*(void (__fastcall **)(int))(*(_DWORD *)v91 + 8))(v91);
                        if ( &pthread_create )
                        {
                          __dmb();
                          do
                            v98 = __ldrex(v97);
                          while ( __strex(v98 - 1, v97) );
                        }
                        else
                          v98 = (*v97)--;
                        if ( v98 == 1 )
                          (*(void (__fastcall **)(int))(*(_DWORD *)v91 + 12))(v91);
                          v94 = 7;
                          v90 = v154;
                          v86 = (const char *)&unk_257BC67;
                        v94 = 7;
                      v94 = 7;
LABEL_379:
                    v169 = 0;
                    Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v170);
                    std::_Hashtable<std::string,std::pair<std::string const,Social::ClientConnectionState>,std::allocator<std::pair<std::string const,Social::ClientConnectionState>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::ClientConnectionState>(
                      (int)&v168,
                      (unsigned __int64 *)v1 + 24,
                      v85,
                      (int)&v169);
                    Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v170);
                    sub_119C884((void **)&v167, v86);
                    sub_119C884(v75, v86);
                    Social::MultiplayerService::_changeMultiplayerState(
                      (int)v1,
                      2,
                      (const char **)&v167,
                      0,
                      (const char **)v75);
                    v118 = v108;
                    v119 = (void *)(v166 - 12);
                    v117 = v166 - 12 == (_DWORD)v108;
                    if ( !v117 )
                      v101 = (unsigned int *)(v166 - 4);
                          v102 = __ldrex(v101);
                        while ( __strex(v102 - 1, v101) );
                        v102 = (*v101)--;
                      if ( v102 <= 0 )
                        j_j_j_j_j__ZdlPv_9_1(v119);
                    v120 = (void *)(v167 - 12);
                    if ( (int *)(v167 - 12) != v118 )
                      v103 = (unsigned int *)(v167 - 4);
                          v104 = __ldrex(v103);
                        while ( __strex(v104 - 1, v103) );
                        v104 = (*v103)--;
                      if ( v104 <= 0 )
                        j_j_j_j_j__ZdlPv_9_1(v120);
                    v94 = 0;
                  v121 = (void *)(v181 - 12);
                  if ( (int *)(v181 - 12) != &dword_28898C0 )
                    v99 = (unsigned int *)(v181 - 4);
                        v100 = __ldrex(v99);
                      while ( __strex(v100 - 1, v99) );
                      v100 = (*v99)--;
                    if ( v100 <= 0 )
                      j_j_j_j_j__ZdlPv_9_1(v121);
                  v117 = v94 == 0;
                  v75 = (void **)&v166;
                  if ( !v117 )
                    break;
                  v84 = v90 + 2;
                while ( v84 != v153 );
                *(_QWORD *)(&v84 - 1) = *(_QWORD *)&v182;
                if ( v182 != v183 )
                    v123 = *(_DWORD *)(v122 + 4);
                    if ( v123 )
                      v124 = (unsigned int *)(v123 + 4);
                          v125 = __ldrex(v124);
                        while ( __strex(v125 - 1, v124) );
                        v125 = (*v124)--;
                      if ( v125 == 1 )
                        v126 = v85;
                        v127 = (unsigned int *)(v123 + 8);
                        (*(void (__fastcall **)(int))(*(_DWORD *)v123 + 8))(v123);
                            v128 = __ldrex(v127);
                          while ( __strex(v128 - 1, v127) );
                          v128 = (*v127)--;
                        v85 = v126;
                        if ( v128 == 1 )
                          (*(void (__fastcall **)(int))(*(_DWORD *)v123 + 12))(v123);
                    v122 += 8;
                  while ( (xbox::services::multiplayer::manager::multiplayer_member **)v122 != v84 );
                  v84 = v182;
              if ( v84 )
                operator delete(v84);
              v11 = (xbox::services::multiplayer::manager::multiplayer_event *)&v164;
              if ( HIDWORD(v74) )
                v129 = (unsigned int *)(HIDWORD(v74) + 4);
                    v130 = __ldrex(v129);
                  while ( __strex(v130 - 1, v129) );
                  v130 = (*v129)--;
                if ( v130 == 1 )
                  v131 = (unsigned int *)(HIDWORD(v74) + 8);
                  (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v74) + 8))(HIDWORD(v74));
                      v132 = __ldrex(v131);
                    while ( __strex(v132 - 1, v131) );
                    v132 = (*v131)--;
                  if ( v132 == 1 )
                    (*(void (**)(void))(*(_DWORD *)HIDWORD(v74) + 12))();
              v133 = v191;
              if ( v191 )
                v134 = (unsigned int *)(v191 + 4);
                    v135 = __ldrex(v134);
                  while ( __strex(v135 - 1, v134) );
                  v135 = (*v134)--;
                if ( v135 == 1 )
                  v136 = (unsigned int *)(v133 + 8);
                  (*(void (__fastcall **)(int))(*(_DWORD *)v133 + 8))(v133);
                      v137 = __ldrex(v136);
                    while ( __strex(v137 - 1, v136) );
                    v137 = (*v136)--;
                  if ( v137 == 1 )
                    (*(void (__fastcall **)(int))(*(_DWORD *)v133 + 12))(v133);
            }
            break;
          case 7:
            xbox::services::multiplayer::manager::multiplayer_event::event_args(
              (xbox::services::multiplayer::manager::multiplayer_event *)&v155,
              (int)v9);
            v19 = *(_QWORD *)&v155;
            if ( v156 )
              v20 = (unsigned int *)(v156 + 4);
              if ( &pthread_create )
                __dmb();
                  v21 = __ldrex(v20);
                while ( __strex(v21 + 1, v20) );
              else
                ++*v20;
              v28 = v156;
              if ( v156 )
                v29 = (unsigned int *)(v156 + 4);
                    v30 = __ldrex(v29);
                  while ( __strex(v30 - 1, v29) );
                  v30 = (*v29)--;
                if ( v30 == 1 )
                  v34 = (unsigned int *)(v28 + 8);
                  (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
                      v35 = __ldrex(v34);
                    while ( __strex(v35 - 1, v34) );
                    v35 = (*v34)--;
                  if ( v35 == 1 )
                    (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
            v38 = xbox::services::multiplayer::manager::session_property_changed_event_args::properties((xbox::services::multiplayer::manager::session_property_changed_event_args *)v19);
            Social::MultiplayerXBL::_handleSessionPropertyChanged(v1, (const web::json::value *)v38);
            if ( HIDWORD(v19) )
              v39 = (unsigned int *)(HIDWORD(v19) + 4);
                  v40 = __ldrex(v39);
                while ( __strex(v40 - 1, v39) );
                v40 = (*v39)--;
              if ( v40 == 1 )
                v41 = (unsigned int *)(HIDWORD(v19) + 8);
                (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v19) + 8))(HIDWORD(v19));
                    v42 = __ldrex(v41);
                  while ( __strex(v42 - 1, v41) );
                  v42 = (*v41)--;
                if ( v42 == 1 )
                  (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v19) + 12))(HIDWORD(v19));
          case 17:
            v22 = *(_QWORD *)xbox::services::multiplayer::manager::multiplayer_event::err(v9);
            v23 = xbox::services::multiplayer::manager::multiplayer_event::err_message(v9);
            Social::MultiplayerXBL::_handleJoinLobbyCompleted((int)v1, v22, SHIDWORD(v22), (const void **)v23);
          case 18:
            *((_BYTE *)v1 + 443) = 1;
          case 4:
            xbox::services::multiplayer::manager::multiplayer_event::event_args(v11, (int)v9);
            *(_QWORD *)&v24 = *(_QWORD *)&v164;
            if ( v165 )
              v26 = (unsigned int *)(v165 + 4);
                  v27 = __ldrex(v26);
                while ( __strex(v27 + 1, v26) );
                ++*v26;
              v31 = v165;
              if ( v165 )
                v32 = (unsigned int *)(v165 + 4);
                    v33 = __ldrex(v32);
                  while ( __strex(v33 - 1, v32) );
                  v33 = (*v32)--;
                if ( v33 == 1 )
                  v36 = (unsigned int *)(v31 + 8);
                  (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 8))(v31);
                      v37 = __ldrex(v36);
                    while ( __strex(v37 - 1, v36) );
                    v37 = (*v36)--;
                  if ( v37 == 1 )
                    (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 12))(v31);
            xbox::services::multiplayer::manager::member_property_changed_event_args::member(
              (xbox::services::multiplayer::manager::member_property_changed_event_args *)&v160,
              v24);
            v43 = (int *)xbox::services::multiplayer::manager::multiplayer_member::xbox_user_id(v160);
            sub_119C854(&v162, v43);
            utility::conversions::to_utf8string(&v163, &v162);
            v44 = (void *)(v162 - 12);
            if ( (int *)(v162 - 12) != &dword_28898C0 )
              v64 = (unsigned int *)(v162 - 4);
                  v65 = __ldrex(v64);
                while ( __strex(v65 - 1, v64) );
                v65 = (*v64)--;
              if ( v65 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v44);
            v45 = v161;
            if ( v161 )
              v46 = (unsigned int *)(v161 + 4);
                  v47 = __ldrex(v46);
                while ( __strex(v47 - 1, v46) );
                v47 = (*v46)--;
              if ( v47 == 1 )
                v48 = (unsigned int *)(v45 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v45 + 8))(v45);
                    v49 = __ldrex(v48);
                  while ( __strex(v49 - 1, v48) );
                  v49 = (*v48)--;
                if ( v49 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v45 + 12))(v45);
            sub_119C854(&v159, &v163);
              (xbox::services::multiplayer::manager::member_property_changed_event_args *)&v157,
            v50 = xbox::services::multiplayer::manager::multiplayer_member::properties(v157);
            Social::MultiplayerXBL::_handleMemberPropertyChanged((int)v1, (int **)&v159, (int)v50);
            v51 = v158;
            if ( v158 )
              v52 = (unsigned int *)(v158 + 4);
                  v53 = __ldrex(v52);
                while ( __strex(v53 - 1, v52) );
                v53 = (*v52)--;
              if ( v53 == 1 )
                v54 = (unsigned int *)(v51 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v51 + 8))(v51);
                    v55 = __ldrex(v54);
                  while ( __strex(v55 - 1, v54) );
                  v55 = (*v54)--;
                if ( v55 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v51 + 12))(v51);
            v56 = (void *)(v159 - 12);
            if ( (int *)(v159 - 12) != &dword_28898C0 )
              v66 = (unsigned int *)(v159 - 4);
                  v67 = __ldrex(v66);
                while ( __strex(v67 - 1, v66) );
                v67 = (*v66)--;
              if ( v67 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v56);
            v57 = (void *)(v163 - 12);
            if ( (int *)(v163 - 12) != &dword_28898C0 )
              v68 = (unsigned int *)(v163 - 4);
                  v69 = __ldrex(v68);
                while ( __strex(v69 - 1, v68) );
                v69 = (*v68)--;
              if ( v69 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v57);
            if ( v25 )
              v58 = (unsigned int *)(v25 + 4);
                  v59 = __ldrex(v58);
                while ( __strex(v59 - 1, v58) );
                v59 = (*v58)--;
              if ( v59 == 1 )
                v60 = (unsigned int *)(v25 + 8);
                (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 8))(v25);
                    v61 = __ldrex(v60);
                  while ( __strex(v61 - 1, v60) );
                  v61 = (*v60)--;
                if ( v61 == 1 )
                  (*(void (__fastcall **)(int))(*(_DWORD *)v25 + 12))(v25);
          default:
            xbox::services::multiplayer::manager::multiplayer_event::event_type(v9);
          case 3:
          case 10:
          case 14:
          case 15:
        }
        v9 = (xbox::services::multiplayer::manager::multiplayer_event *)((char *)v9 + 32);
      while ( v9 != v10 );
      v9 = v193;
      v138 = (int)v192;
      if ( v192 != v193 )
          v141 = *(_DWORD *)(v138 + 28);
          if ( v141 )
          {
            v142 = (unsigned int *)(v141 + 4);
            if ( &pthread_create )
              __dmb();
              do
                v143 = __ldrex(v142);
              while ( __strex(v143 - 1, v142) );
            else
              v143 = (*v142)--;
            if ( v143 == 1 )
              v144 = (unsigned int *)(v141 + 8);
              (*(void (__fastcall **)(int))(*(_DWORD *)v141 + 8))(v141);
                  v145 = __ldrex(v144);
                while ( __strex(v145 - 1, v144) );
                v145 = (*v144)--;
              if ( v145 == 1 )
                (*(void (__fastcall **)(int))(*(_DWORD *)v141 + 12))(v141);
          }
          v146 = *(_DWORD *)(v138 + 12);
          v147 = (void *)(v146 - 12);
          if ( (int *)(v146 - 12) != &dword_28898C0 )
            v139 = (unsigned int *)(v146 - 4);
                v140 = __ldrex(v139);
              while ( __strex(v140 - 1, v139) );
              v140 = (*v139)--;
            if ( v140 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v147);
          v138 += 32;
        while ( (xbox::services::multiplayer::manager::multiplayer_event *)v138 != v9 );
        v9 = v192;
    if ( v9 )
      operator delete((void *)v9);
    v148 = v195;
    if ( v195 )
      v149 = (unsigned int *)(v195 + 4);
          v150 = __ldrex(v149);
        while ( __strex(v150 - 1, v149) );
        v150 = (*v149)--;
      if ( v150 == 1 )
        v151 = (unsigned int *)(v148 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v148 + 8))(v148);
        if ( &pthread_create )
          __dmb();
          do
            v152 = __ldrex(v151);
          while ( __strex(v152 - 1, v151) );
        else
          v152 = (*v151)--;
        if ( v152 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v148 + 12))(v148);
}


_BOOL4 __fastcall Social::XboxLiveUserManager::hasXUID(int a1, int **a2)
{
  return std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
           (unsigned __int64 *)(a1 + 80),
           a2) != 0;
}


void __fastcall Social::XboxLiveUserManager::getAuthorizationHeader(int a1, int a2, int *a3)
{
  Social::XboxLiveUserManager::getAuthorizationHeader(a1, a2, a3);
}


int __fastcall Social::UserManager::_addUser(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  __int64 v4; // r0@1
  int v5; // r1@2
  unsigned int *v6; // r1@3
  unsigned int v7; // r0@5
  _DWORD *v8; // r0@10
  int (__cdecl *v9)(_DWORD); // r3@10
  int *v10; // r5@10 OVERLAPPED
  int *v11; // r6@10 OVERLAPPED
  int result; // r0@13
  _DWORD *v13; // [sp+0h] [bp-20h]@10
  int (__fastcall *v14)(void **, _DWORD **, int); // [sp+8h] [bp-18h]@10
  int (__fastcall *v15)(_DWORD **, int); // [sp+Ch] [bp-14h]@10

  v2 = a1;
  v3 = a2;
  v4 = *(_QWORD *)(a1 + 12);
  if ( (_DWORD)v4 == HIDWORD(v4) )
  {
    std::vector<std::shared_ptr<Social::User>,std::allocator<std::shared_ptr<Social::User>>>::_M_emplace_back_aux<std::shared_ptr<Social::User>&>(
      (unsigned __int64 *)(v2 + 8),
      v3);
  }
  else
    *(_DWORD *)v4 = *(_DWORD *)v3;
    HIDWORD(v4) = *(_DWORD *)(v3 + 4);
    *(_DWORD *)(v4 + 4) = HIDWORD(v4);
    if ( HIDWORD(v4) )
    {
      v6 = (unsigned int *)(v5 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 + 1, v6) );
        LODWORD(v4) = *(_DWORD *)(v2 + 12);
      }
      else
        ++*v6;
    }
    *(_DWORD *)(v2 + 12) = v4 + 8;
  Social::User::setUserManager(*(Social::User **)v3, (Social::UserManager *)v2);
  (*(void (__fastcall **)(int, int))(*(_DWORD *)v2 + 120))(v2, v3);
  v8 = operator new(4u);
  *v8 = v3;
  v9 = (int (__cdecl *)(_DWORD))sub_102888E;
  v13 = v8;
  v14 = sub_102888E;
  v15 = sub_1028880;
  *(_QWORD *)&v10 = *(_QWORD *)(v2 + 140);
  if ( v10 == v11 )
    goto LABEL_20;
  do
    if ( !v9 )
      sub_119C8E4();
    result = v15(&v13, *v10);
    v9 = (int (__cdecl *)(_DWORD))v14;
    ++v10;
  while ( v11 != v10 );
  if ( v14 )
LABEL_20:
    result = v9(&v13);
  return result;
}


int (**__fastcall Social::XboxLiveUserManager::_updateAchievementData(Social::XboxLiveUserManager *this))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  Social::XboxLiveUserManager *v1; // r7@1
  pthread_mutex_t *v2; // r4@1
  int v3; // r0@2
  xbox::services::system::xbox_live_user *v4; // r0@4
  bool v5; // zf@4
  unsigned int v6; // r0@8
  int v7; // r10@10
  unsigned int v8; // r1@11
  unsigned int *v9; // r0@11
  unsigned int v10; // r2@14
  unsigned int v11; // r3@15
  int v12; // r11@18
  unsigned int *v13; // r6@18
  unsigned int v14; // r1@23
  unsigned int v15; // r1@27
  unsigned int v16; // r0@33
  __int64 v17; // kr00_8@38
  unsigned int *v18; // r1@39
  unsigned int v19; // r2@41
  char *v20; // r8@44
  __int64 v21; // kr08_8@44
  unsigned int *v22; // r1@45
  unsigned int v23; // r2@47
  Social::XboxLiveUserManager *v24; // r0@50
  int *v25; // r5@50
  int v26; // r0@50
  unsigned int v27; // r0@52
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  int v31; // r7@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int *v40; // r1@92
  unsigned int v41; // r0@94
  unsigned int *v42; // r5@98
  unsigned int v43; // r0@100
  int v44; // r5@105
  unsigned int *v45; // r1@106
  unsigned int v46; // r0@108
  unsigned int *v47; // r7@112
  unsigned int v48; // r0@114
  unsigned int v49; // r0@121
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@126
  int v51; // [sp+1Ch] [bp-3Ch]@50
  int v52; // [sp+20h] [bp-38h]@50
  char v53; // [sp+24h] [bp-34h]@50
  int v54; // [sp+28h] [bp-30h]@63
  char v55; // [sp+2Ch] [bp-2Ch]@55
  int v56; // [sp+30h] [bp-28h]@105

  v1 = this;
  v2 = (pthread_mutex_t *)((char *)this + 340);
  if ( &pthread_create )
  {
    v3 = pthread_mutex_lock(v2);
    if ( v3 )
      sub_119CCFC(v3);
  }
  if ( !*((_BYTE *)v1 + 337) )
    v4 = (xbox::services::system::xbox_live_user *)*((_DWORD *)v1 + 34);
    v5 = v4 == 0;
    if ( v4 )
      v5 = *((_DWORD *)v1 + 36) == 0;
    if ( !v5 && xbox::services::system::xbox_live_user::is_signed_in(v4) == 1 )
    {
      v6 = *((_WORD *)v1 + 62);
      if ( v6 <= 0xFF && !(_BYTE)v6 )
      {
        *((_BYTE *)v1 + 337) = 1;
        v7 = *((_DWORD *)v1 + 3);
        if ( !v7 )
          std::__throw_bad_weak_ptr();
        v8 = *(_DWORD *)(v7 + 4);
        v9 = (unsigned int *)(v7 + 4);
        do
        {
          while ( 1 )
          {
            if ( !v8 )
              std::__throw_bad_weak_ptr();
            __dmb();
            v10 = __ldrex(v9);
            if ( v10 == v8 )
              break;
            __clrex();
            v8 = v10;
          }
          v11 = __strex(v8 + 1, v9);
          v8 = v10;
        }
        while ( v11 );
        __dmb();
        v12 = *((_DWORD *)v1 + 2);
        v13 = (unsigned int *)(v7 + 8);
        if ( &pthread_create )
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 + 1, v13) );
        else
          ++*v13;
            v15 = __ldrex(v9);
          while ( __strex(v15 - 1, v9) );
          v15 = (*v9)--;
        if ( v15 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
          if ( &pthread_create )
            do
              v16 = __ldrex(v13);
            while ( __strex(v16 - 1, v13) );
          else
            v16 = (*v13)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
        v17 = *((_QWORD *)v1 + 18);
        if ( HIDWORD(v17) )
          v18 = (unsigned int *)(HIDWORD(v17) + 4);
              v19 = __ldrex(v18);
            while ( __strex(v19 + 1, v18) );
            ++*v18;
        v20 = xbox::services::xbox_live_context::achievement_service((xbox::services::xbox_live_context *)v17);
        v21 = *((_QWORD *)v1 + 17);
        if ( HIDWORD(v21) )
          v22 = (unsigned int *)(HIDWORD(v21) + 4);
              v23 = __ldrex(v22);
            while ( __strex(v23 + 1, v22) );
            ++*v22;
        v24 = (Social::XboxLiveUserManager *)xbox::services::system::xbox_live_user::xbox_user_id((xbox::services::system::xbox_live_user *)v21);
        v25 = (int *)v24;
        v26 = Social::XboxLiveUserManager::getTitleId(v24);
        xbox::services::achievements::achievement_service::get_achievements_for_title_id(
          (int)&v53,
          (int)v20,
          v25,
          v26,
          2,
          0,
          25);
        v51 = v12;
        v52 = v7;
            v27 = __ldrex(v13);
          while ( __strex(v27 + 1, v13) );
        sub_102EA70((int)&v55, (int)&v53, (int)&v51);
        v28 = v52;
        if ( v52 )
          v29 = (unsigned int *)(v52 + 8);
              v30 = __ldrex(v29);
            while ( __strex(v30 - 1, v29) );
            v30 = (*v29)--;
          if ( v30 == 1 )
            (*(void (**)(void))(*(_DWORD *)v28 + 12))();
        v31 = v54;
        if ( v54 )
          v32 = (unsigned int *)(v54 + 4);
              v33 = __ldrex(v32);
            while ( __strex(v33 - 1, v32) );
            v33 = (*v32)--;
          if ( v33 == 1 )
            v34 = (unsigned int *)(v31 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 8))(v31);
            if ( &pthread_create )
            {
              __dmb();
              do
                v35 = __ldrex(v34);
              while ( __strex(v35 - 1, v34) );
            }
            else
              v35 = (*v34)--;
            if ( v35 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 12))(v31);
          v36 = (unsigned int *)(HIDWORD(v21) + 4);
              v37 = __ldrex(v36);
            while ( __strex(v37 - 1, v36) );
            v37 = (*v36)--;
          if ( v37 == 1 )
            v38 = (unsigned int *)(HIDWORD(v21) + 8);
            (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v21) + 8))(HIDWORD(v21));
                v39 = __ldrex(v38);
              while ( __strex(v39 - 1, v38) );
              v39 = (*v38)--;
            if ( v39 == 1 )
              (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v21) + 12))(HIDWORD(v21));
          v40 = (unsigned int *)(HIDWORD(v17) + 4);
              v41 = __ldrex(v40);
            while ( __strex(v41 - 1, v40) );
            v41 = (*v40)--;
          if ( v41 == 1 )
            v42 = (unsigned int *)(HIDWORD(v17) + 8);
            (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v17) + 8))(HIDWORD(v17));
                v43 = __ldrex(v42);
              while ( __strex(v43 - 1, v42) );
              v43 = (*v42)--;
            if ( v43 == 1 )
              (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v17) + 12))(HIDWORD(v17));
        v44 = v56;
        if ( v56 )
          v45 = (unsigned int *)(v56 + 4);
              v46 = __ldrex(v45);
            while ( __strex(v46 - 1, v45) );
            v46 = (*v45)--;
          if ( v46 == 1 )
            v47 = (unsigned int *)(v44 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 8))(v44);
                v48 = __ldrex(v47);
              while ( __strex(v48 - 1, v47) );
              v48 = (*v47)--;
            if ( v48 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 12))(v44);
            v49 = __ldrex(v13);
          while ( __strex(v49 - 1, v13) );
          v49 = (*v13)--;
        if ( v49 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
      }
    }
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v2);
  return result;
}


void __fastcall Social::Events::Event::addProperty<char>(int a1, int *a2, _BYTE *a3)
{
  int v3; // r6@1
  _BYTE *v4; // r7@1
  int *v5; // r4@1
  Json::Value *v6; // r5@1
  void *v7; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+8h] [bp-30h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = (Json::Value *)(sub_21E8AF4(&v11, a2) + 2);
  Json::Value::Value(v6, *v4);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v10,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v11);
  Json::Value::~Value(v6);
  v7 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
}


__int64 __fastcall Social::MultiplayerService::manualForceUpdateGameList(Social::MultiplayerService *this)
{
  Social::MultiplayerService *v1; // r4@1
  __int64 result; // r0@1
  int v3; // [sp+0h] [bp-10h]@1

  v1 = this;
  Social::MultiplayerService::_buildGameList(this);
  sub_21E034C(&v3);
  result = *(_QWORD *)&v3;
  *((_QWORD *)v1 + 35) = *(_QWORD *)&v3;
  return result;
}


void __fastcall Social::Events::HttpTelemetry::~HttpTelemetry(Social::Events::HttpTelemetry *this)
{
  Social::Events::HttpTelemetry::~HttpTelemetry(this);
}


void __fastcall Social::Events::HttpTelemetry::~HttpTelemetry(Social::Events::HttpTelemetry *this)
{
  Social::Events::HttpTelemetry *v1; // r0@1

  v1 = j_Social::Events::HttpTelemetry::~HttpTelemetry(this);
  j_j_j__ZdlPv_7((void *)v1);
}


Social::Events::AutomationEventLogger *__fastcall Social::Events::AutomationEventLogger::~AutomationEventLogger(Social::Events::AutomationEventLogger *this)
{
  Social::Events::AutomationEventLogger *v1; // r4@1
  char *v2; // r5@1
  char *v3; // r0@1

  v1 = this;
  *(_DWORD *)this = &off_26E8E68;
  v2 = (char *)this + 32;
  std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)this + 8);
  v3 = (char *)*((_DWORD *)v1 + 2);
  if ( v3 && v2 != v3 )
    operator delete(v3);
  return v1;
}


signed int __fastcall Social::User::disconnect(Social::User *this)
{
  Social::User *v1; // r4@1
  int v2; // r5@3
  unsigned int *v3; // r1@4
  unsigned int v4; // r0@6
  unsigned int *v5; // r6@10
  unsigned int v6; // r0@12
  signed int result; // r0@17

  v1 = this;
  if ( Social::XboxLiveUserManager::isSignedIn(*((Social::XboxLiveUserManager **)this + 6)) == 1 )
    Social::XboxLiveUserManager::signOut(*((Social::XboxLiveUserManager **)v1 + 6));
  (*(void (__fastcall **)(Social::User *))(*(_DWORD *)v1 + 32))(v1);
  *((_DWORD *)v1 + 4) = 1;
  *((_DWORD *)v1 + 9) = 0;
  v2 = *((_DWORD *)v1 + 10);
  *((_DWORD *)v1 + 10) = 0;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  result = 2;
  *((_DWORD *)v1 + 1) = 2;
  return result;
}


void __fastcall Social::MultiplayerXBL::_handleJoinLobbyCompleted(int a1, int a2, int a3, const void **a4)
{
  int v4; // r5@1
  int v5; // r9@1
  const void **v6; // r6@1
  void *v7; // r0@2
  int v8; // r5@6
  unsigned int *v9; // r1@7
  unsigned int v10; // r0@9
  unsigned int *v11; // r6@15
  unsigned int v12; // r0@17
  void (__fastcall *v13)(int, int, signed int); // r3@22
  char *v14; // r0@24
  unsigned int *v15; // r2@25
  signed int v16; // r1@27
  char *v17; // r0@32
  int *v18; // r0@32
  void *v19; // r0@32
  void *v20; // r0@33
  char *v21; // r0@34
  int v22; // r1@34
  int v23; // r1@34
  int v24; // r3@34
  int v25; // r4@34
  int v26; // r5@34
  int v27; // r6@34
  int v28; // r7@34
  char *v29; // r0@34
  _DWORD *v30; // r0@34
  size_t v31; // r2@34
  void (__fastcall *v32)(int, int, signed int); // r3@38
  void (__fastcall *v33)(int, int, signed int); // r3@42
  void (__fastcall *v34)(int, int, signed int); // r3@45
  int v35; // r4@48
  unsigned int *v36; // r1@49
  unsigned int v37; // r0@51
  unsigned int *v38; // r5@55
  unsigned int v39; // r0@57
  void **v40; // r0@62
  void *v41; // r0@62
  void *v42; // r0@63
  int v43; // r0@64
  int v44; // r0@64
  int v45; // r4@64
  unsigned int *v46; // r2@66
  signed int v47; // r1@68
  unsigned int *v48; // r2@70
  signed int v49; // r1@72
  unsigned int *v50; // r2@74
  signed int v51; // r1@76
  unsigned int *v52; // r2@94
  signed int v53; // r1@96
  unsigned int *v54; // r2@98
  signed int v55; // r1@100
  int v56; // [sp+8h] [bp-148h]@3
  int v57; // [sp+Ch] [bp-144h]@3
  int v58; // [sp+10h] [bp-140h]@3
  void *v59; // [sp+14h] [bp-13Ch]@3
  void *v60; // [sp+18h] [bp-138h]@3
  void *v61; // [sp+1Ch] [bp-134h]@3
  void *v62; // [sp+20h] [bp-130h]@3
  void *v63; // [sp+24h] [bp-12Ch]@3
  void *v64; // [sp+28h] [bp-128h]@3
  void *v65; // [sp+2Ch] [bp-124h]@3
  void *v66; // [sp+30h] [bp-120h]@3
  int v67; // [sp+38h] [bp-118h]@3
  int v68; // [sp+3Ch] [bp-114h]@3
  void *v69; // [sp+40h] [bp-110h]@3
  void *v70; // [sp+44h] [bp-10Ch]@3
  int v71; // [sp+64h] [bp-ECh]@2
  char *v72; // [sp+68h] [bp-E8h]@2
  unsigned __int16 v73; // [sp+6Ch] [bp-E4h]@64
  int v74; // [sp+ACh] [bp-A4h]@62
  int v75; // [sp+B4h] [bp-9Ch]@62
  unsigned __int64 v76[6]; // [sp+B8h] [bp-98h]@34
  int v77; // [sp+E8h] [bp-68h]@34
  int v78; // [sp+ECh] [bp-64h]@34
  int v79; // [sp+F0h] [bp-60h]@34
  int v80; // [sp+F4h] [bp-5Ch]@34
  int v81; // [sp+F8h] [bp-58h]@34
  int v82; // [sp+FCh] [bp-54h]@34
  int v83; // [sp+100h] [bp-50h]@34
  int v84; // [sp+104h] [bp-4Ch]@34
  int v85; // [sp+108h] [bp-48h]@34
  int v86; // [sp+10Ch] [bp-44h]@34
  int v87; // [sp+110h] [bp-40h]@32
  int v88; // [sp+114h] [bp-3Ch]@32
  int v89; // [sp+118h] [bp-38h]@6
  int v90; // [sp+11Ch] [bp-34h]@6
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v91; // [sp+120h] [bp-30h]@6
  int v92; // [sp+124h] [bp-2Ch]@48

  v4 = a2;
  v5 = a1;
  v6 = a4;
  *(_BYTE *)(a1 + 176) = 0;
  if ( a2 )
  {
    v72 = (char *)&unk_28898CC;
    sub_119CAF8((const void **)&v72, *((_DWORD *)*a4 - 3) + 21);
    sub_119C894((const void **)&v72, "Lobby Join FAILED :: ", 0x15u);
    sub_119C8A4((const void **)&v72, v6);
    sub_119C884((void **)&v71, (const char *)&unk_257BC67);
    Social::MultiplayerService::_changeMultiplayerState(v5, 0, (const char **)&v71, 0, (const char **)&v72);
    v7 = (void *)(v71 - 12);
    if ( (int *)(v71 - 12) != &dword_28898C0 )
    {
      v46 = (unsigned int *)(v71 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v47 = __ldrex(v46);
        while ( __strex(v47 - 1, v46) );
      }
      else
        v47 = (*v46)--;
      if ( v47 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v7);
    }
    v56 = 0;
    v57 = 0;
    v58 = 0;
    v59 = &unk_28898CC;
    v60 = &unk_28898CC;
    v61 = &unk_28898CC;
    v62 = &unk_28898CC;
    v63 = &unk_28898CC;
    v64 = &unk_28898CC;
    v65 = &unk_28898CC;
    v66 = &unk_28898CC;
    v67 = 0;
    v68 = 0;
    v69 = &unk_28898CC;
    v70 = &unk_28898CC;
    if ( *(_DWORD *)(v5 + 20) )
      switch ( v4 )
        case 400:
          (*(void (__fastcall **)(int, signed int, int *, _DWORD))(v5 + 24))(v5 + 12, 7, &v56, 0);
          goto LABEL_22;
        case 404:
          goto LABEL_12;
        case 401:
        case 403:
          goto LABEL_20;
        case 402:
          goto LABEL_21;
        default:
          if ( (unsigned int)(v4 - 1007) >= 2 )
          {
            if ( v4 == -2015559670 )
LABEL_20:
              (*(void (__fastcall **)(int, signed int, int *, _DWORD))(v5 + 24))(v5 + 12, 9, &v56, 0);
            else
LABEL_21:
              (*(void (__fastcall **)(_DWORD, signed int, _DWORD, _DWORD))(v5 + 24))(v5 + 12, 8, &v56, 0);
          }
          else
LABEL_12:
            (*(void (__fastcall **)(int, signed int, int *, _DWORD))(v5 + 24))(v5 + 12, 8, &v56, 0);
LABEL_22:
          v13 = *(void (__fastcall **)(int, int, signed int))(v5 + 20);
          if ( v13 )
            v13(v5 + 12, v5 + 12, 3);
            *(_DWORD *)(v5 + 20) = 0;
            *(_DWORD *)(v5 + 24) = 0;
          break;
    Social::MultiplayerGameInfo::~MultiplayerGameInfo((Social::MultiplayerGameInfo *)&v56);
    v14 = v72 - 12;
    if ( (int *)(v72 - 12) != &dword_28898C0 )
      v15 = (unsigned int *)(v72 - 4);
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v14);
    return;
  }
  xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v89);
  xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
    (xbox::services::multiplayer::manager::multiplayer_manager *)&v91,
    v89);
  v8 = v90;
  if ( v90 )
    v9 = (unsigned int *)(v90 + 4);
    if ( &pthread_create )
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
    else
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  v17 = xbox::services::multiplayer::manager::multiplayer_lobby_session::session_reference(v91);
  v18 = (int *)xbox::services::multiplayer::multiplayer_session_reference::session_name((xbox::services::multiplayer::multiplayer_session_reference *)v17);
  sub_119C854(&v87, v18);
  utility::conversions::to_utf8string(&v88, &v87);
  v19 = (void *)(v88 - 12);
  if ( (int *)(v88 - 12) != &dword_28898C0 )
    v48 = (unsigned int *)(v88 - 4);
        v49 = __ldrex(v48);
      while ( __strex(v49 - 1, v48) );
      v49 = (*v48)--;
    if ( v49 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v19);
  v20 = (void *)(v87 - 12);
  if ( (int *)(v87 - 12) != &dword_28898C0 )
    v50 = (unsigned int *)(v87 - 4);
        v51 = __ldrex(v50);
      while ( __strex(v51 - 1, v50) );
      v51 = (*v50)--;
    if ( v51 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v20);
  *(_DWORD *)(v5 + 256) = 100;
  v21 = xbox::services::multiplayer::manager::multiplayer_lobby_session::properties(v91);
  Social::MultiplayerGameInfo::createFromSessionProperties(
    (Social::MultiplayerGameInfo *)v76,
    (const web::json::value *)v21);
  std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::operator=(v5 + 88, v76);
  EntityInteraction::setInteractText((int *)(v5 + 100), (int *)&v76[1] + 1);
  EntityInteraction::setInteractText((int *)(v5 + 104), (int *)&v76[2]);
  EntityInteraction::setInteractText((int *)(v5 + 108), (int *)&v76[2] + 1);
  EntityInteraction::setInteractText((int *)(v5 + 112), (int *)&v76[3]);
  EntityInteraction::setInteractText((int *)(v5 + 116), (int *)&v76[3] + 1);
  EntityInteraction::setInteractText((int *)(v5 + 120), (int *)&v76[4]);
  EntityInteraction::setInteractText((int *)(v5 + 124), (int *)&v76[4] + 1);
  EntityInteraction::setInteractText((int *)(v5 + 128), (int *)&v76[5]);
  v22 = v78;
  *(_DWORD *)(v5 + 136) = v77;
  *(_DWORD *)(v5 + 140) = v22;
  EntityInteraction::setInteractText((int *)(v5 + 144), &v79);
  EntityInteraction::setInteractText((int *)(v5 + 148), &v80);
  v23 = v5 + 152;
  v24 = v82;
  v25 = v83;
  v26 = v84;
  v27 = v85;
  v28 = v86;
  *(_DWORD *)v23 = v81;
  *(_DWORD *)(v23 + 4) = v24;
  *(_DWORD *)(v23 + 8) = v25;
  *(_DWORD *)(v23 + 12) = v26;
  *(_DWORD *)(v23 + 16) = v27;
  *(_DWORD *)(v23 + 20) = v28;
  Social::MultiplayerGameInfo::~MultiplayerGameInfo((Social::MultiplayerGameInfo *)v76);
  v29 = xbox::services::multiplayer::manager::multiplayer_lobby_session::session_reference(v91);
  v30 = *(_DWORD **)xbox::services::multiplayer::multiplayer_session_reference::session_template_name((xbox::services::multiplayer::multiplayer_session_reference *)v29);
  v31 = *(v30 - 3);
  if ( v31 == *(_DWORD *)(dword_27D4E44 - 12) && !memcmp(v30, (const void *)dword_27D4E44, v31) )
    if ( !*(_DWORD *)(v5 + 20) )
      goto LABEL_48;
    (*(void (__fastcall **)(int, signed int, int, _DWORD))(v5 + 24))(v5 + 12, 4, v5 + 88, 0);
    v34 = *(void (__fastcall **)(int, int, signed int))(v5 + 20);
    if ( !v34 )
    v34(v5 + 12, v5 + 12, 3);
    goto LABEL_47;
  if ( *(_QWORD *)(v5 + 136) )
    (*(void (__fastcall **)(_DWORD, signed int, int, _DWORD))(v5 + 24))(v5 + 12, 2, v5 + 88, 0);
    v32 = *(void (__fastcall **)(int, int, signed int))(v5 + 20);
    if ( !v32 )
    v32(v5 + 12, v5 + 12, 3);
  if ( !*(_DWORD *)(*(_DWORD *)(v5 + 144) - 12) )
    sub_119C884((void **)&v75, (const char *)&unk_257BC67);
    v40 = sub_119C884((void **)&v74, (const char *)&unk_257BC67);
    Social::MultiplayerService::_changeMultiplayerState(v5, 6, (const char **)&v75, 0, (const char **)v40);
    v41 = (void *)(v74 - 12);
    if ( (int *)(v74 - 12) != &dword_28898C0 )
      v52 = (unsigned int *)(v74 - 4);
          v53 = __ldrex(v52);
        while ( __strex(v53 - 1, v52) );
        v53 = (*v52)--;
      if ( v53 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v41);
    v42 = (void *)(v75 - 12);
    if ( (int *)(v75 - 12) != &dword_28898C0 )
      v54 = (unsigned int *)(v75 - 4);
          v55 = __ldrex(v54);
        while ( __strex(v55 - 1, v54) );
        v55 = (*v54)--;
      if ( v55 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v42);
    *(_BYTE *)(v5 + 254) = 0;
    v43 = NetworkHandler::getConnector(*(NetworkHandler **)(v5 + 68));
    v44 = (*(int (**)(void))(*(_DWORD *)v43 + 60))();
    Social::MultiplayerGameInfo::getOptimumConnection((Social::MultiplayerGameInfo *)&v73, v5 + 88, v44);
    v45 = v73;
    Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v73);
    if ( v45 != 4 )
      (*(void (**)(void))(**(_DWORD **)(v5 + 72) + 36))();
    goto LABEL_48;
  if ( *(_DWORD *)(v5 + 20) )
    (*(void (__fastcall **)(_DWORD, signed int, _DWORD, _DWORD))(v5 + 24))(v5 + 12, 3, v5 + 88, 0);
    v33 = *(void (__fastcall **)(int, int, signed int))(v5 + 20);
    if ( v33 )
      v33(v5 + 12, v5 + 12, 3);
LABEL_47:
      *(_DWORD *)(v5 + 20) = 0;
      *(_DWORD *)(v5 + 24) = 0;
LABEL_48:
  v35 = v92;
  if ( v92 )
    v36 = (unsigned int *)(v92 + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(v35 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 8))(v35);
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 12))(v35);
}


unsigned int __fastcall Social::XboxLiveUserInfo::_getProfiles(int a1, int a2, __int64 *a3)
{
  int v3; // r10@1
  __int64 *v4; // r6@1
  int v5; // r5@1
  unsigned int v6; // r2@2
  unsigned int *v7; // r0@2
  unsigned int v8; // r3@5
  unsigned int v9; // r7@6
  int v10; // r8@7
  unsigned int *v11; // r4@7
  unsigned int v12; // r1@9
  unsigned int v13; // r1@14
  unsigned int v14; // r0@20
  __int64 v15; // r0@25
  _DWORD *v16; // r2@25
  signed int v17; // r3@25
  _DWORD *v18; // r5@28
  int v19; // r7@28
  _DWORD *v20; // r11@28
  signed int v21; // r0@31
  int v22; // r9@32
  _DWORD *v23; // r0@32
  int v24; // r6@33
  int v25; // r1@34
  int v26; // t1@34
  void *v27; // r0@34
  unsigned int *v28; // r2@37
  signed int v29; // r1@39
  unsigned int v30; // r0@51
  double v31; // r0@53
  unsigned int v32; // r0@53
  int v33; // r7@55
  int *v34; // r6@55
  int v35; // r6@56
  unsigned int *v36; // r1@57
  unsigned int v37; // r0@59
  void *v38; // r6@62
  unsigned int v39; // r8@62
  int v40; // r9@65
  unsigned int *v41; // r2@67
  signed int v42; // r1@69
  int *v43; // r0@75
  int v44; // r0@80
  unsigned int *v45; // r2@81
  unsigned int v46; // r1@83
  unsigned int *v47; // r7@90
  unsigned int v48; // r0@92
  _DWORD *v49; // r7@97
  unsigned int *v50; // r2@99
  signed int v51; // r1@101
  _DWORD *v52; // r6@107
  Social::XboxProfile *v53; // r0@107
  int v54; // r1@107
  void *v55; // r0@107
  bool v56; // zf@109
  _DWORD *v57; // r6@114
  unsigned int *v58; // r2@115
  signed int v59; // r1@117
  int *v60; // r0@123
  unsigned int result; // r0@129
  int v62; // [sp+8h] [bp-90h]@28
  int v63; // [sp+Ch] [bp-8Ch]@49
  int v64; // [sp+10h] [bp-88h]@49
  void *v65; // [sp+14h] [bp-84h]@62
  int v66; // [sp+18h] [bp-80h]@62
  char *v67; // [sp+1Ch] [bp-7Ch]@62
  int v68; // [sp+20h] [bp-78h]@56
  int v69; // [sp+24h] [bp-74h]@56
  int v70; // [sp+28h] [bp-70h]@56
  int v71; // [sp+2Ch] [bp-6Ch]@56
  char v72; // [sp+34h] [bp-64h]@56
  int v73; // [sp+38h] [bp-60h]@56
  int v74; // [sp+3Ch] [bp-5Ch]@56
  int v75; // [sp+40h] [bp-58h]@56
  int v76; // [sp+44h] [bp-54h]@56
  __int16 v77; // [sp+48h] [bp-50h]@56
  void *ptr; // [sp+4Ch] [bp-4Ch]@56
  unsigned int v79; // [sp+50h] [bp-48h]@53
  _DWORD *v80; // [sp+54h] [bp-44h]@53
  int v81; // [sp+58h] [bp-40h]@53
  signed int v82; // [sp+5Ch] [bp-3Ch]@53
  int v83; // [sp+60h] [bp-38h]@53
  int v84; // [sp+64h] [bp-34h]@110
  int v85; // [sp+68h] [bp-30h]@56
  int v86; // [sp+6Ch] [bp-2Ch]@56

  v3 = *(_DWORD *)(a2 + 4);
  v4 = a3;
  v5 = a1;
  if ( !v3 )
    std::__throw_bad_weak_ptr();
  v6 = *(_DWORD *)(v3 + 4);
  v7 = (unsigned int *)(v3 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v6 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v8 = __ldrex(v7);
      if ( v8 == v6 )
        break;
      __clrex();
      v6 = v8;
    }
    v9 = __strex(v6 + 1, v7);
    v6 = v8;
  }
  while ( v9 );
  __dmb();
  v10 = *(_DWORD *)a2;
  v11 = (unsigned int *)(v3 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v12 = __ldrex(v11);
    while ( __strex(v12 + 1, v11) );
  else
    ++*v11;
      v13 = __ldrex(v7);
    while ( __strex(v13 - 1, v7) );
    v13 = (*v7)--;
  if ( v13 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
    if ( &pthread_create )
      do
        v14 = __ldrex(v11);
      while ( __strex(v14 - 1, v11) );
    else
      v14 = (*v11)--;
    if ( v14 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  v15 = *v4;
  v16 = 0;
  v17 = HIDWORD(v15) - v15;
  if ( (HIDWORD(v15) - (signed int)v15) >> 2 )
    if ( (unsigned int)(v17 >> 2) >= 0x40000000 )
      sub_21E57F4();
    v16 = operator new(v17);
    v15 = *v4;
  v62 = v5;
  v18 = v16;
  v19 = std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,std::string *>(
          v15,
          SHIDWORD(v15),
          (int)v16);
  v20 = v18;
  if ( v18 != (_DWORD *)v19 )
    v20 = v18;
      while ( !*(_DWORD *)(*v20 - 12) )
      {
        if ( v20 + 1 != (_DWORD *)v19 )
        {
          v21 = v19 - (_DWORD)(v20 + 1);
          if ( v21 >= 1 )
          {
            v22 = (v21 >> 2) + 1;
            v23 = v20;
            do
            {
              v24 = (int)(v23 + 1);
              xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
                v23,
                v23 + 1);
              --v22;
              v23 = (_DWORD *)v24;
            }
            while ( v22 > 1 );
          }
        }
        v26 = *(_DWORD *)(v19 - 4);
        v19 -= 4;
        v25 = v26;
        v27 = (void *)(v26 - 12);
        if ( (int *)(v26 - 12) != &dword_28898C0 )
          v28 = (unsigned int *)(v25 - 4);
          if ( &pthread_create )
            __dmb();
              v29 = __ldrex(v28);
            while ( __strex(v29 - 1, v28) );
          else
            v29 = (*v28)--;
          if ( v29 <= 0 )
            j_j_j_j__ZdlPv_9(v27);
        if ( v20 == (_DWORD *)v19 )
          goto LABEL_48;
      }
      ++v20;
    while ( (_DWORD *)v19 != v20 );
    v20 = (_DWORD *)v19;
LABEL_48:
  if ( v18 == v20 )
    v80 = 0;
    v81 = 0;
    v82 = 1065353216;
    v83 = 0;
    HIDWORD(v31) = 10;
    LODWORD(v31) = &v82;
    v32 = sub_21E6254(v31);
    v79 = v32;
    if ( v32 == 1 )
      v34 = &v84;
      v84 = 0;
      if ( v32 >= 0x40000000 )
        sub_21E57F4();
      v33 = 4 * v32;
      v34 = (int *)operator new(4 * v32);
      _aeabi_memclr4(v34, v33);
    ptr = v34;
    pplx::get_ambient_scheduler((pplx *)&v85);
    v35 = v86;
    v68 = v85;
    v69 = v86;
    v70 = v85;
    v71 = 0;
    v72 = 0;
    v77 = 0;
    v75 = 0;
    v76 = 0;
    v73 = 0;
    v74 = 0;
    pplx::task_from_result<std::unordered_map<std::string,Social::XboxProfile,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::XboxProfile>>>>(
      v62,
      (int)&ptr,
      (int)&v68);
    if ( v35 )
      v36 = (unsigned int *)(v35 + 4);
      if ( &pthread_create )
        __dmb();
        do
          v37 = __ldrex(v36);
        while ( __strex(v37 - 1, v36) );
      else
        v37 = (*v36)--;
      if ( v37 == 1 )
        v47 = (unsigned int *)(v35 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 8))(v35);
        if ( &pthread_create )
          __dmb();
          do
            v48 = __ldrex(v47);
          while ( __strex(v48 - 1, v47) );
        else
          v48 = (*v47)--;
        if ( v48 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 12))(v35);
    v49 = v80;
    while ( v49 )
      v52 = v49;
      v53 = (Social::XboxProfile *)(v49 + 2);
      v49 = (_DWORD *)*v49;
      Social::XboxProfile::~XboxProfile(v53);
      v54 = v52[1];
      v55 = (void *)(v54 - 12);
      if ( (int *)(v54 - 12) != &dword_28898C0 )
        v50 = (unsigned int *)(v54 - 4);
            v51 = __ldrex(v50);
          while ( __strex(v51 - 1, v50) );
          v51 = (*v50)--;
        if ( v51 <= 0 )
          j_j_j_j__ZdlPv_9(v55);
      operator delete(v52);
    _aeabi_memclr4(ptr, 4 * v79);
    v56 = ptr == 0;
    if ( ptr )
      v56 = &v84 == ptr;
    if ( !v56 )
      operator delete(ptr);
    v63 = v10;
    v64 = v3;
        v30 = __ldrex(v11);
      while ( __strex(v30 + 1, v11) );
      ++*v11;
    v38 = 0;
    v65 = 0;
    v66 = 0;
    v39 = (v19 - (signed int)v18) >> 2;
    v67 = 0;
    if ( v39 )
      if ( v39 >= 0x40000000 )
      v38 = operator new(v19 - (_DWORD)v18);
    v65 = v38;
    v67 = (char *)v38 + 4 * v39;
    v40 = std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,std::string *>(
            (int)v18,
            v19,
            (int)v38);
    v66 = v40;
    sub_138DD48(v62, (int)&v63);
    if ( v38 != (void *)v40 )
        v43 = (int *)(*(_DWORD *)v38 - 12);
        if ( v43 != &dword_28898C0 )
          v41 = (unsigned int *)(*(_DWORD *)v38 - 4);
              v42 = __ldrex(v41);
            while ( __strex(v42 - 1, v41) );
            v42 = (*v41)--;
          if ( v42 <= 0 )
            j_j_j_j__ZdlPv_9(v43);
        v38 = (char *)v38 + 4;
      while ( v38 != (void *)v40 );
      v38 = v65;
    if ( v38 )
      operator delete(v38);
    v44 = v64;
    if ( v64 )
      v45 = (unsigned int *)(v64 + 8);
          v46 = __ldrex(v45);
        while ( __strex(v46 - 1, v45) );
        v46 = (*v45)--;
      if ( v46 == 1 )
        (*(void (**)(void))(*(_DWORD *)v44 + 12))();
  if ( v18 != v20 )
    v57 = v18;
      v60 = (int *)(*v57 - 12);
      if ( v60 != &dword_28898C0 )
        v58 = (unsigned int *)(*v57 - 4);
            v59 = __ldrex(v58);
          while ( __strex(v59 - 1, v58) );
          v59 = (*v58)--;
        if ( v59 <= 0 )
          j_j_j_j__ZdlPv_9(v60);
      ++v57;
    while ( v57 != v20 );
  if ( v18 )
    operator delete(v18);
      result = __ldrex(v11);
    while ( __strex(result - 1, v11) );
    result = (*v11)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  return result;
}


char *__fastcall Social::UserManager::registerSignOutHandler(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r4@1
  void (__fastcall *v5)(int); // r3@2
  char *result; // r0@4

  v2 = a1;
  v3 = a2;
  v4 = *(_QWORD *)(a1 + 24);
  if ( v4 == *(_QWORD *)(a1 + 24) >> 32 )
  {
    result = j_j_j__ZNSt6vectorISt8functionIFviEESaIS2_EE19_M_emplace_back_auxIJRKS2_EEEvDpOT_((_QWORD *)(a1 + 20), a2);
  }
  else
    *(_DWORD *)(v4 + 8) = 0;
    v5 = *(void (__fastcall **)(int))(a2 + 8);
    if ( v5 )
    {
      v5(v4);
      *(_DWORD *)(v4 + 12) = *(_DWORD *)(v3 + 12);
      *(_DWORD *)(v4 + 8) = *(_DWORD *)(v3 + 8);
      v4 = *(_DWORD *)(v2 + 24);
    }
    result = (char *)(v4 + 16);
    *(_DWORD *)(v2 + 24) = v4 + 16;
  return result;
}


int __fastcall Social::MultiplayerServiceManager::isInviteEnabled(int a1, int a2)
{
  Social::MultiplayerService **v2; // r5@1
  Social::MultiplayerService **v3; // r6@1
  int v4; // r4@1
  int v5; // r7@2
  signed int v6; // r1@4

  v2 = (Social::MultiplayerService **)(*(_QWORD *)a1 >> 32);
  v3 = (Social::MultiplayerService **)*(_QWORD *)a1;
  v4 = a2;
  if ( v3 == v2 )
  {
LABEL_4:
    v6 = 0;
  }
  else
    while ( 1 )
    {
      v5 = (int)(v3 + 1);
      a1 = Social::MultiplayerService::getServiceId(*v3);
      if ( a1 == v4 )
        break;
      ++v3;
      if ( v2 == (Social::MultiplayerService **)v5 )
        goto LABEL_4;
    }
    a1 = (*(int (**)(void))(*(_DWORD *)*v3 + 68))();
    v6 = 1;
  return a1 & v6;
}


signed int __fastcall Social::Events::HttpTelemetry::getEventTagsFilter(Social::Events::HttpTelemetry *this)
{
  return 5;
}


void __fastcall Social::MultiplayerGameInfo::createFromSessionProperties(Social::MultiplayerGameInfo *this, const web::json::value *a2)
{
  Social::MultiplayerGameInfo::createFromSessionProperties(this, a2);
}


int __fastcall Social::GameConnectionInfo::GameConnectionInfo(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35)
{
  int v35; // r5@1
  signed int v36; // r0@1
  signed __int16 v37; // r1@1
  char *v38; // r0@3
  int v40; // [sp+2Ch] [bp-Ch]@1
  int v41; // [sp+30h] [bp-8h]@1
  int v42; // [sp+34h] [bp-4h]@1

  v35 = a1;
  v40 = a2;
  v41 = a3;
  v42 = a4;
  v36 = RakNet::SystemAddress::GetIPVersion((RakNet::SystemAddress *)&v40);
  v37 = 1;
  if ( v36 == 6 )
    v37 = 2;
  *(_WORD *)v35 = v37;
  v38 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v40, 0, 124);
  sub_DA7364((void **)(v35 + 4), v38);
  sub_DA7364((void **)(v35 + 8), (const char *)&unk_257BC67);
  *(_DWORD *)(v35 + 12) = RakNet::SystemAddress::GetPort((RakNet::SystemAddress *)&v40);
  sub_DA7364((void **)(v35 + 16), (const char *)&unk_257BC67);
  ThirdPartyInfo::ThirdPartyInfo(v35 + 20, a35);
  return v35;
}


_BOOL4 __fastcall Social::XboxLiveUserInfo::isUserOnFriendList(int a1, int **a2)
{
  return std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
           (unsigned __int64 *)(a1 + 20),
           a2) != 0;
}


unsigned int *__fastcall Social::XboxLiveUserManager::_updateUserFriendWithXuid(int a1, int **a2, int a3)
{
  int v3; // r5@1
  unsigned int *result; // r0@1
  int v5; // r4@1
  unsigned int v6; // r1@2
  unsigned int *v7; // r0@2
  unsigned int v8; // r2@5
  unsigned int v9; // r3@6
  int v10; // r1@7
  bool v11; // zf@7
  signed int v12; // r2@10
  unsigned int v13; // r1@15
  unsigned int *v14; // r5@19
  unsigned int v15; // r0@21
  unsigned int *v16; // r2@27
  unsigned int v17; // r1@29
  int v18; // [sp+0h] [bp-18h]@1
  int v19; // [sp+4h] [bp-14h]@1

  v3 = a3;
  result = Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v18, a1, a2);
  v5 = v19;
  if ( v19 )
  {
    v6 = *(_DWORD *)(v19 + 4);
    v7 = (unsigned int *)(v19 + 4);
    while ( v6 )
    {
      __dmb();
      v8 = __ldrex(v7);
      if ( v8 == v6 )
      {
        v9 = __strex(v6 + 1, v7);
        v6 = v8;
        if ( !v9 )
        {
          __dmb();
          v10 = *v7;
          v11 = *v7 == 0;
          if ( *v7 )
          {
            v10 = v18;
            v11 = v18 == 0;
          }
          if ( !v11 )
            v12 = 2;
            if ( v3 )
              v12 = 1;
            *(_DWORD *)(v10 + 32) = v12;
          if ( &pthread_create )
            __dmb();
            do
              v13 = __ldrex(v7);
            while ( __strex(v13 - 1, v7) );
          else
            v13 = (*v7)--;
          if ( v13 == 1 )
            v14 = (unsigned int *)(v5 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
            if ( &pthread_create )
            {
              __dmb();
              do
                v15 = __ldrex(v14);
              while ( __strex(v15 - 1, v14) );
            }
            else
              v15 = (*v14)--;
            if ( v15 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
          break;
        }
      }
      else
        __clrex();
    }
    result = (unsigned int *)v19;
    if ( v19 )
      v16 = (unsigned int *)(v19 + 8);
      if ( &pthread_create )
        __dmb();
        do
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        result = (unsigned int *)(*(int (**)(void))(*result + 12))();
  }
  return result;
}


Json::Value *__fastcall Social::Events::EventManager::getCommonProperty(int a1, int a2, int **a3)
{
  int v3; // r5@1
  int *v4; // r4@1
  int v5; // r0@1
  int v6; // r6@1
  Json::Value *result; // r0@2

  v3 = a1;
  v4 = (int *)a3;
  v5 = j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a2 + 40),
         a3);
  v6 = v5;
  if ( v5 )
  {
    sub_21E8AF4((int *)v3, (int *)(v5 + 16));
    result = j_Json::Value::Value((Json::Value *)(v3 + 8), (const Json::Value *)(v6 + 24));
  }
  else
    sub_21E8AF4((int *)v3, v4);
    result = (Json::Value *)j_Json::Value::Value((Json::Value *)(v3 + 8), 0);
  return result;
}


Social::User *__fastcall Social::User::User(Social::User *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  Social::User *v8; // r5@1
  int v9; // r2@1
  unsigned int *v10; // r2@2
  unsigned int v11; // r7@4
  int v12; // r7@7
  int v13; // r1@7

  v8 = this;
  *(_DWORD *)this = &off_26DEB90;
  *((_DWORD *)this + 1) = a2;
  *((_DWORD *)this + 2) = a3;
  *((_DWORD *)this + 3) = a8;
  *((_DWORD *)this + 4) = a5;
  *((_BYTE *)this + 20) = 0;
  *((_DWORD *)this + 6) = *(_DWORD *)a7;
  v9 = *(_DWORD *)(a7 + 4);
  *((_DWORD *)this + 7) = v9;
  if ( v9 )
  {
    v10 = (unsigned int *)(v9 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v11 = __ldrex(v10);
      while ( __strex(v11 + 1, v10) );
    }
    else
      ++*v10;
  }
  *((_DWORD *)this + 8) = 0;
  *((_DWORD *)this + 9) = *(_DWORD *)a6;
  *((_DWORD *)this + 10) = 0;
  v12 = *(_DWORD *)(a6 + 4);
  *(_DWORD *)(a6 + 4) = 0;
  *((_DWORD *)this + 10) = v12;
  *(_DWORD *)a6 = 0;
  *((_DWORD *)this + 11) = &unk_28898CC;
  *((_DWORD *)this + 12) = *(_DWORD *)a4;
  *((_DWORD *)this + 13) = 0;
  v13 = *(_DWORD *)(a4 + 4);
  *(_DWORD *)(a4 + 4) = 0;
  *((_DWORD *)this + 13) = v13;
  *(_DWORD *)a4 = 0;
  Social::User::updateSettingsPathAndLoad(this);
  return v8;
}


void __fastcall Social::XboxLiveUserManager::getProfiles(double a1, int a2)
{
  Social::XboxLiveUserManager::getProfiles(a1, a2);
}


int __fastcall Social::MultiplayerXBL::isMutedPlayer(int a1, int **a2)
{
  int **v2; // r4@1
  int v3; // r0@1
  int v4; // r4@1
  int v5; // r5@1
  unsigned int *v6; // r1@2
  unsigned int v7; // r0@4
  unsigned int *v8; // r6@8
  unsigned int v9; // r0@10
  Social::User *v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v2 = a2;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v11, *(_DWORD *)(a1 + 44));
  v3 = Social::User::getLiveUser(v11);
  v4 = Social::XboxLiveUserManager::isMutedPlayer(v3, v2);
  v5 = v12;
  if ( v12 )
  {
    v6 = (unsigned int *)(v12 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  }
  return v4;
}


int __fastcall Social::Events::AggregationEventListener::AggregationEventListener(__int64 this)
{
  int v1; // r4@1
  double v2; // r0@1
  int v3; // r7@3
  void *v4; // r6@3
  unsigned int v5; // r0@4
  int v6; // r7@6
  void *v7; // r6@6
  int v8; // r12@7
  int v9; // r2@7
  int v11; // [sp+0h] [bp-20h]@7

  v1 = this;
  *(_DWORD *)this = &off_2719E18;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 1065353216;
  *(_DWORD *)(this + 24) = 0;
  LODWORD(this) = this + 20;
  v2 = COERCE_DOUBLE(__PAIR__(10, sub_21E6254(*(double *)&this)));
  *(_DWORD *)(v1 + 8) = LODWORD(v2);
  if ( LODWORD(v2) == 1 )
  {
    *(_DWORD *)(v1 + 28) = 0;
    v4 = (void *)(v1 + 28);
  }
  else
    if ( LODWORD(v2) >= 0x40000000 )
      sub_21E57F4();
    v3 = 4 * LODWORD(v2);
    v4 = j_operator new(4 * LODWORD(v2));
    j___aeabi_memclr4_0((int)v4, v3);
  *(_DWORD *)(v1 + 4) = v4;
  *(_DWORD *)(v1 + 40) = 0;
  *(_DWORD *)(v1 + 44) = 0;
  *(_DWORD *)(v1 + 48) = 1065353216;
  LODWORD(v2) = v1 + 48;
  *(_DWORD *)(LODWORD(v2) + 4) = 0;
  v5 = sub_21E6254(v2);
  *(_DWORD *)(v1 + 36) = v5;
  if ( v5 == 1 )
    *(_DWORD *)(v1 + 56) = 0;
    v7 = (void *)(v1 + 56);
    if ( v5 >= 0x40000000 )
    v6 = 4 * v5;
    v7 = j_operator new(4 * v5);
    j___aeabi_memclr4_0((int)v7, v6);
  v8 = v1 + 60;
  *(_DWORD *)(v1 + 32) = v7;
  *(_DWORD *)(v1 + 92) = 0;
  *(_DWORD *)v8 = 0;
  *(_DWORD *)(v8 + 4) = 20;
  *(_DWORD *)(v8 + 8) = 100;
  v9 = v1 + 72;
  *(_DWORD *)v9 = 20;
  *(_DWORD *)(v9 + 4) = 60;
  *(_DWORD *)(v9 + 8) = 300;
  *(_DWORD *)(v1 + 84) = 60;
  *(_DWORD *)(v1 + 88) = 0;
  sub_21E034C(&v11);
  *(_QWORD *)(v1 + 88) = *(_QWORD *)&v11;
  return v1;
}


pthread_mutex_t *__fastcall Social::XboxLiveUserInfo::_OnSignOut(Social::XboxLiveUserInfo *this)
{
  Social::XboxLiveUserInfo *v1; // r11@1
  double v2; // r0@1
  unsigned int v3; // r0@1
  int v4; // r6@3
  int *v5; // r5@3
  _DWORD *v6; // r5@4
  unsigned int *v7; // r2@6
  signed int v8; // r1@8
  _DWORD *v9; // r6@14
  Social::XboxProfile *v10; // r0@14
  int v11; // r1@14
  void *v12; // r0@14
  __int64 v13; // kr00_8@19
  _DWORD *v14; // r6@20
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  int *v17; // r0@29
  pthread_mutex_t *v18; // r0@31
  bool v19; // zf@31
  pthread_mutex_t *result; // r0@37
  bool v21; // zf@37
  void *ptr; // [sp+4h] [bp-54h]@4
  unsigned int v23; // [sp+8h] [bp-50h]@1
  _DWORD *v24; // [sp+Ch] [bp-4Ch]@1
  int v25; // [sp+10h] [bp-48h]@1
  signed int v26; // [sp+14h] [bp-44h]@1
  int v27; // [sp+18h] [bp-40h]@1
  int v28; // [sp+1Ch] [bp-3Ch]@17
  pthread_mutex_t *mutex; // [sp+20h] [bp-38h]@1
  unsigned __int8 v30; // [sp+24h] [bp-34h]@1
  pthread_mutex_t *v31; // [sp+28h] [bp-30h]@1
  unsigned __int8 v32; // [sp+2Ch] [bp-2Ch]@1

  v1 = this;
  v31 = (pthread_mutex_t *)((char *)this + 60);
  mutex = (pthread_mutex_t *)((char *)this + 64);
  v32 = 0;
  v30 = 0;
  j__ZSt4lockISt11unique_lockISt5mutexES2_JEEvRT_RT0_DpRT1_(&v31, (int)&mutex);
  v24 = 0;
  v25 = 0;
  v26 = 1065353216;
  v27 = 0;
  LODWORD(v2) = &v26;
  v3 = sub_21E6254(v2);
  v23 = v3;
  if ( v3 == 1 )
  {
    v5 = &v28;
    v28 = 0;
  }
  else
    if ( v3 >= 0x40000000 )
      sub_21E57F4();
    v4 = 4 * v3;
    v5 = (int *)operator new(4 * v3);
    _aeabi_memclr4(v5, v4);
  ptr = v5;
  *((_BYTE *)v1 + 16) = 0;
  std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_move_assign(
    (int)v1 + 20,
    (int)&ptr);
  v6 = v24;
  while ( v6 )
    v9 = v6;
    v10 = (Social::XboxProfile *)(v6 + 2);
    v6 = (_DWORD *)*v6;
    Social::XboxProfile::~XboxProfile(v10);
    v11 = v9[1];
    v12 = (void *)(v11 - 12);
    if ( (int *)(v11 - 12) != &dword_28898C0 )
    {
      v7 = (unsigned int *)(v11 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 <= 0 )
        j_j_j_j__ZdlPv_9(v12);
    }
    operator delete(v9);
  _aeabi_memclr4(ptr, 4 * v23);
  if ( ptr && &v28 != ptr )
    operator delete(ptr);
  v13 = *((_QWORD *)v1 + 6);
  if ( HIDWORD(v13) != (_DWORD)v13 )
    v14 = (_DWORD *)v13;
    do
      v17 = (int *)(*v14 - 12);
      if ( v17 != &dword_28898C0 )
        v15 = (unsigned int *)(*v14 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 <= 0 )
          j_j_j_j__ZdlPv_9(v17);
      ++v14;
    while ( v14 != (_DWORD *)HIDWORD(v13) );
  *((_DWORD *)v1 + 13) = v13;
  v18 = (pthread_mutex_t *)v30;
  v19 = v30 == 0;
  if ( v30 )
    v18 = mutex;
    v19 = mutex == 0;
  if ( !v19 )
    if ( &pthread_create )
      pthread_mutex_unlock(v18);
    v30 = 0;
  result = (pthread_mutex_t *)v32;
  v21 = v32 == 0;
  if ( v32 )
    result = v31;
    v21 = v31 == 0;
  if ( !v21 )
      pthread_mutex_unlock(result);
    result = 0;
    v32 = 0;
  return result;
}


Social::XboxLiveUserProfileData *__fastcall Social::XboxLiveUserProfileData::~XboxLiveUserProfileData(Social::XboxLiveUserProfileData *this)
{
  Social::XboxLiveUserProfileData *v1; // r5@1
  void *v2; // r0@1
  int v3; // r1@3
  void *v4; // r0@3
  int v5; // r1@4
  void *v6; // r0@4
  int v7; // r1@5
  void *v8; // r0@5
  int v9; // r1@6
  void *v10; // r0@6
  int *v11; // r0@7
  unsigned int *v13; // r2@9
  signed int v14; // r1@11
  unsigned int *v15; // r2@13
  signed int v16; // r1@15
  unsigned int *v17; // r2@17
  signed int v18; // r1@19
  unsigned int *v19; // r2@21
  signed int v20; // r1@23
  unsigned int *v21; // r2@25
  signed int v22; // r1@27

  v1 = this;
  Social::XboxProfile::~XboxProfile((Social::XboxLiveUserProfileData *)((char *)this + 56));
  v2 = (void *)*((_DWORD *)v1 + 11);
  if ( v2 )
    operator delete(v2);
  v3 = *((_DWORD *)v1 + 4);
  v4 = (void *)(v3 - 12);
  if ( (int *)(v3 - 12) != &dword_28898C0 )
  {
    v13 = (unsigned int *)(v3 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
    }
    else
      v14 = (*v13)--;
    if ( v14 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v4);
  }
  v5 = *((_DWORD *)v1 + 3);
  v6 = (void *)(v5 - 12);
  if ( (int *)(v5 - 12) != &dword_28898C0 )
    v15 = (unsigned int *)(v5 - 4);
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v6);
  v7 = *((_DWORD *)v1 + 2);
  v8 = (void *)(v7 - 12);
  if ( (int *)(v7 - 12) != &dword_28898C0 )
    v17 = (unsigned int *)(v7 - 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
      v18 = (*v17)--;
    if ( v18 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v8);
  v9 = *((_DWORD *)v1 + 1);
  v10 = (void *)(v9 - 12);
  if ( (int *)(v9 - 12) != &dword_28898C0 )
    v19 = (unsigned int *)(v9 - 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 - 1, v19) );
      v20 = (*v19)--;
    if ( v20 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v10);
  v11 = (int *)(*(_DWORD *)v1 - 12);
  if ( v11 != &dword_28898C0 )
    v21 = (unsigned int *)(*(_DWORD *)v1 - 4);
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
      v22 = (*v21)--;
    if ( v22 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v11);
  return v1;
}


void __fastcall Social::Events::AggregationEventListener::~AggregationEventListener(Social::Events::AggregationEventListener *this)
{
  Social::Events::AggregationEventListener *v1; // r4@1
  char *v2; // r5@1
  char *v3; // r0@1
  char *v4; // r0@4

  v1 = this;
  *(_DWORD *)this = &off_2719E18;
  v2 = (char *)this + 56;
  j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)this + 32);
  v3 = (char *)*((_DWORD *)v1 + 8);
  if ( v3 && v2 != v3 )
    j_operator delete(v3);
  j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v1 + 4);
  v4 = (char *)*((_DWORD *)v1 + 1);
  if ( v4 && (char *)v1 + 28 != v4 )
    j_operator delete(v4);
  j_j_j__ZdlPv_7((void *)v1);
}


Social::MultiplayerService **__fastcall Social::MultiplayerServiceManager::RegisterServiceList(Social::MultiplayerService ***a1, int a2)
{
  Social::MultiplayerService ***v2; // r4@1
  Social::MultiplayerService **v3; // r0@1
  Social::MultiplayerService **v4; // r0@1
  Social::MultiplayerService **v5; // r0@1
  Social::MultiplayerService **v6; // r5@1
  Social::MultiplayerService *v7; // t1@3
  Social::MultiplayerService **result; // r0@2

  v2 = a1;
  v3 = *a1;
  *v2 = *(Social::MultiplayerService ***)a2;
  *(_DWORD *)a2 = v3;
  v4 = v2[1];
  v2[1] = *(Social::MultiplayerService ***)(a2 + 4);
  *(_DWORD *)(a2 + 4) = v4;
  v5 = v2[2];
  v2[2] = *(Social::MultiplayerService ***)(a2 + 8);
  *(_DWORD *)(a2 + 8) = v5;
  v6 = *v2;
  while ( 1 )
  {
    result = v2[1];
    if ( v6 == result )
      break;
    v7 = *v6;
    ++v6;
    Social::MultiplayerService::setServiceManager(v7, (Social::MultiplayerServiceManager *)v2);
  }
  return result;
}


Social::Events::HttpTelemetry *__fastcall Social::Events::HttpTelemetry::~HttpTelemetry(Social::Events::HttpTelemetry *this)
{
  Social::Events::HttpTelemetry *v1; // r4@1
  TaskGroup **v2; // r6@1
  unsigned __int64 v3; // r2@1
  TaskGroup *v4; // r0@2
  int v5; // r1@3
  void *v6; // r0@3
  int v7; // r1@4
  void *v8; // r0@4
  int v9; // r1@5
  void *v10; // r0@5
  unsigned int *v12; // r2@7
  signed int v13; // r1@9
  unsigned int *v14; // r2@11
  signed int v15; // r1@13
  unsigned int *v16; // r2@15
  signed int v17; // r1@17

  v1 = this;
  *(_DWORD *)this = &off_2719E38;
  v2 = (TaskGroup **)((char *)this + 4408);
  j_TaskGroup::flush(*((TaskGroup **)this + 1102));
  if ( *v2 )
  {
    v4 = j_TaskGroup::~TaskGroup(*v2);
    j_operator delete((void *)v4);
  }
  *v2 = 0;
  *((_DWORD *)v1 + 29) = &off_26D66C4;
  *((_DWORD *)v1 + 1068) = &off_26D66EC;
  *((_DWORD *)v1 + 31) = &off_26D66D8;
  j_Core::FileStdStreamBuf::~FileStdStreamBuf(
    (Social::Events::HttpTelemetry *)((char *)v1 + 128),
    (int)&off_26D66EC,
    v3);
  *((_DWORD *)v1 + 29) = &off_26D670C;
  *((_DWORD *)v1 + 1068) = &off_26D6720;
  *((_DWORD *)v1 + 30) = 0;
  sub_21B6560((_DWORD *)v1 + 1068);
  v5 = *((_DWORD *)v1 + 28);
  v6 = (void *)(v5 - 12);
  if ( (int *)(v5 - 12) != &dword_28898C0 )
    v12 = (unsigned int *)(v5 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
    }
    else
      v13 = (*v12)--;
    if ( v13 <= 0 )
      j_j_j_j__ZdlPv_9(v6);
  v7 = *((_DWORD *)v1 + 27);
  v8 = (void *)(v7 - 12);
  if ( (int *)(v7 - 12) != &dword_28898C0 )
    v14 = (unsigned int *)(v7 - 4);
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j__ZdlPv_9(v8);
  v9 = *((_DWORD *)v1 + 26);
  v10 = (void *)(v9 - 12);
  if ( (int *)(v9 - 12) != &dword_28898C0 )
    v16 = (unsigned int *)(v9 - 4);
        v17 = __ldrex(v16);
      while ( __strex(v17 - 1, v16) );
      v17 = (*v16)--;
    if ( v17 <= 0 )
      j_j_j_j__ZdlPv_9(v10);
  j_Social::Events::AggregationEventListener::~AggregationEventListener(v1);
  return v1;
}


void __fastcall Social::ClientConnectionState::toJson(Social::ClientConnectionState *this, web::json::value *a2)
{
  Social::ClientConnectionState::toJson(this, a2);
}


int (**__fastcall Social::MultiplayerService::_buildGameList(Social::MultiplayerService *this))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  Social::MultiplayerService *v1; // r4@1
  int v2; // r0@3
  __int64 v3; // r6@4
  Social::MultiplayerGameInfo *v4; // r0@5
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@9
  __int64 v6; // r6@12
  Social::MultiplayerGameInfo *v7; // r0@13

  v1 = this;
  if ( (*(int (**)(void))(*(_DWORD *)this + 196))() )
  {
    if ( !&pthread_create || (v2 = pthread_mutex_lock((pthread_mutex_t *)((char *)v1 + 248))) == 0 )
    {
      v3 = *((_QWORD *)v1 + 29);
      if ( HIDWORD(v3) != (_DWORD)v3 )
      {
        v4 = (Social::MultiplayerGameInfo *)v3;
        do
          v4 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v4) + 88);
        while ( (Social::MultiplayerGameInfo *)HIDWORD(v3) != v4 );
      }
      *((_DWORD *)v1 + 59) = v3;
      if ( &pthread_create )
        pthread_mutex_unlock((pthread_mutex_t *)((char *)v1 + 248));
      return (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))(*(int (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v1 + 180))(v1);
    }
LABEL_18:
    sub_21E5E14(v2);
  }
  if ( &pthread_create )
    v2 = pthread_mutex_lock((pthread_mutex_t *)((char *)v1 + 244));
    if ( v2 )
      goto LABEL_18;
  v6 = *(_QWORD *)((char *)v1 + 220);
  if ( HIDWORD(v6) != (_DWORD)v6 )
    v7 = (Social::MultiplayerGameInfo *)v6;
    do
      v7 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v7) + 88);
    while ( (Social::MultiplayerGameInfo *)HIDWORD(v6) != v7 );
  *((_DWORD *)v1 + 56) = v6;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock((pthread_mutex_t *)((char *)v1 + 244));
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::_notifyXboxUserBlocked(int a1, int *a2)
{
  int v2; // r5@1
  int *v3; // r6@1
  int v4; // r8@1
  unsigned int v5; // r1@2
  unsigned int *v6; // r0@2
  unsigned int v7; // r2@5
  unsigned int v8; // r3@6
  int v9; // r7@7
  unsigned int *v10; // r4@7
  unsigned int v11; // r1@9
  unsigned int v12; // r1@14
  unsigned int v13; // r0@20
  unsigned int v14; // r0@27
  void *v15; // r6@30
  unsigned int *v16; // r0@31
  unsigned int v17; // r1@33
  __int64 v18; // r1@36
  void *v19; // r0@38
  unsigned int *v20; // r2@40
  unsigned int v21; // r1@42
  unsigned int result; // r0@49
  unsigned int *v23; // r2@55
  signed int v24; // r1@57
  int v25; // [sp+8h] [bp-30h]@30
  void *v26; // [sp+Ch] [bp-2Ch]@36
  void (*v27)(void); // [sp+14h] [bp-24h]@30

  v2 = a1;
  v3 = a2;
  v4 = *(_DWORD *)(a1 + 12);
  if ( !v4 )
    std::__throw_bad_weak_ptr();
  v5 = *(_DWORD *)(v4 + 4);
  v6 = (unsigned int *)(v4 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v5 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v7 = __ldrex(v6);
      if ( v7 == v5 )
        break;
      __clrex();
      v5 = v7;
    }
    v8 = __strex(v5 + 1, v6);
    v5 = v7;
  }
  while ( v8 );
  __dmb();
  v9 = *(_DWORD *)(v2 + 8);
  v10 = (unsigned int *)(v4 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v11 = __ldrex(v10);
    while ( __strex(v11 + 1, v10) );
  else
    ++*v10;
      v12 = __ldrex(v6);
    while ( __strex(v12 - 1, v6) );
    v12 = (*v6)--;
  if ( v12 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
    if ( &pthread_create )
      do
        v13 = __ldrex(v10);
      while ( __strex(v13 - 1, v10) );
    else
      v13 = (*v10)--;
    if ( v13 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
      v14 = __ldrex(v10);
    while ( __strex(v14 + 1, v10) );
  sub_119C854(&v25, v3);
  v27 = 0;
  v15 = operator new(0xCu);
  *(_DWORD *)v15 = v9;
  *((_DWORD *)v15 + 1) = v4;
  if ( v4 )
    v16 = (unsigned int *)(v4 + 8);
        v17 = __ldrex(v16);
      while ( __strex(v17 + 1, v16) );
      ++*v16;
  sub_119C854((int *)v15 + 2, &v25);
  LODWORD(v18) = sub_106BCF8;
  v26 = v15;
  HIDWORD(v18) = sub_106BB4C;
  *(_QWORD *)&v27 = v18;
  MPMCQueue<std::function<void ()(void)>>::push(v2 + 168, (int)&v26);
  if ( v27 )
    v27();
  v19 = (void *)(v25 - 12);
  if ( (int *)(v25 - 12) != &dword_28898C0 )
    v23 = (unsigned int *)(v25 - 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v19);
    v20 = (unsigned int *)(v4 + 8);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 == 1 )
      (*(void (**)(void))(*(_DWORD *)v4 + 12))();
      result = __ldrex(v10);
    while ( __strex(result - 1, v10) );
    result = (*v10)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  return result;
}


signed int __fastcall Social::XboxLiveUserProfileData::boolToRelationshipStatus(Social::XboxLiveUserProfileData *this, bool a2)
{
  signed int v2; // r1@1

  v2 = 2;
  if ( this )
    v2 = 1;
  return v2;
}


char *__fastcall Social::XboxLiveUserManager::registerSignInHandler(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r4@1
  void (__fastcall *v5)(int); // r3@2
  char *result; // r0@4

  v2 = a1;
  v3 = a2;
  v4 = *(_QWORD *)(a1 + 228);
  if ( v4 == *(_QWORD *)(a1 + 228) >> 32 )
  {
    result = j_j_j__ZNSt6vectorISt8functionIFvvEESaIS2_EE19_M_emplace_back_auxIJRKS2_EEEvDpOT_((_QWORD *)(a1 + 224), a2);
  }
  else
    *(_DWORD *)(v4 + 8) = 0;
    v5 = *(void (__fastcall **)(int))(a2 + 8);
    if ( v5 )
    {
      v5(v4);
      *(_DWORD *)(v4 + 12) = *(_DWORD *)(v3 + 12);
      *(_DWORD *)(v4 + 8) = *(_DWORD *)(v3 + 8);
      v4 = *(_DWORD *)(v2 + 228);
    }
    result = (char *)(v4 + 16);
    *(_DWORD *)(v2 + 228) = v4 + 16;
  return result;
}


void __fastcall Social::MultiplayerXBL::setInviteHandle(int a1, int *a2, int a3)
{
  int v3; // r9@1
  int v4; // r6@1
  int *v5; // r5@1
  int v6; // r0@2
  void *v7; // r0@2
  web::json::value *v8; // r0@5
  _QWORD *v9; // r0@5
  _QWORD *v10; // r5@5
  __int64 v11; // r0@5
  char *v12; // r6@5
  unsigned int v13; // r4@5
  void *v14; // r0@8
  const void **v15; // r0@9
  int *v16; // r0@9
  void *v17; // r0@9
  int v18; // r5@10
  int v19; // r7@10
  unsigned int *v20; // r2@12
  signed int v21; // r1@14
  int v22; // r0@20
  int *v23; // r0@22
  _DWORD *v24; // r0@29
  __int64 v25; // r6@29
  char *v26; // r0@31
  void *v27; // r0@32
  unsigned int *v28; // r2@34
  signed int v29; // r1@36
  unsigned int *v30; // r2@38
  signed int v31; // r1@40
  unsigned int *v32; // r2@42
  signed int v33; // r1@44
  unsigned int *v34; // r2@58
  signed int v35; // r1@60
  unsigned int *v36; // r2@62
  signed int v37; // r1@64
  char *v38; // [sp+8h] [bp-70h]@29
  _DWORD *v39; // [sp+Ch] [bp-6Ch]@29
  void (*v40)(void); // [sp+14h] [bp-64h]@29
  int v41; // [sp+20h] [bp-58h]@9
  int v42; // [sp+28h] [bp-50h]@5
  char *v43; // [sp+2Ch] [bp-4Ch]@5
  char *v44; // [sp+30h] [bp-48h]@5
  char *v45; // [sp+34h] [bp-44h]@5
  char v46; // [sp+38h] [bp-40h]@8
  int v47; // [sp+3Ch] [bp-3Ch]@2
  int v48; // [sp+40h] [bp-38h]@2
  int v49; // [sp+44h] [bp-34h]@2
  int v50; // [sp+48h] [bp-30h]@2
  int v51; // [sp+4Ch] [bp-2Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  utility::conversions::to_string_t(&v51, a2);
  if ( v4 == 1 )
  {
    v49 = 0;
    sub_119E6EC();
    v50 = v6;
    utility::conversions::to_string_t(&v47, v5);
    web::json::value::parse((web::json::value *)&v48, &v47, &v49);
    v7 = (void *)(v47 - 12);
    if ( (int *)(v47 - 12) != &dword_28898C0 )
    {
      v32 = (unsigned int *)(v47 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v33 = __ldrex(v32);
        while ( __strex(v33 - 1, v32) );
      }
      else
        v33 = (*v32)--;
      if ( v33 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v7);
    }
    if ( !v49 && web::json::value::type((web::json::value *)&v48) == 3 )
      sub_119C884((void **)&v42, "invite_handle");
      v8 = (web::json::value *)web::json::value::operator[]((int)&v48);
      v9 = (_QWORD *)web::json::value::as_object(v8);
      v10 = v9;
      v11 = *v9;
      v12 = 0;
      v43 = 0;
      v44 = 0;
      v45 = 0;
      v13 = (HIDWORD(v11) - (signed int)v11) >> 3;
      if ( v13 )
        if ( v13 >= 0x20000000 )
          sub_119C874();
        v12 = (char *)operator new(HIDWORD(v11) - v11);
        v11 = *v10;
      v43 = v12;
      v44 = v12;
      v45 = &v12[8 * v13];
      v44 = (char *)std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::pair<std::string,web::json::value> const*,std::vector<std::pair<std::string,web::json::value>,std::allocator<std::pair<std::string,web::json::value>>>>,std::pair<std::string,web::json::value>*>(
                      (const web::json::value *)v11,
                      (const web::json::value *)HIDWORD(v11),
                      (int)v12);
      v46 = *((_BYTE *)v10 + 12);
      v14 = (void *)(v42 - 12);
      if ( (int *)(v42 - 12) != &dword_28898C0 )
        v34 = (unsigned int *)(v42 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v35 = __ldrex(v34);
          while ( __strex(v35 - 1, v34) );
        }
        else
          v35 = (*v34)--;
        if ( v35 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v14);
      sub_119C884((void **)&v41, "id");
      v15 = web::json::object::operator[]((int)&v43, (const void **)&v41);
      v16 = (int *)web::json::value::as_string((web::json::value *)v15);
      EntityInteraction::setInteractText(&v51, v16);
      v17 = (void *)(v41 - 12);
      if ( (int *)(v41 - 12) != &dword_28898C0 )
        v36 = (unsigned int *)(v41 - 4);
            v37 = __ldrex(v36);
          while ( __strex(v37 - 1, v36) );
          v37 = (*v36)--;
        if ( v37 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v17);
      v19 = (int)v44;
      v18 = (int)v43;
      if ( v43 != v44 )
          v22 = *(_DWORD *)(v18 + 4);
          if ( v22 )
            (*(void (**)(void))(*(_DWORD *)v22 + 96))();
          *(_DWORD *)(v18 + 4) = 0;
          v23 = (int *)(*(_DWORD *)v18 - 12);
          if ( v23 != &dword_28898C0 )
          {
            v20 = (unsigned int *)(*(_DWORD *)v18 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v21 = __ldrex(v20);
              while ( __strex(v21 - 1, v20) );
            }
            else
              v21 = (*v20)--;
            if ( v21 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v23);
          }
          v18 += 8;
        while ( v18 != v19 );
        v18 = (int)v43;
      if ( v18 )
        operator delete((void *)v18);
    if ( v48 )
      (*(void (**)(void))(*(_DWORD *)v48 + 96))();
  }
  sub_119C854((int *)&v38, &v51);
  v40 = 0;
  v24 = operator new(8u);
  HIDWORD(v25) = sub_100F334;
  LODWORD(v25) = sub_100F4A8;
  *v24 = v3;
  v24[1] = v38;
  v38 = (char *)&unk_28898CC;
  v39 = v24;
  *(_QWORD *)&v40 = v25;
  MPMCQueue<std::function<void ()(void)>>::push(v3 + 316, (int)&v39);
  if ( v40 )
    v40();
  v26 = v38 - 12;
  if ( (int *)(v38 - 12) != &dword_28898C0 )
    v28 = (unsigned int *)(v38 - 4);
    if ( &pthread_create )
      __dmb();
      do
        v29 = __ldrex(v28);
      while ( __strex(v29 - 1, v28) );
    else
      v29 = (*v28)--;
    if ( v29 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v26);
  v27 = (void *)(v51 - 12);
  if ( (int *)(v51 - 12) != &dword_28898C0 )
    v30 = (unsigned int *)(v51 - 4);
        v31 = __ldrex(v30);
      while ( __strex(v31 - 1, v30) );
      v31 = (*v30)--;
    if ( v31 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
}


unsigned int __fastcall Social::XboxLiveUserManager::muteUser(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  int *v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  void *v11; // r9@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  __int64 v16; // kr00_8@25
  unsigned int *v17; // r1@26
  unsigned int v18; // r2@28
  char *v19; // r0@31
  unsigned int v20; // r0@33
  void (__fastcall *v21)(int *, int, signed int); // r3@36
  int v22; // r5@38
  unsigned int *v23; // r1@39
  unsigned int v24; // r0@41
  unsigned int *v25; // r6@45
  unsigned int v26; // r0@47
  void *v27; // r0@54
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  void *v31; // r6@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int result; // r0@93
  unsigned int *v41; // r2@99
  signed int v42; // r1@101
  void *v43; // [sp+0h] [bp-50h]@31
  int v44; // [sp+4h] [bp-4Ch]@31
  int v45; // [sp+8h] [bp-48h]@36
  int v46; // [sp+Ch] [bp-44h]@37
  int v47; // [sp+10h] [bp-40h]@38
  int v48; // [sp+14h] [bp-3Ch]@36
  int v49; // [sp+18h] [bp-38h]@37
  char v50; // [sp+1Ch] [bp-34h]@31
  void *v51; // [sp+20h] [bp-30h]@38
  char v52; // [sp+24h] [bp-2Ch]@38
  int v53; // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(void **)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_QWORD *)(v3 + 144);
  if ( HIDWORD(v16) )
    v17 = (unsigned int *)(HIDWORD(v16) + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
      ++*v17;
  v19 = xbox::services::xbox_live_context::privacy_service((xbox::services::xbox_live_context *)v16);
  xbox::services::privacy::privacy_service::mute_user((int)&v50, (int)v19, v6);
  v43 = v11;
  v44 = v5;
      v20 = __ldrex(v12);
    while ( __strex(v20 + 1, v12) );
  sub_119C854(&v45, v6);
  v48 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  if ( v21 )
    v21(&v46, v4, 2);
    v49 = *(_DWORD *)(v4 + 12);
    v48 = *(_DWORD *)(v4 + 8);
  sub_1037FA8((int)&v52, (int)&v50, (int)&v43, (int)v21, v43, v44, v45, v46, v47, v48, v49, *(int *)&v50, v51);
  v22 = v53;
  if ( v53 )
    v23 = (unsigned int *)(v53 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
      }
      else
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  if ( v48 )
    ((void (*)(void))v48)();
  v27 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v45 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
  v28 = v44;
  if ( v44 )
    v29 = (unsigned int *)(v44 + 8);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 == 1 )
      (*(void (**)(void))(*(_DWORD *)v28 + 12))();
  v31 = v51;
  if ( v51 )
    v32 = (unsigned int *)((char *)v51 + 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      v34 = (unsigned int *)((char *)v31 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
    v36 = (unsigned int *)(HIDWORD(v16) + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(HIDWORD(v16) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 8))(HIDWORD(v16));
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 12))(HIDWORD(v16));
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


const char *__fastcall Social::GameConnectionInfo::typeAsString(Social::GameConnectionInfo *this)
{
  unsigned __int16 v1; // r0@1
  const char *result; // r0@2

  v1 = *(_WORD *)this + 1;
  if ( v1 > 6u )
    result = "UKNOWN";
  else
    result = off_26E7500[(signed __int16)v1];
  return result;
}


RakNet *__fastcall Social::MultiplayerService::onEnterLevel(Social::MultiplayerService *this, Social::User *a2, Level *a3)
{
  Social::MultiplayerService *v3; // r6@1
  Social::User *v4; // r5@1
  Level *v5; // r4@1
  int v6; // r0@8
  void (__fastcall *v7)(Social::MultiplayerService *); // r1@10
  void **v8; // r0@11
  void *v9; // r0@11
  void *v10; // r0@12
  void (__fastcall *v11)(Social::MultiplayerService *, int *); // r7@13
  void *v12; // r0@13
  int v13; // r9@14
  void *v14; // r0@15
  void *v15; // r0@16
  int *v16; // r0@17
  void **v17; // r0@18
  void *v18; // r0@18
  void *v19; // r0@19
  RakNet *result; // r0@23
  unsigned int *v21; // r2@25
  signed int v22; // r1@27
  unsigned int *v23; // r2@29
  signed int v24; // r1@31
  unsigned int *v25; // r2@33
  signed int v26; // r1@35
  unsigned int *v27; // r2@37
  signed int v28; // r1@39
  unsigned int *v29; // r2@41
  signed int v30; // r1@43
  unsigned int *v31; // r2@57
  signed int v32; // r1@59
  unsigned int *v33; // r2@61
  signed int v34; // r1@63
  char v35; // [sp+8h] [bp-100h]@22
  int v36; // [sp+14h] [bp-F4h]@16
  int v37; // [sp+18h] [bp-F0h]@15
  int v38; // [sp+20h] [bp-E8h]@13
  int v39; // [sp+28h] [bp-E0h]@11
  int v40; // [sp+30h] [bp-D8h]@11
  int v41; // [sp+38h] [bp-D0h]@18
  int v42; // [sp+40h] [bp-C8h]@18
  char v43; // [sp+48h] [bp-C0h]@16
  RakNet *v44; // [sp+E4h] [bp-24h]@1

  v3 = this;
  v4 = a2;
  v5 = a3;
  v44 = _stack_chk_guard;
  if ( Social::User::isPrimaryUser(a2) == 1 )
  {
    *((_BYTE *)v3 + 253) = 0;
    if ( !*((_DWORD *)v3 + 8) && Level::getPrimaryLocalPlayer(v5) )
      *((_DWORD *)v3 + 8) = v5;
    if ( !*((_BYTE *)v3 + 176) )
    {
      if ( Level::isClientSide(v5) == 1 )
      {
        *((_BYTE *)v3 + 176) = 0;
      }
      else
        v6 = (*(int (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v3 + 116))(v3);
        *((_BYTE *)v3 + 176) = v6 ^ 1;
        if ( !v6 )
        {
          (*(void (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v3 + 112))(v3);
          sub_21E94B4((void **)&v42, (const char *)&unk_257BC67);
          v17 = sub_21E94B4((void **)&v41, (const char *)&unk_257BC67);
          Social::MultiplayerService::_changeMultiplayerState((int)v3, 1, (const char **)&v42, 0, (const char **)v17);
          v18 = (void *)(v41 - 12);
          if ( (int *)(v41 - 12) != &dword_28898C0 )
          {
            v27 = (unsigned int *)(v41 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v28 = __ldrex(v27);
              while ( __strex(v28 - 1, v27) );
            }
            else
              v28 = (*v27)--;
            if ( v28 <= 0 )
              j_j_j_j__ZdlPv_9(v18);
          }
          v19 = (void *)(v42 - 12);
          if ( (int *)(v42 - 12) != &dword_28898C0 )
            v29 = (unsigned int *)(v42 - 4);
                v30 = __ldrex(v29);
              while ( __strex(v30 - 1, v29) );
              v30 = (*v29)--;
            if ( v30 <= 0 )
              j_j_j_j__ZdlPv_9(v19);
          goto LABEL_20;
        }
      if ( (*(int (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v3 + 116))(v3) == 1 )
        v7 = *(void (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v3 + 192);
LABEL_21:
        v7(v3);
LABEL_22:
        *((_BYTE *)v3 + 28) = 1;
        sub_21E034C(&v35);
        *((_QWORD *)v3 + 34) = *(_QWORD *)&v35;
        *((_BYTE *)v3 + 36) = 1;
        goto LABEL_23;
      sub_21E94B4((void **)&v40, (const char *)&unk_257BC67);
      v8 = sub_21E94B4((void **)&v39, (const char *)&unk_257BC67);
      Social::MultiplayerService::_changeMultiplayerState((int)v3, 10, (const char **)&v40, 0, (const char **)v8);
      v9 = (void *)(v39 - 12);
      if ( (int *)(v39 - 12) != &dword_28898C0 )
        v21 = (unsigned int *)(v39 - 4);
        if ( &pthread_create )
          __dmb();
          do
            v22 = __ldrex(v21);
          while ( __strex(v22 - 1, v21) );
        else
          v22 = (*v21)--;
        if ( v22 <= 0 )
          j_j_j_j__ZdlPv_9(v9);
      v10 = (void *)(v40 - 12);
      if ( (int *)(v40 - 12) != &dword_28898C0 )
        v23 = (unsigned int *)(v40 - 4);
            v24 = __ldrex(v23);
          while ( __strex(v24 - 1, v23) );
          v24 = (*v23)--;
        if ( v24 <= 0 )
          j_j_j_j__ZdlPv_9(v10);
      v11 = *(void (__fastcall **)(Social::MultiplayerService *, int *))(*(_DWORD *)v3 + 184);
      sub_21E94B4((void **)&v38, "Connected");
      v11(v3, &v38);
      v12 = (void *)(v38 - 12);
      if ( (int *)(v38 - 12) != &dword_28898C0 )
        v25 = (unsigned int *)(v38 - 4);
            v26 = __ldrex(v25);
          while ( __strex(v26 - 1, v25) );
          v26 = (*v25)--;
        if ( v26 <= 0 )
          j_j_j_j__ZdlPv_9(v12);
      v13 = (*(int (**)(void))(**((_DWORD **)v3 + 18) + 32))();
      if ( ThirdPartyInfo::isValid((ThirdPartyInfo *)(v13 + 20)) != 1 )
        goto LABEL_22;
      *((_DWORD *)v3 + 39) = 137;
      Common::getGameVersionStringNet((Common *)&v37);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
        (int *)v3 + 32,
        &v37);
      v14 = (void *)(v37 - 12);
      if ( (int *)(v37 - 12) != &dword_28898C0 )
        v31 = (unsigned int *)(v37 - 4);
            v32 = __ldrex(v31);
          while ( __strex(v32 - 1, v31) );
          v32 = (*v31)--;
        if ( v32 <= 0 )
          j_j_j_j__ZdlPv_9(v14);
      NetworkHandler::getServerId((NetworkHandler *)&v43, *((_DWORD *)v3 + 17));
      NetworkIdentifier::toString((NetworkIdentifier *)&v36, (int)&v43);
        (int *)v3 + 29,
        &v36);
      v15 = (void *)(v36 - 12);
      if ( (int *)(v36 - 12) != &dword_28898C0 )
        v33 = (unsigned int *)(v36 - 4);
            v34 = __ldrex(v33);
          while ( __strex(v34 - 1, v33) );
          v34 = (*v33)--;
        if ( v34 <= 0 )
          j_j_j_j__ZdlPv_9(v15);
      v16 = (int *)ThirdPartyInfo::getCreatorId((ThirdPartyInfo *)(v13 + 20));
      EntityInteraction::setInteractText((int *)v3 + 36, v16);
      EntityInteraction::setInteractText((int *)v3 + 37, (int *)(v13 + 4));
      *((_DWORD *)v3 + 38) = *(_DWORD *)(v13 + 12);
LABEL_20:
      v7 = *(void (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v3 + 220);
      goto LABEL_21;
    }
  }
LABEL_23:
  (*(void (__fastcall **)(Social::MultiplayerService *, Social::User *, Level *))(*(_DWORD *)v3 + 216))(v3, v4, v5);
  result = (RakNet *)(_stack_chk_guard - v44);
  if ( _stack_chk_guard != v44 )
    _stack_chk_fail(result);
  return result;
}


int __fastcall Social::UserManager::removeUser(Social::UserManager *this, int a2)
{
  Social::UserManager *v2; // r5@1
  int v3; // r4@1
  __int64 v4; // r0@1
  int v5; // r7@2
  int *v6; // r0@3
  int v7; // r6@5
  int (__fastcall *v8)(int, _DWORD **); // r7@7
  _DWORD *v9; // r0@7
  __int64 v10; // r1@7
  _DWORD *v12; // [sp+4h] [bp-24h]@7
  __int64 v13; // [sp+Ch] [bp-1Ch]@7

  v2 = this;
  v3 = a2;
  v4 = *((_QWORD *)this + 1);
  if ( (_DWORD)v4 != HIDWORD(v4) )
  {
    v5 = *((_DWORD *)v2 + 11);
    if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
      v6 = (int *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
    else
      v6 = (int *)&ServiceLocator<AppPlatform>::mDefaultService;
    v7 = *v6;
    if ( v5 == v3 )
    {
      LODWORD(v4) = (*(int (__fastcall **)(int, signed int))(*(_DWORD *)v7 + 16))(*v6, 1);
    }
      v8 = *(int (__fastcall **)(int, _DWORD **))(*(_DWORD *)v7 + 348);
      v9 = operator new(8u);
      LODWORD(v10) = sub_102809C;
      *v9 = v2;
      v9[1] = v3;
      HIDWORD(v10) = sub_1027D48;
      v12 = v9;
      v13 = v10;
      LODWORD(v4) = v8(v7, &v12);
      if ( (_DWORD)v13 )
        LODWORD(v4) = ((int (*)(void))v13)();
  }
  return v4;
}


void __fastcall Social::MultiplayerXBL::_findOrCreateRealmLobby(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL::_findOrCreateRealmLobby(this);
}


void __fastcall Social::UserManager::signInFailed(int a1, Social::User **a2)
{
  Social::UserManager::signInFailed(a1, a2);
}


int __fastcall Social::XboxLiveUserManager::_getUserProfileDataWithGamertag(int a1, int a2, int **a3, int a4)
{
  unsigned __int64 *v4; // r10@1
  int *v5; // r6@1
  int v6; // r9@1
  int v7; // r5@1
  int v8; // r0@1
  int result; // r0@2
  unsigned int v10; // r1@5
  int v11; // r7@7
  unsigned int v12; // r1@8
  unsigned int *v13; // r0@8
  unsigned int v14; // r2@11
  unsigned int v15; // r3@12
  int v16; // r8@13
  int v17; // r5@13
  unsigned int *v18; // r1@20
  unsigned int v19; // r0@22
  unsigned int *v20; // r4@26
  unsigned int v21; // r0@28
  int v22; // r4@33
  unsigned int *v23; // r1@34
  unsigned int v24; // r0@36
  unsigned int *v25; // r7@40
  unsigned int v26; // r0@42
  int v27; // r4@48
  int v28; // r6@48
  unsigned int v29; // r1@52
  unsigned int *v30; // r1@56
  unsigned int *v31; // r7@62
  unsigned int *v32; // r4@71
  unsigned int v33; // r0@73
  unsigned int *v34; // r1@76
  int v35; // [sp+4h] [bp-2Ch]@19
  int v36; // [sp+8h] [bp-28h]@19

  v4 = (unsigned __int64 *)(a2 + 52);
  v5 = (int *)a3;
  v6 = a1;
  v7 = a4;
  v8 = std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a2 + 52),
         a3);
  if ( v8 )
  {
    *(_DWORD *)v6 = *(_DWORD *)(v8 + 8);
    result = *(_DWORD *)(v8 + 12);
    *(_DWORD *)(v6 + 4) = result;
    if ( result )
    {
      result += 8;
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex((unsigned int *)result);
        while ( __strex(v10 + 1, (unsigned int *)result) );
      }
      else
        ++*(_DWORD *)result;
    }
  }
  else
    v11 = *(_DWORD *)(v7 + 4);
    if ( !v11 )
      goto LABEL_19;
    v12 = *(_DWORD *)(v11 + 4);
    v13 = (unsigned int *)(v11 + 4);
    do
      while ( 1 )
        if ( !v12 )
        {
          v11 = 0;
          goto LABEL_19;
        }
        v14 = __ldrex(v13);
        if ( v14 == v12 )
          break;
        __clrex();
        v12 = v14;
      v15 = __strex(v12 + 1, v13);
      v12 = v14;
    while ( v15 );
    __dmb();
    v16 = v11;
    v17 = *(_DWORD *)v7;
    if ( !*(_DWORD *)(v11 + 4) )
      v17 = *(_DWORD *)(v11 + 4);
    if ( !v17 )
LABEL_19:
      j__ZNSt12__shared_ptrIN6Social23XboxLiveUserProfileDataELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS1_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)&v35);
      v16 = v36;
      v17 = v35;
      v35 = 0;
      v36 = 0;
      if ( v11 )
        v18 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
          __dmb();
          do
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
        else
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v11 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          if ( &pthread_create )
          {
            __dmb();
            do
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
          }
          else
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
      v22 = v36;
      if ( v36 )
        v23 = (unsigned int *)(v36 + 4);
            v24 = __ldrex(v23);
          while ( __strex(v24 - 1, v23) );
          v24 = (*v23)--;
        if ( v24 == 1 )
          v25 = (unsigned int *)(v22 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
      EntityInteraction::setInteractText((int *)(v17 + 4), v5);
    result = std::__detail::_Map_base<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>,true>::operator[](
               v4,
               (int **)v5);
    v27 = result;
    *(_DWORD *)result = v17;
    v28 = *(_DWORD *)(result + 4);
    if ( v16 != v28 )
      if ( v16 )
        result = v16 + 4;
            v29 = __ldrex((unsigned int *)result);
          while ( __strex(v29 + 1, (unsigned int *)result) );
          v28 = *(_DWORD *)(v27 + 4);
          ++*(_DWORD *)result;
      if ( v28 )
        v30 = (unsigned int *)(v28 + 4);
            result = __ldrex(v30);
          while ( __strex(result - 1, v30) );
          result = (*v30)--;
        if ( result == 1 )
          v31 = (unsigned int *)(v28 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
              result = __ldrex(v31);
            while ( __strex(result - 1, v31) );
            result = (*v31)--;
          if ( result == 1 )
            result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
      *(_DWORD *)(v27 + 4) = v16;
    *(_DWORD *)v6 = v17;
    *(_DWORD *)(v6 + 4) = v16;
    if ( v16 )
      v32 = (unsigned int *)(v16 + 8);
          v33 = __ldrex(v32);
        while ( __strex(v33 + 1, v32) );
        ++*v32;
      v34 = (unsigned int *)(v16 + 4);
          result = __ldrex(v34);
        while ( __strex(result - 1, v34) );
        result = (*v34)--;
      if ( result == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
            result = __ldrex(v32);
          while ( __strex(result - 1, v32) );
          result = (*v32)--;
          result = (*(int (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  return result;
}


void __fastcall Social::User::~User(Social::User *this)
{
  Social::User::~User(this);
}


int __fastcall Social::MultiplayerServiceManager::isPlayerOnline(unsigned __int64 *a1, int a2, int a3)
{
  Social::MultiplayerService **v3; // r4@1
  Social::MultiplayerService **v4; // r6@1
  int v5; // r5@1
  int v6; // r7@2
  int result; // r0@4

  v4 = (Social::MultiplayerService **)(*a1 >> 32);
  v3 = (Social::MultiplayerService **)*a1;
  v5 = a3;
  if ( v3 == v4 )
  {
LABEL_4:
    result = 0;
  }
  else
    while ( 1 )
    {
      v6 = (int)(v3 + 1);
      if ( Social::MultiplayerService::getServiceId(*v3) == v5 )
        break;
      ++v3;
      if ( v4 == (Social::MultiplayerService **)v6 )
        goto LABEL_4;
    }
    result = (*(int (**)(void))(*(_DWORD *)*v3 + 76))() & 1;
  return result;
}


void __fastcall Social::InviteUriListener::onUri(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  unsigned int v4; // r10@1
  __int64 v5; // kr00_8@1
  unsigned int v6; // r4@1
  int v7; // r7@1
  int v8; // r8@2
  _DWORD *v9; // r9@2
  int v10; // r5@2
  _DWORD *v11; // r1@4
  size_t v12; // r2@4
  int v13; // r6@6
  int v14; // r4@8
  unsigned int *v15; // r2@17
  signed int v16; // r1@19
  int v17; // [sp+4h] [bp-34h]@2
  void *s1; // [sp+Ch] [bp-2Ch]@1

  v2 = a2;
  v3 = a1;
  sub_119C884(&s1, "handle");
  v4 = sub_119C9A4((int *)s1, *((_DWORD *)s1 - 3), -955291385);
  v5 = *(_QWORD *)(v2 + 4);
  v6 = v4 % (unsigned int)(*(_QWORD *)(v2 + 4) >> 32);
  v7 = *(_DWORD *)(v5 + 4 * v6);
  if ( v7 )
  {
    v8 = *(_DWORD *)v7;
    v9 = s1;
    v17 = v3;
    v10 = *(_DWORD *)(*(_DWORD *)v7 + 12);
    while ( 1 )
    {
      if ( v10 == v4 )
      {
        v11 = *(_DWORD **)(v8 + 4);
        v12 = *(v9 - 3);
        if ( v12 == *(v11 - 3) && !memcmp(v9, v11, v12) )
          break;
      }
      v13 = *(_DWORD *)v8;
      if ( *(_DWORD *)v8 )
        v10 = *(_DWORD *)(v13 + 12);
        v7 = v8;
        v8 = *(_DWORD *)v8;
        if ( *(_DWORD *)(v13 + 12) % HIDWORD(v5) == v6 )
          continue;
      goto LABEL_8;
    }
    if ( !v7 )
LABEL_8:
      v14 = 0;
      goto LABEL_9;
    v14 = *(_DWORD *)v7;
LABEL_9:
    v3 = v17;
  }
  else
    v14 = 0;
  if ( v9 - 3 != &dword_28898C0 )
    v15 = v9 - 1;
    if ( &pthread_create )
      __dmb();
      do
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
    else
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v9 - 3);
  if ( v14 )
    Social::MultiplayerServiceManager::setInviteHandle(*(unsigned __int64 **)(v3 + 4), v14 + 8, 0, 0);
}


void __fastcall Social::Events::Event::addProperty<double>(int a1, int *a2, int a3)
{
  Social::Events::Event::addProperty<double>(a1, a2, a3);
}


char *__fastcall Social::XboxLiveUserManager::addObserver(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  __int64 v4; // r0@1
  char *result; // r0@2
  void *v6; // r8@3
  unsigned int v7; // r2@3
  unsigned int v8; // r1@5
  unsigned int v9; // r6@5
  char *v10; // r7@11
  char *v11; // r5@13
  int v12; // r5@15

  v2 = a2;
  v3 = a1;
  *(_DWORD *)(a2 + 4) = a1 + 344;
  v4 = *(_QWORD *)(a1 + 352);
  if ( (_DWORD)v4 == HIDWORD(v4) )
  {
    v6 = *(void **)(v3 + 348);
    v7 = ((signed int)v4 - (signed int)v6) >> 2;
    if ( !v7 )
      v7 = 1;
    HIDWORD(v4) = v7 + (((signed int)v4 - (signed int)v6) >> 2);
    v9 = v7 + (((signed int)v4 - (signed int)v6) >> 2);
    if ( 0 != HIDWORD(v4) >> 30 )
      v9 = 0x3FFFFFFF;
    if ( v8 < v7 )
    if ( v9 )
    {
      if ( v9 >= 0x40000000 )
        sub_119C874();
      v10 = (char *)operator new(4 * v9);
      LODWORD(v4) = *(_QWORD *)(v3 + 348) >> 32;
      v6 = (void *)*(_QWORD *)(v3 + 348);
    }
    else
      v10 = 0;
    *(_DWORD *)&v10[v4 - (_DWORD)v6] = v2;
    v11 = &v10[v4 - (_DWORD)v6];
    if ( 0 != ((signed int)v4 - (signed int)v6) >> 2 )
      _aeabi_memmove4(v10, v6);
    v12 = (int)(v11 + 4);
    if ( v6 )
      operator delete(v6);
    result = &v10[4 * v9];
    *(_DWORD *)(v3 + 348) = v10;
    *(_DWORD *)(v3 + 352) = v12;
    *(_DWORD *)(v3 + 356) = result;
  }
  else
    *(_DWORD *)v4 = v2;
    result = (char *)(*(_DWORD *)(v3 + 352) + 4);
    *(_DWORD *)(v3 + 352) = result;
  return result;
}


signed int __fastcall Social::Events::AggregationEventListener::_needToSendAggregatedEvents(Social::Events::AggregationEventListener *this)
{
  unsigned int v2; // r0@1
  signed int result; // r0@3
  int v9; // [sp+0h] [bp-10h]@4

  _R4 = this;
  v2 = *((_DWORD *)this + 15);
  if ( v2 )
  {
    if ( v2 <= *((_DWORD *)_R4 + 18) )
    {
      sub_21E034C(&v9);
      _R0 = j___aeabi_l2d(v9 - *((_DWORD *)_R4 + 22), (*(_QWORD *)&v9 - *((_QWORD *)_R4 + 11)) >> 32);
      __asm
      {
        VLDR            S0, [R4,#0x54]
        VMOV            D2, R0, R1
        VLDR            D1, =1.0e-9
      }
      result = 0;
        VCVT.F64.U32    D0, S0
        VMUL.F64        D1, D2, D1
        VCMPE.F64       D1, D0
        VMRS            APSR_nzcv, FPSCR
      if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
        result = 1;
    }
    else
      result = 1;
  }
  else
    result = 0;
  return result;
}


RakNet *__fastcall Social::MultiplayerXBL::setRealmGameInfo(Social::MultiplayerXBL *this, Level *a2)
{
  Social::MultiplayerXBL *v2; // r4@1
  const Realms::World *v3; // r0@1
  int v4; // r0@1
  void *v5; // r0@1
  int v6; // r6@2
  unsigned int *v7; // r1@3
  unsigned int v8; // r0@5
  unsigned int *v9; // r7@9
  unsigned int v10; // r0@11
  void *v11; // r0@16
  void *v12; // r0@17
  void *v13; // r0@18
  RakNet *result; // r0@19
  unsigned int *v15; // r2@21
  signed int v16; // r1@23
  unsigned int *v17; // r2@25
  signed int v18; // r1@27
  unsigned int *v19; // r2@29
  signed int v20; // r1@31
  unsigned int *v21; // r2@33
  signed int v22; // r1@35
  int v23; // [sp+0h] [bp-118h]@18
  int v24; // [sp+4h] [bp-114h]@17
  int v25; // [sp+8h] [bp-110h]@16
  Social::User *v26; // [sp+Ch] [bp-10Ch]@1
  int v27; // [sp+10h] [bp-108h]@2
  int v28; // [sp+14h] [bp-104h]@1
  char v29; // [sp+18h] [bp-100h]@1
  int v30; // [sp+24h] [bp-F4h]@17
  int v31; // [sp+2Ch] [bp-ECh]@16
  int v32; // [sp+3Ch] [bp-DCh]@19
  int v33; // [sp+44h] [bp-D4h]@16
  int v34; // [sp+50h] [bp-C8h]@19
  int v35; // [sp+54h] [bp-C4h]@19
  char v36; // [sp+68h] [bp-B0h]@18
  RakNet *v37; // [sp+100h] [bp-18h]@1

  v2 = this;
  v37 = _stack_chk_guard;
  v3 = (const Realms::World *)(*(int (**)(void))(*(_DWORD *)this + 120))();
  Realms::World::World((Realms::World *)&v29, v3);
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v26, *((_DWORD *)v2 + 11));
  v4 = Social::User::getLiveUser(v26);
  Social::XboxLiveUserManager::getCurrentGamertag((Social::XboxLiveUserManager *)&v28, v4);
  xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
    (int *)v2 + 26,
    &v28);
  v5 = (void *)(v28 - 12);
  if ( (int *)(v28 - 12) != &dword_28898C0 )
  {
    v15 = (unsigned int *)(v28 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
    }
    else
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v5);
  }
  v6 = v27;
  if ( v27 )
    v7 = (unsigned int *)(v27 + 4);
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
      v8 = (*v7)--;
    if ( v8 == 1 )
      v9 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  EntityInteraction::setInteractText((int *)v2 + 25, &v31);
  GameTypeConv::gameTypeToNonLocString((void **)&v25, v33);
    (int *)v2 + 31,
    &v25);
  v11 = (void *)(v25 - 12);
  if ( (int *)(v25 - 12) != &dword_28898C0 )
    v17 = (unsigned int *)(v25 - 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
      v18 = (*v17)--;
    if ( v18 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v11);
  EntityInteraction::setInteractText((int *)v2 + 30, &v30);
  *((_DWORD *)v2 + 39) = 137;
  Common::getGameVersionStringNet((Common *)&v24);
    (int *)v2 + 32,
    &v24);
  v12 = (void *)(v24 - 12);
  if ( (int *)(v24 - 12) != &dword_28898C0 )
    v19 = (unsigned int *)(v24 - 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 - 1, v19) );
      v20 = (*v19)--;
    if ( v20 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v12);
  *((_QWORD *)v2 + 17) = *(_QWORD *)&v29;
  NetworkHandler::getServerId((NetworkHandler *)&v36, *((_DWORD *)v2 + 17));
  NetworkIdentifier::toString((NetworkIdentifier *)&v23, (int)&v36);
    (int *)v2 + 29,
    &v23);
  v13 = (void *)(v23 - 12);
  if ( (int *)(v23 - 12) != &dword_28898C0 )
    v21 = (unsigned int *)(v23 - 4);
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
      v22 = (*v21)--;
    if ( v22 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v13);
  *((_DWORD *)v2 + 41) = -1431655765 * ((v35 - v34) >> 3);
  *((_DWORD *)v2 + 40) = v32;
  Realms::World::~World((Realms::World *)&v29);
  result = (RakNet *)(_stack_chk_guard - v37);
  if ( _stack_chk_guard != v37 )
    _stack_chk_fail(result);
  return result;
}


int __fastcall Social::GameConnectionInfo::GameConnectionInfo(int a1, __int16 a2, int *a3, int a4, int a5)
{
  int v5; // r5@1
  int v6; // r7@1
  void **v7; // r6@1

  v5 = a1;
  v6 = a4;
  *(_WORD *)a1 = a2;
  v7 = (void **)(a1 + 8);
  sub_DA73B4((int *)(a1 + 4), a3);
  sub_DA7364(v7, (const char *)&unk_257BC67);
  *(_DWORD *)(v5 + 12) = v6;
  sub_DA7364((void **)(v5 + 16), (const char *)&unk_257BC67);
  ThirdPartyInfo::ThirdPartyInfo(v5 + 20, a5);
  return v5;
}


int __fastcall Social::MultiplayerServiceManager::ClearRegisteredServices(int result)
{
  int v1; // r4@1
  __int64 v2; // kr00_8@1
  int *v3; // r5@2

  v1 = result;
  v2 = *(_QWORD *)result;
  if ( HIDWORD(v2) != (_DWORD)v2 )
  {
    v3 = (int *)v2;
    do
    {
      result = *v3;
      if ( *v3 )
        result = (*(int (**)(void))(*(_DWORD *)result + 4))();
      *v3 = 0;
      ++v3;
    }
    while ( (int *)HIDWORD(v2) != v3 );
  }
  *(_DWORD *)(v1 + 4) = v2;
  return result;
}


__int64 *__fastcall Social::MultiplayerServiceManager::showPlayerProfile(__int64 *result, int a2, __int64 *a3)
{
  __int64 v3; // r6@1
  __int64 *i; // r4@1

  v3 = *result;
  for ( i = a3; HIDWORD(v3) != (_DWORD)v3; LODWORD(v3) = v3 + 4 )
  {
    result = (__int64 *)Social::MultiplayerService::getServiceId(*(Social::MultiplayerService **)v3);
    if ( result == i )
      result = (__int64 *)(*(int (**)(void))(**(_DWORD **)v3 + 80))();
  }
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::addFriend(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  int *v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  void *v11; // r9@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  __int64 v16; // kr00_8@25
  unsigned int *v17; // r1@26
  unsigned int v18; // r2@28
  char *v19; // r0@31
  unsigned int v20; // r0@33
  void (__fastcall *v21)(int *, int, signed int); // r3@36
  int v22; // r5@38
  unsigned int *v23; // r1@39
  unsigned int v24; // r0@41
  unsigned int *v25; // r6@45
  unsigned int v26; // r0@47
  void *v27; // r0@54
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  void *v31; // r6@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int result; // r0@93
  unsigned int *v41; // r2@99
  signed int v42; // r1@101
  void *v43; // [sp+0h] [bp-50h]@31
  int v44; // [sp+4h] [bp-4Ch]@31
  int v45; // [sp+8h] [bp-48h]@36
  int v46; // [sp+Ch] [bp-44h]@37
  int v47; // [sp+10h] [bp-40h]@38
  int v48; // [sp+14h] [bp-3Ch]@36
  int v49; // [sp+18h] [bp-38h]@37
  char v50; // [sp+1Ch] [bp-34h]@31
  void *v51; // [sp+20h] [bp-30h]@38
  char v52; // [sp+24h] [bp-2Ch]@38
  int v53; // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(void **)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_QWORD *)(v3 + 144);
  if ( HIDWORD(v16) )
    v17 = (unsigned int *)(HIDWORD(v16) + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
      ++*v17;
  v19 = xbox::services::xbox_live_context::social_service((xbox::services::xbox_live_context *)v16);
  xbox::services::social::social_service::add_friend((int)&v50, (int)v19, v6);
  v43 = v11;
  v44 = v5;
      v20 = __ldrex(v12);
    while ( __strex(v20 + 1, v12) );
  sub_119C854(&v45, v6);
  v48 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  if ( v21 )
    v21(&v46, v4, 2);
    v49 = *(_DWORD *)(v4 + 12);
    v48 = *(_DWORD *)(v4 + 8);
  sub_103A2A0((int)&v52, (int)&v50, (int)&v43, (int)v21, v43, v44, v45, v46, v47, v48, v49, *(int *)&v50, v51);
  v22 = v53;
  if ( v53 )
    v23 = (unsigned int *)(v53 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
      }
      else
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  if ( v48 )
    ((void (*)(void))v48)();
  v27 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v45 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
  v28 = v44;
  if ( v44 )
    v29 = (unsigned int *)(v44 + 8);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 == 1 )
      (*(void (**)(void))(*(_DWORD *)v28 + 12))();
  v31 = v51;
  if ( v51 )
    v32 = (unsigned int *)((char *)v51 + 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      v34 = (unsigned int *)((char *)v31 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
    v36 = (unsigned int *)(HIDWORD(v16) + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(HIDWORD(v16) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 8))(HIDWORD(v16));
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 12))(HIDWORD(v16));
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


unsigned int *__fastcall Social::XboxLiveUserManager::getExistingXboxLiveProfile(int a1, int a2, int **a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *result; // r0@2
  unsigned int v6; // r1@5

  v3 = a1;
  v4 = std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a2 + 80),
         a3);
  if ( v4 )
  {
    *(_DWORD *)v3 = *(_DWORD *)(v4 + 8);
    result = *(unsigned int **)(v4 + 12);
    *(_DWORD *)(v3 + 4) = result;
    if ( result )
    {
      ++result;
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(result);
        while ( __strex(v6 + 1, result) );
      }
      else
        ++*result;
    }
  }
  else
    result = 0;
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 0;
  return result;
}


signed int __fastcall Social::MultiplayerXBL::_setLobbyProperties(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  Social::XboxLiveUserManager *v2; // r0@1
  Social::XboxLiveUserManager *v3; // r0@2
  signed int v4; // r5@2
  int v5; // r6@2
  unsigned int *v6; // r1@3
  unsigned int v7; // r0@5
  unsigned int *v8; // r7@10
  unsigned int v9; // r0@12
  unsigned int *v10; // r6@17
  unsigned int *v11; // r1@18
  unsigned int v12; // r0@20
  unsigned int *v13; // r7@24
  unsigned int v14; // r0@26
  int v15; // r5@32
  unsigned int *v16; // r1@33
  unsigned int v17; // r0@35
  unsigned int v18; // r0@41
  int v19; // r0@46
  int v20; // r5@46
  bool v21; // zf@46
  void *v22; // r0@52
  void *v23; // r0@55
  void *v24; // r0@56
  int *v25; // r6@57
  void *v26; // r0@57
  void *v27; // r0@60
  void *v28; // r0@61
  int *v29; // r6@62
  void *v30; // r0@62
  void *v31; // r0@65
  void *v32; // r0@66
  int *v33; // r6@67
  void *v34; // r0@67
  void *v35; // r0@70
  void *v36; // r0@71
  int *v37; // r6@72
  void *v38; // r0@72
  void *v39; // r0@75
  void *v40; // r0@76
  int *v41; // r6@77
  void *v42; // r0@77
  void *v43; // r0@80
  void *v44; // r0@81
  int *v45; // r6@82
  void *v46; // r0@82
  void *v47; // r0@85
  void *v48; // r0@86
  int *v49; // r6@87
  void *v50; // r0@87
  void *v51; // r0@90
  int *v52; // r6@91
  void *v53; // r0@91
  void *v54; // r0@94
  int *v55; // r6@95
  void *v56; // r0@95
  void *v57; // r0@98
  int *v58; // r6@99
  void *v59; // r0@99
  void *v60; // r0@102
  int *v61; // r5@104
  __int64 *v62; // r0@104
  int v63; // r1@104
  void *v64; // r0@104
  void *v65; // r0@107
  unsigned int *v66; // r2@108
  signed int v67; // r1@110
  int *v68; // r5@113
  void *v69; // r0@113
  void *v70; // r0@116
  void *v71; // r0@117
  int *v72; // r5@118
  void *v73; // r0@118
  void *v74; // r0@121
  void *v75; // r0@122
  int *v76; // r5@123
  void *v77; // r0@123
  int *v78; // r5@131
  void *v79; // r0@131
  void *v80; // r0@132
  unsigned int *v81; // r2@135
  signed int v82; // r1@137
  unsigned int *v83; // r2@139
  signed int v84; // r1@141
  unsigned int *v85; // r2@143
  signed int v86; // r1@145
  unsigned int *v87; // r2@147
  signed int v88; // r1@149
  unsigned int *v89; // r2@151
  signed int v90; // r1@153
  unsigned int *v91; // r2@155
  signed int v92; // r1@157
  unsigned int *v93; // r2@159
  signed int v94; // r1@161
  unsigned int *v95; // r2@163
  signed int v96; // r1@165
  unsigned int *v97; // r2@167
  signed int v98; // r1@169
  unsigned int *v99; // r2@171
  signed int v100; // r1@173
  unsigned int *v101; // r2@175
  signed int v102; // r1@177
  unsigned int *v103; // r2@179
  signed int v104; // r1@181
  unsigned int *v105; // r2@183
  signed int v106; // r1@185
  unsigned int *v107; // r2@187
  signed int v108; // r1@189
  unsigned int *v109; // r2@191
  signed int v110; // r1@193
  unsigned int *v111; // r2@195
  signed int v112; // r1@197
  unsigned int *v113; // r2@199
  signed int v114; // r1@201
  unsigned int *v115; // r2@203
  signed int v116; // r1@205
  unsigned int *v117; // r2@207
  signed int v118; // r1@209
  unsigned int *v119; // r2@211
  signed int v120; // r1@213
  unsigned int *v121; // r2@215
  signed int v122; // r1@217
  unsigned int *v123; // r2@219
  signed int v124; // r1@221
  unsigned int *v125; // r2@223
  signed int v126; // r1@225
  unsigned int *v127; // r2@227
  signed int v128; // r1@229
  unsigned int *v129; // r2@231
  signed int v130; // r1@233
  unsigned int *v131; // r2@235
  signed int v132; // r1@237
  unsigned int *v133; // r2@239
  signed int v134; // r1@241
  unsigned int *v135; // r2@243
  signed int v136; // r1@245
  unsigned int *v137; // r2@247
  signed int v138; // r1@249
  unsigned int *v139; // r2@367
  signed int v140; // r1@369
  void *v141; // r0@375
  int v142; // r5@376
  unsigned int *v143; // r1@377
  unsigned int v144; // r0@379
  void *v145; // r0@381
  unsigned int *v146; // r1@383
  unsigned int v147; // r0@385
  unsigned int *v148; // r6@389
  unsigned int v149; // r0@391
  int v150; // r5@402
  unsigned int *v151; // r1@403
  unsigned int v152; // r0@405
  unsigned int *v153; // r6@409
  unsigned int v154; // r0@411
  signed int result; // r0@416
  unsigned int *v156; // r2@417
  signed int v157; // r1@419
  unsigned int *v158; // r2@421
  signed int v159; // r1@423
  unsigned int *v160; // r2@425
  signed int v161; // r1@427
  unsigned int *v162; // r2@429
  signed int v163; // r1@431
  unsigned int *v164; // r2@433
  signed int v165; // r1@435
  unsigned int *v166; // r2@437
  signed int v167; // r1@439
  unsigned int *v168; // r2@441
  signed int v169; // r1@443
  unsigned int *v170; // r2@457
  signed int v171; // r1@459
  unsigned int *v172; // r2@461
  signed int v173; // r1@463
  unsigned int *v174; // r2@465
  signed int v175; // r1@467
  unsigned int *v176; // r2@469
  signed int v177; // r1@471
  int v178; // [sp+4h] [bp-204h]@381
  int v179; // [sp+8h] [bp-200h]@382
  char v180; // [sp+Ch] [bp-1FCh]@381
  int v181; // [sp+14h] [bp-1F4h]@381
  int v182; // [sp+18h] [bp-1F0h]@375
  int v183; // [sp+1Ch] [bp-1ECh]@376
  char v184; // [sp+20h] [bp-1E8h]@375
  int v185; // [sp+28h] [bp-1E0h]@375
  int v186; // [sp+30h] [bp-1D8h]@131
  char v187; // [sp+34h] [bp-1D4h]@131
  int v188; // [sp+3Ch] [bp-1CCh]@131
  int v189; // [sp+40h] [bp-1C8h]@131
  int v190; // [sp+44h] [bp-1C4h]@123
  int v191; // [sp+4Ch] [bp-1BCh]@123
  char v192; // [sp+50h] [bp-1B8h]@123
  int v193; // [sp+58h] [bp-1B0h]@123
  int v194; // [sp+5Ch] [bp-1ACh]@118
  int v195; // [sp+60h] [bp-1A8h]@118
  int v196; // [sp+68h] [bp-1A0h]@118
  char v197; // [sp+6Ch] [bp-19Ch]@118
  int v198; // [sp+74h] [bp-194h]@118
  int v199; // [sp+78h] [bp-190h]@113
  int v200; // [sp+7Ch] [bp-18Ch]@113
  int v201; // [sp+84h] [bp-184h]@113
  char v202; // [sp+88h] [bp-180h]@113
  int v203; // [sp+90h] [bp-178h]@113
  int v204; // [sp+94h] [bp-174h]@104
  int v205; // [sp+9Ch] [bp-16Ch]@104
  char v206; // [sp+A0h] [bp-168h]@104
  int v207; // [sp+A8h] [bp-160h]@104
  int v208; // [sp+ACh] [bp-15Ch]@99
  int v209; // [sp+B4h] [bp-154h]@99
  char v210; // [sp+B8h] [bp-150h]@99
  int v211; // [sp+C0h] [bp-148h]@99
  int v212; // [sp+C4h] [bp-144h]@95
  int v213; // [sp+CCh] [bp-13Ch]@95
  char v214; // [sp+D0h] [bp-138h]@95
  int v215; // [sp+D8h] [bp-130h]@95
  int v216; // [sp+DCh] [bp-12Ch]@91
  int v217; // [sp+E4h] [bp-124h]@91
  char v218; // [sp+E8h] [bp-120h]@91
  int v219; // [sp+F0h] [bp-118h]@91
  int v220; // [sp+F4h] [bp-114h]@87
  int v221; // [sp+FCh] [bp-10Ch]@87
  char v222; // [sp+100h] [bp-108h]@87
  int v223; // [sp+108h] [bp-100h]@87
  int v224; // [sp+10Ch] [bp-FCh]@82
  int v225; // [sp+110h] [bp-F8h]@82
  int v226; // [sp+118h] [bp-F0h]@82
  char v227; // [sp+11Ch] [bp-ECh]@82
  int v228; // [sp+124h] [bp-E4h]@82
  int v229; // [sp+128h] [bp-E0h]@77
  int v230; // [sp+12Ch] [bp-DCh]@77
  int v231; // [sp+134h] [bp-D4h]@77
  char v232; // [sp+138h] [bp-D0h]@77
  int v233; // [sp+140h] [bp-C8h]@77
  int v234; // [sp+144h] [bp-C4h]@72
  int v235; // [sp+148h] [bp-C0h]@72
  int v236; // [sp+150h] [bp-B8h]@72
  char v237; // [sp+154h] [bp-B4h]@72
  int v238; // [sp+15Ch] [bp-ACh]@72
  int v239; // [sp+160h] [bp-A8h]@67
  int v240; // [sp+164h] [bp-A4h]@67
  int v241; // [sp+16Ch] [bp-9Ch]@67
  char v242; // [sp+170h] [bp-98h]@67
  int v243; // [sp+178h] [bp-90h]@67
  int v244; // [sp+17Ch] [bp-8Ch]@62
  int v245; // [sp+180h] [bp-88h]@62
  int v246; // [sp+188h] [bp-80h]@62
  char v247; // [sp+18Ch] [bp-7Ch]@62
  int v248; // [sp+194h] [bp-74h]@62
  int v249; // [sp+198h] [bp-70h]@57
  int v250; // [sp+19Ch] [bp-6Ch]@57
  int v251; // [sp+1A4h] [bp-64h]@57
  char v252; // [sp+1A8h] [bp-60h]@57
  int v253; // [sp+1B0h] [bp-58h]@57
  int v254; // [sp+1B4h] [bp-54h]@52
  int v255; // [sp+1B8h] [bp-50h]@52
  int v256; // [sp+1C0h] [bp-48h]@52
  char v257; // [sp+1C4h] [bp-44h]@52
  int v258; // [sp+1CCh] [bp-3Ch]@52
  int v259; // [sp+1D0h] [bp-38h]@32
  int v260; // [sp+1D4h] [bp-34h]@32
  unsigned int *v261; // [sp+1D8h] [bp-30h]@32
  int v262; // [sp+1DCh] [bp-2Ch]@402
  Social::User *v263; // [sp+1E0h] [bp-28h]@2
  int v264; // [sp+1E4h] [bp-24h]@2
  Social::User *v265; // [sp+1E8h] [bp-20h]@1
  int v266; // [sp+1ECh] [bp-1Ch]@17

  v1 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v265, *((_DWORD *)this + 11));
  v2 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v265);
  if ( Social::XboxLiveUserManager::isSignedIn(v2) == 1 )
  {
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v263, *((_DWORD *)v1 + 11));
    v3 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v263);
    v4 = Social::XboxLiveUserManager::checkPrivilegeSilently(v3, 254);
    v5 = v264;
    if ( v264 )
    {
      v6 = (unsigned int *)(v264 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        v8 = (unsigned int *)(v5 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
        if ( &pthread_create )
        {
          __dmb();
          do
            v9 = __ldrex(v8);
          while ( __strex(v9 - 1, v8) );
        }
        else
          v9 = (*v8)--;
        if ( v9 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
    }
  }
  else
    v4 = 0;
  v10 = (unsigned int *)v266;
  if ( v266 )
    v11 = (unsigned int *)(v266 + 4);
    if ( &pthread_create )
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
    else
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = v10 + 2;
      (*(void (__fastcall **)(unsigned int *))(*v10 + 8))(v10);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(unsigned int *))(*v10 + 12))(v10);
  if ( v4 == 1 )
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v259);
    xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
      (xbox::services::multiplayer::manager::multiplayer_manager *)&v261,
      v259);
    v15 = v260;
    if ( v260 )
      v16 = (unsigned int *)(v260 + 4);
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        v10 = (unsigned int *)(v15 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 8))(v15);
            v18 = __ldrex(v10);
          while ( __strex(v18 - 1, v10) );
          v18 = (*v10)--;
        if ( v18 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
    v19 = (*(int (**)(void))(**((_DWORD **)v1 + 18) + 32))();
    v20 = ThirdPartyInfo::isValid((ThirdPartyInfo *)(v19 + 20));
    v21 = *((_BYTE *)v1 + 36) == 0;
    if ( *((_BYTE *)v1 + 36) )
      v10 = v261;
      v21 = v261 == 0;
    if ( v21 )
      goto LABEL_402;
    if ( !*((_BYTE *)v1 + 176) )
      if ( ((*(int (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v1 + 116))(v1) | v20) != 1 )
LABEL_402:
        v150 = v262;
        if ( v262 )
          v151 = (unsigned int *)(v262 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v152 = __ldrex(v151);
            while ( __strex(v152 - 1, v151) );
          }
          else
            v152 = (*v151)--;
          if ( v152 == 1 )
            v153 = (unsigned int *)(v150 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v150 + 8))(v150);
            if ( &pthread_create )
            {
              __dmb();
              do
                v154 = __ldrex(v153);
              while ( __strex(v154 - 1, v153) );
            }
            else
              v154 = (*v153)--;
            if ( v154 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v150 + 12))(v150);
        goto LABEL_416;
    sub_119C884((void **)&v256, "hostName");
    utility::conversions::to_string_t(&v254, (int *)v1 + 26);
    web::json::value::string(&v255, &v254);
    xbox::services::multiplayer::manager::multiplayer_lobby_session::set_properties(
      (int)&v257,
      (int *)v10,
      &v256,
      (web::json::value *)&v255,
      0);
    v22 = (void *)(v258 - 12);
    if ( (int *)(v258 - 12) != &dword_28898C0 )
      v81 = (unsigned int *)(v258 - 4);
          v82 = __ldrex(v81);
        while ( __strex(v82 - 1, v81) );
        v82 = (*v81)--;
      if ( v82 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v22);
    if ( v255 )
      (*(void (**)(void))(*(_DWORD *)v255 + 96))();
    v255 = 0;
    v23 = (void *)(v254 - 12);
    if ( (int *)(v254 - 12) != &dword_28898C0 )
      v83 = (unsigned int *)(v254 - 4);
          v84 = __ldrex(v83);
        while ( __strex(v84 - 1, v83) );
        v84 = (*v83)--;
      if ( v84 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v23);
    v24 = (void *)(v256 - 12);
    if ( (int *)(v256 - 12) != &dword_28898C0 )
      v85 = (unsigned int *)(v256 - 4);
          v86 = __ldrex(v85);
        while ( __strex(v86 - 1, v85) );
        v86 = (*v85)--;
      if ( v86 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v24);
    v25 = (int *)v261;
    sub_119C884((void **)&v251, "ownerId");
    utility::conversions::to_string_t(&v249, (int *)v1 + 25);
    web::json::value::string(&v250, &v249);
      (int)&v252,
      v25,
      &v251,
      (web::json::value *)&v250,
    v26 = (void *)(v253 - 12);
    if ( (int *)(v253 - 12) != &dword_28898C0 )
      v87 = (unsigned int *)(v253 - 4);
          v88 = __ldrex(v87);
        while ( __strex(v88 - 1, v87) );
        v88 = (*v87)--;
      if ( v88 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v26);
    if ( v250 )
      (*(void (**)(void))(*(_DWORD *)v250 + 96))();
    v250 = 0;
    v27 = (void *)(v249 - 12);
    if ( (int *)(v249 - 12) != &dword_28898C0 )
      v89 = (unsigned int *)(v249 - 4);
          v90 = __ldrex(v89);
        while ( __strex(v90 - 1, v89) );
        v90 = (*v89)--;
      if ( v90 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v27);
    v28 = (void *)(v251 - 12);
    if ( (int *)(v251 - 12) != &dword_28898C0 )
      v91 = (unsigned int *)(v251 - 4);
          v92 = __ldrex(v91);
        while ( __strex(v92 - 1, v91) );
        v92 = (*v91)--;
      if ( v92 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v28);
    v29 = (int *)v261;
    sub_119C884((void **)&v246, "rakNetGUID");
    utility::conversions::to_string_t(&v244, (int *)v1 + 29);
    web::json::value::string(&v245, &v244);
      (int)&v247,
      v29,
      &v246,
      (web::json::value *)&v245,
    v30 = (void *)(v248 - 12);
    if ( (int *)(v248 - 12) != &dword_28898C0 )
      v93 = (unsigned int *)(v248 - 4);
          v94 = __ldrex(v93);
        while ( __strex(v94 - 1, v93) );
        v94 = (*v93)--;
      if ( v94 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v30);
    if ( v245 )
      (*(void (**)(void))(*(_DWORD *)v245 + 96))();
    v245 = 0;
    v31 = (void *)(v244 - 12);
    if ( (int *)(v244 - 12) != &dword_28898C0 )
      v95 = (unsigned int *)(v244 - 4);
          v96 = __ldrex(v95);
        while ( __strex(v96 - 1, v95) );
        v96 = (*v95)--;
      if ( v96 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v31);
    v32 = (void *)(v246 - 12);
    if ( (int *)(v246 - 12) != &dword_28898C0 )
      v97 = (unsigned int *)(v246 - 4);
          v98 = __ldrex(v97);
        while ( __strex(v98 - 1, v97) );
        v98 = (*v97)--;
      if ( v98 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v32);
    v33 = (int *)v261;
    sub_119C884((void **)&v241, "version");
    utility::conversions::to_string_t(&v239, (int *)v1 + 32);
    web::json::value::string(&v240, &v239);
      (int)&v242,
      v33,
      &v241,
      (web::json::value *)&v240,
    v34 = (void *)(v243 - 12);
    if ( (int *)(v243 - 12) != &dword_28898C0 )
      v99 = (unsigned int *)(v243 - 4);
          v100 = __ldrex(v99);
        while ( __strex(v100 - 1, v99) );
        v100 = (*v99)--;
      if ( v100 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v34);
    if ( v240 )
      (*(void (**)(void))(*(_DWORD *)v240 + 96))();
    v240 = 0;
    v35 = (void *)(v239 - 12);
    if ( (int *)(v239 - 12) != &dword_28898C0 )
      v101 = (unsigned int *)(v239 - 4);
          v102 = __ldrex(v101);
        while ( __strex(v102 - 1, v101) );
        v102 = (*v101)--;
      if ( v102 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v35);
    v36 = (void *)(v241 - 12);
    if ( (int *)(v241 - 12) != &dword_28898C0 )
      v103 = (unsigned int *)(v241 - 4);
          v104 = __ldrex(v103);
        while ( __strex(v104 - 1, v103) );
        v104 = (*v103)--;
      if ( v104 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v36);
    v37 = (int *)v261;
    sub_119C884((void **)&v236, "levelId");
    utility::conversions::to_string_t(&v234, (int *)v1 + 28);
    web::json::value::string(&v235, &v234);
      (int)&v237,
      v37,
      &v236,
      (web::json::value *)&v235,
    v38 = (void *)(v238 - 12);
    if ( (int *)(v238 - 12) != &dword_28898C0 )
      v105 = (unsigned int *)(v238 - 4);
          v106 = __ldrex(v105);
        while ( __strex(v106 - 1, v105) );
        v106 = (*v105)--;
      if ( v106 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v38);
    if ( v235 )
      (*(void (**)(void))(*(_DWORD *)v235 + 96))();
    v235 = 0;
    v39 = (void *)(v234 - 12);
    if ( (int *)(v234 - 12) != &dword_28898C0 )
      v107 = (unsigned int *)(v234 - 4);
          v108 = __ldrex(v107);
        while ( __strex(v108 - 1, v107) );
        v108 = (*v107)--;
      if ( v108 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v39);
    v40 = (void *)(v236 - 12);
    if ( (int *)(v236 - 12) != &dword_28898C0 )
      v109 = (unsigned int *)(v236 - 4);
          v110 = __ldrex(v109);
        while ( __strex(v110 - 1, v109) );
        v110 = (*v109)--;
      if ( v110 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v40);
    v41 = (int *)v261;
    sub_119C884((void **)&v231, "worldName");
    utility::conversions::to_string_t(&v229, (int *)v1 + 30);
    web::json::value::string(&v230, &v229);
      (int)&v232,
      v41,
      &v231,
      (web::json::value *)&v230,
    v42 = (void *)(v233 - 12);
    if ( (int *)(v233 - 12) != &dword_28898C0 )
      v111 = (unsigned int *)(v233 - 4);
          v112 = __ldrex(v111);
        while ( __strex(v112 - 1, v111) );
        v112 = (*v111)--;
      if ( v112 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v42);
    if ( v230 )
      (*(void (**)(void))(*(_DWORD *)v230 + 96))();
    v230 = 0;
    v43 = (void *)(v229 - 12);
    if ( (int *)(v229 - 12) != &dword_28898C0 )
      v113 = (unsigned int *)(v229 - 4);
          v114 = __ldrex(v113);
        while ( __strex(v114 - 1, v113) );
        v114 = (*v113)--;
      if ( v114 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v43);
    v44 = (void *)(v231 - 12);
    if ( (int *)(v231 - 12) != &dword_28898C0 )
      v115 = (unsigned int *)(v231 - 4);
          v116 = __ldrex(v115);
        while ( __strex(v116 - 1, v115) );
        v116 = (*v115)--;
      if ( v116 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v44);
    v45 = (int *)v261;
    sub_119C884((void **)&v226, "worldType");
    utility::conversions::to_string_t(&v224, (int *)v1 + 31);
    web::json::value::string(&v225, &v224);
      (int)&v227,
      v45,
      &v226,
      (web::json::value *)&v225,
    v46 = (void *)(v228 - 12);
    if ( (int *)(v228 - 12) != &dword_28898C0 )
      v117 = (unsigned int *)(v228 - 4);
          v118 = __ldrex(v117);
        while ( __strex(v118 - 1, v117) );
        v118 = (*v117)--;
      if ( v118 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v46);
    if ( v225 )
      (*(void (**)(void))(*(_DWORD *)v225 + 96))();
    v225 = 0;
    v47 = (void *)(v224 - 12);
    if ( (int *)(v224 - 12) != &dword_28898C0 )
      v119 = (unsigned int *)(v224 - 4);
          v120 = __ldrex(v119);
        while ( __strex(v120 - 1, v119) );
        v120 = (*v119)--;
      if ( v120 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v47);
    v48 = (void *)(v226 - 12);
    if ( (int *)(v226 - 12) != &dword_28898C0 )
      v121 = (unsigned int *)(v226 - 4);
          v122 = __ldrex(v121);
        while ( __strex(v122 - 1, v121) );
        v122 = (*v121)--;
      if ( v122 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v48);
    v49 = (int *)v261;
    sub_119C884((void **)&v221, "protocol");
    web::json::value::number((web::json::value *)&v220, *((_DWORD *)v1 + 39));
      (int)&v222,
      v49,
      &v221,
      (web::json::value *)&v220,
    v50 = (void *)(v223 - 12);
    if ( (int *)(v223 - 12) != &dword_28898C0 )
      v123 = (unsigned int *)(v223 - 4);
          v124 = __ldrex(v123);
        while ( __strex(v124 - 1, v123) );
        v124 = (*v123)--;
      if ( v124 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v50);
    if ( v220 )
      (*(void (**)(void))(*(_DWORD *)v220 + 96))();
    v220 = 0;
    v51 = (void *)(v221 - 12);
    if ( (int *)(v221 - 12) != &dword_28898C0 )
      v125 = (unsigned int *)(v221 - 4);
          v126 = __ldrex(v125);
        while ( __strex(v126 - 1, v125) );
        v126 = (*v125)--;
      if ( v126 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v51);
    v52 = (int *)v261;
    sub_119C884((void **)&v217, "MemberCount");
    web::json::value::number((web::json::value *)&v216, *((_DWORD *)v1 + 41));
      (int)&v218,
      v52,
      &v217,
      (web::json::value *)&v216,
    v53 = (void *)(v219 - 12);
    if ( (int *)(v219 - 12) != &dword_28898C0 )
      v127 = (unsigned int *)(v219 - 4);
          v128 = __ldrex(v127);
        while ( __strex(v128 - 1, v127) );
        v128 = (*v127)--;
      if ( v128 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v53);
    if ( v216 )
      (*(void (**)(void))(*(_DWORD *)v216 + 96))();
    v216 = 0;
    v54 = (void *)(v217 - 12);
    if ( (int *)(v217 - 12) != &dword_28898C0 )
      v129 = (unsigned int *)(v217 - 4);
          v130 = __ldrex(v129);
        while ( __strex(v130 - 1, v129) );
        v130 = (*v129)--;
      if ( v130 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v54);
    v55 = (int *)v261;
    sub_119C884((void **)&v213, "MaxMemberCount");
    web::json::value::number((web::json::value *)&v212, *((_DWORD *)v1 + 40));
      (int)&v214,
      v55,
      &v213,
      (web::json::value *)&v212,
    v56 = (void *)(v215 - 12);
    if ( (int *)(v215 - 12) != &dword_28898C0 )
      v131 = (unsigned int *)(v215 - 4);
          v132 = __ldrex(v131);
        while ( __strex(v132 - 1, v131) );
        v132 = (*v131)--;
      if ( v132 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v56);
    if ( v212 )
      (*(void (**)(void))(*(_DWORD *)v212 + 96))();
    v212 = 0;
    v57 = (void *)(v213 - 12);
    if ( (int *)(v213 - 12) != &dword_28898C0 )
      v133 = (unsigned int *)(v213 - 4);
          v134 = __ldrex(v133);
        while ( __strex(v134 - 1, v133) );
        v134 = (*v133)--;
      if ( v134 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v57);
    v58 = (int *)v261;
    sub_119C884((void **)&v209, "BroadcastSetting");
    web::json::value::value((web::json::value *)&v208, *((_DWORD *)v1 + 76));
      (int)&v210,
      v58,
      &v209,
      (web::json::value *)&v208,
    v59 = (void *)(v211 - 12);
    if ( (int *)(v211 - 12) != &dword_28898C0 )
      v135 = (unsigned int *)(v211 - 4);
          v136 = __ldrex(v135);
        while ( __strex(v136 - 1, v135) );
        v136 = (*v135)--;
      if ( v136 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v59);
    if ( v208 )
      (*(void (**)(void))(*(_DWORD *)v208 + 96))();
    v208 = 0;
    v60 = (void *)(v209 - 12);
    if ( (int *)(v209 - 12) != &dword_28898C0 )
      v137 = (unsigned int *)(v209 - 4);
          v138 = __ldrex(v137);
        while ( __strex(v138 - 1, v137) );
        v138 = (*v137)--;
      if ( v138 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v60);
    if ( (*(int (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v1 + 116))(v1) == 1 )
      v61 = (int *)v261;
      sub_119C884((void **)&v205, "RealmId");
      v62 = (__int64 *)(*(int (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v1 + 120))(v1);
      web::json::value::number((web::json::value *)&v204, v63, *v62);
      xbox::services::multiplayer::manager::multiplayer_lobby_session::set_properties(
        (int)&v206,
        v61,
        &v205,
        (web::json::value *)&v204,
        0);
      v64 = (void *)(v207 - 12);
      if ( (int *)(v207 - 12) != &dword_28898C0 )
        v139 = (unsigned int *)(v207 - 4);
            v140 = __ldrex(v139);
          while ( __strex(v140 - 1, v139) );
          v140 = (*v139)--;
        if ( v140 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v64);
      if ( v204 )
        (*(void (**)(void))(*(_DWORD *)v204 + 96))();
      v204 = 0;
      v65 = (void *)(v205 - 12);
      if ( (int *)(v205 - 12) != &dword_28898C0 )
        v66 = (unsigned int *)(v205 - 4);
            v67 = __ldrex(v66);
          while ( __strex(v67 - 1, v66) );
          goto LABEL_372;
        goto LABEL_371;
    else if ( v20 == 1 )
      v68 = (int *)v261;
      sub_119C884((void **)&v201, "ThirdPartyServerId");
      utility::conversions::to_string_t(&v199, (int *)v1 + 36);
      web::json::value::string(&v200, &v199);
        (int)&v202,
        v68,
        &v201,
        (web::json::value *)&v200,
      v69 = (void *)(v203 - 12);
      if ( (int *)(v203 - 12) != &dword_28898C0 )
        v160 = (unsigned int *)(v203 - 4);
            v161 = __ldrex(v160);
          while ( __strex(v161 - 1, v160) );
          v161 = (*v160)--;
        if ( v161 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v69);
      if ( v200 )
        (*(void (**)(void))(*(_DWORD *)v200 + 96))();
      v200 = 0;
      v70 = (void *)(v199 - 12);
      if ( (int *)(v199 - 12) != &dword_28898C0 )
        v162 = (unsigned int *)(v199 - 4);
            v163 = __ldrex(v162);
          while ( __strex(v163 - 1, v162) );
          v163 = (*v162)--;
        if ( v163 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v70);
      v71 = (void *)(v201 - 12);
      if ( (int *)(v201 - 12) != &dword_28898C0 )
        v164 = (unsigned int *)(v201 - 4);
            v165 = __ldrex(v164);
          while ( __strex(v165 - 1, v164) );
          v165 = (*v164)--;
        if ( v165 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v71);
      v72 = (int *)v261;
      sub_119C884((void **)&v196, "ThirdPartyServerIp");
      utility::conversions::to_string_t(&v194, (int *)v1 + 37);
      web::json::value::string(&v195, &v194);
        (int)&v197,
        v72,
        &v196,
        (web::json::value *)&v195,
      v73 = (void *)(v198 - 12);
      if ( (int *)(v198 - 12) != &dword_28898C0 )
        v170 = (unsigned int *)(v198 - 4);
            v171 = __ldrex(v170);
          while ( __strex(v171 - 1, v170) );
          v171 = (*v170)--;
        if ( v171 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v73);
      if ( v195 )
        (*(void (**)(void))(*(_DWORD *)v195 + 96))();
      v195 = 0;
      v74 = (void *)(v194 - 12);
      if ( (int *)(v194 - 12) != &dword_28898C0 )
        v172 = (unsigned int *)(v194 - 4);
            v173 = __ldrex(v172);
          while ( __strex(v173 - 1, v172) );
          v173 = (*v172)--;
        if ( v173 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v74);
      v75 = (void *)(v196 - 12);
      if ( (int *)(v196 - 12) != &dword_28898C0 )
        v174 = (unsigned int *)(v196 - 4);
            v175 = __ldrex(v174);
          while ( __strex(v175 - 1, v174) );
          v175 = (*v174)--;
        if ( v175 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v75);
      v76 = (int *)v261;
      sub_119C884((void **)&v191, "ThirdPartyServerPort");
      web::json::value::number((web::json::value *)&v190, *((_DWORD *)v1 + 38));
        (int)&v192,
        v76,
        &v191,
        (web::json::value *)&v190,
      v77 = (void *)(v193 - 12);
      if ( (int *)(v193 - 12) != &dword_28898C0 )
        v176 = (unsigned int *)(v193 - 4);
            v177 = __ldrex(v176);
          while ( __strex(v177 - 1, v176) );
          v177 = (*v176)--;
        if ( v177 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v77);
      if ( v190 )
        (*(void (**)(void))(*(_DWORD *)v190 + 96))();
      v190 = 0;
      v65 = (void *)(v191 - 12);
      if ( (int *)(v191 - 12) != &dword_28898C0 )
        v66 = (unsigned int *)(v191 - 4);
LABEL_372:
          if ( v67 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v65);
          goto LABEL_374;
LABEL_371:
        v67 = (*v66)--;
        goto LABEL_372;
      web::json::value::value((web::json::value *)&v189);
      Social::MultiplayerGameInfo::getConnectionsAsJson(
        (Social::MultiplayerXBL *)((char *)v1 + 88),
        (web::json::value *)&v189);
      v78 = (int *)v261;
      sub_119C884((void **)&v186, "SupportedConnections");
        (int)&v187,
        v78,
        &v186,
        (web::json::value *)&v189,
      v79 = (void *)(v188 - 12);
      if ( (int *)(v188 - 12) != &dword_28898C0 )
        v166 = (unsigned int *)(v188 - 4);
            v167 = __ldrex(v166);
          while ( __strex(v167 - 1, v166) );
          v167 = (*v166)--;
        if ( v167 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v79);
      v80 = (void *)(v186 - 12);
      if ( (int *)(v186 - 12) != &dword_28898C0 )
        v168 = (unsigned int *)(v186 - 4);
            v169 = __ldrex(v168);
          while ( __strex(v169 - 1, v168) );
          v169 = (*v168)--;
        if ( v169 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v80);
      if ( v189 )
        (*(void (**)(void))(*(_DWORD *)v189 + 96))();
LABEL_374:
    if ( *((_DWORD *)v1 + 76) == 1 )
      xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v182);
      xbox::services::multiplayer::manager::multiplayer_manager::set_joinability((xbox::services *)&v184, v182, 2, 0);
      v141 = (void *)(v185 - 12);
      if ( (int *)(v185 - 12) != &dword_28898C0 )
        v156 = (unsigned int *)(v185 - 4);
            v157 = __ldrex(v156);
          while ( __strex(v157 - 1, v156) );
          v157 = (*v156)--;
        if ( v157 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v141);
      v142 = v183;
      if ( !v183 )
        goto LABEL_402;
      v143 = (unsigned int *)(v183 + 4);
          v144 = __ldrex(v143);
        while ( __strex(v144 - 1, v143) );
        v144 = (*v143)--;
      if ( v144 != 1 )
      v148 = (unsigned int *)(v142 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v142 + 8))(v142);
          v149 = __ldrex(v148);
        while ( __strex(v149 - 1, v148) );
        goto LABEL_400;
      xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v178);
      xbox::services::multiplayer::manager::multiplayer_manager::set_joinability((xbox::services *)&v180, v178, 1, 0);
      v145 = (void *)(v181 - 12);
      if ( (int *)(v181 - 12) != &dword_28898C0 )
        v158 = (unsigned int *)(v181 - 4);
            v159 = __ldrex(v158);
          while ( __strex(v159 - 1, v158) );
          v159 = (*v158)--;
        if ( v159 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v145);
      v142 = v179;
      if ( !v179 )
      v146 = (unsigned int *)(v179 + 4);
          v147 = __ldrex(v146);
        while ( __strex(v147 - 1, v146) );
        v147 = (*v146)--;
      if ( v147 != 1 )
LABEL_400:
        if ( v149 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v142 + 12))(v142);
    v149 = (*v148)--;
    goto LABEL_400;
LABEL_416:
  *((_BYTE *)v1 + 255) = 0;
  result = 100;
  *((_DWORD *)v1 + 64) = 100;
  return result;
}


unsigned int *__fastcall Social::XboxLiveUserManager::_updateUserFavoriteWithXuid(int a1, int **a2, int a3)
{
  int v3; // r5@1
  unsigned int *result; // r0@1
  int v5; // r4@1
  unsigned int v6; // r1@2
  unsigned int *v7; // r0@2
  unsigned int v8; // r2@5
  unsigned int v9; // r3@6
  int v10; // r1@7
  bool v11; // zf@7
  signed int v12; // r2@10
  unsigned int v13; // r1@15
  unsigned int *v14; // r5@19
  unsigned int v15; // r0@21
  unsigned int *v16; // r2@27
  unsigned int v17; // r1@29
  int v18; // [sp+0h] [bp-18h]@1
  int v19; // [sp+4h] [bp-14h]@1

  v3 = a3;
  result = Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v18, a1, a2);
  v5 = v19;
  if ( v19 )
  {
    v6 = *(_DWORD *)(v19 + 4);
    v7 = (unsigned int *)(v19 + 4);
    while ( v6 )
    {
      __dmb();
      v8 = __ldrex(v7);
      if ( v8 == v6 )
      {
        v9 = __strex(v6 + 1, v7);
        v6 = v8;
        if ( !v9 )
        {
          __dmb();
          v10 = *v7;
          v11 = *v7 == 0;
          if ( *v7 )
          {
            v10 = v18;
            v11 = v18 == 0;
          }
          if ( !v11 )
            v12 = 2;
            if ( v3 )
              v12 = 1;
            *(_DWORD *)(v10 + 36) = v12;
          if ( &pthread_create )
            __dmb();
            do
              v13 = __ldrex(v7);
            while ( __strex(v13 - 1, v7) );
          else
            v13 = (*v7)--;
          if ( v13 == 1 )
            v14 = (unsigned int *)(v5 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
            if ( &pthread_create )
            {
              __dmb();
              do
                v15 = __ldrex(v14);
              while ( __strex(v15 - 1, v14) );
            }
            else
              v15 = (*v14)--;
            if ( v15 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
          break;
        }
      }
      else
        __clrex();
    }
    result = (unsigned int *)v19;
    if ( v19 )
      v16 = (unsigned int *)(v19 + 8);
      if ( &pthread_create )
        __dmb();
        do
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        result = (unsigned int *)(*(int (**)(void))(*result + 12))();
  }
  return result;
}


int __fastcall Social::XboxLiveUserManager::_getUserProfileDataWithProfile(Social::XboxLiveUserManager *this, const Social::XboxProfile *a2, int **a3)
{
  int **v3; // r7@1
  const Social::XboxProfile *v4; // r8@1
  Social::XboxLiveUserManager *v5; // r4@1
  int v6; // r5@1
  unsigned int v7; // r0@2
  unsigned int *v8; // r6@2
  unsigned int v9; // r1@5
  unsigned int v10; // r2@6
  unsigned int v11; // r0@7
  bool v12; // zf@7
  unsigned int v13; // r0@13
  unsigned int *v14; // r6@17
  unsigned int v15; // r0@19
  int v16; // r0@24
  unsigned int *v17; // r0@25
  unsigned int v18; // r1@27
  int v19; // r0@30
  unsigned int *v20; // r2@31
  unsigned int v21; // r1@33
  int result; // r0@38
  unsigned int *v23; // r2@39
  unsigned int v24; // r1@41
  unsigned int v25; // [sp+0h] [bp-28h]@24
  int v26; // [sp+4h] [bp-24h]@24
  char v27; // [sp+8h] [bp-20h]@30
  int v28; // [sp+Ch] [bp-1Ch]@30

  v3 = a3;
  v4 = a2;
  v5 = this;
  Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)this, (int)a2, a3);
  v6 = *((_DWORD *)v5 + 1);
  if ( v6 )
  {
    v7 = *(_DWORD *)(v6 + 4);
    v8 = (unsigned int *)(v6 + 4);
    while ( v7 )
    {
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
      {
        v10 = __strex(v7 + 1, v8);
        v7 = v9;
        if ( !v10 )
        {
          __dmb();
          v11 = *v8;
          v12 = *v8 == 0;
          if ( *v8 )
          {
            v11 = *(_DWORD *)v5;
            v12 = *(_DWORD *)v5 == 0;
          }
          if ( !v12 )
            EntityInteraction::setInteractText((int *)(v11 + 4), (int *)v3 + 1);
          if ( &pthread_create )
            __dmb();
            do
              v13 = __ldrex(v8);
            while ( __strex(v13 - 1, v8) );
          else
            v13 = (*v8)--;
          if ( v13 == 1 )
            v14 = (unsigned int *)(v6 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
            if ( &pthread_create )
            {
              __dmb();
              do
                v15 = __ldrex(v14);
              while ( __strex(v15 - 1, v14) );
            }
            else
              v15 = (*v14)--;
            if ( v15 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
          break;
        }
      }
      else
        __clrex();
    }
  }
  v25 = *(_DWORD *)v5;
  v16 = *((_DWORD *)v5 + 1);
  v26 = v16;
  if ( v16 )
    v17 = (unsigned int *)(v16 + 8);
    if ( &pthread_create )
      do
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
    else
      ++*v17;
  Social::XboxLiveUserManager::_getUserProfileDataWithGamertag((int)&v27, (int)v4, v3 + 1, (int)&v25);
  v19 = v28;
  if ( v28 )
    v20 = (unsigned int *)(v28 + 8);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 == 1 )
      (*(void (__cdecl **)(int))(*(_DWORD *)v19 + 12))(v19);
  result = v26;
  if ( v26 )
    v23 = (unsigned int *)(v26 + 8);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      result = (*(int (__cdecl **)(int))(*(_DWORD *)result + 12))(result);
  return result;
}


signed int __fastcall Social::Events::XboxLiveTelemetry::getEventTagsFilter(Social::Events::XboxLiveTelemetry *this)
{
  return 15;
}


void __fastcall Social::User::~User(Social::User *this)
{
  Social::User *v1; // r0@1

  v1 = Social::User::~User(this);
  j_j_j__ZdlPv_4((void *)v1);
}


signed int __fastcall Social::Events::EventManager::setCommonProperty<std::string>(int *a1, int a2, int **a3, const char **a4)
{
  int *v4; // r4@1
  int v5; // r7@1
  int *v6; // r5@1
  const char **v7; // r6@1
  int v9; // [sp+0h] [bp-28h]@1

  v4 = (int *)a3;
  v5 = a2;
  v6 = a1;
  v7 = a4;
  Social::Events::EventManager::removeCommonProperty(a2, a3);
  sub_21E8AF4(v6, v4);
  Json::Value::Value((int)(v6 + 2), v7);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v9,
           (unsigned __int64 *)(v5 + 40),
           v4,
           (int)v6);
}


Social::XboxLiveUserManager *__fastcall Social::XboxLiveUserManager::~XboxLiveUserManager(Social::XboxLiveUserManager *this, int a2)
{
  Social::XboxLiveUserManager *v2; // r11@1
  char *v3; // r5@1
  void (*v4)(void); // r3@3
  char *v5; // r5@5 OVERLAPPED
  char *v6; // r6@5 OVERLAPPED
  AchievementData *v7; // r0@10
  AchievementData *v8; // r5@10
  AchievementData *v9; // r0@15
  AchievementData *v10; // r5@15
  int v11; // r5@20
  int v12; // r1@21
  void *v13; // r0@21
  int v14; // r5@23
  unsigned int *v15; // r1@24
  unsigned int v16; // r0@26
  unsigned int *v17; // r6@30
  unsigned int v18; // r0@32
  int v19; // r5@37 OVERLAPPED
  int v20; // r6@37 OVERLAPPED
  void (__fastcall *v21)(int, int, signed int); // r3@38
  int v22; // r5@44 OVERLAPPED
  int v23; // r6@44 OVERLAPPED
  void (__fastcall *v24)(int, int, signed int); // r3@45
  int v25; // r5@51 OVERLAPPED
  int v26; // r6@51 OVERLAPPED
  void (__fastcall *v27)(int, int, signed int); // r3@52
  int v28; // r1@58
  int v29; // r2@58
  int v30; // r3@58
  int v31; // r7@58
  __int64 v32; // kr10_8@58
  int v33; // r4@58
  void *v34; // r0@58
  unsigned int v35; // r6@59
  unsigned int v36; // r1@59
  unsigned int v37; // r7@60
  void *v38; // t1@61
  int v39; // r1@64
  void *v40; // r0@64
  int v41; // r5@65
  unsigned int *v42; // r1@66
  unsigned int v43; // r0@68
  unsigned int *v44; // r6@72
  unsigned int v45; // r0@74
  int v46; // r5@79
  unsigned int *v47; // r1@80
  unsigned int v48; // r0@82
  unsigned int *v49; // r6@86
  unsigned int v50; // r0@88
  void *v51; // r5@93
  void *v52; // r7@93
  unsigned int *v53; // r2@95
  signed int v54; // r1@97
  int *v55; // r0@103
  char *v56; // r0@108
  char *v57; // r0@111
  int v58; // r5@114
  unsigned int *v59; // r1@115
  unsigned int v60; // r0@117
  unsigned int *v61; // r6@121
  unsigned int v62; // r0@123
  void *v63; // r0@128
  int v64; // r0@130
  unsigned int *v65; // r2@131
  unsigned int v66; // r1@133
  unsigned int *v68; // r2@139
  signed int v69; // r1@141
  unsigned int *v70; // r2@143
  signed int v71; // r1@145
  int v72; // [sp+4h] [bp-44h]@58
  __int64 v73; // [sp+8h] [bp-40h]@58
  int v74; // [sp+10h] [bp-38h]@58
  int v75; // [sp+14h] [bp-34h]@58
  int v76; // [sp+18h] [bp-30h]@58
  int v77; // [sp+1Ch] [bp-2Ch]@58
  int v78; // [sp+20h] [bp-28h]@58

  v2 = this;
  *(_DWORD *)this = &off_26DED10;
  v3 = (char *)this + 128;
  if ( *((_BYTE *)this + 128) )
  {
    xbox::services::system::xbox_live_user::remove_sign_out_completed_handler(
      *((xbox::services::system::xbox_live_user **)this + 33),
      a2);
    *(_DWORD *)v3 = 0;
    *((_DWORD *)v3 + 1) = 0;
  }
  std::vector<Social::XboxLiveUserManager::ProfileCallback,std::allocator<Social::XboxLiveUserManager::ProfileCallback>>::~vector((unsigned __int64 *)v2 + 49);
  v4 = (void (*)(void))*((_DWORD *)v2 + 96);
  if ( v4 )
    v4();
  *(_QWORD *)&v5 = *(_QWORD *)((char *)v2 + 348);
  if ( v5 != v6 )
    do
    {
      *(_DWORD *)(*(_DWORD *)v5 + 4) = 0;
      (*(void (**)(void))(**(_DWORD **)v5 + 8))();
      v5 += 4;
    }
    while ( v6 != v5 );
    v5 = (char *)*((_DWORD *)v2 + 87);
  if ( v5 )
    operator delete(v5);
  v8 = (AchievementData *)(*(_QWORD *)((char *)v2 + 324) >> 32);
  v7 = (AchievementData *)*(_QWORD *)((char *)v2 + 324);
  if ( v7 != v8 )
      v7 = (AchievementData *)((char *)AchievementData::~AchievementData(v7) + 48);
    while ( v8 != v7 );
    v7 = (AchievementData *)*((_DWORD *)v2 + 81);
  if ( v7 )
    operator delete((void *)v7);
  v10 = (AchievementData *)(*(_QWORD *)((char *)v2 + 292) >> 32);
  v9 = (AchievementData *)*(_QWORD *)((char *)v2 + 292);
  if ( v9 != v10 )
      v9 = (AchievementData *)((char *)AchievementData::~AchievementData(v9) + 48);
    while ( v10 != v9 );
    v9 = (AchievementData *)*((_DWORD *)v2 + 73);
  if ( v9 )
    operator delete((void *)v9);
  v11 = *((_DWORD *)v2 + 65);
  if ( v11 )
    v12 = *(_DWORD *)(v11 + 8);
    v13 = (void *)(v12 - 12);
    if ( (int *)(v12 - 12) != &dword_28898C0 )
      v70 = (unsigned int *)(v12 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v71 = __ldrex(v70);
        while ( __strex(v71 - 1, v70) );
      }
      else
        v71 = (*v70)--;
      if ( v71 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v13);
    operator delete((void *)v11);
  *((_DWORD *)v2 + 65) = 0;
  v14 = *((_DWORD *)v2 + 63);
  if ( v14 )
    v15 = (unsigned int *)(v14 + 4);
    if ( &pthread_create )
      __dmb();
      do
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
    else
      v16 = (*v15)--;
    if ( v16 == 1 )
      v17 = (unsigned int *)(v14 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 8))(v14);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 12))(v14);
  *(_QWORD *)&v19 = *(_QWORD *)((char *)v2 + 236);
  if ( v19 != v20 )
      v21 = *(void (__fastcall **)(int, int, signed int))(v19 + 8);
      if ( v21 )
        v21(v19, v19, 3);
      v19 += 16;
    while ( v20 != v19 );
    v19 = *((_DWORD *)v2 + 59);
  if ( v19 )
    operator delete((void *)v19);
  *(_QWORD *)&v22 = *((_QWORD *)v2 + 28);
  if ( v22 != v23 )
      v24 = *(void (__fastcall **)(int, int, signed int))(v22 + 8);
      if ( v24 )
        v24(v22, v22, 3);
      v22 += 16;
    while ( v23 != v22 );
    v22 = *((_DWORD *)v2 + 56);
  if ( v22 )
    operator delete((void *)v22);
  *(_QWORD *)&v25 = *(_QWORD *)((char *)v2 + 212);
  if ( v25 != v26 )
      v27 = *(void (__fastcall **)(int, int, signed int))(v25 + 8);
      if ( v27 )
        v27(v25, v25, 3);
      v25 += 16;
    while ( v26 != v25 );
    v25 = *((_DWORD *)v2 + 53);
  if ( v25 )
    operator delete((void *)v25);
  v28 = *((_DWORD *)v2 + 45);
  v29 = *((_DWORD *)v2 + 46);
  v30 = *((_DWORD *)v2 + 47);
  v31 = *((_DWORD *)v2 + 48);
  v32 = *(_QWORD *)((char *)v2 + 196);
  v33 = *((_DWORD *)v2 + 51);
  v75 = *((_DWORD *)v2 + 44);
  v76 = v28;
  v77 = v29;
  v78 = v30;
  v72 = v31;
  v73 = v32;
  v74 = v33;
  std::deque<std::function<void ()(void)>,std::allocator<std::function<void ()(void)>>>::_M_destroy_data_aux(
    (int)v2 + 168,
    (int)&v75,
    (int)&v72);
  v34 = (void *)*((_DWORD *)v2 + 42);
  if ( v34 )
    v35 = *((_DWORD *)v2 + 51);
    v36 = *((_DWORD *)v2 + 47);
    if ( v36 < v35 + 4 )
      v37 = v36 - 4;
        v38 = *(void **)(v37 + 4);
        v37 += 4;
        operator delete(v38);
      while ( v37 < v35 );
      v34 = (void *)*((_DWORD *)v2 + 42);
    operator delete(v34);
  v39 = *((_DWORD *)v2 + 38);
  v40 = (void *)(v39 - 12);
  if ( (int *)(v39 - 12) != &dword_28898C0 )
    v68 = (unsigned int *)(v39 - 4);
        v69 = __ldrex(v68);
      while ( __strex(v69 - 1, v68) );
      v69 = (*v68)--;
    if ( v69 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v40);
  v41 = *((_DWORD *)v2 + 37);
  if ( v41 )
    v42 = (unsigned int *)(v41 + 4);
        v43 = __ldrex(v42);
      while ( __strex(v43 - 1, v42) );
      v43 = (*v42)--;
    if ( v43 == 1 )
      v44 = (unsigned int *)(v41 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v41 + 8))(v41);
          v45 = __ldrex(v44);
        while ( __strex(v45 - 1, v44) );
        v45 = (*v44)--;
      if ( v45 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v41 + 12))(v41);
  v46 = *((_DWORD *)v2 + 35);
  if ( v46 )
    v47 = (unsigned int *)(v46 + 4);
        v48 = __ldrex(v47);
      while ( __strex(v48 - 1, v47) );
      v48 = (*v47)--;
    if ( v48 == 1 )
      v49 = (unsigned int *)(v46 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v46 + 8))(v46);
          v50 = __ldrex(v49);
        while ( __strex(v50 - 1, v49) );
        v50 = (*v49)--;
      if ( v50 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v46 + 12))(v46);
  v52 = (void *)(*(_QWORD *)((char *)v2 + 108) >> 32);
  v51 = (void *)*(_QWORD *)((char *)v2 + 108);
  if ( v51 != v52 )
      v55 = (int *)(*(_DWORD *)v51 - 12);
      if ( v55 != &dword_28898C0 )
        v53 = (unsigned int *)(*(_DWORD *)v51 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v54 = __ldrex(v53);
          while ( __strex(v54 - 1, v53) );
        }
        else
          v54 = (*v53)--;
        if ( v54 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v55);
      v51 = (char *)v51 + 4;
    while ( v51 != v52 );
    v51 = (void *)*((_DWORD *)v2 + 27);
  if ( v51 )
    operator delete(v51);
  std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v2 + 80);
  v56 = (char *)*((_DWORD *)v2 + 20);
  if ( v56 && (char *)v2 + 104 != v56 )
    operator delete(v56);
  std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v2 + 52);
  v57 = (char *)*((_DWORD *)v2 + 13);
  if ( v57 && (char *)v2 + 76 != v57 )
    operator delete(v57);
  v58 = *((_DWORD *)v2 + 12);
  if ( v58 )
    v59 = (unsigned int *)(v58 + 4);
        v60 = __ldrex(v59);
      while ( __strex(v60 - 1, v59) );
      v60 = (*v59)--;
    if ( v60 == 1 )
      v61 = (unsigned int *)(v58 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v58 + 8))(v58);
          v62 = __ldrex(v61);
        while ( __strex(v62 - 1, v61) );
        v62 = (*v61)--;
      if ( v62 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v58 + 12))(v58);
  v63 = (void *)*((_DWORD *)v2 + 8);
  if ( v63 )
    operator delete(v63);
  v64 = *((_DWORD *)v2 + 3);
  if ( v64 )
    v65 = (unsigned int *)(v64 + 8);
        v66 = __ldrex(v65);
      while ( __strex(v66 - 1, v65) );
      v66 = (*v65)--;
    if ( v66 == 1 )
      (*(void (**)(void))(*(_DWORD *)v64 + 12))();
  AppPlatformListener::~AppPlatformListener(v2);
  return v2;
}


unsigned int *__fastcall Social::XboxLiveUserManager::getUserProfileDataByXuid(int a1, int a2, int **a3)
{
  int v3; // r4@1
  int v4; // r0@1
  unsigned int *result; // r0@2
  unsigned int v6; // r1@5

  v3 = a1;
  v4 = std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a2 + 80),
         a3);
  if ( v4 )
  {
    *(_DWORD *)v3 = *(_DWORD *)(v4 + 8);
    result = *(unsigned int **)(v4 + 12);
    *(_DWORD *)(v3 + 4) = result;
    if ( result )
    {
      result += 2;
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(result);
        while ( __strex(v6 + 1, result) );
      }
      else
        ++*result;
    }
  }
  else
    result = 0;
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 0;
  return result;
}


signed int __fastcall Social::Events::EventManager::setGlobalProperty<float>(int a1, int a2, int **a3, int a4)
{
  int *v4; // r4@1
  int v5; // r6@1
  int v6; // r5@1
  int v13; // r1@1
  char v15; // [sp+4h] [bp-24h]@1

  v4 = (int *)a3;
  v5 = a2;
  v6 = a1;
  _R7 = a4;
  Social::Events::EventManager::removeGlobalProperty(a2, a3);
  sub_21E8AF4((int *)v6, v4);
  __asm
  {
    VLDR            S0, [R7]
    VCVT.F64.F32    D0, S0
    VMOV            R2, R3, D0
  }
  Json::Value::Value((Json::Value *)(v6 + 8), v13, _R2);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v15,
           (unsigned __int64 *)(v5 + 12),
           v4,
           v6);
}


int __fastcall Social::MultiplayerServiceManager::getUidsInLobby(int a1, unsigned __int64 *a2, int a3)
{
  Social::MultiplayerService **v3; // r4@1
  Social::MultiplayerService **v4; // r6@1
  int v5; // r5@1
  int v6; // r8@1
  int v7; // r7@2
  int result; // r0@4

  v4 = (Social::MultiplayerService **)(*a2 >> 32);
  v3 = (Social::MultiplayerService **)*a2;
  v5 = a3;
  v6 = a1;
  if ( v3 == v4 )
  {
LABEL_4:
    result = 0;
    *(_DWORD *)v6 = 0;
    *(_DWORD *)(v6 + 4) = 0;
    *(_DWORD *)(v6 + 8) = 0;
  }
  else
    while ( 1 )
    {
      v7 = (int)(v3 + 1);
      if ( Social::MultiplayerService::getServiceId(*v3) == v5 )
        break;
      ++v3;
      if ( v4 == (Social::MultiplayerService **)v7 )
        goto LABEL_4;
    }
    result = (*(int (__fastcall **)(int))(*(_DWORD *)*v3 + 84))(v6);
  return result;
}


void __fastcall Social::Events::Event::addProperty<std::string>(int a1, int *a2, const char **a3)
{
  Social::Events::Event::addProperty<std::string>(a1, a2, a3);
}


int __fastcall Social::UserManager::setUserClient(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r3@1
  int v6; // r1@1
  int v7; // r8@1
  int v8; // r2@2
  int result; // r0@3
  int v10; // r9@14
  int v11; // r7@14
  unsigned int *v12; // r1@15
  unsigned int v13; // r0@17
  unsigned int *v14; // r5@21
  unsigned int v15; // r0@23
  Social::User **v16; // r5@30
  Social::User **v17; // r7@30
  Social::User **v18; // r5@34
  Social::User **v19; // r7@34
  bool v20; // zf@34
  int v21; // r5@40
  int v22; // r9@40
  unsigned int *v23; // r0@41
  unsigned int v24; // r1@43
  unsigned int v25; // r1@48
  unsigned int *v26; // r1@51
  unsigned int *v27; // r7@57
  int v28; // r0@65
  unsigned int *v29; // r0@66
  unsigned int v30; // r1@68
  int v31; // r4@71
  unsigned int *v32; // r1@72
  unsigned int *v33; // r5@78
  int v34; // [sp+0h] [bp-30h]@71
  int v35; // [sp+8h] [bp-28h]@65
  int v36; // [sp+Ch] [bp-24h]@65
  int v37; // [sp+10h] [bp-20h]@65

  v3 = a1;
  v4 = a2;
  v5 = *(_DWORD *)(a1 + 56);
  v6 = a1 + 52;
  v7 = a3;
  if ( v5 )
  {
    v8 = a1 + 52;
    do
    {
      result = v5;
      while ( *(_DWORD *)(result + 16) < v4 )
      {
        result = *(_DWORD *)(result + 12);
        if ( !result )
        {
          result = v8;
          goto LABEL_10;
        }
      }
      v5 = *(_DWORD *)(result + 8);
      v8 = result;
    }
    while ( v5 );
  }
  else
    result = a1 + 52;
LABEL_10:
  if ( result != v6 )
    if ( *(_DWORD *)(result + 16) > v4 )
      result = v6;
    if ( result != v6 )
      v10 = sub_119D57C(result, v6);
      v11 = *(_DWORD *)(v10 + 24);
      if ( v11 )
        v12 = (unsigned int *)(v11 + 4);
        if ( &pthread_create )
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
        else
          v13 = (*v12)--;
        if ( v13 == 1 )
          v14 = (unsigned int *)(v11 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          if ( &pthread_create )
          {
            __dmb();
            do
              v15 = __ldrex(v14);
            while ( __strex(v15 - 1, v14) );
          }
          else
            v15 = (*v14)--;
          if ( v15 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
      operator delete((void *)v10);
      result = *(_DWORD *)(v3 + 68) - 1;
      *(_DWORD *)(v3 + 68) = result;
  if ( v4 != -1 )
    v16 = (Social::User **)(*(_QWORD *)(v3 + 8) >> 32);
    v17 = (Social::User **)*(_QWORD *)(v3 + 8);
    if ( v17 == v16 )
      return result;
    while ( 1 )
      result = Social::User::getGameControllerId(*v17);
      if ( result == v4 )
        break;
      v17 += 2;
      if ( v16 == v17 )
        return result;
    v21 = *(_QWORD *)v17 >> 32;
    v22 = *(_QWORD *)v17;
    if ( !v21 )
      goto LABEL_64;
    v23 = (unsigned int *)(v21 + 4);
    if ( &pthread_create )
      __dmb();
      do
        v24 = __ldrex(v23);
      while ( __strex(v24 + 1, v23) );
      goto LABEL_51;
LABEL_50:
    ++*v23;
LABEL_51:
    v26 = (unsigned int *)(v21 + 4);
        result = __ldrex(v26);
      while ( __strex(result - 1, v26) );
    else
      result = (*v26)--;
    if ( result == 1 )
      v27 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
      if ( &pthread_create )
        __dmb();
        do
          result = __ldrex(v27);
        while ( __strex(result - 1, v27) );
      else
        result = (*v27)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
LABEL_64:
    if ( v22 )
      v35 = v4;
      v36 = *(_DWORD *)v7;
      v28 = *(_DWORD *)(v7 + 4);
      v37 = v28;
      if ( v28 )
        v29 = (unsigned int *)(v28 + 4);
            v30 = __ldrex(v29);
          while ( __strex(v30 + 1, v29) );
          ++*v29;
      result = std::_Rb_tree<int,std::pair<int const,std::shared_ptr<ClientInstance>>,std::_Select1st<std::pair<int const,std::shared_ptr<ClientInstance>>>,std::less<int>,std::allocator<std::pair<int const,std::shared_ptr<ClientInstance>>>>::_M_insert_unique<std::pair&<int,std::shared_ptr<ClientInstance>>>(
                 (int)&v34,
                 v3 + 48,
                 &v35);
      v31 = v37;
      if ( v37 )
        v32 = (unsigned int *)(v37 + 4);
            result = __ldrex(v32);
          while ( __strex(result - 1, v32) );
          result = (*v32)--;
        if ( result == 1 )
          v33 = (unsigned int *)(v31 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 8))(v31);
              result = __ldrex(v33);
            while ( __strex(result - 1, v33) );
            result = (*v33)--;
          if ( result == 1 )
            result = (*(int (__fastcall **)(int))(*(_DWORD *)v31 + 12))(v31);
    return result;
  v18 = (Social::User **)(*(_QWORD *)(v3 + 8) >> 32);
  v19 = (Social::User **)*(_QWORD *)(v3 + 8);
  v20 = v18 == v19;
  if ( v18 != v19 )
    v20 = v19 == v18;
  if ( !v20 )
      result = Social::User::getGameControllerId(*v19);
      if ( result == *(_DWORD *)(v3 + 44) )
      v19 += 2;
      if ( v18 == v19 )
    v21 = *(_QWORD *)v19 >> 32;
    v22 = *(_QWORD *)v19;
        v25 = __ldrex(v23);
      while ( __strex(v25 + 1, v23) );
    goto LABEL_50;
  return result;
}


signed int __fastcall Social::MultiplayerXBL::_shouldAddGameToGameList(Social::MultiplayerXBL *this, const Social::MultiplayerGameInfo *a2)
{
  const Social::MultiplayerGameInfo *v2; // r4@1
  int v3; // r1@1
  int v4; // r0@3
  _BOOL4 v5; // r4@3
  int v6; // r5@3
  unsigned int *v7; // r1@4
  unsigned int v8; // r0@6
  unsigned int *v9; // r6@10
  unsigned int v10; // r0@12
  signed int result; // r0@18
  Social::User *v12; // [sp+0h] [bp-18h]@3
  int v13; // [sp+4h] [bp-14h]@3

  v2 = a2;
  v3 = *((_DWORD *)a2 + 21);
  if ( (unsigned int)(v3 - 3) < 2 )
    goto LABEL_22;
  if ( v3 != 2 )
    goto LABEL_23;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v12, *((_DWORD *)this + 11));
  v4 = Social::User::getLiveUser(v12);
  v5 = Social::XboxLiveUserManager::isUserOnFriendList(v4, (int **)v2 + 3);
  v6 = v13;
  if ( v13 )
  {
    v7 = (unsigned int *)(v13 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 == 1 )
      v9 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      }
      else
        v10 = (*v9)--;
      if ( v10 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  }
  if ( v5 )
LABEL_22:
    result = 1;
  else
LABEL_23:
    result = 0;
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::_handleUISignInNoError(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r11@1
  int v5; // r8@1
  int v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  int v11; // r10@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  unsigned int v16; // r0@28
  char v17; // r9@30
  unsigned int v18; // r0@32
  void (__fastcall *v19)(int *, int, signed int); // r3@35
  void (__fastcall *v20)(_DWORD, _DWORD, _DWORD); // r6@35
  void *v21; // r1@37
  int v22; // r12@37
  unsigned int *v23; // r2@38
  unsigned int v24; // r3@40
  __int64 v25; // kr00_8@43
  __int64 v26; // kr08_8@43
  int v27; // r2@43
  int v28; // r0@47
  unsigned int *v29; // r2@48
  unsigned int v30; // r1@50
  void (__fastcall *v31)(int *, int, signed int); // r3@53
  void (__fastcall *v32)(_DWORD, _DWORD, _DWORD); // r7@53
  void *v33; // r1@55
  int v34; // r12@55
  int v35; // r2@55
  unsigned int *v36; // r2@56
  unsigned int v37; // r3@58
  __int64 v38; // kr10_8@61
  int v39; // r2@61
  unsigned int result; // r0@75
  int v41; // [sp+8h] [bp-70h]@36
  int v42; // [sp+Ch] [bp-6Ch]@43
  void (__fastcall *v43)(_DWORD, _DWORD, _DWORD); // [sp+10h] [bp-68h]@35
  int v44; // [sp+14h] [bp-64h]@36
  void *v45; // [sp+18h] [bp-60h]@43
  void (*v46)(void); // [sp+20h] [bp-58h]@37
  int (__fastcall *v47)(int *); // [sp+24h] [bp-54h]@43
  int v48; // [sp+28h] [bp-50h]@30
  int v49; // [sp+2Ch] [bp-4Ch]@30
  int v50; // [sp+30h] [bp-48h]@54
  void (__fastcall *v51)(_DWORD, _DWORD, _DWORD); // [sp+38h] [bp-40h]@53
  int v52; // [sp+3Ch] [bp-3Ch]@54
  char v53; // [sp+40h] [bp-38h]@55
  void *v54; // [sp+44h] [bp-34h]@61
  void (*v55)(void); // [sp+4Ch] [bp-2Ch]@55
  int (__fastcall *v56)(int); // [sp+50h] [bp-28h]@61

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(_DWORD *)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  if ( *(_DWORD *)v6 )
    MinecraftEventing::fireEventSignInToXboxLive(*(_DWORD *)(v3 + 120), v3, 1, 3);
        v16 = __ldrex(v12);
      while ( __strex(v16 + 1, v12) );
      ++*v12;
    v43 = 0;
    v19 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
    v20 = 0;
    if ( v19 )
      v19(&v41, v4, 2);
      v44 = *(_DWORD *)(v4 + 12);
      v20 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v4 + 8);
      v43 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v4 + 8);
    v46 = 0;
    v21 = operator new(0x18u);
    *(_DWORD *)v21 = v11;
    *((_DWORD *)v21 + 1) = v5;
    if ( v5 )
      v23 = (unsigned int *)(v5 + 8);
      if ( &pthread_create )
      {
        __dmb();
        do
          v24 = __ldrex(v23);
        while ( __strex(v24 + 1, v23) );
        v22 = *((_DWORD *)v21 + 5);
        v20 = v43;
      }
      else
        ++*v23;
    v25 = *(_QWORD *)&v41;
    v26 = *((_QWORD *)v21 + 1);
    v41 = *((_QWORD *)v21 + 1);
    v42 = HIDWORD(v26);
    *((_QWORD *)v21 + 1) = v25;
    v27 = v44;
    *((_DWORD *)v21 + 4) = v20;
    v44 = v22;
    *((_DWORD *)v21 + 5) = v27;
    v45 = v21;
    v46 = (void (*)(void))sub_106A4C8;
    v47 = sub_106A37C;
    MPMCQueue<std::function<void ()(void)>>::push(v3 + 168, (int)&v45);
    if ( v46 )
      v46();
    if ( v43 )
      v43(&v41, &v41, 3);
    v28 = v5;
      v29 = (unsigned int *)(v5 + 8);
          v30 = __ldrex(v29);
        while ( __strex(v30 - 1, v29) );
        goto LABEL_71;
      goto LABEL_70;
    v17 = *(_BYTE *)(v6 + 4);
    v48 = v11;
    v49 = v5;
        v18 = __ldrex(v12);
      while ( __strex(v18 + 1, v12) );
    v51 = 0;
    v31 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
    v32 = 0;
    if ( v31 )
      v31(&v50, v4, 2);
      v52 = *(_DWORD *)(v4 + 12);
      v32 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v4 + 8);
      v51 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v4 + 8);
    v53 = v17;
    v55 = 0;
    v33 = operator new(0x1Cu);
    *(_DWORD *)v33 = v48;
    v35 = v49;
    *((_DWORD *)v33 + 1) = v49;
    if ( v35 )
      v36 = (unsigned int *)(v35 + 8);
          v37 = __ldrex(v36);
        while ( __strex(v37 + 1, v36) );
        v34 = *((_DWORD *)v33 + 5);
        v17 = v53;
        v32 = v51;
        ++*v36;
    v38 = *(_QWORD *)&v50;
    *(_QWORD *)&v50 = *((_QWORD *)v33 + 1);
    *((_QWORD *)v33 + 1) = v38;
    v39 = v52;
    *((_DWORD *)v33 + 4) = v32;
    *((_DWORD *)v33 + 5) = v39;
    v52 = v34;
    *((_BYTE *)v33 + 24) = v17;
    v54 = v33;
    v55 = (void (*)(void))sub_106A244;
    v56 = sub_106A0F0;
    MPMCQueue<std::function<void ()(void)>>::push(v3 + 168, (int)&v54);
    if ( v55 )
      v55();
    if ( v51 )
      v51(&v50, &v50, 3);
    v28 = v49;
    if ( v49 )
      v29 = (unsigned int *)(v49 + 8);
LABEL_71:
        if ( v30 == 1 )
          (*(void (**)(void))(*(_DWORD *)v28 + 12))();
        goto LABEL_73;
LABEL_70:
      v30 = (*v29)--;
      goto LABEL_71;
LABEL_73:
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


void __fastcall Social::Events::AutomationEventLogger::~AutomationEventLogger(Social::Events::AutomationEventLogger *this)
{
  Social::Events::AutomationEventLogger::~AutomationEventLogger(this);
}


Json::Value *__fastcall Social::Events::EventManager::getGlobalProperty(int a1, int a2, int **a3)
{
  int v3; // r5@1
  int *v4; // r4@1
  int v5; // r0@1
  int v6; // r6@1
  Json::Value *result; // r0@2

  v3 = a1;
  v4 = (int *)a3;
  v5 = j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a2 + 12),
         a3);
  v6 = v5;
  if ( v5 )
  {
    sub_21E8AF4((int *)v3, (int *)(v5 + 16));
    result = j_Json::Value::Value((Json::Value *)(v3 + 8), (const Json::Value *)(v6 + 24));
  }
  else
    sub_21E8AF4((int *)v3, v4);
    result = (Json::Value *)j_Json::Value::Value((Json::Value *)(v3 + 8), 0);
  return result;
}


void __fastcall Social::User::updateSettingsPathAndLoad(Social::User *this)
{
  Social::User::updateSettingsPathAndLoad(this);
}


int __fastcall Social::XboxLiveUserManager::_populateAchievementData(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  xbox::services::system::xbox_live_user *v2; // r0@1
  bool v3; // zf@1
  unsigned int v4; // r0@5
  int result; // r0@8

  v1 = this;
  v2 = (xbox::services::system::xbox_live_user *)*((_DWORD *)this + 34);
  v3 = v2 == 0;
  if ( v2 )
    v3 = *((_DWORD *)v1 + 36) == 0;
  if ( !v3 && xbox::services::system::xbox_live_user::is_signed_in(v2) == 1 )
  {
    v4 = *((_WORD *)v1 + 62);
    if ( v4 <= 0xFF && !(_BYTE)v4 )
    {
      Social::XboxLiveUserManager::_sortAchievementData(v1);
      PlayerAchievementData::operator=((int)v1 + 272, (int)v1 + 304);
    }
  }
  PlayerAchievementData::clear((Social::XboxLiveUserManager *)((char *)v1 + 304));
  result = 0;
  *((_BYTE *)v1 + 337) = 0;
  return result;
}


Social::XboxLiveUserManager *__fastcall Social::XboxLiveUserManager::XboxLiveUserManager(Social::XboxLiveUserManager *this, MinecraftEventing *a2)
{
  MinecraftEventing *v2; // r10@1
  Social::XboxLiveUserManager *v3; // r4@1
  double v4; // r0@1
  double v5; // r0@1
  int v6; // r6@3
  void *v7; // r5@3
  unsigned int v8; // r0@4
  int v9; // r6@6
  void *v10; // r5@6
  __int64 v15; // r0@7
  __int64 v18; // r0@9
  int v19; // r6@9
  unsigned int *v20; // r1@10
  unsigned int v21; // r0@12
  unsigned int *v22; // r5@16
  unsigned int v23; // r0@18
  int v24; // r5@23
  unsigned int *v25; // r1@24
  unsigned int v26; // r0@26
  unsigned int *v27; // r6@30
  unsigned int v28; // r0@32
  void *v29; // r0@37
  int v30; // r5@37
  int v31; // r1@38
  void *v32; // r0@38
  void *v33; // r5@39
  int v34; // r1@40
  void *v35; // r0@40
  unsigned int *v37; // r2@45
  signed int v38; // r1@47
  unsigned int *v39; // r2@49
  signed int v40; // r1@51
  char v41; // [sp+17h] [bp-69h]@37
  void *ptr; // [sp+18h] [bp-68h]@37
  char v43; // [sp+1Ch] [bp-64h]@9
  int v44; // [sp+20h] [bp-60h]@9
  int (*v45)(void); // [sp+24h] [bp-5Ch]@7
  __int64 v46; // [sp+2Ch] [bp-54h]@7

  v2 = a2;
  v3 = this;
  AppPlatformListener::AppPlatformListener(this);
  *((_DWORD *)v3 + 2) = 0;
  *((_DWORD *)v3 + 3) = 0;
  *(_DWORD *)v3 = &off_26DED10;
  *((_DWORD *)v3 + 4) = 0;
  *((_DWORD *)v3 + 5) = 0;
  *((_DWORD *)v3 + 7) = 0;
  *((_DWORD *)v3 + 6) = 300;
  *((_DWORD *)v3 + 15) = 0;
  *((_DWORD *)v3 + 16) = 0;
  *((_DWORD *)v3 + 11) = 0;
  *((_DWORD *)v3 + 12) = 0;
  *((_DWORD *)v3 + 9) = 0;
  *((_DWORD *)v3 + 10) = 0;
  *((_DWORD *)v3 + 8) = 0;
  *((_DWORD *)v3 + 17) = 1065353216;
  *((_DWORD *)v3 + 18) = 0;
  LODWORD(v4) = (char *)v3 + 68;
  v5 = COERCE_DOUBLE(__PAIR__(10, sub_119C844(v4)));
  *((_DWORD *)v3 + 14) = LODWORD(v5);
  if ( LODWORD(v5) == 1 )
  {
    *((_DWORD *)v3 + 19) = 0;
    v7 = (char *)v3 + 76;
  }
  else
    if ( LODWORD(v5) >= 0x40000000 )
      sub_119C874();
    v6 = 4 * LODWORD(v5);
    v7 = operator new(4 * LODWORD(v5));
    _aeabi_memclr4(v7, v6);
  *((_DWORD *)v3 + 13) = v7;
  *((_DWORD *)v3 + 22) = 0;
  *((_DWORD *)v3 + 23) = 0;
  *((_DWORD *)v3 + 24) = 1065353216;
  *((_DWORD *)v3 + 25) = 0;
  LODWORD(v5) = (char *)v3 + 96;
  v8 = sub_119C844(v5);
  *((_DWORD *)v3 + 21) = v8;
  if ( v8 == 1 )
    *((_DWORD *)v3 + 26) = 0;
    v10 = (char *)v3 + 104;
    if ( v8 >= 0x40000000 )
    v9 = 4 * v8;
    v10 = operator new(4 * v8);
    _aeabi_memclr4(v10, v9);
  *((_DWORD *)v3 + 20) = v10;
  *((_DWORD *)v3 + 27) = 0;
  *((_DWORD *)v3 + 28) = 0;
  *((_DWORD *)v3 + 29) = 0;
  *((_DWORD *)v3 + 30) = v2;
  *((_WORD *)v3 + 62) = 0;
  *((_BYTE *)v3 + 128) = 0;
  *((_DWORD *)v3 + 34) = 0;
  *((_DWORD *)v3 + 35) = 0;
  *((_DWORD *)v3 + 36) = 0;
  *((_DWORD *)v3 + 37) = 0;
  sub_119C884((void **)v3 + 38, "Unknown");
  sub_119D2DC((_QWORD *)v3 + 20);
  MPMCQueue<std::function<void ()(void)>>::MPMCQueue((int)v3 + 168);
  _aeabi_memclr4((char *)v3 + 212, 44);
  *((_BYTE *)v3 + 256) = 1;
  *((_DWORD *)v3 + 65) = 0;
  sub_119D2DC((_QWORD *)v3 + 33);
  PlayerAchievementData::PlayerAchievementData((Social::XboxLiveUserManager *)((char *)v3 + 272));
  PlayerAchievementData::PlayerAchievementData((Social::XboxLiveUserManager *)((char *)v3 + 304));
  __asm { VMOV.F64        D0, #10.0 }
  *((_BYTE *)v3 + 337) = 0;
  LODWORD(v15) = std::_Function_base::_Base_manager<double (*)(void)>::_M_manager;
  HIDWORD(v15) = std::_Function_handler<double ()(void),double (*)(void)>::_M_invoke;
  __asm { VMOV            R2, R3, D0 }
  *((_DWORD *)v3 + 85) = 0;
  *((_DWORD *)v3 + 87) = 0;
  *((_DWORD *)v3 + 88) = 0;
  *((_DWORD *)v3 + 89) = 0;
  v45 = getTimeS;
  v46 = v15;
  BasicTimer::BasicTimer(
    (int)v3 + 360,
    (int)std::_Function_handler<double ()(void),double (*)(void)>::_M_invoke,
    _R2,
    _R3,
    (int)&v45);
  if ( (_DWORD)v46 )
    ((void (*)(void))v46)();
  *((_DWORD *)v3 + 98) = 0;
  *((_DWORD *)v3 + 99) = 0;
  *((_DWORD *)v3 + 100) = 0;
  __dmb();
  *((_BYTE *)v3 + 336) = 0;
  std::__shared_ptr<Social::XboxLiveUserInfo,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<Social::XboxLiveUserInfo>,Social::XboxLiveUserManager &>((int)&v43);
  v18 = *(_QWORD *)&v43;
  *(_DWORD *)&v43 = 0;
  v44 = 0;
  *((_DWORD *)v3 + 62) = v18;
  v19 = *((_DWORD *)v3 + 63);
  *((_DWORD *)v3 + 63) = HIDWORD(v18);
  if ( v19 )
    v20 = (unsigned int *)(v19 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
    }
    else
      v21 = (*v20)--;
    if ( v21 == 1 )
      v22 = (unsigned int *)(v19 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
      if ( &pthread_create )
      {
        __dmb();
        do
          v23 = __ldrex(v22);
        while ( __strex(v23 - 1, v22) );
      }
      else
        v23 = (*v22)--;
      if ( v23 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
  v24 = v44;
  if ( v44 )
    v25 = (unsigned int *)(v44 + 4);
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
      v26 = (*v25)--;
    if ( v26 == 1 )
      v27 = (unsigned int *)(v24 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
          v28 = __ldrex(v27);
        while ( __strex(v28 - 1, v27) );
        v28 = (*v27)--;
      if ( v28 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
  v41 = 0;
  std::make_unique<Social::ImageService,Social::XboxLiveUserManager &,char const(&)[17],bool>(
    &ptr,
    (int)v3,
    "AchievementIcons",
    &v41);
  v29 = ptr;
  ptr = 0;
  v30 = *((_DWORD *)v3 + 65);
  *((_DWORD *)v3 + 65) = v29;
  if ( v30 )
    v31 = *(_DWORD *)(v30 + 8);
    v32 = (void *)(v31 - 12);
    if ( (int *)(v31 - 12) != &dword_28898C0 )
      v37 = (unsigned int *)(v31 - 4);
          v38 = __ldrex(v37);
        while ( __strex(v38 - 1, v37) );
        v38 = (*v37)--;
      if ( v38 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v32);
    operator delete((void *)v30);
    v33 = ptr;
    if ( ptr )
      v34 = *((_DWORD *)ptr + 2);
      v35 = (void *)(v34 - 12);
      if ( (int *)(v34 - 12) != &dword_28898C0 )
        v39 = (unsigned int *)(v34 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v40 = __ldrex(v39);
          while ( __strex(v40 - 1, v39) );
        }
        else
          v40 = (*v39)--;
        if ( v40 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v35);
      operator delete(v33);
  return v3;
}


int __fastcall Social::UserManager::createPrimaryUser(int a1, MinecraftEventing *a2, int a3)
{
  int v3; // r6@1
  MinecraftEventing *v4; // r4@1
  int v5; // r0@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@4
  int v8; // r0@7
  int v9; // r5@7
  unsigned int *v10; // r1@8
  unsigned int v11; // r0@10
  unsigned int *v12; // r7@14
  unsigned int v13; // r0@16
  unsigned int *v14; // r0@22
  unsigned int v15; // r1@24
  int v16; // r6@27
  unsigned int *v17; // r1@28
  unsigned int v18; // r0@30
  unsigned int *v19; // r5@34
  unsigned int v20; // r0@36
  int result; // r0@41
  int v22; // r4@41
  unsigned int *v23; // r1@42
  unsigned int *v24; // r5@48
  unsigned int v25; // [sp+Ch] [bp-34h]@41
  Social::User *v26; // [sp+10h] [bp-30h]@21
  int v27; // [sp+14h] [bp-2Ch]@21
  int v28; // [sp+18h] [bp-28h]@1
  int v29; // [sp+1Ch] [bp-24h]@1
  Social::User *v30; // [sp+20h] [bp-20h]@7
  int v31; // [sp+24h] [bp-1Ch]@21

  v3 = a1;
  v28 = *(_DWORD *)a3;
  v4 = a2;
  v5 = *(_DWORD *)(a3 + 4);
  v29 = v5;
  if ( v5 )
  {
    v6 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 + 1, v6) );
    }
    else
      ++*v6;
  }
  v8 = *(_DWORD *)(v3 + 128);
  *(_DWORD *)(v3 + 128) = v8 + 1;
  Social::User::create((int)&v30, 0, 0, v4, (int)&v28, v8);
  v9 = v29;
  if ( v29 )
    v10 = (unsigned int *)(v29 + 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 - 1, v10) );
      v11 = (*v10)--;
    if ( v11 == 1 )
      v12 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
      if ( &pthread_create )
      {
        __dmb();
        do
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
      }
      else
        v13 = (*v12)--;
      if ( v13 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  *(_DWORD *)(v3 + 44) = Social::User::getGameControllerId(v30);
  v26 = v30;
  v27 = v31;
  if ( v31 )
    v14 = (unsigned int *)(v31 + 4);
        v15 = __ldrex(v14);
      while ( __strex(v15 + 1, v14) );
      ++*v14;
  Social::UserManager::_addUser(v3, (int)&v26);
  v16 = v27;
  if ( v27 )
    v17 = (unsigned int *)(v27 + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
      v18 = (*v17)--;
    if ( v18 == 1 )
      v19 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
        v20 = (*v19)--;
      if ( v20 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  v25 = Social::User::getLocalUserId(v30);
  result = MinecraftEventing::updatePrimaryLocalUserId(v4, &v25);
  v22 = v31;
    v23 = (unsigned int *)(v31 + 4);
        result = __ldrex(v23);
      while ( __strex(result - 1, v23) );
      result = (*v23)--;
    if ( result == 1 )
      v24 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
          result = __ldrex(v24);
        while ( __strex(result - 1, v24) );
        result = (*v24)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  return result;
}


int __fastcall Social::MultiplayerService::setActive(int result, bool a2)
{
  *(_BYTE *)(result + 300) = a2;
  return result;
}


signed int __fastcall Social::MultiplayerXBL::isSessionValid(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  signed int v2; // r2@3
  char *v3; // r0@5
  int v4; // r4@5
  int v5; // r5@5 OVERLAPPED
  int v6; // r6@5 OVERLAPPED
  unsigned int *v7; // r1@6
  unsigned int v8; // r0@8
  unsigned int *v9; // r7@12
  unsigned int v10; // r0@14
  int v11; // r4@19
  unsigned int *v12; // r1@20
  unsigned int v13; // r0@22
  unsigned int *v14; // r7@26
  unsigned int v15; // r0@28
  int v17; // [sp+4h] [bp-24h]@5
  int v18; // [sp+8h] [bp-20h]@19
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v19; // [sp+Ch] [bp-1Ch]@5
  int v20; // [sp+10h] [bp-18h]@5

  v1 = this;
  if ( (*(int (**)(void))(*(_DWORD *)this + 140))() == 1 )
  {
    if ( *((_BYTE *)v1 + 443) )
    {
      v2 = 0;
    }
    else
      xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v17);
      xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
        (xbox::services::multiplayer::manager::multiplayer_manager *)&v19,
        v17);
      v3 = xbox::services::multiplayer::manager::multiplayer_lobby_session::local_members(v19);
      v4 = v20;
      *(_QWORD *)&v5 = *(_QWORD *)v3;
      if ( v20 )
      {
        v7 = (unsigned int *)(v20 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v8 = __ldrex(v7);
          while ( __strex(v8 - 1, v7) );
        }
        else
          v8 = (*v7)--;
        if ( v8 == 1 )
          v9 = (unsigned int *)(v4 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v10 = __ldrex(v9);
            while ( __strex(v10 - 1, v9) );
          }
          else
            v10 = (*v9)--;
          if ( v10 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
      }
      v11 = v18;
      if ( v18 )
        v12 = (unsigned int *)(v18 + 4);
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
          v13 = (*v12)--;
        if ( v13 == 1 )
          v14 = (unsigned int *)(v11 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
              v15 = __ldrex(v14);
            while ( __strex(v15 - 1, v14) );
            v15 = (*v14)--;
          if ( v15 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
      if ( v6 != v5 )
        v2 = 1;
  }
  else
    v2 = 0;
  return v2;
}


int __fastcall Social::XboxLiveUserInfo::XboxLiveUserInfo(__int64 this)
{
  int v1; // r4@1
  unsigned int v2; // r0@1
  int v3; // r6@3
  void *v4; // r5@3
  int v5; // r1@4
  void *v6; // r0@4
  int v7; // r5@4
  int v8; // r1@5
  void *v9; // r0@5
  void *v10; // r5@6
  int v11; // r1@7
  void *v12; // r0@7
  int v13; // r5@9
  _DWORD *v14; // r0@9
  __int64 v15; // r1@9
  int v16; // r5@11
  _DWORD *v17; // r0@11
  __int64 v18; // r1@11
  unsigned int *v20; // r2@15
  signed int v21; // r1@17
  unsigned int *v22; // r2@19
  signed int v23; // r1@21
  _DWORD *v24; // [sp+0h] [bp-50h]@11
  __int64 v25; // [sp+8h] [bp-48h]@11
  _DWORD *v26; // [sp+10h] [bp-40h]@9
  __int64 v27; // [sp+18h] [bp-38h]@9
  char v28; // [sp+23h] [bp-2Dh]@4
  void *ptr; // [sp+24h] [bp-2Ch]@4

  v1 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_QWORD *)(this + 8) = HIDWORD(this);
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 1065353216;
  LODWORD(this) = this + 36;
  v2 = sub_21E6254(*(double *)&this);
  *(_DWORD *)(v1 + 24) = v2;
  if ( v2 == 1 )
  {
    *(_DWORD *)(v1 + 44) = 0;
    v4 = (void *)(v1 + 44);
  }
  else
    if ( v2 >= 0x40000000 )
      sub_21E57F4();
    v3 = 4 * v2;
    v4 = operator new(4 * v2);
    _aeabi_memclr4(v4, v3);
  *(_DWORD *)(v1 + 20) = v4;
  *(_DWORD *)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 52) = 0;
  *(_DWORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 60) = 0;
  *(_DWORD *)(v1 + 64) = 0;
  *(_DWORD *)(v1 + 68) = 0;
  *(_DWORD *)(v1 + 72) = 0;
  v5 = *(_DWORD *)(v1 + 8);
  v28 = 1;
  std::make_unique<Social::ImageService,Social::XboxLiveUserManager &,char const(&)[12],bool>(
    &ptr,
    v5,
    "FriendIcons",
    &v28);
  v6 = ptr;
  ptr = 0;
  v7 = *(_DWORD *)(v1 + 12);
  *(_DWORD *)(v1 + 12) = v6;
  if ( v7 )
    v8 = *(_DWORD *)(v7 + 8);
    v9 = (void *)(v8 - 12);
    if ( (int *)(v8 - 12) != &dword_28898C0 )
    {
      v20 = (unsigned int *)(v8 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v21 = __ldrex(v20);
        while ( __strex(v21 - 1, v20) );
      }
      else
        v21 = (*v20)--;
      if ( v21 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
    }
    operator delete((void *)v7);
    v10 = ptr;
    if ( ptr )
      v11 = *((_DWORD *)ptr + 2);
      v12 = (void *)(v11 - 12);
      if ( (int *)(v11 - 12) != &dword_28898C0 )
        v22 = (unsigned int *)(v11 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v23 = __ldrex(v22);
          while ( __strex(v23 - 1, v22) );
        }
        else
          v23 = (*v22)--;
        if ( v23 <= 0 )
          j_j_j_j__ZdlPv_9(v12);
      operator delete(v10);
  v13 = *(_DWORD *)(v1 + 8);
  v14 = operator new(4u);
  LODWORD(v15) = sub_1390C72;
  *v14 = v1;
  HIDWORD(v15) = sub_1390C34;
  v26 = v14;
  v27 = v15;
  Social::XboxLiveUserManager::registerSignInHandler(v13, (int)&v26);
  if ( (_DWORD)v27 )
    ((void (*)(void))v27)();
  v16 = *(_DWORD *)(v1 + 8);
  v17 = operator new(4u);
  LODWORD(v18) = sub_1390CB0;
  *v17 = v1;
  HIDWORD(v18) = sub_1390CA8;
  v24 = v17;
  v25 = v18;
  Social::XboxLiveUserManager::registerSignOutHandler(v16, (int)&v24);
  if ( (_DWORD)v25 )
    ((void (*)(void))v25)();
  return v1;
}


void __fastcall Social::Events::convertJsonTypes(web::json::value *a1, Json::Value *a2)
{
  Json::Value *v2; // r9@1
  int *v3; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  unsigned int *v10; // r2@11
  signed int v11; // r1@13
  unsigned int *v12; // r2@15
  signed int v13; // r1@17
  signed int v14; // r1@19
  const char **v15; // r5@30
  const Json::Value *v16; // r0@30
  int *v17; // r4@31
  Json::Value *v18; // r0@31
  __int64 v19; // r0@31
  int *v20; // r4@34
  Json::Value *v21; // r0@34
  __int64 v22; // r0@34
  int *v23; // r10@37
  Json::Value *v24; // r0@37
  int v26; // r1@37
  double v27; // r0@37
  Json::Value *v28; // r0@40
  const char *v29; // r4@40
  _BYTE *v30; // r0@41
  int *v31; // r4@42
  void *v32; // r0@44
  void *v33; // r0@45
  char *v34; // r0@46
  unsigned int *v35; // r2@47
  int *v36; // r4@51
  Json::Value *v37; // r0@51
  int v38; // r0@51
  void *v39; // r0@54
  const char **v40; // r1@56
  unsigned int *v41; // r2@58
  signed int v42; // r1@60
  const char **v43; // r4@66
  const char *v44; // r1@66
  char *v45; // r0@66
  web::json::value *v46; // [sp+4h] [bp-7Ch]@1
  int v47; // [sp+8h] [bp-78h]@51
  int v48; // [sp+Ch] [bp-74h]@11
  int v49; // [sp+10h] [bp-70h]@42
  int v50; // [sp+14h] [bp-6Ch]@15
  char *v51; // [sp+18h] [bp-68h]@40
  int v52; // [sp+1Ch] [bp-64h]@37
  int v53; // [sp+20h] [bp-60h]@34
  int v54; // [sp+24h] [bp-5Ch]@31
  char v55; // [sp+28h] [bp-58h]@30
  int v56; // [sp+3Ch] [bp-44h]@3
  void *ptr; // [sp+40h] [bp-40h]@1
  const char **v58; // [sp+44h] [bp-3Ch]@1

  v2 = a2;
  v46 = a1;
  web::json::value::null(a1);
  Json::Value::getMemberNames((Json::Value *)&ptr, (int)v2);
  v3 = (int *)ptr;
  if ( ptr != v58 )
  {
    __asm { VLDR            D8, =0.0 }
    do
    {
      v15 = (const char **)v3;
      utility::conversions::to_string_t(&v56, v3);
      v16 = (const Json::Value *)Json::Value::operator[](v2, v15);
      Json::Value::Value((Json::Value *)&v55, v16);
      switch ( Json::Value::type((Json::Value *)&v55) )
      {
        case 1:
          v17 = (int *)web::json::value::operator[]((int)v46);
          v18 = (Json::Value *)Json::Value::operator[](v2, v15);
          v19 = Json::Value::asLargestInt(v18);
          web::json::value::value((web::json::value *)&v54, SHIDWORD(v19), v19);
          web::json::value::operator=(v17, &v54);
          if ( v54 )
            (*(void (**)(void))(*(_DWORD *)v54 + 96))();
          v54 = 0;
          break;
        case 2:
          v20 = (int *)web::json::value::operator[]((int)v46);
          v21 = (Json::Value *)Json::Value::operator[](v2, v15);
          v22 = Json::Value::asLargestUInt(v21);
          web::json::value::value((web::json::value *)&v53, SHIDWORD(v22), v22);
          web::json::value::operator=(v20, &v53);
          if ( v53 )
            (*(void (**)(void))(*(_DWORD *)v53 + 96))();
          v53 = 0;
        case 3:
          v23 = (int *)web::json::value::operator[]((int)v46);
          v24 = (Json::Value *)Json::Value::operator[](v2, v15);
          __asm { VMOV            R2, R3, D8 }
          LODWORD(v27) = Json::Value::asDouble(v24, v26, _R2);
          web::json::value::value((web::json::value *)&v52, SHIDWORD(v27), v27);
          web::json::value::operator=(v23, &v52);
          if ( v52 )
            (*(void (**)(void))(*(_DWORD *)v52 + 96))();
          v52 = 0;
        case 4:
          v28 = (Json::Value *)Json::Value::operator[](v2, v15);
          v29 = (const char *)Json::Value::asCString(v28);
          v51 = (char *)&unk_28898CC;
          if ( v29 )
          {
            v30 = (_BYTE *)strlen(v29);
            sub_21E8190((void **)&v51, (char *)v29, v30);
          }
          utility::conversions::to_string_t(&v50, (int *)&v51);
          v31 = (int *)web::json::value::operator[]((int)v46);
          sub_21E8AF4(&v48, &v50);
          web::json::value::value(&v49, &v48);
          web::json::value::operator=(v31, &v49);
          if ( v49 )
            (*(void (**)(void))(*(_DWORD *)v49 + 96))();
          v49 = 0;
          v32 = (void *)(v48 - 12);
          if ( (int *)(v48 - 12) != &dword_28898C0 )
            v10 = (unsigned int *)(v48 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v11 = __ldrex(v10);
              while ( __strex(v11 - 1, v10) );
            }
            else
              v11 = (*v10)--;
            if ( v11 <= 0 )
              j_j_j_j__ZdlPv_9(v32);
          v33 = (void *)(v50 - 12);
          if ( (int *)(v50 - 12) != &dword_28898C0 )
            v12 = (unsigned int *)(v50 - 4);
                v13 = __ldrex(v12);
              while ( __strex(v13 - 1, v12) );
              v13 = (*v12)--;
            if ( v13 <= 0 )
              j_j_j_j__ZdlPv_9(v33);
          v34 = v51 - 12;
          if ( (int *)(v51 - 12) != &dword_28898C0 )
            v35 = (unsigned int *)(v51 - 4);
                v14 = __ldrex(v35);
              while ( __strex(v14 - 1, v35) );
              v14 = (*v35)--;
            if ( v14 <= 0 )
              j_j_j_j__ZdlPv_9(v34);
        case 5:
          v36 = (int *)web::json::value::operator[]((int)v46);
          v37 = (Json::Value *)Json::Value::operator[](v2, v15);
          v38 = Json::Value::asBool(v37, 0);
          web::json::value::value((web::json::value *)&v47, v38);
          web::json::value::operator=(v36, &v47);
          if ( v47 )
            (*(void (**)(void))(*(_DWORD *)v47 + 96))();
          v47 = 0;
        default:
      }
      Json::Value::~Value((Json::Value *)&v55);
      v39 = (void *)(v56 - 12);
      if ( (int *)(v56 - 12) != &dword_28898C0 )
        v8 = (unsigned int *)(v56 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v9 = __ldrex(v8);
          while ( __strex(v9 - 1, v8) );
        }
        else
          v9 = (*v8)--;
        if ( v9 <= 0 )
          j_j_j_j__ZdlPv_9(v39);
      v3 = (int *)(v15 + 1);
    }
    while ( v15 + 1 != v58 );
    v40 = (const char **)ptr;
    if ( ptr == v3 )
      operator delete(v3);
      return;
      v43 = v40;
      v44 = *v40;
      v45 = (char *)(v44 - 12);
      if ( (int *)(v44 - 12) != &dword_28898C0 )
        v41 = (unsigned int *)(v44 - 4);
            v42 = __ldrex(v41);
          while ( __strex(v42 - 1, v41) );
          v42 = (*v41)--;
        if ( v42 <= 0 )
          j_j_j_j__ZdlPv_9(v45);
      v40 = v43 + 1;
    while ( v43 != v15 );
    v3 = (int *)ptr;
  }
  if ( v3 )
    operator delete(v3);
}


Social::Events::EventManager *__fastcall Social::Events::EventManager::~EventManager(Social::Events::EventManager *this)
{
  Social::Events::EventManager *v1; // r4@1
  _DWORD *v2; // r7@1
  char *v3; // r5@4
  char **v4; // r6@4
  char *v5; // r0@4
  char *v6; // r0@8
  _DWORD *v7; // r7@11
  char *v8; // r5@14
  char **v9; // r6@14
  char *v10; // r0@14
  char *v11; // r0@18
  char *v12; // r0@21
  char *v13; // r0@24
  char *v14; // r5@27 OVERLAPPED
  char *v15; // r6@27 OVERLAPPED

  v1 = this;
  v2 = (_DWORD *)*((_DWORD *)this + 26);
  while ( v2 )
  {
    v3 = (char *)v2;
    v4 = (char **)(v2 + 2);
    v2 = (_DWORD *)*v2;
    std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v4);
    v5 = *v4;
    if ( *v4 )
    {
      if ( v3 + 32 != v5 )
        operator delete(v5);
    }
    operator delete(v3);
  }
  _aeabi_memclr4(*((_QWORD *)v1 + 12), 4 * (*((_QWORD *)v1 + 12) >> 32));
  *((_DWORD *)v1 + 26) = 0;
  *((_DWORD *)v1 + 27) = 0;
  v6 = (char *)*((_DWORD *)v1 + 24);
  if ( v6 && (char *)v1 + 120 != v6 )
    operator delete(v6);
  v7 = (_DWORD *)*((_DWORD *)v1 + 19);
  while ( v7 )
    v8 = (char *)v7;
    v9 = (char **)(v7 + 2);
    v7 = (_DWORD *)*v7;
    std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v9);
    v10 = *v9;
    if ( *v9 && v8 + 32 != v10 )
      operator delete(v10);
    operator delete(v8);
  _aeabi_memclr4(*(_QWORD *)((char *)v1 + 68), 4 * (*(_QWORD *)((char *)v1 + 68) >> 32));
  *((_DWORD *)v1 + 19) = 0;
  *((_DWORD *)v1 + 20) = 0;
  v11 = (char *)*((_DWORD *)v1 + 17);
  if ( v11 && (char *)v1 + 92 != v11 )
    operator delete(v11);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v1 + 40);
  v12 = (char *)*((_DWORD *)v1 + 10);
  if ( v12 && (char *)v1 + 64 != v12 )
    operator delete(v12);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v1 + 12);
  v13 = (char *)*((_DWORD *)v1 + 3);
  if ( v13 && (char *)v1 + 36 != v13 )
    operator delete(v13);
  *(_QWORD *)&v14 = *(_QWORD *)v1;
  if ( v14 != v15 )
    do
      if ( *(_DWORD *)v14 )
        (*(void (**)(void))(**(_DWORD **)v14 + 4))();
      *(_DWORD *)v14 = 0;
      v14 += 4;
    while ( v15 != v14 );
    v14 = *(char **)v1;
  if ( v14 )
    operator delete(v14);
  return v1;
}


unsigned int __fastcall Social::MultiplayerGameInfo::addSupportedConnection(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  signed int v5; // r0@1
  signed __int16 v6; // r1@1
  __int64 v7; // kr00_8@3
  unsigned int result; // r0@4
  __int16 v9; // [sp+Ah] [bp-26h]@3
  char *v10; // [sp+Ch] [bp-24h]@3
  __int16 v11; // [sp+12h] [bp-1Eh]@3
  int v12; // [sp+24h] [bp-Ch]@1
  int v13; // [sp+28h] [bp-8h]@1
  int v14; // [sp+2Ch] [bp-4h]@1

  v4 = a1;
  v12 = a2;
  v13 = a3;
  v14 = a4;
  v5 = RakNet::SystemAddress::GetIPVersion((RakNet::SystemAddress *)&v12);
  v6 = 1;
  if ( v5 == 6 )
    v6 = 2;
  v11 = v6;
  v10 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v12, 0, 124);
  v9 = RakNet::SystemAddress::GetPort((RakNet::SystemAddress *)&v12);
  v7 = *(_QWORD *)(v4 + 4);
  if ( (_DWORD)v7 == HIDWORD(v7) )
  {
    result = std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType &,char const*,unsigned short,char const(&)[1]>(
               (unsigned __int64 *)v4,
               &v11,
               (const char **)&v10,
               &v9,
               (const char *)&unk_257BC67);
  }
  else
    __gnu_cxx::new_allocator<Social::GameConnectionInfo>::construct<Social::GameConnectionInfo,Social::ConnectionType &,char const*,unsigned short,char const(&)[1]>(
      v4,
      v7,
      &v11,
      (const char **)&v10,
      &v9,
      (const char *)&unk_257BC67);
    result = *(_DWORD *)(v4 + 4) + 60;
    *(_DWORD *)(v4 + 4) = result;
  return result;
}


int (**__fastcall Social::Events::EventManager::addListener(int a1, int *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  int v2; // r5@1
  pthread_mutex_t *v3; // r4@1
  int *v4; // r6@1
  int v5; // r0@2
  __int64 v6; // r0@3
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@6

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 124);
  v4 = a2;
  if ( &pthread_create )
  {
    v5 = j_pthread_mutex_lock_0(v3);
    if ( v5 )
      sub_21E5E14(v5);
  }
  v6 = *(_QWORD *)(v2 + 4);
  if ( (_DWORD)v6 == HIDWORD(v6) )
    j_std::vector<std::unique_ptr<Social::Events::IEventListener,std::default_delete<Social::Events::IEventListener>>,std::allocator<std::unique_ptr<Social::Events::IEventListener,std::default_delete<Social::Events::IEventListener>>>>::_M_emplace_back_aux<std::unique_ptr<Social::Events::IEventListener,std::default_delete<Social::Events::IEventListener>>>(
      (_QWORD *)v2,
      v4);
  else
    HIDWORD(v6) = *v4;
    *v4 = 0;
    *(_DWORD *)v6 = HIDWORD(v6);
    *(_DWORD *)(v2 + 4) += 4;
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v3);
  return result;
}


int (**__fastcall Social::MultiplayerService::getGameList(Social::MultiplayerService *this, int a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  Social::MultiplayerService *v2; // r10@1
  int v3; // r9@1
  int v4; // r0@3
  int v5; // r7@4
  Social::MultiplayerGameInfo *v6; // r6@5
  int i; // r8@5
  _DWORD *v8; // r5@8
  char v9; // r11@8
  size_t v10; // r4@8
  const void *v11; // r1@9
  bool v12; // zf@10
  char v13; // r0@10
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@20
  int v15; // r0@23
  __int64 v16; // r4@24
  Social::MultiplayerGameInfo *v17; // r0@25
  int v18; // [sp+8h] [bp-28h]@4

  v2 = this;
  *(_DWORD *)this = 0;
  *((_DWORD *)this + 1) = 0;
  v3 = a2;
  *((_DWORD *)this + 2) = 0;
  if ( (*(int (__fastcall **)(int))(*(_DWORD *)a2 + 196))(a2) )
  {
    *(_BYTE *)(v3 + 252) = 1;
    if ( &pthread_create )
    {
      v4 = pthread_mutex_lock((pthread_mutex_t *)(v3 + 244));
      if ( v4 )
        sub_21E5E14(v4);
    }
    v5 = *(_QWORD *)(v3 + 220);
    v18 = *(_QWORD *)(v3 + 220) >> 32;
    if ( v5 != v18 )
      v6 = 0;
      for ( i = 0; ; i = *(_QWORD *)v2 )
      {
        if ( (Social::MultiplayerGameInfo *)i == v6 )
          goto LABEL_34;
        v8 = *(_DWORD **)(v5 + 16);
        v9 = 0;
        v10 = *(v8 - 3);
        do
        {
          v11 = *(const void **)(i + 16);
          if ( v10 == *((_DWORD *)v11 - 3) )
          {
            v12 = memcmp(v8, v11, v10) == 0;
            v13 = 0;
            if ( v12 )
              v13 = 1;
            v9 |= v13;
              break;
          }
          i += 88;
        }
        while ( v6 != (Social::MultiplayerGameInfo *)i );
        if ( !(v9 & 1) )
LABEL_34:
          if ( (*(int (__fastcall **)(int, int))(*(_DWORD *)v3 + 152))(v3, v5) == 1 )
            if ( v6 == *((Social::MultiplayerGameInfo **)v2 + 2) )
            {
              std::vector<Social::MultiplayerGameInfo,std::allocator<Social::MultiplayerGameInfo>>::_M_emplace_back_aux<Social::MultiplayerGameInfo&>(
                (unsigned __int64 *)v2,
                (const Social::MultiplayerGameInfo *)v5);
            }
            else
              Social::MultiplayerGameInfo::MultiplayerGameInfo(v6, (const Social::MultiplayerGameInfo *)v5);
              *((_DWORD *)v2 + 1) = (char *)v6 + 88;
        v5 += 88;
        if ( v5 == v18 )
          break;
        v6 = (Social::MultiplayerGameInfo *)(*(_QWORD *)v2 >> 32);
      }
    result = &pthread_create;
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock((pthread_mutex_t *)(v3 + 244));
  }
  else
      v15 = pthread_mutex_lock((pthread_mutex_t *)(v3 + 244));
      if ( v15 )
        sub_21E5E14(v15);
    v16 = *(_QWORD *)(v3 + 220);
    if ( HIDWORD(v16) != (_DWORD)v16 )
      v17 = (Social::MultiplayerGameInfo *)*(_QWORD *)(v3 + 220);
      do
        v17 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v17) + 88);
      while ( (Social::MultiplayerGameInfo *)HIDWORD(v16) != v17 );
    *(_DWORD *)(v3 + 224) = v16;
  return result;
}


signed int __fastcall Social::UserManager::getClientCID(Social::UserManager *this, const ClientInstance *a2)
{
  char *v2; // r5@1
  int v3; // r0@1
  const ClientInstance *v4; // r4@1

  v2 = (char *)this + 52;
  v3 = *((_DWORD *)this + 15);
  v4 = a2;
  while ( (char *)v3 != v2 )
  {
    if ( *(const ClientInstance **)(v3 + 20) == v4 )
      return *(_DWORD *)(v3 + 16);
    v3 = sub_119CB48(v3);
  }
  return -1;
}


void __fastcall Social::RealmsUriListener::~RealmsUriListener(Social::RealmsUriListener *this)
{
  Social::RealmsUriListener::~RealmsUriListener(this);
}


unsigned __int64 *__fastcall Social::MultiplayerServiceManager::setShouldAdvertiseGame(unsigned __int64 *result)
{
  int *v1; // r4@1
  int *i; // r7@1
  int v3; // t1@2

  v1 = (int *)(*result >> 32);
  for ( i = (int *)*result; v1 != i; result = (unsigned __int64 *)(*(int (**)(void))(*(_DWORD *)v3 + 28))() )
  {
    v3 = *i;
    ++i;
  }
  return result;
}


int __fastcall Social::UserManager::controllerChanged(Social::UserManager *this, int *a2, int *a3)
{
  return 0;
}


unsigned int __fastcall Social::UserManager::addSecondaryUser(int a1, int a2, _DWORD *a3, int a4, MinecraftEventing *a5, int a6, int a7)
{
  int v7; // r4@1
  int v8; // r6@1
  _DWORD *v9; // r8@1
  int v10; // r1@1
  int v11; // r0@1
  int v12; // r5@1
  unsigned int *v13; // r1@2
  unsigned int v14; // r0@4
  unsigned int *v15; // r7@8
  unsigned int v16; // r0@10
  unsigned int *v17; // r0@17
  unsigned int v18; // r1@19
  unsigned int result; // r0@21
  int v20; // r4@21
  unsigned int *v21; // r1@22
  int v22; // r7@27
  unsigned int *v23; // r1@28
  unsigned int v24; // r0@30
  unsigned int *v25; // r5@34
  unsigned int v26; // r0@36
  unsigned int *v27; // r5@40
  int v28; // r7@47
  void (__fastcall *v29)(char *, int, signed int); // r3@47
  char v30; // [sp+8h] [bp-48h]@48
  void (*v31)(void); // [sp+10h] [bp-40h]@47
  int v32; // [sp+14h] [bp-3Ch]@48
  char v33; // [sp+18h] [bp-38h]@49
  int v34; // [sp+20h] [bp-30h]@16
  int v35; // [sp+24h] [bp-2Ch]@16
  int v36; // [sp+28h] [bp-28h]@1
  int v37; // [sp+2Ch] [bp-24h]@1
  int v38; // [sp+30h] [bp-20h]@1
  int v39; // [sp+34h] [bp-1Ch]@16

  v7 = a1;
  v8 = a2;
  v9 = a3;
  v36 = *(_DWORD *)a6;
  v10 = *(_DWORD *)(a6 + 4);
  *(_DWORD *)(a6 + 4) = 0;
  v37 = v10;
  *(_DWORD *)a6 = 0;
  v11 = *(_DWORD *)(v8 + 128);
  *(_DWORD *)(v8 + 128) = v11 + 1;
  Social::User::create((int)&v38, 1, a4, a5, (int)&v36, v11);
  v12 = v37;
  if ( v37 )
  {
    v13 = (unsigned int *)(v37 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v14 = __ldrex(v13);
      while ( __strex(v14 - 1, v13) );
    }
    else
      v14 = (*v13)--;
    if ( v14 == 1 )
      v15 = (unsigned int *)(v12 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
      if ( &pthread_create )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      }
      else
        v16 = (*v15)--;
      if ( v16 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
  }
  if ( v38 )
    v34 = v38;
    v35 = v39;
    if ( v39 )
      v17 = (unsigned int *)(v39 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 + 1, v17) );
        ++*v17;
    Social::UserManager::_addUser(v8, (int)&v34);
    v22 = v35;
    if ( v35 )
      v23 = (unsigned int *)(v35 + 4);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        v25 = (unsigned int *)(v22 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
        if ( &pthread_create )
        {
          __dmb();
          do
            v26 = __ldrex(v25);
          while ( __strex(v26 - 1, v25) );
        }
        else
          v26 = (*v25)--;
        if ( v26 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
    v28 = v38;
    v31 = 0;
    v29 = *(void (__fastcall **)(char *, int, signed int))(a7 + 8);
    if ( v29 )
      v29(&v30, a7, 2);
      v32 = *(_DWORD *)(a7 + 12);
      v31 = *(void (**)(void))(a7 + 8);
    Social::User::connectAsync((int)&v33, v28, (int)&v30);
    CallbackToken::operator=(v9, (int)&v33);
    CallbackToken::~CallbackToken((CallbackToken *)&v33);
    if ( v31 )
      v31();
    *(_DWORD *)v7 = v38;
    result = v39;
    v39 = 0;
    *(_DWORD *)(v7 + 4) = result;
    v38 = 0;
  else
    result = 0;
    *(_DWORD *)v7 = 0;
    *(_DWORD *)(v7 + 4) = 0;
    v20 = v39;
      v21 = (unsigned int *)(v39 + 4);
          result = __ldrex(v21);
        while ( __strex(result - 1, v21) );
        result = (*v21)--;
      if ( result == 1 )
        v27 = (unsigned int *)(v20 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
            result = __ldrex(v27);
          while ( __strex(result - 1, v27) );
          result = (*v27)--;
        if ( result == 1 )
          result = (*(int (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
  return result;
}


int __fastcall Social::MultiplayerServiceManager::getSessionIsValid(int a1, int a2)
{
  Social::MultiplayerService **v2; // r5@1
  Social::MultiplayerService **v3; // r6@1
  int v4; // r4@1
  int v5; // r7@2
  signed int v6; // r1@4

  v2 = (Social::MultiplayerService **)(*(_QWORD *)a1 >> 32);
  v3 = (Social::MultiplayerService **)*(_QWORD *)a1;
  v4 = a2;
  if ( v3 == v2 )
  {
LABEL_4:
    v6 = 0;
  }
  else
    while ( 1 )
    {
      v5 = (int)(v3 + 1);
      a1 = Social::MultiplayerService::getServiceId(*v3);
      if ( a1 == v4 )
        break;
      ++v3;
      if ( v2 == (Social::MultiplayerService **)v5 )
        goto LABEL_4;
    }
    a1 = (*(int (**)(void))(*(_DWORD *)*v3 + 144))();
    v6 = 1;
  return a1 & v6;
}


unsigned int __fastcall Social::MultiplayerService::_addConnectionInfo(int a1, const Social::GameConnectionInfo *a2)
{
  int v2; // r4@1
  const Social::GameConnectionInfo *v3; // r5@1
  __int64 v4; // r0@1
  unsigned int result; // r0@4
  __int64 v6; // r0@5

  v2 = a1;
  v3 = a2;
  v4 = *(_QWORD *)(a1 + 184);
  if ( (_DWORD)v4 == HIDWORD(v4) )
  {
    std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::GameConnectionInfo const&>(
      (unsigned __int64 *)(v2 + 180),
      v3);
  }
  else
    Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)v4, v3);
    *(_DWORD *)(v2 + 184) += 60;
  result = *(_BYTE *)(v2 + 176);
  if ( *(_BYTE *)(v2 + 176) )
    v6 = *(_QWORD *)(v2 + 92);
    if ( (_DWORD)v6 == HIDWORD(v6) )
    {
      result = j_j_j__ZNSt6vectorIN6Social18GameConnectionInfoESaIS1_EE19_M_emplace_back_auxIJRKS1_EEEvDpOT_(
                 (unsigned __int64 *)(v2 + 88),
                 v3);
    }
    else
      Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)v6, v3);
      result = *(_DWORD *)(v2 + 92) + 60;
      *(_DWORD *)(v2 + 92) = result;
  return result;
}


void __fastcall Social::XboxLiveUserInfo::_processProfiles(int a1, unsigned __int64 *a2, unsigned __int64 **a3)
{
  unsigned __int64 *v3; // r4@1
  double v4; // r0@1
  unsigned int v5; // r0@1
  int v6; // r7@3
  int *v7; // r6@3
  xbox::services::social::xbox_user_profile *v8; // r7@4
  int *v9; // r0@6
  void *v10; // r0@6
  int v11; // r0@8
  int v12; // r6@9
  int *v13; // r0@9
  int *v14; // r0@9
  int *v15; // r0@9
  void *v16; // r0@9
  void *v17; // r0@10
  void *v18; // r0@11
  void *v19; // r0@12
  void *v20; // r0@13
  void *v21; // r0@14
  int *v22; // r0@17
  int v23; // r0@17
  int v24; // r6@17
  __int64 v25; // r0@17
  void *v26; // r0@20
  void *v27; // r0@21
  unsigned int *v28; // r2@24
  signed int v29; // r1@26
  unsigned int *v30; // r2@28
  signed int v31; // r1@30
  unsigned int *v32; // r2@32
  signed int v33; // r1@34
  unsigned int *v34; // r2@36
  signed int v35; // r1@38
  unsigned int *v36; // r2@40
  signed int v37; // r1@42
  unsigned int *v38; // r2@44
  signed int v39; // r1@46
  unsigned int *v40; // r2@48
  signed int v41; // r1@50
  unsigned int *v42; // r2@52
  signed int v43; // r1@54
  unsigned int *v44; // r2@56
  signed int v45; // r1@58
  int v46; // r4@97
  int v47; // r1@98
  int *v48; // r7@98
  web::details::uri_components *v49; // r11@98
  void **v50; // r8@98
  void **v51; // r7@99
  int v52; // r6@101
  unsigned int *v53; // r2@107
  signed int v54; // r1@109
  unsigned int *v55; // r2@111
  signed int v56; // r1@113
  int v57; // r5@123
  void *v58; // r0@123
  int *v59; // r5@124
  int *v60; // r11@124
  int *i; // r7@124
  int v62; // r0@126
  int v63; // r8@127
  void *v64; // r0@129
  unsigned int *v65; // r2@132
  signed int v66; // r1@134
  void *v67; // r0@141
  xbox::services::social::xbox_user_profile *v68; // [sp+Ch] [bp-A4h]@4
  pthread_mutex_t *mutex; // [sp+10h] [bp-A0h]@5
  int v70; // [sp+14h] [bp-9Ch]@1
  unsigned __int64 **v71; // [sp+18h] [bp-98h]@1
  pthread_mutex_t *v72; // [sp+1Ch] [bp-94h]@98
  int v73; // [sp+20h] [bp-90h]@125
  int v74; // [sp+24h] [bp-8Ch]@98
  int v75; // [sp+28h] [bp-88h]@98
  int v76; // [sp+44h] [bp-6Ch]@98
  int v77; // [sp+48h] [bp-68h]@17
  int v78; // [sp+4Ch] [bp-64h]@9
  int v79; // [sp+50h] [bp-60h]@9
  int v80; // [sp+54h] [bp-5Ch]@9
  int v81; // [sp+58h] [bp-58h]@9
  int v82; // [sp+5Ch] [bp-54h]@9
  int v83; // [sp+60h] [bp-50h]@9
  int v84; // [sp+64h] [bp-4Ch]@6
  int v85; // [sp+68h] [bp-48h]@6
  void *ptr; // [sp+6Ch] [bp-44h]@4
  unsigned int v87; // [sp+70h] [bp-40h]@1
  int v88; // [sp+74h] [bp-3Ch]@1
  int v89; // [sp+78h] [bp-38h]@1
  signed int v90; // [sp+7Ch] [bp-34h]@1
  int v91; // [sp+80h] [bp-30h]@1
  int v92; // [sp+84h] [bp-2Ch]@106

  v3 = a2;
  v70 = a1;
  v71 = a3;
  v88 = 0;
  v89 = 0;
  v90 = 1065353216;
  v91 = 0;
  HIDWORD(v4) = 10;
  LODWORD(v4) = &v90;
  v5 = sub_21E6254(v4);
  v87 = v5;
  if ( v5 == 1 )
  {
    v7 = &v92;
    v92 = 0;
  }
  else
    if ( v5 >= 0x40000000 )
      sub_21E57F4();
    v6 = 4 * v5;
    v7 = (int *)operator new(4 * v5);
    _aeabi_memclr4(v7, v6);
  ptr = v7;
  v8 = (xbox::services::social::xbox_user_profile *)*v3;
  v68 = (xbox::services::social::xbox_user_profile *)(*v3 >> 32);
  if ( v8 != v68 )
    mutex = (pthread_mutex_t *)(v70 + 68);
    do
    {
      v9 = (int *)xbox::services::social::xbox_user_profile::xbox_user_id(v8);
      sub_21E8AF4(&v84, v9);
      utility::conversions::to_utf8string(&v85, &v84);
      v10 = (void *)(v84 - 12);
      if ( (int *)(v84 - 12) != &dword_28898C0 )
      {
        v28 = (unsigned int *)(v84 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v29 = __ldrex(v28);
          while ( __strex(v29 - 1, v28) );
        }
        else
          v29 = (*v28)--;
        if ( v29 <= 0 )
          j_j_j_j__ZdlPv_9(v10);
      }
      if ( &pthread_create )
        v11 = pthread_mutex_lock(mutex);
        if ( v11 )
          sub_21E5E14(v11);
      v12 = std::__detail::_Map_base<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>,true>::at(
              *v71,
              (int **)&v85);
      v13 = (int *)xbox::services::social::xbox_user_profile::gamertag(v8);
      sub_21E8AF4(&v82, v13);
      utility::conversions::to_utf8string(&v83, &v82);
      v14 = (int *)xbox::services::social::xbox_user_profile::game_display_name(v8);
      sub_21E8AF4(&v80, v14);
      utility::conversions::to_utf8string(&v81, &v80);
      v15 = (int *)xbox::services::social::xbox_user_profile::gamerscore(v8);
      sub_21E8AF4(&v78, v15);
      utility::conversions::to_utf8string(&v79, &v78);
      EntityInteraction::setInteractText((int *)v12, &v85);
      EntityInteraction::setInteractText((int *)(v12 + 4), &v83);
      EntityInteraction::setInteractText((int *)(v12 + 8), &v81);
      EntityInteraction::setInteractText((int *)(v12 + 12), &v79);
      *(_DWORD *)(v12 + 44) |= 1u;
      v16 = (void *)(v79 - 12);
      if ( (int *)(v79 - 12) != &dword_28898C0 )
        v30 = (unsigned int *)(v79 - 4);
            v31 = __ldrex(v30);
          while ( __strex(v31 - 1, v30) );
          v31 = (*v30)--;
        if ( v31 <= 0 )
          j_j_j_j__ZdlPv_9(v16);
      v17 = (void *)(v78 - 12);
      if ( (int *)(v78 - 12) != &dword_28898C0 )
        v32 = (unsigned int *)(v78 - 4);
            v33 = __ldrex(v32);
          while ( __strex(v33 - 1, v32) );
          v33 = (*v32)--;
        if ( v33 <= 0 )
          j_j_j_j__ZdlPv_9(v17);
      v18 = (void *)(v81 - 12);
      if ( (int *)(v81 - 12) != &dword_28898C0 )
        v34 = (unsigned int *)(v81 - 4);
            v35 = __ldrex(v34);
          while ( __strex(v35 - 1, v34) );
          v35 = (*v34)--;
        if ( v35 <= 0 )
          j_j_j_j__ZdlPv_9(v18);
      v19 = (void *)(v80 - 12);
      if ( (int *)(v80 - 12) != &dword_28898C0 )
        v36 = (unsigned int *)(v80 - 4);
            v37 = __ldrex(v36);
          while ( __strex(v37 - 1, v36) );
          v37 = (*v36)--;
        if ( v37 <= 0 )
          j_j_j_j__ZdlPv_9(v19);
      v20 = (void *)(v83 - 12);
      if ( (int *)(v83 - 12) != &dword_28898C0 )
        v38 = (unsigned int *)(v83 - 4);
            v39 = __ldrex(v38);
          while ( __strex(v39 - 1, v38) );
          v39 = (*v38)--;
        if ( v39 <= 0 )
          j_j_j_j__ZdlPv_9(v20);
      v21 = (void *)(v82 - 12);
      if ( (int *)(v82 - 12) != &dword_28898C0 )
        v40 = (unsigned int *)(v82 - 4);
            v41 = __ldrex(v40);
          while ( __strex(v41 - 1, v40) );
          v41 = (*v40)--;
        if ( v41 <= 0 )
          j_j_j_j__ZdlPv_9(v21);
        pthread_mutex_unlock(mutex);
      v22 = (int *)xbox::services::social::xbox_user_profile::game_display_picture_resize_uri(v8);
      sub_21E8AF4(&v77, v22);
      v23 = std::__detail::_Map_base<std::string,std::pair<std::string const,std::vector<std::string,std::allocator<std::string>>>,std::allocator<std::pair<std::string const,std::vector<std::string,std::allocator<std::string>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>,true>::operator[](
              (int)&ptr,
              (int **)&v77);
      v24 = v23;
      v25 = *(_QWORD *)(v23 + 4);
      if ( (_DWORD)v25 == HIDWORD(v25) )
        std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<std::string const&>(
          (unsigned __int64 *)v24,
          &v85);
      else
        sub_21E8AF4((int *)v25, &v85);
        *(_DWORD *)(v24 + 4) += 4;
      v26 = (void *)(v77 - 12);
      if ( (int *)(v77 - 12) != &dword_28898C0 )
        v42 = (unsigned int *)(v77 - 4);
            v43 = __ldrex(v42);
          while ( __strex(v43 - 1, v42) );
          v43 = (*v42)--;
        if ( v43 <= 0 )
          j_j_j_j__ZdlPv_9(v26);
      v27 = (void *)(v85 - 12);
      if ( (int *)(v85 - 12) != &dword_28898C0 )
        v44 = (unsigned int *)(v85 - 4);
            v45 = __ldrex(v44);
          while ( __strex(v45 - 1, v44) );
          v45 = (*v44)--;
        if ( v45 <= 0 )
          j_j_j_j__ZdlPv_9(v27);
      v8 = (xbox::services::social::xbox_user_profile *)((char *)v8 + 84);
    }
    while ( v8 != v68 );
  v46 = v88;
  if ( v88 )
    v47 = v70;
    v48 = &v74;
    v49 = (web::details::uri_components *)&v75;
    v72 = (pthread_mutex_t *)(v70 + 68);
    v50 = (void **)&v76;
      v57 = *(_DWORD *)(v47 + 12);
      web::uri::uri((int)v48, (int *)(v46 + 4));
      Social::ImageService::GetDisplayPicture(v50, v57, v48, 1u);
      web::details::uri_components::~uri_components(v49);
      v58 = (void *)(v74 - 12);
      if ( (int *)(v74 - 12) != &dword_28898C0 )
        v53 = (unsigned int *)(v74 - 4);
            v54 = __ldrex(v53);
          while ( __strex(v54 - 1, v53) );
          v54 = (*v53)--;
        if ( v54 <= 0 )
          j_j_j_j__ZdlPv_9(v58);
      v59 = (int *)(*(_QWORD *)(v46 + 8) >> 32);
      v60 = (int *)*(_QWORD *)(v46 + 8);
      for ( i = (int *)v50; v60 != v59; ++v60 )
        sub_21E8AF4(&v73, v60);
          v62 = pthread_mutex_lock(v72);
          if ( v62 )
            sub_21E5E14(v62);
        v63 = std::__detail::_Map_base<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>,true>::at(
                *v71,
                (int **)&v73);
        EntityInteraction::setInteractText((int *)(v63 + 16), i);
        *(_DWORD *)(v63 + 44) |= 4u;
          pthread_mutex_unlock(v72);
        v64 = (void *)(v73 - 12);
        if ( (int *)(v73 - 12) != &dword_28898C0 )
          v65 = (unsigned int *)(v73 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v66 = __ldrex(v65);
            while ( __strex(v66 - 1, v65) );
          }
          else
            v66 = (*v65)--;
          if ( v66 <= 0 )
            j_j_j_j__ZdlPv_9(v64);
      v50 = (void **)i;
      v49 = (web::details::uri_components *)&v75;
      v48 = &v74;
      v67 = (void *)(v76 - 12);
      if ( (int *)(v76 - 12) != &dword_28898C0 )
        v55 = (unsigned int *)(v76 - 4);
            v56 = __ldrex(v55);
          while ( __strex(v56 - 1, v55) );
          v56 = (*v55)--;
        if ( v56 <= 0 )
          j_j_j_j__ZdlPv_9(v67);
      v46 = *(_DWORD *)v46;
      v47 = v70;
    while ( v46 );
    v46 = v88;
    v51 = &ptr;
  if ( v46 )
      v52 = *(_DWORD *)v46;
      std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<std::string const,std::vector<std::string,std::allocator<std::string>>>,true>>>::_M_deallocate_node(
        (int)&ptr,
        v46);
      v46 = v52;
    while ( v52 );
  _aeabi_memclr4(ptr, 4 * v87);
  if ( ptr )
    if ( v51 + 6 != ptr )
      operator delete(ptr);
}


RakNet *__fastcall Social::MultiplayerXBL::_sendRoundStartEvent(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10
  int *v7; // r0@17
  void *v8; // r0@17
  void *v9; // r0@18
  unsigned int *v10; // r2@19
  signed int v11; // r1@21
  bool v12; // cf@23
  __int64 v13; // r0@23
  signed int v14; // r3@25
  unsigned int *v15; // r2@31
  signed int v16; // r1@33
  int v17; // r0@38
  void *v18; // r0@38
  int v19; // r4@39
  unsigned int *v20; // r1@40
  unsigned int v21; // r0@42
  unsigned int *v22; // r5@46
  unsigned int v23; // r0@48
  char *v24; // r0@53
  RakNet *result; // r0@54
  unsigned int *v26; // r2@56
  signed int v27; // r1@58
  unsigned int *v28; // r2@60
  signed int v29; // r1@62
  int v30; // [sp+Ch] [bp-DCh]@38
  __int64 v31; // [sp+10h] [bp-D8h]@23
  int v32; // [sp+18h] [bp-D0h]@17
  int v33; // [sp+1Ch] [bp-CCh]@17
  int v34; // [sp+20h] [bp-C8h]@1
  int v35; // [sp+24h] [bp-C4h]@1
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v36; // [sp+28h] [bp-C0h]@1
  int v37; // [sp+2Ch] [bp-BCh]@39
  char *v38; // [sp+30h] [bp-B8h]@1
  char v39; // [sp+38h] [bp-B0h]@38
  RakNet *v40; // [sp+D4h] [bp-14h]@1

  v1 = this;
  v40 = _stack_chk_guard;
  v38 = (char *)&unk_28898CC;
  xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v34);
  xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
    (xbox::services::multiplayer::manager::multiplayer_manager *)&v36,
    v34);
  v2 = v35;
  if ( v35 )
  {
    v3 = (unsigned int *)(v35 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  if ( !v36 )
    goto LABEL_38;
  if ( *(_DWORD *)(*(_DWORD *)xbox::services::multiplayer::manager::multiplayer_lobby_session::correlation_id(v36) - 12) )
    v7 = (int *)xbox::services::multiplayer::manager::multiplayer_lobby_session::correlation_id(v36);
    sub_119C854(&v32, v7);
    utility::conversions::to_utf8string(&v33, &v32);
    xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
      (int *)&v38,
      &v33);
    v8 = (void *)(v33 - 12);
    if ( (int *)(v33 - 12) != &dword_28898C0 )
      v15 = (unsigned int *)(v33 - 4);
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v8);
    v9 = (void *)(v32 - 12);
    if ( (int *)(v32 - 12) != &dword_28898C0 )
      v10 = (unsigned int *)(v32 - 4);
          v11 = __ldrex(v10);
        while ( __strex(v11 - 1, v10) );
        v11 = (*v10)--;
      if ( v11 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v9);
LABEL_38:
    NetworkHandler::getServerId((NetworkHandler *)&v39, *((_DWORD *)v1 + 17));
    NetworkIdentifier::toString((NetworkIdentifier *)&v30, (int)&v39);
    v17 = Level::getPrimaryLocalPlayer(*((Level **)v1 + 8));
    MinecraftEventing::fireEventMultiplayerRoundStart(
      v17,
      *((Level **)v1 + 8),
      (const char **)&v30,
      0,
      (const char **)&v38,
      (int)v1 + 360);
    *((_BYTE *)v1 + 28) = 0;
    v18 = (void *)(v30 - 12);
    if ( (int *)(v30 - 12) != &dword_28898C0 )
      v28 = (unsigned int *)(v30 - 4);
          v29 = __ldrex(v28);
        while ( __strex(v29 - 1, v28) );
        v29 = (*v28)--;
      if ( v29 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v18);
    goto LABEL_39;
  sub_119D43C(&v31);
  v13 = v31 - *((_QWORD *)v1 + 34);
  v12 = (unsigned int)v13 >= 0xFC23AC00;
  LODWORD(v13) = 0;
  if ( !v12 )
    LODWORD(v13) = 1;
  v14 = 0;
  if ( SHIDWORD(v13) < 6 )
    v14 = 1;
  if ( HIDWORD(v13) == 6 )
    v14 = v13;
  if ( !v14 )
LABEL_39:
  v19 = v37;
  if ( v37 )
    v20 = (unsigned int *)(v37 + 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 == 1 )
      v22 = (unsigned int *)(v19 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
          v23 = __ldrex(v22);
        while ( __strex(v23 - 1, v22) );
        v23 = (*v22)--;
      if ( v23 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
  v24 = v38 - 12;
  if ( (int *)(v38 - 12) != &dword_28898C0 )
    v26 = (unsigned int *)(v38 - 4);
        v27 = __ldrex(v26);
      while ( __strex(v27 - 1, v26) );
      v27 = (*v26)--;
    if ( v27 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v24);
  result = (RakNet *)(_stack_chk_guard - v40);
  if ( _stack_chk_guard != v40 )
    _stack_chk_fail(result);
  return result;
}


RakNet *__fastcall Social::MultiplayerService::_updateClientConnectionStateInLobby(Social::MultiplayerService *this)
{
  Social::MultiplayerService *v1; // r5@1
  char *v2; // r0@3
  int v3; // r6@3
  void *v4; // r0@3
  void *v5; // r0@4
  int v6; // r6@5
  char *v7; // r0@5
  int v8; // r6@6
  RakNet *result; // r0@8
  unsigned int *v10; // r2@10
  signed int v11; // r1@12
  unsigned int *v12; // r2@14
  signed int v13; // r1@16
  char v14; // [sp+4h] [bp-404h]@6
  int v15; // [sp+40h] [bp-3C8h]@6
  __int16 v16; // [sp+44h] [bp-3C4h]@6
  int v17; // [sp+48h] [bp-3C0h]@6
  int v18; // [sp+4Ch] [bp-3BCh]@6
  int v19; // [sp+50h] [bp-3B8h]@6
  int v20; // [sp+54h] [bp-3B4h]@6
  int v21; // [sp+58h] [bp-3B0h]@6
  int v22; // [sp+74h] [bp-394h]@6
  int v23; // [sp+78h] [bp-390h]@6
  char v24; // [sp+7Ch] [bp-38Ch]@6
  char v25; // [sp+80h] [bp-388h]@5
  int v26; // [sp+BCh] [bp-34Ch]@5
  __int16 v27; // [sp+C0h] [bp-348h]@5
  int v28; // [sp+C4h] [bp-344h]@5
  int v29; // [sp+C8h] [bp-340h]@5
  int v30; // [sp+CCh] [bp-33Ch]@5
  int v31; // [sp+D0h] [bp-338h]@5
  int v32; // [sp+D4h] [bp-334h]@5
  int v33; // [sp+F0h] [bp-318h]@5
  int v34; // [sp+F4h] [bp-314h]@5
  char v35; // [sp+F8h] [bp-310h]@5
  int v36; // [sp+FCh] [bp-30Ch]@3
  int v37; // [sp+104h] [bp-304h]@3
  char v38; // [sp+108h] [bp-300h]@3
  int v39; // [sp+144h] [bp-2C4h]@2
  __int16 v40; // [sp+148h] [bp-2C0h]@2
  int v41; // [sp+14Ch] [bp-2BCh]@5
  int v42; // [sp+150h] [bp-2B8h]@5
  int v43; // [sp+154h] [bp-2B4h]@5
  int v44; // [sp+158h] [bp-2B0h]@5
  int v45; // [sp+15Ch] [bp-2ACh]@5
  int v46; // [sp+178h] [bp-290h]@5
  int v47; // [sp+17Ch] [bp-28Ch]@5
  char v48; // [sp+180h] [bp-288h]@5
  char v49; // [sp+188h] [bp-280h]@3
  char v50; // [sp+224h] [bp-1E4h]@3
  int v51; // [sp+228h] [bp-1E0h]@3
  char v52; // [sp+2BCh] [bp-14Ch]@3
  int v53; // [sp+2C0h] [bp-148h]@3
  char v54; // [sp+354h] [bp-B4h]@2
  RakNet *v55; // [sp+3ECh] [bp-1Ch]@1

  v1 = this;
  v55 = _stack_chk_guard;
  if ( (*(int (**)(void))(*(_DWORD *)this + 140))() == 1 )
  {
    v39 = 0;
    Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v40);
    (*(void (__fastcall **)(char *))(**((_DWORD **)v1 + 18) + 40))(&v54);
    if ( v54 )
    {
      (*(void (__fastcall **)(char *))(**((_DWORD **)v1 + 18) + 40))(&v52);
      v2 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v53, 0, 124);
      sub_21E94B4((void **)&v37, v2);
      (*(void (__fastcall **)(char *))(**((_DWORD **)v1 + 18) + 40))(&v50);
      v3 = RakNet::SystemAddress::GetPort((RakNet::SystemAddress *)&v51);
      NetworkHandler::getPrimaryNetworkId((NetworkHandler *)&v49, *((_DWORD *)v1 + 17));
      NetworkIdentifier::toString((NetworkIdentifier *)&v36, (int)&v49);
      Social::GameConnectionInfo::GameConnectionInfo((int)&v38, 3, &v37, v3, &v36);
      v4 = (void *)(v36 - 12);
      if ( (int *)(v36 - 12) != &dword_28898C0 )
      {
        v10 = (unsigned int *)(v36 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 - 1, v10) );
        }
        else
          v11 = (*v10)--;
        if ( v11 <= 0 )
          j_j_j_j__ZdlPv_9(v4);
      }
      v5 = (void *)(v37 - 12);
      if ( (int *)(v37 - 12) != &dword_28898C0 )
        v12 = (unsigned int *)(v37 - 4);
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
          v13 = (*v12)--;
        if ( v13 <= 0 )
          j_j_j_j__ZdlPv_9(v5);
      v6 = *((_DWORD *)v1 + 2);
      Social::GameConnectionInfo::GameConnectionInfo(
        (Social::GameConnectionInfo *)&v25,
        (const Social::GameConnectionInfo *)&v38);
      v26 = v6;
        (Social::GameConnectionInfo *)&v27,
        (const Social::GameConnectionInfo *)&v25);
      v39 = v26;
      v40 = v27;
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v41, &v28);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v42, &v29);
      v43 = v30;
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v44, &v31);
      std::_Hashtable<std::string,std::string,std::allocator<std::string>,std::__detail::_Identity,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,true,true>>::_M_move_assign(
        (int)&v45,
        (int)&v32);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v46, &v33);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v47, &v34);
      v48 = v35;
      Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v27);
      Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v25);
      v7 = &v38;
    }
    else
      v8 = *((_DWORD *)v1 + 2);
      Social::GameConnectionInfo::GameConnectionInfo((Social::GameConnectionInfo *)&v14);
      v15 = v8;
        (Social::GameConnectionInfo *)&v16,
        (const Social::GameConnectionInfo *)&v14);
      v39 = v15;
      v40 = v16;
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v41, &v17);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v42, &v18);
      v43 = v19;
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v44, &v20);
        (int)&v21);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v46, &v22);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(&v47, &v23);
      v48 = v24;
      Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v16);
      v7 = &v14;
    Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)v7);
    (*(void (__fastcall **)(Social::MultiplayerService *, int *))(*(_DWORD *)v1 + 204))(v1, &v39);
    Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v40);
  }
  result = (RakNet *)(_stack_chk_guard - v55);
  if ( _stack_chk_guard != v55 )
    _stack_chk_fail(result);
  return result;
}


signed int __fastcall Social::UserManager::userHasClient(Social::UserManager *this, int a2)
{
  char *v2; // r3@1
  char *v3; // r2@1
  char *v4; // r12@2
  char *v5; // r0@3
  char *v6; // r3@10
  signed int result; // r0@14

  v2 = (char *)*((_DWORD *)this + 14);
  v3 = (char *)this + 52;
  if ( v2 )
  {
    v4 = (char *)this + 52;
    do
    {
      v5 = v2;
      while ( *((_DWORD *)v5 + 4) < a2 )
      {
        v5 = (char *)*((_DWORD *)v5 + 3);
        if ( !v5 )
        {
          v5 = v4;
          goto LABEL_10;
        }
      }
      v2 = (char *)*((_DWORD *)v5 + 2);
      v4 = v5;
    }
    while ( v2 );
  }
  else
    v5 = (char *)this + 52;
LABEL_10:
  v6 = v3;
  if ( v5 != v3 )
    if ( *((_DWORD *)v5 + 4) > a2 )
      v5 = v3;
    v6 = v5;
  result = 0;
  if ( v6 != v3 )
    result = 1;
  return result;
}


int __fastcall Social::MultiplayerService::getInRegionPage(Social::MultiplayerService *this)
{
  return 0;
}


unsigned int __fastcall Social::XboxLiveUserManager::signinInProgress(Social::XboxLiveUserManager *this)
{
  unsigned int v1; // r0@1
  signed int v2; // r1@1

  v1 = *((_WORD *)this + 62);
  v2 = 0;
  if ( v1 > 0xFF )
    v2 = 1;
  v1 = (unsigned __int8)v1;
  if ( (_BYTE)v1 )
    v1 = 1;
  return v1 | v2;
}


int __fastcall Social::MultiplayerXBL::advertiseGame(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  int v2; // r0@1
  int v3; // r5@1
  Social::XboxLiveUserManager *v4; // r0@1
  int result; // r0@1
  Social::XboxLiveUserManager *v6; // r0@2
  int v7; // r6@5
  int v8; // r5@8
  unsigned int *v9; // r1@9
  unsigned int *v10; // r7@15
  int v11; // r5@22
  unsigned int *v12; // r1@23
  unsigned int *v13; // r7@29
  Social::User *v14; // [sp+4h] [bp-24h]@2
  int v15; // [sp+8h] [bp-20h]@8
  Social::User *v16; // [sp+Ch] [bp-1Ch]@1
  int v17; // [sp+10h] [bp-18h]@22

  v1 = this;
  v2 = (*(int (**)(void))(**((_DWORD **)this + 18) + 32))();
  v3 = ThirdPartyInfo::isValid((ThirdPartyInfo *)(v2 + 20));
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v16, *((_DWORD *)v1 + 11));
  v4 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v16);
  result = Social::XboxLiveUserManager::isSignedIn(v4);
  if ( result == 1 )
  {
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v14, *((_DWORD *)v1 + 11));
    v6 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v14);
    result = Social::XboxLiveUserManager::checkPrivilegeSilently(v6, 254);
    if ( result == 1 )
    {
      result = *((_BYTE *)v1 + 176);
      if ( *((_BYTE *)v1 + 176)
        || (result = (*(int (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v1 + 116))(v1) | v3, result == 1) )
      {
        v7 = *((_DWORD *)v1 + 76) != 0;
      }
      else
        v7 = 0;
    }
    else
      v7 = 0;
    v8 = v15;
    if ( v15 )
      v9 = (unsigned int *)(v15 + 4);
      if ( &pthread_create )
        __dmb();
        do
          result = __ldrex(v9);
        while ( __strex(result - 1, v9) );
        result = (*v9)--;
      if ( result == 1 )
        v10 = (unsigned int *)(v8 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
        if ( &pthread_create )
        {
          __dmb();
          do
            result = __ldrex(v10);
          while ( __strex(result - 1, v10) );
        }
        else
          result = (*v10)--;
        if ( result == 1 )
          result = (*(int (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  }
  else
    v7 = 0;
  v11 = v17;
  if ( v17 )
    v12 = (unsigned int *)(v17 + 4);
    if ( &pthread_create )
      __dmb();
      do
        result = __ldrex(v12);
      while ( __strex(result - 1, v12) );
      result = (*v12)--;
      v13 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          result = __ldrex(v13);
        while ( __strex(result - 1, v13) );
        result = (*v13)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  if ( v7 == 1 )
    result = 1;
    *((_BYTE *)v1 + 255) = 1;
    *((_DWORD *)v1 + 64) = 1;
  return result;
}


signed int __fastcall Social::MultiplayerXBL::checkIsInviteForCurrentGame(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  Social::XboxLiveUserManager *v2; // r0@1
  Social::XboxLiveUserManager *v3; // r0@2
  signed int v4; // r0@2
  int v5; // r5@2
  int v6; // r6@2
  unsigned int *v7; // r1@3
  unsigned int v8; // r0@5
  unsigned int *v9; // r7@10
  unsigned int v10; // r0@12
  int v11; // r5@17
  unsigned int *v12; // r1@18
  unsigned int v13; // r0@20
  unsigned int *v14; // r7@24
  unsigned int v15; // r0@26
  signed int result; // r0@32
  int v17; // r5@36
  unsigned int *v18; // r1@37
  unsigned int v19; // r0@39
  unsigned int *v20; // r6@43
  unsigned int v21; // r0@45
  int v22; // r0@51
  char *v23; // r5@51
  unsigned int *v24; // r0@52
  unsigned int v25; // r1@54
  _DWORD *v26; // r0@56
  __int64 v27; // r1@56
  int v28; // r4@59
  unsigned int *v29; // r1@60
  unsigned int v30; // r0@62
  unsigned int *v31; // r5@66
  unsigned int v32; // r0@68
  int v33; // r4@73
  unsigned int *v34; // r1@74
  unsigned int v35; // r0@76
  unsigned int *v36; // r5@80
  unsigned int v37; // r0@82
  void *v38; // r0@87
  int v39; // r4@88
  unsigned int *v40; // r1@89
  unsigned int v41; // r0@91
  unsigned int *v42; // r5@95
  unsigned int v43; // r0@97
  int v44; // r4@102
  unsigned int *v45; // r1@103
  unsigned int v46; // r0@105
  unsigned int *v47; // r5@109
  unsigned int v48; // r0@111
  int v49; // r4@116
  unsigned int *v50; // r1@117
  unsigned int v51; // r0@119
  unsigned int *v52; // r5@123
  unsigned int v53; // r0@125
  int v54; // r4@130
  unsigned int *v55; // r1@131
  unsigned int v56; // r0@133
  unsigned int *v57; // r5@137
  unsigned int v58; // r0@139
  unsigned int *v59; // r2@145
  signed int v60; // r1@147
  Social::MultiplayerXBL *v61; // [sp+0h] [bp-78h]@51
  int v62; // [sp+4h] [bp-74h]@51
  int v63; // [sp+8h] [bp-70h]@51
  int v64; // [sp+Ch] [bp-6Ch]@51
  Social::User *v65; // [sp+10h] [bp-68h]@51
  int v66; // [sp+14h] [bp-64h]@102
  xbox::services::xbox_live_context *v67; // [sp+18h] [bp-60h]@51
  int v68; // [sp+1Ch] [bp-5Ch]@88
  char v69; // [sp+20h] [bp-58h]@51
  int v70; // [sp+24h] [bp-54h]@73
  char v71; // [sp+28h] [bp-50h]@59
  int v72; // [sp+2Ch] [bp-4Ch]@116
  _DWORD *v73; // [sp+30h] [bp-48h]@56
  __int64 v74; // [sp+38h] [bp-40h]@56
  int v75; // [sp+40h] [bp-38h]@36
  int v76; // [sp+44h] [bp-34h]@36
  int v77; // [sp+48h] [bp-30h]@36
  int v78; // [sp+4Ch] [bp-2Ch]@51
  Social::User *v79; // [sp+50h] [bp-28h]@2
  int v80; // [sp+54h] [bp-24h]@2
  Social::User *v81; // [sp+58h] [bp-20h]@1
  int v82; // [sp+5Ch] [bp-1Ch]@17

  v1 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v81, *((_DWORD *)this + 11));
  v2 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v81);
  if ( Social::XboxLiveUserManager::isSignedIn(v2) == 1 )
  {
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v79, *((_DWORD *)v1 + 11));
    v3 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v79);
    v4 = Social::XboxLiveUserManager::checkPrivilegeSilently(v3, 254);
    v5 = v80;
    v6 = v4 ^ 1;
    if ( v80 )
    {
      v7 = (unsigned int *)(v80 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 == 1 )
        v9 = (unsigned int *)(v5 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
        if ( &pthread_create )
        {
          __dmb();
          do
            v10 = __ldrex(v9);
          while ( __strex(v10 - 1, v9) );
        }
        else
          v10 = (*v9)--;
        if ( v10 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
    }
  }
  else
    v6 = 1;
  v11 = v82;
  if ( v82 )
    v12 = (unsigned int *)(v82 + 4);
    if ( &pthread_create )
      __dmb();
      do
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
    else
      v13 = (*v12)--;
    if ( v13 == 1 )
      v14 = (unsigned int *)(v11 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
        v15 = (*v14)--;
      if ( v15 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
  if ( v6 == 1 )
    result = 2;
    *((_DWORD *)v1 + 78) = 2;
LABEL_35:
    *((_DWORD *)v1 + 78) = 0;
    return result;
  result = *((_DWORD *)v1 + 78);
  if ( result )
    if ( result != 1 )
      goto LABEL_35;
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v75);
    xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
      (xbox::services::multiplayer::manager::multiplayer_manager *)&v77,
      v75);
    v17 = v76;
    if ( v76 )
      v18 = (unsigned int *)(v76 + 4);
          v19 = __ldrex(v18);
        while ( __strex(v19 - 1, v18) );
        v19 = (*v18)--;
      if ( v19 == 1 )
        v20 = (unsigned int *)(v17 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
            v21 = __ldrex(v20);
          while ( __strex(v21 - 1, v20) );
          v21 = (*v20)--;
        if ( v21 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
    if ( v77 )
      *((_DWORD *)v1 + 78) = 1;
      Social::UserManager::getPrimaryUser((Social::UserManager *)&v65, *((_DWORD *)v1 + 11));
      v22 = Social::User::getLiveUser(v65);
      Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v67, v22);
      v23 = xbox::services::xbox_live_context::multiplayer_service(v67);
      utility::conversions::to_string_t(&v64, (int *)v1 + 20);
      xbox::services::multiplayer::multiplayer_service::get_current_session_by_handle((int)&v69, (int)v23, &v64);
      v61 = v1;
      v62 = v77;
      v63 = v78;
      if ( v78 )
        v24 = (unsigned int *)(v78 + 4);
            v25 = __ldrex(v24);
          while ( __strex(v25 + 1, v24) );
          ++*v24;
      sub_1000D8C((int)&v71, (int)&v69, (int)&v61);
      v28 = v63;
      if ( v63 )
        v29 = (unsigned int *)(v63 + 4);
            v30 = __ldrex(v29);
          while ( __strex(v30 - 1, v29) );
          v30 = (*v29)--;
        if ( v30 == 1 )
          v31 = (unsigned int *)(v28 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
          if ( &pthread_create )
          {
            __dmb();
            do
              v32 = __ldrex(v31);
            while ( __strex(v32 - 1, v31) );
          }
          else
            v32 = (*v31)--;
          if ( v32 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
      v33 = v70;
      if ( v70 )
        v34 = (unsigned int *)(v70 + 4);
            v35 = __ldrex(v34);
          while ( __strex(v35 - 1, v34) );
          v35 = (*v34)--;
        if ( v35 == 1 )
          v36 = (unsigned int *)(v33 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 8))(v33);
              v37 = __ldrex(v36);
            while ( __strex(v37 - 1, v36) );
            v37 = (*v36)--;
          if ( v37 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 12))(v33);
      v38 = (void *)(v64 - 12);
      if ( (int *)(v64 - 12) != &dword_28898C0 )
        v59 = (unsigned int *)(v64 - 4);
            v60 = __ldrex(v59);
          while ( __strex(v60 - 1, v59) );
          v60 = (*v59)--;
        if ( v60 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v38);
      v39 = v68;
      if ( v68 )
        v40 = (unsigned int *)(v68 + 4);
            v41 = __ldrex(v40);
          while ( __strex(v41 - 1, v40) );
          v41 = (*v40)--;
        if ( v41 == 1 )
          v42 = (unsigned int *)(v39 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v39 + 8))(v39);
              v43 = __ldrex(v42);
            while ( __strex(v43 - 1, v42) );
            v43 = (*v42)--;
          if ( v43 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v39 + 12))(v39);
      v44 = v66;
      if ( v66 )
        v45 = (unsigned int *)(v66 + 4);
            v46 = __ldrex(v45);
          while ( __strex(v46 - 1, v45) );
          v46 = (*v45)--;
        if ( v46 == 1 )
          v47 = (unsigned int *)(v44 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 8))(v44);
              v48 = __ldrex(v47);
            while ( __strex(v48 - 1, v47) );
            v48 = (*v47)--;
          if ( v48 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 12))(v44);
      v49 = v72;
      if ( v72 )
        v50 = (unsigned int *)(v72 + 4);
            v51 = __ldrex(v50);
          while ( __strex(v51 - 1, v50) );
          v51 = (*v50)--;
        if ( v51 == 1 )
          v52 = (unsigned int *)(v49 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v49 + 8))(v49);
              v53 = __ldrex(v52);
            while ( __strex(v53 - 1, v52) );
            v53 = (*v52)--;
          if ( v53 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v49 + 12))(v49);
      v26 = operator new(4u);
      LODWORD(v27) = sub_100F59E;
      *v26 = v1;
      HIDWORD(v27) = sub_100F592;
      v73 = v26;
      v74 = v27;
      MPMCQueue<std::function<void ()(void)>>::push((int)v1 + 316, (int)&v73);
      if ( (_DWORD)v74 )
        ((void (*)(void))v74)();
    v54 = v78;
    if ( v78 )
      v55 = (unsigned int *)(v78 + 4);
          v56 = __ldrex(v55);
        while ( __strex(v56 - 1, v55) );
        v56 = (*v55)--;
      if ( v56 == 1 )
        v57 = (unsigned int *)(v54 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v54 + 8))(v54);
            v58 = __ldrex(v57);
          while ( __strex(v58 - 1, v57) );
          v58 = (*v57)--;
        if ( v58 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v54 + 12))(v54);
  return 1;
}


int __fastcall Social::MultiplayerXBL::_createSession(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  Social::XboxLiveUserManager *v2; // r0@1
  int result; // r0@1
  int v4; // r5@2
  int v5; // r6@2
  unsigned int *v6; // r1@3
  int v7; // r4@7
  unsigned int *v8; // r1@8
  unsigned int *v9; // r7@14
  unsigned int *v10; // r5@20
  int v11; // r5@28
  void *v12; // r0@28
  int v13; // r5@29
  unsigned int *v14; // r1@30
  unsigned int v15; // r0@32
  unsigned int *v16; // r6@36
  unsigned int v17; // r0@38
  int *v18; // r5@47
  int v19; // r0@47
  void *v20; // r0@47
  int v21; // r5@48
  unsigned int *v22; // r1@49
  unsigned int v23; // r0@51
  unsigned int *v24; // r6@55
  unsigned int v25; // r0@57
  int v26; // r5@62
  unsigned int *v27; // r1@63
  unsigned int v28; // r0@65
  unsigned int *v29; // r6@69
  unsigned int v30; // r0@71
  int v31; // r5@76
  unsigned int *v32; // r1@77
  unsigned int v33; // r0@79
  unsigned int *v34; // r6@83
  unsigned int v35; // r0@85
  int v36; // r5@90
  unsigned int *v37; // r1@91
  unsigned int v38; // r0@93
  unsigned int *v39; // r6@97
  unsigned int v40; // r0@99
  unsigned int *v41; // r2@105
  signed int v42; // r1@107
  unsigned int *v43; // r2@109
  signed int v44; // r1@111
  Social::User *v45; // [sp+4h] [bp-5Ch]@47
  int v46; // [sp+8h] [bp-58h]@62
  char v47; // [sp+Ch] [bp-54h]@47
  int v48; // [sp+10h] [bp-50h]@48
  int v49; // [sp+14h] [bp-4Ch]@47
  int v50; // [sp+18h] [bp-48h]@90
  int *v51; // [sp+1Ch] [bp-44h]@47
  int v52; // [sp+20h] [bp-40h]@76
  char v53; // [sp+24h] [bp-3Ch]@47
  int v54; // [sp+2Ch] [bp-34h]@47
  int v55; // [sp+34h] [bp-2Ch]@28
  int v56; // [sp+38h] [bp-28h]@28
  int v57; // [sp+3Ch] [bp-24h]@29
  Social::User *v58; // [sp+40h] [bp-20h]@1
  int v59; // [sp+44h] [bp-1Ch]@2

  v1 = this;
  *((_BYTE *)this + 444) = 0;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v58, *((_DWORD *)this + 11));
  v2 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v58);
  result = Social::XboxLiveUserManager::isSignedIn(v2);
  if ( result == 1 )
  {
    v4 = v59;
    v5 = *((_DWORD *)v1 + 76);
    if ( v59 )
    {
      v6 = (unsigned int *)(v59 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v6);
        while ( __strex(result - 1, v6) );
      }
      else
        result = (*v6)--;
      if ( result == 1 )
        v9 = (unsigned int *)(v4 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
        if ( &pthread_create )
        {
          __dmb();
          do
            result = __ldrex(v9);
          while ( __strex(result - 1, v9) );
        }
        else
          result = (*v9)--;
        if ( result == 1 )
          result = (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
    }
    if ( v5 )
      *((_BYTE *)v1 + 443) = 0;
      xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v56);
      v11 = v56;
      sub_119C884((void **)&v55, "MinecraftLobby");
      xbox::services::multiplayer::manager::multiplayer_manager::initialize(v11, &v55);
      v12 = (void *)(v55 - 12);
      if ( (int *)(v55 - 12) != &dword_28898C0 )
        v41 = (unsigned int *)(v55 - 4);
            v42 = __ldrex(v41);
          while ( __strex(v42 - 1, v41) );
          v42 = (*v41)--;
        if ( v42 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v12);
      v13 = v57;
      if ( v57 )
        v14 = (unsigned int *)(v57 + 4);
            v15 = __ldrex(v14);
          while ( __strex(v15 - 1, v14) );
          v15 = (*v14)--;
        if ( v15 == 1 )
          v16 = (unsigned int *)(v13 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          if ( &pthread_create )
          {
            __dmb();
            do
              v17 = __ldrex(v16);
            while ( __strex(v17 - 1, v16) );
          }
          else
            v17 = (*v16)--;
          if ( v17 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
      xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v49);
      xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
        (xbox::services::multiplayer::manager::multiplayer_manager *)&v51,
        v49);
      v18 = v51;
      Social::UserManager::getPrimaryUser((Social::UserManager *)&v45, *((_DWORD *)v1 + 11));
      v19 = Social::User::getLiveUser(v45);
      Social::XboxLiveUserManager::getCurrentUser((Social::XboxLiveUserManager *)&v47, v19);
      xbox::services::multiplayer::manager::multiplayer_lobby_session::add_local_user((int)&v53, v18, (int)&v47);
      v20 = (void *)(v54 - 12);
      if ( (int *)(v54 - 12) != &dword_28898C0 )
        v43 = (unsigned int *)(v54 - 4);
            v44 = __ldrex(v43);
          while ( __strex(v44 - 1, v43) );
          v44 = (*v43)--;
        if ( v44 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v20);
      v21 = v48;
      if ( v48 )
        v22 = (unsigned int *)(v48 + 4);
            v23 = __ldrex(v22);
          while ( __strex(v23 - 1, v22) );
          v23 = (*v22)--;
        if ( v23 == 1 )
          v24 = (unsigned int *)(v21 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
              v25 = __ldrex(v24);
            while ( __strex(v25 - 1, v24) );
            v25 = (*v24)--;
          if ( v25 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
      v26 = v46;
      if ( v46 )
        v27 = (unsigned int *)(v46 + 4);
            v28 = __ldrex(v27);
          while ( __strex(v28 - 1, v27) );
          v28 = (*v27)--;
        if ( v28 == 1 )
          v29 = (unsigned int *)(v26 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
              v30 = __ldrex(v29);
            while ( __strex(v30 - 1, v29) );
            v30 = (*v29)--;
          if ( v30 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
      v31 = v52;
      if ( v52 )
        v32 = (unsigned int *)(v52 + 4);
            v33 = __ldrex(v32);
          while ( __strex(v33 - 1, v32) );
          v33 = (*v32)--;
        if ( v33 == 1 )
          v34 = (unsigned int *)(v31 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 8))(v31);
              v35 = __ldrex(v34);
            while ( __strex(v35 - 1, v34) );
            v35 = (*v34)--;
          if ( v35 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v31 + 12))(v31);
      v36 = v50;
      if ( v50 )
        v37 = (unsigned int *)(v50 + 4);
            v38 = __ldrex(v37);
          while ( __strex(v38 - 1, v37) );
          v38 = (*v37)--;
        if ( v38 == 1 )
          v39 = (unsigned int *)(v36 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v36 + 8))(v36);
              v40 = __ldrex(v39);
            while ( __strex(v40 - 1, v39) );
            v40 = (*v39)--;
          if ( v40 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v36 + 12))(v36);
      (*(void (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v1 + 48))(v1);
      result = 1;
      *((_BYTE *)v1 + 444) = 1;
  }
  else
    v7 = v59;
      v8 = (unsigned int *)(v59 + 4);
          result = __ldrex(v8);
        while ( __strex(result - 1, v8) );
        result = (*v8)--;
        v10 = (unsigned int *)(v7 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
            result = __ldrex(v10);
          while ( __strex(result - 1, v10) );
          result = (*v10)--;
          result = (*(int (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  return result;
}


void __fastcall Social::Events::AutomationEventLogger::recordEvent(int a1, int a2)
{
  Social::Events::AutomationEventLogger::recordEvent(a1, a2);
}


signed int __fastcall Social::Events::EventManager::setPlayerGlobalProperty<bool>(int a1, int a2, unsigned int a3, int **a4, bool *a5)
{
  unsigned int v5; // r7@1
  int *v6; // r10@1
  int v7; // r11@1
  int v8; // r4@1
  int v9; // r11@1
  int v10; // t1@1
  int v11; // r4@1
  int v12; // r0@1
  _DWORD *v13; // r9@2
  int v14; // r6@2
  _DWORD *v15; // r8@4
  bool v16; // zf@7
  int v17; // r0@11
  int v19; // [sp+8h] [bp-40h]@1
  char v20; // [sp+Ch] [bp-3Ch]@12
  unsigned int v21; // [sp+14h] [bp-34h]@1
  int *v22; // [sp+1Ch] [bp-2Ch]@11

  v5 = a3;
  v6 = (int *)a4;
  v7 = a2;
  v8 = a1;
  v19 = a1;
  v21 = a3;
  Social::Events::EventManager::removePlayerGlobalProperty(a2, a3, a4);
  sub_21E8AF4((int *)v8, v6);
  Json::Value::Value((Json::Value *)(v8 + 8), *a5);
  v10 = *(_DWORD *)(v7 + 96);
  v9 = v7 + 96;
  v11 = v5 % *(_DWORD *)(v9 + 4);
  v12 = *(_DWORD *)(v10 + 4 * v11);
  if ( !v12 )
    goto LABEL_11;
  v13 = *(_DWORD **)v12;
  v14 = *(_DWORD *)(*(_DWORD *)v12 + 4);
  while ( v14 != v5 )
  {
    v15 = (_DWORD *)*v13;
    if ( *v13 )
    {
      v14 = v15[1];
      v12 = (int)v13;
      v13 = (_DWORD *)*v13;
      if ( v15[1] % *(_DWORD *)(v9 + 4) == v11 )
        continue;
    }
  }
  v16 = v12 == 0;
  if ( v12 )
    v12 = *(_DWORD *)v12;
    v16 = v12 == 0;
  if ( v16 )
LABEL_11:
    v22 = (int *)&v21;
    v17 = j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            v9,
            (int)&unk_262D414,
            &v22);
    v12 = std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
            v11,
            v5,
            v17);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
           (int)&v20,
           (unsigned __int64 *)(v12 + 8),
           v6,
           v19);
}


void __fastcall Social::XboxLiveUserManager::getCurrentXUID(Social::XboxLiveUserManager *this, int a2)
{
  Social::XboxLiveUserManager::getCurrentXUID(this, a2);
}


int __fastcall Social::UserManager::isUserSignedIn(Social::UserManager *this, unsigned int a2)
{
  Social::User **v2; // r5@1 OVERLAPPED
  Social::User **v3; // r6@1 OVERLAPPED
  unsigned int v4; // r4@1
  int result; // r0@4
  Social::User *v6; // r0@5
  int v7; // r4@5
  unsigned int *v8; // r1@6
  unsigned int v9; // r2@8
  Social::XboxLiveUserManager *v10; // r0@13
  int v11; // r5@13
  unsigned int *v12; // r1@16
  unsigned int v13; // r0@18
  unsigned int *v14; // r6@22
  unsigned int v15; // r0@24

  *(_QWORD *)&v2 = *((_QWORD *)this + 1);
  v4 = a2;
  if ( v2 == v3 )
  {
LABEL_4:
    result = 0;
  }
  else
    while ( Social::User::getLocalUserId(*v2) != v4 )
    {
      v2 += 2;
      if ( v3 == v2 )
        goto LABEL_4;
    }
    v7 = *(_QWORD *)v2 >> 32;
    v6 = (Social::User *)*(_QWORD *)v2;
    if ( v7 )
      v8 = (unsigned int *)(v7 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 + 1, v8) );
      }
      else
        ++*v8;
    else
      v7 = 0;
    if ( v6 )
      v10 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v6);
      v11 = Social::XboxLiveUserManager::isSignedIn(v10);
      v11 = 0;
      v12 = (unsigned int *)(v7 + 4);
          v13 = __ldrex(v12);
        while ( __strex(v13 - 1, v12) );
        v13 = (*v12)--;
      if ( v13 == 1 )
        v14 = (unsigned int *)(v7 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
        if ( &pthread_create )
        {
          __dmb();
          do
            v15 = __ldrex(v14);
          while ( __strex(v15 - 1, v14) );
        }
        else
          v15 = (*v14)--;
        if ( v15 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
    result = v11;
  return result;
}


unsigned int __fastcall Social::XboxLiveUserInfo::_processXuids(int a1, unsigned __int64 *a2, int a3, int a4)
{
  int v4; // r7@1
  int v5; // r9@1
  int v6; // r10@1
  int v7; // r11@1
  unsigned __int64 *v8; // r5@1
  unsigned int v9; // r1@2
  unsigned int *v10; // r0@2
  unsigned int v11; // r2@5
  unsigned int v12; // r3@6
  int v13; // r6@7
  unsigned int *v14; // r4@7
  unsigned int v15; // r1@9
  unsigned int v16; // r1@14
  unsigned int v17; // r0@20
  char *v18; // r0@26
  unsigned int v19; // r0@28
  int v20; // r0@31
  unsigned int *v21; // r0@32
  unsigned int v22; // r1@34
  __int64 *v23; // r6@37
  int v24; // r8@37
  unsigned int *v25; // r1@38
  unsigned int v26; // r0@40
  unsigned int *v27; // r5@44
  unsigned int v28; // r0@46
  int v29; // r0@51
  __int64 *v30; // r8@51
  unsigned int *v31; // r2@52
  unsigned int v32; // r1@54
  int v33; // r6@59
  unsigned int *v34; // r1@60
  unsigned int v35; // r0@62
  unsigned int *v36; // r5@66
  unsigned int v37; // r0@68
  int v38; // r5@73
  unsigned int *v39; // r1@74
  unsigned int v40; // r0@76
  unsigned int *v41; // r6@80
  unsigned int v42; // r0@82
  int *v43; // r0@87
  unsigned int v44; // r0@89
  int v45; // r0@92
  unsigned int *v46; // r0@93
  unsigned int v47; // r1@95
  int v48; // r5@98
  unsigned int *v49; // r1@99
  unsigned int v50; // r0@101
  unsigned int *v51; // r6@105
  unsigned int v52; // r0@107
  int v53; // r0@112
  unsigned int *v54; // r2@113
  unsigned int v55; // r1@115
  int v56; // r5@120
  unsigned int *v57; // r1@121
  unsigned int v58; // r0@123
  unsigned int *v59; // r6@127
  unsigned int v60; // r0@129
  int v61; // r5@138
  unsigned int *v62; // r1@139
  unsigned int v63; // r0@141
  unsigned int *v64; // r6@145
  unsigned int v65; // r0@147
  __int64 v66; // r0@152
  int v67; // r1@153
  unsigned int *v68; // r1@154
  unsigned int v69; // r0@156
  int v70; // r0@158
  int v71; // r1@162
  unsigned int *v72; // r1@163
  unsigned int v73; // r0@165
  int v74; // r5@170
  unsigned int *v75; // r1@171
  unsigned int v76; // r0@173
  unsigned int *v77; // r6@177
  unsigned int v78; // r0@179
  int v79; // r5@184
  unsigned int *v80; // r1@185
  unsigned int v81; // r0@187
  unsigned int *v82; // r6@191
  unsigned int v83; // r0@193
  unsigned int result; // r0@200
  int v85; // [sp+10h] [bp-90h]@37
  int v86; // [sp+14h] [bp-8Ch]@87
  int v87; // [sp+18h] [bp-88h]@87
  int v88; // [sp+1Ch] [bp-84h]@92
  int v89; // [sp+20h] [bp-80h]@92
  void *ptr; // [sp+24h] [bp-7Ch]@87
  int v91; // [sp+28h] [bp-78h]@87
  int v92; // [sp+2Ch] [bp-74h]@87
  void *v93; // [sp+30h] [bp-70h]@87
  int v94; // [sp+34h] [bp-6Ch]@87
  int v95; // [sp+38h] [bp-68h]@87
  xbox::services::xbox_live_context *v96; // [sp+3Ch] [bp-64h]@87
  int v97; // [sp+40h] [bp-60h]@138
  char v98; // [sp+44h] [bp-5Ch]@87
  int v99; // [sp+48h] [bp-58h]@120
  int v100; // [sp+4Ch] [bp-54h]@98
  int v101; // [sp+50h] [bp-50h]@162
  int v102; // [sp+54h] [bp-4Ch]@26
  int v103; // [sp+58h] [bp-48h]@26
  int v104; // [sp+5Ch] [bp-44h]@31
  int v105; // [sp+60h] [bp-40h]@31
  xbox::services::xbox_live_context *v106; // [sp+64h] [bp-3Ch]@26
  int v107; // [sp+68h] [bp-38h]@73
  char v108; // [sp+6Ch] [bp-34h]@26
  int v109; // [sp+70h] [bp-30h]@59
  int v110; // [sp+74h] [bp-2Ch]@37
  int v111; // [sp+78h] [bp-28h]@153

  v4 = a1;
  v5 = a4;
  v6 = *(_DWORD *)(a1 + 4);
  v7 = a3;
  v8 = a2;
  if ( !v6 )
    std::__throw_bad_weak_ptr();
  v9 = *(_DWORD *)(v6 + 4);
  v10 = (unsigned int *)(v6 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v9 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v11 = __ldrex(v10);
      if ( v11 == v9 )
        break;
      __clrex();
      v9 = v11;
    }
    v12 = __strex(v9 + 1, v10);
    v9 = v11;
  }
  while ( v12 );
  __dmb();
  v13 = *(_DWORD *)v4;
  v14 = (unsigned int *)(v6 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 + 1, v14) );
  else
    ++*v14;
      v16 = __ldrex(v10);
    while ( __strex(v16 - 1, v10) );
    v16 = (*v10)--;
  if ( v16 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
    if ( &pthread_create )
      do
        v17 = __ldrex(v14);
      while ( __strex(v17 - 1, v14) );
    else
      v17 = (*v14)--;
    if ( v17 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  if ( Social::XboxLiveUserManager::isSignedIn(*(Social::XboxLiveUserManager **)(v4 + 8)) == 1 )
    Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v106, *(_DWORD *)(v4 + 8));
    v18 = xbox::services::xbox_live_context::profile_service(v106);
    xbox::services::social::profile_service::get_user_profiles((xbox::services *)&v108, (int)v18, v8);
    v102 = v13;
    v103 = v6;
        v19 = __ldrex(v14);
      while ( __strex(v19 + 1, v14) );
      ++*v14;
    v104 = *(_DWORD *)v7;
    v20 = *(_DWORD *)(v7 + 4);
    v105 = v20;
    if ( v20 )
      v21 = (unsigned int *)(v20 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
      }
      else
        ++*v21;
    v85 = v13;
    v23 = (__int64 *)v8;
    sub_138A964((int)&v110, (int)&v108, (int)&v102);
    v24 = v105;
    if ( v105 )
      v25 = (unsigned int *)(v105 + 4);
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
        v26 = (*v25)--;
      if ( v26 == 1 )
        v27 = (unsigned int *)(v24 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 8))(v24);
        if ( &pthread_create )
        {
          __dmb();
          do
            v28 = __ldrex(v27);
          while ( __strex(v28 - 1, v27) );
        }
        else
          v28 = (*v27)--;
        if ( v28 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v24 + 12))(v24);
    v29 = v103;
    v30 = v23;
    if ( v103 )
      v31 = (unsigned int *)(v103 + 8);
          v32 = __ldrex(v31);
        while ( __strex(v32 - 1, v31) );
        v32 = (*v31)--;
      if ( v32 == 1 )
        (*(void (**)(void))(*(_DWORD *)v29 + 12))();
    v33 = v109;
    if ( v109 )
      v34 = (unsigned int *)(v109 + 4);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        v36 = (unsigned int *)(v33 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 8))(v33);
            v37 = __ldrex(v36);
          while ( __strex(v37 - 1, v36) );
          v37 = (*v36)--;
        if ( v37 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 12))(v33);
    v38 = v107;
    if ( v107 )
      v39 = (unsigned int *)(v107 + 4);
          v40 = __ldrex(v39);
        while ( __strex(v40 - 1, v39) );
        v40 = (*v39)--;
      if ( v40 == 1 )
        v41 = (unsigned int *)(v38 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v38 + 8))(v38);
            v42 = __ldrex(v41);
          while ( __strex(v42 - 1, v41) );
          v42 = (*v41)--;
        if ( v42 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v38 + 12))(v38);
    Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v96, *(_DWORD *)(v4 + 8));
    v43 = (int *)xbox::services::xbox_live_context::presence_service(v96);
    v94 = 0;
    v95 = 0;
    ptr = 0;
    v91 = 0;
    v92 = 0;
    v93 = 0;
    xbox::services::presence::presence_service::get_presence_for_multiple_users(
      (int)&v98,
      v43,
      v30,
      &v93,
      &ptr,
      4,
      0,
      0);
    v86 = v85;
    v87 = v6;
        v44 = __ldrex(v14);
      while ( __strex(v44 + 1, v14) );
    v88 = *(_DWORD *)v7;
    v45 = *(_DWORD *)(v7 + 4);
    v89 = v45;
    if ( v45 )
      v46 = (unsigned int *)(v45 + 4);
          v47 = __ldrex(v46);
        while ( __strex(v47 + 1, v46) );
        ++*v46;
    sub_138B304((int)&v100, (int)&v98, (int)&v86);
    v48 = v89;
    if ( v89 )
      v49 = (unsigned int *)(v89 + 4);
          v50 = __ldrex(v49);
        while ( __strex(v50 - 1, v49) );
        v50 = (*v49)--;
      if ( v50 == 1 )
        v51 = (unsigned int *)(v48 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v48 + 8))(v48);
            v52 = __ldrex(v51);
          while ( __strex(v52 - 1, v51) );
          v52 = (*v51)--;
        if ( v52 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v48 + 12))(v48);
    v53 = v87;
    if ( v87 )
      v54 = (unsigned int *)(v87 + 8);
          v55 = __ldrex(v54);
        while ( __strex(v55 - 1, v54) );
        v55 = (*v54)--;
      if ( v55 == 1 )
        (*(void (**)(void))(*(_DWORD *)v53 + 12))();
    v56 = v99;
    if ( v99 )
      v57 = (unsigned int *)(v99 + 4);
          v58 = __ldrex(v57);
        while ( __strex(v58 - 1, v57) );
        v58 = (*v57)--;
      if ( v58 == 1 )
        v59 = (unsigned int *)(v56 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v56 + 8))(v56);
            v60 = __ldrex(v59);
          while ( __strex(v60 - 1, v59) );
          v60 = (*v59)--;
        if ( v60 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v56 + 12))(v56);
    if ( ptr )
      operator delete(ptr);
    if ( v93 )
      operator delete(v93);
    v61 = v97;
    if ( v97 )
      v62 = (unsigned int *)(v97 + 4);
          v63 = __ldrex(v62);
        while ( __strex(v63 - 1, v62) );
        v63 = (*v62)--;
      if ( v63 == 1 )
        v64 = (unsigned int *)(v61 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v61 + 8))(v61);
            v65 = __ldrex(v64);
          while ( __strex(v65 - 1, v64) );
          v65 = (*v64)--;
        if ( v65 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v61 + 12))(v61);
    v66 = *(_QWORD *)(v5 + 4);
    if ( (_DWORD)v66 == HIDWORD(v66) )
      std::vector<pplx::task<void>,std::allocator<pplx::task<void>>>::_M_emplace_back_aux<pplx::task<void> const&>(
        (_QWORD *)v5,
        (int)&v110);
      v70 = *(_DWORD *)(v5 + 4);
      *(_DWORD *)v66 = v110;
      HIDWORD(v66) = v111;
      *(_DWORD *)(v66 + 4) = v111;
      if ( HIDWORD(v66) )
        v68 = (unsigned int *)(v67 + 4);
            v69 = __ldrex(v68);
          while ( __strex(v69 + 1, v68) );
          LODWORD(v66) = *(_DWORD *)(v5 + 4);
          ++*v68;
      v70 = v66 + 8;
      *(_DWORD *)(v5 + 4) = v70;
    if ( v70 == *(_DWORD *)(v5 + 8) )
        (int)&v100);
      *(_DWORD *)v70 = v100;
      v71 = v101;
      *(_DWORD *)(v70 + 4) = v101;
      if ( v71 )
        v72 = (unsigned int *)(v71 + 4);
            v73 = __ldrex(v72);
          while ( __strex(v73 + 1, v72) );
          v70 = *(_DWORD *)(v5 + 4);
          ++*v72;
      *(_DWORD *)(v5 + 4) = v70 + 8;
    v74 = v101;
    if ( v101 )
      v75 = (unsigned int *)(v101 + 4);
          v76 = __ldrex(v75);
        while ( __strex(v76 - 1, v75) );
        v76 = (*v75)--;
      if ( v76 == 1 )
        v77 = (unsigned int *)(v74 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v74 + 8))(v74);
            v78 = __ldrex(v77);
          while ( __strex(v78 - 1, v77) );
          v78 = (*v77)--;
        if ( v78 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v74 + 12))(v74);
    v79 = v111;
    if ( v111 )
      v80 = (unsigned int *)(v111 + 4);
          v81 = __ldrex(v80);
        while ( __strex(v81 - 1, v80) );
        v81 = (*v80)--;
      if ( v81 == 1 )
        v82 = (unsigned int *)(v79 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v79 + 8))(v79);
            v83 = __ldrex(v82);
          while ( __strex(v83 - 1, v82) );
          v83 = (*v82)--;
        if ( v83 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v79 + 12))(v79);
      result = __ldrex(v14);
    while ( __strex(result - 1, v14) );
    result = (*v14)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  return result;
}


int __fastcall Social::MultiplayerServiceManager::checkIsInviteForCurrentGame(unsigned __int64 *a1, int a2)
{
  Social::MultiplayerService **v2; // r5@1
  Social::MultiplayerService **v3; // r6@1
  int v4; // r4@1
  int v5; // r7@2
  int result; // r0@4

  v2 = (Social::MultiplayerService **)(*a1 >> 32);
  v3 = (Social::MultiplayerService **)*a1;
  v4 = a2;
  if ( v3 == v2 )
  {
LABEL_4:
    result = 4;
  }
  else
    while ( 1 )
    {
      v5 = (int)(v3 + 1);
      if ( Social::MultiplayerService::getServiceId(*v3) == v4 )
        break;
      ++v3;
      if ( v2 == (Social::MultiplayerService **)v5 )
        goto LABEL_4;
    }
    result = (*(int (**)(void))(*(_DWORD *)*v3 + 60))();
  return result;
}


HTTPRequest *__fastcall Social::Events::HttpTelemetry::sendEvent(int a1, int *a2)
{
  int *v2; // r5@1
  int *v3; // r0@1
  void *v4; // r0@1
  unsigned int *v6; // r2@3
  signed int v7; // r1@5
  int v8; // [sp+4h] [bp-84h]@1
  int v9[27]; // [sp+8h] [bp-80h]@1

  v2 = a2;
  v3 = j_HTTPRequest::HTTPRequest(v9, (int *)(a1 + 108));
  j_HTTPRequest::setRequestMethod((int)v3, 1);
  sub_21E94B4((void **)&v8, "application/ms-maelstrom.v3+json;type=eventbatch;charset=utf-8");
  j_HTTPRequest::setRequestContentType((int)v9, &v8);
  v4 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
  {
    v6 = (unsigned int *)(v8 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 <= 0 )
      j_j_j_j__ZdlPv_9(v4);
  }
  j_HTTPRequest::setRequestBody((int)v9, v2);
  j_HTTPRequest::send((HTTPRequest *)v9);
  return j_HTTPRequest::~HTTPRequest((HTTPRequest *)v9);
}


_DWORD *__fastcall Social::Events::Event::propertiesAsJsonValue(Json::Value *a1, int a2)
{
  int v2; // r5@1
  Json::Value *v3; // r4@1
  _DWORD *result; // r0@1
  int i; // r5@1
  int v6; // r0@3

  v2 = a2;
  v3 = a1;
  result = Json::Value::Value(a1, 0);
  for ( i = *(_DWORD *)(v2 + 24); i; i = *(_DWORD *)i )
  {
    v6 = Json::Value::operator[](v3, (const char **)(i + 8));
    result = (_DWORD *)Json::Value::operator=(v6, (const Json::Value *)(i + 24));
  }
  return result;
}


Json::Value *__fastcall Social::Events::EventManager::getPlayerGlobalProperty(int a1, int a2, unsigned int a3, int *a4)
{
  __int64 v4; // kr00_8@1
  int v5; // r5@1
  unsigned int v6; // r1@1
  unsigned int v7; // r9@1
  int *v8; // r7@1
  _DWORD *v9; // r8@2
  int v10; // r0@2
  int v11; // r4@2
  _DWORD *v12; // r6@4
  bool v13; // zf@7
  Json::Value *result; // r0@11
  int v15; // r8@13
  int *v16; // r5@14
  int v17; // r4@14
  _DWORD *v18; // r6@16
  unsigned int v19; // r0@17
  int v20; // r1@17
  bool v21; // zf@19
  int v22; // r0@22
  int v23; // r4@22
  int *v24; // [sp+4h] [bp-34h]@1

  v24 = a4;
  v4 = *(_QWORD *)(a2 + 96);
  v5 = a1;
  v6 = a3 % (unsigned int)(*(_QWORD *)(a2 + 96) >> 32);
  v7 = v6;
  v8 = *(int **)(v4 + 4 * v6);
  if ( !v8 )
    goto LABEL_11;
  v9 = (_DWORD *)*v8;
  v10 = *(_DWORD *)(v4 + 4 * v6);
  v11 = *(_DWORD *)(*v8 + 4);
  while ( v11 != a3 )
  {
    v12 = (_DWORD *)*v9;
    if ( *v9 )
    {
      v11 = v12[1];
      v10 = (int)v9;
      v9 = (_DWORD *)*v9;
      if ( v12[1] % HIDWORD(v4) == v6 )
        continue;
    }
  }
  v13 = v10 == 0;
  if ( v10 )
    v10 = *(_DWORD *)v10;
    v13 = v10 == 0;
  if ( v13 )
LABEL_11:
    sub_21E8AF4((int *)v5, a4);
    result = (Json::Value *)j_Json::Value::Value((Json::Value *)(v5 + 8), 0);
  else
    v15 = v5;
    if ( !v8 )
      goto LABEL_18;
    v16 = (int *)*v8;
    v17 = *(_DWORD *)(*v8 + 4);
    while ( v17 != a3 )
      v18 = (_DWORD *)*v16;
      if ( *v16 )
      {
        v17 = v18[1];
        v19 = v18[1];
        v20 = v19 % HIDWORD(v4);
        v10 = v19 / HIDWORD(v4);
        v8 = v16;
        v16 = (int *)*v16;
        if ( v20 == v7 )
          continue;
      }
    v21 = v8 == 0;
    if ( v8 )
      v10 = *v8;
      v21 = *v8 == 0;
    if ( v21 )
LABEL_18:
      sub_21E5A84("_Map_base::at");
    v22 = j_std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
            (unsigned __int64 *)(v10 + 8),
            (int **)a4);
    v23 = v22;
    if ( v22 )
      sub_21E8AF4((int *)v15, (int *)(v22 + 16));
      result = j_Json::Value::Value((Json::Value *)(v15 + 8), (const Json::Value *)(v23 + 24));
    else
      sub_21E8AF4((int *)v15, v24);
      result = (Json::Value *)j_Json::Value::Value((Json::Value *)(v15 + 8), 0);
  return result;
}


void __fastcall Social::MultiplayerServiceManager::sendRealmsWhitelistNotification(unsigned __int64 *a1, __int64 *a2)
{
  Social::MultiplayerService **v2; // r4@1
  Social::MultiplayerService **v3; // r6@1
  __int64 *v4; // r5@1
  int v5; // r7@2
  Social::MultiplayerService *v6; // r4@5
  char *v7; // r6@5
  __int64 v8; // r0@5
  void (__fastcall *v9)(Social::MultiplayerService *, __int64 *); // r8@5
  unsigned int v10; // r7@5
  void *v11; // r4@8
  void *v12; // r6@8
  unsigned int *v13; // r2@10
  signed int v14; // r1@12
  int *v15; // r0@18
  __int64 v16; // [sp+4h] [bp-34h]@5
  char *v17; // [sp+Ch] [bp-2Ch]@5

  v2 = (Social::MultiplayerService **)(*a1 >> 32);
  v3 = (Social::MultiplayerService **)*a1;
  v4 = a2;
  if ( v3 != v2 )
  {
    while ( 1 )
    {
      v5 = (int)(v3 + 1);
      if ( !Social::MultiplayerService::getServiceId(*v3) )
        break;
      ++v3;
      if ( v2 == (Social::MultiplayerService **)v5 )
        return;
    }
    v6 = *v3;
    v7 = 0;
    v8 = *v4;
    v9 = *(void (__fastcall **)(Social::MultiplayerService *, __int64 *))(*(_DWORD *)v6 + 124);
    v16 = 0LL;
    v10 = (HIDWORD(v8) - (signed int)v8) >> 2;
    v17 = 0;
    if ( v10 )
      if ( v10 >= 0x40000000 )
        sub_119C874();
      v7 = (char *)operator new(HIDWORD(v8) - v8);
      v8 = *v4;
    v16 = __PAIR__(
            std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,std::string *>(
              v8,
              SHIDWORD(v8),
              (int)v7),
            (unsigned int)v7);
    v17 = &v7[4 * v10];
    v9(v6, &v16);
    v12 = (void *)HIDWORD(v16);
    v11 = (void *)v16;
    if ( (_DWORD)v16 != HIDWORD(v16) )
      do
      {
        v15 = (int *)(*(_DWORD *)v11 - 12);
        if ( v15 != &dword_28898C0 )
        {
          v13 = (unsigned int *)(*(_DWORD *)v11 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v14 = __ldrex(v13);
            while ( __strex(v14 - 1, v13) );
          }
          else
            v14 = (*v13)--;
          if ( v14 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v15);
        }
        v11 = (char *)v11 + 4;
      }
      while ( v11 != v12 );
      v11 = (void *)v16;
    if ( v11 )
      operator delete(v11);
  }
}


int __fastcall Social::MultiplayerServiceManager::setRealm(int result, const Realms::World *a2)
{
  Social::MultiplayerService **v2; // r5@1
  Social::MultiplayerService **v3; // r6@1
  int v4; // r7@2

  v2 = (Social::MultiplayerService **)(*(_QWORD *)result >> 32);
  v3 = (Social::MultiplayerService **)*(_QWORD *)result;
  if ( v3 != v2 )
  {
    while ( 1 )
    {
      v4 = (int)(v3 + 1);
      result = Social::MultiplayerService::getServiceId(*v3);
      if ( !result )
        break;
      ++v3;
      if ( v2 == (Social::MultiplayerService **)v4 )
        return result;
    }
    result = (*(int (**)(void))(*(_DWORD *)*v3 + 108))();
  }
  return result;
}


void __fastcall Social::UserManager::~UserManager(Social::UserManager *this)
{
  Social::UserManager::~UserManager(this);
}


unsigned int __fastcall Social::XboxLiveUserManager::forceFriendRefresh(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r10@1
  int v4; // r9@1
  unsigned int v5; // r1@2
  unsigned int *v6; // r0@2
  unsigned int v7; // r2@5
  unsigned int v8; // r3@6
  int v9; // r4@7
  unsigned int *v10; // r7@7
  unsigned int v11; // r1@9
  unsigned int v12; // r1@14
  unsigned int v13; // r0@20
  int v14; // r8@25
  unsigned int v15; // r0@27
  void (__fastcall *v16)(int *, int, signed int); // r3@30
  void (__fastcall *v17)(_DWORD, _DWORD, _DWORD); // r4@30
  void *v18; // r0@32
  int v19; // r12@32
  unsigned int *v20; // r1@33
  unsigned int v21; // r2@35
  __int64 v22; // r2@38
  __int64 v23; // kr00_8@38
  int v24; // r1@38
  unsigned int *v25; // r2@43
  unsigned int v26; // r1@45
  unsigned int result; // r0@52
  int v28; // [sp+0h] [bp-48h]@25
  int v29; // [sp+8h] [bp-40h]@31
  int v30; // [sp+Ch] [bp-3Ch]@38
  void (__fastcall *v31)(_DWORD, _DWORD, _DWORD); // [sp+10h] [bp-38h]@30
  int v32; // [sp+14h] [bp-34h]@31
  void *v33; // [sp+18h] [bp-30h]@38
  void (*v34)(void); // [sp+20h] [bp-28h]@32
  int (__fastcall *v35)(int); // [sp+24h] [bp-24h]@38

  v2 = a1;
  v3 = a2;
  v4 = *(_DWORD *)(a1 + 12);
  if ( !v4 )
    std::__throw_bad_weak_ptr();
  v5 = *(_DWORD *)(v4 + 4);
  v6 = (unsigned int *)(v4 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v5 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v7 = __ldrex(v6);
      if ( v7 == v5 )
        break;
      __clrex();
      v5 = v7;
    }
    v8 = __strex(v5 + 1, v6);
    v5 = v7;
  }
  while ( v8 );
  __dmb();
  v9 = *(_DWORD *)(v2 + 8);
  v10 = (unsigned int *)(v4 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v11 = __ldrex(v10);
    while ( __strex(v11 + 1, v10) );
  else
    ++*v10;
      v12 = __ldrex(v6);
    while ( __strex(v12 - 1, v6) );
    v12 = (*v6)--;
  if ( v12 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
    if ( &pthread_create )
      do
        v13 = __ldrex(v10);
      while ( __strex(v13 - 1, v10) );
    else
      v13 = (*v10)--;
    if ( v13 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  v14 = *(_DWORD *)(v2 + 248);
  v28 = v9;
      v15 = __ldrex(v10);
    while ( __strex(v15 + 1, v10) );
  v31 = 0;
  v16 = *(void (__fastcall **)(int *, int, signed int))(v3 + 8);
  v17 = 0;
  if ( v16 )
    v16(&v29, v3, 2);
    v32 = *(_DWORD *)(v3 + 12);
    v17 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v3 + 8);
    v31 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v3 + 8);
  v34 = 0;
  v18 = operator new(0x18u);
  *(_DWORD *)v18 = v28;
  *((_DWORD *)v18 + 1) = v4;
  if ( v4 )
    v20 = (unsigned int *)(v4 + 8);
        v21 = __ldrex(v20);
      while ( __strex(v21 + 1, v20) );
      v19 = *((_DWORD *)v18 + 5);
      v17 = v31;
      ++*v20;
  v22 = *(_QWORD *)&v29;
  v23 = *((_QWORD *)v18 + 1);
  v29 = *((_QWORD *)v18 + 1);
  v30 = HIDWORD(v23);
  *((_QWORD *)v18 + 1) = v22;
  v24 = v32;
  *((_DWORD *)v18 + 4) = v17;
  v32 = v19;
  *((_DWORD *)v18 + 5) = v24;
  v33 = v18;
  v34 = (void (*)(void))sub_106B894;
  v35 = sub_106B74C;
  Social::XboxLiveUserInfo::_refresh(v14, (int)&v33);
  if ( v34 )
    v34();
  if ( v31 )
    v31(&v29, &v29, 3);
    v25 = (unsigned int *)(v4 + 8);
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
      v26 = (*v25)--;
    if ( v26 == 1 )
      (*(void (**)(void))(*(_DWORD *)v4 + 12))();
      result = __ldrex(v10);
    while ( __strex(result - 1, v10) );
    result = (*v10)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  return result;
}


xbox::services::system::xbox_live_user *__fastcall Social::XboxLiveUserManager::refreshMuteList(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r11@1
  xbox::services::system::xbox_live_user *result; // r0@1
  bool v3; // zf@1
  int v4; // r6@7
  unsigned int v5; // r1@8
  unsigned int *v6; // r0@8
  unsigned int v7; // r2@11
  unsigned int v8; // r3@12
  int v9; // r8@13
  unsigned int *v10; // r4@13
  unsigned int v11; // r1@15
  unsigned int v12; // r1@20
  unsigned int v13; // r0@26
  __int64 v14; // kr00_8@31
  unsigned int *v15; // r1@32
  unsigned int v16; // r2@34
  char *v17; // r0@37
  unsigned int v18; // r0@39
  int v19; // r7@42
  unsigned int *v20; // r1@43
  unsigned int v21; // r0@45
  unsigned int *v22; // r5@49
  unsigned int v23; // r0@51
  int v24; // r0@56
  unsigned int *v25; // r2@57
  unsigned int v26; // r1@59
  int v27; // r7@64
  unsigned int *v28; // r1@65
  unsigned int v29; // r0@67
  unsigned int *v30; // r5@71
  unsigned int v31; // r0@73
  unsigned int *v32; // r1@79
  unsigned int v33; // r0@81
  unsigned int *v34; // r5@85
  unsigned int v35; // r0@87
  __int64 v36; // kr08_8@92
  unsigned int *v37; // r1@93
  unsigned int v38; // r2@95
  char *v39; // r0@98
  unsigned int v40; // r0@100
  int v41; // r7@103
  unsigned int *v42; // r1@104
  unsigned int v43; // r0@106
  unsigned int *v44; // r5@110
  unsigned int v45; // r0@112
  int v46; // r0@117
  unsigned int *v47; // r2@118
  unsigned int v48; // r1@120
  int v49; // r7@125
  unsigned int *v50; // r1@126
  unsigned int v51; // r0@128
  unsigned int *v52; // r5@132
  unsigned int v53; // r0@134
  unsigned int *v54; // r1@140
  unsigned int v55; // r0@142
  unsigned int *v56; // r5@146
  unsigned int v57; // r0@148
  int i; // r7@153
  unsigned int *v59; // r2@155
  signed int v60; // r1@157
  int v61; // r0@163
  char *v62; // r1@164
  char *v63; // r0@166
  char **v64; // r5@168
  char **v65; // r7@168
  unsigned int *v66; // r2@170
  signed int v67; // r1@172
  int *v68; // r0@178
  char *v69; // [sp+8h] [bp-68h]@163
  char **v70; // [sp+Ch] [bp-64h]@153
  char **v71; // [sp+10h] [bp-60h]@153
  char **v72; // [sp+14h] [bp-5Ch]@153
  int v73; // [sp+18h] [bp-58h]@98
  int v74; // [sp+1Ch] [bp-54h]@98
  char v75; // [sp+20h] [bp-50h]@98
  int v76; // [sp+24h] [bp-4Ch]@125
  char v77; // [sp+28h] [bp-48h]@103
  int v78; // [sp+2Ch] [bp-44h]@103
  int v79; // [sp+30h] [bp-40h]@37
  int v80; // [sp+34h] [bp-3Ch]@37
  char v81; // [sp+38h] [bp-38h]@37
  int v82; // [sp+3Ch] [bp-34h]@64
  char v83; // [sp+40h] [bp-30h]@42
  int v84; // [sp+44h] [bp-2Ch]@42

  v1 = this;
  result = (xbox::services::system::xbox_live_user *)*((_DWORD *)this + 34);
  v3 = result == 0;
  if ( result )
    v3 = *((_DWORD *)v1 + 36) == 0;
  if ( !v3 )
  {
    result = (xbox::services::system::xbox_live_user *)xbox::services::system::xbox_live_user::is_signed_in(result);
    if ( result == (xbox::services::system::xbox_live_user *)1 )
    {
      result = (xbox::services::system::xbox_live_user *)*((_WORD *)v1 + 62);
      if ( (unsigned int)result <= 0xFF && !(_BYTE)result )
      {
        v4 = *((_DWORD *)v1 + 3);
        if ( !v4 )
          std::__throw_bad_weak_ptr();
        v5 = *(_DWORD *)(v4 + 4);
        v6 = (unsigned int *)(v4 + 4);
        do
        {
          while ( 1 )
          {
            if ( !v5 )
              std::__throw_bad_weak_ptr();
            __dmb();
            v7 = __ldrex(v6);
            if ( v7 == v5 )
              break;
            __clrex();
            v5 = v7;
          }
          v8 = __strex(v5 + 1, v6);
          v5 = v7;
        }
        while ( v8 );
        __dmb();
        v9 = *((_DWORD *)v1 + 2);
        v10 = (unsigned int *)(v4 + 8);
        if ( &pthread_create )
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 + 1, v10) );
        else
          ++*v10;
            v12 = __ldrex(v6);
          while ( __strex(v12 - 1, v6) );
          v12 = (*v6)--;
        if ( v12 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
          if ( &pthread_create )
            do
              v13 = __ldrex(v10);
            while ( __strex(v13 - 1, v10) );
          else
            v13 = (*v10)--;
          if ( v13 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
        v14 = *((_QWORD *)v1 + 18);
        if ( HIDWORD(v14) )
          v15 = (unsigned int *)(HIDWORD(v14) + 4);
              v16 = __ldrex(v15);
            while ( __strex(v16 + 1, v15) );
            ++*v15;
        v17 = xbox::services::xbox_live_context::privacy_service((xbox::services::xbox_live_context *)v14);
        xbox::services::privacy::privacy_service::get_mute_list(
          (xbox::services::privacy::privacy_service *)&v81,
          (xbox::services::user_context **)v17);
        v79 = v9;
        v80 = v4;
            v18 = __ldrex(v10);
          while ( __strex(v18 + 1, v10) );
        sub_1034978((int)&v83, (int)&v81, (int)&v79);
        v19 = v84;
        if ( v84 )
          v20 = (unsigned int *)(v84 + 4);
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
            v21 = (*v20)--;
          if ( v21 == 1 )
            v22 = (unsigned int *)(v19 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 8))(v19);
            if ( &pthread_create )
            {
              __dmb();
              do
                v23 = __ldrex(v22);
              while ( __strex(v23 - 1, v22) );
            }
            else
              v23 = (*v22)--;
            if ( v23 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v19 + 12))(v19);
        v24 = v80;
        if ( v80 )
          v25 = (unsigned int *)(v80 + 8);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            (*(void (**)(void))(*(_DWORD *)v24 + 12))();
        v27 = v82;
        if ( v82 )
          v28 = (unsigned int *)(v82 + 4);
              v29 = __ldrex(v28);
            while ( __strex(v29 - 1, v28) );
            v29 = (*v28)--;
          if ( v29 == 1 )
            v30 = (unsigned int *)(v27 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
                v31 = __ldrex(v30);
              while ( __strex(v31 - 1, v30) );
              v31 = (*v30)--;
            if ( v31 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
          v32 = (unsigned int *)(HIDWORD(v14) + 4);
              v33 = __ldrex(v32);
            while ( __strex(v33 - 1, v32) );
            v33 = (*v32)--;
          if ( v33 == 1 )
            v34 = (unsigned int *)(HIDWORD(v14) + 8);
            (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v14) + 8))(HIDWORD(v14));
                v35 = __ldrex(v34);
              while ( __strex(v35 - 1, v34) );
              v35 = (*v34)--;
            if ( v35 == 1 )
              (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v14) + 12))(HIDWORD(v14));
        v36 = *((_QWORD *)v1 + 18);
        if ( HIDWORD(v36) )
          v37 = (unsigned int *)(HIDWORD(v36) + 4);
              v38 = __ldrex(v37);
            while ( __strex(v38 + 1, v37) );
            ++*v37;
        v39 = xbox::services::xbox_live_context::privacy_service((xbox::services::xbox_live_context *)v36);
        xbox::services::privacy::privacy_service::get_avoid_list(
          (xbox::services::privacy::privacy_service *)&v75,
          (xbox::services::user_context **)v39);
        v73 = v9;
        v74 = v4;
            v40 = __ldrex(v10);
          while ( __strex(v40 + 1, v10) );
        sub_10352DC((int)&v77, (int)&v75, (int)&v73);
        v41 = v78;
        if ( v78 )
          v42 = (unsigned int *)(v78 + 4);
              v43 = __ldrex(v42);
            while ( __strex(v43 - 1, v42) );
            v43 = (*v42)--;
          if ( v43 == 1 )
            v44 = (unsigned int *)(v41 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v41 + 8))(v41);
                v45 = __ldrex(v44);
              while ( __strex(v45 - 1, v44) );
              v45 = (*v44)--;
            if ( v45 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v41 + 12))(v41);
        v46 = v74;
        if ( v74 )
          v47 = (unsigned int *)(v74 + 8);
              v48 = __ldrex(v47);
            while ( __strex(v48 - 1, v47) );
            v48 = (*v47)--;
          if ( v48 == 1 )
            (*(void (**)(void))(*(_DWORD *)v46 + 12))();
        v49 = v76;
        if ( v76 )
          v50 = (unsigned int *)(v76 + 4);
              v51 = __ldrex(v50);
            while ( __strex(v51 - 1, v50) );
            v51 = (*v50)--;
          if ( v51 == 1 )
            v52 = (unsigned int *)(v49 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v49 + 8))(v49);
                v53 = __ldrex(v52);
              while ( __strex(v53 - 1, v52) );
              v53 = (*v52)--;
            if ( v53 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v49 + 12))(v49);
          v54 = (unsigned int *)(HIDWORD(v36) + 4);
              v55 = __ldrex(v54);
            while ( __strex(v55 - 1, v54) );
            v55 = (*v54)--;
          if ( v55 == 1 )
            v56 = (unsigned int *)(HIDWORD(v36) + 8);
            (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v36) + 8))(HIDWORD(v36));
                v57 = __ldrex(v56);
              while ( __strex(v57 - 1, v56) );
              v57 = (*v56)--;
            if ( v57 == 1 )
              (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v36) + 12))(HIDWORD(v36));
        v70 = 0;
        v71 = 0;
        v72 = 0;
        for ( i = *((_DWORD *)v1 + 22); i; i = *(_DWORD *)i )
          utility::conversions::to_string_t((int *)&v69, (int *)(i + 4));
          v61 = (int)v71;
          if ( v71 == v72 )
            std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<std::string>(
              (unsigned __int64 *)&v70,
              &v69);
            v62 = v69;
            *v71 = v69;
            v62 = (char *)&unk_28898CC;
            v69 = (char *)&unk_28898CC;
            v71 = (char **)(v61 + 4);
          v63 = v62 - 12;
          if ( (int *)(v62 - 12) != &dword_28898C0 )
            v59 = (unsigned int *)(v62 - 4);
                v60 = __ldrex(v59);
              while ( __strex(v60 - 1, v59) );
              v60 = (*v59)--;
            if ( v60 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v63);
        Social::XboxLiveUserManager::_refreshPrivacyList((int)v1, (__int64 *)&v70);
        v65 = v71;
        v64 = v70;
        if ( v70 != v71 )
            v68 = (int *)(*v64 - 12);
            if ( v68 != &dword_28898C0 )
              v66 = (unsigned int *)(*v64 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v67 = __ldrex(v66);
                while ( __strex(v67 - 1, v66) );
              }
              else
                v67 = (*v66)--;
              if ( v67 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v68);
            ++v64;
          while ( v64 != v65 );
          v64 = v70;
        if ( v64 )
          operator delete(v64);
            result = (xbox::services::system::xbox_live_user *)__ldrex(v10);
          while ( __strex((unsigned int)result - 1, v10) );
          result = (xbox::services::system::xbox_live_user *)(*v10)--;
        if ( result == (xbox::services::system::xbox_live_user *)1 )
          result = (xbox::services::system::xbox_live_user *)(*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
      }
    }
  }
  return result;
}


void __fastcall Social::MultiplayerXBL::_findOrCreateRealmLobby(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  void *v2; // r9@1
  void *v3; // r10@1
  unsigned int *v4; // r2@3
  signed int v5; // r1@5
  unsigned int *v6; // r2@7
  signed int v7; // r1@9
  __int64 v8; // r5@19
  __int64 v9; // r0@19
  int v10; // r5@20
  int v11; // r0@20
  int v12; // r6@20
  unsigned int *v13; // r1@21
  unsigned int v14; // r0@23
  unsigned int *v15; // r5@27
  unsigned int v16; // r0@29
  int v17; // r5@34
  unsigned int *v18; // r1@35
  unsigned int v19; // r0@37
  unsigned int *v20; // r6@41
  unsigned int v21; // r0@43
  void *v22; // r0@48
  int v23; // r5@49
  unsigned int *v24; // r1@50
  unsigned int v25; // r0@52
  unsigned int *v26; // r6@56
  unsigned int v27; // r0@58
  int v28; // r5@63
  char v29; // r0@63
  void *v30; // r0@65
  int v31; // r5@69
  void *v32; // r0@69
  int v33; // r5@70
  unsigned int *v34; // r1@71
  unsigned int v35; // r0@73
  unsigned int *v36; // r6@77
  unsigned int v37; // r0@79
  int *v38; // r5@84
  int v39; // r0@84
  void *v40; // r0@84
  int v41; // r5@85
  unsigned int *v42; // r1@86
  unsigned int v43; // r0@88
  unsigned int *v44; // r6@92
  unsigned int v45; // r0@94
  int v46; // r5@99
  unsigned int *v47; // r1@100
  unsigned int v48; // r0@102
  unsigned int *v49; // r6@106
  unsigned int v50; // r0@108
  int v51; // r5@113
  unsigned int *v52; // r1@114
  unsigned int v53; // r0@116
  unsigned int *v54; // r6@120
  unsigned int v55; // r0@122
  int v56; // r5@127
  unsigned int *v57; // r1@128
  unsigned int v58; // r0@130
  unsigned int *v59; // r6@134
  unsigned int v60; // r0@136
  Social::MultiplayerGameInfo *v61; // r0@142
  Social::MultiplayerGameInfo *v62; // r4@142
  unsigned int *v63; // r2@148
  signed int v64; // r1@150
  unsigned int *v65; // r2@152
  signed int v66; // r1@154
  char v67; // [sp+4h] [bp-9Ch]@2
  Social::User *v68; // [sp+8h] [bp-98h]@84
  int v69; // [sp+Ch] [bp-94h]@99
  char v70; // [sp+10h] [bp-90h]@84
  int v71; // [sp+14h] [bp-8Ch]@85
  int v72; // [sp+18h] [bp-88h]@84
  int v73; // [sp+1Ch] [bp-84h]@127
  int *v74; // [sp+20h] [bp-80h]@84
  int v75; // [sp+24h] [bp-7Ch]@113
  char v76; // [sp+28h] [bp-78h]@84
  int v77; // [sp+30h] [bp-70h]@84
  int v78; // [sp+38h] [bp-68h]@69
  int v79; // [sp+3Ch] [bp-64h]@69
  int v80; // [sp+40h] [bp-60h]@70
  Social::User *v81; // [sp+44h] [bp-5Ch]@20
  int v82; // [sp+48h] [bp-58h]@34
  char v83; // [sp+4Ch] [bp-54h]@20
  int v84; // [sp+50h] [bp-50h]@20
  int v85; // [sp+54h] [bp-4Ch]@3
  int v86; // [sp+58h] [bp-48h]@20
  int v87; // [sp+5Ch] [bp-44h]@49
  int v88; // [sp+60h] [bp-40h]@20
  int v89; // [sp+68h] [bp-38h]@7
  void *ptr; // [sp+6Ch] [bp-34h]@1
  void *v91; // [sp+70h] [bp-30h]@1

  v1 = this;
  (*(void (__fastcall **)(void **, Social::MultiplayerXBL *))(*(_DWORD *)this + 32))(&ptr, this);
  v2 = v91;
  v3 = ptr;
  if ( ptr == v91 )
    goto LABEL_166;
  v67 = 0;
  do
  {
    v8 = *((_QWORD *)v3 + 6);
    v9 = *(_QWORD *)(*(int (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v1 + 120))(v1);
    HIDWORD(v9) ^= HIDWORD(v8);
    if ( v9 == (unsigned int)v8 )
    {
      xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v86);
      v10 = v86;
      utility::conversions::to_string_t(&v85, (int *)v3 + 5);
      Social::UserManager::getPrimaryUser((Social::UserManager *)&v81, *((_DWORD *)v1 + 11));
      v11 = Social::User::getLiveUser(v81);
      Social::XboxLiveUserManager::getCurrentUser((Social::XboxLiveUserManager *)&v83, v11);
      xbox::services::multiplayer::manager::multiplayer_manager::join_lobby((int)&v88, v10, &v85, (int)&v83);
      v12 = v84;
      if ( v84 )
      {
        v13 = (unsigned int *)(v84 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          v15 = (unsigned int *)(v12 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
          if ( &pthread_create )
          {
            __dmb();
            do
              v16 = __ldrex(v15);
            while ( __strex(v16 - 1, v15) );
          }
          else
            v16 = (*v15)--;
          if ( v16 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
      }
      v17 = v82;
      if ( v82 )
        v18 = (unsigned int *)(v82 + 4);
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
          v19 = (*v18)--;
        if ( v19 == 1 )
          v20 = (unsigned int *)(v17 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 8))(v17);
              v21 = __ldrex(v20);
            while ( __strex(v21 - 1, v20) );
            v21 = (*v20)--;
          if ( v21 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v17 + 12))(v17);
      v22 = (void *)(v85 - 12);
      if ( (int *)(v85 - 12) != &dword_28898C0 )
        v4 = (unsigned int *)(v85 - 4);
            v5 = __ldrex(v4);
          while ( __strex(v5 - 1, v4) );
          v5 = (*v4)--;
        if ( v5 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v22);
      v23 = v87;
      if ( v87 )
        v24 = (unsigned int *)(v87 + 4);
            v25 = __ldrex(v24);
          while ( __strex(v25 - 1, v24) );
          v25 = (*v24)--;
        if ( v25 == 1 )
          v26 = (unsigned int *)(v23 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 8))(v23);
              v27 = __ldrex(v26);
            while ( __strex(v27 - 1, v26) );
            v27 = (*v26)--;
          if ( v27 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v23 + 12))(v23);
      v28 = v88;
      v29 = 0;
      if ( !v88 )
        v29 = 1;
      v67 |= v29;
      v30 = (void *)(v89 - 12);
      if ( (int *)(v89 - 12) != &dword_28898C0 )
        v6 = (unsigned int *)(v89 - 4);
            v7 = __ldrex(v6);
          while ( __strex(v7 - 1, v6) );
          v7 = (*v6)--;
        if ( v7 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v30);
      if ( !v28 )
        break;
    }
    v3 = (char *)v3 + 88;
  }
  while ( v3 != v2 );
  if ( !(v67 & 1) )
LABEL_166:
    *((_BYTE *)v1 + 443) = 0;
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v79);
    v31 = v79;
    sub_119C884((void **)&v78, "MinecraftLobby");
    xbox::services::multiplayer::manager::multiplayer_manager::initialize(v31, &v78);
    v32 = (void *)(v78 - 12);
    if ( (int *)(v78 - 12) != &dword_28898C0 )
      v63 = (unsigned int *)(v78 - 4);
      if ( &pthread_create )
        __dmb();
        do
          v64 = __ldrex(v63);
        while ( __strex(v64 - 1, v63) );
      else
        v64 = (*v63)--;
      if ( v64 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v32);
    v33 = v80;
    if ( v80 )
      v34 = (unsigned int *)(v80 + 4);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        v36 = (unsigned int *)(v33 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 8))(v33);
            v37 = __ldrex(v36);
          while ( __strex(v37 - 1, v36) );
          v37 = (*v36)--;
        if ( v37 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 12))(v33);
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v72);
    xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
      (xbox::services::multiplayer::manager::multiplayer_manager *)&v74,
      v72);
    v38 = v74;
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v68, *((_DWORD *)v1 + 11));
    v39 = Social::User::getLiveUser(v68);
    Social::XboxLiveUserManager::getCurrentUser((Social::XboxLiveUserManager *)&v70, v39);
    xbox::services::multiplayer::manager::multiplayer_lobby_session::add_local_user((int)&v76, v38, (int)&v70);
    v40 = (void *)(v77 - 12);
    if ( (int *)(v77 - 12) != &dword_28898C0 )
      v65 = (unsigned int *)(v77 - 4);
          v66 = __ldrex(v65);
        while ( __strex(v66 - 1, v65) );
        v66 = (*v65)--;
      if ( v66 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v40);
    v41 = v71;
    if ( v71 )
      v42 = (unsigned int *)(v71 + 4);
          v43 = __ldrex(v42);
        while ( __strex(v43 - 1, v42) );
        v43 = (*v42)--;
      if ( v43 == 1 )
        v44 = (unsigned int *)(v41 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v41 + 8))(v41);
            v45 = __ldrex(v44);
          while ( __strex(v45 - 1, v44) );
          v45 = (*v44)--;
        if ( v45 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v41 + 12))(v41);
    v46 = v69;
    if ( v69 )
      v47 = (unsigned int *)(v69 + 4);
          v48 = __ldrex(v47);
        while ( __strex(v48 - 1, v47) );
        v48 = (*v47)--;
      if ( v48 == 1 )
        v49 = (unsigned int *)(v46 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v46 + 8))(v46);
            v50 = __ldrex(v49);
          while ( __strex(v50 - 1, v49) );
          v50 = (*v49)--;
        if ( v50 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v46 + 12))(v46);
    v51 = v75;
    if ( v75 )
      v52 = (unsigned int *)(v75 + 4);
          v53 = __ldrex(v52);
        while ( __strex(v53 - 1, v52) );
        v53 = (*v52)--;
      if ( v53 == 1 )
        v54 = (unsigned int *)(v51 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v51 + 8))(v51);
            v55 = __ldrex(v54);
          while ( __strex(v55 - 1, v54) );
          v55 = (*v54)--;
        if ( v55 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v51 + 12))(v51);
    v56 = v73;
    if ( v73 )
      v57 = (unsigned int *)(v73 + 4);
          v58 = __ldrex(v57);
        while ( __strex(v58 - 1, v57) );
        v58 = (*v57)--;
      if ( v58 == 1 )
        v59 = (unsigned int *)(v56 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v56 + 8))(v56);
            v60 = __ldrex(v59);
          while ( __strex(v60 - 1, v59) );
          v60 = (*v59)--;
        if ( v60 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v56 + 12))(v56);
    (*(void (__fastcall **)(Social::MultiplayerXBL *, _DWORD))(*(_DWORD *)v1 + 128))(v1, *((_DWORD *)v1 + 8));
    (*(void (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v1 + 48))(v1);
  v62 = (Social::MultiplayerGameInfo *)v91;
  v61 = (Social::MultiplayerGameInfo *)ptr;
  if ( ptr != v91 )
    do
      v61 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v61) + 88);
    while ( v62 != v61 );
    v61 = (Social::MultiplayerGameInfo *)ptr;
  if ( v61 )
    operator delete((void *)v61);
}


void __fastcall Social::Events::Event::addProperty<int>(int a1, int *a2, int *a3)
{
  int v3; // r6@1
  int *v4; // r7@1
  int *v5; // r4@1
  Json::Value *v6; // r5@1
  void *v7; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+8h] [bp-30h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = (Json::Value *)(sub_21E8AF4(&v11, a2) + 2);
  Json::Value::Value(v6, *v4);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v10,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v11);
  Json::Value::~Value(v6);
  v7 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
}


Social::MultiplayerXBL *__fastcall Social::MultiplayerXBL::MultiplayerXBL(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  char v3; // [sp+7h] [bp-41h]@1
  char v4; // [sp+28h] [bp-20h]@1

  v1 = this;
  Social::MultiplayerService::MultiplayerService((int)this, 0, 1);
  *(_DWORD *)v1 = &off_26DE848;
  *((_DWORD *)v1 + 1) = &off_26DE93C;
  *((_DWORD *)v1 + 76) = 4;
  *((_DWORD *)v1 + 77) = 0;
  *((_DWORD *)v1 + 78) = 0;
  MPMCQueue<std::function<void ()(void)>>::MPMCQueue((int)v1 + 316);
  _aeabi_memclr8((char *)v1 + 360, 72);
  *((_DWORD *)v1 + 93) = &unk_28898CC;
  *((_DWORD *)v1 + 94) = &unk_28898CC;
  *((_DWORD *)v1 + 95) = &unk_28898CC;
  *((_DWORD *)v1 + 96) = &unk_28898CC;
  *((_BYTE *)v1 + 400) = 0;
  *((_DWORD *)v1 + 101) = 0;
  *((_DWORD *)v1 + 102) = 2;
  *((_BYTE *)v1 + 412) = 0;
  *((_BYTE *)v1 + 413) = 0;
  *((_BYTE *)v1 + 414) = 0;
  *((_DWORD *)v1 + 104) = 0;
  *((_DWORD *)v1 + 105) = 0;
  *((_DWORD *)v1 + 106) = 0;
  *((_DWORD *)v1 + 108) = 0;
  *((_DWORD *)v1 + 109) = &unk_28898CC;
  *((_BYTE *)v1 + 444) = 0;
  *((_DWORD *)v1 + 110) = 0;
  v3 = 0;
  std::__shared_ptr<bool,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<bool>,bool>(
    (int)v1 + 448,
    (int)&v4,
    &v3);
  (*(void (__fastcall **)(Social::MultiplayerXBL *))(*(_DWORD *)v1 + 112))(v1);
  return v1;
}


unsigned __int64 *__fastcall Social::MultiplayerServiceManager::setInviteHandle(unsigned __int64 *result, int a2, int a3, unsigned __int64 *a4)
{
  Social::MultiplayerService **v4; // r5@1
  Social::MultiplayerService **v5; // r7@1
  unsigned __int64 *i; // r4@1

  v4 = (Social::MultiplayerService **)(*result >> 32);
  v5 = (Social::MultiplayerService **)*result;
  for ( i = a4; v4 != v5; ++v5 )
  {
    result = (unsigned __int64 *)Social::MultiplayerService::getServiceId(*v5);
    if ( result == i )
      result = (unsigned __int64 *)(*(int (**)(void))(*(_DWORD *)*v5 + 52))();
  }
  return result;
}


unsigned int *__fastcall Social::XboxLiveUserManager::_updateUserBlockWithXuid(int a1, int **a2, int a3)
{
  int v3; // r5@1
  unsigned int *result; // r0@1
  int v5; // r4@1
  unsigned int v6; // r1@2
  unsigned int *v7; // r0@2
  unsigned int v8; // r2@5
  unsigned int v9; // r3@6
  int v10; // r1@7
  bool v11; // zf@7
  signed int v12; // r2@10
  unsigned int v13; // r1@15
  unsigned int *v14; // r5@19
  unsigned int v15; // r0@21
  unsigned int *v16; // r2@27
  unsigned int v17; // r1@29
  int v18; // [sp+0h] [bp-18h]@1
  int v19; // [sp+4h] [bp-14h]@1

  v3 = a3;
  result = Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v18, a1, a2);
  v5 = v19;
  if ( v19 )
  {
    v6 = *(_DWORD *)(v19 + 4);
    v7 = (unsigned int *)(v19 + 4);
    while ( v6 )
    {
      __dmb();
      v8 = __ldrex(v7);
      if ( v8 == v6 )
      {
        v9 = __strex(v6 + 1, v7);
        v6 = v8;
        if ( !v9 )
        {
          __dmb();
          v10 = *v7;
          v11 = *v7 == 0;
          if ( *v7 )
          {
            v10 = v18;
            v11 = v18 == 0;
          }
          if ( !v11 )
            v12 = 2;
            if ( v3 )
              v12 = 1;
            *(_DWORD *)(v10 + 28) = v12;
          if ( &pthread_create )
            __dmb();
            do
              v13 = __ldrex(v7);
            while ( __strex(v13 - 1, v7) );
          else
            v13 = (*v7)--;
          if ( v13 == 1 )
            v14 = (unsigned int *)(v5 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
            if ( &pthread_create )
            {
              __dmb();
              do
                v15 = __ldrex(v14);
              while ( __strex(v15 - 1, v14) );
            }
            else
              v15 = (*v14)--;
            if ( v15 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
          break;
        }
      }
      else
        __clrex();
    }
    result = (unsigned int *)v19;
    if ( v19 )
      v16 = (unsigned int *)(v19 + 8);
      if ( &pthread_create )
        __dmb();
        do
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        result = (unsigned int *)(*(int (**)(void))(*result + 12))();
  }
  return result;
}


void __fastcall Social::Events::Event::addProperty<short>(int a1, int *a2, _WORD *a3)
{
  int v3; // r6@1
  _WORD *v4; // r7@1
  int *v5; // r4@1
  Json::Value *v6; // r5@1
  void *v7; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+8h] [bp-30h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = (Json::Value *)(sub_21E8AF4(&v11, a2) + 2);
  Json::Value::Value(v6, *v4);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v10,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v11);
  Json::Value::~Value(v6);
  v7 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
}


Social::UserManager *__fastcall Social::UserManager::UserManager(Social::UserManager *this)
{
  Social::UserManager *v1; // r4@1
  char *v2; // r5@1

  v1 = this;
  *(_DWORD *)this = &off_26DEC78;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 13) = 0;
  v2 = (char *)this + 52;
  *((_DWORD *)v2 + 1) = 0;
  *((_DWORD *)v2 + 2) = 0;
  *((_DWORD *)v2 + 3) = 0;
  *((_DWORD *)v2 + 4) = 0;
  _aeabi_memclr4((char *)this + 8, 40);
  *((_DWORD *)v2 + 2) = v2;
  *((_DWORD *)v2 + 3) = v2;
  v2[20] = 1;
  v2[21] = 0;
  v2[22] = 0;
  *((_DWORD *)v2 + 6) = 0;
  v2 += 32;
  _aeabi_memclr4(v2, 44);
  MPMCQueue<std::function<void ()(void)>>::MPMCQueue((int)v2);
  *((_DWORD *)v1 + 32) = 0;
  *((_DWORD *)v1 + 35) = 0;
  *((_DWORD *)v1 + 36) = 0;
  *((_DWORD *)v1 + 37) = 0;
  *((_DWORD *)v1 + 20) = 20;
  ServiceLocator<Social::UserManager>::mDefaultService = v1;
  return v1;
}


void __fastcall Social::MultiplayerXBL::invitePlayers(int a1, __int64 *a2)
{
  int v2; // r10@1
  __int64 *v3; // r5@1
  Social::XboxLiveUserManager *v4; // r0@1
  Social::MultiplayerXBL *v5; // r0@1
  Social::MultiplayerXBL *v6; // r6@1
  int v7; // r7@1
  unsigned int *v8; // r1@2
  unsigned int *v9; // r4@8
  __int64 i; // r6@17
  unsigned int *v11; // r2@19
  signed int v12; // r1@21
  int v13; // r0@27
  char *v14; // r1@28
  char *v15; // r0@30
  int v16; // r5@32
  unsigned int *v17; // r1@33
  unsigned int v18; // r0@35
  unsigned int *v19; // r4@39
  unsigned int v20; // r0@41
  int v21; // r0@46
  char *v22; // r5@46
  char *v23; // r0@46
  Social::XboxLiveUserManager *v24; // r0@46
  int v25; // r0@46
  int v26; // r4@46
  unsigned int *v27; // r1@47
  unsigned int v28; // r0@49
  unsigned int *v29; // r5@53
  unsigned int v30; // r0@55
  void *v31; // r0@60
  void *v32; // r0@61
  void *v33; // r0@62
  int v34; // r4@63
  unsigned int *v35; // r1@64
  unsigned int v36; // r0@66
  unsigned int *v37; // r5@70
  unsigned int v38; // r0@72
  int v39; // r4@77
  unsigned int *v40; // r1@78
  unsigned int v41; // r0@80
  unsigned int *v42; // r5@84
  unsigned int v43; // r0@86
  int v44; // r4@91
  unsigned int *v45; // r1@92
  unsigned int v46; // r0@94
  unsigned int *v47; // r5@98
  unsigned int v48; // r0@100
  int v49; // r4@105
  unsigned int *v50; // r1@106
  unsigned int v51; // r0@108
  unsigned int *v52; // r5@112
  unsigned int v53; // r0@114
  char **v54; // r4@119
  char **v55; // r6@119
  unsigned int *v56; // r2@121
  signed int v57; // r1@123
  int *v58; // r0@129
  unsigned int *v59; // r2@135
  signed int v60; // r1@137
  unsigned int *v61; // r2@139
  signed int v62; // r1@141
  unsigned int *v63; // r2@143
  signed int v64; // r1@145
  int v65; // [sp+8h] [bp-80h]@46
  int v66; // [sp+Ch] [bp-7Ch]@46
  int v67; // [sp+10h] [bp-78h]@61
  int v68; // [sp+14h] [bp-74h]@60
  Social::User *v69; // [sp+18h] [bp-70h]@46
  int v70; // [sp+1Ch] [bp-6Ch]@77
  xbox::services::xbox_live_context *v71; // [sp+20h] [bp-68h]@46
  int v72; // [sp+24h] [bp-64h]@63
  char v73; // [sp+28h] [bp-60h]@46
  int v74; // [sp+2Ch] [bp-5Ch]@46
  char v75; // [sp+30h] [bp-58h]@46
  int v76; // [sp+34h] [bp-54h]@91
  int v77; // [sp+38h] [bp-50h]@32
  int v78; // [sp+3Ch] [bp-4Ch]@32
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v79; // [sp+40h] [bp-48h]@32
  int v80; // [sp+44h] [bp-44h]@105
  char *v81; // [sp+48h] [bp-40h]@27
  char **v82; // [sp+4Ch] [bp-3Ch]@17
  char **v83; // [sp+50h] [bp-38h]@17
  char **v84; // [sp+54h] [bp-34h]@17
  Social::User *v85; // [sp+58h] [bp-30h]@1
  int v86; // [sp+5Ch] [bp-2Ch]@1

  v2 = a1;
  v3 = a2;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v85, *(_DWORD *)(a1 + 44));
  v4 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v85);
  v5 = (Social::MultiplayerXBL *)Social::XboxLiveUserManager::isSignedIn(v4);
  v6 = v5;
  v7 = v86;
  if ( v86 )
  {
    v8 = (unsigned int *)(v86 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = (Social::MultiplayerXBL *)__ldrex(v8);
      while ( __strex((unsigned int)v5 - 1, v8) );
    }
    else
      v5 = (Social::MultiplayerXBL *)(*v8)--;
    if ( v5 == (Social::MultiplayerXBL *)1 )
      v9 = (unsigned int *)(v7 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
      if ( &pthread_create )
      {
        __dmb();
        do
          v5 = (Social::MultiplayerXBL *)__ldrex(v9);
        while ( __strex((unsigned int)v5 - 1, v9) );
      }
      else
        v5 = (Social::MultiplayerXBL *)(*v9)--;
      if ( v5 == (Social::MultiplayerXBL *)1 )
        v5 = (Social::MultiplayerXBL *)(*(int (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
  }
  if ( v6 && Social::MultiplayerXBL::_isInLobby(v5) == 1 )
    v82 = 0;
    v83 = 0;
    v84 = 0;
    for ( i = *v3; (_DWORD)i != HIDWORD(i); LODWORD(i) = i + 4 )
      utility::conversions::to_string_t((int *)&v81, (int *)i);
      v13 = (int)v83;
      if ( v83 == v84 )
        std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<std::string>(
          (unsigned __int64 *)&v82,
          &v81);
        v14 = v81;
        *v83 = v81;
        v14 = (char *)&unk_28898CC;
        v81 = (char *)&unk_28898CC;
        v83 = (char **)(v13 + 4);
      v15 = v14 - 12;
      if ( (int *)(v14 - 12) != &dword_28898C0 )
        v11 = (unsigned int *)(v14 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v12 = __ldrex(v11);
          while ( __strex(v12 - 1, v11) );
        }
        else
          v12 = (*v11)--;
        if ( v12 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v15);
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v77);
    xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
      (xbox::services::multiplayer::manager::multiplayer_manager *)&v79,
      v77);
    v16 = v78;
    if ( v78 )
      v17 = (unsigned int *)(v78 + 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 == 1 )
        v19 = (unsigned int *)(v16 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
            v20 = __ldrex(v19);
          while ( __strex(v20 - 1, v19) );
          v20 = (*v19)--;
        if ( v20 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v69, *(_DWORD *)(v2 + 44));
    v21 = Social::User::getLiveUser(v69);
    Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v71, v21);
    v22 = xbox::services::xbox_live_context::multiplayer_service(v71);
    v23 = xbox::services::multiplayer::manager::multiplayer_lobby_session::session_reference(v79);
    v24 = xbox::services::multiplayer::multiplayer_session_reference::multiplayer_session_reference(
            (xbox::services::multiplayer::multiplayer_session_reference *)&v66,
            (const xbox::services::multiplayer::multiplayer_session_reference *)v23);
    v25 = Social::XboxLiveUserManager::getMPTitleId(v24);
    xbox::services::multiplayer::multiplayer_service::send_invites((int)&v73, (int)v22, (int)&v66, (int)&v82, v25);
    v65 = v2;
    sub_100A188((int)&v75, (int)&v73, &v65);
    v26 = v74;
    if ( v74 )
      v27 = (unsigned int *)(v74 + 4);
          v28 = __ldrex(v27);
        while ( __strex(v28 - 1, v27) );
        v28 = (*v27)--;
      if ( v28 == 1 )
        v29 = (unsigned int *)(v26 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
            v30 = __ldrex(v29);
          while ( __strex(v30 - 1, v29) );
          v30 = (*v29)--;
        if ( v30 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
    v31 = (void *)(v68 - 12);
    if ( (int *)(v68 - 12) != &dword_28898C0 )
      v59 = (unsigned int *)(v68 - 4);
          v60 = __ldrex(v59);
        while ( __strex(v60 - 1, v59) );
        v60 = (*v59)--;
      if ( v60 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v31);
    v32 = (void *)(v67 - 12);
    if ( (int *)(v67 - 12) != &dword_28898C0 )
      v61 = (unsigned int *)(v67 - 4);
          v62 = __ldrex(v61);
        while ( __strex(v62 - 1, v61) );
        v62 = (*v61)--;
      if ( v62 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v32);
    v33 = (void *)(v66 - 12);
    if ( (int *)(v66 - 12) != &dword_28898C0 )
      v63 = (unsigned int *)(v66 - 4);
          v64 = __ldrex(v63);
        while ( __strex(v64 - 1, v63) );
        v64 = (*v63)--;
      if ( v64 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v33);
    v34 = v72;
    if ( v72 )
      v35 = (unsigned int *)(v72 + 4);
          v36 = __ldrex(v35);
        while ( __strex(v36 - 1, v35) );
        v36 = (*v35)--;
      if ( v36 == 1 )
        v37 = (unsigned int *)(v34 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 8))(v34);
            v38 = __ldrex(v37);
          while ( __strex(v38 - 1, v37) );
          v38 = (*v37)--;
        if ( v38 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v34 + 12))(v34);
    v39 = v70;
    if ( v70 )
      v40 = (unsigned int *)(v70 + 4);
          v41 = __ldrex(v40);
        while ( __strex(v41 - 1, v40) );
        v41 = (*v40)--;
      if ( v41 == 1 )
        v42 = (unsigned int *)(v39 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v39 + 8))(v39);
            v43 = __ldrex(v42);
          while ( __strex(v43 - 1, v42) );
          v43 = (*v42)--;
        if ( v43 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v39 + 12))(v39);
    v44 = v76;
    if ( v76 )
      v45 = (unsigned int *)(v76 + 4);
          v46 = __ldrex(v45);
        while ( __strex(v46 - 1, v45) );
        v46 = (*v45)--;
      if ( v46 == 1 )
        v47 = (unsigned int *)(v44 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 8))(v44);
            v48 = __ldrex(v47);
          while ( __strex(v48 - 1, v47) );
          v48 = (*v47)--;
        if ( v48 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 12))(v44);
    v49 = v80;
    if ( v80 )
      v50 = (unsigned int *)(v80 + 4);
          v51 = __ldrex(v50);
        while ( __strex(v51 - 1, v50) );
        v51 = (*v50)--;
      if ( v51 == 1 )
        v52 = (unsigned int *)(v49 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v49 + 8))(v49);
            v53 = __ldrex(v52);
          while ( __strex(v53 - 1, v52) );
          v53 = (*v52)--;
        if ( v53 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v49 + 12))(v49);
    v55 = v83;
    v54 = v82;
    if ( v82 != v83 )
        v58 = (int *)(*v54 - 12);
        if ( v58 != &dword_28898C0 )
          v56 = (unsigned int *)(*v54 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v57 = __ldrex(v56);
            while ( __strex(v57 - 1, v56) );
          }
          else
            v57 = (*v56)--;
          if ( v57 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v58);
        ++v54;
      while ( v54 != v55 );
      v54 = v82;
    if ( v54 )
      operator delete(v54);
}


int __fastcall Social::MultiplayerXBL::isInSession(Social::MultiplayerXBL *this)
{
  Social::XboxLiveUserManager *v1; // r0@1
  int v2; // r4@1
  int v3; // r5@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r6@8
  unsigned int v7; // r0@10
  int v8; // r4@16
  unsigned int *v9; // r1@17
  unsigned int v10; // r0@19
  __int64 v11; // r4@21
  unsigned int *v12; // r5@24
  unsigned int v13; // r0@26
  unsigned int *v14; // r1@34
  unsigned int v15; // r0@36
  unsigned int *v16; // r6@40
  unsigned int v17; // r0@42
  int v19; // [sp+0h] [bp-28h]@16
  int v20; // [sp+4h] [bp-24h]@16
  int v21; // [sp+8h] [bp-20h]@16
  int v22; // [sp+Ch] [bp-1Ch]@33
  Social::User *v23; // [sp+10h] [bp-18h]@1
  int v24; // [sp+14h] [bp-14h]@1

  Social::UserManager::getPrimaryUser((Social::UserManager *)&v23, *((_DWORD *)this + 11));
  v1 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v23);
  v2 = Social::XboxLiveUserManager::isSignedIn(v1);
  v3 = v24;
  if ( v24 )
  {
    v4 = (unsigned int *)(v24 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  if ( v2 )
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v19);
    xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
      (xbox::services::multiplayer::manager::multiplayer_manager *)&v21,
      v19);
    v8 = v20;
    if ( v20 )
      v9 = (unsigned int *)(v20 + 4);
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
        v10 = (*v9)--;
      if ( v10 == 1 )
        v12 = (unsigned int *)(v8 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
        }
        else
          v13 = (*v12)--;
        if ( v13 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
    v11 = *(_QWORD *)&v21;
    if ( v21 )
      LODWORD(v11) = 1;
    if ( v22 )
      v14 = (unsigned int *)(v22 + 4);
          v15 = __ldrex(v14);
        while ( __strex(v15 - 1, v14) );
        v15 = (*v14)--;
      if ( v15 == 1 )
        v16 = (unsigned int *)(HIDWORD(v11) + 8);
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v11) + 8))(HIDWORD(v11));
            v17 = __ldrex(v16);
          while ( __strex(v17 - 1, v16) );
          v17 = (*v16)--;
        if ( v17 == 1 )
          (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v11) + 12))(HIDWORD(v11));
  else
    LODWORD(v11) = 0;
  return v11;
}


signed int __fastcall Social::XboxLiveUserInfo::isUserOnBlockedList(int a1, const void **a2)
{
  const void **v2; // r4@1
  const void **v3; // r0@1
  signed int v4; // r1@1

  v2 = (const void **)(*(_QWORD *)(a1 + 48) >> 32);
  v3 = std::__find_if<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,__gnu_cxx::__ops::_Iter_equals_val<std::string const>>(
         *(_QWORD *)(a1 + 48),
         v2,
         a2);
  v4 = 0;
  if ( v3 != v2 )
    v4 = 1;
  return v4;
}


unsigned int __fastcall Social::XboxLiveUserManager::silentSignin(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  xbox::services::system::xbox_live_user *v4; // r0@1
  bool v5; // zf@1
  unsigned int v6; // r0@5
  unsigned int result; // r0@8
  int v8; // r6@9
  void (__fastcall *v9)(int, int, signed int); // r3@10
  int v10; // r4@17
  unsigned int v11; // r1@18
  unsigned int *v12; // r0@18
  unsigned int v13; // r2@21
  unsigned int v14; // r3@22
  int v15; // r6@23
  unsigned int *v16; // r7@23
  unsigned int v17; // r1@25
  unsigned int v18; // r1@30
  unsigned int v19; // r0@36
  unsigned int v20; // r0@43
  int v21; // r5@46
  unsigned int *v22; // r1@47
  unsigned int v23; // r0@49
  unsigned int *v24; // r6@53
  unsigned int v25; // r0@55
  int v26; // r0@60
  unsigned int *v27; // r2@61
  unsigned int v28; // r1@63
  int v29; // r5@68
  unsigned int *v30; // r1@69
  unsigned int v31; // r0@71
  unsigned int *v32; // r6@75
  unsigned int v33; // r0@77
  int v34; // [sp+0h] [bp-30h]@41
  int v35; // [sp+4h] [bp-2Ch]@41
  char v36; // [sp+8h] [bp-28h]@41
  int v37; // [sp+Ch] [bp-24h]@68
  char v38; // [sp+10h] [bp-20h]@46
  int v39; // [sp+14h] [bp-1Ch]@46

  v2 = a1;
  v3 = a2;
  v4 = *(xbox::services::system::xbox_live_user **)(a1 + 136);
  v5 = v4 == 0;
  if ( v4 )
    v5 = *(_DWORD *)(v2 + 144) == 0;
  if ( v5
    || xbox::services::system::xbox_live_user::is_signed_in(v4) != 1
    || (v6 = *(_WORD *)(v2 + 124), v6 > 0xFF)
    || (_BYTE)v6 )
  {
    v8 = *(_QWORD *)(v2 + 216);
    if ( v8 == *(_QWORD *)(v2 + 216) >> 32 )
    {
      std::vector<std::function<void ()(Social::SignInResult)>,std::allocator<std::function<void ()(Social::SignInResult)>>>::_M_emplace_back_aux<std::function<void ()(Social::SignInResult)> const&>(
        (_QWORD *)(v2 + 212),
        v3);
    }
    else
      *(_DWORD *)(v8 + 8) = 0;
      v9 = *(void (__fastcall **)(int, int, signed int))(v3 + 8);
      if ( v9 )
      {
        v9(v8, v3, 2);
        *(_DWORD *)(v8 + 12) = *(_DWORD *)(v3 + 12);
        *(_DWORD *)(v8 + 8) = *(_DWORD *)(v3 + 8);
        v8 = *(_DWORD *)(v2 + 216);
      }
      *(_DWORD *)(v2 + 216) = v8 + 16;
    result = *(_BYTE *)(v2 + 124);
    if ( !*(_BYTE *)(v2 + 124) )
      MinecraftEventing::fireEventSignInToXboxLive(*(_DWORD *)(v2 + 120), v2, 0, 1);
      if ( !*(_DWORD *)(v2 + 136) )
        Social::XboxLiveUserManager::_createXblUser((Social::XboxLiveUserManager *)v2);
      *(_BYTE *)(v2 + 124) = 1;
      v10 = *(_DWORD *)(v2 + 12);
      if ( !v10 )
        std::__throw_bad_weak_ptr();
      v11 = *(_DWORD *)(v10 + 4);
      v12 = (unsigned int *)(v10 + 4);
      do
        while ( 1 )
        {
          if ( !v11 )
            std::__throw_bad_weak_ptr();
          __dmb();
          v13 = __ldrex(v12);
          if ( v13 == v11 )
            break;
          __clrex();
          v11 = v13;
        }
        v14 = __strex(v11 + 1, v12);
        v11 = v13;
      while ( v14 );
      __dmb();
      v15 = *(_DWORD *)(v2 + 8);
      v16 = (unsigned int *)(v10 + 8);
      if ( &pthread_create )
        __dmb();
        do
          v17 = __ldrex(v16);
        while ( __strex(v17 + 1, v16) );
      else
        ++*v16;
          v18 = __ldrex(v12);
        while ( __strex(v18 - 1, v12) );
        v18 = (*v12)--;
      if ( v18 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
        if ( &pthread_create )
          do
            v19 = __ldrex(v16);
          while ( __strex(v19 - 1, v16) );
        else
          v19 = (*v16)--;
        if ( v19 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
      xbox::services::system::xbox_live_user::signin_silently(
        (xbox::services::system::xbox_live_user *)&v36,
        *(_DWORD *)(v2 + 136));
      v34 = v15;
      v35 = v10;
          v20 = __ldrex(v16);
        while ( __strex(v20 + 1, v16) );
      sub_1031DE8((int)&v38, (int)&v36, (int)&v34);
      v21 = v39;
      if ( v39 )
        v22 = (unsigned int *)(v39 + 4);
            v23 = __ldrex(v22);
          while ( __strex(v23 - 1, v22) );
          v23 = (*v22)--;
        if ( v23 == 1 )
          v24 = (unsigned int *)(v21 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          if ( &pthread_create )
          {
            __dmb();
            do
              v25 = __ldrex(v24);
            while ( __strex(v25 - 1, v24) );
          }
          else
            v25 = (*v24)--;
          if ( v25 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
      v26 = v35;
      if ( v35 )
        v27 = (unsigned int *)(v35 + 8);
            v28 = __ldrex(v27);
          while ( __strex(v28 - 1, v27) );
          v28 = (*v27)--;
        if ( v28 == 1 )
          (*(void (__cdecl **)(int))(*(_DWORD *)v26 + 12))(v26);
      v29 = v37;
      if ( v37 )
        v30 = (unsigned int *)(v37 + 4);
            v31 = __ldrex(v30);
          while ( __strex(v31 - 1, v30) );
          v31 = (*v30)--;
        if ( v31 == 1 )
          v32 = (unsigned int *)(v29 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 8))(v29);
              v33 = __ldrex(v32);
            while ( __strex(v33 - 1, v32) );
            v33 = (*v32)--;
          if ( v33 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v29 + 12))(v29);
          result = __ldrex(v16);
        while ( __strex(result - 1, v16) );
        result = (*v16)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  }
  else
    if ( !*(_DWORD *)(v3 + 8) )
      sub_119C8E4();
    result = (*(int (__fastcall **)(int, _DWORD))(v3 + 12))(v3, 0);
  return result;
}


int __fastcall Social::Events::AggregationEventListener::_sendEvents(int a1, int a2)
{
  int v2; // r8@1
  int v3; // r5@1
  int i; // r7@1
  int v5; // r4@4
  int j; // r6@4

  v2 = a2;
  v3 = a1;
  for ( i = *(_DWORD *)(a2 + 8); i; i = *(_DWORD *)i )
  {
    v5 = *(_QWORD *)(i + 8) >> 32;
    for ( j = *(_QWORD *)(i + 8); v5 != j; j += 72 )
      (*(void (__fastcall **)(int, int))(*(_DWORD *)v3 + 20))(v3, j);
  }
  return j_j_j__ZNSt10_HashtableISsSt4pairIKSsSt6vectorIN6Social6Events5EventESaIS5_EEESaIS8_ENSt8__detail10_Select1stESt8equal_toISsESt4hashISsENSA_18_Mod_range_hashingENSA_20_Default_ranged_hashENSA_20_Prime_rehash_policyENSA_17_Hashtable_traitsILb1ELb0ELb1EEEE5clearEv_0(v2);
}


int (**__fastcall Social::MultiplayerXBL::setRealm(Social::MultiplayerXBL *this, const Realms::World *a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  Social::MultiplayerXBL *v2; // r10@1
  pthread_mutex_t *v3; // r8@1
  const Realms::World *v4; // r9@1
  int v5; // r0@2
  int v6; // r1@3
  int v7; // r3@3
  int v8; // r4@3
  int v9; // r5@3
  int v10; // r6@3
  int v11; // r7@3
  int v12; // r1@3
  __int16 v13; // r2@3
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@3

  v2 = this;
  v3 = (pthread_mutex_t *)((char *)this + 432);
  v4 = a2;
  if ( &pthread_create )
  {
    v5 = pthread_mutex_lock(v3);
    if ( v5 )
      sub_119CCFC(v5);
  }
  *((_QWORD *)v2 + 45) = *(_QWORD *)v4;
  *((_DWORD *)v2 + 92) = *((_DWORD *)v4 + 2);
  EntityInteraction::setInteractText((int *)v2 + 93, (int *)v4 + 3);
  EntityInteraction::setInteractText((int *)v2 + 94, (int *)v4 + 4);
  EntityInteraction::setInteractText((int *)v2 + 95, (int *)v4 + 5);
  EntityInteraction::setInteractText((int *)v2 + 96, (int *)v4 + 6);
  v6 = (int)v2 + 388;
  v7 = *((_DWORD *)v4 + 8);
  v8 = *((_DWORD *)v4 + 9);
  v9 = *((_DWORD *)v4 + 10);
  v10 = *((_DWORD *)v4 + 11);
  v11 = *((_DWORD *)v4 + 12);
  *(_DWORD *)v6 = *((_DWORD *)v4 + 7);
  *(_DWORD *)(v6 + 4) = v7;
  *(_DWORD *)(v6 + 8) = v8;
  *(_DWORD *)(v6 + 12) = v9;
  *(_DWORD *)(v6 + 16) = v10;
  *(_DWORD *)(v6 + 20) = v11;
  v12 = (int)v2 + 412;
  v13 = *((_WORD *)v4 + 26);
  *(_BYTE *)(v12 + 2) = *((_BYTE *)v4 + 54);
  *(_WORD *)v12 = v13;
  std::vector<Realms::InvitedPlayer,std::allocator<Realms::InvitedPlayer>>::operator=(
    (int)v2 + 416,
    (unsigned __int64 *)v4 + 7);
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock(v3);
  return result;
}


void __fastcall Social::MultiplayerXBL::_removePrimaryUserFromSession(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10
  int *v7; // r5@15
  int v8; // r0@16
  void *v9; // r0@16
  int v10; // r4@17
  unsigned int *v11; // r1@18
  unsigned int v12; // r0@20
  unsigned int *v13; // r5@24
  unsigned int v14; // r0@26
  int v15; // r4@31
  unsigned int *v16; // r1@32
  unsigned int v17; // r0@34
  unsigned int *v18; // r5@38
  unsigned int v19; // r0@40
  int v20; // r4@45
  unsigned int *v21; // r1@46
  unsigned int v22; // r0@48
  unsigned int *v23; // r5@52
  unsigned int v24; // r0@54
  unsigned int *v25; // r2@60
  signed int v26; // r1@62
  Social::User *v27; // [sp+0h] [bp-40h]@16
  int v28; // [sp+4h] [bp-3Ch]@31
  char v29; // [sp+8h] [bp-38h]@16
  int v30; // [sp+Ch] [bp-34h]@17
  char v31; // [sp+10h] [bp-30h]@16
  int v32; // [sp+18h] [bp-28h]@16
  int v33; // [sp+1Ch] [bp-24h]@1
  int v34; // [sp+20h] [bp-20h]@1
  int *v35; // [sp+24h] [bp-1Ch]@1
  int v36; // [sp+28h] [bp-18h]@45

  v1 = this;
  xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v33);
  xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
    (xbox::services::multiplayer::manager::multiplayer_manager *)&v35,
    v33);
  v2 = v34;
  if ( v34 )
  {
    v3 = (unsigned int *)(v34 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  v7 = v35;
  if ( v35 )
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v27, *((_DWORD *)v1 + 11));
    v8 = Social::User::getLiveUser(v27);
    Social::XboxLiveUserManager::getCurrentUser((Social::XboxLiveUserManager *)&v29, v8);
    xbox::services::multiplayer::manager::multiplayer_lobby_session::remove_local_user((int)&v31, v7, (int)&v29);
    v9 = (void *)(v32 - 12);
    if ( (int *)(v32 - 12) != &dword_28898C0 )
      v25 = (unsigned int *)(v32 - 4);
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
        v26 = (*v25)--;
      if ( v26 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v9);
    v10 = v30;
    if ( v30 )
      v11 = (unsigned int *)(v30 + 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        v13 = (unsigned int *)(v10 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
    v15 = v28;
    if ( v28 )
      v16 = (unsigned int *)(v28 + 4);
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        v18 = (unsigned int *)(v15 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 8))(v15);
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
          v19 = (*v18)--;
        if ( v19 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
  v20 = v36;
  if ( v36 )
    v21 = (unsigned int *)(v36 + 4);
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
      v22 = (*v21)--;
    if ( v22 == 1 )
      v23 = (unsigned int *)(v20 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
          v24 = __ldrex(v23);
        while ( __strex(v24 - 1, v23) );
        v24 = (*v23)--;
      if ( v24 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
}


Social::MultiplayerGameInfo *__fastcall Social::MultiplayerGameInfo::MultiplayerGameInfo(Social::MultiplayerGameInfo *this, const Social::MultiplayerGameInfo *a2)
{
  const Social::MultiplayerGameInfo *v2; // r9@1
  Social::MultiplayerGameInfo *v3; // r8@1
  int v4; // r1@1
  int v5; // r3@1
  int v6; // r4@1
  int v7; // r5@1
  int v8; // r6@1
  int v9; // r7@1
  Social::MultiplayerGameInfo *result; // r0@1

  v2 = a2;
  v3 = this;
  std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::vector(
    (int)this,
    (unsigned __int64 *)a2);
  sub_119C854((int *)v3 + 3, (int *)v2 + 3);
  sub_119C854((int *)v3 + 4, (int *)v2 + 4);
  sub_119C854((int *)v3 + 5, (int *)v2 + 5);
  sub_119C854((int *)v3 + 6, (int *)v2 + 6);
  sub_119C854((int *)v3 + 7, (int *)v2 + 7);
  sub_119C854((int *)v3 + 8, (int *)v2 + 8);
  sub_119C854((int *)v3 + 9, (int *)v2 + 9);
  sub_119C854((int *)v3 + 10, (int *)v2 + 10);
  *((_QWORD *)v3 + 6) = *((_QWORD *)v2 + 6);
  sub_119C854((int *)v3 + 14, (int *)v2 + 14);
  sub_119C854((int *)v3 + 15, (int *)v2 + 15);
  v4 = (int)v3 + 64;
  v5 = *((_DWORD *)v2 + 17);
  v6 = *((_DWORD *)v2 + 18);
  v7 = *((_DWORD *)v2 + 19);
  v8 = *((_DWORD *)v2 + 20);
  v9 = *((_DWORD *)v2 + 21);
  result = v3;
  *(_DWORD *)v4 = *((_DWORD *)v2 + 16);
  *(_DWORD *)(v4 + 4) = v5;
  *(_DWORD *)(v4 + 8) = v6;
  *(_DWORD *)(v4 + 12) = v7;
  *(_DWORD *)(v4 + 16) = v8;
  *(_DWORD *)(v4 + 20) = v9;
  return result;
}


void __fastcall Social::MultiplayerXBL::getPlayerUidsInLobby(Social::MultiplayerXBL *this, int a2)
{
  Social::MultiplayerXBL::getPlayerUidsInLobby(this, a2);
}


int __fastcall Social::XboxLiveUserManager::getXblContext(int result, int a2)
{
  int v2; // r1@1
  unsigned int v3; // r1@4

  *(_DWORD *)result = *(_DWORD *)(a2 + 144);
  v2 = *(_DWORD *)(a2 + 148);
  *(_DWORD *)(result + 4) = v2;
  if ( v2 )
  {
    result = v2 + 4;
    if ( &pthread_create )
    {
      __dmb();
      do
        v3 = __ldrex((unsigned int *)result);
      while ( __strex(v3 + 1, (unsigned int *)result) );
    }
    else
      ++*(_DWORD *)result;
  }
  return result;
}


int __fastcall Social::MultiplayerServiceManager::clearRealm(int result)
{
  Social::MultiplayerService **v1; // r4@1
  Social::MultiplayerService **v2; // r5@1
  int v3; // r6@4

  v1 = (Social::MultiplayerService **)(*(_QWORD *)result >> 32);
  v2 = (Social::MultiplayerService **)*(_QWORD *)result;
  if ( v2 != v1 )
  {
    while ( 1 )
    {
      v3 = (int)(v2 + 1);
      result = Social::MultiplayerService::getServiceId(*v2);
      if ( !result )
        break;
      ++v2;
      if ( v1 == (Social::MultiplayerService **)v3 )
        return result;
    }
    result = (*(int (**)(void))(*(_DWORD *)*v2 + 112))();
  }
  return result;
}


signed int __fastcall Social::XboxLiveUserManager::_isAllowed(int a1, int a2, int a3)
{
  int v3; // r3@1
  int v4; // r12@1
  int v5; // r0@1
  int v6; // lr@2
  bool v7; // zf@3
  int v8; // r1@3
  int v9; // r0@6
  bool v10; // zf@6
  int v11; // r0@11
  signed int result; // r0@21

  v4 = *(_QWORD *)(a2 + 44) >> 32;
  v3 = *(_QWORD *)(a2 + 44);
  v5 = (v4 - v3) >> 5;
  if ( v5 < 1 )
  {
LABEL_10:
    if ( 1 == (v4 - v3) >> 3 )
    {
      v8 = v3;
    }
    else
      v11 = (v4 - v3) >> 3;
      if ( v11 == 2 )
      {
        v8 = v3;
      }
      else
        if ( v11 != 3 )
          return 0;
        if ( *(_DWORD *)v3 == a3 )
          goto LABEL_20;
        v8 = v3 + 8;
      if ( *(_DWORD *)v8 == a3 )
        goto LABEL_20;
      v8 += 8;
    if ( *(_DWORD *)v8 == a3 )
      goto LABEL_20;
    return 0;
  }
  v6 = v5 + 1;
  while ( 1 )
    v7 = *(_DWORD *)v3 == a3;
    v8 = v3;
    if ( *(_DWORD *)v3 != a3 )
      v8 = v3 + 8;
      v7 = *(_DWORD *)(v3 + 8) == a3;
    if ( v7 )
      break;
    v8 = v3 + 16;
    v9 = *(_DWORD *)(v3 + 16);
    v10 = v9 == a3;
    if ( v9 != a3 )
      v8 = v3 + 24;
      v10 = *(_DWORD *)(v3 + 24) == a3;
    if ( v10 )
    --v6;
    v3 += 32;
    if ( v6 <= 1 )
      goto LABEL_10;
LABEL_20:
  if ( v8 == v4 )
  result = 1;
  if ( !*(_BYTE *)(v8 + 4) )
    result = 2;
  return result;
}


int __fastcall Social::UserManager::onAppSuspended(Social::UserManager *this)
{
  Social::UserManager *v1; // r4@1
  Social::User **v2; // r5@1 OVERLAPPED
  Social::User **v3; // r6@1 OVERLAPPED
  Social::User *v4; // t1@2
  Social::XboxLiveUserManager *v5; // r0@2

  v1 = this;
  *(_QWORD *)&v2 = *((_QWORD *)this + 1);
  while ( v3 != v2 )
  {
    v4 = *v2;
    v2 += 2;
    v5 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v4);
    Social::XboxLiveUserManager::saveUserEventInformation(v5);
  }
  return (*(int (__fastcall **)(Social::UserManager *))(*(_DWORD *)v1 + 116))(v1);
}


int __fastcall Social::MultiplayerXBL::isInRealm(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r5@1
  pthread_mutex_t *v2; // r4@1
  int v3; // r0@2
  int v4; // r5@4

  v1 = this;
  v2 = (pthread_mutex_t *)((char *)this + 432);
  if ( &pthread_create )
  {
    v3 = pthread_mutex_lock(v2);
    if ( v3 )
      sub_119CCFC(v3);
  }
  if ( *((_BYTE *)v1 + 176) )
    v4 = 0;
  else
    v4 = *((_DWORD *)v1 + 92) != 0;
    pthread_mutex_unlock(v2);
  return v4;
}


void **__fastcall Social::XboxLiveUserProfileData::relationshipStatusToString(void **a1, int *a2)
{
  int v2; // r1@1
  void **result; // r0@4

  v2 = *a2;
  if ( v2 == 2 )
  {
    result = sub_119C884(a1, "False");
  }
  else if ( v2 == 1 )
    result = sub_119C884(a1, "True");
  else if ( v2 )
    result = sub_119C884(a1, "Unknown - Fix Me");
  else
    result = sub_119C884(a1, "Unknown");
  return result;
}


int __fastcall Social::XboxLiveUserInfo::_getProfile(int a1, _BYTE **a2, int a3)
{
  int v3; // r4@1
  void (__fastcall *v4)(void **, int, signed int); // r3@1
  int result; // r0@3
  int v6; // r4@3
  unsigned int *v7; // r1@4
  unsigned int *v8; // r5@10
  int v9; // r4@19
  unsigned int *v10; // r1@20
  unsigned int *v11; // r5@26
  void *v12; // [sp+0h] [bp-30h]@2
  int v13; // [sp+4h] [bp-2Ch]@3
  int v14; // [sp+8h] [bp-28h]@1
  int v15; // [sp+Ch] [bp-24h]@2
  char v16; // [sp+10h] [bp-20h]@1
  int v17; // [sp+14h] [bp-1Ch]@3
  char v18; // [sp+18h] [bp-18h]@3
  int v19; // [sp+1Ch] [bp-14h]@3
  void *v20; // [sp+20h] [bp-10h]@3

  v3 = a3;
  Social::XboxLiveUserInfo::_getProfile((int)&v16, a1, a2);
  v14 = 0;
  v4 = *(void (__fastcall **)(void **, int, signed int))(v3 + 8);
  if ( v4 )
  {
    v4(&v12, v3, 2);
    v15 = *(_DWORD *)(v3 + 12);
    v14 = *(_DWORD *)(v3 + 8);
  }
  result = sub_13901BC(
             (int)&v18,
             (int)&v16,
             (int)&v12,
             (int)v4,
             v12,
             v13,
             v14,
             v15,
             *(int *)&v16,
             v17,
             *(int *)&v18,
             v19,
             v20);
  v6 = v19;
  if ( v19 )
    v7 = (unsigned int *)(v19 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = __ldrex(v7);
      while ( __strex(result - 1, v7) );
    }
    else
      result = (*v7)--;
    if ( result == 1 )
      v8 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v8);
        while ( __strex(result - 1, v8) );
      }
      else
        result = (*v8)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  if ( v14 )
    result = ((int (*)(void))v14)();
  v9 = v17;
  if ( v17 )
    v10 = (unsigned int *)(v17 + 4);
        result = __ldrex(v10);
      while ( __strex(result - 1, v10) );
      result = (*v10)--;
      v11 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
          result = __ldrex(v11);
        while ( __strex(result - 1, v11) );
        result = (*v11)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  return result;
}


int __fastcall Social::Events::AutomationEventLogger::getEventTagsFilter(Social::Events::AutomationEventLogger *this)
{
  int result; // r0@1

  _R0 = ~Automation::AutomationClient::isReady(*((Automation::AutomationClient **)this + 1));
  __asm { SBFX.W          R0, R0, #0, #1 }
  return result;
}


signed int __fastcall Social::Events::EventManager::setGlobalProperty<bool>(int a1, int a2, int **a3, bool *a4)
{
  int *v4; // r4@1
  int v5; // r7@1
  int v6; // r5@1
  bool *v7; // r6@1
  int v9; // [sp+0h] [bp-28h]@1

  v4 = (int *)a3;
  v5 = a2;
  v6 = a1;
  v7 = a4;
  Social::Events::EventManager::removeGlobalProperty(a2, a3);
  sub_21E8AF4((int *)v6, v4);
  Json::Value::Value((Json::Value *)(v6 + 8), *v7);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v9,
           (unsigned __int64 *)(v5 + 12),
           v4,
           v6);
}


unsigned int __fastcall Social::XboxLiveUserInfo::_getXboxLiveFriends(Social::XboxLiveUserInfo *this, int a2)
{
  int v2; // r5@1
  Social::XboxLiveUserInfo *v3; // r4@1
  int v4; // r11@2
  _BYTE *v5; // r10@2
  int v6; // r0@4
  double v7; // r0@5
  unsigned int v8; // r0@5
  int v9; // r7@7
  int *v10; // r6@7
  _DWORD *v11; // r8@8
  unsigned int *v12; // r2@10
  signed int v13; // r1@12
  _DWORD *v14; // r6@18
  Social::XboxProfile *v15; // r0@18
  int v16; // r1@18
  void *v17; // r0@18
  int v18; // r4@25
  pthread_mutex_t *mutex; // [sp+4h] [bp-4Ch]@7
  int v21; // [sp+8h] [bp-48h]@5
  void *ptr; // [sp+Ch] [bp-44h]@5
  unsigned int v23; // [sp+10h] [bp-40h]@5
  _DWORD *v24; // [sp+14h] [bp-3Ch]@5
  int v25; // [sp+18h] [bp-38h]@5
  signed int v26; // [sp+1Ch] [bp-34h]@5
  int v27; // [sp+20h] [bp-30h]@5
  int v28; // [sp+24h] [bp-2Ch]@5
  int v29; // [sp+28h] [bp-28h]@25

  v2 = a2;
  v3 = this;
  if ( Social::XboxLiveUserManager::isSignedIn(*(Social::XboxLiveUserManager **)(a2 + 8)) == 1 )
  {
    v4 = v2 + 20;
    v5 = (_BYTE *)(v2 + 16);
  }
  else
    if ( &pthread_create )
    {
      v6 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 60));
      if ( v6 )
        sub_21E5E14(v6);
    }
    v28 = 0;
    v25 = 0;
    v24 = 0;
    v21 = 0;
    ptr = 0;
    v26 = 1065353216;
    v27 = 0;
    HIDWORD(v7) = 10;
    LODWORD(v7) = &v26;
    v8 = sub_21E6254(v7);
    v23 = v8;
    if ( v8 == 1 )
      mutex = (pthread_mutex_t *)(v2 + 60);
      v28 = 0;
      v10 = &v28;
    else
      if ( v8 >= 0x40000000 )
        sub_21E57F4();
      v9 = 4 * v8;
      v10 = (int *)operator new(4 * v8);
      _aeabi_memclr4(v10, v9);
    ptr = v10;
    *(_BYTE *)(v2 + 16) = v21;
    std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_move_assign(
      v2 + 20,
      (unsigned int)&v21 | 4);
    v11 = v24;
    while ( v11 )
      v14 = v11;
      v15 = (Social::XboxProfile *)(v11 + 2);
      v11 = (_DWORD *)*v11;
      Social::XboxProfile::~XboxProfile(v15);
      v16 = v14[1];
      v17 = (void *)(v16 - 12);
      if ( (int *)(v16 - 12) != &dword_28898C0 )
      {
        v12 = (unsigned int *)(v16 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
        }
        else
          v13 = (*v12)--;
        if ( v13 <= 0 )
          j_j_j_j__ZdlPv_9(v17);
      }
      operator delete(v14);
    _aeabi_memclr4(ptr, 4 * v23);
    if ( ptr && &v28 != ptr )
      operator delete(ptr);
      pthread_mutex_unlock(mutex);
  *(_BYTE *)v3 = *v5;
  *((_DWORD *)v3 + 1) = 0;
  v18 = (int)v3 + 4;
  *(_DWORD *)(v18 + 4) = *(_DWORD *)(v2 + 24);
  *(_DWORD *)(v18 + 8) = 0;
  *(_DWORD *)(v18 + 12) = *(_DWORD *)(v2 + 32);
  *(_QWORD *)(v18 + 16) = *(_QWORD *)(v2 + 36);
  v29 = v18;
  return std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_assign<std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::(std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>> const&)::{lambda(std::__detail::_Hash_node<std::pair<std::string const,Social::XboxProfile>,true> const*)#1}>(
           (unsigned int *)v18,
           v4,
           &v29);
}


unsigned int __fastcall Social::XboxLiveUserManager::blockUser(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  int *v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  void *v11; // r9@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  __int64 v16; // kr00_8@25
  unsigned int *v17; // r1@26
  unsigned int v18; // r2@28
  char *v19; // r0@31
  unsigned int v20; // r0@33
  void (__fastcall *v21)(int *, int, signed int); // r3@36
  int v22; // r5@38
  unsigned int *v23; // r1@39
  unsigned int v24; // r0@41
  unsigned int *v25; // r6@45
  unsigned int v26; // r0@47
  void *v27; // r0@54
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  void *v31; // r6@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int result; // r0@93
  unsigned int *v41; // r2@99
  signed int v42; // r1@101
  void *v43; // [sp+0h] [bp-50h]@31
  int v44; // [sp+4h] [bp-4Ch]@31
  int v45; // [sp+8h] [bp-48h]@36
  int v46; // [sp+Ch] [bp-44h]@37
  int v47; // [sp+10h] [bp-40h]@38
  int v48; // [sp+14h] [bp-3Ch]@36
  int v49; // [sp+18h] [bp-38h]@37
  char v50; // [sp+1Ch] [bp-34h]@31
  void *v51; // [sp+20h] [bp-30h]@38
  char v52; // [sp+24h] [bp-2Ch]@38
  int v53; // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(void **)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_QWORD *)(v3 + 144);
  if ( HIDWORD(v16) )
    v17 = (unsigned int *)(HIDWORD(v16) + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
      ++*v17;
  v19 = xbox::services::xbox_live_context::privacy_service((xbox::services::xbox_live_context *)v16);
  xbox::services::privacy::privacy_service::block_user((int)&v50, (int)v19, v6);
  v43 = v11;
  v44 = v5;
      v20 = __ldrex(v12);
    while ( __strex(v20 + 1, v12) );
  sub_119C854(&v45, v6);
  v48 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  if ( v21 )
    v21(&v46, v4, 2);
    v49 = *(_DWORD *)(v4 + 12);
    v48 = *(_DWORD *)(v4 + 8);
  sub_103E890((int)&v52, (int)&v50, (int)&v43, (int)v21, v43, v44, v45, v46, v47, v48, v49, *(int *)&v50, v51);
  v22 = v53;
  if ( v53 )
    v23 = (unsigned int *)(v53 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
      }
      else
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  if ( v48 )
    ((void (*)(void))v48)();
  v27 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v45 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
  v28 = v44;
  if ( v44 )
    v29 = (unsigned int *)(v44 + 8);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 == 1 )
      (*(void (**)(void))(*(_DWORD *)v28 + 12))();
  v31 = v51;
  if ( v51 )
    v32 = (unsigned int *)((char *)v51 + 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      v34 = (unsigned int *)((char *)v31 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
    v36 = (unsigned int *)(HIDWORD(v16) + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(HIDWORD(v16) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 8))(HIDWORD(v16));
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 12))(HIDWORD(v16));
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


void __fastcall Social::Events::AutomationEventLogger::recordEvent(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r4@1
  unsigned __int64 *v4; // r6@3
  int v5; // r0@3
  int v6; // r7@3
  __int64 v7; // r0@4
  char *v8; // r0@6
  int v9; // r7@6
  __int64 v10; // r4@6
  int v11; // r0@7
  char v12; // [sp+4h] [bp-2Ch]@6
  char *v13; // [sp+Ch] [bp-24h]@6
  char *v14; // [sp+10h] [bp-20h]@6
  char *v15; // [sp+14h] [bp-1Ch]@6

  v2 = a1;
  v3 = a2;
  if ( Automation::AutomationClient::isReady(*(Automation::AutomationClient **)(a1 + 4)) == 1
    && Automation::AutomationClient::isSubscribedtoEvent(*(_DWORD *)(v2 + 4), (const void **)(v3 + 4)) == 1 )
  {
    v4 = (unsigned __int64 *)(v2 + 8);
    v5 = std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
           v4,
           (int **)(v3 + 4));
    v6 = v5;
    if ( v5 )
    {
      v7 = *(_QWORD *)(v5 + 12);
      if ( (_DWORD)v7 == HIDWORD(v7) )
      {
        j_j_j__ZNSt6vectorIN6Social6Events5EventESaIS2_EE19_M_emplace_back_auxIJRKS2_EEEvDpOT__0(
          (unsigned __int64 *)(v6 + 8),
          v3);
      }
      else
        Social::Events::Event::Event(v7, v3);
        *(_DWORD *)(v6 + 12) += 72;
    }
    else
      v8 = (char *)operator new(0x48u);
      v9 = (int)(v8 + 72);
      v13 = v8;
      v15 = v8 + 72;
      Social::Events::Event::Event((int)v8, v3);
      v14 = (char *)v9;
      std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>(
        (int)&v12,
        (int)v4,
        (int *)(v3 + 4),
        (int)&v13);
      v10 = *(_QWORD *)&v13;
      if ( v13 != v14 )
        v11 = (int)v13;
        do
          v11 = Social::Events::Event::~Event(v11) + 72;
        while ( HIDWORD(v10) != v11 );
      if ( (_DWORD)v10 )
        j_j_j__ZdlPv_5((void *)v10);
  }
}


unsigned int __fastcall Social::XboxLiveUserManager::onSignOut(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r5@1
  int v2; // r4@1
  unsigned int v3; // r1@2
  unsigned int *v4; // r0@2
  unsigned int v5; // r2@5
  unsigned int v6; // r3@6
  int v7; // r7@7
  unsigned int *v8; // r6@7
  unsigned int v9; // r1@9
  unsigned int v10; // r1@14
  unsigned int v11; // r0@20
  unsigned int v12; // r0@27
  _DWORD *v13; // r0@30
  unsigned int v14; // r1@32
  __int64 v15; // r1@35
  unsigned int v16; // r0@39
  unsigned int result; // r0@46
  _DWORD *v18; // [sp+4h] [bp-24h]@35
  void (*v19)(void); // [sp+Ch] [bp-1Ch]@30

  v1 = this;
  Social::XboxLiveUserManager::_saveVisitedBiomes(this);
  MinecraftEventing::onUserSignOut(*((MinecraftEventing **)v1 + 30), v1);
  MinecraftEventing::fireEventSignOutOfXboxLive(*((MinecraftEventing **)v1 + 30), v1);
  v2 = *((_DWORD *)v1 + 3);
  if ( !v2 )
    std::__throw_bad_weak_ptr();
  v3 = *(_DWORD *)(v2 + 4);
  v4 = (unsigned int *)(v2 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v3 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v5 = __ldrex(v4);
      if ( v5 == v3 )
        break;
      __clrex();
      v3 = v5;
    }
    v6 = __strex(v3 + 1, v4);
    v3 = v5;
  }
  while ( v6 );
  __dmb();
  v7 = *((_DWORD *)v1 + 2);
  v8 = (unsigned int *)(v2 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v9 = __ldrex(v8);
    while ( __strex(v9 + 1, v8) );
  else
    ++*v8;
      v10 = __ldrex(v4);
    while ( __strex(v10 - 1, v4) );
    v10 = (*v4)--;
  if ( v10 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
    if ( &pthread_create )
      do
        v11 = __ldrex(v8);
      while ( __strex(v11 - 1, v8) );
    else
      v11 = (*v8)--;
    if ( v11 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
      v12 = __ldrex(v8);
    while ( __strex(v12 + 1, v8) );
  v19 = 0;
  v13 = operator new(8u);
  *v13 = v7;
  v13[1] = v2;
      v14 = __ldrex(v8);
    while ( __strex(v14 + 1, v8) );
  LODWORD(v15) = sub_104FF4C;
  v18 = v13;
  HIDWORD(v15) = sub_104FDE4;
  *(_QWORD *)&v19 = v15;
  MPMCQueue<std::function<void ()(void)>>::push((int)v1 + 168, (int)&v18);
  if ( v19 )
    v19();
      v16 = __ldrex(v8);
    while ( __strex(v16 - 1, v8) );
    v16 = (*v8)--;
  if ( v16 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
      result = __ldrex(v8);
    while ( __strex(result - 1, v8) );
    result = (*v8)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  return result;
}


signed int __fastcall Social::User::isPrimaryUser(Social::User *this)
{
  int v1; // r1@1
  signed int result; // r0@1

  v1 = *((_DWORD *)this + 1);
  result = 0;
  if ( !v1 )
    result = 1;
  return result;
}


void __fastcall Social::XboxLiveUserManager::_updateNewXuids(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r10@1
  BasicTimer *v2; // r6@2
  char *v3; // r4@3
  int *v4; // r7@3
  int *v5; // r11@3
  __int64 i; // r0@4
  int v7; // r0@9
  char *v8; // r1@10
  char *v9; // r0@12
  unsigned int *v10; // r2@15
  signed int v11; // r1@17
  __int64 v12; // r0@23
  unsigned int v13; // r7@23
  int v14; // r2@23
  int v15; // r5@26
  unsigned int v16; // r1@27
  unsigned int *v17; // r0@27
  unsigned int v18; // r2@30
  unsigned int v19; // r3@31
  int v20; // r7@34
  unsigned int *v21; // r11@34
  unsigned int v22; // r1@38
  unsigned int v23; // r1@42
  unsigned int v24; // r0@48
  int v25; // r9@53
  unsigned int v26; // r0@55
  int v27; // r1@58
  char *v28; // r2@58
  int v29; // r3@58
  int v30; // r0@61
  int v31; // r7@61
  _DWORD *v32; // r0@61
  unsigned int *v33; // r1@62
  unsigned int v34; // r2@64
  unsigned int *v35; // r2@70
  unsigned int v36; // r1@72
  __int64 v37; // kr18_8@77
  char *v38; // r1@78
  _DWORD *v39; // r9@78
  unsigned int *v40; // r2@79
  signed int v41; // r4@81
  char *v42; // r4@85
  int *v43; // r0@86
  unsigned int v44; // r0@90
  char **v45; // r4@95
  char **v46; // r6@95
  unsigned int *v47; // r2@97
  signed int v48; // r1@99
  int *v49; // r0@105
  void *v50; // r4@110
  int v51; // r6@110
  unsigned int *v52; // r2@112
  signed int v53; // r1@114
  int *v54; // r0@120
  int v55; // [sp+Ch] [bp-74h]@53
  char *v56; // [sp+14h] [bp-6Ch]@58
  int v57; // [sp+18h] [bp-68h]@58
  char *v58; // [sp+1Ch] [bp-64h]@58
  _DWORD *v59; // [sp+20h] [bp-60h]@67
  void (*v60)(void); // [sp+28h] [bp-58h]@61
  void (__fastcall *v61)(int, int, int, int, int, int, int, int, int, void *, int, int, char, int, int, int, int, char); // [sp+2Ch] [bp-54h]@67
  char *v62; // [sp+30h] [bp-50h]@23
  char *v63; // [sp+34h] [bp-4Ch]@23
  char *v64; // [sp+38h] [bp-48h]@23
  char *v65; // [sp+3Ch] [bp-44h]@9
  char **v66; // [sp+40h] [bp-40h]@3
  char **v67; // [sp+44h] [bp-3Ch]@3
  char **v68; // [sp+48h] [bp-38h]@3
  void *v69; // [sp+4Ch] [bp-34h]@3
  void *v70; // [sp+50h] [bp-30h]@3
  int v71; // [sp+54h] [bp-2Ch]@3
  char v72; // [sp+58h] [bp-28h]@78

  v1 = this;
  if ( (unsigned int)*(_QWORD *)((char *)this + 108) != *(_QWORD *)((char *)this + 108) >> 32 )
  {
    v2 = (Social::XboxLiveUserManager *)((char *)this + 360);
    if ( BasicTimer::isFinished((Social::XboxLiveUserManager *)((char *)this + 360)) == 1 )
    {
      v3 = 0;
      v70 = 0;
      v71 = 0;
      v66 = 0;
      v67 = 0;
      v68 = 0;
      v69 = 0;
      v5 = (int *)(*(_QWORD *)((char *)v1 + 108) >> 32);
      v4 = (int *)*(_QWORD *)((char *)v1 + 108);
      if ( v4 != v5 )
      {
        for ( i = 0LL; ; i = *(_QWORD *)&v70 )
        {
          if ( (_DWORD)i == HIDWORD(i) )
          {
            std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<std::string &>(
              (unsigned __int64 *)&v69,
              v4);
          }
          else
            sub_119C854((int *)i, v4);
            v70 = (char *)v70 + 4;
          utility::conversions::to_string_t((int *)&v65, v4);
          v7 = (int)v67;
          if ( v67 == v68 )
            std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<std::string>(
              (unsigned __int64 *)&v66,
              &v65);
            v8 = v65;
            *v67 = v65;
            v8 = (char *)&unk_28898CC;
            v65 = (char *)&unk_28898CC;
            v67 = (char **)(v7 + 4);
          v9 = v8 - 12;
          if ( (int *)(v8 - 12) != &dword_28898C0 )
            v10 = (unsigned int *)(v8 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v11 = __ldrex(v10);
              while ( __strex(v11 - 1, v10) );
            }
            else
              v11 = (*v10)--;
            if ( v11 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v9);
          ++v4;
          if ( v4 == v5 )
            break;
        }
      }
      v12 = *((_QWORD *)v1 + 49);
      v62 = 0;
      v63 = 0;
      LODWORD(v12) = HIDWORD(v12) - v12;
      v64 = 0;
      v13 = -1227133513 * ((signed int)v12 >> 2);
      v14 = HIDWORD(v12);
      if ( (_DWORD)v12 )
        if ( v13 >= 0x924924A )
          sub_119C874();
        v3 = (char *)operator new(v12);
        HIDWORD(v12) = *((_QWORD *)v1 + 49) >> 32;
        v14 = *((_QWORD *)v1 + 49);
      v62 = v3;
      v64 = &v3[28 * v13];
      v63 = (char *)std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Social::XboxLiveUserManager::ProfileCallback const*,std::vector<Social::XboxLiveUserManager::ProfileCallback,std::allocator<Social::XboxLiveUserManager::ProfileCallback>>>,Social::XboxLiveUserManager::ProfileCallback*>(
                      v14,
                      SHIDWORD(v12),
                      (int)v3);
      std::vector<Social::XboxLiveUserManager::ProfileCallback,std::allocator<Social::XboxLiveUserManager::ProfileCallback>>::clear((int)v1 + 392);
      v15 = *((_DWORD *)v1 + 3);
      if ( !v15 )
        std::__throw_bad_weak_ptr();
      v16 = *(_DWORD *)(v15 + 4);
      v17 = (unsigned int *)(v15 + 4);
      do
        while ( 1 )
          if ( !v16 )
            std::__throw_bad_weak_ptr();
          __dmb();
          v18 = __ldrex(v17);
          if ( v18 == v16 )
          __clrex();
          v16 = v18;
        v19 = __strex(v16 + 1, v17);
        v16 = v18;
      while ( v19 );
      __dmb();
      v20 = *((_DWORD *)v1 + 2);
      v21 = (unsigned int *)(v15 + 8);
      if ( &pthread_create )
        __dmb();
        do
          v22 = __ldrex(v21);
        while ( __strex(v22 + 1, v21) );
      else
        ++*v21;
          v23 = __ldrex(v17);
        while ( __strex(v23 - 1, v17) );
        v23 = (*v17)--;
      if ( v23 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 8))(v15);
        if ( &pthread_create )
          do
            v24 = __ldrex(v21);
          while ( __strex(v24 - 1, v21) );
        else
          v24 = (*v21)--;
        if ( v24 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
      v25 = *((_DWORD *)v1 + 62);
      v55 = v20;
          v26 = __ldrex(v21);
        while ( __strex(v26 + 1, v21) );
      v27 = (int)v63;
      v28 = 0;
      v56 = 0;
      v57 = 0;
      v58 = 0;
      v29 = (int)v63;
      if ( v63 != v62 )
        if ( (unsigned int)(-1227133513 * ((v63 - v62) >> 2)) >= 0x924924A )
        v28 = (char *)operator new(v63 - v62);
        v27 = (int)v63;
        v29 = (int)v62;
      v56 = v28;
      v58 = &v28[4 * ((v63 - v62) >> 2)];
      v30 = std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<Social::XboxLiveUserManager::ProfileCallback const*,std::vector<Social::XboxLiveUserManager::ProfileCallback,std::allocator<Social::XboxLiveUserManager::ProfileCallback>>>,Social::XboxLiveUserManager::ProfileCallback*>(
              v29,
              v27,
              (int)v28);
      v31 = v30;
      v57 = v30;
      v60 = 0;
      v32 = operator new(0x14u);
      *v32 = v55;
      v32[1] = v15;
      if ( v15 )
        v33 = (unsigned int *)(v15 + 8);
            v34 = __ldrex(v33);
          while ( __strex(v34 + 1, v33) );
          v31 = v57;
          ++*v33;
      v32[2] = v56;
      v32[3] = v31;
      v32[4] = v58;
      v59 = v32;
      v60 = (void (*)(void))sub_1054FF4;
      v61 = sub_1054A94;
      Social::XboxLiveUserInfo::_getProfiles(v25, (__int64 *)&v69, (int)&v59);
      if ( v60 )
        v60();
      std::vector<Social::XboxLiveUserManager::ProfileCallback,std::allocator<Social::XboxLiveUserManager::ProfileCallback>>::~vector((unsigned __int64 *)&v56);
        v35 = (unsigned int *)(v15 + 8);
            v36 = __ldrex(v35);
          while ( __strex(v36 - 1, v35) );
          v36 = (*v35)--;
        if ( v36 == 1 )
          (*(void (**)(void))(*(_DWORD *)v15 + 12))();
      Social::XboxLiveUserManager::_refreshPrivacyList((int)v1, (__int64 *)&v66);
      v37 = *(_QWORD *)((char *)v1 + 108);
      if ( HIDWORD(v37) != (_DWORD)v37 )
        v38 = &v72;
        v39 = (_DWORD *)v37;
          v43 = (int *)(*v39 - 12);
          if ( v43 != &dword_28898C0 )
            v40 = (unsigned int *)(*v39 - 4);
                v41 = __ldrex(v40);
              while ( __strex(v41 - 1, v40) );
              v41 = (*v40)--;
            if ( v41 <= 0 )
              v42 = v38;
              j_j_j_j_j__ZdlPv_9_1(v43);
              v38 = v42;
          ++v39;
        while ( v39 != (_DWORD *)HIDWORD(v37) );
      *((_DWORD *)v1 + 28) = v37;
      BasicTimer::resetTime(v2);
          v44 = __ldrex(v21);
        while ( __strex(v44 - 1, v21) );
        v44 = (*v21)--;
      if ( v44 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v15 + 12))(v15);
      std::vector<Social::XboxLiveUserManager::ProfileCallback,std::allocator<Social::XboxLiveUserManager::ProfileCallback>>::~vector((unsigned __int64 *)&v62);
      v46 = v67;
      v45 = v66;
      if ( v66 != v67 )
          v49 = (int *)(*v45 - 12);
          if ( v49 != &dword_28898C0 )
            v47 = (unsigned int *)(*v45 - 4);
                v48 = __ldrex(v47);
              while ( __strex(v48 - 1, v47) );
              v48 = (*v47)--;
            if ( v48 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v49);
          ++v45;
        while ( v45 != v46 );
        v45 = v66;
      if ( v45 )
        operator delete(v45);
      v51 = (int)v70;
      v50 = v69;
      if ( v69 != v70 )
          v54 = (int *)(*(_DWORD *)v50 - 12);
          if ( v54 != &dword_28898C0 )
            v52 = (unsigned int *)(*(_DWORD *)v50 - 4);
                v53 = __ldrex(v52);
              while ( __strex(v53 - 1, v52) );
              v53 = (*v52)--;
            if ( v53 <= 0 )
              j_j_j_j_j__ZdlPv_9_1(v54);
          v50 = (char *)v50 + 4;
        while ( v50 != (void *)v51 );
        v50 = v69;
      if ( v50 )
        operator delete(v50);
    }
  }
}


int __fastcall Social::Events::EventManager::getPlayerCommonProperties(Social::Events::EventManager *this, unsigned int a2)
{
  unsigned int v2; // r10@1
  char *v3; // r8@1
  unsigned int v4; // r7@1
  int v5; // r9@1
  int v6; // r0@1
  _DWORD *v7; // r4@2
  int v8; // r5@2
  _DWORD *v9; // r6@4
  bool v10; // zf@7
  int v11; // r0@11
  unsigned int v13; // [sp+4h] [bp-2Ch]@1
  int *v14; // [sp+Ch] [bp-24h]@11

  v2 = a2;
  v13 = a2;
  v3 = (char *)this + 68;
  v4 = *((_DWORD *)this + 18);
  v5 = a2 % *((_DWORD *)this + 18);
  v6 = *(_DWORD *)(*((_DWORD *)this + 17) + 4 * v5);
  if ( !v6 )
    goto LABEL_11;
  v7 = *(_DWORD **)v6;
  v8 = *(_DWORD *)(*(_DWORD *)v6 + 4);
  while ( v8 != a2 )
  {
    v9 = (_DWORD *)*v7;
    if ( *v7 )
    {
      v8 = v9[1];
      v6 = (int)v7;
      v7 = (_DWORD *)*v7;
      if ( v9[1] % v4 == v5 )
        continue;
    }
  }
  v10 = v6 == 0;
  if ( v6 )
    v6 = *(_DWORD *)v6;
    v10 = v6 == 0;
  if ( v10 )
LABEL_11:
    v14 = (int *)&v13;
    v11 = j_j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            (int)v3,
            (int)&unk_262EAB5,
            &v14);
    v6 = j_std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
           (int)v3,
           v5,
           v2,
           v11);
  return v6 + 8;
}


int __fastcall Social::MultiplayerService::onAllClientsExitedLevel(Social::MultiplayerService *this, unsigned int a2)
{
  Social::MultiplayerService *v2; // r4@1
  Player *v3; // r5@1
  Level *v4; // r0@1
  bool v5; // zf@1
  MinecraftEventing *v6; // r0@4
  int v7; // r2@4
  void **v8; // r0@5
  void *v9; // r0@5
  void *v10; // r0@6
  unsigned int *v12; // r2@8
  signed int v13; // r1@10
  unsigned int *v14; // r2@12
  signed int v15; // r1@14
  int v16; // [sp+Ch] [bp-2Ch]@5
  int v17; // [sp+14h] [bp-24h]@5

  v2 = this;
  v3 = (Player *)a2;
  v4 = (Level *)*((_BYTE *)this + 36);
  v5 = v4 == 0;
  if ( v4 )
  {
    v4 = (Level *)*((_DWORD *)v2 + 8);
    v5 = v4 == 0;
  }
  if ( !v5 )
    v6 = (MinecraftEventing *)Level::getPrimaryLocalPlayer(v4);
    MinecraftEventing::fireEventMultiplayerRoundEnd(v6, v3, v7);
  *((_BYTE *)v2 + 36) = 0;
  sub_21E94B4((void **)&v17, (const char *)&unk_257BC67);
  v8 = sub_21E94B4((void **)&v16, (const char *)&unk_257BC67);
  Social::MultiplayerService::_changeMultiplayerState((int)v2, 0, (const char **)&v17, 0, (const char **)v8);
  v9 = (void *)(v16 - 12);
  if ( (int *)(v16 - 12) != &dword_28898C0 )
    v12 = (unsigned int *)(v16 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
    }
    else
      v13 = (*v12)--;
    if ( v13 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  v10 = (void *)(v17 - 12);
  if ( (int *)(v17 - 12) != &dword_28898C0 )
    v14 = (unsigned int *)(v17 - 4);
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j__ZdlPv_9(v10);
  *((_BYTE *)v2 + 176) = 0;
  *((_BYTE *)v2 + 28) = 0;
  *((_DWORD *)v2 + 8) = 0;
  return (*(int (__fastcall **)(Social::MultiplayerService *))(*(_DWORD *)v2 + 112))(v2);
}


int __fastcall Social::MultiplayerService::initialize(NetworkHandler *a1, int a2, int a3, int a4, NetworkHandler *a5)
{
  int v5; // r12@0
  int v6; // lr@0
  NetworkHandler *v7; // r4@1
  int v8; // r0@1
  int v9; // r5@1
  void (__fastcall *v10)(int *, int, signed int); // r3@1
  int v11; // r1@2
  NetworkHandler *v12; // r5@4
  void (__cdecl *v13)(_DWORD, _DWORD, _DWORD, _DWORD); // r3@4
  bool v14; // zf@6
  int v15; // r0@9
  int v16; // r3@9
  int v17; // r0@9
  int result; // r0@10
  int v19; // [sp+0h] [bp-20h]@2
  int v20; // [sp+4h] [bp-1Ch]@2
  void (__cdecl *v21)(_DWORD, _DWORD, _DWORD, _DWORD); // [sp+8h] [bp-18h]@1
  int v22; // [sp+Ch] [bp-14h]@2

  v7 = a1;
  v8 = 0;
  *(_QWORD *)((char *)v7 + 44) = *(_QWORD *)&a2;
  v9 = a4;
  v21 = 0;
  v10 = *(void (__fastcall **)(int *, int, signed int))(a4 + 8);
  if ( v10 )
  {
    v10(&v19, v9, 2);
    v8 = *(_DWORD *)(v9 + 12);
    v22 = *(_DWORD *)(v9 + 12);
    v11 = *(_DWORD *)(v9 + 8);
    v21 = *(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(v9 + 8);
    v6 = v20;
    v5 = v19;
  }
  else
    v11 = 0;
  v12 = (NetworkHandler *)((char *)v7 + 52);
  *(_QWORD *)&v19 = *(_QWORD *)((char *)v7 + 52);
  *(_DWORD *)v12 = v5;
  *((_DWORD *)v12 + 1) = v6;
  v21 = (void (__cdecl *)(_DWORD, _DWORD, _DWORD, _DWORD))*((_DWORD *)v7 + 15);
  v13 = v21;
  *((_DWORD *)v7 + 15) = v11;
  v22 = *((_DWORD *)v7 + 16);
  *((_DWORD *)v7 + 16) = v8;
  if ( v13 )
    v13(&v19, &v19, 3, v13);
  v14 = *((_BYTE *)v7 + 261) == 0;
  if ( *((_BYTE *)v7 + 261) )
    v12 = a5;
    *((_DWORD *)v7 + 17) = a5;
    v14 = a5 == 0;
  if ( !v14 )
    v15 = NetworkHandler::getConnector(v12);
    *((_DWORD *)v7 + 18) = v15;
    (*(void (__cdecl **)(int, char *, _DWORD, int))(*(_DWORD *)v15 + 48))(
      v15,
      (char *)v7 + 4,
      *(_DWORD *)(*(_DWORD *)v15 + 48),
      v16);
    v17 = NetworkHandler::getUPnPInterface(v12);
    *((_DWORD *)v7 + 19) = v17;
    UPNPInterface::addConnectionStateListener(v17, (int)v7);
  result = 1;
  *((_BYTE *)v7 + 260) = 1;
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::getProfile(int a1, _BYTE **a2, int a3)
{
  int v3; // r6@1
  int v4; // r11@1
  int v5; // r10@1
  _BYTE **v6; // r8@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  int v11; // r4@7
  unsigned int *v12; // r5@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  int v16; // r9@25
  unsigned int v17; // r0@27
  void (__fastcall *v18)(int *, int, signed int); // r3@30
  void (__fastcall *v19)(_DWORD, _DWORD, _DWORD); // r4@30
  void *v20; // r0@32
  int v21; // r12@32
  unsigned int *v22; // r1@33
  unsigned int v23; // r2@35
  __int64 v24; // r2@38
  __int64 v25; // kr00_8@38
  int v26; // r1@38
  unsigned int *v27; // r2@43
  unsigned int v28; // r1@45
  unsigned int result; // r0@52
  int v30; // [sp+4h] [bp-4Ch]@25
  int v31; // [sp+Ch] [bp-44h]@31
  int v32; // [sp+10h] [bp-40h]@38
  void (__fastcall *v33)(_DWORD, _DWORD, _DWORD); // [sp+14h] [bp-3Ch]@30
  int v34; // [sp+18h] [bp-38h]@31
  void *v35; // [sp+1Ch] [bp-34h]@38
  void (*v36)(void); // [sp+24h] [bp-2Ch]@32
  Social::XboxProfile *(__fastcall *v37)(int *, int); // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(_DWORD *)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_DWORD *)(v3 + 248);
  v30 = v11;
      v17 = __ldrex(v12);
    while ( __strex(v17 + 1, v12) );
  v33 = 0;
  v18 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  v19 = 0;
  if ( v18 )
    v18(&v31, v4, 2);
    v34 = *(_DWORD *)(v4 + 12);
    v19 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v4 + 8);
    v33 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v4 + 8);
  v36 = 0;
  v20 = operator new(0x18u);
  *(_DWORD *)v20 = v30;
  *((_DWORD *)v20 + 1) = v5;
  if ( v5 )
    v22 = (unsigned int *)(v5 + 8);
        v23 = __ldrex(v22);
      while ( __strex(v23 + 1, v22) );
      v21 = *((_DWORD *)v20 + 5);
      v19 = v33;
      ++*v22;
  v24 = *(_QWORD *)&v31;
  v25 = *((_QWORD *)v20 + 1);
  v31 = *((_QWORD *)v20 + 1);
  v32 = HIDWORD(v25);
  *((_QWORD *)v20 + 1) = v24;
  v26 = v34;
  *((_DWORD *)v20 + 4) = v19;
  v34 = v21;
  *((_DWORD *)v20 + 5) = v26;
  v35 = v20;
  v36 = (void (*)(void))sub_106B154;
  v37 = sub_106AD64;
  Social::XboxLiveUserInfo::_getProfile(v16, v6, (int)&v35);
  if ( v36 )
    v36();
  if ( v33 )
    v33(&v31, &v31, 3);
    v27 = (unsigned int *)(v5 + 8);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 == 1 )
      (*(void (**)(void))(*(_DWORD *)v5 + 12))();
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


void __fastcall Social::GameConnectionInfo::toJson(Social::GameConnectionInfo *this, web::json::value *a2)
{
  web::json::value *v2; // r5@1
  Social::GameConnectionInfo *v3; // r4@1
  int *v4; // r6@1
  void *v5; // r0@3
  void *v6; // r0@4
  int *v7; // r6@5
  void *v8; // r0@7
  int *v9; // r6@8
  void *v10; // r0@10
  int *v11; // r5@11
  void *v12; // r0@13
  void *v13; // r0@14
  unsigned int *v14; // r2@16
  signed int v15; // r1@18
  unsigned int *v16; // r2@20
  signed int v17; // r1@22
  unsigned int *v18; // r2@24
  signed int v19; // r1@26
  unsigned int *v20; // r2@28
  signed int v21; // r1@30
  unsigned int *v22; // r2@32
  signed int v23; // r1@34
  unsigned int *v24; // r2@36
  signed int v25; // r1@38
  int v26; // [sp+4h] [bp-4Ch]@11
  int v27; // [sp+8h] [bp-48h]@11
  int v28; // [sp+10h] [bp-40h]@11
  int v29; // [sp+14h] [bp-3Ch]@8
  int v30; // [sp+1Ch] [bp-34h]@8
  int v31; // [sp+20h] [bp-30h]@5
  int v32; // [sp+28h] [bp-28h]@5
  int v33; // [sp+2Ch] [bp-24h]@1
  int v34; // [sp+30h] [bp-20h]@1
  int v35; // [sp+38h] [bp-18h]@1

  v2 = a2;
  v3 = this;
  sub_21E94B4((void **)&v35, "HostIpAddress");
  v4 = (int *)web::json::value::operator[]((int)v2);
  utility::conversions::to_string_t(&v33, (int *)v3 + 1);
  web::json::value::string(&v34, &v33);
  web::json::value::operator=(v4, &v34);
  if ( v34 )
    (*(void (**)(void))(*(_DWORD *)v34 + 96))();
  v34 = 0;
  v5 = (void *)(v33 - 12);
  if ( (int *)(v33 - 12) != &dword_28898C0 )
  {
    v14 = (unsigned int *)(v33 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
    }
    else
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j__ZdlPv_9(v5);
  }
  v6 = (void *)(v35 - 12);
  if ( (int *)(v35 - 12) != &dword_28898C0 )
    v16 = (unsigned int *)(v35 - 4);
        v17 = __ldrex(v16);
      while ( __strex(v17 - 1, v16) );
      v17 = (*v16)--;
    if ( v17 <= 0 )
      j_j_j_j__ZdlPv_9(v6);
  sub_21E94B4((void **)&v32, "ConnectionType");
  v7 = (int *)web::json::value::operator[]((int)v2);
  web::json::value::value((web::json::value *)&v31, *(_WORD *)v3);
  web::json::value::operator=(v7, &v31);
  if ( v31 )
    (*(void (**)(void))(*(_DWORD *)v31 + 96))();
  v31 = 0;
  v8 = (void *)(v32 - 12);
  if ( (int *)(v32 - 12) != &dword_28898C0 )
    v18 = (unsigned int *)(v32 - 4);
        v19 = __ldrex(v18);
      while ( __strex(v19 - 1, v18) );
      v19 = (*v18)--;
    if ( v19 <= 0 )
      j_j_j_j__ZdlPv_9(v8);
  sub_21E94B4((void **)&v30, "HostPort");
  v9 = (int *)web::json::value::operator[]((int)v2);
  web::json::value::value((web::json::value *)&v29, *((_DWORD *)v3 + 3));
  web::json::value::operator=(v9, &v29);
  if ( v29 )
    (*(void (**)(void))(*(_DWORD *)v29 + 96))();
  v29 = 0;
  v10 = (void *)(v30 - 12);
  if ( (int *)(v30 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v30 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v10);
  sub_21E94B4((void **)&v28, "RakNetGUID");
  v11 = (int *)web::json::value::operator[]((int)v2);
  utility::conversions::to_string_t(&v26, (int *)v3 + 4);
  web::json::value::string(&v27, &v26);
  web::json::value::operator=(v11, &v27);
  if ( v27 )
    (*(void (**)(void))(*(_DWORD *)v27 + 96))();
  v27 = 0;
  v12 = (void *)(v26 - 12);
  if ( (int *)(v26 - 12) != &dword_28898C0 )
    v22 = (unsigned int *)(v26 - 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 <= 0 )
      j_j_j_j__ZdlPv_9(v12);
  v13 = (void *)(v28 - 12);
  if ( (int *)(v28 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v28 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j__ZdlPv_9(v13);
}


Social::MultiplayerXBL *__fastcall Social::MultiplayerXBL::~MultiplayerXBL(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10
  int v7; // r1@15
  void *v8; // r0@15
  int v9; // r1@16
  int v10; // r2@16
  int v11; // r3@16
  int v12; // r7@16
  __int64 v13; // kr00_8@16
  int v14; // r12@16
  void *v15; // r0@16
  unsigned int v16; // r6@17
  unsigned int v17; // r1@17
  unsigned int v18; // r7@18
  void *v19; // t1@19
  unsigned int *v21; // r2@23
  signed int v22; // r1@25
  int v23; // [sp+4h] [bp-34h]@16
  __int64 v24; // [sp+8h] [bp-30h]@16
  int v25; // [sp+10h] [bp-28h]@16
  int v26; // [sp+14h] [bp-24h]@16
  int v27; // [sp+18h] [bp-20h]@16
  int v28; // [sp+1Ch] [bp-1Ch]@16
  int v29; // [sp+20h] [bp-18h]@16

  v1 = this;
  *(_DWORD *)this = &off_26DE848;
  *((_DWORD *)this + 1) = &off_26DE93C;
  v2 = *((_DWORD *)this + 113);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  v7 = *((_DWORD *)v1 + 109);
  v8 = (void *)(v7 - 12);
  if ( (int *)(v7 - 12) != &dword_28898C0 )
    v21 = (unsigned int *)(v7 - 4);
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
      v22 = (*v21)--;
    if ( v22 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v8);
  Realms::World::~World((Social::MultiplayerXBL *)((char *)v1 + 360));
  v9 = *((_DWORD *)v1 + 82);
  v10 = *((_DWORD *)v1 + 83);
  v11 = *((_DWORD *)v1 + 84);
  v12 = *((_DWORD *)v1 + 85);
  v13 = *((_QWORD *)v1 + 43);
  v14 = *((_DWORD *)v1 + 88);
  v26 = *((_DWORD *)v1 + 81);
  v27 = v9;
  v28 = v10;
  v29 = v11;
  v23 = v12;
  v24 = v13;
  v25 = v14;
  std::deque<std::function<void ()(void)>,std::allocator<std::function<void ()(void)>>>::_M_destroy_data_aux(
    (int)v1 + 316,
    (int)&v26,
    (int)&v23);
  v15 = (void *)*((_DWORD *)v1 + 79);
  if ( v15 )
    v16 = *((_DWORD *)v1 + 88);
    v17 = *((_DWORD *)v1 + 84);
    if ( v17 < v16 + 4 )
      v18 = v17 - 4;
        v19 = *(void **)(v18 + 4);
        v18 += 4;
        operator delete(v19);
      while ( v18 < v16 );
      v15 = (void *)*((_DWORD *)v1 + 79);
    operator delete(v15);
  Social::MultiplayerService::~MultiplayerService(v1);
  return v1;
}


unsigned int *__fastcall Social::XboxLiveUserManager::_getUserProfileDataWithXuid(int a1, int a2, int **a3)
{
  int v3; // r5@1
  unsigned __int64 *v4; // r7@1
  int *v5; // r6@1
  int v6; // r4@1
  int v7; // r0@1
  unsigned int *result; // r0@2
  unsigned int v9; // r1@5
  int v10; // r8@7
  int v11; // r10@7
  int v12; // r9@7
  unsigned int *v13; // r0@9
  unsigned int v14; // r1@11
  unsigned int *v15; // r1@16
  unsigned int v16; // r0@18
  unsigned int *v17; // r7@22
  unsigned int v18; // r0@24
  __int64 v19; // r0@30
  int v20; // r5@33
  unsigned int v21; // r1@36
  unsigned int *v22; // r1@40
  unsigned int *v23; // r4@46
  int *v24; // [sp+4h] [bp-2Ch]@7
  int v25; // [sp+8h] [bp-28h]@7

  v3 = a2;
  v4 = (unsigned __int64 *)(a2 + 80);
  v5 = (int *)a3;
  v6 = a1;
  v7 = std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a2 + 80),
         a3);
  if ( v7 )
  {
    *(_DWORD *)v6 = *(_DWORD *)(v7 + 8);
    result = *(unsigned int **)(v7 + 12);
    *(_DWORD *)(v6 + 4) = result;
    if ( result )
    {
      result += 2;
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(result);
        while ( __strex(v9 + 1, result) );
      }
      else
        ++*result;
    }
  }
  else
    j__ZNSt12__shared_ptrIN6Social23XboxLiveUserProfileDataELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS1_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)&v24);
    EntityInteraction::setInteractText(v24, v5);
    v10 = std::__detail::_Map_base<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>,true>::operator[](
            v4,
            (int **)v5);
    *(_DWORD *)v10 = v24;
    v11 = *(_DWORD *)(v10 + 4);
    v12 = v25;
    if ( v25 != v11 )
      if ( v25 )
        v13 = (unsigned int *)(v25 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 + 1, v13) );
          v11 = *(_DWORD *)(v10 + 4);
        }
        else
          ++*v13;
      if ( v11 )
        v15 = (unsigned int *)(v11 + 4);
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
          v16 = (*v15)--;
        if ( v16 == 1 )
          v17 = (unsigned int *)(v11 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 8))(v11);
          if ( &pthread_create )
          {
            __dmb();
            do
              v18 = __ldrex(v17);
            while ( __strex(v18 - 1, v17) );
          }
          else
            v18 = (*v17)--;
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 12))(v11);
      *(_DWORD *)(v10 + 4) = v12;
    v19 = *(_QWORD *)(v3 + 112);
    if ( (_DWORD)v19 == HIDWORD(v19) )
      std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<std::string const&>(
        (unsigned __int64 *)(v3 + 108),
        v5);
    else
      sub_119C854((int *)v19, v5);
      *(_DWORD *)(v3 + 112) += 4;
    v20 = v25;
    result = (unsigned int *)v24;
    *(_DWORD *)v6 = v24;
    *(_DWORD *)(v6 + 4) = v20;
    if ( v20 )
      result = (unsigned int *)(v20 + 8);
          v21 = __ldrex(result);
        while ( __strex(v21 + 1, result) );
        v20 = v25;
        if ( !v25 )
          return result;
      v22 = (unsigned int *)(v20 + 4);
          result = (unsigned int *)__ldrex(v22);
        while ( __strex((unsigned int)result - 1, v22) );
        result = (unsigned int *)(*v22)--;
      if ( result == (unsigned int *)1 )
        v23 = (unsigned int *)(v20 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v20 + 8))(v20);
            result = (unsigned int *)__ldrex(v23);
          while ( __strex((unsigned int)result - 1, v23) );
          result = (unsigned int *)(*v23)--;
        if ( result == (unsigned int *)1 )
          result = (unsigned int *)(*(int (__fastcall **)(int))(*(_DWORD *)v20 + 12))(v20);
  return result;
}


void __fastcall Social::MultiplayerXBL::onConnectionStateChanged(int a1, const char **a2, const char **a3, int a4, int a5, int a6, const char **a7)
{
  MinecraftEventing::fireEventMultiplayerConnectionStateChanged(
    *(_DWORD *)(a1 + 48),
    *(_BYTE *)(a1 + 176),
    a2,
    a3,
    a4,
    a5,
    a6,
    a7);
}


void __fastcall Social::MultiplayerServiceManager::sendRealmsWhitelistNotification(unsigned __int64 *a1, __int64 *a2)
{
  Social::MultiplayerServiceManager::sendRealmsWhitelistNotification(a1, a2);
}


void __fastcall Social::XboxLiveUserManager::updateRichPresence(int a1, int *a2)
{
  Social::XboxLiveUserManager::updateRichPresence(a1, a2);
}


int __fastcall Social::RealmsUriListener::RealmsUriListener(int result, int a2)
{
  int v2; // r1@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r2@4

  *(_DWORD *)result = &off_26DEB7C;
  *(_DWORD *)(result + 4) = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(result + 8) = v2;
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 + 1, v3) );
    }
    else
      ++*v3;
  }
  return result;
}


int __fastcall Social::UserManager::updateMapping(int result, bool a2)
{
  *(_BYTE *)(result + 73) = a2;
  *(_DWORD *)(result + 76) = *(_DWORD *)(result + 44);
  return result;
}


int __fastcall Social::Events::XboxLiveTelemetry::sendEvent(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r0@2
  int *v6; // r0@3
  void *v7; // r0@3
  int v8; // r4@4
  unsigned int *v9; // r1@5
  unsigned int v10; // r0@7
  unsigned int *v11; // r5@11
  unsigned int v12; // r0@13
  int v13; // r4@18
  unsigned int *v14; // r1@19
  unsigned int v15; // r0@21
  unsigned int *v16; // r5@25
  unsigned int v17; // r0@27
  void *v18; // r0@32
  int result; // r0@35
  unsigned int *v20; // r2@38
  signed int v21; // r1@40
  unsigned int *v22; // r2@46
  signed int v23; // r1@48
  char v24; // [sp+8h] [bp-60h]@3
  int v25; // [sp+10h] [bp-58h]@3
  xbox::services::xbox_live_context *v26; // [sp+14h] [bp-54h]@2
  int v27; // [sp+18h] [bp-50h]@4
  Social::User *v28; // [sp+1Ch] [bp-4Ch]@1
  int v29; // [sp+20h] [bp-48h]@18
  int v30; // [sp+24h] [bp-44h]@1
  char v31; // [sp+28h] [bp-40h]@1
  int v32; // [sp+3Ch] [bp-2Ch]@1
  char v33; // [sp+40h] [bp-28h]@1
  int v34; // [sp+50h] [bp-18h]@1

  v2 = a1;
  v3 = a2;
  Social::Events::Event::propertiesAsJsonValue((Json::Value *)&v33, a2);
  Social::Events::convertJsonTypes((web::json::value *)&v34, (Json::Value *)&v33);
  Json::Value::~Value((Json::Value *)&v33);
  Social::Events::Event::measurementsAsJsonValue((Json::Value *)&v31, v3);
  Social::Events::convertJsonTypes((web::json::value *)&v32, (Json::Value *)&v31);
  Json::Value::~Value((Json::Value *)&v31);
  utility::conversions::to_string_t(&v30, (int *)(v3 + 4));
  v4 = Social::Events::Event::getUserId(v3);
  Social::UserManager::getUserFromUserId((Social::UserManager *)&v28, *(_DWORD *)(v2 + 96), v4);
  if ( v28 )
  {
    v5 = Social::User::getLiveUser(v28);
    Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v26, v5);
    if ( v26 )
    {
      v6 = (int *)xbox::services::xbox_live_context::events_service(v26);
      xbox::services::events::events_service::write_in_game_event((int)&v24, v6, (const char **)&v30, &v34, &v32);
      v7 = (void *)(v25 - 12);
      if ( (int *)(v25 - 12) != &dword_28898C0 )
      {
        v22 = (unsigned int *)(v25 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v23 = __ldrex(v22);
          while ( __strex(v23 - 1, v22) );
        }
        else
          v23 = (*v22)--;
        if ( v23 <= 0 )
          j_j_j_j__ZdlPv_9(v7);
      }
    }
    v8 = v27;
    if ( v27 )
      v9 = (unsigned int *)(v27 + 4);
      if ( &pthread_create )
        __dmb();
        do
          v10 = __ldrex(v9);
        while ( __strex(v10 - 1, v9) );
      else
        v10 = (*v9)--;
      if ( v10 == 1 )
        v11 = (unsigned int *)(v8 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
            v12 = __ldrex(v11);
          while ( __strex(v12 - 1, v11) );
          v12 = (*v11)--;
        if ( v12 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  }
  v13 = v29;
  if ( v29 )
    v14 = (unsigned int *)(v29 + 4);
    if ( &pthread_create )
      __dmb();
      do
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
    else
      v15 = (*v14)--;
    if ( v15 == 1 )
      v16 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v18 = (void *)(v30 - 12);
  if ( (int *)(v30 - 12) != &dword_28898C0 )
    v20 = (unsigned int *)(v30 - 4);
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j__ZdlPv_9(v18);
  if ( v32 )
    (*(void (**)(void))(*(_DWORD *)v32 + 96))();
  result = v34;
  if ( v34 )
    result = (*(int (**)(void))(*(_DWORD *)v34 + 96))();
  return result;
}


unsigned int __fastcall Social::XboxLiveUserManager::unBlockUser(int a1, int *a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  int *v6; // r7@1
  unsigned int v7; // r1@2
  unsigned int *v8; // r0@2
  unsigned int v9; // r2@5
  unsigned int v10; // r3@6
  void *v11; // r9@7
  unsigned int *v12; // r4@7
  unsigned int v13; // r1@9
  unsigned int v14; // r1@14
  unsigned int v15; // r0@20
  __int64 v16; // kr00_8@25
  unsigned int *v17; // r1@26
  unsigned int v18; // r2@28
  char *v19; // r0@31
  unsigned int v20; // r0@33
  void (__fastcall *v21)(int *, int, signed int); // r3@36
  int v22; // r5@38
  unsigned int *v23; // r1@39
  unsigned int v24; // r0@41
  unsigned int *v25; // r6@45
  unsigned int v26; // r0@47
  void *v27; // r0@54
  int v28; // r0@55
  unsigned int *v29; // r2@56
  unsigned int v30; // r1@58
  void *v31; // r6@63
  unsigned int *v32; // r1@64
  unsigned int v33; // r0@66
  unsigned int *v34; // r5@70
  unsigned int v35; // r0@72
  unsigned int *v36; // r1@78
  unsigned int v37; // r0@80
  unsigned int *v38; // r5@84
  unsigned int v39; // r0@86
  unsigned int result; // r0@93
  unsigned int *v41; // r2@99
  signed int v42; // r1@101
  void *v43; // [sp+0h] [bp-50h]@31
  int v44; // [sp+4h] [bp-4Ch]@31
  int v45; // [sp+8h] [bp-48h]@36
  int v46; // [sp+Ch] [bp-44h]@37
  int v47; // [sp+10h] [bp-40h]@38
  int v48; // [sp+14h] [bp-3Ch]@36
  int v49; // [sp+18h] [bp-38h]@37
  char v50; // [sp+1Ch] [bp-34h]@31
  void *v51; // [sp+20h] [bp-30h]@38
  char v52; // [sp+24h] [bp-2Ch]@38
  int v53; // [sp+28h] [bp-28h]@38

  v3 = a1;
  v4 = a3;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = a2;
  if ( !v5 )
    std::__throw_bad_weak_ptr();
  v7 = *(_DWORD *)(v5 + 4);
  v8 = (unsigned int *)(v5 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v7 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v9 = __ldrex(v8);
      if ( v9 == v7 )
        break;
      __clrex();
      v7 = v9;
    }
    v10 = __strex(v7 + 1, v8);
    v7 = v9;
  }
  while ( v10 );
  __dmb();
  v11 = *(void **)(v3 + 8);
  v12 = (unsigned int *)(v5 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  else
    ++*v12;
      v14 = __ldrex(v8);
    while ( __strex(v14 - 1, v8) );
    v14 = (*v8)--;
  if ( v14 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    if ( &pthread_create )
      do
        v15 = __ldrex(v12);
      while ( __strex(v15 - 1, v12) );
    else
      v15 = (*v12)--;
    if ( v15 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  v16 = *(_QWORD *)(v3 + 144);
  if ( HIDWORD(v16) )
    v17 = (unsigned int *)(HIDWORD(v16) + 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 + 1, v17) );
      ++*v17;
  v19 = xbox::services::xbox_live_context::privacy_service((xbox::services::xbox_live_context *)v16);
  xbox::services::privacy::privacy_service::unblock_user((int)&v50, (int)v19, v6);
  v43 = v11;
  v44 = v5;
      v20 = __ldrex(v12);
    while ( __strex(v20 + 1, v12) );
  sub_119C854(&v45, v6);
  v48 = 0;
  v21 = *(void (__fastcall **)(int *, int, signed int))(v4 + 8);
  if ( v21 )
    v21(&v46, v4, 2);
    v49 = *(_DWORD *)(v4 + 12);
    v48 = *(_DWORD *)(v4 + 8);
  sub_103FA0C((int)&v52, (int)&v50, (int)&v43, (int)v21, v43, v44, v45, v46, v47, v48, v49, *(int *)&v50, v51);
  v22 = v53;
  if ( v53 )
    v23 = (unsigned int *)(v53 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v22 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
      if ( &pthread_create )
      {
        __dmb();
        do
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
      }
      else
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
  if ( v48 )
    ((void (*)(void))v48)();
  v27 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v45 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v27);
  v28 = v44;
  if ( v44 )
    v29 = (unsigned int *)(v44 + 8);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 == 1 )
      (*(void (**)(void))(*(_DWORD *)v28 + 12))();
  v31 = v51;
  if ( v51 )
    v32 = (unsigned int *)((char *)v51 + 4);
        v33 = __ldrex(v32);
      while ( __strex(v33 - 1, v32) );
      v33 = (*v32)--;
    if ( v33 == 1 )
      v34 = (unsigned int *)((char *)v31 + 8);
      (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 8))(v31);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 == 1 )
        (*(void (__fastcall **)(void *))(*(_DWORD *)v31 + 12))(v31);
    v36 = (unsigned int *)(HIDWORD(v16) + 4);
        v37 = __ldrex(v36);
      while ( __strex(v37 - 1, v36) );
      v37 = (*v36)--;
    if ( v37 == 1 )
      v38 = (unsigned int *)(HIDWORD(v16) + 8);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 8))(HIDWORD(v16));
          v39 = __ldrex(v38);
        while ( __strex(v39 - 1, v38) );
        v39 = (*v38)--;
      if ( v39 == 1 )
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)HIDWORD(v16) + 12))(HIDWORD(v16));
      result = __ldrex(v12);
    while ( __strex(result - 1, v12) );
    result = (*v12)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


char *__fastcall Social::Events::EventManager::getCommonProperties(Social::Events::EventManager *this)
{
  return (char *)this + 40;
}


int __fastcall Social::XboxLiveUserInfo::_getXboxLiveBlockList(Social::XboxLiveUserInfo *this, int a2)
{
  int v2; // r9@1
  Social::XboxLiveUserInfo *v3; // r10@1
  int v4; // r9@2
  pthread_mutex_t *v5; // r4@3
  int v6; // r0@4
  _DWORD *v7; // r8@5
  _DWORD *v8; // t1@5
  _DWORD *v9; // r11@5
  char *v10; // r1@6
  _DWORD *v11; // r7@6
  unsigned int *v12; // r2@7
  signed int v13; // r6@9
  char *v14; // r6@13
  int *v15; // r0@14
  char v17; // [sp+8h] [bp-28h]@6

  v2 = a2;
  v3 = this;
  if ( Social::XboxLiveUserManager::isSignedIn(*(Social::XboxLiveUserManager **)(a2 + 8)) == 1 )
  {
    v4 = v2 + 48;
  }
  else
    v5 = (pthread_mutex_t *)(v2 + 64);
    if ( &pthread_create )
    {
      v6 = pthread_mutex_lock((pthread_mutex_t *)(v2 + 64));
      if ( v6 )
        sub_21E5E14(v6);
    }
    v8 = *(_DWORD **)(v2 + 48);
    v7 = v8;
    *(_DWORD *)v4 = 0;
    v9 = *(_DWORD **)(v4 + 4);
    *(_DWORD *)(v4 + 8) = 0;
    *(_DWORD *)(v4 + 4) = 0;
    if ( v8 != v9 )
      v10 = &v17;
      v11 = v7;
      do
      {
        v15 = (int *)(*v11 - 12);
        if ( v15 != &dword_28898C0 )
        {
          v12 = (unsigned int *)(*v11 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v13 = __ldrex(v12);
            while ( __strex(v13 - 1, v12) );
          }
          else
            v13 = (*v12)--;
          if ( v13 <= 0 )
            v14 = v10;
            j_j_j_j__ZdlPv_9(v15);
            v10 = v14;
        }
        ++v11;
      }
      while ( v11 != v9 );
    if ( v7 )
      operator delete(v7);
      pthread_mutex_unlock(v5);
  return std::vector<std::string,std::allocator<std::string>>::vector((int)v3, (unsigned __int64 *)v4);
}


char *__fastcall Social::MultiplayerService::getInviteHandle(Social::MultiplayerService *this)
{
  return (char *)this + 80;
}


unsigned int __fastcall Social::XboxLiveUserManager::RefreshXboxLiveUserInfo(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r10@1
  int v4; // r9@1
  unsigned int v5; // r1@2
  unsigned int *v6; // r0@2
  unsigned int v7; // r2@5
  unsigned int v8; // r3@6
  int v9; // r4@7
  unsigned int *v10; // r7@7
  unsigned int v11; // r1@9
  unsigned int v12; // r1@14
  unsigned int v13; // r0@20
  int v14; // r8@25
  unsigned int v15; // r0@27
  void (__fastcall *v16)(int *, int, signed int); // r3@30
  void (__fastcall *v17)(_DWORD, _DWORD, _DWORD); // r4@30
  void *v18; // r0@32
  int v19; // r12@32
  unsigned int *v20; // r1@33
  unsigned int v21; // r2@35
  __int64 v22; // r2@38
  __int64 v23; // kr00_8@38
  int v24; // r1@38
  unsigned int *v25; // r2@43
  unsigned int v26; // r1@45
  unsigned int result; // r0@52
  int v28; // [sp+0h] [bp-48h]@25
  int v29; // [sp+8h] [bp-40h]@31
  int v30; // [sp+Ch] [bp-3Ch]@38
  void (__fastcall *v31)(_DWORD, _DWORD, _DWORD); // [sp+10h] [bp-38h]@30
  int v32; // [sp+14h] [bp-34h]@31
  void *v33; // [sp+18h] [bp-30h]@38
  void (*v34)(void); // [sp+20h] [bp-28h]@32
  int (__fastcall *v35)(int); // [sp+24h] [bp-24h]@38

  v2 = a1;
  v3 = a2;
  v4 = *(_DWORD *)(a1 + 12);
  if ( !v4 )
    std::__throw_bad_weak_ptr();
  v5 = *(_DWORD *)(v4 + 4);
  v6 = (unsigned int *)(v4 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v5 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v7 = __ldrex(v6);
      if ( v7 == v5 )
        break;
      __clrex();
      v5 = v7;
    }
    v8 = __strex(v5 + 1, v6);
    v5 = v7;
  }
  while ( v8 );
  __dmb();
  v9 = *(_DWORD *)(v2 + 8);
  v10 = (unsigned int *)(v4 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v11 = __ldrex(v10);
    while ( __strex(v11 + 1, v10) );
  else
    ++*v10;
      v12 = __ldrex(v6);
    while ( __strex(v12 - 1, v6) );
    v12 = (*v6)--;
  if ( v12 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
    if ( &pthread_create )
      do
        v13 = __ldrex(v10);
      while ( __strex(v13 - 1, v10) );
    else
      v13 = (*v10)--;
    if ( v13 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  v14 = *(_DWORD *)(v2 + 248);
  v28 = v9;
      v15 = __ldrex(v10);
    while ( __strex(v15 + 1, v10) );
  v31 = 0;
  v16 = *(void (__fastcall **)(int *, int, signed int))(v3 + 8);
  v17 = 0;
  if ( v16 )
    v16(&v29, v3, 2);
    v32 = *(_DWORD *)(v3 + 12);
    v17 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v3 + 8);
    v31 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD))(v3 + 8);
  v34 = 0;
  v18 = operator new(0x18u);
  *(_DWORD *)v18 = v28;
  *((_DWORD *)v18 + 1) = v4;
  if ( v4 )
    v20 = (unsigned int *)(v4 + 8);
        v21 = __ldrex(v20);
      while ( __strex(v21 + 1, v20) );
      v19 = *((_DWORD *)v18 + 5);
      v17 = v31;
      ++*v20;
  v22 = *(_QWORD *)&v29;
  v23 = *((_QWORD *)v18 + 1);
  v29 = *((_QWORD *)v18 + 1);
  v30 = HIDWORD(v23);
  *((_QWORD *)v18 + 1) = v22;
  v24 = v32;
  *((_DWORD *)v18 + 4) = v17;
  v32 = v19;
  *((_DWORD *)v18 + 5) = v24;
  v33 = v18;
  v34 = (void (*)(void))sub_1058BE0;
  v35 = sub_10588BC;
  Social::XboxLiveUserInfo::_refresh(v14, (int)&v33);
  if ( v34 )
    v34();
  if ( v31 )
    v31(&v29, &v29, 3);
    v25 = (unsigned int *)(v4 + 8);
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
      v26 = (*v25)--;
    if ( v26 == 1 )
      (*(void (**)(void))(*(_DWORD *)v4 + 12))();
      result = __ldrex(v10);
    while ( __strex(result - 1, v10) );
    result = (*v10)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  return result;
}


signed int __fastcall Social::MultiplayerXBL::_isServiceAvailable(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  Social::XboxLiveUserManager *v2; // r0@1
  Social::XboxLiveUserManager *v3; // r0@2
  signed int v4; // r4@2
  int v5; // r5@2
  unsigned int *v6; // r1@3
  unsigned int v7; // r0@5
  unsigned int *v8; // r6@10
  unsigned int v9; // r0@12
  int v10; // r5@17
  unsigned int *v11; // r1@18
  unsigned int v12; // r0@20
  unsigned int *v13; // r6@24
  unsigned int v14; // r0@26
  Social::User *v16; // [sp+0h] [bp-20h]@2
  int v17; // [sp+4h] [bp-1Ch]@2
  Social::User *v18; // [sp+8h] [bp-18h]@1
  int v19; // [sp+Ch] [bp-14h]@17

  v1 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v18, *((_DWORD *)this + 11));
  v2 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v18);
  if ( Social::XboxLiveUserManager::isSignedIn(v2) == 1 )
  {
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v16, *((_DWORD *)v1 + 11));
    v3 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v16);
    v4 = Social::XboxLiveUserManager::checkPrivilegeSilently(v3, 254);
    v5 = v17;
    if ( v17 )
    {
      v6 = (unsigned int *)(v17 + 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        v8 = (unsigned int *)(v5 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
        if ( &pthread_create )
        {
          __dmb();
          do
            v9 = __ldrex(v8);
          while ( __strex(v9 - 1, v8) );
        }
        else
          v9 = (*v8)--;
        if ( v9 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
    }
  }
  else
    v4 = 0;
  v10 = v19;
  if ( v19 )
    v11 = (unsigned int *)(v19 + 4);
    if ( &pthread_create )
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
    else
      v12 = (*v11)--;
    if ( v12 == 1 )
      v13 = (unsigned int *)(v10 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  return v4;
}


void __fastcall Social::InviteUriListener::onUri(int a1, int a2)
{
  Social::InviteUriListener::onUri(a1, a2);
}


void __fastcall Social::MultiplayerXBL::joinGame(int a1, int *a2, int a3)
{
  Social::MultiplayerXBL::joinGame(a1, a2, a3);
}


signed int __fastcall Social::MultiplayerServiceManager::hasID(_QWORD *a1)
{
  int *v1; // r5@1 OVERLAPPED
  int *v2; // r6@1 OVERLAPPED
  int v3; // t1@2
  signed int result; // r0@4

  *(_QWORD *)&v1 = *a1;
  if ( v1 == v2 )
  {
    result = 0;
  }
  else
    while ( 1 )
    {
      v3 = *v1;
      ++v1;
      if ( (*(int (**)(void))(*(_DWORD *)v3 + 100))() == 1 )
        break;
      if ( v2 == v1 )
        return 0;
    }
    result = 1;
  return result;
}


NetworkHandler *__fastcall Social::MultiplayerServiceManager::initialize(NetworkHandler *a1, int a2, int a3, int a4, NetworkHandler *a5)
{
  int v5; // r6@1
  int v6; // r4@1
  int v7; // r8@1
  int v8; // r10@1
  int i; // r11@1
  int v10; // r7@2
  void (__fastcall *v11)(int, int, int, char *); // r9@2
  void (__fastcall *v12)(char *, int, signed int); // r3@2
  NetworkHandler *result; // r0@7
  NetworkHandler *v14; // [sp+8h] [bp-38h]@1
  char v15; // [sp+Ch] [bp-34h]@3
  void (__fastcall *v16)(char *, char *, signed int); // [sp+14h] [bp-2Ch]@2
  int v17; // [sp+18h] [bp-28h]@3

  v14 = a1;
  v5 = a4;
  v7 = *(_QWORD *)a1 >> 32;
  v6 = *(_QWORD *)a1;
  v8 = a3;
  for ( i = a2; v7 != v6; v6 += 4 )
  {
    v10 = *(_DWORD *)v6;
    v11 = *(void (__fastcall **)(int, int, int, char *))(**(_DWORD **)v6 + 12);
    v16 = 0;
    v12 = *(void (__fastcall **)(char *, int, signed int))(v5 + 8);
    if ( v12 )
    {
      v12(&v15, v5, 2);
      v17 = *(_DWORD *)(v5 + 12);
      v16 = *(void (__fastcall **)(char *, char *, signed int))(v5 + 8);
    }
    v11(v10, i, v8, &v15);
    if ( v16 )
      v16(&v15, &v15, 3);
  }
  result = a5;
  if ( a5 )
    result = (NetworkHandler *)NetworkHandler::getUPnPInterface(a5);
    *((_DWORD *)v14 + 9) = result;
  return result;
}


Social::UserManager *__fastcall Social::UserManager::~UserManager(Social::UserManager *this)
{
  Social::UserManager *v1; // r9@1
  __int64 v2; // kr00_8@1
  int v3; // r4@2
  int v4; // r6@3
  unsigned int *v5; // r1@4
  unsigned int v6; // r0@6
  unsigned int *v7; // r5@10
  unsigned int v8; // r0@12
  char *v9; // r4@18
  char *v10; // r5@18
  int v11; // r1@23
  int v12; // r2@23
  int v13; // r3@23
  int v14; // r7@23
  __int64 v15; // kr10_8@23
  int v16; // r4@23
  void *v17; // r0@23
  unsigned int v18; // r4@24
  unsigned int v19; // r1@24
  unsigned int v20; // r6@25
  void *v21; // t1@26
  int v22; // r4@29
  int v23; // r5@29
  void (__fastcall *v24)(int, int, signed int); // r3@30
  int v25; // r4@36
  int v26; // r5@36
  void (__fastcall *v27)(int, int, signed int); // r3@37
  int v28; // r5@43
  int v29; // r7@43
  int v30; // r4@44
  unsigned int *v31; // r1@45
  unsigned int v32; // r0@47
  unsigned int *v33; // r6@51
  unsigned int v34; // r0@53
  int v35; // r0@62
  int v36; // r1@63
  int v37; // r7@63
  Social::UserManager *v38; // r2@64
  int v39; // r3@65
  int v40; // r6@66
  bool v41; // zf@67
  Social::UserManager **v42; // r3@67
  Social::UserManager *v43; // r5@70
  bool v44; // zf@70
  int v45; // r3@75
  Social::UserManager *v46; // r7@88
  int v48; // [sp+0h] [bp-40h]@23
  __int64 v49; // [sp+4h] [bp-3Ch]@23
  int v50; // [sp+Ch] [bp-34h]@23
  int v51; // [sp+10h] [bp-30h]@23
  int v52; // [sp+14h] [bp-2Ch]@23
  int v53; // [sp+18h] [bp-28h]@23
  int v54; // [sp+1Ch] [bp-24h]@23

  v1 = this;
  *(_DWORD *)this = &off_26DEC78;
  v2 = *((_QWORD *)this + 1);
  if ( HIDWORD(v2) != (_DWORD)v2 )
  {
    v3 = v2;
    do
    {
      v4 = *(_DWORD *)(v3 + 4);
      if ( v4 )
      {
        v5 = (unsigned int *)(v4 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v6 = __ldrex(v5);
          while ( __strex(v6 - 1, v5) );
        }
        else
          v6 = (*v5)--;
        if ( v6 == 1 )
          v7 = (unsigned int *)(v4 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v8 = __ldrex(v7);
            while ( __strex(v8 - 1, v7) );
          }
          else
            v8 = (*v7)--;
          if ( v8 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
      }
      v3 += 8;
    }
    while ( v3 != HIDWORD(v2) );
  }
  *((_DWORD *)v1 + 3) = v2;
  v9 = (char *)(*(_QWORD *)((char *)v1 + 140) >> 32);
  v10 = (char *)*(_QWORD *)((char *)v1 + 140);
  if ( v10 != v9 )
      *(_DWORD *)(*(_DWORD *)v10 + 4) = 0;
      (*(void (**)(void))(**(_DWORD **)v10 + 8))();
      v10 += 4;
    while ( v9 != v10 );
    v10 = (char *)*((_DWORD *)v1 + 35);
  if ( v10 )
    operator delete(v10);
  v11 = *((_DWORD *)v1 + 24);
  v12 = *((_DWORD *)v1 + 25);
  v13 = *((_DWORD *)v1 + 26);
  v14 = *((_DWORD *)v1 + 27);
  v15 = *((_QWORD *)v1 + 14);
  v16 = *((_DWORD *)v1 + 30);
  v51 = *((_DWORD *)v1 + 23);
  v52 = v11;
  v53 = v12;
  v54 = v13;
  v48 = v14;
  v49 = v15;
  v50 = v16;
  std::deque<std::function<void ()(void)>,std::allocator<std::function<void ()(void)>>>::_M_destroy_data_aux(
    (int)v1 + 84,
    (int)&v51,
    (int)&v48);
  v17 = (void *)*((_DWORD *)v1 + 21);
  if ( v17 )
    v18 = *((_DWORD *)v1 + 30);
    v19 = *((_DWORD *)v1 + 26);
    if ( v19 < v18 + 4 )
      v20 = v19 - 4;
      do
        v21 = *(void **)(v20 + 4);
        v20 += 4;
        operator delete(v21);
      while ( v20 < v18 );
      v17 = (void *)*((_DWORD *)v1 + 21);
    operator delete(v17);
  std::_Rb_tree<int,std::pair<int const,std::shared_ptr<ClientInstance>>,std::_Select1st<std::pair<int const,std::shared_ptr<ClientInstance>>>,std::less<int>,std::allocator<std::pair<int const,std::shared_ptr<ClientInstance>>>>::_M_erase(
    (int)v1 + 48,
    *((_DWORD *)v1 + 14));
  v22 = *((_QWORD *)v1 + 4) >> 32;
  v23 = *((_QWORD *)v1 + 4);
  if ( v23 != v22 )
      v24 = *(void (__fastcall **)(int, int, signed int))(v23 + 8);
      if ( v24 )
        v24(v23, v23, 3);
      v23 += 16;
    while ( v22 != v23 );
    v23 = *((_DWORD *)v1 + 8);
  if ( v23 )
    operator delete((void *)v23);
  v25 = *(_QWORD *)((char *)v1 + 20) >> 32;
  v26 = *(_QWORD *)((char *)v1 + 20);
  if ( v26 != v25 )
      v27 = *(void (__fastcall **)(int, int, signed int))(v26 + 8);
      if ( v27 )
        v27(v26, v26, 3);
      v26 += 16;
    while ( v25 != v26 );
    v26 = *((_DWORD *)v1 + 5);
  if ( v26 )
    operator delete((void *)v26);
  v29 = *((_QWORD *)v1 + 1) >> 32;
  v28 = *((_QWORD *)v1 + 1);
  if ( v28 != v29 )
      v30 = *(_DWORD *)(v28 + 4);
      if ( v30 )
        v31 = (unsigned int *)(v30 + 4);
            v32 = __ldrex(v31);
          while ( __strex(v32 - 1, v31) );
          v32 = (*v31)--;
        if ( v32 == 1 )
          v33 = (unsigned int *)(v30 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 8))(v30);
              v34 = __ldrex(v33);
            while ( __strex(v34 - 1, v33) );
            v34 = (*v33)--;
          if ( v34 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v30 + 12))(v30);
      v28 += 8;
    while ( v28 != v29 );
    v28 = *((_DWORD *)v1 + 2);
  if ( v28 )
    operator delete((void *)v28);
  *(_DWORD *)v1 = &off_26DECFC;
  v35 = *((_DWORD *)v1 + 1);
  if ( v35 )
    v36 = *(_QWORD *)(v35 + 4) >> 32;
    v37 = *(_QWORD *)(v35 + 4);
    if ( v37 != v36 )
      v38 = *(Social::UserManager **)(v36 - 4);
      if ( v38 != v1 )
        v39 = (v36 - v37) >> 4;
        if ( v39 >= 1 )
          v40 = v39 + 1;
            v41 = *(_DWORD *)v37 == (_DWORD)v1;
            v42 = (Social::UserManager **)v37;
            if ( *(Social::UserManager **)v37 != v1 )
            {
              v42 = (Social::UserManager **)(v37 + 4);
              v41 = *(_DWORD *)(v37 + 4) == (_DWORD)v1;
            }
            if ( v41 )
              goto LABEL_88;
            v42 = (Social::UserManager **)(v37 + 8);
            v43 = *(Social::UserManager **)(v37 + 8);
            v44 = v43 == v1;
            if ( v43 != v1 )
              v42 = (Social::UserManager **)(v37 + 12);
              v44 = *(_DWORD *)(v37 + 12) == (_DWORD)v1;
            if ( v44 )
            --v40;
            v37 += 16;
          while ( v40 > 1 );
        if ( 1 == (v36 - v37) >> 2 )
          v42 = (Social::UserManager **)v37;
          goto LABEL_84;
        v45 = (v36 - v37) >> 2;
        if ( v45 == 2 )
          if ( v45 != 3 )
            v42 = (Social::UserManager **)(*(_QWORD *)(v35 + 4) >> 32);
            goto LABEL_88;
          if ( *(Social::UserManager **)v37 == v1 )
LABEL_88:
            v46 = *v42;
            *v42 = v38;
            *(_DWORD *)(v36 - 4) = v46;
            *(_DWORD *)(v35 + 8) -= 4;
            goto LABEL_89;
          v42 = (Social::UserManager **)(v37 + 4);
        if ( *v42 != v1 )
          ++v42;
LABEL_84:
          if ( *v42 != v1 )
          goto LABEL_88;
        goto LABEL_88;
      *(_DWORD *)(v35 + 8) = v36 - 4;
LABEL_89:
    *((_DWORD *)v1 + 1) = 0;
  return v1;
}


int __fastcall Social::MultiplayerServiceManager::setNetworkHandler(int result, NetworkHandler *a2)
{
  Social::MultiplayerService **v2; // r5@1 OVERLAPPED
  Social::MultiplayerService **v3; // r6@1 OVERLAPPED
  NetworkHandler *i; // r4@1
  Social::MultiplayerService *v5; // t1@2

  *(_QWORD *)&v2 = *(_QWORD *)result;
  for ( i = a2; v3 != v2; result = (int)Social::MultiplayerService::setNetworkHandler(v5, i) )
  {
    v5 = *v2;
    ++v2;
  }
  return result;
}


void __fastcall Social::MultiplayerService::~MultiplayerService(Social::MultiplayerService *this)
{
  Social::MultiplayerService::~MultiplayerService(this);
}


int __fastcall Social::MultiplayerServiceManager::setInRegionPage(int result, bool a2)
{
  int *v2; // r5@1 OVERLAPPED
  int *v3; // r6@1 OVERLAPPED
  int v4; // t1@2

  for ( *(_QWORD *)&v2 = *(_QWORD *)result; v3 != v2; result = (*(int (**)(void))(*(_DWORD *)v4 + 136))() )
  {
    v4 = *v2;
    ++v2;
  }
  return result;
}


int *__fastcall Social::XboxLiveUserProfileData::update(Social::XboxLiveUserProfileData *this, const Social::XboxProfile *a2)
{
  Social::XboxLiveUserProfileData *v2; // r4@1
  const Social::XboxProfile *v3; // r5@1
  int v4; // r3@1
  int v5; // r1@1
  int v6; // r2@1
  int *result; // r0@1
  int v8; // r0@2
  signed __int64 v9; // r2@2
  signed int v10; // r1@2

  v2 = this;
  v3 = a2;
  EntityInteraction::setInteractText((int *)this + 14, (int *)a2);
  EntityInteraction::setInteractText((int *)v2 + 15, (int *)v3 + 1);
  EntityInteraction::setInteractText((int *)v2 + 16, (int *)v3 + 2);
  EntityInteraction::setInteractText((int *)v2 + 17, (int *)v3 + 3);
  EntityInteraction::setInteractText((int *)v2 + 18, (int *)v3 + 4);
  v4 = (int)v2 + 76;
  v5 = *((_DWORD *)v3 + 6);
  v6 = *((_DWORD *)v3 + 7);
  *(_DWORD *)v4 = *((_DWORD *)v3 + 5);
  *(_DWORD *)(v4 + 4) = v5;
  *(_DWORD *)(v4 + 8) = v6;
  EntityInteraction::setInteractText((int *)v2 + 22, (int *)v3 + 8);
  EntityInteraction::setInteractText((int *)v2 + 23, (int *)v3 + 9);
  EntityInteraction::setInteractText((int *)v2 + 24, (int *)v3 + 10);
  *((_DWORD *)v2 + 25) = *((_DWORD *)v3 + 11);
  result = (int *)*((_DWORD *)v3 + 11);
  if ( (unsigned __int8)result & 8 )
  {
    v8 = *((_DWORD *)v3 + 5);
    v9 = 8589934594LL;
    v10 = 2;
    if ( (_BYTE)v8 )
      LODWORD(v9) = 1;
    if ( v8 & 0xFF00 )
      HIDWORD(v9) = 1;
    if ( v8 & 0xFF0000 )
      v10 = 1;
    *((_QWORD *)v2 + 4) = v9;
    *((_DWORD *)v2 + 10) = v10;
    result = (int *)*((_DWORD *)v3 + 11);
  }
  if ( (unsigned __int8)result & 4 )
    EntityInteraction::setInteractText((int *)v2 + 2, (int *)v3 + 4);
  if ( (unsigned __int8)result & 2 )
    *((_DWORD *)v2 + 5) = *((_DWORD *)v3 + 7);
    EntityInteraction::setInteractText((int *)v2 + 3, (int *)v3 + 8);
  if ( (unsigned __int8)result & 1 )
    result = j_EntityInteraction::setInteractText((int *)v2 + 4, (int *)v3 + 3);
  return result;
}


unsigned int *__fastcall Social::UserManager::getUserFromControllerId(Social::UserManager *this, int a2, int a3)
{
  int v3; // r6@1
  int v4; // r5@1
  Social::UserManager *v5; // r4@1
  int v6; // r5@2
  int v7; // r7@2
  __int64 v8; // r6@6
  bool v9; // zf@6
  unsigned int *result; // r0@11
  unsigned int v11; // r1@16
  unsigned int v12; // r1@21

  v3 = a3;
  v4 = a2;
  v5 = this;
  if ( a3 != -1 )
  {
    v6 = *(_QWORD *)(a2 + 8) >> 32;
    v7 = *(_QWORD *)(a2 + 8);
    if ( v7 != v6 )
    {
      while ( Social::User::getGameControllerId(*(Social::User **)v7) != v3 )
      {
        v7 += 8;
        if ( v6 == v7 )
          goto LABEL_11;
      }
      *(_DWORD *)v5 = *(_DWORD *)v7;
      result = *(unsigned int **)(v7 + 4);
      *((_DWORD *)v5 + 1) = result;
      if ( result )
        ++result;
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(result);
          while ( __strex(v11 + 1, result) );
LABEL_22:
          return result;
        }
LABEL_23:
        ++*result;
        return result;
      return result;
    }
LABEL_11:
    result = 0;
    *(_DWORD *)v5 = 0;
    *((_DWORD *)v5 + 1) = 0;
    return result;
  }
  v8 = *(_QWORD *)(a2 + 8);
  v9 = HIDWORD(v8) == (_DWORD)v8;
  if ( HIDWORD(v8) != (_DWORD)v8 )
    v9 = (_DWORD)v8 == HIDWORD(v8);
  if ( v9 )
    goto LABEL_11;
  while ( Social::User::getGameControllerId(*(Social::User **)v8) != *(_DWORD *)(v4 + 44) )
    LODWORD(v8) = v8 + 8;
    if ( HIDWORD(v8) == (_DWORD)v8 )
      goto LABEL_11;
  *(_DWORD *)v5 = *(_DWORD *)v8;
  result = *(unsigned int **)(v8 + 4);
  *((_DWORD *)v5 + 1) = result;
  if ( result )
    ++result;
    if ( &pthread_create )
      __dmb();
      do
        v12 = __ldrex(result);
      while ( __strex(v12 + 1, result) );
      goto LABEL_22;
    goto LABEL_23;
  return result;
}


int __fastcall Social::MultiplayerService::checkIsInviteForCurrentGame(Social::MultiplayerService *this)
{
  return 0;
}


char *__fastcall Social::UserManager::retrieveCIDToClientMap(Social::UserManager *this)
{
  return (char *)this + 48;
}


void __fastcall Social::Events::AutomationEventLogger::~AutomationEventLogger(Social::Events::AutomationEventLogger *this)
{
  Social::Events::AutomationEventLogger *v1; // r4@1
  char *v2; // r5@1
  char *v3; // r0@1

  v1 = this;
  *(_DWORD *)this = &off_26E8E68;
  v2 = (char *)this + 32;
  std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)this + 8);
  v3 = (char *)*((_DWORD *)v1 + 2);
  if ( v3 && v2 != v3 )
    operator delete(v3);
  j_j_j__ZdlPv_5((void *)v1);
}


signed int __fastcall Social::XboxLiveUserManager::showSignInButton(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  xbox::services::system::xbox_live_user *v2; // r0@1
  bool v3; // zf@1
  unsigned int v4; // r0@5
  unsigned int v5; // r1@7
  signed int result; // r0@8

  v1 = this;
  v2 = (xbox::services::system::xbox_live_user *)*((_DWORD *)this + 34);
  v3 = v2 == 0;
  if ( v2 )
    v3 = *((_DWORD *)v1 + 36) == 0;
  if ( (v3
     || xbox::services::system::xbox_live_user::is_signed_in(v2) != 1
     || (v4 = *((_WORD *)v1 + 62), v4 > 0xFF)
     || (_BYTE)v4)
    && (v5 = *((_WORD *)v1 + 62), !(_BYTE)v5) )
  {
    result = 0;
    if ( v5 < 0x100 )
      result = 1;
  }
  else
  return result;
}


int __fastcall Social::MultiplayerServiceManager::getGameList(Social::MultiplayerServiceManager *this, int a2)
{
  return std::vector<Social::MultiplayerGameInfo,std::allocator<Social::MultiplayerGameInfo>>::vector(
           (int)this,
           (unsigned __int64 *)(a2 + 12));
}


int __fastcall Social::Events::Event::~Event(int a1)
{
  int v1; // r4@1
  void *v2; // r0@1
  void *v3; // r0@4
  int v4; // r1@7
  void *v5; // r0@7
  unsigned int *v7; // r12@9
  signed int v8; // r1@11

  v1 = a1;
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Measurement>,std::allocator<std::pair<std::string const,Social::Events::Measurement>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear(a1 + 44);
  v2 = *(void **)(v1 + 44);
  if ( v2 && (void *)(v1 + 68) != v2 )
    operator delete(v2);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear(v1 + 16);
  v3 = *(void **)(v1 + 16);
  if ( v3 && (void *)(v1 + 40) != v3 )
    operator delete(v3);
  v4 = *(_DWORD *)(v1 + 4);
  v5 = (void *)(v4 - 12);
  if ( (int *)(v4 - 12) != &dword_28898C0 )
  {
    v7 = (unsigned int *)(v4 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 - 1, v7) );
    }
    else
      v8 = (*v7)--;
    if ( v8 <= 0 )
      j_j_j_j__ZdlPv_9(v5);
  }
  return v1;
}


int __fastcall Social::User::tick(Social::User *this)
{
  Social::User *v1; // r4@1

  v1 = this;
  Social::XboxLiveUserManager::tick(*((Social::XboxLiveUserManager **)this + 6));
  return (*(int (__fastcall **)(Social::User *))(*(_DWORD *)v1 + 40))(v1);
}


int __fastcall Social::Events::AutomationEventLogger::sendEvents(Social::Events::AutomationEventLogger *this, bool a2)
{
  Social::Events::AutomationEventLogger *v2; // r10@1
  int result; // r0@1
  int v9; // r1@2
  int i; // r4@3
  int v11; // r11@3
  void *v12; // r0@6
  void *v13; // r0@7
  unsigned int *v14; // r2@8
  signed int v15; // r1@10
  unsigned int *v16; // r2@12
  signed int v17; // r1@14
  int *v18; // [sp+4h] [bp-6Ch]@3
  __int64 v19; // [sp+8h] [bp-68h]@25
  int v20; // [sp+14h] [bp-5Ch]@6
  char v21; // [sp+18h] [bp-58h]@6
  char v22; // [sp+28h] [bp-48h]@6
  int v23; // [sp+3Ch] [bp-34h]@6
  __int64 v24; // [sp+40h] [bp-30h]@1

  v2 = this;
  sub_21E034C(&v24);
  _R5 = (Social::Events::AutomationEventLogger *)((char *)v2 + 48);
  result = _aeabi_l2d(v24 - *((_DWORD *)v2 + 12), (unsigned __int64)(v24 - *((_QWORD *)v2 + 6)) >> 32);
  __asm
  {
    VLDR            D0, =1.0e-9
    VMOV            D1, R0, R1
    VMUL.F64        D0, D1, D0
    VLDR            D1, [R5,#-8]
    VCMPE.F64       D0, D1
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !(_NF ^ _VF) )
    v9 = *((_DWORD *)v2 + 4);
    if ( v9 )
    {
      do
      {
        v18 = (int *)v9;
        v11 = *(_QWORD *)(v9 + 8) >> 32;
        for ( i = *(_QWORD *)(v9 + 8); i != v11; i += 72 )
        {
          Social::Events::Event::propertiesAsJsonValue((Json::Value *)&v22, i);
          Social::Events::Event::measurementsAsJsonValue((Json::Value *)&v21, i);
          Automation::Response::createEvent(
            &v23,
            (const char **)(i + 4),
            (const Json::Value *)&v22,
            (const Json::Value *)&v21);
          Json::Value::~Value((Json::Value *)&v21);
          Json::Value::~Value((Json::Value *)&v22);
          Automation::Response::toString((Automation::Response *)&v20, &v23);
          v12 = (void *)(v20 - 12);
          if ( (int *)(v20 - 12) != &dword_28898C0 )
          {
            v16 = (unsigned int *)(v20 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v17 = __ldrex(v16);
              while ( __strex(v17 - 1, v16) );
            }
            else
              v17 = (*v16)--;
            if ( v17 <= 0 )
              j_j_j_j__ZdlPv_9(v12);
          }
          Automation::AutomationClient::send(
            *((Automation::AutomationClient **)v2 + 1),
            (const Automation::Response *)&v23);
          v13 = (void *)(v23 - 12);
          if ( (int *)(v23 - 12) != &dword_28898C0 )
            v14 = (unsigned int *)(v23 - 4);
                v15 = __ldrex(v14);
              while ( __strex(v15 - 1, v14) );
              v15 = (*v14)--;
            if ( v15 <= 0 )
              j_j_j_j__ZdlPv_9(v13);
        }
        v9 = *v18;
      }
      while ( *v18 );
    }
    std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v2 + 8);
    sub_21E034C(&v19);
    result = v19;
    *(_QWORD *)_R5 = v19;
  return result;
}


void __fastcall Social::MultiplayerXBL::_getPrimaryUserId(Social::MultiplayerXBL *this, int a2)
{
  Social::MultiplayerXBL::_getPrimaryUserId(this, a2);
}


void __fastcall Social::XboxLiveUserManager::_refreshUserData(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager::_refreshUserData(this);
}


signed int __fastcall Social::XboxLiveUserManager::isAchievementDataCached(Social::XboxLiveUserManager *this)
{
  __int64 v1; // r1@1
  signed int result; // r0@1

  v1 = *(_QWORD *)PlayerAchievementData::getAchievementData((Social::XboxLiveUserManager *)((char *)this + 272));
  result = 0;
  if ( HIDWORD(v1) != (_DWORD)v1 )
    result = 1;
  return result;
}


pthread_mutex_t *__fastcall Social::XboxLiveUserInfo::_refresh(int a1, int a2)
{
  int v2; // r10@1
  int v3; // r6@1
  int v4; // r8@2
  unsigned int v5; // r1@3
  unsigned int *v6; // r0@3
  unsigned int v7; // r2@6
  unsigned int v8; // r3@7
  int v9; // r9@8
  unsigned int *v10; // r4@8
  unsigned int v11; // r1@10
  unsigned int v12; // r0@12
  int v13; // r6@14
  int *v14; // r4@14
  _DWORD *v15; // r4@15
  unsigned int *v16; // r2@17
  signed int v17; // r1@19
  _DWORD *v18; // r6@25
  Social::XboxProfile *v19; // r0@25
  int v20; // r1@25
  void *v21; // r0@25
  __int64 v22; // kr00_8@30
  _DWORD *v23; // r6@31
  unsigned int *v24; // r2@32
  signed int v25; // r1@34
  int *v26; // r0@40
  pthread_mutex_t *v27; // r0@42
  bool v28; // zf@42
  pthread_mutex_t *result; // r0@48
  bool v30; // zf@48
  unsigned int v31; // r1@57
  unsigned int v32; // r0@63
  char *v33; // r0@68
  unsigned int v34; // r0@70
  void (__fastcall *v35)(int *, int, signed int); // r3@73
  int v36; // r0@77
  unsigned int *v37; // r2@78
  unsigned int v38; // r1@80
  int v39; // r7@85
  unsigned int *v40; // r1@86
  unsigned int v41; // r0@88
  unsigned int *v42; // r5@92
  unsigned int v43; // r0@94
  int v44; // r7@99
  unsigned int *v45; // r1@100
  unsigned int v46; // r0@102
  unsigned int *v47; // r5@106
  unsigned int v48; // r0@108
  char *v49; // r0@113
  unsigned int v50; // r0@115
  void (__fastcall *v51)(int *, int, signed int); // r3@118
  int v52; // r0@122
  unsigned int *v53; // r2@123
  unsigned int v54; // r1@125
  int v55; // r5@130
  unsigned int *v56; // r1@131
  unsigned int v57; // r0@133
  unsigned int *v58; // r6@137
  unsigned int v59; // r0@139
  int v60; // r5@144
  unsigned int *v61; // r1@145
  unsigned int v62; // r0@147
  unsigned int *v63; // r6@151
  unsigned int v64; // r0@153
  int v65; // r5@158
  unsigned int *v66; // r1@159
  unsigned int v67; // r0@161
  unsigned int *v68; // r6@165
  unsigned int v69; // r0@167
  int v70; // r5@172
  unsigned int *v71; // r1@173
  unsigned int v72; // r0@175
  unsigned int *v73; // r6@179
  unsigned int v74; // r0@181
  void *v75; // [sp+0h] [bp-C8h]@68
  void *v76; // [sp+0h] [bp-C8h]@75
  int v77; // [sp+4h] [bp-C4h]@0
  int v78; // [sp+4h] [bp-C4h]@75
  int v79; // [sp+8h] [bp-C0h]@75
  int v80; // [sp+Ch] [bp-BCh]@75
  int v81; // [sp+10h] [bp-B8h]@75
  int v82; // [sp+14h] [bp-B4h]@75
  int v83; // [sp+18h] [bp-B0h]@75
  int v84; // [sp+1Ch] [bp-ACh]@75
  void *v85; // [sp+20h] [bp-A8h]@75
  xbox::services::xbox_live_context *v86; // [sp+24h] [bp-A4h]@113
  int v87; // [sp+28h] [bp-A0h]@144
  char v88; // [sp+2Ch] [bp-9Ch]@113
  int v89; // [sp+30h] [bp-98h]@130
  char v90; // [sp+34h] [bp-94h]@120
  int v91; // [sp+38h] [bp-90h]@158
  int v92; // [sp+3Ch] [bp-8Ch]@68
  int v93; // [sp+40h] [bp-88h]@68
  int v94; // [sp+44h] [bp-84h]@73
  int v95; // [sp+48h] [bp-80h]@74
  void (*v96)(void); // [sp+50h] [bp-78h]@73
  int v97; // [sp+54h] [bp-74h]@74
  xbox::services::xbox_live_context *v98; // [sp+58h] [bp-70h]@68
  int v99; // [sp+5Ch] [bp-6Ch]@99
  char v100; // [sp+60h] [bp-68h]@68
  int v101; // [sp+64h] [bp-64h]@85
  char v102; // [sp+68h] [bp-60h]@75
  int v103; // [sp+6Ch] [bp-5Ch]@172
  char v104; // [sp+70h] [bp-58h]@12
  void *ptr; // [sp+74h] [bp-54h]@15
  unsigned int v106; // [sp+78h] [bp-50h]@12
  _DWORD *v107; // [sp+7Ch] [bp-4Ch]@12
  int v108; // [sp+80h] [bp-48h]@12
  signed int v109; // [sp+84h] [bp-44h]@12
  int v110; // [sp+88h] [bp-40h]@12
  int v111; // [sp+8Ch] [bp-3Ch]@28
  pthread_mutex_t *mutex; // [sp+90h] [bp-38h]@12
  unsigned __int8 v113; // [sp+94h] [bp-34h]@12
  pthread_mutex_t *v114; // [sp+98h] [bp-30h]@12
  unsigned __int8 v115; // [sp+9Ch] [bp-2Ch]@12

  v2 = a1;
  v3 = a2;
  if ( Social::XboxLiveUserManager::isSignedIn(*(Social::XboxLiveUserManager **)(a1 + 8)) )
  {
    v4 = *(_DWORD *)(v2 + 4);
    if ( !v4 )
      std::__throw_bad_weak_ptr();
    v5 = *(_DWORD *)(v4 + 4);
    v6 = (unsigned int *)(v4 + 4);
    do
    {
      while ( 1 )
      {
        if ( !v5 )
          std::__throw_bad_weak_ptr();
        __dmb();
        v7 = __ldrex(v6);
        if ( v7 == v5 )
          break;
        __clrex();
        v5 = v7;
      }
      v8 = __strex(v5 + 1, v6);
      v5 = v7;
    }
    while ( v8 );
    __dmb();
    v9 = *(_DWORD *)v2;
    v10 = (unsigned int *)(v4 + 8);
    if ( &pthread_create )
      __dmb();
      do
        v11 = __ldrex(v10);
      while ( __strex(v11 + 1, v10) );
    else
      ++*v10;
        v31 = __ldrex(v6);
      while ( __strex(v31 - 1, v6) );
      v31 = (*v6)--;
    if ( v31 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
        do
          v32 = __ldrex(v10);
        while ( __strex(v32 - 1, v10) );
      else
        v32 = (*v10)--;
      if ( v32 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
    Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v98, *(_DWORD *)(v2 + 8));
    v33 = xbox::services::xbox_live_context::social_service(v98);
    xbox::services::social::social_service::get_social_relationships((int)&v100, (int)v33, 0, 0, 0xC8u);
    v92 = v9;
    v93 = v4;
        v34 = __ldrex(v10);
      while ( __strex(v34 + 1, v10) );
    v94 = 200;
    v96 = 0;
    v35 = *(void (__fastcall **)(int *, int, signed int))(v3 + 8);
    if ( v35 )
      v35(&v95, v3, 2);
      v97 = *(_DWORD *)(v3 + 12);
      v96 = *(void (**)(void))(v3 + 8);
    sub_13882DC((int)&v102, (int)&v100, (int)&v92, (int)v35, v75, v77, v79, v80, v81, v82, v83, v84, v85);
    if ( v96 )
      v96();
    v36 = v93;
    if ( v93 )
      v37 = (unsigned int *)(v93 + 8);
          v38 = __ldrex(v37);
        while ( __strex(v38 - 1, v37) );
        v38 = (*v37)--;
      if ( v38 == 1 )
        (*(void (**)(void))(*(_DWORD *)v36 + 12))();
    v39 = v101;
    if ( v101 )
      v40 = (unsigned int *)(v101 + 4);
          v41 = __ldrex(v40);
        while ( __strex(v41 - 1, v40) );
        v41 = (*v40)--;
      if ( v41 == 1 )
        v42 = (unsigned int *)(v39 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v39 + 8))(v39);
        if ( &pthread_create )
        {
          __dmb();
          do
            v43 = __ldrex(v42);
          while ( __strex(v43 - 1, v42) );
        }
        else
          v43 = (*v42)--;
        if ( v43 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v39 + 12))(v39);
    v44 = v99;
    if ( v99 )
      v45 = (unsigned int *)(v99 + 4);
          v46 = __ldrex(v45);
        while ( __strex(v46 - 1, v45) );
        v46 = (*v45)--;
      if ( v46 == 1 )
        v47 = (unsigned int *)(v44 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 8))(v44);
            v48 = __ldrex(v47);
          while ( __strex(v48 - 1, v47) );
          v48 = (*v47)--;
        if ( v48 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v44 + 12))(v44);
    Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v86, *(_DWORD *)(v2 + 8));
    v49 = xbox::services::xbox_live_context::privacy_service(v86);
    xbox::services::privacy::privacy_service::get_avoid_list(
      (xbox::services::privacy::privacy_service *)&v88,
      (xbox::services::user_context **)v49);
    v79 = v9;
    v80 = v4;
        v50 = __ldrex(v10);
      while ( __strex(v50 + 1, v10) );
    v81 = 200;
    v84 = 0;
    v51 = *(void (__fastcall **)(int *, int, signed int))(v3 + 8);
    if ( v51 )
      v51(&v82, v3, 2);
      v85 = *(void **)(v3 + 12);
      v84 = *(_DWORD *)(v3 + 8);
    sub_1388DB4((int)&v90, (int)&v88, (int)&v79, (int)v51, v76, v78, v79, v80, v81, v82, v83, v84, v85);
    if ( v84 )
      ((void (*)(void))v84)();
    v52 = v80;
    if ( v80 )
      v53 = (unsigned int *)(v80 + 8);
          v54 = __ldrex(v53);
        while ( __strex(v54 - 1, v53) );
        v54 = (*v53)--;
      if ( v54 == 1 )
        (*(void (**)(void))(*(_DWORD *)v52 + 12))();
    v55 = v89;
    if ( v89 )
      v56 = (unsigned int *)(v89 + 4);
          v57 = __ldrex(v56);
        while ( __strex(v57 - 1, v56) );
        v57 = (*v56)--;
      if ( v57 == 1 )
        v58 = (unsigned int *)(v55 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v55 + 8))(v55);
            v59 = __ldrex(v58);
          while ( __strex(v59 - 1, v58) );
          v59 = (*v58)--;
        if ( v59 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v55 + 12))(v55);
    v60 = v87;
    if ( v87 )
      v61 = (unsigned int *)(v87 + 4);
          v62 = __ldrex(v61);
        while ( __strex(v62 - 1, v61) );
        v62 = (*v61)--;
      if ( v62 == 1 )
        v63 = (unsigned int *)(v60 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v60 + 8))(v60);
            v64 = __ldrex(v63);
          while ( __strex(v64 - 1, v63) );
          v64 = (*v63)--;
        if ( v64 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v60 + 12))(v60);
    v65 = v91;
    if ( v91 )
      v66 = (unsigned int *)(v91 + 4);
          v67 = __ldrex(v66);
        while ( __strex(v67 - 1, v66) );
        v67 = (*v66)--;
      if ( v67 == 1 )
        v68 = (unsigned int *)(v65 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v65 + 8))(v65);
            v69 = __ldrex(v68);
          while ( __strex(v69 - 1, v68) );
          v69 = (*v68)--;
        if ( v69 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v65 + 12))(v65);
    v70 = v103;
    if ( v103 )
      v71 = (unsigned int *)(v103 + 4);
          v72 = __ldrex(v71);
        while ( __strex(v72 - 1, v71) );
        v72 = (*v71)--;
      if ( v72 == 1 )
        v73 = (unsigned int *)(v70 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v70 + 8))(v70);
            v74 = __ldrex(v73);
          while ( __strex(v74 - 1, v73) );
          v74 = (*v73)--;
        if ( v74 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v70 + 12))(v70);
        result = (pthread_mutex_t *)__ldrex(v10);
      while ( __strex((unsigned int)&result[-1].__align + 23, v10) );
      result = (pthread_mutex_t *)(*v10)--;
    if ( result == (pthread_mutex_t *)1 )
      result = (pthread_mutex_t *)(*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  }
  else
    v114 = (pthread_mutex_t *)(v2 + 60);
    mutex = (pthread_mutex_t *)(v2 + 64);
    v115 = 0;
    v113 = 0;
    j__ZSt4lockISt11unique_lockISt5mutexES2_JEEvRT_RT0_DpRT1_(&v114, (int)&mutex);
    v104 = 0;
    v107 = 0;
    v108 = 0;
    v109 = 1065353216;
    v110 = 0;
    v12 = sub_21E6254(COERCE_DOUBLE(&v109));
    v106 = v12;
    if ( v12 == 1 )
      v14 = &v111;
      v111 = 0;
      if ( v12 >= 0x40000000 )
        sub_21E57F4();
      v13 = 4 * v12;
      v14 = (int *)operator new(4 * v12);
      _aeabi_memclr4(v14, v13);
    ptr = v14;
    *(_BYTE *)(v2 + 16) = v104;
    std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_move_assign(
      v2 + 20,
      (int)&ptr);
    v15 = v107;
    while ( v15 )
      v18 = v15;
      v19 = (Social::XboxProfile *)(v15 + 2);
      v15 = (_DWORD *)*v15;
      Social::XboxProfile::~XboxProfile(v19);
      v20 = v18[1];
      v21 = (void *)(v20 - 12);
      if ( (int *)(v20 - 12) != &dword_28898C0 )
        v16 = (unsigned int *)(v20 - 4);
            v17 = __ldrex(v16);
          while ( __strex(v17 - 1, v16) );
          v17 = (*v16)--;
        if ( v17 <= 0 )
          j_j_j_j__ZdlPv_9(v21);
      operator delete(v18);
    _aeabi_memclr4(ptr, 4 * v106);
    if ( ptr && &v111 != ptr )
      operator delete(ptr);
    v22 = *(_QWORD *)(v2 + 48);
    if ( HIDWORD(v22) != (_DWORD)v22 )
      v23 = (_DWORD *)v22;
        v26 = (int *)(*v23 - 12);
        if ( v26 != &dword_28898C0 )
          v24 = (unsigned int *)(*v23 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v25 = __ldrex(v24);
            while ( __strex(v25 - 1, v24) );
          }
          else
            v25 = (*v24)--;
          if ( v25 <= 0 )
            j_j_j_j__ZdlPv_9(v26);
        ++v23;
      while ( v23 != (_DWORD *)HIDWORD(v22) );
    *(_DWORD *)(v2 + 52) = v22;
    v27 = (pthread_mutex_t *)v113;
    v28 = v113 == 0;
    if ( v113 )
      v27 = mutex;
      v28 = mutex == 0;
    if ( !v28 )
        pthread_mutex_unlock(v27);
      v113 = 0;
    result = (pthread_mutex_t *)v115;
    v30 = v115 == 0;
    if ( v115 )
      result = v114;
      v30 = v114 == 0;
    if ( !v30 )
        pthread_mutex_unlock(result);
      result = 0;
      v115 = 0;
  return result;
}


int __fastcall Social::XboxLiveUserManager::getTitleId(Social::XboxLiveUserManager *this)
{
  int v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10
  xbox::services::xbox_live_app_config *v8; // [sp+0h] [bp-18h]@1
  int v9; // [sp+4h] [bp-14h]@1

  xbox::services::xbox_live_app_config::get_app_config_singleton((xbox::services::xbox_live_app_config *)&v8);
  v1 = xbox::services::xbox_live_app_config::title_id(v8);
  v2 = v9;
  if ( v9 )
  {
    v3 = (unsigned int *)(v9 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  return v1;
}


int __fastcall Social::MultiplayerServiceManager::onExitLevel(int result, Social::User *a2)
{
  Social::MultiplayerService **v2; // r5@1 OVERLAPPED
  Social::MultiplayerService **v3; // r6@1 OVERLAPPED
  Social::User *i; // r4@1
  Social::MultiplayerService *v5; // t1@2

  *(_QWORD *)&v2 = *(_QWORD *)result;
  for ( i = a2; v3 != v2; result = Social::MultiplayerService::onExitLevel(v5, i) )
  {
    v5 = *v2;
    ++v2;
  }
  return result;
}


void __fastcall Social::MultiplayerXBL::_getAllActiveSessions(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL::_getAllActiveSessions(this);
}


void __fastcall Social::RealmsUriListener::onUri(int a1, int a2)
{
  Social::RealmsUriListener::onUri(a1, a2);
}


signed int __fastcall Social::Events::EventManager::setPlayerGlobalProperty<int>(int a1, int a2, unsigned int a3, int **a4, int *a5)
{
  unsigned int v5; // r7@1
  int *v6; // r10@1
  int v7; // r11@1
  int v8; // r4@1
  int v9; // r11@1
  int v10; // t1@1
  int v11; // r4@1
  int v12; // r0@1
  _DWORD *v13; // r9@2
  int v14; // r6@2
  _DWORD *v15; // r8@4
  bool v16; // zf@7
  int v17; // r0@11
  int v19; // [sp+8h] [bp-40h]@1
  char v20; // [sp+Ch] [bp-3Ch]@12
  unsigned int v21; // [sp+14h] [bp-34h]@1
  int *v22; // [sp+1Ch] [bp-2Ch]@11

  v5 = a3;
  v6 = (int *)a4;
  v7 = a2;
  v8 = a1;
  v19 = a1;
  v21 = a3;
  Social::Events::EventManager::removePlayerGlobalProperty(a2, a3, a4);
  sub_21E8AF4((int *)v8, v6);
  Json::Value::Value((Json::Value *)(v8 + 8), *a5);
  v10 = *(_DWORD *)(v7 + 96);
  v9 = v7 + 96;
  v11 = v5 % *(_DWORD *)(v9 + 4);
  v12 = *(_DWORD *)(v10 + 4 * v11);
  if ( !v12 )
    goto LABEL_11;
  v13 = *(_DWORD **)v12;
  v14 = *(_DWORD *)(*(_DWORD *)v12 + 4);
  while ( v14 != v5 )
  {
    v15 = (_DWORD *)*v13;
    if ( *v13 )
    {
      v14 = v15[1];
      v12 = (int)v13;
      v13 = (_DWORD *)*v13;
      if ( v15[1] % *(_DWORD *)(v9 + 4) == v11 )
        continue;
    }
  }
  v16 = v12 == 0;
  if ( v12 )
    v12 = *(_DWORD *)v12;
    v16 = v12 == 0;
  if ( v16 )
LABEL_11:
    v22 = (int *)&v21;
    v17 = j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            v9,
            (int)&unk_262D414,
            &v22);
    v12 = std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
            v11,
            v5,
            v17);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
           (int)&v20,
           (unsigned __int64 *)(v12 + 8),
           v6,
           v19);
}


void __fastcall Social::Events::Event::addProperty<BlockID>(int a1, int *a2, _BYTE *a3)
{
  int v3; // r6@1
  _BYTE *v4; // r7@1
  int *v5; // r4@1
  Json::Value *v6; // r5@1
  void *v7; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+8h] [bp-30h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = (Json::Value *)(sub_21E8AF4(&v11, a2) + 2);
  Json::Value::Value(v6, *v4);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v10,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v11);
  Json::Value::~Value(v6);
  v7 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
}


void __fastcall Social::XboxLiveUserManager::getAuthorizationHeader(int a1, int *a2, int a3)
{
  Social::XboxLiveUserManager::getAuthorizationHeader(a1, a2, a3);
}


unsigned int __fastcall Social::User::setLiveUser(int a1, int *a2)
{
  int v2; // r5@1
  int v3; // r1@1
  int v4; // r4@1
  unsigned int result; // r0@1
  unsigned int *v6; // r1@2
  unsigned int *v7; // r5@8
  int v8; // [sp+0h] [bp-18h]@1
  int v9; // [sp+4h] [bp-14h]@1

  v2 = a1;
  std::__shared_ptr<Social::XboxLiveUserManager,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<Social::XboxLiveUserManager,std::default_delete<Social::XboxLiveUserManager>>(
    (int)&v8,
    a2);
  v3 = v8;
  v8 = *(_DWORD *)(v2 + 24);
  *(_DWORD *)(v2 + 24) = v3;
  v4 = *(_DWORD *)(v2 + 28);
  result = v9;
  *(_DWORD *)(v2 + 28) = v9;
  v9 = v4;
  if ( v4 )
  {
    v6 = (unsigned int *)(v4 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = __ldrex(v6);
      while ( __strex(result - 1, v6) );
    }
    else
      result = (*v6)--;
    if ( result == 1 )
      v7 = (unsigned int *)(v4 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v7);
        while ( __strex(result - 1, v7) );
      }
      else
        result = (*v7)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  }
  return result;
}


signed int __fastcall Social::Events::EventManager::removeCommonProperty(int a1, int **a2)
{
  return j_j_j__ZNSt10_HashtableISsSt4pairIKSsN6Social6Events8PropertyEESaIS5_ENSt8__detail10_Select1stESt8equal_toISsESt4hashISsENS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_20_Prime_rehash_policyENS7_17_Hashtable_traitsILb1ELb0ELb1EEEE8_M_eraseESt17integral_constantIbLb1EERS1_(
           (unsigned __int64 *)(a1 + 40),
           a2);
}


void __fastcall Social::Events::Event::addMeasurement<float>(int a1, int *a2, int a3, int a4)
{
  Social::Events::Event::addMeasurement<float>(a1, a2, a3, a4);
}


unsigned int __fastcall Social::XboxLiveUserManager::_createXblUser(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  __int64 v2; // r0@1
  int v3; // r5@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r6@8
  unsigned int v7; // r0@10
  int v8; // r5@15
  unsigned int *v9; // r1@16
  unsigned int v10; // r0@18
  unsigned int *v11; // r6@22
  unsigned int v12; // r0@24
  char v14; // [sp+4h] [bp-1Ch]@1
  int v15; // [sp+8h] [bp-18h]@1

  v1 = this;
  j__ZNSt12__shared_ptrIN4xbox8services6system14xbox_live_userELN9__gnu_cxx12_Lock_policyE2EEC2ISaIS3_EJEEESt19_Sp_make_shared_tagRKT_DpOT0_((int)&v14);
  v2 = *(_QWORD *)&v14;
  *(_DWORD *)&v14 = 0;
  v15 = 0;
  *((_DWORD *)v1 + 34) = v2;
  v3 = *((_DWORD *)v1 + 35);
  *((_DWORD *)v1 + 35) = HIDWORD(v2);
  if ( v3 )
  {
    v4 = (unsigned int *)(v3 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  v8 = v15;
  if ( v15 )
    v9 = (unsigned int *)(v15 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  return Social::XboxLiveUserManager::_initCurrentUser(v1);
}


void __fastcall Social::Events::Event::addProperty<DimensionId>(int a1, int *a2, int *a3)
{
  int v3; // r6@1
  int *v4; // r7@1
  int *v5; // r4@1
  Json::Value *v6; // r5@1
  void *v7; // r0@1
  unsigned int *v8; // r2@3
  signed int v9; // r1@5
  int v10; // [sp+0h] [bp-38h]@1
  int v11; // [sp+8h] [bp-30h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = (Json::Value *)(sub_21E8AF4(&v11, a2) + 2);
  Json::Value::Value(v6, *v4);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,Social::Events::Property&>(
    (int)&v10,
    (unsigned __int64 *)(v3 + 16),
    v5,
    (int)&v11);
  Json::Value::~Value(v6);
  v7 = (void *)(v11 - 12);
  if ( (int *)(v11 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v11 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
}


int __fastcall Social::GameConnectionInfo::GameConnectionInfo(int a1, __int16 a2, int *a3, int a4, int *a5)
{
  int v5; // r4@1
  int v6; // r7@1
  void **v7; // r6@1
  __int64 v8; // r0@1

  v5 = a1;
  v6 = a4;
  *(_WORD *)a1 = a2;
  v7 = (void **)(a1 + 8);
  sub_119C854((int *)(a1 + 4), a3);
  sub_119C884(v7, (const char *)&unk_257BC67);
  *(_DWORD *)(v5 + 12) = v6;
  sub_119C854((int *)(v5 + 16), a5);
  LODWORD(v8) = v5 + 20;
  ThirdPartyInfo::ThirdPartyInfo(v8);
  return v5;
}


signed int __fastcall Social::Events::EventManager::setPlayerCommonProperty<std::string>(int *a1, int a2, unsigned int a3, int **a4, const char **a5)
{
  unsigned int v5; // r7@1
  int *v6; // r10@1
  int v7; // r11@1
  int *v8; // r4@1
  int v9; // r11@1
  int v10; // t1@1
  int v11; // r4@1
  int v12; // r0@1
  _DWORD *v13; // r9@2
  int v14; // r6@2
  _DWORD *v15; // r8@4
  bool v16; // zf@7
  int v17; // r0@11
  int *v19; // [sp+8h] [bp-40h]@1
  char v20; // [sp+Ch] [bp-3Ch]@12
  unsigned int v21; // [sp+14h] [bp-34h]@1
  int *v22; // [sp+1Ch] [bp-2Ch]@11

  v5 = a3;
  v6 = (int *)a4;
  v7 = a2;
  v8 = a1;
  v19 = a1;
  v21 = a3;
  Social::Events::EventManager::removePlayerCommonProperty(a2, a3, a4);
  sub_21E8AF4(v8, v6);
  Json::Value::Value((int)(v8 + 2), a5);
  v10 = *(_DWORD *)(v7 + 68);
  v9 = v7 + 68;
  v11 = v5 % *(_DWORD *)(v9 + 4);
  v12 = *(_DWORD *)(v10 + 4 * v11);
  if ( !v12 )
    goto LABEL_11;
  v13 = *(_DWORD **)v12;
  v14 = *(_DWORD *)(*(_DWORD *)v12 + 4);
  while ( v14 != v5 )
  {
    v15 = (_DWORD *)*v13;
    if ( *v13 )
    {
      v14 = v15[1];
      v12 = (int)v13;
      v13 = (_DWORD *)*v13;
      if ( v15[1] % *(_DWORD *)(v9 + 4) == v11 )
        continue;
    }
  }
  v16 = v12 == 0;
  if ( v12 )
    v12 = *(_DWORD *)v12;
    v16 = v12 == 0;
  if ( v16 )
LABEL_11:
    v22 = (int *)&v21;
    v17 = j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            v9,
            (int)&unk_262D414,
            &v22);
    v12 = std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
            v11,
            v5,
            v17);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v20,
           (unsigned __int64 *)(v12 + 8),
           v6,
           (int)v19);
}


signed int __fastcall Social::XboxLiveUserManager::_getReputationServiceType(int a1, int a2)
{
  signed int result; // r0@2

  if ( (unsigned int)(a2 - 1) <= 5 )
    result = dword_262D130[a2 - 1];
  else
    result = 9;
  return result;
}


Social::XboxProfile *__fastcall Social::XboxProfile::XboxProfile(Social::XboxProfile *this, const Social::XboxProfile *a2)
{
  const Social::XboxProfile *v2; // r5@1
  Social::XboxProfile *v3; // r4@1
  int v4; // r1@1
  int v5; // r2@1
  int v6; // r3@1

  v2 = a2;
  v3 = this;
  sub_119C854((int *)this, (int *)a2);
  sub_119C854((int *)v3 + 1, (int *)v2 + 1);
  sub_119C854((int *)v3 + 2, (int *)v2 + 2);
  sub_119C854((int *)v3 + 3, (int *)v2 + 3);
  sub_119C854((int *)v3 + 4, (int *)v2 + 4);
  v4 = *((_DWORD *)v2 + 6);
  v5 = *((_DWORD *)v2 + 7);
  v6 = (int)v3 + 20;
  *(_DWORD *)v6 = *((_DWORD *)v2 + 5);
  *(_DWORD *)(v6 + 4) = v4;
  *(_DWORD *)(v6 + 8) = v5;
  sub_119C854((int *)v3 + 8, (int *)v2 + 8);
  sub_119C854((int *)v3 + 9, (int *)v2 + 9);
  sub_119C854((int *)v3 + 10, (int *)v2 + 10);
  *((_DWORD *)v3 + 11) = *((_DWORD *)v2 + 11);
  return v3;
}


int __fastcall Social::UserManager::canChangePrimaryUserFromStartMenuScreen(Social::UserManager *this)
{
  return 0;
}


_BOOL4 __fastcall Social::MultiplayerXBL::hasID(int a1, int **a2)
{
  int **v2; // r4@1
  int v3; // r0@1
  _BOOL4 v4; // r4@1
  int v5; // r5@1
  unsigned int *v6; // r1@2
  unsigned int v7; // r0@4
  unsigned int *v8; // r6@8
  unsigned int v9; // r0@10
  Social::User *v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v2 = a2;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v11, *(_DWORD *)(a1 + 44));
  v3 = Social::User::getLiveUser(v11);
  v4 = Social::XboxLiveUserManager::hasXUID(v3, v2);
  v5 = v12;
  if ( v12 )
  {
    v6 = (unsigned int *)(v12 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  }
  return v4;
}


void __fastcall Social::XboxLiveUserManager::getScid(Social::XboxLiveUserManager *this)
{
  int *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10
  void *v7; // r0@15
  void *v8; // r0@16
  void *v9; // r0@17
  unsigned int *v10; // r2@19
  signed int v11; // r1@21
  unsigned int *v12; // r2@23
  signed int v13; // r1@25
  unsigned int *v14; // r2@27
  signed int v15; // r1@29
  int v16; // [sp+0h] [bp-30h]@15
  int v17; // [sp+4h] [bp-2Ch]@15
  int v18; // [sp+8h] [bp-28h]@1
  int v19; // [sp+Ch] [bp-24h]@1
  int v20; // [sp+10h] [bp-20h]@1

  v1 = (int *)this;
  sub_119C884((void **)this, (const char *)&unk_257BC67);
  xbox::services::xbox_live_app_config::get_app_config_singleton((xbox::services::xbox_live_app_config *)&v18);
  xbox::services::xbox_live_app_config::scid((xbox::services::xbox_live_app_config *)&v20, v18);
  v2 = v19;
  if ( v19 )
  {
    v3 = (unsigned int *)(v19 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  sub_119C854(&v16, &v20);
  utility::conversions::to_utf8string(&v17, &v16);
  xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v1, &v17);
  v7 = (void *)(v17 - 12);
  if ( (int *)(v17 - 12) != &dword_28898C0 )
    v10 = (unsigned int *)(v17 - 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 - 1, v10) );
      v11 = (*v10)--;
    if ( v11 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v7);
  v8 = (void *)(v16 - 12);
  if ( (int *)(v16 - 12) != &dword_28898C0 )
    v12 = (unsigned int *)(v16 - 4);
        v13 = __ldrex(v12);
      while ( __strex(v13 - 1, v12) );
      v13 = (*v12)--;
    if ( v13 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v8);
  v9 = (void *)(v20 - 12);
  if ( (int *)(v20 - 12) != &dword_28898C0 )
    v14 = (unsigned int *)(v20 - 4);
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v9);
}


int __fastcall Social::MultiplayerXBL::_getConnectionType(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  int v2; // r0@1
  int v3; // r0@1
  int v4; // r5@1
  __int16 v6; // [sp+4h] [bp-4Ch]@1

  v1 = this;
  v2 = NetworkHandler::getConnector(*((NetworkHandler **)this + 17));
  v3 = (*(int (**)(void))(*(_DWORD *)v2 + 60))();
  Social::MultiplayerGameInfo::getOptimumConnection((Social::MultiplayerGameInfo *)&v6, (int)v1 + 88, v3);
  v4 = v6;
  Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v6);
  return v4;
}


unsigned int __fastcall Social::XboxLiveUserManager::_initCurrentUser(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  int v2; // r5@1
  void *v3; // r0@1
  void *v4; // r0@2
  unsigned int result; // r0@3
  _DWORD *v6; // r0@4
  __int64 v7; // r1@4
  unsigned int *v8; // r2@7
  signed int v9; // r1@9
  unsigned int *v10; // r2@11
  signed int v11; // r1@13
  _DWORD *v12; // [sp+4h] [bp-2Ch]@4
  __int64 v13; // [sp+Ch] [bp-24h]@4
  int v14; // [sp+14h] [bp-1Ch]@1
  int v15; // [sp+18h] [bp-18h]@1

  v1 = this;
  v2 = *((_DWORD *)this + 34);
  MinecraftEventing::getSessionId((MinecraftEventing *)&v14, *((_DWORD *)this + 30));
  utility::conversions::to_string_t(&v15, &v14);
  xbox::services::system::xbox_live_user::set_title_telemetry_session_id(v2, &v15);
  v3 = (void *)(v15 - 12);
  if ( (int *)(v15 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v15 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v3);
  }
  v4 = (void *)(v14 - 12);
  if ( (int *)(v14 - 12) != &dword_28898C0 )
    v10 = (unsigned int *)(v14 - 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 - 1, v10) );
      v11 = (*v10)--;
    if ( v11 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v4);
  result = *((_BYTE *)v1 + 128);
  if ( !*((_BYTE *)v1 + 128) )
    v6 = operator new(4u);
    LODWORD(v7) = sub_10481D8;
    *v6 = v1;
    HIDWORD(v7) = sub_10480F0;
    v12 = v6;
    v13 = v7;
    result = xbox::services::system::xbox_live_user::add_sign_out_completed_handler((int)&v12);
    *((_DWORD *)v1 + 32) = 1;
    *((_DWORD *)v1 + 33) = result;
    if ( (_DWORD)v13 )
      result = ((int (*)(void))v13)();
  return result;
}


int __fastcall Social::MultiplayerXBL::needToHandleInvite(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  Social::XboxLiveUserManager *v2; // r0@1
  int v3; // r4@2
  int v4; // r5@4
  unsigned int *v5; // r1@5
  unsigned int v6; // r0@7
  unsigned int *v7; // r6@11
  unsigned int v8; // r0@13
  Social::User *v10; // [sp+0h] [bp-18h]@1
  int v11; // [sp+4h] [bp-14h]@4

  v1 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v10, *((_DWORD *)this + 11));
  v2 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v10);
  if ( Social::XboxLiveUserManager::isSignedIn(v2) == 1 )
    v3 = *(_DWORD *)(*(_DWORD *)Social::MultiplayerService::getInviteHandle(v1) - 12) != 0;
  else
    v3 = 0;
  v4 = v11;
  if ( v11 )
  {
    v5 = (unsigned int *)(v11 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 == 1 )
      v7 = (unsigned int *)(v4 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  }
  return v3;
}


RakNet *__fastcall Social::MultiplayerService::tick(int a1, int a2, int a3)
{
  int v3; // r6@1
  int v4; // r8@1
  int v5; // r10@1
  int v6; // r0@2
  UPNPInterface *v7; // r0@5
  bool v8; // zf@5
  int v9; // r4@9
  char *v10; // r0@10
  int v11; // r4@10
  int *v12; // r0@10
  void *v13; // r0@10
  void *v14; // r0@11
  __int64 v15; // r0@12
  bool v16; // zf@14
  int *v17; // r0@17
  signed int v18; // r1@17
  int *v19; // r2@17
  int v20; // t1@18
  __int64 v21; // r0@19
  bool v22; // zf@21
  int v23; // r4@24
  void **v24; // r0@24
  void *v25; // r0@24
  void *v26; // r0@25
  void **v27; // r0@28
  void *v28; // r0@28
  void *v29; // r0@29
  unsigned int *v30; // r2@30
  signed int v31; // r1@32
  int v32; // r0@34
  int v33; // r0@34
  char *v34; // r0@35
  int v35; // r4@37
  void **v36; // r0@37
  void *v37; // r0@37
  void *v38; // r0@38
  bool v39; // cf@40
  __int64 v40; // r0@40
  signed int v41; // r3@42
  void **v42; // r0@47
  void *v43; // r0@47
  void *v44; // r0@48
  void (__fastcall *v45)(int, int, signed int); // r3@51
  int v46; // r7@53
  int v47; // r4@55
  char *v48; // r4@56
  int v49; // r11@56
  int v50; // r4@57
  void (__fastcall *v51)(int, char *); // r11@57
  int v52; // r1@58
  _DWORD *v53; // r0@58
  _DWORD *v54; // r2@59
  void **v55; // r0@64
  void *v56; // r0@64
  void *v57; // r0@65
  __int64 v58; // r0@66
  signed int v59; // r3@68
  int v60; // r0@73
  _DWORD *v61; // r6@73
  int v62; // r11@73
  int v63; // r0@75
  int v64; // r0@75
  void **v65; // r0@76
  void *v66; // r0@76
  void *v67; // r0@77
  unsigned int *v68; // r2@78
  signed int v69; // r1@80
  UPNPInterface *v70; // r0@83
  int v71; // r4@85
  char *v72; // r0@86
  int v73; // r4@86
  int *v74; // r0@86
  void *v75; // r0@86
  void *v76; // r0@87
  __int64 v77; // r0@88
  void **v78; // r0@93
  void *v79; // r0@93
  unsigned int *v80; // r2@99
  signed int v81; // r1@101
  _DWORD *v82; // r5@107
  Social::GameConnectionInfo *v83; // r0@107
  int v84; // r1@107
  void *v85; // r0@107
  void **v86; // r0@109
  void *v87; // r0@109
  void **v88; // r0@115
  void *v89; // r0@115
  bool v90; // zf@121
  int v91; // r4@126
  void **v92; // r0@126
  void *v93; // r0@126
  void **v94; // r0@131
  void *v95; // r0@131
  void **v96; // r0@139
  void *v97; // r0@139
  __int64 v98; // r0@147
  int v99; // r4@150
  void **v100; // r0@150
  void *v101; // r0@150
  void *v102; // r0@151
  __int64 v103; // r0@155
  int v104; // r4@161
  void **v105; // r0@161
  void *v106; // r0@161
  void *v107; // r0@162
  __int64 v108; // r0@166
  unsigned int *v109; // r2@168
  signed int v110; // r1@170
  unsigned int *v111; // r2@172
  signed int v112; // r1@174
  unsigned int *v113; // r2@176
  signed int v114; // r1@178
  unsigned int *v115; // r2@180
  signed int v116; // r1@182
  unsigned int *v117; // r2@184
  signed int v118; // r1@186
  unsigned int *v119; // r2@188
  signed int v120; // r1@190
  unsigned int *v121; // r2@192
  signed int v122; // r1@194
  unsigned int *v123; // r2@196
  signed int v124; // r1@198
  unsigned int *v125; // r2@208
  signed int v126; // r1@210
  unsigned int *v127; // r2@212
  signed int v128; // r1@214
  unsigned int *v129; // r2@216
  signed int v130; // r1@218
  unsigned int *v131; // r2@220
  signed int v132; // r1@222
  unsigned int *v133; // r2@224
  signed int v134; // r1@226
  void (__fastcall *v135)(int, int, char *); // r4@230
  void (__fastcall *v136)(char *, int, signed int); // r3@230
  RakNet *result; // r0@234
  unsigned int *v138; // r2@236
  signed int v139; // r1@238
  unsigned int *v140; // r2@240
  signed int v141; // r1@242
  unsigned int *v142; // r2@244
  signed int v143; // r1@246
  unsigned int *v144; // r2@304
  signed int v145; // r1@306
  unsigned int *v146; // r2@308
  signed int v147; // r1@310
  unsigned int *v148; // r2@312
  signed int v149; // r1@314
  unsigned int *v150; // r2@316
  signed int v151; // r1@318
  unsigned int *v152; // r2@328
  signed int v153; // r1@330
  unsigned int *v154; // r2@332
  signed int v155; // r1@334
  unsigned int *v156; // r2@352
  signed int v157; // r1@354
  unsigned int *v158; // r2@356
  signed int v159; // r1@358
  int v160; // [sp+0h] [bp-B90h]@17
  int v161; // [sp+7Ch] [bp-B14h]@53
  int v162; // [sp+80h] [bp-B10h]@53
  int v163; // [sp+84h] [bp-B0Ch]@54
  RakNet::SystemAddress *v164; // [sp+88h] [bp-B08h]@54
  const void **v165; // [sp+8Ch] [bp-B04h]@54
  char v166; // [sp+90h] [bp-B00h]@231
  void (*v167)(void); // [sp+98h] [bp-AF8h]@230
  int v168; // [sp+9Ch] [bp-AF4h]@231
  int v169; // [sp+A4h] [bp-AECh]@47
  int v170; // [sp+ACh] [bp-AE4h]@47
  __int64 v171; // [sp+B0h] [bp-AE0h]@40
  int v172; // [sp+BCh] [bp-AD4h]@37
  int v173; // [sp+C4h] [bp-ACCh]@37
  __int16 v174; // [sp+C8h] [bp-AC8h]@34
  int v175; // [sp+CCh] [bp-AC4h]@35
  int v176; // [sp+D4h] [bp-ABCh]@37
  int v177; // [sp+108h] [bp-A88h]@139
  int v178; // [sp+110h] [bp-A80h]@139
  int v179; // [sp+118h] [bp-A78h]@24
  int v180; // [sp+120h] [bp-A70h]@24
  int v181; // [sp+128h] [bp-A68h]@126
  int v182; // [sp+130h] [bp-A60h]@126
  int v183; // [sp+138h] [bp-A58h]@76
  int v184; // [sp+140h] [bp-A50h]@76
  __int16 v185; // [sp+144h] [bp-A4Ch]@75
  int v186; // [sp+150h] [bp-A40h]@126
  int v187; // [sp+184h] [bp-A0Ch]@109
  int v188; // [sp+18Ch] [bp-A04h]@109
  __int64 v189; // [sp+190h] [bp-A00h]@66
  int v190; // [sp+19Ch] [bp-9F4h]@64
  int v191; // [sp+1A4h] [bp-9ECh]@64
  char v192; // [sp+1A8h] [bp-9E8h]@57
  char v193; // [sp+1E4h] [bp-9ACh]@56
  int v194; // [sp+1E8h] [bp-9A8h]@54
  unsigned __int16 v195; // [sp+220h] [bp-970h]@55
  int v196; // [sp+260h] [bp-930h]@131
  int v197; // [sp+268h] [bp-928h]@131
  int v198; // [sp+270h] [bp-920h]@150
  int v199; // [sp+278h] [bp-918h]@150
  char v200; // [sp+27Ch] [bp-914h]@19
  char v201; // [sp+2B8h] [bp-8D8h]@19
  int v202; // [sp+2C4h] [bp-8CCh]@150
  int v203; // [sp+2F8h] [bp-898h]@93
  int v204; // [sp+300h] [bp-890h]@93
  int v205; // [sp+308h] [bp-888h]@161
  int v206; // [sp+310h] [bp-880h]@161
  char v207; // [sp+314h] [bp-87Ch]@88
  int v208; // [sp+354h] [bp-83Ch]@86
  int v209; // [sp+35Ch] [bp-834h]@86
  char v210; // [sp+360h] [bp-830h]@86
  int v211; // [sp+3A0h] [bp-7F0h]@115
  int v212; // [sp+3A8h] [bp-7E8h]@115
  int v213; // [sp+3B0h] [bp-7E0h]@28
  int v214; // [sp+3B8h] [bp-7D8h]@28
  char v215; // [sp+3BCh] [bp-7D4h]@12
  int v216; // [sp+3FCh] [bp-794h]@10
  int v217; // [sp+404h] [bp-78Ch]@10
  char v218; // [sp+408h] [bp-788h]@10
  char v219; // [sp+448h] [bp-748h]@35
  int v220; // [sp+44Ch] [bp-744h]@35
  char v221; // [sp+4E0h] [bp-6B0h]@138
  char v222; // [sp+4E2h] [bp-6AEh]@138
  char v223; // [sp+578h] [bp-618h]@137
  char v224; // [sp+610h] [bp-580h]@24
  int v225; // [sp+614h] [bp-57Ch]@24
  int v226; // [sp+6A8h] [bp-4E8h]@21
  int v227; // [sp+740h] [bp-450h]@121
  char v228; // [sp+7D8h] [bp-3B8h]@56
  int v229; // [sp+7DCh] [bp-3B4h]@54
  char v230; // [sp+870h] [bp-320h]@130
  char v231; // [sp+872h] [bp-31Eh]@130
  char v232; // [sp+908h] [bp-288h]@129
  char v233; // [sp+9A0h] [bp-1F0h]@17
  __int64 v234; // [sp+9A4h] [bp-1ECh]@19
  int v235; // [sp+9ACh] [bp-1E4h]@17
  int v236; // [sp+A38h] [bp-158h]@14
  char v237; // [sp+AD0h] [bp-C0h]@91
  RakNet *v238; // [sp+B68h] [bp-28h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v238 = _stack_chk_guard;
  if ( *(_BYTE *)(a1 + 255) )
  {
    v6 = *(_DWORD *)(a1 + 256) - 1;
    *(_DWORD *)(v3 + 256) = v6;
    if ( !v6 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 164))(v3);
  }
  (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 168))(v3);
  (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 200))(v3);
  (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 172))(v3);
  switch ( *(_DWORD *)(v3 + 8) )
    case 1:
      v7 = (UPNPInterface *)(unsigned __int16)(*(int (__fastcall **)(int))(*(_DWORD *)v3 + 228))(v3);
      v8 = (unsigned __int16)v7 == 4;
      if ( (unsigned __int16)v7 != 4 )
      {
        v7 = *(UPNPInterface **)(v3 + 76);
        v8 = v7 == 0;
      }
      if ( !v8 )
        if ( UPNPInterface::getPortMappingv4(v7)[268] )
        {
          v9 = *((_WORD *)UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76)) + 130);
          if ( v9 == (*(int (__fastcall **)(_DWORD))(**(_DWORD **)(v3 + 72) + 64))(*(_DWORD *)(v3 + 72)) )
          {
            v10 = UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76));
            sub_21E94B4((void **)&v217, v10 + 1);
            v11 = *((_WORD *)UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76)) + 129);
            v12 = (int *)sub_21E94B4((void **)&v216, (const char *)&unk_257BC67);
            Social::GameConnectionInfo::GameConnectionInfo((int)&v218, 4, &v217, v11, v12);
            v13 = (void *)(v216 - 12);
            if ( (int *)(v216 - 12) != &dword_28898C0 )
            {
              v152 = (unsigned int *)(v216 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v153 = __ldrex(v152);
                while ( __strex(v153 - 1, v152) );
              }
              else
                v153 = (*v152)--;
              if ( v153 <= 0 )
                j_j_j_j__ZdlPv_9(v13);
            }
            v14 = (void *)(v217 - 12);
            if ( (int *)(v217 - 12) != &dword_28898C0 )
              v154 = (unsigned int *)(v217 - 4);
                  v155 = __ldrex(v154);
                while ( __strex(v155 - 1, v154) );
                v155 = (*v154)--;
              if ( v155 <= 0 )
                j_j_j_j__ZdlPv_9(v14);
            Social::GameConnectionInfo::GameConnectionInfo(
              (Social::GameConnectionInfo *)&v215,
              (const Social::GameConnectionInfo *)&v218);
            v15 = *(_QWORD *)(v3 + 184);
            if ( (_DWORD)v15 == HIDWORD(v15) )
              std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::GameConnectionInfo const&>(
                (unsigned __int64 *)(v3 + 180),
                (const Social::GameConnectionInfo *)&v215);
            else
              Social::GameConnectionInfo::GameConnectionInfo(
                (Social::GameConnectionInfo *)v15,
              *(_DWORD *)(v3 + 184) += 60;
            if ( *(_BYTE *)(v3 + 176) )
              v108 = *(_QWORD *)(v3 + 92);
              if ( (_DWORD)v108 == HIDWORD(v108) )
                std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::GameConnectionInfo const&>(
                  (unsigned __int64 *)(v3 + 88),
                  (const Social::GameConnectionInfo *)&v215);
                Social::GameConnectionInfo::GameConnectionInfo(
                  (Social::GameConnectionInfo *)v108,
                *(_DWORD *)(v3 + 92) += 60;
            Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v215);
            (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 164))(v3);
            Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v218);
          }
        }
      goto def_137F1B6;
    case 3:
      (*(void (__fastcall **)(int *))(**(_DWORD **)(v3 + 72) + 40))(&v236);
      v16 = (v236 & 0xFF0000) == 0;
      if ( v236 & 0xFF0000 )
        v16 = (unsigned __int8)v236 == 0;
      if ( v16 )
        (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v232);
        if ( v232 )
          (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v230);
          if ( !v231 )
            sub_21E94B4((void **)&v197, "NAT");
            v94 = sub_21E94B4((void **)&v196, "NAT punchthrough failed on Host");
            Social::MultiplayerService::_changeMultiplayerState(v3, 1, (const char **)&v197, 0, (const char **)v94);
            v95 = (void *)(v196 - 12);
            if ( (int *)(v196 - 12) != &dword_28898C0 )
              v156 = (unsigned int *)(v196 - 4);
                  v157 = __ldrex(v156);
                while ( __strex(v157 - 1, v156) );
                v157 = (*v156)--;
              if ( v157 <= 0 )
                j_j_j_j__ZdlPv_9(v95);
            v29 = (void *)(v197 - 12);
            if ( (int *)(v197 - 12) != &dword_28898C0 )
              v30 = (unsigned int *)(v197 - 4);
              if ( !&pthread_create )
                goto LABEL_157;
              __dmb();
              do
                v31 = __ldrex(v30);
              while ( __strex(v31 - 1, v30) );
              goto LABEL_158;
      else
        (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v233);
        v17 = &v235;
        v18 = 124;
        v19 = &v160;
        do
          v20 = *v17;
          ++v17;
          v18 -= 4;
          *v19 = v20;
          ++v19;
        while ( v18 );
        Social::GameConnectionInfo::GameConnectionInfo(&v201, 3, v234);
        Social::GameConnectionInfo::GameConnectionInfo(
          (Social::GameConnectionInfo *)&v200,
          (const Social::GameConnectionInfo *)&v201);
        v21 = *(_QWORD *)(v3 + 184);
        if ( (_DWORD)v21 == HIDWORD(v21) )
          std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::GameConnectionInfo const&>(
            (unsigned __int64 *)(v3 + 180),
            (const Social::GameConnectionInfo *)&v200);
        else
          Social::GameConnectionInfo::GameConnectionInfo(
            (Social::GameConnectionInfo *)v21,
          *(_DWORD *)(v3 + 184) += 60;
        if ( *(_BYTE *)(v3 + 176) )
          v98 = *(_QWORD *)(v3 + 92);
          if ( (_DWORD)v98 == HIDWORD(v98) )
            std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::GameConnectionInfo const&>(
              (unsigned __int64 *)(v3 + 88),
              (const Social::GameConnectionInfo *)&v200);
          else
              (Social::GameConnectionInfo *)v98,
            *(_DWORD *)(v3 + 92) += 60;
        Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v200);
        (*(void (__fastcall **)(_DWORD))(*(_DWORD *)v3 + 164))(v3);
        sub_21E94B4((void **)&v199, "NAT");
        v99 = v202;
        v100 = sub_21E94B4((void **)&v198, (const char *)&unk_257BC67);
        Social::MultiplayerService::_changeMultiplayerState(v3, 4, (const char **)&v199, v99, (const char **)v100);
        v101 = (void *)(v198 - 12);
        if ( (int *)(v198 - 12) != &dword_28898C0 )
          v113 = (unsigned int *)(v198 - 4);
          if ( &pthread_create )
            __dmb();
            do
              v114 = __ldrex(v113);
            while ( __strex(v114 - 1, v113) );
            v114 = (*v113)--;
          if ( v114 <= 0 )
            j_j_j_j__ZdlPv_9(v101);
        v102 = (void *)(v199 - 12);
        if ( (int *)(v199 - 12) != &dword_28898C0 )
          v115 = (unsigned int *)(v199 - 4);
              v116 = __ldrex(v115);
            while ( __strex(v116 - 1, v115) );
            v116 = (*v115)--;
          if ( v116 <= 0 )
            j_j_j_j__ZdlPv_9(v102);
        Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v201);
    case 7:
      (*(void (__fastcall **)(int *))(**(_DWORD **)(v3 + 72) + 40))(&v226);
      v22 = (v226 & 0xFF0000) == 0;
      if ( v226 & 0xFF0000 )
        v22 = (unsigned __int8)v226 == 0;
      if ( v22 )
        (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v223);
        if ( v223 )
          (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v221);
          if ( !v222 )
            sub_21E94B4((void **)&v178, "NAT");
            v96 = sub_21E94B4((void **)&v177, "NAT punchthrough failed on Client");
            Social::MultiplayerService::_changeMultiplayerState(v3, 9, (const char **)&v178, 0, (const char **)v96);
            v97 = (void *)(v177 - 12);
            if ( (int *)(v177 - 12) != &dword_28898C0 )
              v158 = (unsigned int *)(v177 - 4);
                  v159 = __ldrex(v158);
                while ( __strex(v159 - 1, v158) );
                v159 = (*v158)--;
              if ( v159 <= 0 )
                j_j_j_j__ZdlPv_9(v97);
            v29 = (void *)(v178 - 12);
            if ( (int *)(v178 - 12) != &dword_28898C0 )
              v30 = (unsigned int *)(v178 - 4);
        sub_21E94B4((void **)&v180, "NAT");
        (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v224);
        v23 = RakNet::SystemAddress::GetPort((RakNet::SystemAddress *)&v225);
        v24 = sub_21E94B4((void **)&v179, (const char *)&unk_257BC67);
        Social::MultiplayerService::_changeMultiplayerState(v3, 8, (const char **)&v180, v23, (const char **)v24);
        v25 = (void *)(v179 - 12);
        if ( (int *)(v179 - 12) != &dword_28898C0 )
          v109 = (unsigned int *)(v179 - 4);
              v110 = __ldrex(v109);
            while ( __strex(v110 - 1, v109) );
            v110 = (*v109)--;
          if ( v110 <= 0 )
            j_j_j_j__ZdlPv_9(v25);
        v26 = (void *)(v180 - 12);
        if ( (int *)(v180 - 12) != &dword_28898C0 )
          v111 = (unsigned int *)(v180 - 4);
              v112 = __ldrex(v111);
            while ( __strex(v112 - 1, v111) );
            v112 = (*v111)--;
          if ( v112 <= 0 )
            j_j_j_j__ZdlPv_9(v26);
        Social::MultiplayerService::_updateClientConnectionStateInLobby((Social::MultiplayerService *)v3);
    case 2:
      if ( (unsigned __int16)(*(int (__fastcall **)(int))(*(_DWORD *)v3 + 228))(v3) == 4 )
        sub_21E94B4((void **)&v214, "UPNP");
        v27 = sub_21E94B4((void **)&v213, (const char *)&unk_257BC67);
        Social::MultiplayerService::_changeMultiplayerState(v3, 1, (const char **)&v214, 0, (const char **)v27);
        v28 = (void *)(v213 - 12);
        if ( (int *)(v213 - 12) != &dword_28898C0 )
          v117 = (unsigned int *)(v213 - 4);
              v118 = __ldrex(v117);
            while ( __strex(v118 - 1, v117) );
            v118 = (*v117)--;
          if ( v118 <= 0 )
            j_j_j_j__ZdlPv_9(v28);
        v29 = (void *)(v214 - 12);
        if ( (int *)(v214 - 12) != &dword_28898C0 )
          v30 = (unsigned int *)(v214 - 4);
          if ( !&pthread_create )
            goto LABEL_157;
          __dmb();
          do
            v31 = __ldrex(v30);
          while ( __strex(v31 - 1, v30) );
          goto LABEL_158;
        sub_21E94B4((void **)&v212, "UPNP");
        v88 = sub_21E94B4((void **)&v211, (const char *)&unk_257BC67);
        Social::MultiplayerService::_changeMultiplayerState(v3, 11, (const char **)&v212, 0, (const char **)v88);
        v89 = (void *)(v211 - 12);
        if ( (int *)(v211 - 12) != &dword_28898C0 )
          v119 = (unsigned int *)(v211 - 4);
              v120 = __ldrex(v119);
            while ( __strex(v120 - 1, v119) );
            v120 = (*v119)--;
          if ( v120 <= 0 )
            j_j_j_j__ZdlPv_9(v89);
        v29 = (void *)(v212 - 12);
        if ( (int *)(v212 - 12) != &dword_28898C0 )
          v30 = (unsigned int *)(v212 - 4);
    case 8:
      v32 = NetworkHandler::getConnector(*(NetworkHandler **)(v3 + 68));
      v33 = (*(int (**)(void))(*(_DWORD *)v32 + 60))();
      Social::MultiplayerGameInfo::getOptimumConnection((Social::MultiplayerGameInfo *)&v174, v3 + 88, v33);
      if ( v174 == 3 )
        (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v219);
        v34 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v220, 0, 124);
        if ( !sub_21E7D6C((const void **)&v175, v34) )
          *(_BYTE *)(v3 + 254) = 1;
        sub_21E94B4((void **)&v173, "NAT");
        v35 = v176;
        v36 = sub_21E94B4((void **)&v172, (const char *)&unk_257BC67);
        Social::MultiplayerService::_changeMultiplayerState(v3, 9, (const char **)&v173, v35, (const char **)v36);
        v37 = (void *)(v172 - 12);
        if ( (int *)(v172 - 12) != &dword_28898C0 )
          v125 = (unsigned int *)(v172 - 4);
              v126 = __ldrex(v125);
            while ( __strex(v126 - 1, v125) );
            v126 = (*v125)--;
          if ( v126 <= 0 )
            j_j_j_j__ZdlPv_9(v37);
        v38 = (void *)(v173 - 12);
        if ( (int *)(v173 - 12) != &dword_28898C0 )
          v127 = (unsigned int *)(v173 - 4);
              v128 = __ldrex(v127);
            while ( __strex(v128 - 1, v127) );
            v128 = (*v127)--;
          if ( v128 <= 0 )
            j_j_j_j__ZdlPv_9(v38);
      sub_21E034C(&v171);
      v40 = v171 - *(_QWORD *)(v3 + 264);
      v39 = (unsigned int)v40 >= 0xE8D60800;
      LODWORD(v40) = 0;
      if ( !v39 )
        LODWORD(v40) = 1;
      v41 = 0;
      if ( SHIDWORD(v40) < 41 )
        v41 = 1;
      if ( HIDWORD(v40) == 41 )
        v41 = v40;
      if ( !v41 )
        sub_21E94B4((void **)&v170, "NAT");
        v42 = sub_21E94B4((void **)&v169, "Timed out waiting for Host NAT");
        Social::MultiplayerService::_changeMultiplayerState(v3, 9, (const char **)&v170, 0, (const char **)v42);
        v43 = (void *)(v169 - 12);
        if ( (int *)(v169 - 12) != &dword_28898C0 )
          v129 = (unsigned int *)(v169 - 4);
              v130 = __ldrex(v129);
            while ( __strex(v130 - 1, v129) );
            v130 = (*v129)--;
          if ( v130 <= 0 )
            j_j_j_j__ZdlPv_9(v43);
        v44 = (void *)(v170 - 12);
        if ( (int *)(v170 - 12) != &dword_28898C0 )
          v131 = (unsigned int *)(v170 - 4);
              v132 = __ldrex(v131);
            while ( __strex(v132 - 1, v131) );
            v132 = (*v131)--;
          if ( v132 <= 0 )
            j_j_j_j__ZdlPv_9(v44);
      Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v174);
    case 9:
      if ( *(_DWORD *)(v3 + 20) )
        (*(void (__fastcall **)(int, signed int, int, _DWORD))(v3 + 24))(v3 + 12, 1, v3 + 88, *(_BYTE *)(v3 + 254));
        v45 = *(void (__fastcall **)(int, int, signed int))(v3 + 20);
        if ( v45 )
          v45(v3 + 12, v3 + 12, 3);
          *(_DWORD *)(v3 + 20) = 0;
          *(_DWORD *)(v3 + 24) = 0;
    case 4:
      v161 = v4;
      v162 = v5;
      v46 = *(_DWORD *)(v3 + 200);
      if ( v46 )
        v163 = v3 + 192;
        v165 = (const void **)&v194;
        v164 = (RakNet::SystemAddress *)&v229;
            (Social::GameConnectionInfo *)&v195,
            (const Social::GameConnectionInfo *)(v46 + 12));
          v47 = v195;
          Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v195);
          if ( v47 == 3 )
            (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v228);
            v48 = RakNet::SystemAddress::ToString(v164, 0, 124);
              (Social::GameConnectionInfo *)&v193,
              (const Social::GameConnectionInfo *)(v46 + 12));
            v49 = sub_21E7D6C(v165, v48);
            Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v193);
            if ( v49 )
              v50 = *(_DWORD *)(v3 + 72);
              v51 = *(void (__fastcall **)(int, char *))(*(_DWORD *)v50 + 44);
                (Social::GameConnectionInfo *)&v192,
                (const Social::GameConnectionInfo *)(v46 + 12));
              v51(v50, &v192);
              Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v192);
            v52 = *(_DWORD *)(v46 + 72) % (unsigned int)(*(_QWORD *)(v3 + 192) >> 32);
            v53 = *(_DWORD **)(*(_QWORD *)(v3 + 192) + 4 * v52);
              v54 = v53;
              v53 = (_DWORD *)*v53;
            while ( v53 != (_DWORD *)v46 );
            v46 = std::_Hashtable<std::string,std::pair<std::string const,Social::ClientConnectionState>,std::allocator<std::pair<std::string const,Social::ClientConnectionState>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_erase(
                    v163,
                    v52,
                    v54,
                    v46);
            v46 = *(_DWORD *)v46;
        while ( v46 );
      if ( !*(_DWORD *)(v3 + 204) )
        sub_21E94B4((void **)&v191, (const char *)&unk_257BC67);
        v55 = sub_21E94B4((void **)&v190, (const char *)&unk_257BC67);
        Social::MultiplayerService::_changeMultiplayerState(v3, 1, (const char **)&v191, 0, (const char **)v55);
        v56 = (void *)(v190 - 12);
        if ( (int *)(v190 - 12) != &dword_28898C0 )
          v140 = (unsigned int *)(v190 - 4);
              v141 = __ldrex(v140);
            while ( __strex(v141 - 1, v140) );
            v141 = (*v140)--;
          if ( v141 <= 0 )
            j_j_j_j__ZdlPv_9(v56);
        v57 = (void *)(v191 - 12);
        if ( (int *)(v191 - 12) != &dword_28898C0 )
          v142 = (unsigned int *)(v191 - 4);
              v143 = __ldrex(v142);
            while ( __strex(v143 - 1, v142) );
            v143 = (*v142)--;
          if ( v143 <= 0 )
            j_j_j_j__ZdlPv_9(v57);
      sub_21E034C(&v189);
      v58 = v189 - *(_QWORD *)(v3 + 264);
      v39 = (unsigned int)v58 >= 0xE8D60800;
      LODWORD(v58) = 0;
        LODWORD(v58) = 1;
      v59 = 0;
      if ( SHIDWORD(v58) < 41 )
        v59 = 1;
      if ( HIDWORD(v58) == 41 )
        v59 = v58;
      v5 = v162;
      v4 = v161;
      if ( !v59 )
        v60 = v3;
        v61 = *(_DWORD **)(v3 + 200);
        v62 = v60;
        while ( v61 )
          v82 = v61;
          v83 = (Social::GameConnectionInfo *)(v61 + 3);
          v61 = (_DWORD *)*v61;
          Social::GameConnectionInfo::~GameConnectionInfo(v83);
          v84 = v82[1];
          v85 = (void *)(v84 - 12);
          if ( (int *)(v84 - 12) != &dword_28898C0 )
            v80 = (unsigned int *)(v84 - 4);
            if ( &pthread_create )
                v81 = __ldrex(v80);
              while ( __strex(v81 - 1, v80) );
              v81 = (*v80)--;
            if ( v81 <= 0 )
              j_j_j_j__ZdlPv_9(v85);
          operator delete(v82);
        v3 = v62;
        _aeabi_memclr4(*(_QWORD *)(v62 + 192), 4 * (*(_QWORD *)(v62 + 192) >> 32));
        *(_DWORD *)(v62 + 200) = 0;
        *(_DWORD *)(v62 + 204) = 0;
        sub_21E94B4((void **)&v188, "NAT");
        v86 = sub_21E94B4((void **)&v187, "Timed out waiting for Client NAT");
        Social::MultiplayerService::_changeMultiplayerState(v62, 1, (const char **)&v188, 0, (const char **)v86);
        v87 = (void *)(v187 - 12);
        if ( (int *)(v187 - 12) != &dword_28898C0 )
          v133 = (unsigned int *)(v187 - 4);
              v134 = __ldrex(v133);
            while ( __strex(v134 - 1, v133) );
            v134 = (*v133)--;
          if ( v134 <= 0 )
            j_j_j_j__ZdlPv_9(v87);
        v29 = (void *)(v188 - 12);
        if ( (int *)(v188 - 12) != &dword_28898C0 )
          v30 = (unsigned int *)(v188 - 4);
    case 6:
      v63 = NetworkHandler::getConnector(*(NetworkHandler **)(v3 + 68));
      v64 = (*(int (**)(void))(*(_DWORD *)v63 + 60))();
      Social::MultiplayerGameInfo::getOptimumConnection((Social::MultiplayerGameInfo *)&v185, v3 + 88, v64);
      if ( v185 == 4 )
        sub_21E94B4((void **)&v184, "UPNP");
        v65 = sub_21E94B4((void **)&v183, (const char *)&unk_257BC67);
        Social::MultiplayerService::_changeMultiplayerState(v3, 9, (const char **)&v184, 0, (const char **)v65);
        v66 = (void *)(v183 - 12);
        if ( (int *)(v183 - 12) != &dword_28898C0 )
          v121 = (unsigned int *)(v183 - 4);
              v122 = __ldrex(v121);
            while ( __strex(v122 - 1, v121) );
            v122 = (*v121)--;
          if ( v122 <= 0 )
            j_j_j_j__ZdlPv_9(v66);
        v67 = (void *)(v184 - 12);
        if ( (int *)(v184 - 12) != &dword_28898C0 )
          v68 = (unsigned int *)(v184 - 4);
              v69 = __ldrex(v68);
            while ( __strex(v69 - 1, v68) );
            goto LABEL_205;
          goto LABEL_204;
        (*(void (__fastcall **)(int *))(**(_DWORD **)(v3 + 72) + 40))(&v227);
        v90 = (v227 & 0xFF0000) == 0;
        if ( v227 & 0xFF0000 )
          v90 = (unsigned __int8)v227 == 0;
        if ( v90 )
          (*(void (**)(void))(**(_DWORD **)(v3 + 72) + 36))();
        sub_21E94B4((void **)&v182, "NAT");
        v91 = v186;
        v92 = sub_21E94B4((void **)&v181, (const char *)&unk_257BC67);
        Social::MultiplayerService::_changeMultiplayerState(v3, 7, (const char **)&v182, v91, (const char **)v92);
        v93 = (void *)(v181 - 12);
        if ( (int *)(v181 - 12) != &dword_28898C0 )
          v123 = (unsigned int *)(v181 - 4);
              v124 = __ldrex(v123);
            while ( __strex(v124 - 1, v123) );
            v124 = (*v123)--;
          if ( v124 <= 0 )
            j_j_j_j__ZdlPv_9(v93);
        v67 = (void *)(v182 - 12);
        if ( (int *)(v182 - 12) != &dword_28898C0 )
          v68 = (unsigned int *)(v182 - 4);
LABEL_205:
            if ( v69 <= 0 )
              j_j_j_j__ZdlPv_9(v67);
            goto LABEL_128;
LABEL_204:
          v69 = (*v68)--;
          goto LABEL_205;
LABEL_128:
      Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v185);
def_137F1B6:
      v135 = *(void (__fastcall **)(int, int, char *))(*(_DWORD *)v3 + 224);
      v167 = 0;
      v136 = *(void (__fastcall **)(char *, int, signed int))(v4 + 8);
      if ( v136 )
        v136(&v166, v4, 2);
        v168 = *(_DWORD *)(v4 + 12);
        v167 = *(void (**)(void))(v4 + 8);
      v135(v3, v5, &v166);
      if ( v167 )
        v167();
      result = (RakNet *)(_stack_chk_guard - v238);
      if ( _stack_chk_guard != v238 )
        _stack_chk_fail(result);
      return result;
    case 0xC:
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 232))(v3);
    case 0xB:
      v70 = *(UPNPInterface **)(v3 + 76);
      if ( v70
        && UPNPInterface::getPortMappingv4(v70)[268]
        && (v71 = *((_WORD *)UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76)) + 130),
            v71 == (*(int (__fastcall **)(_DWORD))(**(_DWORD **)(v3 + 72) + 64))(*(_DWORD *)(v3 + 72))) )
        v72 = UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76));
        sub_21E94B4((void **)&v209, v72 + 1);
        v73 = *((_WORD *)UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76)) + 129);
        v74 = (int *)sub_21E94B4((void **)&v208, (const char *)&unk_257BC67);
        Social::GameConnectionInfo::GameConnectionInfo((int)&v210, 4, &v209, v73, v74);
        v75 = (void *)(v208 - 12);
        if ( (int *)(v208 - 12) != &dword_28898C0 )
          v144 = (unsigned int *)(v208 - 4);
              v145 = __ldrex(v144);
            while ( __strex(v145 - 1, v144) );
            v145 = (*v144)--;
          if ( v145 <= 0 )
            j_j_j_j__ZdlPv_9(v75);
        v76 = (void *)(v209 - 12);
        if ( (int *)(v209 - 12) != &dword_28898C0 )
          v146 = (unsigned int *)(v209 - 4);
              v147 = __ldrex(v146);
            while ( __strex(v147 - 1, v146) );
            v147 = (*v146)--;
          if ( v147 <= 0 )
            j_j_j_j__ZdlPv_9(v76);
          (Social::GameConnectionInfo *)&v207,
          (const Social::GameConnectionInfo *)&v210);
        v77 = *(_QWORD *)(v3 + 184);
        if ( (_DWORD)v77 == HIDWORD(v77) )
            (const Social::GameConnectionInfo *)&v207);
            (Social::GameConnectionInfo *)v77,
          v103 = *(_QWORD *)(v3 + 92);
          if ( (_DWORD)v103 == HIDWORD(v103) )
              (const Social::GameConnectionInfo *)&v207);
              (Social::GameConnectionInfo *)v103,
        Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v207);
        sub_21E94B4((void **)&v206, "UPNP");
        v104 = *((_WORD *)UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76)) + 129);
        v105 = sub_21E94B4((void **)&v205, "UPNP setup on player join");
        Social::MultiplayerService::_changeMultiplayerState(v3, 1, (const char **)&v206, v104, (const char **)v105);
        v106 = (void *)(v205 - 12);
        if ( (int *)(v205 - 12) != &dword_28898C0 )
          v148 = (unsigned int *)(v205 - 4);
              v149 = __ldrex(v148);
            while ( __strex(v149 - 1, v148) );
            v149 = (*v148)--;
          if ( v149 <= 0 )
            j_j_j_j__ZdlPv_9(v106);
        v107 = (void *)(v206 - 12);
        if ( (int *)(v206 - 12) != &dword_28898C0 )
          v150 = (unsigned int *)(v206 - 4);
              v151 = __ldrex(v150);
            while ( __strex(v151 - 1, v150) );
            v151 = (*v150)--;
          if ( v151 <= 0 )
            j_j_j_j__ZdlPv_9(v107);
        Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v210);
      else if ( *((_DWORD *)UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76)) + 66) != 1 )
        (*(void (__fastcall **)(char *))(**(_DWORD **)(v3 + 72) + 40))(&v237);
        if ( !v237 )
        sub_21E94B4((void **)&v204, "NAT");
        v78 = sub_21E94B4((void **)&v203, "UPNP setup failed on host, trying NAT");
        Social::MultiplayerService::_changeMultiplayerState(v3, 3, (const char **)&v204, 0, (const char **)v78);
        v79 = (void *)(v203 - 12);
        if ( (int *)(v203 - 12) != &dword_28898C0 )
          v138 = (unsigned int *)(v203 - 4);
              v139 = __ldrex(v138);
            while ( __strex(v139 - 1, v138) );
            v139 = (*v138)--;
          if ( v139 <= 0 )
            j_j_j_j__ZdlPv_9(v79);
        v29 = (void *)(v204 - 12);
        if ( (int *)(v204 - 12) != &dword_28898C0 )
          v30 = (unsigned int *)(v204 - 4);
              v31 = __ldrex(v30);
            while ( __strex(v31 - 1, v30) );
LABEL_157:
            v31 = (*v30)--;
LABEL_158:
          if ( v31 <= 0 )
            j_j_j_j__ZdlPv_9(v29);
    default:
}


int __fastcall Social::Events::AggregationEventListener::AggregationEventListener(__int64 this, unsigned int a2, unsigned int a3, unsigned int a4)
{
  __int64 v4; // kr00_8@1
  unsigned int v5; // r9@1
  unsigned int v6; // r8@1
  double v7; // r0@1
  int v8; // r6@3
  void *v9; // r5@3
  unsigned int v10; // r0@4
  int v11; // r6@6
  void *v12; // r5@6
  int v14; // [sp+0h] [bp-28h]@7

  v4 = this;
  v5 = a3;
  v6 = a2;
  *(_DWORD *)this = &off_2719E18;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 1065353216;
  *(_DWORD *)(this + 24) = 0;
  LODWORD(this) = this + 20;
  v7 = COERCE_DOUBLE(__PAIR__(10, sub_21E6254(*(double *)&this)));
  *(_DWORD *)(v4 + 8) = LODWORD(v7);
  if ( LODWORD(v7) == 1 )
  {
    *(_DWORD *)(v4 + 28) = 0;
    v9 = (void *)(v4 + 28);
  }
  else
    if ( LODWORD(v7) >= 0x40000000 )
      sub_21E57F4();
    v8 = 4 * LODWORD(v7);
    v9 = j_operator new(4 * LODWORD(v7));
    j___aeabi_memclr4_0((int)v9, v8);
  *(_DWORD *)(v4 + 4) = v9;
  *(_DWORD *)(v4 + 40) = 0;
  *(_DWORD *)(v4 + 44) = 0;
  *(_DWORD *)(v4 + 48) = 1065353216;
  LODWORD(v7) = v4 + 48;
  *(_DWORD *)(LODWORD(v7) + 4) = 0;
  v10 = sub_21E6254(v7);
  *(_DWORD *)(v4 + 36) = v10;
  if ( v10 == 1 )
    *(_DWORD *)(v4 + 56) = 0;
    v12 = (void *)(v4 + 56);
    if ( v10 >= 0x40000000 )
    v11 = 4 * v10;
    v12 = j_operator new(4 * v10);
    j___aeabi_memclr4_0((int)v12, v11);
  *(_DWORD *)(v4 + 32) = v12;
  *(_DWORD *)(v4 + 92) = 0;
  *(_DWORD *)(v4 + 60) = 0;
  *(_DWORD *)(v4 + 64) = HIDWORD(v4);
  *(_DWORD *)(v4 + 68) = v6;
  *(_DWORD *)(v4 + 72) = HIDWORD(v4);
  *(_DWORD *)(v4 + 76) = v5;
  *(_DWORD *)(v4 + 80) = a4;
  *(_DWORD *)(v4 + 84) = v5;
  *(_DWORD *)(v4 + 88) = 0;
  sub_21E034C(&v14);
  *(_QWORD *)(v4 + 88) = *(_QWORD *)&v14;
  return v4;
}


void __fastcall Social::ClientConnectionState::fromJson(Social::ClientConnectionState *this, const web::json::value *a2)
{
  Social::ClientConnectionState *v2; // r5@1
  web::json::value *v3; // r6@1
  char *v4; // r4@1
  int i; // r6@1
  __int64 v6; // kr00_8@1
  unsigned int *v7; // r2@3
  signed int v8; // r1@5
  void *v9; // r0@18
  __int16 v10; // [sp+34h] [bp-6Ch]@15
  int v11; // [sp+38h] [bp-68h]@15
  int v12; // [sp+3Ch] [bp-64h]@15
  int v13; // [sp+40h] [bp-60h]@15
  int v14; // [sp+44h] [bp-5Ch]@15
  int v15; // [sp+48h] [bp-58h]@15
  int v16; // [sp+64h] [bp-3Ch]@15
  int v17; // [sp+68h] [bp-38h]@15
  char v18; // [sp+6Ch] [bp-34h]@15
  int v19; // [sp+70h] [bp-30h]@11
  int v20; // [sp+74h] [bp-2Ch]@3

  v2 = this;
  v3 = a2;
  *(_DWORD *)this = 0;
  v4 = (char *)this + 4;
  Social::GameConnectionInfo::GameConnectionInfo((Social::ClientConnectionState *)((char *)this + 4));
  v6 = *(_QWORD *)web::json::value::as_object(v3);
  for ( i = v6; i != HIDWORD(v6); i += 8 )
  {
    sub_21E8AF4(&v20, (int *)i);
    web::json::value::value((web::json::value *)&v19, (const web::json::value *)(i + 4));
    if ( !sub_21E7D6C((const void **)&v20, "State") && web::json::value::is_integer((web::json::value *)&v19) == 1 )
      *(_DWORD *)v2 = web::json::value::as_integer((web::json::value *)&v19);
    if ( !sub_21E7D6C((const void **)&v20, "ConnectionInfo") )
    {
      Social::GameConnectionInfo::fromJson((Social::GameConnectionInfo *)&v10, (const web::json::value *)&v19);
      *(_WORD *)v4 = v10;
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
        (int *)v2 + 2,
        &v11);
        (int *)v2 + 3,
        &v12);
      *((_DWORD *)v2 + 4) = v13;
        (int *)v2 + 5,
        &v14);
      std::_Hashtable<std::string,std::string,std::allocator<std::string>,std::__detail::_Identity,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,true,true>>::_M_move_assign(
        (int)v2 + 24,
        (int)&v15);
        (int *)v2 + 13,
        &v16);
        (int *)v2 + 14,
        &v17);
      *((_BYTE *)v2 + 60) = v18;
      Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v10);
    }
    if ( v19 )
      (*(void (**)(void))(*(_DWORD *)v19 + 96))();
    v9 = (void *)(v20 - 12);
    if ( (int *)(v20 - 12) != &dword_28898C0 )
      v7 = (unsigned int *)(v20 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
  }
}


int __fastcall Social::MultiplayerXBL::setInRegionPage(int result, bool a2)
{
  *(_BYTE *)(result + 440) = a2;
  return result;
}


    if ( Social::User::getGameControllerId(*(Social::User **)v3) == v1[1] )
{
      v34 = *(Social::User **)v3;
      v5 = *(_DWORD *)(v3 + 4);
      v6 = v35;
      if ( v5 != v35 )
      {
        if ( v5 )
        {
          v7 = (unsigned int *)(v5 + 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v8 = __ldrex(v7);
            while ( __strex(v8 + 1, v7) );
            v6 = v35;
          }
          else
            ++*v7;
        }
        if ( v6 )
          v9 = (unsigned int *)(v6 + 4);
              v10 = __ldrex(v9);
            while ( __strex(v10 - 1, v9) );
            v10 = (*v9)--;
          if ( v10 == 1 )
            v11 = (unsigned int *)(v6 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
            if ( &pthread_create )
            {
              __dmb();
              do
                v12 = __ldrex(v11);
              while ( __strex(v12 - 1, v11) );
            }
            else
              v12 = (*v11)--;
            if ( v12 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
        v35 = v5;
      }
      v13 = operator new(4u);
      *v13 = &v34;
      v14 = (void (__cdecl *)(_DWORD))sub_10280E4;
      v31 = v13;
      v32 = sub_10280E4;
      v33 = sub_10280D6;
      v15 = (int *)(*(_QWORD *)(v2 + 140) >> 32);
      v16 = (int *)*(_QWORD *)(v2 + 140);
      if ( v16 == v15 )
        goto LABEL_75;
      do
        if ( !v14 )
          sub_119C8E4();
        v33(&v31, *v16);
        v14 = (void (__cdecl *)(_DWORD))v32;
        ++v16;
      while ( v15 != v16 );
      if ( v32 )
LABEL_75:
        v14(&v31);
      v17 = *(_DWORD *)(v2 + 56);
      v18 = v2 + 52;
      if ( v17 )
        v19 = v2 + 52;
        do
          v18 = v17;
          while ( *(_DWORD *)(v18 + 16) < v1[1] )
            v18 = *(_DWORD *)(v18 + 12);
            if ( !v18 )
              v18 = v19;
              goto LABEL_41;
          v17 = *(_DWORD *)(v18 + 8);
          v19 = v18;
        while ( v17 );
LABEL_41:
      v20 = v2 + 52;
      if ( v18 != v2 + 52 )
        v20 = v2 + 52;
        if ( v1[1] >= *(_DWORD *)(v18 + 16) )
          v20 = v18;
      ClientInstance::requestLeaveGame(*(ClientInstance **)(v20 + 20), 0, 1);
      v21 = sub_119D57C(v20, v2 + 52);
      v22 = *(_DWORD *)(v21 + 24);
      if ( v22 )
        v23 = (unsigned int *)(v22 + 4);
        if ( &pthread_create )
          __dmb();
          do
            v24 = __ldrex(v23);
          while ( __strex(v24 - 1, v23) );
        else
          v24 = (*v23)--;
        if ( v24 == 1 )
          v25 = (unsigned int *)(v22 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 8))(v22);
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
            v26 = (*v25)--;
          if ( v26 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v22 + 12))(v22);
      operator delete((void *)v21);
      --*(_DWORD *)(v2 + 68);
      std::vector<std::shared_ptr<Social::User>,std::allocator<std::shared_ptr<Social::User>>>::_M_erase(v2 + 8, v3);
      break;
    }
    v4 = *(_DWORD *)(v2 + 12);
    v3 += 8;
  }
  result = (*(int (__fastcall **)(int))(*(_DWORD *)v2 + 80))(v2);
  v28 = v35;
  if ( v35 )
  {
    v29 = (unsigned int *)(v35 + 4);
    if ( &pthread_create )
    {
      __dmb();
        result = __ldrex(v29);
      while ( __strex(result - 1, v29) );
    else
      result = (*v29)--;
    if ( result == 1 )
      v30 = (unsigned int *)(v28 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
      if ( &pthread_create )
        __dmb();
          result = __ldrex(v30);
        while ( __strex(result - 1, v30) );
      else
        result = (*v30)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
  return result;
}


int __fastcall Social::MultiplayerXBL::leaveGame(Social::MultiplayerXBL *this)
{
  *(_WORD *)((char *)this + 443) = 0;
  return j_j_j__ZN6Social18MultiplayerService9leaveGameEv(this);
}


int __fastcall Social::UserManager::needPlatformConnectionBeforeXBLSignIn(Social::UserManager *this)
{
  return 0;
}


void __fastcall Social::XboxLiveUserManager::getCurrentGamertag(Social::XboxLiveUserManager *this, int a2)
{
  int v2; // r5@1
  int *v3; // r4@1
  xbox::services::system::xbox_live_user *v4; // r0@1
  bool v5; // zf@1
  unsigned int v6; // r0@5
  int *v7; // r0@7
  void *v8; // r0@7
  void *v9; // r0@8
  unsigned int *v10; // r2@10
  signed int v11; // r1@12
  unsigned int *v12; // r2@14
  signed int v13; // r1@16
  int v14; // [sp+0h] [bp-30h]@7
  int v15; // [sp+4h] [bp-2Ch]@7

  v2 = a2;
  v3 = (int *)this;
  sub_119C884((void **)this, (const char *)&unk_257BC67);
  v4 = *(xbox::services::system::xbox_live_user **)(v2 + 136);
  v5 = v4 == 0;
  if ( v4 )
    v5 = *(_DWORD *)(v2 + 144) == 0;
  if ( !v5 && xbox::services::system::xbox_live_user::is_signed_in(v4) == 1 )
  {
    v6 = *(_WORD *)(v2 + 124);
    if ( v6 <= 0xFF && !(_BYTE)v6 )
    {
      v7 = (int *)xbox::services::system::xbox_live_user::gamertag(*(xbox::services::system::xbox_live_user **)(v2 + 136));
      sub_119C854(&v14, v7);
      utility::conversions::to_utf8string(&v15, &v14);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(v3, &v15);
      v8 = (void *)(v15 - 12);
      if ( (int *)(v15 - 12) != &dword_28898C0 )
      {
        v10 = (unsigned int *)(v15 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v11 = __ldrex(v10);
          while ( __strex(v11 - 1, v10) );
        }
        else
          v11 = (*v10)--;
        if ( v11 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v8);
      }
      v9 = (void *)(v14 - 12);
      if ( (int *)(v14 - 12) != &dword_28898C0 )
        v12 = (unsigned int *)(v14 - 4);
            v13 = __ldrex(v12);
          while ( __strex(v13 - 1, v12) );
          v13 = (*v12)--;
        if ( v13 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v9);
    }
  }
}


void __fastcall Social::MultiplayerXBL::_getAllActiveSessions(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  int v2; // r0@1
  int v3; // r5@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r6@8
  unsigned int v7; // r0@10
  char *v8; // r5@15
  int v9; // r0@15
  int *v10; // r0@15
  unsigned int *v11; // r0@16
  unsigned int v12; // r1@18
  int v13; // r4@21
  unsigned int *v14; // r1@22
  unsigned int v15; // r0@24
  unsigned int *v16; // r5@28
  unsigned int v17; // r0@30
  int v18; // r4@35
  unsigned int *v19; // r1@36
  unsigned int v20; // r0@38
  unsigned int *v21; // r5@42
  unsigned int v22; // r0@44
  void *v23; // r0@49
  void *v24; // r0@50
  void *v25; // r0@51
  int v26; // r4@52
  unsigned int *v27; // r1@53
  unsigned int v28; // r0@55
  unsigned int *v29; // r5@59
  unsigned int v30; // r0@61
  void *v31; // r0@66
  void *v32; // r0@67
  int v33; // r4@68
  unsigned int *v34; // r1@69
  unsigned int v35; // r0@71
  unsigned int *v36; // r5@75
  unsigned int v37; // r0@77
  int v38; // r4@82
  unsigned int *v39; // r1@83
  unsigned int v40; // r0@85
  unsigned int *v41; // r5@89
  unsigned int v42; // r0@91
  unsigned int *v43; // r2@97
  signed int v44; // r1@99
  unsigned int *v45; // r2@101
  signed int v46; // r1@103
  unsigned int *v47; // r2@105
  signed int v48; // r1@107
  unsigned int *v49; // r2@109
  signed int v50; // r1@111
  unsigned int *v51; // r2@113
  signed int v52; // r1@115
  Social::MultiplayerXBL *v53; // [sp+8h] [bp-60h]@15
  xbox::services::xbox_live_context *v54; // [sp+Ch] [bp-5Ch]@15
  int v55; // [sp+10h] [bp-58h]@15
  int v56; // [sp+14h] [bp-54h]@15
  Social::User *v57; // [sp+18h] [bp-50h]@15
  int v58; // [sp+1Ch] [bp-4Ch]@52
  int v59; // [sp+20h] [bp-48h]@15
  int v60; // [sp+24h] [bp-44h]@15
  int v61; // [sp+28h] [bp-40h]@15
  int v62; // [sp+2Ch] [bp-3Ch]@15
  char v63; // [sp+30h] [bp-38h]@15
  int v64; // [sp+34h] [bp-34h]@35
  char v65; // [sp+38h] [bp-30h]@21
  int v66; // [sp+3Ch] [bp-2Ch]@68
  Social::User *v67; // [sp+40h] [bp-28h]@1
  int v68; // [sp+44h] [bp-24h]@1
  xbox::services::xbox_live_context *v69; // [sp+48h] [bp-20h]@1
  int v70; // [sp+4Ch] [bp-1Ch]@15

  v1 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v67, *((_DWORD *)this + 11));
  v2 = Social::User::getLiveUser(v67);
  Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v69, v2);
  v3 = v68;
  if ( v68 )
  {
    v4 = (unsigned int *)(v68 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  v8 = xbox::services::xbox_live_context::multiplayer_service(v69);
  Social::XboxLiveUserManager::getMPScid((Social::XboxLiveUserManager *)&v61);
  utility::conversions::to_string_t(&v62, &v61);
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v57, *((_DWORD *)v1 + 11));
  v9 = Social::User::getLiveUser(v57);
  Social::XboxLiveUserManager::getCurrentXUID((Social::XboxLiveUserManager *)&v59, v9);
  utility::conversions::to_string_t(&v60, &v59);
  v10 = (int *)sub_119C884((void **)&v56, "People");
  xbox::services::multiplayer::multiplayer_service::get_activities_for_social_group((int)&v63, (int)v8, &v62, &v60, v10);
  v53 = v1;
  v54 = v69;
  v55 = v70;
  if ( v70 )
    v11 = (unsigned int *)(v70 + 4);
        v12 = __ldrex(v11);
      while ( __strex(v12 + 1, v11) );
      ++*v11;
  sub_100BB48((int)&v65, (int)&v63, (int)&v53);
  v13 = v55;
  if ( v55 )
    v14 = (unsigned int *)(v55 + 4);
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
      v15 = (*v14)--;
    if ( v15 == 1 )
      v16 = (unsigned int *)(v13 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 8))(v13);
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v13 + 12))(v13);
  v18 = v64;
  if ( v64 )
    v19 = (unsigned int *)(v64 + 4);
        v20 = __ldrex(v19);
      while ( __strex(v20 - 1, v19) );
      v20 = (*v19)--;
    if ( v20 == 1 )
      v21 = (unsigned int *)(v18 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 8))(v18);
          v22 = __ldrex(v21);
        while ( __strex(v22 - 1, v21) );
        v22 = (*v21)--;
      if ( v22 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v18 + 12))(v18);
  v23 = (void *)(v56 - 12);
  if ( (int *)(v56 - 12) != &dword_28898C0 )
    v43 = (unsigned int *)(v56 - 4);
        v44 = __ldrex(v43);
      while ( __strex(v44 - 1, v43) );
      v44 = (*v43)--;
    if ( v44 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v23);
  v24 = (void *)(v60 - 12);
  if ( (int *)(v60 - 12) != &dword_28898C0 )
    v45 = (unsigned int *)(v60 - 4);
        v46 = __ldrex(v45);
      while ( __strex(v46 - 1, v45) );
      v46 = (*v45)--;
    if ( v46 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v24);
  v25 = (void *)(v59 - 12);
  if ( (int *)(v59 - 12) != &dword_28898C0 )
    v47 = (unsigned int *)(v59 - 4);
        v48 = __ldrex(v47);
      while ( __strex(v48 - 1, v47) );
      v48 = (*v47)--;
    if ( v48 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v25);
  v26 = v58;
  if ( v58 )
    v27 = (unsigned int *)(v58 + 4);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 == 1 )
      v29 = (unsigned int *)(v26 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
          v30 = __ldrex(v29);
        while ( __strex(v30 - 1, v29) );
        v30 = (*v29)--;
      if ( v30 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
  v31 = (void *)(v62 - 12);
  if ( (int *)(v62 - 12) != &dword_28898C0 )
    v49 = (unsigned int *)(v62 - 4);
        v50 = __ldrex(v49);
      while ( __strex(v50 - 1, v49) );
      v50 = (*v49)--;
    if ( v50 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v31);
  v32 = (void *)(v61 - 12);
  if ( (int *)(v61 - 12) != &dword_28898C0 )
    v51 = (unsigned int *)(v61 - 4);
        v52 = __ldrex(v51);
      while ( __strex(v52 - 1, v51) );
      v52 = (*v51)--;
    if ( v52 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v32);
  v33 = v66;
  if ( v66 )
    v34 = (unsigned int *)(v66 + 4);
        v35 = __ldrex(v34);
      while ( __strex(v35 - 1, v34) );
      v35 = (*v34)--;
    if ( v35 == 1 )
      v36 = (unsigned int *)(v33 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 8))(v33);
          v37 = __ldrex(v36);
        while ( __strex(v37 - 1, v36) );
        v37 = (*v36)--;
      if ( v37 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v33 + 12))(v33);
  v38 = v70;
    v39 = (unsigned int *)(v70 + 4);
        v40 = __ldrex(v39);
      while ( __strex(v40 - 1, v39) );
      v40 = (*v39)--;
    if ( v40 == 1 )
      v41 = (unsigned int *)(v38 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v38 + 8))(v38);
          v42 = __ldrex(v41);
        while ( __strex(v42 - 1, v41) );
        v42 = (*v41)--;
      if ( v42 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v38 + 12))(v38);
}


void __fastcall Social::MultiplayerXBL::_handleJoinLobbyCompleted(int a1, int a2, int a3, const void **a4)
{
  Social::MultiplayerXBL::_handleJoinLobbyCompleted(a1, a2, a3, a4);
}


int __fastcall Social::ImageService::ImageService(int a1, int a2, const void **a3, int a4)
{
  int v4; // r5@1
  const void **v5; // r7@1
  int v6; // r6@1
  int *v7; // r4@1
  AppPlatform **v8; // r0@2
  int *v9; // r0@4
  const void **v10; // r0@4
  char *v11; // r0@4
  void *v12; // r0@5
  char v13; // r7@6
  unsigned int *v15; // r2@13
  signed int v16; // r1@15
  unsigned int *v17; // r2@17
  signed int v18; // r1@19
  int v19; // [sp+4h] [bp-3Ch]@6
  int v20; // [sp+8h] [bp-38h]@6
  char v21; // [sp+Ch] [bp-34h]@6
  void (*v22)(void); // [sp+14h] [bp-2Ch]@6
  char v23; // [sp+1Ch] [bp-24h]@6
  int v24; // [sp+20h] [bp-20h]@4
  char *v25; // [sp+24h] [bp-1Ch]@4

  v4 = a1;
  v5 = a3;
  *(_DWORD *)a1 = a2;
  *(_BYTE *)(a1 + 4) = 1;
  v6 = a4;
  *(_DWORD *)(a1 + 8) = &unk_28898CC;
  v7 = (int *)(a1 + 8);
  if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v8 = (AppPlatform **)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
  else
    v8 = (AppPlatform **)&ServiceLocator<AppPlatform>::mDefaultService;
  v9 = AppPlatform::getTempPath(*v8);
  sub_21E8AF4(&v24, v9);
  sub_21E7408((const void **)&v24, "/", 1u);
  v10 = sub_21E72F0((const void **)&v24, v5);
  v25 = (char *)*v10;
  *v10 = &unk_28898CC;
  xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
    (int *)(v4 + 8),
    (int *)&v25);
  v11 = v25 - 12;
  if ( (int *)(v25 - 12) != &dword_28898C0 )
  {
    v15 = (unsigned int *)(v25 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v16 = __ldrex(v15);
      while ( __strex(v16 - 1, v15) );
    }
    else
      v16 = (*v15)--;
    if ( v16 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  }
  v12 = (void *)(v24 - 12);
  if ( (int *)(v24 - 12) != &dword_28898C0 )
    v17 = (unsigned int *)(v24 - 4);
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
      v18 = (*v17)--;
    if ( v18 <= 0 )
      j_j_j_j__ZdlPv_9(v12);
  v19 = *v7;
  v20 = *(_DWORD *)(v19 - 12);
  Core::FileSystem::createDirectoryRecursively((int)&v21, (__int64 *)&v19);
  v13 = v23;
  v23 |= 2u;
  if ( v22 )
    v22();
  if ( !(v13 & 1) )
    *(_BYTE *)(v4 + 4) = 0;
  if ( v6 == 1 )
    Social::ImageService::_clearImageCache((Social::ImageService *)v4);
  return v4;
}


signed int __fastcall Social::XboxLiveUserManager::mayChatWith(Social::XboxLiveUserManager *a1, const void **a2)
{
  const void **v2; // r8@1
  Social::XboxLiveUserManager *v3; // r5@1
  char *v4; // r4@2
  size_t v5; // r2@2
  char *v6; // r6@2
  signed int v7; // r7@3
  signed int result; // r0@4
  int v9; // r0@8
  int v10; // r0@9
  int v11; // r1@9
  __int64 v12; // kr00_8@9
  int v13; // r2@9
  int v14; // r3@10
  bool v15; // zf@11
  int v16; // r2@11
  int v17; // r7@14
  bool v18; // zf@14
  int v19; // r2@19
  unsigned int *v20; // r1@24
  signed int v21; // r0@26
  void *s1; // [sp+0h] [bp-20h]@2

  v2 = a2;
  v3 = a1;
  if ( Social::XboxLiveUserManager::checkPrivilegeSilently(a1, 252) != 1 )
    return 2;
  Social::XboxLiveUserManager::getCurrentXUID((Social::XboxLiveUserManager *)&s1, (int)v3);
  v4 = (char *)s1;
  v6 = (char *)s1 - 12;
  v5 = *((_DWORD *)s1 - 3);
  if ( v5 == *((_DWORD *)*v2 - 3) )
    v7 = memcmp(s1, *v2, v5) != 0;
  else
    v7 = 1;
  if ( (int *)v6 != &dword_28898C0 )
  {
    v20 = (unsigned int *)(v4 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
    }
    else
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v6);
  }
  if ( v7 != 1 )
    return 1;
  v9 = std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)v3 + 10,
         (int **)v2);
  if ( !v9 )
  v12 = *(_QWORD *)(*(_DWORD *)(v9 + 8) + 44);
  v10 = *(_QWORD *)(*(_DWORD *)(v9 + 8) + 44) >> 32;
  v11 = v12;
  v13 = (v10 - (signed int)v12) >> 5;
  if ( v13 < 1 )
LABEL_18:
    if ( 1 == (v10 - v11) >> 3 )
      v16 = v11;
      v19 = (v10 - v11) >> 3;
      if ( v19 == 2 )
      {
        v16 = v11;
      }
      else
        if ( v19 != 3 )
          return 0;
        if ( *(_DWORD *)v11 == 1 )
          goto LABEL_33;
        v16 = v11 + 8;
      if ( *(_DWORD *)v16 == 1 )
        goto LABEL_33;
      v16 += 8;
    if ( *(_DWORD *)v16 == 1 )
      goto LABEL_33;
    return 0;
  v14 = v13 + 1;
  while ( 1 )
    v15 = *(_DWORD *)v11 == 1;
    v16 = v11;
    if ( *(_DWORD *)v11 != 1 )
      v16 = v11 + 8;
      v15 = *(_DWORD *)(v11 + 8) == 1;
    if ( v15 )
      break;
    v16 = v11 + 16;
    v17 = *(_DWORD *)(v11 + 16);
    v18 = v17 == 1;
    if ( v17 != 1 )
      v16 = v11 + 24;
      v18 = *(_DWORD *)(v11 + 24) == 1;
    if ( v18 )
    --v14;
    v11 += 32;
    if ( v14 <= 1 )
      goto LABEL_18;
LABEL_33:
  if ( v16 == v10 )
  result = 1;
  if ( !*(_BYTE *)(v16 + 4) )
    result = 2;
  return result;
}


Social::MultiplayerXBL *__fastcall Social::MultiplayerXBL::getRealmWorld(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  pthread_mutex_t *v2; // r5@1
  int v3; // r0@2

  v1 = this;
  v2 = (pthread_mutex_t *)((char *)this + 432);
  if ( &pthread_create )
  {
    v3 = pthread_mutex_lock(v2);
    if ( v3 )
      sub_119CCFC(v3);
  }
    pthread_mutex_unlock(v2);
  return (Social::MultiplayerXBL *)((char *)v1 + 360);
}


int __fastcall Social::MultiplayerService::getPlayerUidsInLobby(int result)
{
  *(_DWORD *)result = 0;
  *(_DWORD *)(result + 4) = 0;
  *(_DWORD *)(result + 8) = 0;
  return result;
}


void __fastcall Social::MultiplayerXBL::_buildRichPresence(Social::MultiplayerXBL *this, Social::User *a2, Level *a3)
{
  Social::MultiplayerXBL::_buildRichPresence(this, a2, a3);
}


Json::Value *__fastcall Social::Events::HttpTelemetry::getMaelstromMessageBody(Json::Value *a1, int a2, const char **a3, const Json::Value *a4, Json::Value *a5)
{
  int v5; // r7@1
  const Json::Value *v6; // r8@1
  const char **v7; // r6@1
  Json::Value *v8; // r4@1
  int v9; // r5@1
  int v10; // r0@1
  int v11; // r5@1
  char v13; // [sp+8h] [bp-38h]@1
  char v14; // [sp+18h] [bp-28h]@1

  v5 = a2;
  v6 = a4;
  v7 = a3;
  v8 = a1;
  j_Json::Value::Value(a1, 0);
  v9 = j_Json::Value::operator[](v8, "events");
  j_Json::Value::Value(&v14, 6);
  j_Json::Value::operator=(v9, (const Json::Value *)&v14);
  j_Json::Value::~Value((Json::Value *)&v14);
  v10 = j_Json::Value::operator[](v8, "events");
  v11 = j_Json::Value::operator[](v10, 0);
  j_Social::Events::HttpTelemetry::getMaelstromEventBody((Json::Value *)&v13, v5, v7, v6, a5);
  j_Json::Value::operator=(v11, (const Json::Value *)&v13);
  return j_Json::Value::~Value((Json::Value *)&v13);
}


int __fastcall Social::UserManager::changeClientMapping(Social::UserManager *this, int a2, int a3)
{
  int v3; // r6@1
  Social::UserManager *v4; // r5@1
  char *v5; // r7@1
  int result; // r0@1
  int v7; // r6@5
  int v8; // r0@5
  int v9; // r1@5
  int v10; // r1@5
  char *v11; // r6@5
  int v12; // r2@6
  int v13; // r1@7
  int v14; // r3@11
  int v15; // r1@12
  int v16; // r7@22
  int v17; // [sp+4h] [bp-1Ch]@1
  int v18; // [sp+8h] [bp-18h]@1

  v3 = a2;
  v4 = this;
  v17 = a3;
  v18 = a2;
  v5 = (char *)this + 52;
  result = *((_DWORD *)this + 15);
  if ( (char *)result != v5 )
  {
    while ( *(_DWORD *)(result + 16) != v3 )
    {
      result = sub_119CAC8(result);
      if ( (char *)result == v5 )
        return result;
    }
    v7 = std::map<int,std::shared_ptr<ClientInstance>,std::less<int>,std::allocator<std::pair<int const,std::shared_ptr<ClientInstance>>>>::operator[](
           (int)v4 + 48,
           &v17);
    v8 = std::map<int,std::shared_ptr<ClientInstance>,std::less<int>,std::allocator<std::pair<int const,std::shared_ptr<ClientInstance>>>>::operator[](
           &v18);
    v9 = *(_DWORD *)v7;
    *(_DWORD *)v7 = *(_DWORD *)v8;
    *(_DWORD *)v8 = v9;
    v10 = *(_DWORD *)(v8 + 4);
    *(_DWORD *)(v8 + 4) = *(_DWORD *)(v7 + 4);
    *(_DWORD *)(v7 + 4) = v10;
    v11 = (char *)*((_DWORD *)v4 + 14);
    do
      v12 = (int)v5;
      v5 = v11;
      if ( !v11 )
      {
LABEL_18:
        v15 = v12;
        goto LABEL_19;
      }
      while ( 1 )
        v13 = *((_DWORD *)v5 + 4);
        if ( v13 >= v18 )
          break;
        v5 = (char *)*((_DWORD *)v5 + 3);
        if ( !v5 )
          goto LABEL_18;
      v11 = (char *)*((_DWORD *)v5 + 2);
    while ( v18 < v13 );
    v14 = *((_DWORD *)v5 + 3);
    if ( v11 )
      do
        v15 = (int)v11;
        while ( *(_DWORD *)(v15 + 16) < v18 )
        {
          v15 = *(_DWORD *)(v15 + 12);
          if ( !v15 )
            goto LABEL_20;
        }
        v11 = *(char **)(v15 + 8);
        v5 = (char *)v15;
      while ( v11 );
    else
LABEL_20:
      v15 = (int)v5;
    if ( v14 )
      v16 = v12;
        v12 = v14;
        while ( v18 >= *(_DWORD *)(v12 + 16) )
          v12 = *(_DWORD *)(v12 + 12);
          if ( !v12 )
          {
            v12 = v16;
            goto LABEL_19;
          }
        v14 = *(_DWORD *)(v12 + 8);
        v16 = v12;
      while ( v14 );
LABEL_19:
    result = std::_Rb_tree<int,std::pair<int const,std::shared_ptr<ClientInstance>>,std::_Select1st<std::pair<int const,std::shared_ptr<ClientInstance>>>,std::less<int>,std::allocator<std::pair<int const,std::shared_ptr<ClientInstance>>>>::_M_erase_aux(
               (int)v4 + 48,
               v15,
               v12);
  }
  return result;
}


void __fastcall Social::UserManager::~UserManager(Social::UserManager *this)
{
  Social::UserManager *v1; // r0@1

  v1 = Social::UserManager::~UserManager(this);
  j_j_j__ZdlPv_4((void *)v1);
}


void __fastcall Social::MultiplayerXBL::_updateRichPresence(Social::MultiplayerXBL *this, Social::User *a2)
{
  Social::MultiplayerXBL::_updateRichPresence(this, a2);
}


void __fastcall Social::XboxLiveUserInfo::_processFriends(int a1, unsigned __int64 *a2, int a3, int a4)
{
  xbox::services::social::xbox_social_relationship *v4; // r4@1
  int *v5; // r8@2
  int *v6; // r0@3
  void *v7; // r0@3
  int v8; // r0@5
  const Social::XboxProfile *v9; // r5@6
  char v10; // r8@6
  char v11; // r0@6
  int *v12; // r1@8
  void *v13; // r0@11
  unsigned int *v14; // r2@14
  signed int v15; // r1@16
  unsigned int *v16; // r2@18
  signed int v17; // r1@20
  int v18; // r0@31
  unsigned int *v19; // r0@32
  unsigned int v20; // r1@34
  int v21; // r4@37
  unsigned int *v22; // r1@38
  unsigned int v23; // r0@40
  unsigned int *v24; // r5@44
  unsigned int v25; // r0@46
  int *v26; // r4@51
  int *v27; // r6@51
  unsigned int *v28; // r2@53
  signed int v29; // r1@55
  int *v30; // r0@61
  int v31; // [sp+0h] [bp-90h]@1
  int v32; // [sp+4h] [bp-8Ch]@1
  pthread_mutex_t *mutex; // [sp+8h] [bp-88h]@2
  xbox::services::social::xbox_social_relationship *v34; // [sp+Ch] [bp-84h]@1
  int v35; // [sp+10h] [bp-80h]@1
  int v36; // [sp+14h] [bp-7Ch]@31
  int v37; // [sp+18h] [bp-78h]@31
  char v38; // [sp+1Ch] [bp-74h]@8
  char v39; // [sp+24h] [bp-6Ch]@2
  void *v40; // [sp+28h] [bp-68h]@4
  void *v41; // [sp+2Ch] [bp-64h]@4
  void *v42; // [sp+30h] [bp-60h]@4
  void *v43; // [sp+34h] [bp-5Ch]@4
  char v44; // [sp+38h] [bp-58h]@4
  char v45; // [sp+39h] [bp-57h]@4
  char v46; // [sp+3Ah] [bp-56h]@4
  int v47; // [sp+3Ch] [bp-54h]@4
  int v48; // [sp+40h] [bp-50h]@4
  void *v49; // [sp+44h] [bp-4Ch]@4
  void *v50; // [sp+48h] [bp-48h]@4
  void *v51; // [sp+4Ch] [bp-44h]@4
  int v52; // [sp+50h] [bp-40h]@4
  int v53; // [sp+54h] [bp-3Ch]@3
  int v54; // [sp+58h] [bp-38h]@3
  int *v55; // [sp+5Ch] [bp-34h]@1
  int *v56; // [sp+60h] [bp-30h]@1
  int *v57; // [sp+64h] [bp-2Ch]@1

  v35 = a3;
  v31 = a4;
  v32 = a1;
  v55 = 0;
  v56 = 0;
  v57 = 0;
  v4 = (xbox::services::social::xbox_social_relationship *)*a2;
  v34 = (xbox::services::social::xbox_social_relationship *)(*a2 >> 32);
  if ( v4 != v34 )
  {
    v5 = (int *)&v39;
    mutex = (pthread_mutex_t *)(a1 + 68);
    do
    {
      v6 = (int *)xbox::services::social::xbox_social_relationship::xbox_user_id(v4);
      sub_21E8AF4(&v53, v6);
      utility::conversions::to_utf8string(&v54, &v53);
      v7 = (void *)(v53 - 12);
      if ( (int *)(v53 - 12) != &dword_28898C0 )
      {
        v14 = (unsigned int *)(v53 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v15 = __ldrex(v14);
          while ( __strex(v15 - 1, v14) );
        }
        else
          v15 = (*v14)--;
        if ( v15 <= 0 )
          j_j_j_j__ZdlPv_9(v7);
      }
      sub_21E8AF4(v5, &v54);
      v40 = &unk_28898CC;
      v41 = &unk_28898CC;
      v42 = &unk_28898CC;
      v43 = &unk_28898CC;
      v44 = 0;
      v45 = 0;
      v46 = 0;
      v47 = 0;
      v48 = 0;
      v49 = &unk_28898CC;
      v50 = &unk_28898CC;
      v51 = &unk_28898CC;
      v52 = 0;
      if ( &pthread_create )
        v8 = pthread_mutex_lock(mutex);
        if ( v8 )
          sub_21E5E14(v8);
      v9 = (const Social::XboxProfile *)v5;
      v10 = xbox::services::social::xbox_social_relationship::is_favorite(v4);
      v11 = xbox::services::social::xbox_social_relationship::is_following_caller(v4);
      v44 = 1;
      v45 = v10;
      v46 = v11;
      v52 |= 8u;
        pthread_mutex_unlock(mutex);
      v5 = (int *)v9;
      std::_Hashtable<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::XboxProfile&>(
        &v38,
        *(_DWORD *)v35,
        &v54,
        v9);
      v12 = (int *)xbox::services::social::xbox_social_relationship::xbox_user_id(v4);
      if ( v56 == v57 )
        std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<std::string const&>(
          (unsigned __int64 *)&v55,
          v12);
      else
        sub_21E8AF4(v56, v12);
        ++v56;
      Social::XboxProfile::~XboxProfile(v9);
      v13 = (void *)(v54 - 12);
      if ( (int *)(v54 - 12) != &dword_28898C0 )
        v16 = (unsigned int *)(v54 - 4);
            v17 = __ldrex(v16);
          while ( __strex(v17 - 1, v16) );
          v17 = (*v16)--;
        if ( v17 <= 0 )
          j_j_j_j__ZdlPv_9(v13);
      v4 = (xbox::services::social::xbox_social_relationship *)((char *)v4 + 20);
    }
    while ( v4 != v34 );
  }
  v36 = *(_DWORD *)v35;
  v18 = *(_DWORD *)(v35 + 4);
  v37 = v18;
  if ( v18 )
    v19 = (unsigned int *)(v18 + 4);
    if ( &pthread_create )
      __dmb();
      do
        v20 = __ldrex(v19);
      while ( __strex(v20 + 1, v19) );
    else
      ++*v19;
  Social::XboxLiveUserInfo::_processXuids(v32, (unsigned __int64 *)&v55, (int)&v36, v31);
  v21 = v37;
  if ( v37 )
    v22 = (unsigned int *)(v37 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
        __dmb();
        do
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v27 = v56;
  v26 = v55;
  if ( v55 != v56 )
      v30 = (int *)(*v26 - 12);
      if ( v30 != &dword_28898C0 )
        v28 = (unsigned int *)(*v26 - 4);
            v29 = __ldrex(v28);
          while ( __strex(v29 - 1, v28) );
          v29 = (*v28)--;
        if ( v29 <= 0 )
          j_j_j_j__ZdlPv_9(v30);
      ++v26;
    while ( v26 != v27 );
    v26 = v55;
  if ( v26 )
    operator delete(v26);
}


Social::Events::AggregationEventListener *__fastcall Social::Events::AggregationEventListener::~AggregationEventListener(Social::Events::AggregationEventListener *this)
{
  Social::Events::AggregationEventListener *v1; // r4@1
  char *v2; // r5@1
  char *v3; // r0@1
  char *v4; // r0@4

  v1 = this;
  *(_DWORD *)this = &off_2719E18;
  v2 = (char *)this + 56;
  j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)this + 32);
  v3 = (char *)*((_DWORD *)v1 + 8);
  if ( v3 && v2 != v3 )
    j_operator delete(v3);
  j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)v1 + 4);
  v4 = (char *)*((_DWORD *)v1 + 1);
  if ( v4 && (char *)v1 + 28 != v4 )
    j_operator delete(v4);
  return v1;
}


void __fastcall Social::Events::Event::addProperty<DimensionId>(int a1, int *a2, int *a3)
{
  Social::Events::Event::addProperty<DimensionId>(a1, a2, a3);
}


void __fastcall Social::XboxLiveUserInfo::_getProfile(int a1, int a2, _BYTE **a3)
{
  Social::XboxLiveUserInfo::_getProfile(a1, a2, a3);
}


Social::XboxLiveUserManager *__fastcall Social::XboxLiveUserManager::getPlayerAchievementData(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1

  v1 = this;
  Social::XboxLiveUserManager::_updateAchievementData(this);
  return (Social::XboxLiveUserManager *)((char *)v1 + 272);
}


void __fastcall Social::MultiplayerXBL::getPlayerUidsInLobby(Social::MultiplayerXBL *this, int a2)
{
  Social::MultiplayerXBL *v2; // r8@1
  Social::XboxLiveUserManager *v3; // r0@1
  int v4; // r5@1
  int v5; // r6@1
  unsigned int *v6; // r1@2
  unsigned int v7; // r0@4
  unsigned int *v8; // r4@8
  unsigned int v9; // r0@10
  int v10; // r5@16
  unsigned int *v11; // r1@17
  unsigned int v12; // r0@19
  unsigned int *v13; // r4@23
  unsigned int v14; // r0@25
  char *v15; // r0@31
  xbox::services::multiplayer::manager::multiplayer_member **v16; // r7@32
  __int64 v17; // kr00_8@32
  unsigned int *v18; // r2@34
  signed int v19; // r1@36
  unsigned int *v20; // r2@38
  signed int v21; // r1@40
  int *v22; // r0@50
  __int64 v23; // r0@50
  int v24; // r1@51
  void *v25; // r0@53
  void *v26; // r0@54
  int v27; // r4@56
  unsigned int *v28; // r1@57
  unsigned int v29; // r0@59
  unsigned int *v30; // r5@63
  unsigned int v31; // r0@65
  int v32; // [sp+0h] [bp-48h]@38
  void *v33; // [sp+4h] [bp-44h]@50
  int v34; // [sp+8h] [bp-40h]@16
  int v35; // [sp+Ch] [bp-3Ch]@16
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v36; // [sp+10h] [bp-38h]@16
  int v37; // [sp+14h] [bp-34h]@56
  Social::User *v38; // [sp+18h] [bp-30h]@1
  int v39; // [sp+1Ch] [bp-2Ch]@1

  v2 = this;
  *(_DWORD *)this = 0;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v38, *(_DWORD *)(a2 + 44));
  v3 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v38);
  v4 = Social::XboxLiveUserManager::isSignedIn(v3);
  v5 = v39;
  if ( v39 )
  {
    v6 = (unsigned int *)(v39 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  }
  if ( v4 )
    xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v34);
    xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
      (xbox::services::multiplayer::manager::multiplayer_manager *)&v36,
      v34);
    v10 = v35;
    if ( v35 )
      v11 = (unsigned int *)(v35 + 4);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        v13 = (unsigned int *)(v10 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
        if ( &pthread_create )
        {
          __dmb();
          do
            v14 = __ldrex(v13);
          while ( __strex(v14 - 1, v13) );
        }
        else
          v14 = (*v13)--;
        if ( v14 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
    if ( v36 )
      v15 = xbox::services::multiplayer::manager::multiplayer_lobby_session::local_members(v36);
      if ( *(_QWORD *)v15 >> 32 != (unsigned int)*(_QWORD *)v15 )
        v17 = *(_QWORD *)xbox::services::multiplayer::manager::multiplayer_lobby_session::members(v36);
        v16 = (xbox::services::multiplayer::manager::multiplayer_member **)v17;
        if ( (_DWORD)v17 != HIDWORD(v17) )
          {
            v22 = (int *)xbox::services::multiplayer::manager::multiplayer_member::xbox_user_id(*v16);
            sub_119C854(&v32, v22);
            utility::conversions::to_utf8string(&v33, &v32);
            v23 = *(_QWORD *)((char *)v2 + 4);
            if ( (_DWORD)v23 == HIDWORD(v23) )
            {
              std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<std::string>(
                (unsigned __int64 *)v2,
                &v33);
              v24 = (int)v33;
            }
            else
              *(_DWORD *)v23 = v33;
              HIDWORD(v23) = &unk_28898CC;
              v33 = &unk_28898CC;
              *((_DWORD *)v2 + 1) = v23 + 4;
            v25 = (void *)(v24 - 12);
            if ( (int *)(v24 - 12) != &dword_28898C0 )
              v18 = (unsigned int *)(v24 - 4);
              if ( &pthread_create )
              {
                __dmb();
                do
                  v19 = __ldrex(v18);
                while ( __strex(v19 - 1, v18) );
              }
              else
                v19 = (*v18)--;
              if ( v19 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v25);
            v26 = (void *)(v32 - 12);
            if ( (int *)(v32 - 12) != &dword_28898C0 )
              v20 = (unsigned int *)(v32 - 4);
                  v21 = __ldrex(v20);
                while ( __strex(v21 - 1, v20) );
                v21 = (*v20)--;
              if ( v21 <= 0 )
                j_j_j_j_j__ZdlPv_9_1(v26);
            v16 += 2;
          }
          while ( v16 != (xbox::services::multiplayer::manager::multiplayer_member **)HIDWORD(v17) );
    v27 = v37;
    if ( v37 )
      v28 = (unsigned int *)(v37 + 4);
          v29 = __ldrex(v28);
        while ( __strex(v29 - 1, v28) );
        v29 = (*v28)--;
      if ( v29 == 1 )
        v30 = (unsigned int *)(v27 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 8))(v27);
            v31 = __ldrex(v30);
          while ( __strex(v31 - 1, v30) );
          v31 = (*v30)--;
        if ( v31 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v27 + 12))(v27);
}


_QWORD *__fastcall Social::MultiplayerServiceManager::clearInviteHandle(_QWORD *result, _QWORD *a2)
{
  Social::MultiplayerService **v2; // r5@1 OVERLAPPED
  Social::MultiplayerService **v3; // r6@1 OVERLAPPED
  _QWORD *i; // r4@1

  *(_QWORD *)&v2 = *result;
  for ( i = a2; v3 != v2; ++v2 )
  {
    result = (_QWORD *)Social::MultiplayerService::getServiceId(*v2);
    if ( result == i )
      result = (_QWORD *)(*(int (**)(void))(*(_DWORD *)*v2 + 56))();
  }
  return result;
}


int __fastcall Social::XboxLiveUserInfo::_getProfiles(int a1, __int64 *a2, int a3)
{
  int v3; // r4@1
  void (__fastcall *v4)(void **, int, signed int); // r3@1
  int result; // r0@3
  int v6; // r4@3
  unsigned int *v7; // r1@4
  unsigned int *v8; // r5@10
  int v9; // r4@19
  unsigned int *v10; // r1@20
  unsigned int *v11; // r5@26
  void *v12; // [sp+0h] [bp-30h]@2
  int v13; // [sp+4h] [bp-2Ch]@3
  int v14; // [sp+8h] [bp-28h]@1
  int v15; // [sp+Ch] [bp-24h]@2
  char v16; // [sp+10h] [bp-20h]@1
  int v17; // [sp+14h] [bp-1Ch]@3
  char v18; // [sp+18h] [bp-18h]@3
  int v19; // [sp+1Ch] [bp-14h]@3
  void *v20; // [sp+20h] [bp-10h]@3

  v3 = a3;
  Social::XboxLiveUserInfo::_getProfiles((int)&v16, a1, a2);
  v14 = 0;
  v4 = *(void (__fastcall **)(void **, int, signed int))(v3 + 8);
  if ( v4 )
  {
    v4(&v12, v3, 2);
    v15 = *(_DWORD *)(v3 + 12);
    v14 = *(_DWORD *)(v3 + 8);
  }
  result = sub_138F570(
             (int)&v18,
             (int)&v16,
             (int)&v12,
             (int)v4,
             v12,
             v13,
             v14,
             v15,
             *(int *)&v16,
             v17,
             *(int *)&v18,
             v19,
             v20);
  v6 = v19;
  if ( v19 )
    v7 = (unsigned int *)(v19 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = __ldrex(v7);
      while ( __strex(result - 1, v7) );
    }
    else
      result = (*v7)--;
    if ( result == 1 )
      v8 = (unsigned int *)(v6 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v6 + 8))(v6);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = __ldrex(v8);
        while ( __strex(result - 1, v8) );
      }
      else
        result = (*v8)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v6 + 12))(v6);
  if ( v14 )
    result = ((int (*)(void))v14)();
  v9 = v17;
  if ( v17 )
    v10 = (unsigned int *)(v17 + 4);
        result = __ldrex(v10);
      while ( __strex(result - 1, v10) );
      result = (*v10)--;
      v11 = (unsigned int *)(v9 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v9 + 8))(v9);
          result = __ldrex(v11);
        while ( __strex(result - 1, v11) );
        result = (*v11)--;
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v9 + 12))(v9);
  return result;
}


Json::Value *__fastcall Social::Events::Measurement::updateMeasurement(int a1, int a2)
{
  int v3; // r4@1
  int v4; // r5@1
  Json::Value *result; // r0@1
  Json::Value *v6; // r4@2
  int v7; // r0@2
  Json::Value *v8; // r4@3
  int v9; // r6@3
  int v10; // r0@3
  Json::Value *v11; // r4@6
  int v12; // r6@6
  int v13; // r0@6
  int v21; // r1@9
  Json::Value *v22; // r4@10
  int v24; // r1@10
  int v27; // r1@10
  int v28; // [sp+0h] [bp-70h]@9
  char v29; // [sp+10h] [bp-60h]@8
  char v30; // [sp+20h] [bp-50h]@5
  char v31; // [sp+30h] [bp-40h]@10
  char v32; // [sp+40h] [bp-30h]@2

  v3 = a1;
  v4 = a2;
  result = *(Json::Value **)(a1 + 28);
  switch ( result )
  {
    case 0u:
      v6 = (Json::Value *)(v3 + 8);
      v7 = Json::Value::asInt(v6, 0);
      Json::Value::Value((Json::Value *)&v32, v7 + 1);
      Json::Value::operator=((int)v6, (const Json::Value *)&v32);
      result = Json::Value::~Value((Json::Value *)&v32);
      break;
    case 2u:
      v8 = (Json::Value *)(v3 + 8);
      v9 = Json::Value::asInt(v8, 0);
      v10 = Json::Value::asInt((Json::Value *)(v4 + 8), 0);
      if ( v10 < v9 )
        v9 = v10;
      Json::Value::Value((Json::Value *)&v30, v9);
      Json::Value::operator=((int)v8, (const Json::Value *)&v30);
      result = Json::Value::~Value((Json::Value *)&v30);
    case 3u:
      v11 = (Json::Value *)(v3 + 8);
      v12 = Json::Value::asInt(v11, 0);
      v13 = Json::Value::asInt((Json::Value *)(v4 + 8), 0);
      if ( v12 < v13 )
        v12 = v13;
      Json::Value::Value((Json::Value *)&v29, v12);
      Json::Value::operator=((int)v11, (const Json::Value *)&v29);
      result = Json::Value::~Value((Json::Value *)&v29);
    case 4u:
      _R0 = Json::Value::asFloat((Json::Value *)(v3 + 8), 0.0);
      __asm { VMOV            S16, R0 }
      _R0 = Json::Value::asFloat((Json::Value *)(v4 + 8), 0.0);
      __asm
      {
        VMOV            S0, R0
        VADD.F32        S0, S0, S16
        VCVT.F64.F32    D0, S0
        VMOV            R2, R3, D0
      }
      Json::Value::Value((Json::Value *)&v28, v21, _R2);
      Json::Value::operator=(v3 + 8, (const Json::Value *)&v28);
      Json::Value::~Value((Json::Value *)&v28);
      result = (Json::Value *)(*(_DWORD *)(v3 + 24) + 1);
      *(_DWORD *)(v3 + 24) = result;
    case 1u:
      __asm { VLDR            D0, =0.0; jumptable 0145CC76 case 1 }
      v22 = (Json::Value *)(v3 + 8);
      __asm { VMOV            R6, R7, D0 }
      _R0 = Json::Value::asDouble(v22, a2, _R6);
      __asm { VMOV            D8, R0, R1 }
      _R0 = Json::Value::asDouble((Json::Value *)(v4 + 8), v24, _R6);
        VMOV            D0, R0, R1
        VADD.F64        D0, D0, D8
      Json::Value::Value((Json::Value *)&v31, v27, _R2);
      Json::Value::operator=((int)v22, (const Json::Value *)&v31);
      result = Json::Value::~Value((Json::Value *)&v31);
    default:
      return result;
  }
  return result;
}


unsigned int __fastcall Social::User::isReady(Social::User *this)
{
  unsigned int v1; // r0@1
  unsigned int result; // r0@2

  v1 = *((_DWORD *)this + 4);
  if ( v1 <= 4 )
    result = (0x19u >> (v1 & 0x1F)) & 1;
  else
    result = 0;
  return result;
}


void __fastcall Social::MultiplayerXBL::_updateRichPresence(Social::MultiplayerXBL *this, Social::User *a2)
{
  int v2; // r4@1
  void *v3; // r0@1
  unsigned int *v4; // r2@3
  signed int v5; // r1@5
  int v6; // [sp+4h] [bp-1Ch]@1

  v2 = Social::User::getLiveUser(a2);
  sub_119C884((void **)&v6, "Menus");
  Social::XboxLiveUserManager::updateRichPresence(v2, &v6);
  v3 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
  {
    v4 = (unsigned int *)(v6 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v3);
  }
}


Social::GameConnectionInfo *__fastcall Social::GameConnectionInfo::~GameConnectionInfo(Social::GameConnectionInfo *this)
{
  Social::GameConnectionInfo *v1; // r10@1
  int v2; // r1@1
  void *v3; // r0@1
  int v4; // r1@2
  void *v5; // r0@2
  unsigned __int64 *v6; // r7@3
  unsigned int *v7; // r2@5
  signed int v8; // r1@7
  unsigned __int64 *v9; // r6@13
  int v10; // r1@13
  void *v11; // r0@13
  char *v12; // r0@15
  int v13; // r1@18
  void *v14; // r0@18
  int v15; // r1@19
  void *v16; // r0@19
  int v17; // r1@20
  void *v18; // r0@20
  unsigned int *v20; // r2@22
  signed int v21; // r1@24
  unsigned int *v22; // r2@26
  signed int v23; // r1@28
  unsigned int *v24; // r2@30
  signed int v25; // r1@32
  unsigned int *v26; // r2@34
  signed int v27; // r1@36
  unsigned int *v28; // r2@38
  signed int v29; // r1@40

  v1 = this;
  v2 = *((_DWORD *)this + 13);
  v3 = (void *)(v2 - 12);
  if ( (int *)(v2 - 12) != &dword_28898C0 )
  {
    v20 = (unsigned int *)(v2 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v21 = __ldrex(v20);
      while ( __strex(v21 - 1, v20) );
    }
    else
      v21 = (*v20)--;
    if ( v21 <= 0 )
      j_j_j_j_j__ZdlPv_9(v3);
  }
  v4 = *((_DWORD *)v1 + 12);
  v5 = (void *)(v4 - 12);
  if ( (int *)(v4 - 12) != &dword_28898C0 )
    v22 = (unsigned int *)(v4 - 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 <= 0 )
      j_j_j_j_j__ZdlPv_9(v5);
  v6 = (unsigned __int64 *)*((_DWORD *)v1 + 7);
  while ( v6 )
    v9 = v6;
    v10 = *v6 >> 32;
    v6 = (unsigned __int64 *)*v6;
    v11 = (void *)(v10 - 12);
    if ( (int *)(v10 - 12) != &dword_28898C0 )
      v7 = (unsigned int *)(v10 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 <= 0 )
        j_j_j_j_j__ZdlPv_9(v11);
    operator delete(v9);
  _aeabi_memclr4(*(_QWORD *)((char *)v1 + 20), 4 * (*(_QWORD *)((char *)v1 + 20) >> 32));
  *((_DWORD *)v1 + 7) = 0;
  *((_DWORD *)v1 + 8) = 0;
  v12 = (char *)*((_DWORD *)v1 + 5);
  if ( v12 && (char *)v1 + 44 != v12 )
    operator delete(v12);
  v13 = *((_DWORD *)v1 + 4);
  v14 = (void *)(v13 - 12);
  if ( (int *)(v13 - 12) != &dword_28898C0 )
    v24 = (unsigned int *)(v13 - 4);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 <= 0 )
      j_j_j_j_j__ZdlPv_9(v14);
  v15 = *((_DWORD *)v1 + 2);
  v16 = (void *)(v15 - 12);
  if ( (int *)(v15 - 12) != &dword_28898C0 )
    v26 = (unsigned int *)(v15 - 4);
        v27 = __ldrex(v26);
      while ( __strex(v27 - 1, v26) );
      v27 = (*v26)--;
    if ( v27 <= 0 )
      j_j_j_j_j__ZdlPv_9(v16);
  v17 = *((_DWORD *)v1 + 1);
  v18 = (void *)(v17 - 12);
  if ( (int *)(v17 - 12) != &dword_28898C0 )
    v28 = (unsigned int *)(v17 - 4);
        v29 = __ldrex(v28);
      while ( __strex(v29 - 1, v28) );
      v29 = (*v28)--;
    if ( v29 <= 0 )
      j_j_j_j_j__ZdlPv_9(v18);
  return v1;
}


signed int __fastcall Social::XboxLiveUserManager::_toPrivacyValue(int a1, const void **a2)
{
  const void **v2; // r4@1
  signed int result; // r0@2
  int v4; // r1@21

  v2 = a2;
  if ( sub_119C9E8(a2, "BroadcastWithTwitch") )
  {
    if ( sub_119C9E8(v2, "CommunicateUsingText") )
    {
      if ( sub_119C9E8(v2, "CommunicateUsingVideo") )
      {
        if ( sub_119C9E8(v2, "CommunicateUsingVoice") )
        {
          if ( sub_119C9E8(v2, "PlayMultiplayer") )
          {
            if ( sub_119C9E8(v2, "ViewTargetExerciseInfo") )
            {
              if ( sub_119C9E8(v2, "ViewTargetGameHistory") )
              {
                if ( sub_119C9E8(v2, "ViewTargetMusicHistory") )
                {
                  if ( sub_119C9E8(v2, "ViewTargetMusicStatus") )
                  {
                    if ( sub_119C9E8(v2, "ViewTargetPresence") )
                    {
                      if ( sub_119C9E8(v2, "ViewTargetProfile") )
                      {
                        if ( sub_119C9E8(v2, "ViewTargetUserCreatedContent") )
                        {
                          if ( sub_119C9E8(v2, "ViewTargetVideoHistory") )
                          {
                            v4 = sub_119C9E8(v2, "ViewTargetVideoStatus");
                            result = 0;
                            if ( !v4 )
                              result = 10;
                          }
                          else
                            result = 6;
                        }
                        else
                          result = 14;
                      }
                      else
                        result = 4;
                    }
                    else
                      result = 9;
                  }
                  else
                    result = 11;
                }
                else
                  result = 7;
              }
              else
                result = 5;
            }
            else
              result = 8;
          }
          else
            result = 12;
        }
        else
          result = 3;
      }
      else
        result = 2;
    }
    else
      result = 1;
  }
  else
    result = 13;
  return result;
}


signed int __fastcall Social::MultiplayerServiceManager::getInRegionPage(Social::MultiplayerServiceManager *this)
{
  __int64 v1; // r4@1
  int v2; // t1@2
  signed int result; // r0@4

  v1 = *(_QWORD *)this;
  if ( (_DWORD)v1 == HIDWORD(v1) )
  {
    result = 0;
  }
  else
    while ( 1 )
    {
      v2 = *(_DWORD *)v1;
      LODWORD(v1) = v1 + 4;
      if ( (*(int (**)(void))(*(_DWORD *)v2 + 132))() == 1 )
        break;
      if ( HIDWORD(v1) == (_DWORD)v1 )
        return 0;
    }
    result = 1;
  return result;
}


int __fastcall Social::MultiplayerServiceManager::leaveGame(int result)
{
  __int64 i; // r4@1
  int v2; // t1@2

  for ( i = *(_QWORD *)result; HIDWORD(i) != (_DWORD)i; result = (*(int (**)(void))(*(_DWORD *)v2 + 44))() )
  {
    Social::MultiplayerService::setActive(*(Social::MultiplayerService **)i, 1);
    v2 = *(_DWORD *)i;
    LODWORD(i) = i + 4;
  }
  return result;
}


int __fastcall Social::User::getPlatformID(int result)
{
  *(_DWORD *)result = &unk_28898CC;
  return result;
}


void __fastcall Social::MultiplayerXBL::_getPrimaryUserNickname(Social::MultiplayerXBL *this, int a2)
{
  Social::MultiplayerXBL *v2; // r4@1
  int v3; // r0@1
  int v4; // r4@1
  unsigned int *v5; // r1@2
  unsigned int v6; // r0@4
  unsigned int *v7; // r5@8
  unsigned int v8; // r0@10
  Social::User *v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v9, *(_DWORD *)(a2 + 44));
  v3 = Social::User::getLiveUser(v9);
  Social::XboxLiveUserManager::getCurrentGamertag(v2, v3);
  v4 = v10;
  if ( v10 )
  {
    v5 = (unsigned int *)(v10 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 == 1 )
      v7 = (unsigned int *)(v4 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  }
}


int __fastcall Social::MultiplayerServiceManager::tick(Social::MultiplayerServiceManager *this, int a2)
{
  Social::MultiplayerServiceManager *v2; // r9@1
  int v3; // r8@1
  int v4; // r4@1
  int i; // r5@1
  int v6; // r7@2
  void (__fastcall *v7)(int, int, _DWORD **); // r10@2
  int result; // r0@5
  _DWORD *v9; // [sp+4h] [bp-34h]@2
  int (__fastcall *v10)(void **, _DWORD **, int); // [sp+Ch] [bp-2Ch]@2
  void *v11; // [sp+10h] [bp-28h]@2

  v2 = this;
  v3 = a2;
  v4 = *(_QWORD *)this >> 32;
  for ( i = *(_QWORD *)this; v4 != i; i += 4 )
  {
    v6 = *(_DWORD *)i;
    v7 = *(void (__fastcall **)(int, int, _DWORD **))(**(_DWORD **)i + 20);
    v9 = operator new(4u);
    *v9 = v2;
    v11 = &loc_FFC504;
    v10 = sub_FFC50E;
    v7(v6, v3, &v9);
    if ( v10 )
      v10((void **)&v9, &v9, 3);
  }
  result = *((_BYTE *)v2 + 24);
  if ( *((_BYTE *)v2 + 24) )
    if ( !v3 )
    {
      Social::MultiplayerServiceManager::_buildGameList(v2);
      result = 0;
      *((_BYTE *)v2 + 24) = 0;
    }
  return result;
}


int __fastcall Social::MultiplayerService::MultiplayerService(int a1, int a2, char a3)
{
  int v3; // r4@1
  int v4; // r9@1
  char v5; // r10@1
  __int64 v6; // r2@1
  double v7; // r0@1
  unsigned int v8; // r0@1
  int v9; // r7@3
  void *v10; // r6@3
  int v11; // r1@4
  int result; // r0@4

  v3 = a1;
  v4 = a2;
  v5 = a3;
  *(_DWORD *)a1 = &off_26E7524;
  *(_DWORD *)(a1 + 4) = &off_26E7618;
  *(_DWORD *)(a1 + 8) = 12;
  *(_DWORD *)(a1 + 20) = 0;
  *(_BYTE *)(a1 + 28) = 0;
  *(_DWORD *)(a1 + 32) = 0;
  *(_BYTE *)(a1 + 36) = 0;
  *(_DWORD *)(a1 + 60) = 0;
  *(_DWORD *)(a1 + 44) = 0;
  *(_DWORD *)(a1 + 48) = 0;
  *(_DWORD *)(a1 + 52) = operator new(1u);
  HIDWORD(v6) = sub_1382E44;
  LODWORD(v6) = sub_1382EAC;
  *(_QWORD *)(v3 + 60) = v6;
  *(_DWORD *)(v3 + 68) = 0;
  *(_DWORD *)(v3 + 72) = 0;
  *(_DWORD *)(v3 + 76) = 0;
  *(_DWORD *)(v3 + 80) = &unk_28898CC;
  *(_DWORD *)(v3 + 88) = 0;
  *(_DWORD *)(v3 + 92) = 0;
  *(_DWORD *)(v3 + 96) = 0;
  *(_DWORD *)(v3 + 100) = &unk_28898CC;
  *(_DWORD *)(v3 + 104) = &unk_28898CC;
  *(_DWORD *)(v3 + 108) = &unk_28898CC;
  *(_DWORD *)(v3 + 112) = &unk_28898CC;
  *(_DWORD *)(v3 + 116) = &unk_28898CC;
  *(_DWORD *)(v3 + 120) = &unk_28898CC;
  *(_DWORD *)(v3 + 124) = &unk_28898CC;
  *(_DWORD *)(v3 + 128) = &unk_28898CC;
  *(_DWORD *)(v3 + 136) = 0;
  *(_DWORD *)(v3 + 140) = 0;
  *(_DWORD *)(v3 + 144) = &unk_28898CC;
  *(_DWORD *)(v3 + 148) = &unk_28898CC;
  *(_BYTE *)(v3 + 176) = 0;
  *(_DWORD *)(v3 + 180) = 0;
  *(_DWORD *)(v3 + 184) = 0;
  *(_DWORD *)(v3 + 188) = 0;
  *(_DWORD *)(v3 + 200) = 0;
  *(_DWORD *)(v3 + 204) = 0;
  *(_DWORD *)(v3 + 208) = 1065353216;
  LODWORD(v7) = v3 + 208;
  *(_DWORD *)(LODWORD(v7) + 4) = 0;
  v8 = sub_21E6254(v7);
  *(_DWORD *)(v3 + 196) = v8;
  if ( v8 == 1 )
  {
    *(_DWORD *)(v3 + 216) = 0;
    v10 = (void *)(v3 + 216);
  }
  else
    if ( v8 >= 0x40000000 )
      sub_21E57F4();
    v9 = 4 * v8;
    v10 = operator new(4 * v8);
    _aeabi_memclr4(v10, v9);
  *(_DWORD *)(v3 + 192) = v10;
  *(_DWORD *)(v3 + 236) = 0;
  *(_DWORD *)(v3 + 240) = 0;
  *(_DWORD *)(v3 + 228) = 0;
  *(_DWORD *)(v3 + 232) = 0;
  *(_DWORD *)(v3 + 220) = 0;
  *(_DWORD *)(v3 + 224) = 0;
  *(_DWORD *)(v3 + 244) = 0;
  *(_DWORD *)(v3 + 248) = 0;
  *(_BYTE *)(v3 + 252) = 1;
  *(_BYTE *)(v3 + 253) = 0;
  *(_BYTE *)(v3 + 254) = 0;
  *(_BYTE *)(v3 + 255) = 0;
  *(_DWORD *)(v3 + 256) = 100;
  *(_BYTE *)(v3 + 260) = 0;
  *(_BYTE *)(v3 + 261) = v5;
  *(_DWORD *)(v3 + 264) = 0;
  *(_DWORD *)(v3 + 268) = 0;
  *(_DWORD *)(v3 + 272) = 0;
  *(_DWORD *)(v3 + 276) = 0;
  sub_21E034C((_QWORD *)(v3 + 280));
  v11 = v3 + 288;
  *(_DWORD *)v11 = 10;
  *(_DWORD *)(v11 + 4) = 0;
  *(_DWORD *)(v11 + 8) = v4;
  result = v3;
  *(_BYTE *)(v3 + 300) = 1;
  return result;
}


int (**__fastcall Social::MultiplayerXBL::clearRealm(Social::MultiplayerXBL *this))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  Social::MultiplayerXBL *v1; // r4@1
  int v2; // r0@2
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@3

  v1 = this;
  if ( &pthread_create )
  {
    v2 = pthread_mutex_lock((pthread_mutex_t *)this + 18);
    if ( v2 )
      sub_119CCFC(v2);
    *((_DWORD *)v1 + 92) = 0;
    result = &pthread_create;
    if ( &pthread_create )
      result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))pthread_mutex_unlock((pthread_mutex_t *)v1 + 18);
  }
  else
    result = 0;
  return result;
}


unsigned int *__fastcall Social::UserManager::getUser(Social::UserManager *this, const ClientInstance *a2, int a3)
{
  const ClientInstance *v3; // r5@1
  Social::UserManager *v4; // r4@1
  int v5; // r0@1
  char *v6; // r7@1
  int v7; // r6@1
  int v8; // r2@5
  unsigned int *result; // r0@6

  v3 = a2;
  v4 = this;
  v5 = *((_DWORD *)a2 + 15);
  v6 = (char *)a2 + 52;
  v7 = a3;
  while ( (char *)v5 != v6 )
  {
    if ( *(_DWORD *)(v5 + 20) == v7 )
    {
      v8 = *(_DWORD *)(v5 + 16);
      if ( v8 != -1 )
        return Social::UserManager::getUserFromControllerId(v4, (int)v3, v8);
      break;
    }
    v5 = sub_119CB48(v5);
  }
  result = 0;
  *(_DWORD *)v4 = 0;
  *((_DWORD *)v4 + 1) = 0;
  return result;
}


void __fastcall Social::MultiplayerXBL::sendRealmsWhitelistNotification(int a1, unsigned __int64 *a2)
{
  Social::MultiplayerXBL::sendRealmsWhitelistNotification(a1, a2);
}


signed int __fastcall Social::MultiplayerService::isActive(Social::MultiplayerService *this)
{
  Social::MultiplayerService *v1; // r4@1
  signed int result; // r0@2

  v1 = this;
  if ( (*(int (**)(void))(*(_DWORD *)this + 196))() == 1 )
  {
    result = *((_BYTE *)v1 + 300);
    if ( *((_BYTE *)v1 + 300) )
      result = 1;
  }
  else
    result = 0;
  return result;
}


int __fastcall Social::XboxLiveUserManager::onAppResumed(int result)
{
  *(_BYTE *)(result + 256) = 1;
  return result;
}


unsigned int __fastcall Social::MultiplayerGameInfo::addSupportedConnection(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, __int16 a35)
{
  int v35; // r4@1
  __int64 v36; // kr00_8@1
  unsigned int result; // r0@2
  __int16 v38; // [sp+Ah] [bp-26h]@1
  char *v39; // [sp+Ch] [bp-24h]@1
  __int16 v40; // [sp+12h] [bp-1Eh]@1
  int v41; // [sp+24h] [bp-Ch]@1
  int v42; // [sp+28h] [bp-8h]@1
  int v43; // [sp+2Ch] [bp-4h]@1

  v35 = a1;
  v41 = a2;
  v42 = a3;
  v43 = a4;
  v40 = a35;
  v39 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v41, 0, 124);
  v38 = RakNet::SystemAddress::GetPort((RakNet::SystemAddress *)&v41);
  v36 = *(_QWORD *)(v35 + 4);
  if ( (_DWORD)v36 == HIDWORD(v36) )
  {
    result = std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType &,char const*,unsigned short,char const(&)[1]>(
               (unsigned __int64 *)v35,
               &v40,
               (const char **)&v39,
               &v38,
               (const char *)&unk_257BC67);
  }
  else
    __gnu_cxx::new_allocator<Social::GameConnectionInfo>::construct<Social::GameConnectionInfo,Social::ConnectionType &,char const*,unsigned short,char const(&)[1]>(
      v35,
      v36,
      &v40,
      (const char **)&v39,
      &v38,
      (const char *)&unk_257BC67);
    result = *(_DWORD *)(v35 + 4) + 60;
    *(_DWORD *)(v35 + 4) = result;
  return result;
}


xbox::services::presence::presence_record *__fastcall Social::XboxLiveUserInfo::_processPresences(xbox::services::presence::presence_record *result, unsigned __int64 *a2, unsigned __int64 **a3)
{
  xbox::services::presence::presence_record *v3; // r6@1
  void **v4; // r5@2
  void **v5; // r4@2
  void **v6; // r7@2
  int *v7; // r10@2
  int (**v8)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r9@2
  int *v9; // r8@2
  int v10; // r0@4
  int *v11; // r9@5
  void **v12; // r7@5
  unsigned __int64 *v13; // r4@5
  int *v14; // r0@5
  int *v15; // r6@5
  int v16; // r8@5
  int v17; // r0@5
  void *v18; // r0@5
  void *v19; // r0@6
  void *v20; // r0@9
  void *v21; // r0@10
  void *v22; // r0@11
  unsigned int *v23; // r2@14
  signed int v24; // r1@16
  unsigned int *v25; // r2@18
  signed int v26; // r1@20
  unsigned int *v27; // r2@22
  signed int v28; // r1@24
  unsigned int *v29; // r2@26
  signed int v30; // r1@28
  unsigned int *v31; // r2@30
  signed int v32; // r1@32
  xbox::services::presence::presence_record *v33; // [sp+14h] [bp-5Ch]@1
  pthread_mutex_t *mutex; // [sp+18h] [bp-58h]@2
  unsigned __int64 **v35; // [sp+1Ch] [bp-54h]@1
  xbox::services::presence::presence_record *v36; // [sp+20h] [bp-50h]@5
  int v37; // [sp+24h] [bp-4Ch]@2
  int v38; // [sp+28h] [bp-48h]@2
  int v39; // [sp+2Ch] [bp-44h]@3
  int v40; // [sp+34h] [bp-3Ch]@2
  int v41; // [sp+3Ch] [bp-34h]@2
  int v42; // [sp+44h] [bp-2Ch]@2

  v35 = a3;
  v3 = (xbox::services::presence::presence_record *)*a2;
  v33 = (xbox::services::presence::presence_record *)(*a2 >> 32);
  if ( v3 != v33 )
  {
    mutex = (pthread_mutex_t *)((char *)result + 68);
    v4 = (void **)&v42;
    v5 = (void **)&v41;
    v6 = (void **)&v40;
    v7 = &v37;
    v8 = &pthread_create;
    v9 = &v38;
    do
    {
      sub_21E94B4(v4, (const char *)&unk_257BC67);
      sub_21E94B4(v5, (const char *)&unk_257BC67);
      sub_21E94B4(v6, (const char *)&unk_257BC67);
      v39 = 0;
      Social::XboxLiveUserInfo::_choosePresenceInfo(v3, (int *)v4, (int *)v5, (int *)v6, &v39);
      if ( v8 )
      {
        v10 = pthread_mutex_lock(mutex);
        if ( v10 )
          sub_21E5E14(v10);
      }
      v11 = (int *)v6;
      v12 = v5;
      v13 = *v35;
      v14 = (int *)xbox::services::presence::presence_record::xbox_user_id(v3);
      sub_21E8AF4(v7, v14);
      utility::conversions::to_utf8string(v9, v7);
      v36 = v3;
      v15 = v9;
      v16 = std::__detail::_Map_base<std::string,std::pair<std::string const,Social::XboxProfile>,std::allocator<std::pair<std::string const,Social::XboxProfile>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>,true>::at(
              v13,
              (int **)v9);
      v5 = v12;
      v6 = (void **)v11;
      v17 = xbox::services::presence::presence_record::user_state(v36);
      *(_DWORD *)(v16 + 24) = v39;
      *(_DWORD *)(v16 + 28) = v17;
      EntityInteraction::setInteractText((int *)(v16 + 32), (int *)v5);
      EntityInteraction::setInteractText((int *)(v16 + 36), (int *)v4);
      EntityInteraction::setInteractText((int *)(v16 + 40), v11);
      *(_DWORD *)(v16 + 44) |= 2u;
      v8 = &pthread_create;
      v18 = (void *)(v38 - 12);
      if ( (int *)(v38 - 12) != &dword_28898C0 )
        v23 = (unsigned int *)(v38 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v24 = __ldrex(v23);
          while ( __strex(v24 - 1, v23) );
        }
        else
          v24 = (*v23)--;
        if ( v24 <= 0 )
          j_j_j_j__ZdlPv_9(v18);
      v9 = v15;
      v19 = (void *)(v37 - 12);
      if ( (int *)(v37 - 12) != &dword_28898C0 )
        v25 = (unsigned int *)(v37 - 4);
            v26 = __ldrex(v25);
          while ( __strex(v26 - 1, v25) );
          v26 = (*v25)--;
        if ( v26 <= 0 )
          j_j_j_j__ZdlPv_9(v19);
      v7 = &v37;
      if ( &pthread_create )
        pthread_mutex_unlock(mutex);
      v20 = (void *)(v40 - 12);
      if ( (int *)(v40 - 12) != &dword_28898C0 )
        v27 = (unsigned int *)(v40 - 4);
            v28 = __ldrex(v27);
          while ( __strex(v28 - 1, v27) );
          v28 = (*v27)--;
        if ( v28 <= 0 )
          j_j_j_j__ZdlPv_9(v20);
      v21 = (void *)(v41 - 12);
      if ( (int *)(v41 - 12) != &dword_28898C0 )
        v29 = (unsigned int *)(v41 - 4);
            v30 = __ldrex(v29);
          while ( __strex(v30 - 1, v29) );
          v30 = (*v29)--;
        if ( v30 <= 0 )
          j_j_j_j__ZdlPv_9(v21);
      v22 = (void *)(v42 - 12);
      v4 = (void **)&v42;
      if ( (int *)(v42 - 12) != &dword_28898C0 )
        v31 = (unsigned int *)(v42 - 4);
            v32 = __ldrex(v31);
          while ( __strex(v32 - 1, v31) );
          v32 = (*v31)--;
        if ( v32 <= 0 )
          j_j_j_j__ZdlPv_9(v22);
      v3 = (xbox::services::presence::presence_record *)((char *)v36 + 20);
      result = v33;
    }
    while ( (xbox::services::presence::presence_record *)((char *)v36 + 20) != v33 );
  }
  return result;
}


void __fastcall Social::MultiplayerXBL::_getPrimaryUserId(Social::MultiplayerXBL *this, int a2)
{
  Social::MultiplayerXBL *v2; // r4@1
  int v3; // r0@1
  int v4; // r4@1
  unsigned int *v5; // r1@2
  unsigned int v6; // r0@4
  unsigned int *v7; // r5@8
  unsigned int v8; // r0@10
  Social::User *v9; // [sp+0h] [bp-18h]@1
  int v10; // [sp+4h] [bp-14h]@1

  v2 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v9, *(_DWORD *)(a2 + 44));
  v3 = Social::User::getLiveUser(v9);
  Social::XboxLiveUserManager::getCurrentXUID(v2, v3);
  v4 = v10;
  if ( v10 )
  {
    v5 = (unsigned int *)(v10 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 - 1, v5) );
    }
    else
      v6 = (*v5)--;
    if ( v6 == 1 )
      v7 = (unsigned int *)(v4 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v8 = __ldrex(v7);
        while ( __strex(v8 - 1, v7) );
      }
      else
        v8 = (*v7)--;
      if ( v8 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  }
}


void __fastcall Social::UserManager::signInFailed(int a1, Social::User **a2)
{
  Social::User **v2; // r4@1
  int v3; // r5@1
  int *v4; // r0@1
  Option *v5; // r6@1
  char *v6; // r0@3
  int v7; // r5@3
  int i; // r6@3
  __int64 v9; // kr00_8@3
  int v10; // r1@4

  v2 = a2;
  v3 = a1;
  v4 = (int *)Social::User::getOptions(*a2);
  v5 = (Option *)Options::get(*v4, 141);
  if ( !Option::hasOverrideSource(v5) )
    StringOption::set((int)v5, &Util::EMPTY_STRING);
  v6 = Social::User::getOptions(*v2);
  Options::save(*(Options **)v6, 0);
  v9 = *(_QWORD *)(v3 + 32);
  v7 = *(_QWORD *)(v3 + 32) >> 32;
  for ( i = v9; v7 != i; i += 16 )
  {
    v10 = Social::User::getGameControllerId(*v2);
    if ( !*(_DWORD *)(i + 8) )
      sub_119C8E4();
    (*(void (__fastcall **)(int, int))(i + 12))(i, v10);
  }
}


signed int __fastcall Social::Events::EventManager::removeGlobalProperty(int a1, int **a2)
{
  return j_j_j__ZNSt10_HashtableISsSt4pairIKSsN6Social6Events8PropertyEESaIS5_ENSt8__detail10_Select1stESt8equal_toISsESt4hashISsENS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_20_Prime_rehash_policyENS7_17_Hashtable_traitsILb1ELb0ELb1EEEE8_M_eraseESt17integral_constantIbLb1EERS1_(
           (unsigned __int64 *)(a1 + 12),
           a2);
}


void __fastcall Social::MultiplayerXBL::invitePlayers(int a1, __int64 *a2)
{
  Social::MultiplayerXBL::invitePlayers(a1, a2);
}


void __fastcall Social::Events::Event::addProperty<char>(int a1, int *a2, _BYTE *a3)
{
  Social::Events::Event::addProperty<char>(a1, a2, a3);
}


void __fastcall Social::XboxLiveUserInfo::_getProfile(int a1, int a2, _BYTE **a3)
{
  const char *v3; // r6@1
  int v4; // r9@1
  int v5; // r8@1
  unsigned int v6; // r4@1
  _DWORD *v7; // r0@2
  unsigned int *v8; // r5@2
  char *v9; // r7@2
  int v10; // r4@8
  unsigned int v11; // r1@9
  unsigned int *v12; // r0@9
  unsigned int v13; // r2@12
  unsigned int v14; // r3@13
  int v15; // r5@16
  unsigned int *v16; // r6@16
  unsigned int v17; // r1@20
  unsigned int v18; // r1@24
  unsigned int v19; // r0@30
  unsigned int v20; // r0@37
  void *v21; // r0@40
  int v22; // r0@41
  unsigned int *v23; // r2@42
  unsigned int v24; // r1@44
  unsigned int v25; // r0@51
  char *v26; // r0@56
  unsigned int *v27; // r2@58
  signed int v28; // r1@60
  unsigned int *v29; // r2@62
  signed int v30; // r1@64
  int v31; // [sp+4h] [bp-34h]@35
  int v32; // [sp+8h] [bp-30h]@35
  int v33; // [sp+Ch] [bp-2Ch]@40
  char *v34; // [sp+14h] [bp-24h]@8

  v3 = *a3;
  v4 = a2;
  v5 = a1;
  v6 = *((_DWORD *)*a3 - 3);
  if ( v6 )
  {
    v7 = sub_21E7E80(v6, 0);
    v8 = v7;
    v9 = (char *)(v7 + 3);
    if ( v6 == 1 )
      *v9 = *v3;
    else
      _aeabi_memcpy(v7 + 3, v3, v6);
    if ( (int *)v8 != &dword_28898C0 )
    {
      v8[2] = 0;
      *v8 = v6;
      v9[v6] = byte_26C67B8[0];
    }
  }
  else
    v9 = (char *)&unk_28898CC;
  v34 = v9;
  v10 = *(_DWORD *)(v4 + 4);
  if ( !v10 )
    std::__throw_bad_weak_ptr();
  v11 = *(_DWORD *)(v10 + 4);
  v12 = (unsigned int *)(v10 + 4);
  do
    while ( 1 )
      if ( !v11 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v13 = __ldrex(v12);
      if ( v13 == v11 )
        break;
      __clrex();
      v11 = v13;
    v14 = __strex(v11 + 1, v12);
    v11 = v13;
  while ( v14 );
  __dmb();
  v15 = *(_DWORD *)v4;
  v16 = (unsigned int *)(v10 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v17 = __ldrex(v16);
    while ( __strex(v17 + 1, v16) );
    ++*v16;
      v18 = __ldrex(v12);
    while ( __strex(v18 - 1, v12) );
    v18 = (*v12)--;
  if ( v18 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 8))(v10);
    if ( &pthread_create )
      do
        v19 = __ldrex(v16);
      while ( __strex(v19 - 1, v16) );
      v19 = (*v16)--;
    if ( v19 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v31 = v15;
  v32 = v10;
      v20 = __ldrex(v16);
    while ( __strex(v20 + 1, v16) );
  sub_21E8AF4(&v33, (int *)&v34);
  sub_138E984(v5, (int)&v31);
  v21 = (void *)(v33 - 12);
  if ( (int *)(v33 - 12) != &dword_28898C0 )
    v27 = (unsigned int *)(v33 - 4);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 <= 0 )
      j_j_j_j__ZdlPv_9(v21);
  v22 = v32;
  if ( v32 )
    v23 = (unsigned int *)(v32 + 8);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      (*(void (**)(void))(*(_DWORD *)v22 + 12))();
      v25 = __ldrex(v16);
    while ( __strex(v25 - 1, v16) );
    v25 = (*v16)--;
  if ( v25 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v10 + 12))(v10);
  v26 = v34 - 12;
  if ( (int *)(v34 - 12) != &dword_28898C0 )
    v29 = (unsigned int *)(v34 - 4);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 <= 0 )
      j_j_j_j__ZdlPv_9(v26);
}


void __fastcall Social::ClientConnectionState::fromJson(Social::ClientConnectionState *this, const web::json::value *a2)
{
  Social::ClientConnectionState::fromJson(this, a2);
}


void __fastcall Social::XboxLiveUserManager::_updateNewXuids(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager::_updateNewXuids(this);
}


int __fastcall Social::MultiplayerServiceManager::isInRealm(Social::MultiplayerServiceManager *this)
{
  Social::MultiplayerService **v1; // r4@1
  Social::MultiplayerService **v2; // r5@1
  int v3; // r6@2
  int result; // r0@4

  v1 = (Social::MultiplayerService **)(*(_QWORD *)this >> 32);
  v2 = (Social::MultiplayerService **)*(_QWORD *)this;
  if ( v2 == v1 )
  {
LABEL_4:
    result = 0;
  }
  else
    while ( 1 )
    {
      v3 = (int)(v2 + 1);
      if ( !Social::MultiplayerService::getServiceId(*v2) )
        break;
      ++v2;
      if ( v1 == (Social::MultiplayerService **)v3 )
        goto LABEL_4;
    }
    result = (*(int (**)(void))(*(_DWORD *)*v2 + 116))() & 1;
  return result;
}


_DWORD *__fastcall Social::Events::EventManager::removePlayerCommonProperty(int a1, unsigned int a2, int **a3)
{
  unsigned int v3; // r10@1
  unsigned int v4; // r1@1
  int v5; // r4@1
  _DWORD *result; // r0@1
  int v7; // r1@1
  _DWORD *v8; // t0@1
  int v9; // r11@1
  _DWORD *v10; // r7@1
  _DWORD *v11; // r5@2
  int v12; // r4@2
  _DWORD *v13; // r9@2
  int v14; // r6@2
  int v15; // r8@4
  bool v16; // zf@7
  _DWORD *v17; // r6@11
  unsigned int v18; // r0@12
  int v19; // r1@12
  bool v20; // zf@15
  unsigned int v21; // [sp+8h] [bp-28h]@1

  v3 = a2;
  v4 = *(_QWORD *)(a1 + 68) >> 32;
  v5 = *(_QWORD *)(a1 + 68);
  v21 = v4;
  v8 = (_DWORD *)(v3 / v4);
  v7 = v3 % v4;
  result = v8;
  v9 = v7;
  v10 = *(_DWORD **)(v5 + 4 * v7);
  if ( v10 )
  {
    v11 = (_DWORD *)*v10;
    result = *(_DWORD **)(v5 + 4 * v7);
    v12 = *(_DWORD *)(*v10 + 4);
    v13 = (_DWORD *)*v10;
    v14 = *(_DWORD *)(*v10 + 4);
    while ( v14 != v3 )
    {
      v15 = *v13;
      if ( *v13 )
      {
        v14 = *(_DWORD *)(v15 + 4);
        result = v13;
        v13 = (_DWORD *)*v13;
        if ( *(_DWORD *)(v15 + 4) % v21 == v7 )
          continue;
      }
      return result;
    }
    v16 = result == 0;
    if ( result )
      result = (_DWORD *)*result;
      v16 = result == 0;
    if ( !v16 )
      while ( v12 != v3 )
        v17 = (_DWORD *)*v11;
        if ( *v11 )
        {
          v12 = v17[1];
          v18 = v17[1];
          v19 = v18 % v21;
          result = (_DWORD *)(v18 / v21);
          v10 = v11;
          v11 = (_DWORD *)*v11;
          if ( v19 == v9 )
            continue;
        }
        goto LABEL_19;
      v20 = v10 == 0;
      if ( v10 )
        result = (_DWORD *)*v10;
        v20 = *v10 == 0;
      if ( v20 )
LABEL_19:
        sub_21E5A84("_Map_base::at");
      result = (_DWORD *)j_j_j__ZNSt10_HashtableISsSt4pairIKSsN6Social6Events8PropertyEESaIS5_ENSt8__detail10_Select1stESt8equal_toISsESt4hashISsENS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_20_Prime_rehash_policyENS7_17_Hashtable_traitsILb1ELb0ELb1EEEE8_M_eraseESt17integral_constantIbLb1EERS1_(
                           (unsigned __int64 *)result + 1,
                           a3);
  }
  return result;
}


void __fastcall Social::ClientConnectionState::toJson(Social::ClientConnectionState *this, web::json::value *a2)
{
  web::json::value *v2; // r5@1
  Social::ClientConnectionState *v3; // r4@1
  int *v4; // r6@1
  void *v5; // r0@3
  web::json::value *v6; // r0@4
  void *v7; // r0@4
  unsigned int *v8; // r2@6
  signed int v9; // r1@8
  unsigned int *v10; // r2@10
  signed int v11; // r1@12
  int v12; // [sp+4h] [bp-24h]@4
  int v13; // [sp+8h] [bp-20h]@1
  int v14; // [sp+10h] [bp-18h]@1

  v2 = a2;
  v3 = this;
  sub_21E94B4((void **)&v14, "State");
  v4 = (int *)web::json::value::operator[]((int)v2);
  web::json::value::value((web::json::value *)&v13, *(_DWORD *)v3);
  web::json::value::operator=(v4, &v13);
  if ( v13 )
    (*(void (**)(void))(*(_DWORD *)v13 + 96))();
  v13 = 0;
  v5 = (void *)(v14 - 12);
  if ( (int *)(v14 - 12) != &dword_28898C0 )
  {
    v8 = (unsigned int *)(v14 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 - 1, v8) );
    }
    else
      v9 = (*v8)--;
    if ( v9 <= 0 )
      j_j_j_j__ZdlPv_9(v5);
  }
  sub_21E94B4((void **)&v12, "ConnectionInfo");
  v6 = (web::json::value *)web::json::value::operator[]((int)v2);
  Social::GameConnectionInfo::toJson((Social::ClientConnectionState *)((char *)v3 + 4), v6);
  v7 = (void *)(v12 - 12);
  if ( (int *)(v12 - 12) != &dword_28898C0 )
    v10 = (unsigned int *)(v12 - 4);
        v11 = __ldrex(v10);
      while ( __strex(v11 - 1, v10) );
      v11 = (*v10)--;
    if ( v11 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
}


Social::User *__fastcall Social::User_generic::User_generic(Social::User *a1, int a2, int a3, MinecraftEventing *a4, int a5, int a6, int a7)
{
  Social::User *v7; // r8@1
  int v8; // r6@1
  int v9; // r9@1
  int v10; // r5@1
  MinecraftEventing *v11; // r7@1
  int v12; // r1@1
  int v13; // r0@1
  Social::XboxLiveUserManager *v14; // r4@3
  int v15; // r0@3
  int v16; // r5@3
  unsigned int *v17; // r1@4
  unsigned int v18; // r0@6
  unsigned int *v19; // r4@10
  unsigned int v20; // r0@12
  int v21; // r5@19
  unsigned int *v22; // r1@20
  unsigned int v23; // r0@22
  unsigned int *v24; // r4@26
  unsigned int v25; // r0@28
  int v26; // r5@33
  unsigned int *v27; // r1@34
  unsigned int v28; // r0@36
  unsigned int *v29; // r4@40
  unsigned int v30; // r0@42
  Social::XboxLiveUserManager *v32; // [sp+10h] [bp-38h]@3
  char v33; // [sp+14h] [bp-34h]@3
  int v34; // [sp+18h] [bp-30h]@3
  int v35; // [sp+1Ch] [bp-2Ch]@1
  int v36; // [sp+20h] [bp-28h]@1
  int v37; // [sp+24h] [bp-24h]@1
  int v38; // [sp+28h] [bp-20h]@1

  v7 = a1;
  v8 = a2;
  v9 = a3;
  v10 = 0;
  v37 = *(_DWORD *)a5;
  v11 = a4;
  v12 = *(_DWORD *)(a5 + 4);
  *(_DWORD *)(a5 + 4) = 0;
  v38 = v12;
  *(_DWORD *)a5 = 0;
  v35 = *(_DWORD *)a6;
  v13 = *(_DWORD *)(a6 + 4);
  *(_DWORD *)(a6 + 4) = 0;
  v36 = v13;
  *(_DWORD *)a6 = 0;
  if ( !v8 )
    v10 = 3;
  v14 = (Social::XboxLiveUserManager *)operator new(0x198u);
  Social::XboxLiveUserManager::XboxLiveUserManager(v14, v11);
  v32 = v14;
  v15 = std::__shared_ptr<Social::XboxLiveUserManager,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<Social::XboxLiveUserManager,std::default_delete<Social::XboxLiveUserManager>>(
          (int)&v33,
          (int *)&v32);
  Social::User::User(v7, v8, v9, (int)&v37, v10, (int)&v35, v15, a7);
  v16 = v34;
  if ( v34 )
  {
    v17 = (unsigned int *)(v34 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
    }
    else
      v18 = (*v17)--;
    if ( v18 == 1 )
      v19 = (unsigned int *)(v16 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 8))(v16);
      if ( &pthread_create )
      {
        __dmb();
        do
          v20 = __ldrex(v19);
        while ( __strex(v20 - 1, v19) );
      }
      else
        v20 = (*v19)--;
      if ( v20 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 12))(v16);
  }
  if ( v32 )
    (*(void (**)(void))(*(_DWORD *)v32 + 4))();
  v21 = v36;
  v32 = 0;
  if ( v36 )
    v22 = (unsigned int *)(v36 + 4);
        v23 = __ldrex(v22);
      while ( __strex(v23 - 1, v22) );
      v23 = (*v22)--;
    if ( v23 == 1 )
      v24 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v25 = __ldrex(v24);
        while ( __strex(v25 - 1, v24) );
        v25 = (*v24)--;
      if ( v25 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  v26 = v38;
  if ( v38 )
    v27 = (unsigned int *)(v38 + 4);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 == 1 )
      v29 = (unsigned int *)(v26 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 8))(v26);
          v30 = __ldrex(v29);
        while ( __strex(v30 - 1, v29) );
        v30 = (*v29)--;
      if ( v30 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v26 + 12))(v26);
  *(_DWORD *)v7 = &off_26DEC20;
  return v7;
}


void __fastcall Social::Events::Event::addMeasurement<int>(int a1, int *a2, int a3, int *a4)
{
  int v4; // r8@1
  int *v5; // r6@1
  int v6; // r7@1
  int *v7; // r4@1
  Json::Value *v8; // r5@1
  void *v9; // r0@1
  unsigned int *v10; // r2@3
  signed int v11; // r1@5
  int v12; // [sp+0h] [bp-48h]@1
  int v13; // [sp+8h] [bp-40h]@1
  signed int v14; // [sp+20h] [bp-28h]@1
  int v15; // [sp+24h] [bp-24h]@1

  v4 = a1;
  v5 = a4;
  v6 = a3;
  v7 = a2;
  v8 = (Json::Value *)(sub_21E8AF4(&v13, a2) + 2);
  Json::Value::Value(v8, *v5);
  v14 = 1;
  v15 = v6;
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Measurement>,std::allocator<std::pair<std::string const,Social::Events::Measurement>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Measurement&>(
    (int)&v12,
    (unsigned __int64 *)(v4 + 44),
    v7,
    (int)&v13);
  Json::Value::~Value(v8);
  v9 = (void *)(v13 - 12);
  if ( (int *)(v13 - 12) != &dword_28898C0 )
  {
    v10 = (unsigned int *)(v13 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v11 = __ldrex(v10);
      while ( __strex(v11 - 1, v10) );
    }
    else
      v11 = (*v10)--;
    if ( v11 <= 0 )
      j_j_j_j__ZdlPv_9(v9);
  }
}


int __fastcall Social::Events::Event::Event(int a1, int a2, int *a3, int a4, int a5)
{
  int v5; // r4@1
  int v6; // r6@1
  int v7; // r5@1
  double v8; // r0@1
  _DWORD *v9; // r2@1
  unsigned int v10; // r0@5
  int v11; // r7@7
  void *v12; // r5@7
  void *v13; // r0@9
  int v14; // r0@11
  void *v15; // r0@13
  unsigned int *v17; // r2@16
  signed int v18; // r1@18
  int v19; // [sp+4h] [bp-34h]@13
  int v20; // [sp+Ch] [bp-2Ch]@13

  v5 = a1;
  *(_DWORD *)a1 = a2;
  v6 = a4;
  sub_21E8AF4((int *)(a1 + 4), a3);
  *(_BYTE *)(v5 + 8) = 0;
  *(_DWORD *)(v5 + 12) = a5;
  v7 = *(_DWORD *)v6;
  *(_DWORD *)(v5 + 16) = *(_DWORD *)v6;
  HIDWORD(v8) = *(_DWORD *)(v6 + 4);
  *(_DWORD *)(v5 + 20) = HIDWORD(v8);
  LODWORD(v8) = *(_DWORD *)(v6 + 8);
  *(_DWORD *)(v5 + 24) = LODWORD(v8);
  *(_DWORD *)(v5 + 28) = *(_DWORD *)(v6 + 12);
  *(_QWORD *)(v5 + 32) = *(_QWORD *)(v6 + 16);
  v9 = *(_DWORD **)v6;
  if ( v6 + 24 == *(_DWORD *)v6 )
  {
    v7 = v5 + 40;
    *(_DWORD *)(v5 + 16) = v5 + 40;
    *(_DWORD *)(v5 + 40) = *v9;
  }
  if ( LODWORD(v8) )
    HIDWORD(v8) = *(_DWORD *)(LODWORD(v8) + 40) % HIDWORD(v8);
    *(_DWORD *)(v7 + 4 * HIDWORD(v8)) = v5 + 24;
  *(_DWORD *)(v6 + 20) = 0;
  *(_DWORD *)(v6 + 24) = 0;
  *(_DWORD *)v6 = v6 + 24;
  *(_DWORD *)(v6 + 4) = 1;
  *(_DWORD *)(v6 + 8) = 0;
  *(_DWORD *)(v6 + 12) = 0;
  *(_DWORD *)(v5 + 52) = 0;
  *(_DWORD *)(v5 + 56) = 0;
  *(_DWORD *)(v5 + 60) = 1065353216;
  *(_DWORD *)(v5 + 64) = 0;
  LODWORD(v8) = v5 + 60;
  v10 = sub_21E6254(v8);
  *(_DWORD *)(v5 + 48) = v10;
  if ( v10 == 1 )
    *(_DWORD *)(v5 + 68) = 0;
    v12 = (void *)(v5 + 68);
  else
    if ( v10 >= 0x40000000 )
      sub_21E57F4();
    v11 = 4 * v10;
    v12 = operator new(4 * v10);
    _aeabi_memclr4(v12, v11);
  *(_DWORD *)(v5 + 44) = v12;
  if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v13 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
    v13 = &ServiceLocator<AppPlatform>::mDefaultService;
  v14 = (*(int (**)(void))(**(_DWORD **)v13 + 540))();
  *(_BYTE *)(v5 + 8) = v14;
  if ( v14 )
    if ( !*(_DWORD *)(v5 + 56) )
    {
      sub_21E94B4((void **)&v20, "Count");
      v19 = 1;
      Social::Events::Event::addMeasurement<unsigned int>(v5, &v20, 0, (unsigned int *)&v19);
      v15 = (void *)(v20 - 12);
      if ( (int *)(v20 - 12) != &dword_28898C0 )
      {
        v17 = (unsigned int *)(v20 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
        }
        else
          v18 = (*v17)--;
        if ( v18 <= 0 )
          j_j_j_j__ZdlPv_9(v15);
      }
    }
  return v5;
}


_BOOL4 __fastcall Social::Events::Event::hasMeasurements(int a1)
{
  return *(_DWORD *)(a1 + 56) != 0;
}


int *__fastcall Social::MultiplayerServiceManager::getInviteHandle(int *a1, unsigned __int64 *a2, int a3)
{
  Social::MultiplayerService **v3; // r4@1
  Social::MultiplayerService **v4; // r6@1
  int v5; // r5@1
  int *v6; // r8@1
  int v7; // r7@2
  int *result; // r0@4
  int *v9; // r0@5

  v4 = (Social::MultiplayerService **)(*a2 >> 32);
  v3 = (Social::MultiplayerService **)*a2;
  v5 = a3;
  v6 = a1;
  if ( v3 == v4 )
  {
LABEL_4:
    result = (int *)&unk_28898CC;
    *v6 = (int)&unk_28898CC;
  }
  else
    while ( 1 )
    {
      v7 = (int)(v3 + 1);
      if ( Social::MultiplayerService::getServiceId(*v3) == v5 )
        break;
      ++v3;
      if ( v4 == (Social::MultiplayerService **)v7 )
        goto LABEL_4;
    }
    v9 = (int *)Social::MultiplayerService::getInviteHandle(*v3);
    result = sub_119C854(v6, v9);
  return result;
}


int __fastcall Social::XboxLiveUserManager::getCurrentUser(int result, int a2)
{
  int v2; // r1@1
  unsigned int v3; // r1@4

  *(_DWORD *)result = *(_DWORD *)(a2 + 136);
  v2 = *(_DWORD *)(a2 + 140);
  *(_DWORD *)(result + 4) = v2;
  if ( v2 )
  {
    result = v2 + 4;
    if ( &pthread_create )
    {
      __dmb();
      do
        v3 = __ldrex((unsigned int *)result);
      while ( __strex(v3 + 1, (unsigned int *)result) );
    }
    else
      ++*(_DWORD *)result;
  }
  return result;
}


int __fastcall Social::GameConnectionInfo::GameConnectionInfo(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, int a28, int a29, int a30, int a31, int a32, int a33, int a34, int a35)
{
  return Social::GameConnectionInfo::GameConnectionInfo(
           a1,
           a2,
           a3,
           a4,
           a5,
           a6,
           a7,
           a8,
           a9,
           a10,
           a11,
           a12,
           a13,
           a14,
           a15,
           a16,
           a17,
           a18,
           a19,
           a20,
           a21,
           a22,
           a23,
           a24,
           a25,
           a26,
           a27,
           a28,
           a29,
           a30,
           a31,
           a32,
           a33,
           a34,
           a35);
}


int __fastcall Social::MultiplayerService::_changeMultiplayerState(int a1, int a2, const char **a3, int a4, const char **a5)
{
  int v5; // r4@1
  int v6; // r7@1
  int result; // r0@1
  int v8; // r5@1
  const char **v9; // r8@1
  int v10; // r6@2
  int v11; // r9@2
  void *v12; // r0@2
  unsigned int *v13; // r2@5
  signed int v14; // r1@7
  __int64 v15; // [sp+10h] [bp-38h]@3
  int v16; // [sp+20h] [bp-28h]@2

  v5 = a1;
  v6 = a4;
  result = *(_DWORD *)(a1 + 8);
  v8 = a2;
  v9 = a3;
  if ( result != a2 )
  {
    v10 = *(_BYTE *)(v5 + 176);
    v11 = *(_DWORD *)(v5 + 48);
    sub_21E94B4((void **)&v16, "Live");
    MinecraftEventing::fireEventMultiplayerConnectionStateChanged(
      v11,
      v10 != 0,
      (const char **)&v16,
      v9,
      *(_DWORD *)(v5 + 8),
      v8,
      v6,
      a5);
    v12 = (void *)(v16 - 12);
    if ( (int *)(v16 - 12) != &dword_28898C0 )
    {
      v13 = (unsigned int *)(v16 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
      }
      else
        v14 = (*v13)--;
      if ( v14 <= 0 )
        j_j_j_j__ZdlPv_9(v12);
    }
    *(_DWORD *)(v5 + 8) = v8;
    ++Social::Events::eventSequenceNumber;
    sub_21E034C(&v15);
    result = v15;
    *(_QWORD *)(v5 + 264) = v15;
  }
  return result;
}


RakNet *__fastcall Social::Events::HttpTelemetry::getMaelstromEventBody(Json::Value *a1, int a2, const char **a3, const Json::Value *a4, Json::Value *a5)
{
  Json::Value *v5; // r10@1
  int v6; // r7@1
  const Json::Value *v7; // r8@1
  const char **v8; // r9@1
  int v9; // r5@1
  int v10; // r6@1
  int v11; // r5@1
  unsigned int v12; // r1@1
  struct tm *v13; // r0@1
  int v14; // r4@1
  int v15; // r5@1
  int v16; // r6@1
  int v17; // r7@1
  int v18; // r12@1
  int v19; // r5@1
  int v20; // r6@1
  int v21; // r7@1
  int v22; // r12@1
  int v23; // lr@1
  int v24; // r5@2
  int v25; // r5@3
  int v26; // r0@3
  int v27; // r0@4
  int v28; // r0@5
  RakNet *result; // r0@5
  int v30; // [sp+0h] [bp-F8h]@3
  char v31; // [sp+10h] [bp-E8h]@2
  struct tm tp; // [sp+20h] [bp-D8h]@1
  int v33; // [sp+44h] [bp-B4h]@1
  int v34; // [sp+48h] [bp-B0h]@1
  time_t timer; // [sp+4Ch] [bp-ACh]@1
  char v36; // [sp+50h] [bp-A8h]@1
  char v37; // [sp+60h] [bp-98h]@1
  char v38; // [sp+70h] [bp-88h]@1
  char s; // [sp+84h] [bp-74h]@1
  RakNet *v40; // [sp+D4h] [bp-24h]@1

  v5 = a1;
  v6 = a2;
  v7 = a4;
  v8 = a3;
  v40 = _stack_chk_guard;
  j_Json::Value::Value(a1, 0);
  j_Json::Value::Value(&v38, 0);
  v9 = j_Util::hashCode((_BYTE **)v8);
  v10 = j_Json::Value::operator[](v5, "typeId");
  j_Json::Value::Value((Json::Value *)&v37, v9);
  j_Json::Value::operator=(v10, (const Json::Value *)&v37);
  j_Json::Value::~Value((Json::Value *)&v37);
  v11 = j_Json::Value::operator[](v5, "sequenceId");
  v12 = *(_DWORD *)(v6 + 100);
  *(_DWORD *)(v6 + 100) = v12 + 1;
  j_Json::Value::Value((Json::Value *)&v36, v12);
  j_Json::Value::operator=(v11, (const Json::Value *)&v36);
  j_Json::Value::~Value((Json::Value *)&v36);
  timer = j_time(0);
  v13 = j_gmtime(&timer);
  v14 = v13->tm_sec;
  v15 = v13->tm_min;
  v16 = v13->tm_hour;
  v17 = v13->tm_mday;
  v18 = v13->tm_mon;
  v13 = (struct tm *)((char *)v13 + 20);
  tp.tm_sec = v14;
  tp.tm_min = v15;
  tp.tm_hour = v16;
  tp.tm_mday = v17;
  tp.tm_mon = v18;
  v19 = v13->tm_min;
  v20 = v13->tm_hour;
  v21 = v13->tm_mday;
  v22 = v13->tm_mon;
  v23 = v13->tm_year;
  tp.tm_year = v13->tm_sec;
  tp.tm_wday = v19;
  tp.tm_yday = v20;
  tp.tm_isdst = v21;
  v33 = v22;
  v34 = v23;
  if ( j_strftime(&s, 0x50u, "%Y-%m-%dT%X", &tp) )
  {
    v24 = j_Json::Value::operator[](v5, "timestampUtc");
    j_Json::Value::Value((Json::Value *)&v31, &s);
    j_Json::Value::operator=(v24, (const Json::Value *)&v31);
    j_Json::Value::~Value((Json::Value *)&v31);
  }
  v25 = j_Json::Value::operator[]((Json::Value *)&v38, "EventName");
  j_Json::Value::Value((int)&v30, v8);
  j_Json::Value::operator=(v25, (const Json::Value *)&v30);
  j_Json::Value::~Value((Json::Value *)&v30);
  v26 = j_Json::Value::operator[]((Json::Value *)&v38, "Properties");
  j_Json::Value::operator=(v26, v7);
  if ( !j_Json::Value::isNull(a5) )
    v27 = j_Json::Value::operator[]((Json::Value *)&v38, "Measurements");
    j_Json::Value::operator=(v27, a5);
  v28 = j_Json::Value::operator[](v5, "body");
  j_Json::Value::operator=(v28, (const Json::Value *)&v38);
  j_Json::Value::~Value((Json::Value *)&v38);
  result = (RakNet *)(_stack_chk_guard - v40);
  if ( _stack_chk_guard != v40 )
    j___stack_chk_fail_0((int)result);
  return result;
}


int __fastcall Social::XboxLiveUserManager::_updateUserMuteWithGamertag(int a1, int *a2, int **a3, int a4)
{
  int v4; // r9@0
  int v5; // r6@1
  int *v6; // r8@1
  int v7; // r7@1
  int v8; // r4@1
  unsigned int v9; // r0@2
  unsigned int *v10; // r5@2
  unsigned int v11; // r1@5
  unsigned int v12; // r2@6
  bool v13; // zf@7
  signed int v14; // r0@10
  unsigned int v15; // r0@15
  unsigned int *v16; // r5@19
  unsigned int v17; // r0@21
  unsigned int *v18; // r0@27
  unsigned int v19; // r1@29
  int v20; // r0@32
  unsigned int *v21; // r2@33
  unsigned int v22; // r1@35
  int v23; // r0@40
  unsigned int *v24; // r2@41
  unsigned int v25; // r1@43
  int result; // r0@48
  unsigned int *v27; // r2@49
  unsigned int v28; // r1@51
  int v29; // [sp+4h] [bp-34h]@26
  int v30; // [sp+8h] [bp-30h]@26
  char v31; // [sp+Ch] [bp-2Ch]@32
  int v32; // [sp+10h] [bp-28h]@32
  int v33; // [sp+14h] [bp-24h]@1
  int v34; // [sp+18h] [bp-20h]@1

  v5 = a1;
  v6 = a2;
  v7 = a4;
  Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v33, a1, a3);
  v8 = v34;
  if ( v34 )
  {
    v9 = *(_DWORD *)(v34 + 4);
    v10 = (unsigned int *)(v34 + 4);
    while ( v9 )
    {
      __dmb();
      v11 = __ldrex(v10);
      if ( v11 == v9 )
      {
        v12 = __strex(v9 + 1, v10);
        v9 = v11;
        if ( !v12 )
        {
          __dmb();
          v13 = *v10 == 0;
          if ( *v10 )
          {
            v4 = v33;
            v13 = v33 == 0;
          }
          if ( !v13 )
            EntityInteraction::setInteractText((int *)(v4 + 4), v6);
            v14 = 2;
            if ( v7 )
              v14 = 1;
            *(_DWORD *)(v4 + 24) = v14;
          if ( &pthread_create )
            __dmb();
            do
              v15 = __ldrex(v10);
            while ( __strex(v15 - 1, v10) );
          else
            v15 = (*v10)--;
          if ( v15 == 1 )
            v16 = (unsigned int *)(v8 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
            if ( &pthread_create )
            {
              __dmb();
              do
                v17 = __ldrex(v16);
              while ( __strex(v17 - 1, v16) );
            }
            else
              v17 = (*v16)--;
            if ( v17 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
          break;
        }
      }
      else
        __clrex();
    }
  }
  v29 = v33;
  v30 = v34;
    v18 = (unsigned int *)(v34 + 8);
    if ( &pthread_create )
      do
        v19 = __ldrex(v18);
      while ( __strex(v19 + 1, v18) );
    else
      ++*v18;
  Social::XboxLiveUserManager::_getUserProfileDataWithGamertag((int)&v31, v5, (int **)v6, (int)&v29);
  v20 = v32;
  if ( v32 )
    v21 = (unsigned int *)(v32 + 8);
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
      v22 = (*v21)--;
    if ( v22 == 1 )
      (*(void (**)(void))(*(_DWORD *)v20 + 12))();
  v23 = v30;
  if ( v30 )
    v24 = (unsigned int *)(v30 + 8);
        v25 = __ldrex(v24);
      while ( __strex(v25 - 1, v24) );
      v25 = (*v24)--;
    if ( v25 == 1 )
      (*(void (**)(void))(*(_DWORD *)v23 + 12))();
  result = v34;
    v27 = (unsigned int *)(v34 + 8);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 == 1 )
      result = (*(int (**)(void))(*(_DWORD *)result + 12))();
  return result;
}


void __fastcall Social::Events::Event::addMeasurement<float>(int a1, int *a2, int a3, int a4)
{
  int v4; // r6@1
  int v6; // r7@1
  int *v7; // r4@1
  int *v8; // r0@1
  Json::Value *v13; // r5@1
  int v15; // r1@1
  void *v16; // r0@1
  unsigned int *v17; // r2@3
  signed int v18; // r1@5
  int v19; // [sp+0h] [bp-40h]@1
  int v20; // [sp+8h] [bp-38h]@1
  signed int v21; // [sp+20h] [bp-20h]@1
  int v22; // [sp+24h] [bp-1Ch]@1

  v4 = a1;
  _R5 = a4;
  v6 = a3;
  v7 = a2;
  v8 = sub_21E8AF4(&v20, a2);
  __asm { VLDR            S0, [R5] }
  v13 = (Json::Value *)(v8 + 2);
  __asm
  {
    VCVT.F64.F32    D0, S0
    VMOV            R2, R3, D0
  }
  Json::Value::Value((Json::Value *)(v8 + 2), v15, _R2);
  v21 = 1;
  v22 = v6;
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Measurement>,std::allocator<std::pair<std::string const,Social::Events::Measurement>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Measurement&>(
    (int)&v19,
    (unsigned __int64 *)(v4 + 44),
    v7,
    (int)&v20);
  Json::Value::~Value(v13);
  v16 = (void *)(v20 - 12);
  if ( (int *)(v20 - 12) != &dword_28898C0 )
    v17 = (unsigned int *)(v20 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v18 = __ldrex(v17);
      while ( __strex(v18 - 1, v17) );
    }
    else
      v18 = (*v17)--;
    if ( v18 <= 0 )
      j_j_j_j__ZdlPv_9(v16);
}


Json::Value *__fastcall Social::Events::HttpTelemetry::recordEvent(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  Social::UserManager *v4; // r6@1
  int v5; // r0@2
  Json::Value *result; // r0@2

  v2 = a1;
  v3 = a2;
  v4 = *(Social::UserManager **)(a1 + 96);
  if ( !v4
    || (v5 = j_Social::Events::Event::getUserId(a2),
        (result = (Json::Value *)j_Social::UserManager::isUserSignedIn(v4, v5)) == 0) )
  {
    result = j_j_j__ZN6Social6Events24AggregationEventListener11recordEventERKNS0_5EventE(v2, v3);
  }
  return result;
}


signed int __fastcall Social::MultiplayerServiceManager::isBlockedPlayer(_QWORD *a1)
{
  int *v1; // r5@1 OVERLAPPED
  int *v2; // r6@1 OVERLAPPED
  int v3; // t1@2
  signed int result; // r0@4

  *(_QWORD *)&v1 = *a1;
  if ( v1 == v2 )
  {
    result = 0;
  }
  else
    while ( 1 )
    {
      v3 = *v1;
      ++v1;
      if ( (*(int (**)(void))(*(_DWORD *)v3 + 92))() == 1 )
        break;
      if ( v2 == v1 )
        return 0;
    }
    result = 1;
  return result;
}


int __fastcall Social::XboxLiveUserManager::onAppSuspended(int result)
{
  *(_BYTE *)(result + 256) = 0;
  return result;
}


int __fastcall Social::UserManager::saveUserEventInformation(int result)
{
  __int64 i; // r4@1
  Social::User *v2; // t1@2
  Social::XboxLiveUserManager *v3; // r0@2

  for ( i = *(_QWORD *)(result + 8);
        HIDWORD(i) != (_DWORD)i;
        result = Social::XboxLiveUserManager::saveUserEventInformation(v3) )
  {
    v2 = *(Social::User **)i;
    LODWORD(i) = i + 8;
    v3 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v2);
  }
  return result;
}


unsigned int *__fastcall Social::UserManager::getUserFromUserId(Social::UserManager *this, unsigned int a2, int a3)
{
  __int64 v3; // r6@1
  int v4; // r5@1
  Social::UserManager *v5; // r4@1
  unsigned int *result; // r0@4
  unsigned int v7; // r1@9

  v3 = *(_QWORD *)(a2 + 8);
  v4 = a3;
  v5 = this;
  if ( (_DWORD)v3 == HIDWORD(v3) )
  {
LABEL_4:
    result = 0;
    *(_DWORD *)v5 = 0;
    *((_DWORD *)v5 + 1) = 0;
  }
  else
    while ( Social::User::getLocalUserId(*(Social::User **)v3) != v4 )
    {
      LODWORD(v3) = v3 + 8;
      if ( HIDWORD(v3) == (_DWORD)v3 )
        goto LABEL_4;
    }
    *(_DWORD *)v5 = *(_DWORD *)v3;
    result = *(unsigned int **)(v3 + 4);
    *((_DWORD *)v5 + 1) = result;
    if ( result )
      ++result;
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(result);
        while ( __strex(v7 + 1, result) );
      }
      else
        ++*result;
  return result;
}


Json::Value *__fastcall Social::Events::HttpTelemetry::sendEvent(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  void *v4; // r0@2
  Json::Value *result; // r0@4
  pthread_t v6; // r6@5
  int v7; // r0@5
  int v8; // r4@6
  _DWORD *v9; // r0@6
  char *v10; // r0@10
  unsigned int *v11; // r2@11
  signed int v12; // r1@13
  void *v13; // r0@16
  void *v14; // r0@17
  unsigned int *v15; // r2@20
  signed int v16; // r1@22
  unsigned int *v17; // r2@24
  signed int v18; // r1@26
  char v19; // [sp+4h] [bp-84h]@6
  void (*v20)(void); // [sp+Ch] [bp-7Ch]@6
  int v21; // [sp+14h] [bp-74h]@6
  char *v22; // [sp+18h] [bp-70h]@6
  _DWORD *v23; // [sp+1Ch] [bp-6Ch]@6
  void (*v24)(void); // [sp+24h] [bp-64h]@6
  signed int (__fastcall *v25)(int **); // [sp+28h] [bp-60h]@6
  int v26; // [sp+2Ch] [bp-5Ch]@5
  int v27; // [sp+30h] [bp-58h]@5
  void **v28; // [sp+34h] [bp-54h]@5
  int v29; // [sp+38h] [bp-50h]@17
  char v30; // [sp+40h] [bp-48h]@5
  char v31; // [sp+50h] [bp-38h]@5
  char v32; // [sp+60h] [bp-28h]@5

  v2 = a1;
  v3 = a2;
  if ( *(_DWORD *)j_ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v4 = j_ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
  else
    v4 = &ServiceLocator<AppPlatform>::mDefaultService;
  result = (Json::Value *)(*(int (**)(void))(**(_DWORD **)v4 + 408))();
  if ( result == (Json::Value *)1 )
  {
    j_Social::Events::Event::propertiesAsJsonValue((Json::Value *)&v31, v3);
    j_Social::Events::Event::measurementsAsJsonValue((Json::Value *)&v30, v3);
    j_Social::Events::HttpTelemetry::getMaelstromMessageBody(
      (Json::Value *)&v32,
      v2,
      (const char **)(v3 + 4),
      (const Json::Value *)&v31,
      (Json::Value *)&v30);
    j_Json::Value::~Value((Json::Value *)&v30);
    j_Json::Value::~Value((Json::Value *)&v31);
    j_Json::FastWriter::FastWriter((Json::FastWriter *)&v28);
    v26 = v2;
    j_Json::FastWriter::write((Json::FastWriter *)&v27, (const Json::Value *)&v28, (const Json::Value *)&v32);
    v6 = j_pthread_self();
    v7 = j_TaskGroup::getOwnerThreadID(*(TaskGroup **)(v2 + 4408));
    if ( j_pthread_equal(v6, v7) )
    {
      v8 = *(_DWORD *)(v2 + 4408);
      v21 = v26;
      sub_21E8AF4((int *)&v22, &v27);
      v24 = 0;
      v9 = j_operator new(8u);
      *v9 = v21;
      v9[1] = v22;
      v22 = (char *)&unk_28898CC;
      v23 = v9;
      v24 = (void (*)(void))sub_19A1140;
      v25 = sub_19A1130;
      v20 = 0;
      j_TaskGroup::queue(v8, (int)&v23, (int)&v19, 1u, 0xFFFFFFFF);
      if ( v20 )
        v20();
      if ( v24 )
        v24();
      v10 = v22 - 12;
      if ( (int *)(v22 - 12) != &dword_28898C0 )
      {
        v11 = (unsigned int *)(v22 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v12 = __ldrex(v11);
          while ( __strex(v12 - 1, v11) );
        }
        else
          v12 = (*v11)--;
        if ( v12 <= 0 )
          j_j_j_j__ZdlPv_9(v10);
      }
    }
    else
      j_Social::Events::HttpTelemetry::sendEvent(v26, &v27);
    v13 = (void *)(v27 - 12);
    if ( (int *)(v27 - 12) != &dword_28898C0 )
      v15 = (unsigned int *)(v27 - 4);
      if ( &pthread_create )
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
      else
        v16 = (*v15)--;
      if ( v16 <= 0 )
        j_j_j_j__ZdlPv_9(v13);
    v28 = &off_2725B14;
    v14 = (void *)(v29 - 12);
    if ( (int *)(v29 - 12) != &dword_28898C0 )
      v17 = (unsigned int *)(v29 - 4);
          v18 = __ldrex(v17);
        while ( __strex(v18 - 1, v17) );
        v18 = (*v17)--;
      if ( v18 <= 0 )
        j_j_j_j__ZdlPv_9(v14);
    j_Json::Writer::~Writer((Json::Writer *)&v28);
    result = j_Json::Value::~Value((Json::Value *)&v32);
  }
  return result;
}


signed int __fastcall Social::XboxLiveUserManager::isTitleIdMinecraftAnyPlatform(Social::XboxLiveUserManager *this, unsigned int a2)
{
  Social::XboxLiveUserManager *v2; // r7@1
  _DWORD *v3; // r0@1
  int v4; // r2@1
  signed int v5; // r4@2
  int v6; // r2@5

  v2 = this;
  v3 = operator new(0x1Cu);
  *v3 = 1651113805;
  v3[1] = 1944307183;
  v3[2] = 1739947436;
  v4 = (int)(v3 + 3);
  *(_DWORD *)v4 = 1909043648;
  *(_DWORD *)(v4 + 4) = 1810924247;
  *(_DWORD *)(v4 + 8) = 1916611344;
  *(_DWORD *)(v4 + 12) = 896928775;
  if ( (Social::XboxLiveUserManager *)*v3 == v2 )
  {
    v5 = 1;
    if ( v3 )
      operator delete(v3);
  }
  else
    v6 = (int)(v3 + 1);
    if ( (Social::XboxLiveUserManager *)v3[1] != v2 )
    {
      v6 = (int)(v3 + 2);
      if ( (Social::XboxLiveUserManager *)v3[2] != v2 )
      {
        v6 = (int)(v3 + 3);
        if ( (Social::XboxLiveUserManager *)v3[3] != v2 )
        {
          v6 = (int)(v3 + 4);
          if ( (Social::XboxLiveUserManager *)v3[4] != v2 )
          {
            v6 = (int)(v3 + 5);
            if ( (Social::XboxLiveUserManager *)v3[5] != v2 )
            {
              v6 = (int)(v3 + 6);
              if ( (Social::XboxLiveUserManager *)v3[6] != v2 )
                v6 = (int)(v3 + 7);
            }
          }
        }
      }
    }
    v5 = 0;
    if ( (_DWORD *)v6 != v3 + 7 )
      v5 = 1;
    operator delete(v3);
  return v5;
}


void __fastcall Social::XboxLiveUserManager::setLocale(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager::setLocale(this);
}


int __fastcall Social::Events::EventManager::EventManager(__int64 this)
{
  int v1; // r4@1
  double v2; // r0@1
  int v3; // r7@3
  void *v4; // r6@3
  double v5; // r0@4
  int v6; // r5@6
  void *v7; // r7@6
  double v8; // r0@7
  int v9; // r5@9
  void *v10; // r7@9
  unsigned int v11; // r0@10
  int v12; // r5@12
  void *v13; // r7@12

  v1 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 20) = 0;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 1065353216;
  *(_DWORD *)(this + 32) = 0;
  LODWORD(this) = this + 28;
  v2 = COERCE_DOUBLE(__PAIR__(10, sub_21E6254(*(double *)&this)));
  *(_DWORD *)(v1 + 16) = LODWORD(v2);
  if ( LODWORD(v2) == 1 )
  {
    *(_DWORD *)(v1 + 36) = 0;
    v4 = (void *)(v1 + 36);
  }
  else
    if ( LODWORD(v2) >= 0x40000000 )
      sub_21E57F4();
    v3 = 4 * LODWORD(v2);
    v4 = j_operator new(4 * LODWORD(v2));
    j___aeabi_memclr4_0((int)v4, v3);
  *(_DWORD *)(v1 + 12) = v4;
  *(_DWORD *)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 52) = 0;
  *(_DWORD *)(v1 + 56) = 1065353216;
  *(_DWORD *)(v1 + 60) = 0;
  LODWORD(v2) = v1 + 56;
  v5 = COERCE_DOUBLE(__PAIR__(10, sub_21E6254(v2)));
  *(_DWORD *)(v1 + 44) = LODWORD(v5);
  if ( LODWORD(v5) == 1 )
    *(_DWORD *)(v1 + 64) = 0;
    v7 = (void *)(v1 + 64);
    if ( LODWORD(v5) >= 0x40000000 )
    v6 = 4 * LODWORD(v5);
    v7 = j_operator new(4 * LODWORD(v5));
    j___aeabi_memclr4_0((int)v7, v6);
  *(_DWORD *)(v1 + 40) = v7;
  *(_DWORD *)(v1 + 76) = 0;
  *(_DWORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 84) = 1065353216;
  LODWORD(v5) = v1 + 84;
  *(_DWORD *)(LODWORD(v5) + 4) = 0;
  v8 = COERCE_DOUBLE(__PAIR__(10, sub_21E6254(v5)));
  *(_DWORD *)(v1 + 72) = LODWORD(v8);
  if ( LODWORD(v8) == 1 )
    *(_DWORD *)(v1 + 92) = 0;
    v10 = (void *)(v1 + 92);
    if ( LODWORD(v8) >= 0x40000000 )
    v9 = 4 * LODWORD(v8);
    v10 = j_operator new(4 * LODWORD(v8));
    j___aeabi_memclr4_0((int)v10, v9);
  *(_DWORD *)(v1 + 68) = v10;
  *(_DWORD *)(v1 + 104) = 0;
  *(_DWORD *)(v1 + 108) = 0;
  *(_DWORD *)(v1 + 112) = 1065353216;
  LODWORD(v8) = v1 + 112;
  *(_DWORD *)(LODWORD(v8) + 4) = 0;
  v11 = sub_21E6254(v8);
  *(_DWORD *)(v1 + 100) = v11;
  if ( v11 == 1 )
    *(_DWORD *)(v1 + 120) = 0;
    v13 = (void *)(v1 + 120);
    if ( v11 >= 0x40000000 )
    v12 = 4 * v11;
    v13 = j_operator new(4 * v11);
    j___aeabi_memclr4_0((int)v13, v12);
  *(_DWORD *)(v1 + 96) = v13;
  *(_DWORD *)(v1 + 124) = 0;
  j_Social::Events::EventManager::setupCommonProperties((Social::Events::EventManager *)v1);
  return v1;
}


int __fastcall Social::UserManager::needToShowPlatformStoreConnectConfirmationScreen(Social::UserManager *this)
{
  return 0;
}


int __fastcall Social::MultiplayerServiceManager::MultiplayerServiceManager(int result, Social::UserManager *a2)
{
  *(_BYTE *)(result + 24) = 0;
  *(_DWORD *)(result + 16) = 0;
  *(_DWORD *)(result + 20) = 0;
  *(_DWORD *)(result + 8) = 0;
  *(_DWORD *)(result + 12) = 0;
  *(_DWORD *)result = 0;
  *(_DWORD *)(result + 4) = 0;
  *(_DWORD *)(result + 28) = 0;
  *(_QWORD *)(result + 32) = (unsigned int)a2;
  *(_DWORD *)(result + 44) = 0;
  *(_DWORD *)(result + 48) = 0;
  *(_DWORD *)(result + 52) = 0;
  return result;
}


Social::MultiplayerServiceManager *__fastcall Social::MultiplayerServiceManager::~MultiplayerServiceManager(Social::MultiplayerServiceManager *this)
{
  Social::MultiplayerServiceManager *v1; // r4@1
  char *v2; // r5@1 OVERLAPPED
  char *v3; // r6@1 OVERLAPPED
  Social::MultiplayerGameInfo *v4; // r0@6
  Social::MultiplayerGameInfo *v5; // r5@6
  char *v6; // r5@11 OVERLAPPED
  char *v7; // r6@11 OVERLAPPED

  v1 = this;
  *(_QWORD *)&v2 = *(_QWORD *)((char *)this + 44);
  if ( v2 != v3 )
  {
    do
    {
      *(_DWORD *)(*(_DWORD *)v2 + 4) = 0;
      (*(void (**)(void))(**(_DWORD **)v2 + 8))();
      v2 += 4;
    }
    while ( v3 != v2 );
    v2 = (char *)*((_DWORD *)v1 + 11);
  }
  if ( v2 )
    operator delete(v2);
  v5 = (Social::MultiplayerGameInfo *)(*(_QWORD *)((char *)v1 + 12) >> 32);
  v4 = (Social::MultiplayerGameInfo *)*(_QWORD *)((char *)v1 + 12);
  if ( v4 != v5 )
      v4 = (Social::MultiplayerGameInfo *)((char *)Social::MultiplayerGameInfo::~MultiplayerGameInfo(v4) + 88);
    while ( v5 != v4 );
    v4 = (Social::MultiplayerGameInfo *)*((_DWORD *)v1 + 3);
  if ( v4 )
    operator delete((void *)v4);
  *(_QWORD *)&v6 = *(_QWORD *)v1;
  if ( v6 != v7 )
      if ( *(_DWORD *)v6 )
        (*(void (**)(void))(**(_DWORD **)v6 + 4))();
      *(_DWORD *)v6 = 0;
      v6 += 4;
    while ( v7 != v6 );
    v6 = *(char **)v1;
  if ( v6 )
    operator delete(v6);
  return v1;
}


int __fastcall Social::MultiplayerServiceManager::setAllServicesActive(int result, bool a2)
{
  Social::MultiplayerService **v2; // r5@1 OVERLAPPED
  Social::MultiplayerService **v3; // r6@1 OVERLAPPED
  bool i; // r4@1
  Social::MultiplayerService *v5; // t1@2

  *(_QWORD *)&v2 = *(_QWORD *)result;
  for ( i = a2; v3 != v2; result = Social::MultiplayerService::setActive(v5, i) )
  {
    v5 = *v2;
    ++v2;
  }
  return result;
}


char *__fastcall Social::XboxLiveUserManager::_loadVisitedBiomes(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  char *v2; // r9@1
  void *v3; // r0@2
  _DWORD *v4; // r0@4
  __int64 v5; // r6@4
  const void **v6; // r0@4
  const void **v7; // r0@4
  char *v8; // r5@4
  _DWORD *v9; // r4@4
  int *v10; // r4@4
  int v11; // t1@4
  char *v12; // r0@5
  void *v13; // r0@6
  int v14; // r7@7
  int v15; // r1@7
  unsigned __int64 v16; // r2@7
  unsigned __int64 v17; // r2@7
  char *result; // r0@7
  unsigned int *v19; // r1@9
  signed int v20; // r0@11
  unsigned int *v21; // r2@13
  signed int v22; // r1@15
  unsigned int *v23; // r2@17
  signed int v24; // r1@19
  int v25; // [sp+10h] [bp-1518h]@4
  char *v26; // [sp+14h] [bp-1514h]@4
  __int64 v27; // [sp+18h] [bp-1510h]@4
  char *v28; // [sp+20h] [bp-1508h]@4
  int v29; // [sp+24h] [bp-1504h]@4
  int v30[3]; // [sp+28h] [bp-1500h]@7
  void **v31; // [sp+38h] [bp-14F0h]@7
  int v32; // [sp+3Ch] [bp-14ECh]@7
  void **v33; // [sp+40h] [bp-14E8h]@7
  int v34; // [sp+44h] [bp-14E4h]@7
  void **v35; // [sp+1074h] [bp-4B4h]@7
  int v36; // [sp+10E4h] [bp-444h]@7
  __int16 v37; // [sp+10E8h] [bp-440h]@7
  unsigned int v38; // [sp+10ECh] [bp-43Ch]@7
  int v39; // [sp+10F0h] [bp-438h]@7
  int v40; // [sp+10F4h] [bp-434h]@7
  int v41; // [sp+10F8h] [bp-430h]@7
  int v42; // [sp+10FCh] [bp-42Ch]@4
  int v43; // [sp+1100h] [bp-428h]@7
  int v44; // [sp+1500h] [bp-28h]@7
  RakNet *v45; // [sp+1504h] [bp-24h]@1

  v1 = this;
  v45 = _stack_chk_guard;
  v2 = (char *)this + 32;
  *((_DWORD *)v1 + 9) = *((_DWORD *)v1 + 8);
  if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v3 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
  else
    v3 = &ServiceLocator<AppPlatform>::mDefaultService;
  v4 = (_DWORD *)(*(int (**)(void))(**(_DWORD **)v3 + 284))();
  LODWORD(v5) = *v4;
  HIDWORD(v5) = *(_DWORD *)(*v4 - 12);
  Social::XboxLiveUserManager::getCurrentXUID((Social::XboxLiveUserManager *)&v25, (int)v1);
  v6 = sub_119C984((const void **)&v25, 0, (unsigned int)"ClientCorrelation", (_BYTE *)0x11);
  v26 = (char *)*v6;
  *v6 = &unk_28898CC;
  v7 = sub_119C894((const void **)&v26, ".dat", 4u);
  v8 = (char *)*v7;
  v9 = *v7;
  *v7 = &unk_28898CC;
  v11 = *(v9 - 3);
  v10 = v9 - 3;
  v27 = v5;
  v28 = v8;
  v29 = v11;
  Core::PathBuffer<Core::StackString<char,1024u>>::_join<Core::PathPart>((unsigned int *)&v42, (int)&v27, 2);
  if ( v10 != &dword_28898C0 )
  {
    v19 = (unsigned int *)(v8 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v20 = __ldrex(v19);
      while ( __strex(v20 - 1, v19) );
    }
    else
      v20 = (*v19)--;
    if ( v20 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v10);
  }
  v12 = v26 - 12;
  if ( (int *)(v26 - 12) != &dword_28898C0 )
    v21 = (unsigned int *)(v26 - 4);
        v22 = __ldrex(v21);
      while ( __strex(v22 - 1, v21) );
      v22 = (*v21)--;
    if ( v22 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v12);
  v13 = (void *)(v25 - 12);
  if ( (int *)(v25 - 12) != &dword_28898C0 )
    v23 = (unsigned int *)(v25 - 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v13);
  v14 = v44;
  sub_119D70C((int)&v35);
  v35 = &off_26D3AF0;
  v36 = 0;
  v37 = 0;
  v41 = 0;
  v40 = 0;
  v39 = 0;
  v38 = 0;
  v30[0] = (int)&v43;
  v30[1] = v14;
  Core::FileStream::FileStream((int)&v31, (int)off_26D7EA4, (__int64 *)v30, 12);
  v31 = &off_26D7E64;
  v35 = &off_26D7E8C;
  v33 = &off_26D7E78;
  std::__copy_move<false,false,std::input_iterator_tag>::__copy_m<std::istreambuf_iterator<char,std::char_traits<char>>,std::back_insert_iterator<std::vector<int,std::allocator<int>>>>(
    v38,
    -1,
    0,
    (int)v2);
  Core::FileStdStreamBuf::close((Core::FileStdStreamBuf *)&v34, v15, v16);
  v31 = &off_26D7EEC;
  v35 = &off_26D7F14;
  v33 = &off_26D7F00;
  Core::FileStdStreamBuf::~FileStdStreamBuf((Core::FileStdStreamBuf *)&v34, (int)&off_26D7F14, v17);
  v31 = &off_26D7F6C;
  v35 = &off_26D7F80;
  v32 = 0;
  sub_119C964(&v35);
  result = (char *)(_stack_chk_guard - v45);
  if ( _stack_chk_guard != v45 )
    _stack_chk_fail(result);
  return result;
}


signed int __fastcall Social::MultiplayerXBL::_isInLobby(Social::MultiplayerXBL *this)
{
  int v1; // r4@1
  unsigned int *v2; // r1@2
  unsigned int v3; // r0@4
  unsigned int *v4; // r5@8
  unsigned int v5; // r0@10
  char *v6; // r0@16
  signed int v7; // r4@16
  int v8; // r5@20
  unsigned int *v9; // r1@21
  unsigned int v10; // r0@23
  unsigned int *v11; // r6@27
  unsigned int v12; // r0@29
  int v14; // [sp+0h] [bp-20h]@1
  int v15; // [sp+4h] [bp-1Ch]@1
  xbox::services::multiplayer::manager::multiplayer_lobby_session *v16; // [sp+8h] [bp-18h]@1
  int v17; // [sp+Ch] [bp-14h]@20

  xbox::services::multiplayer::manager::multiplayer_manager::get_singleton_instance((xbox::services::multiplayer::manager::multiplayer_manager *)&v14);
  xbox::services::multiplayer::manager::multiplayer_manager::lobby_session(
    (xbox::services::multiplayer::manager::multiplayer_manager *)&v16,
    v14);
  v1 = v15;
  if ( v15 )
  {
    v2 = (unsigned int *)(v15 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v3 = __ldrex(v2);
      while ( __strex(v3 - 1, v2) );
    }
    else
      v3 = (*v2)--;
    if ( v3 == 1 )
      v4 = (unsigned int *)(v1 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v1 + 8))(v1);
      if ( &pthread_create )
      {
        __dmb();
        do
          v5 = __ldrex(v4);
        while ( __strex(v5 - 1, v4) );
      }
      else
        v5 = (*v4)--;
      if ( v5 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v1 + 12))(v1);
  }
  if ( v16 )
    v6 = xbox::services::multiplayer::manager::multiplayer_lobby_session::local_members(v16);
    v7 = 0;
    if ( *(_QWORD *)v6 >> 32 != (unsigned int)*(_QWORD *)v6 )
      v7 = 1;
  else
  v8 = v17;
  if ( v17 )
    v9 = (unsigned int *)(v17 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  return v7;
}


int __fastcall Social::MultiplayerXBL::_processExecutionQueue(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  unsigned __int8 *v2; // r7@1
  unsigned int v3; // r0@2
  int v4; // r0@4
  __int64 v5; // r1@5
  int (*v6)(void); // r5@5
  void (__fastcall *v7)(_DWORD); // r0@5
  int (*v8)(void); // r3@5
  int v9; // r0@7
  void (*v10)(void); // r3@7
  int v11; // r0@10
  int v12; // r0@13
  int result; // r0@17
  __int64 v14; // [sp+0h] [bp-48h]@5
  int (*v15)(void); // [sp+8h] [bp-40h]@1
  void (__fastcall *v16)(_DWORD); // [sp+Ch] [bp-3Ch]@5
  __int64 v17; // [sp+10h] [bp-38h]@5
  int (*v18)(void); // [sp+18h] [bp-30h]@5
  void (__fastcall *v19)(_DWORD); // [sp+1Ch] [bp-2Ch]@5

  v1 = this;
  v2 = (unsigned __int8 *)this + 356;
  v15 = 0;
  while ( 1 )
  {
    do
    {
      do
        v3 = __ldrex(v2);
      while ( __strex(1u, v2) );
      __dmb();
    }
    while ( v3 );
    v4 = *((_DWORD *)v1 + 81);
    if ( *((_DWORD *)v1 + 85) == v4 )
      break;
    LODWORD(v5) = *(_DWORD *)v4;
    HIDWORD(v5) = *(_DWORD *)(v4 + 4);
    v6 = *(int (**)(void))(v4 + 8);
    *(_DWORD *)(v4 + 8) = 0;
    v7 = *(void (__fastcall **)(_DWORD))(v4 + 12);
    v17 = v14;
    v14 = v5;
    v8 = v15;
    v15 = v6;
    v18 = v8;
    v19 = v16;
    v16 = v7;
    if ( v8 )
      ((void (__fastcall *)(__int64 *, __int64 *, signed int))v8)(&v17, &v17, 3);
    v9 = *((_DWORD *)v1 + 81);
    v10 = *(void (**)(void))(v9 + 8);
    if ( v9 == *((_DWORD *)v1 + 83) - 16 )
      if ( v10 )
        v10();
      operator delete(*((void **)v1 + 82));
      v12 = *((_DWORD *)v1 + 84);
      *((_DWORD *)v1 + 84) = v12 + 4;
      v11 = *(_DWORD *)(v12 + 4);
      *((_DWORD *)v1 + 82) = v11;
      *((_DWORD *)v1 + 83) = v11 + 512;
    else
      {
        v9 = *((_DWORD *)v1 + 81);
      }
      v11 = v9 + 16;
    *((_DWORD *)v1 + 81) = v11;
    __dmb();
    *v2 = 0;
    if ( !v15 )
      sub_119C8E4();
    v16(&v14);
  }
  result = 0;
  __dmb();
  *v2 = 0;
  if ( v15 )
    result = v15();
  return result;
}


void __fastcall Social::MultiplayerXBL::_removePrimaryUserFromSession(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL::_removePrimaryUserFromSession(this);
}


int __fastcall Social::MultiplayerServiceManager::getIsWaitingForSession(Social::MultiplayerServiceManager *this)
{
  Social::MultiplayerService **v1; // r4@1
  Social::MultiplayerService **v2; // r5@1
  int v3; // r6@2
  int result; // r0@4

  v1 = (Social::MultiplayerService **)(*(_QWORD *)this >> 32);
  v2 = (Social::MultiplayerService **)*(_QWORD *)this;
  if ( v2 == v1 )
  {
LABEL_4:
    result = 0;
  }
  else
    while ( 1 )
    {
      v3 = (int)(v2 + 1);
      if ( Social::MultiplayerService::isActive(*v2) == 1 )
        break;
      ++v2;
      if ( v1 == (Social::MultiplayerService **)v3 )
        goto LABEL_4;
    }
    result = ((*(int (**)(void))(*(_DWORD *)*v2 + 140))() ^ 1) & 1;
  return result;
}


Social::GameConnectionInfo *__fastcall Social::MultiplayerGameInfo::findConnectionMatchingType(Social::GameConnectionInfo *a1, unsigned __int64 *a2, int a3)
{
  const Social::GameConnectionInfo *v3; // r1@1
  const Social::GameConnectionInfo *v4; // r12@1
  Social::GameConnectionInfo *result; // r0@5

  v4 = (const Social::GameConnectionInfo *)(*a2 >> 32);
  v3 = (const Social::GameConnectionInfo *)*a2;
  if ( v3 == v4 )
  {
LABEL_5:
    result = Social::GameConnectionInfo::GameConnectionInfo(a1);
  }
  else
    a3 = (unsigned __int16)a3;
    while ( *(_WORD *)v3 != a3 )
    {
      v3 = (const Social::GameConnectionInfo *)((char *)v3 + 60);
      if ( v4 == v3 )
        goto LABEL_5;
    }
    result = Social::GameConnectionInfo::GameConnectionInfo(a1, v3);
  return result;
}


Social::RealmsUriListener *__fastcall Social::RealmsUriListener::~RealmsUriListener(Social::RealmsUriListener *this)
{
  Social::RealmsUriListener *v1; // r4@1
  int v2; // r5@1
  unsigned int *v3; // r1@2
  unsigned int v4; // r0@4
  unsigned int *v5; // r6@8
  unsigned int v6; // r0@10

  v1 = this;
  *(_DWORD *)this = &off_26DEB7C;
  v2 = *((_DWORD *)this + 2);
  if ( v2 )
  {
    v3 = (unsigned int *)(v2 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v4 = __ldrex(v3);
      while ( __strex(v4 - 1, v3) );
    }
    else
      v4 = (*v3)--;
    if ( v4 == 1 )
      v5 = (unsigned int *)(v2 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
      if ( &pthread_create )
      {
        __dmb();
        do
          v6 = __ldrex(v5);
        while ( __strex(v6 - 1, v5) );
      }
      else
        v6 = (*v5)--;
      if ( v6 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  }
  return v1;
}


void *__fastcall Social::ImageService::GetDisplayPicture(void **a1, int a2, int *a3, unsigned int a4)
{
  int v4; // r4@1
  void **v5; // r9@1
  unsigned int v6; // r6@1
  int *v7; // r10@1
  int *v8; // r0@2
  void *v9; // r0@3
  __int64 v10; // kr00_8@6
  unsigned int v11; // r1@6
  const void **v12; // r0@8
  void *result; // r0@9
  int *v14; // r0@11
  char *v15; // r0@11
  void *v16; // r0@12
  void *v17; // r0@13
  char *v18; // r0@16
  int v19; // r3@16
  char *v20; // r0@16
  int v21; // r4@17
  unsigned int *v22; // r1@18
  unsigned int v23; // r0@20
  unsigned int *v24; // r5@24
  unsigned int v25; // r0@26
  unsigned int *v26; // r2@28
  signed int v27; // r1@30
  unsigned int *v28; // r2@32
  signed int v29; // r1@34
  unsigned int *v30; // r2@36
  signed int v31; // r1@38
  unsigned int *v32; // r2@40
  signed int v33; // r1@42
  unsigned int *v34; // r2@44
  signed int v35; // r1@46
  int v36; // r4@51
  unsigned int *v37; // r1@52
  unsigned int v38; // r0@54
  unsigned int *v39; // r5@58
  unsigned int v40; // r0@60
  int v41; // r4@65
  unsigned int *v42; // r1@66
  unsigned int v43; // r0@68
  unsigned int *v44; // r5@72
  unsigned int v45; // r0@74
  void **v46; // r7@79
  __int64 v47; // kr08_8@79
  void *v48; // r0@79
  unsigned int *v49; // r2@82
  signed int v50; // r1@84
  unsigned int *v51; // r2@110
  signed int v52; // r1@112
  void *v53; // [sp+0h] [bp-120h]@16
  xbox::services::xbox_live_context *v54; // [sp+4h] [bp-11Ch]@16
  int v55; // [sp+8h] [bp-118h]@16
  char v56; // [sp+Ch] [bp-114h]@16
  int v57; // [sp+10h] [bp-110h]@16
  char v58; // [sp+14h] [bp-10Ch]@16
  int v59; // [sp+18h] [bp-108h]@16
  int v60; // [sp+1Ch] [bp-104h]@14
  void *v61; // [sp+20h] [bp-100h]@14
  int v62; // [sp+24h] [bp-FCh]@6
  unsigned int v63; // [sp+28h] [bp-F8h]@6
  char *v64; // [sp+2Ch] [bp-F4h]@11
  int v65; // [sp+30h] [bp-F0h]@11
  void **v66; // [sp+34h] [bp-ECh]@4
  int v67; // [sp+38h] [bp-E8h]@80
  int v68; // [sp+3Ch] [bp-E4h]@4
  void **v69; // [sp+40h] [bp-E0h]@6
  int v70; // [sp+5Ch] [bp-C4h]@80
  int v71; // [sp+64h] [bp-BCh]@79
  int v72; // [sp+68h] [bp-B8h]@80
  int v73; // [sp+F0h] [bp-30h]@2
  int *v74; // [sp+F4h] [bp-2Ch]@2

  v4 = a2;
  v5 = a1;
  v6 = a4;
  v7 = a3;
  if ( *(_BYTE *)(a2 + 4) )
  {
    sub_21E8AF4(&v73, a3);
    utility::conversions::to_utf8string(&v74, &v73);
    sub_21B417C(v74, *(v74 - 3), -955291385);
    v8 = v74 - 3;
    if ( v74 - 3 != &dword_28898C0 )
    {
      v26 = (unsigned int *)(v74 - 1);
      if ( &pthread_create )
      {
        __dmb();
        do
          v27 = __ldrex(v26);
        while ( __strex(v27 - 1, v26) );
      }
      else
        v27 = (*v26)--;
      if ( v27 <= 0 )
        j_j_j_j__ZdlPv_9(v8);
    }
    v9 = (void *)(v73 - 12);
    if ( (int *)(v73 - 12) != &dword_28898C0 )
      v28 = (unsigned int *)(v73 - 4);
          v29 = __ldrex(v28);
        while ( __strex(v29 - 1, v28) );
        v29 = (*v28)--;
      if ( v29 <= 0 )
        j_j_j_j__ZdlPv_9(v9);
    sub_21D103C((int)&v66, 24);
    *(int *)((char *)&v68 + *(_DWORD *)(v68 - 12) + 12) = *(int *)((char *)&v68 + *(_DWORD *)(v68 - 12) + 12) & 0xFFFFFFB5 | 8;
    sub_21CC440((char *)&v68);
    if ( v6 >= 4 )
      v6 = 1;
    sub_21E8AF4((int *)&v63, (int *)(v4 + 8));
    sub_21E7408((const void **)&v63, "/", 1u);
    sub_21CFED8(&v62, (int)&v69);
    v10 = *(_QWORD *)(v63 - 12);
    v11 = *(_DWORD *)(v62 - 12) + v10;
    if ( v11 > HIDWORD(v10) && v11 <= *(_DWORD *)(v62 - 8) )
      v12 = sub_21E82D8((const void **)&v62, 0, v63, (_BYTE *)v10);
    else
      v12 = sub_21E72F0((const void **)&v63, (const void **)&v62);
    v64 = (char *)*v12;
    *v12 = &unk_28898CC;
    v14 = (int *)sub_21E7408((const void **)&v64, ".png", 4u);
    v65 = *v14;
    *v14 = (int)&unk_28898CC;
    v15 = v64 - 12;
    if ( (int *)(v64 - 12) != &dword_28898C0 )
      v30 = (unsigned int *)(v64 - 4);
          v31 = __ldrex(v30);
        while ( __strex(v31 - 1, v30) );
        v31 = (*v30)--;
      if ( v31 <= 0 )
        j_j_j_j__ZdlPv_9(v15);
    v16 = (void *)(v62 - 12);
    if ( (int *)(v62 - 12) != &dword_28898C0 )
      v32 = (unsigned int *)(v62 - 4);
          v33 = __ldrex(v32);
        while ( __strex(v33 - 1, v32) );
        v33 = (*v32)--;
      if ( v33 <= 0 )
        j_j_j_j__ZdlPv_9(v16);
    v17 = (void *)(v63 - 12);
    if ( (int *)(v63 - 12) != &dword_28898C0 )
      v34 = (unsigned int *)(v63 - 4);
          v35 = __ldrex(v34);
        while ( __strex(v35 - 1, v34) );
        v35 = (*v34)--;
      if ( v35 <= 0 )
        j_j_j_j__ZdlPv_9(v17);
    v60 = v65;
    v61 = *(void **)(v65 - 12);
    if ( !Core::FileSystem::fileExists((__int64 *)&v60)
      && Social::XboxLiveUserManager::isSignedIn(*(Social::XboxLiveUserManager **)v4) == 1 )
      Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v54, *(_DWORD *)v4);
      v18 = xbox::services::xbox_live_context::profile_service(v54);
      xbox::services::social::profile_service::get_small_gamerpic((int)&v56, (int)v18, (const void **)v7, v6);
      sub_21E8AF4((int *)&v53, &v65);
      sub_1384978(
        (int)&v58,
        (int)&v56,
        (int)&v53,
        v19,
        v53,
        (int)v54,
        v55,
        *(int *)&v56,
        v57,
        *(int *)&v58,
        v59,
        v60,
        v61);
      v20 = (char *)v53 - 12;
      if ( (int *)((char *)v53 - 12) != &dword_28898C0 )
        v51 = (unsigned int *)((char *)v53 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v52 = __ldrex(v51);
          while ( __strex(v52 - 1, v51) );
        }
        else
          v52 = (*v51)--;
        if ( v52 <= 0 )
          j_j_j_j__ZdlPv_9(v20);
      v21 = v57;
      if ( v57 )
        v22 = (unsigned int *)(v57 + 4);
            v23 = __ldrex(v22);
          while ( __strex(v23 - 1, v22) );
          v23 = (*v22)--;
        if ( v23 == 1 )
          v24 = (unsigned int *)(v21 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          if ( &pthread_create )
          {
            __dmb();
            do
              v25 = __ldrex(v24);
            while ( __strex(v25 - 1, v24) );
          }
          else
            v25 = (*v24)--;
          if ( v25 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
      v36 = v55;
      if ( v55 )
        v37 = (unsigned int *)(v55 + 4);
            v38 = __ldrex(v37);
          while ( __strex(v38 - 1, v37) );
          v38 = (*v37)--;
        if ( v38 == 1 )
          v39 = (unsigned int *)(v36 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v36 + 8))(v36);
              v40 = __ldrex(v39);
            while ( __strex(v40 - 1, v39) );
            v40 = (*v39)--;
          if ( v40 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v36 + 12))(v36);
      v41 = v59;
      if ( v59 )
        v42 = (unsigned int *)(v59 + 4);
            v43 = __ldrex(v42);
          while ( __strex(v43 - 1, v42) );
          v43 = (*v42)--;
        if ( v43 == 1 )
          v44 = (unsigned int *)(v41 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v41 + 8))(v41);
              v45 = __ldrex(v44);
            while ( __strex(v45 - 1, v44) );
            v45 = (*v44)--;
          if ( v45 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v41 + 12))(v41);
    v46 = off_26D3F60;
    v47 = *(_QWORD *)off_26D3F80;
    *v5 = (void *)v65;
    v66 = v46;
    *(_DWORD *)((char *)*(v46 - 3) + (_DWORD)&v66) = v47;
    v68 = HIDWORD(v47);
    v69 = &off_27734E8;
    v48 = (void *)(v71 - 12);
    if ( (int *)(v71 - 12) != &dword_28898C0 )
      v49 = (unsigned int *)(v71 - 4);
          v50 = __ldrex(v49);
        while ( __strex(v50 - 1, v49) );
        v50 = (*v49)--;
      if ( v50 <= 0 )
        j_j_j_j__ZdlPv_9(v48);
    v69 = &off_26D40A8;
    sub_21C802C((unsigned int **)&v70);
    v66 = (void **)off_26D3F68;
    *(void ***)((char *)&v66 + *((_DWORD *)off_26D3F68 - 3)) = (void **)off_26D3F6C;
    v67 = 0;
    result = sub_21B6560(&v72);
  }
  else
    result = sub_21E94B4(a1, (const char *)&unk_257BC67);
  return result;
}


int __fastcall Social::XboxLivePermission::XboxLivePermission(int result, _DWORD *a2, char a3)
{
  *(_DWORD *)result = *a2;
  *(_BYTE *)(result + 4) = a3;
  return result;
}


void __fastcall Social::User_generic::~User_generic(Social::User_generic *this)
{
  Social::User_generic::~User_generic(this);
}


Json::Value *__fastcall Social::Events::AggregationEventListener::recordEvent(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  int v4; // r0@1
  Json::Value *result; // r0@1
  int *v6; // r1@2
  _DWORD *v7; // r0@2
  int v8; // r1@4
  int v9; // r0@7
  int v10; // r9@7
  Json::Value *v11; // r6@8
  Json::Value *v12; // r7@8
  int v13; // r0@14
  int v14; // r7@14
  __int64 v15; // r0@15
  char *v16; // r0@18
  int v17; // r7@18
  void *v18; // r5@18 OVERLAPPED
  int v19; // r6@18 OVERLAPPED
  int v20; // r0@19
  char *v21; // r0@22
  int v22; // r7@22
  int v23; // r6@22 OVERLAPPED
  int v24; // r0@23
  char v25; // [sp+4h] [bp-44h]@22
  char *v26; // [sp+Ch] [bp-3Ch]@22
  char *v27; // [sp+10h] [bp-38h]@22
  char *v28; // [sp+14h] [bp-34h]@22
  char v29; // [sp+18h] [bp-30h]@18
  char *v30; // [sp+20h] [bp-28h]@18
  char *v31; // [sp+24h] [bp-24h]@18
  char *v32; // [sp+28h] [bp-20h]@18

  v2 = a1;
  v3 = a2;
  v4 = (*(int (**)(void))(*(_DWORD *)a1 + 16))();
  result = (Json::Value *)j_Social::Events::Event::passesFilter(v3, v4);
  if ( result != (Json::Value *)1 )
    return result;
  v6 = (int *)(v2 + 68);
  v7 = (_DWORD *)(v2 + 80);
  if ( !*(_BYTE *)(v3 + 8) )
    v6 = (int *)(v2 + 64);
  v8 = *v6;
    v7 = (_DWORD *)(v2 + 76);
  *(_DWORD *)(v2 + 84) = *v7;
  *(_DWORD *)(v2 + 72) = v8;
  {
    v13 = j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
            (unsigned __int64 *)(v2 + 4),
            (int **)(v3 + 4));
    v14 = v13;
    if ( v13 )
    {
      v15 = *(_QWORD *)(v13 + 12);
      if ( (_DWORD)v15 == HIDWORD(v15) )
      {
        result = (Json::Value *)j_j_j__ZNSt6vectorIN6Social6Events5EventESaIS2_EE19_M_emplace_back_auxIJRKS2_EEEvDpOT__1(
                                  (unsigned __int64 *)(v14 + 8),
                                  v3);
      }
      else
        j_Social::Events::Event::Event(v15, v3);
        result = (Json::Value *)(*(_DWORD *)(v14 + 12) + 72);
        *(_DWORD *)(v14 + 12) = result;
      return result;
    }
    v21 = (char *)j_operator new(0x48u);
    v22 = (int)(v21 + 72);
    v26 = v21;
    v28 = v21 + 72;
    j_Social::Events::Event::Event((int)v21, v3);
    v27 = (char *)v22;
    j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string const&,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>(
      (int)&v25,
      v2 + 4,
      (int *)(v3 + 4),
      (int)&v26);
    *(_QWORD *)&v18 = *(_QWORD *)&v26;
    if ( v26 != v27 )
      v24 = (int)v26;
      do
        v24 = j_Social::Events::Event::~Event(v24) + 72;
      while ( v23 != v24 );
    goto LABEL_25;
  }
  v9 = j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(v2 + 32),
         (int **)(v3 + 4));
  v10 = v9;
  if ( !v9 )
    v16 = (char *)j_operator new(0x48u);
    v17 = (int)(v16 + 72);
    v30 = v16;
    v32 = v16 + 72;
    j_Social::Events::Event::Event((int)v16, v3);
    v31 = (char *)v17;
      (int)&v29,
      v2 + 32,
      (int)&v30);
    *(_QWORD *)&v18 = *(_QWORD *)&v30;
    if ( v30 != v31 )
      v20 = (int)v30;
        v20 = j_Social::Events::Event::~Event(v20) + 72;
      while ( v19 != v20 );
LABEL_25:
    if ( v18 )
      j_operator delete(v18);
    goto LABEL_30;
  v11 = *(Json::Value **)(v9 + 8);
  v12 = *(Json::Value **)(v9 + 12);
  if ( v11 == v12 )
LABEL_12:
    if ( v11 == *(Json::Value **)(v10 + 16) )
      j_std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>::_M_emplace_back_aux<Social::Events::Event const&>(
        (unsigned __int64 *)(v10 + 8),
        v3);
    else
      j_Social::Events::Event::Event((int)v11, v3);
      *(_DWORD *)(v10 + 12) += 72;
LABEL_30:
    result = (Json::Value *)(*(_DWORD *)(v2 + 60) + 1);
    *(_DWORD *)(v2 + 60) = result;
  while ( !j_Social::Events::Event::operator==(v3, (int)v11) )
    v11 = (Json::Value *)((char *)v11 + 72);
    if ( v12 == v11 )
      v11 = *(Json::Value **)(v10 + 12);
      goto LABEL_12;
  return j_j_j__ZN6Social6Events5Event18updateMeasurementsERKS1_(v11, v3);
}


void __fastcall Social::MultiplayerXBL::_handleSessionPropertyChanged(Social::MultiplayerXBL *this, const web::json::value *a2)
{
  Social::MultiplayerXBL *v2; // r4@1
  const web::json::value *v3; // r6@1
  int v4; // r1@3
  int v5; // r2@3
  int v6; // r3@3
  int v7; // r5@3
  int v8; // r6@3
  int v9; // r7@3
  int v10; // r0@4
  int v11; // r0@4
  int v12; // r6@4
  void **v13; // r0@5
  void *v14; // r0@5
  void *v15; // r0@6
  unsigned int *v16; // r2@8
  signed int v17; // r1@10
  unsigned int *v18; // r2@12
  signed int v19; // r1@14
  int v20; // [sp+8h] [bp-C0h]@5
  int v21; // [sp+10h] [bp-B8h]@5
  unsigned __int16 v22; // [sp+14h] [bp-B4h]@4
  int v23[23]; // [sp+50h] [bp-78h]@3

  v2 = this;
  v3 = a2;
  if ( !*((_BYTE *)this + 176) )
  {
    if ( (*(int (**)(void))(**(_DWORD **)a2 + 88))() )
    {
      Social::MultiplayerGameInfo::createFromSessionProperties((Social::MultiplayerGameInfo *)v23, v3);
      std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::operator=(
        (int)v2 + 88,
        (unsigned __int64 *)v23);
      EntityInteraction::setInteractText((int *)v2 + 25, &v23[3]);
      EntityInteraction::setInteractText((int *)v2 + 26, &v23[4]);
      EntityInteraction::setInteractText((int *)v2 + 27, &v23[5]);
      EntityInteraction::setInteractText((int *)v2 + 28, &v23[6]);
      EntityInteraction::setInteractText((int *)v2 + 29, &v23[7]);
      EntityInteraction::setInteractText((int *)v2 + 30, &v23[8]);
      EntityInteraction::setInteractText((int *)v2 + 31, &v23[9]);
      EntityInteraction::setInteractText((int *)v2 + 32, &v23[10]);
      *((_QWORD *)v2 + 17) = *(_QWORD *)&v23[12];
      EntityInteraction::setInteractText((int *)v2 + 36, &v23[14]);
      EntityInteraction::setInteractText((int *)v2 + 37, &v23[15]);
      v4 = (int)v2 + 152;
      v5 = v23[17];
      v6 = v23[18];
      v7 = v23[19];
      v8 = v23[20];
      v9 = v23[21];
      *(_DWORD *)v4 = v23[16];
      *(_DWORD *)(v4 + 4) = v5;
      *(_DWORD *)(v4 + 8) = v6;
      *(_DWORD *)(v4 + 12) = v7;
      *(_DWORD *)(v4 + 16) = v8;
      *(_DWORD *)(v4 + 20) = v9;
      Social::MultiplayerGameInfo::~MultiplayerGameInfo((Social::MultiplayerGameInfo *)v23);
    }
    v10 = NetworkHandler::getConnector(*((NetworkHandler **)v2 + 17));
    v11 = (*(int (**)(void))(*(_DWORD *)v10 + 60))();
    Social::MultiplayerGameInfo::getOptimumConnection((Social::MultiplayerGameInfo *)&v22, (int)v2 + 88, v11);
    v12 = v22;
    Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v22);
    if ( v12 == 4 )
      sub_119C884((void **)&v21, "UPNP");
      v13 = sub_119C884((void **)&v20, (const char *)&unk_257BC67);
      Social::MultiplayerService::_changeMultiplayerState((int)v2, 9, (const char **)&v21, 0, (const char **)v13);
      v14 = (void *)(v20 - 12);
      if ( (int *)(v20 - 12) != &dword_28898C0 )
      {
        v16 = (unsigned int *)(v20 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v17 = __ldrex(v16);
          while ( __strex(v17 - 1, v16) );
        }
        else
          v17 = (*v16)--;
        if ( v17 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v14);
      }
      v15 = (void *)(v21 - 12);
      if ( (int *)(v21 - 12) != &dword_28898C0 )
        v18 = (unsigned int *)(v21 - 4);
            v19 = __ldrex(v18);
          while ( __strex(v19 - 1, v18) );
          v19 = (*v18)--;
        if ( v19 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v15);
  }
}


RakNet *__fastcall Social::User::_create(int a1, int a2, int a3, MinecraftEventing *a4, int a5, int a6)
{
  int v6; // r9@1
  int v7; // r6@1
  int v8; // r11@1
  MinecraftEventing *v9; // r8@1
  void *v10; // r0@2
  const char **v11; // r0@4
  const char *v12; // r1@4
  int v13; // r7@4
  unsigned int v14; // r4@4
  void **v15; // r0@10
  void *v16; // r0@10
  __int64 v17; // r0@11
  int v18; // r6@11
  void *v19; // r0@11
  void *v20; // r0@12
  int v21; // r4@13
  int v22; // r0@13
  unsigned int *v23; // r1@14
  unsigned int v24; // r0@16
  unsigned int *v25; // r5@20
  unsigned int v26; // r0@22
  RakNet *result; // r0@27
  unsigned int *v28; // r2@29
  signed int v29; // r1@31
  unsigned int *v30; // r2@33
  signed int v31; // r1@35
  unsigned int *v32; // r2@41
  signed int v33; // r1@43
  int v34; // [sp+10h] [bp-930h]@13
  int v35; // [sp+14h] [bp-92Ch]@13
  int v36; // [sp+18h] [bp-928h]@12
  char v37; // [sp+1Ch] [bp-924h]@12
  int v38; // [sp+20h] [bp-920h]@13
  int v39; // [sp+24h] [bp-91Ch]@10
  int v40; // [sp+28h] [bp-918h]@1
  int v41; // [sp+2Ch] [bp-914h]@1
  int v42; // [sp+30h] [bp-910h]@1
  void **v43; // [sp+34h] [bp-90Ch]@10
  int v44; // [sp+38h] [bp-908h]@11
  void **v45; // [sp+3Ch] [bp-904h]@10
  void **v46; // [sp+40h] [bp-900h]@10
  int v47; // [sp+5Ch] [bp-8E4h]@11
  int v48; // [sp+64h] [bp-8DCh]@10
  int v49; // [sp+68h] [bp-8D8h]@11
  char *v50; // [sp+F0h] [bp-850h]@11
  int v51; // [sp+F4h] [bp-84Ch]@11
  __int64 v52; // [sp+F8h] [bp-848h]@11
  char v53; // [sp+100h] [bp-840h]@13
  char v54; // [sp+108h] [bp-838h]@11
  char v55; // [sp+10Ch] [bp-834h]@11
  int v56; // [sp+50Ch] [bp-434h]@11
  int v57; // [sp+510h] [bp-430h]@4
  char v58; // [sp+514h] [bp-42Ch]@4
  int v59; // [sp+914h] [bp-2Ch]@4
  RakNet *v60; // [sp+918h] [bp-28h]@1

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  v60 = _stack_chk_guard;
  v42 = a2;
  v40 = a6;
  v41 = a3;
  if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v10 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
  else
    v10 = &ServiceLocator<AppPlatform>::mDefaultService;
  v11 = (const char **)(*(int (**)(void))(**(_DWORD **)v10 + 276))();
  v12 = *v11;
  v13 = 0;
  v14 = *((_DWORD *)*v11 - 3);
  v57 = 1023;
  v58 = 0;
  v59 = 0;
  if ( v14 < 0x400 )
  {
    if ( v14 )
      _aeabi_memcpy(&v58, v12, v14);
    *((_BYTE *)&v57 + v14 + 4) = 0;
    v13 = v59 + v14;
  }
    v58 = 0;
  v59 = v13;
  if ( v7 == 1 )
    sub_119CB58((int)&v43, 24);
    sub_119C914((int)&v45, v8);
    sub_119D48C(&v39, (int)&v46);
    v15 = off_26D3F84;
    v43 = off_26D3F60;
    *(_DWORD *)((char *)*(off_26D3F60 - 3) + (_DWORD)&v43) = off_26D3F80[0];
    v45 = v15;
    v46 = &off_27734E8;
    v16 = (void *)(v48 - 12);
    if ( (int *)(v48 - 12) != &dword_28898C0 )
    {
      v30 = (unsigned int *)(v48 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v31 = __ldrex(v30);
        while ( __strex(v31 - 1, v30) );
      }
      else
        v31 = (*v30)--;
      if ( v31 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v16);
    }
    v46 = &off_26D40A8;
    sub_119C954((unsigned int **)&v47);
    v43 = (void **)off_26D3F68;
    *(void ***)((char *)&v43 + *((_DWORD *)off_26D3F68 - 3)) = (void **)off_26D3F6C;
    v44 = 0;
    sub_119C964(&v49);
    LODWORD(v17) = v39;
    HIDWORD(v17) = *(_DWORD *)(v39 - 12);
    v50 = &v58;
    v51 = v13;
    v52 = v17;
    Core::PathBuffer<Core::StackString<char,1024u>>::_join<Core::PathPart>((unsigned int *)&v54, (int)&v50, 2);
    v18 = v56;
    _aeabi_memcpy4(&v58, &v55, v56 + 1);
    v55 = 0;
    v59 = v18;
    v19 = (void *)(v39 - 12);
    v56 = 0;
    if ( (int *)(v39 - 12) != &dword_28898C0 )
      v32 = (unsigned int *)(v39 - 4);
          v33 = __ldrex(v32);
        while ( __strex(v33 - 1, v32) );
        v33 = (*v32)--;
      if ( v33 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v19);
  Core::PathBuffer<std::string>::PathBuffer<Core::StackString<char,1024u>>(&v36, (int)&v57);
  Core::FileStorageArea::createBasicDirectoryStorageArea((int)&v37, 1, &v36);
  v20 = (void *)(v36 - 12);
  if ( (int *)(v36 - 12) != &dword_28898C0 )
    v28 = (unsigned int *)(v36 - 4);
    if ( &pthread_create )
      __dmb();
      do
        v29 = __ldrex(v28);
      while ( __strex(v29 - 1, v28) );
    else
      v29 = (*v28)--;
    if ( v29 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v20);
  std::__shared_ptr<Social::User_generic,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<Social::User_generic>,GameUserType &,int &,MinecraftEventing &,std::shared_ptr<Options>,Options<Core::FileStorageArea>,unsigned int &>(
    (int)&v34,
    (int)&v53,
    &v42,
    &v41,
    v9,
    a5,
    (int)&v37,
    &v40);
  v21 = v38;
  *(_DWORD *)v6 = v34;
  v22 = v35;
  v35 = 0;
  *(_DWORD *)(v6 + 4) = v22;
  v34 = 0;
  if ( v21 )
    v23 = (unsigned int *)(v21 + 4);
        v24 = __ldrex(v23);
      while ( __strex(v24 - 1, v23) );
      v24 = (*v23)--;
    if ( v24 == 1 )
      v25 = (unsigned int *)(v21 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 8))(v21);
          v26 = __ldrex(v25);
        while ( __strex(v26 - 1, v25) );
        v26 = (*v25)--;
      if ( v26 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v21 + 12))(v21);
  result = (RakNet *)(_stack_chk_guard - v60);
  if ( _stack_chk_guard != v60 )
    _stack_chk_fail(result);
  return result;
}


int __fastcall Social::InviteUriListener::InviteUriListener(int result, Social::MultiplayerServiceManager *a2)
{
  *(_DWORD *)result = &off_26DE834;
  *(_DWORD *)(result + 4) = a2;
  return result;
}


int *__fastcall Social::XboxLiveUserManager::_updateUsers(int *result, int a2)
{
  int *v2; // r4@1
  int i; // r5@1

  v2 = result;
  for ( i = *(_DWORD *)(a2 + 8); i; i = *(_DWORD *)i )
    result = Social::XboxLiveUserManager::_updateUser(
               (Social::XboxLiveUserManager *)v2,
               (const Social::XboxProfile *)(i + 8));
  return result;
}


int __fastcall Social::MultiplayerService::setServiceManager(int result, Social::MultiplayerServiceManager *a2)
{
  *(_DWORD *)(result + 40) = a2;
  return result;
}


signed int __fastcall Social::XboxLiveUserManager::getMPTitleId(Social::XboxLiveUserManager *this)
{
  return 896928775;
}


signed int __fastcall Social::XboxLiveUserManager::isUserReady(Social::XboxLiveUserManager *this)
{
  return 1;
}


signed int __fastcall Social::Events::EventManager::setGlobalProperty<std::string>(int *a1, int a2, int **a3, const char **a4)
{
  int *v4; // r4@1
  int v5; // r7@1
  int *v6; // r5@1
  const char **v7; // r6@1
  int v9; // [sp+0h] [bp-28h]@1

  v4 = (int *)a3;
  v5 = a2;
  v6 = a1;
  v7 = a4;
  Social::Events::EventManager::removeGlobalProperty(a2, a3);
  sub_21E8AF4(v6, v4);
  Json::Value::Value((int)(v6 + 2), v7);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v9,
           (unsigned __int64 *)(v5 + 12),
           v4,
           (int)v6);
}


RakNet *__fastcall Social::MultiplayerService::setGameHostInfo(Social::MultiplayerService *this, Level *a2, int a3)
{
  Social::MultiplayerService *v3; // r4@1
  int v4; // r8@1
  Level *v5; // r6@1
  int *v6; // r7@1
  void *v7; // r0@1
  void *v8; // r0@2
  char *v9; // r0@3
  int v10; // r0@3
  void *v11; // r0@3
  int v12; // r0@4
  void *v13; // r0@4
  char *v14; // r0@5
  int *v15; // r0@5
  void *v16; // r0@5
  void *v17; // r0@6
  int v18; // r0@7
  Social::GameConnectionInfo *v19; // r5@7 OVERLAPPED
  Social::GameConnectionInfo *v20; // r6@7 OVERLAPPED
  Social::GameConnectionInfo *v21; // r0@8
  Social::GameConnectionInfo *v22; // r0@12
  Social::GameConnectionInfo *v23; // r4@12
  RakNet *result; // r0@17
  unsigned int *v25; // r2@19
  signed int v26; // r1@21
  unsigned int *v27; // r2@23
  signed int v28; // r1@25
  unsigned int *v29; // r2@27
  signed int v30; // r1@29
  unsigned int *v31; // r2@31
  signed int v32; // r1@33
  unsigned int *v33; // r2@35
  signed int v34; // r1@37
  unsigned int *v35; // r2@39
  signed int v36; // r1@41
  void *ptr; // [sp+0h] [bp-E0h]@7
  Social::GameConnectionInfo *v38; // [sp+4h] [bp-DCh]@7
  int v39; // [sp+8h] [bp-D8h]@7
  int v40; // [sp+Ch] [bp-D4h]@6
  int v41; // [sp+10h] [bp-D0h]@5
  int v42; // [sp+14h] [bp-CCh]@4
  int v43; // [sp+18h] [bp-C8h]@3
  int v44; // [sp+1Ch] [bp-C4h]@2
  int v45; // [sp+20h] [bp-C0h]@1
  char v46; // [sp+28h] [bp-B8h]@6
  RakNet *v47; // [sp+C4h] [bp-1Ch]@1

  v3 = this;
  v4 = a3;
  v5 = a2;
  v47 = _stack_chk_guard;
  v6 = (int *)((char *)this + 104);
  (*(void (__fastcall **)(int *, Social::MultiplayerService *))(*(_DWORD *)this + 156))(&v45, this);
  EntityInteraction::setInteractText(v6, &v45);
  v7 = (void *)(v45 - 12);
  if ( (int *)(v45 - 12) != &dword_28898C0 )
  {
    v25 = (unsigned int *)(v45 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
    }
    else
      v26 = (*v25)--;
    if ( v26 <= 0 )
      j_j_j_j__ZdlPv_9(v7);
  }
  (*(void (__fastcall **)(int *, Social::MultiplayerService *))(*(_DWORD *)v3 + 160))(&v44, v3);
  EntityInteraction::setInteractText((int *)v3 + 25, &v44);
  v8 = (void *)(v44 - 12);
  if ( (int *)(v44 - 12) != &dword_28898C0 )
    v27 = (unsigned int *)(v44 - 4);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 <= 0 )
      j_j_j_j__ZdlPv_9(v8);
  v9 = Level::getLevelData(v5);
  v10 = LevelData::getGameType((LevelData *)v9);
  GameTypeConv::gameTypeToNonLocString((void **)&v43, v10);
  xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
    (int *)v3 + 31,
    &v43);
  v11 = (void *)(v43 - 12);
  if ( (int *)(v43 - 12) != &dword_28898C0 )
    v29 = (unsigned int *)(v43 - 4);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 <= 0 )
      j_j_j_j__ZdlPv_9(v11);
  v12 = Level::getLevelStorage(v5);
  (*(void (__fastcall **)(int *))(*(_DWORD *)v12 + 84))(&v42);
    (int *)v3 + 28,
    &v42);
  v13 = (void *)(v42 - 12);
  if ( (int *)(v42 - 12) != &dword_28898C0 )
    v31 = (unsigned int *)(v42 - 4);
        v32 = __ldrex(v31);
      while ( __strex(v32 - 1, v31) );
      v32 = (*v31)--;
    if ( v32 <= 0 )
      j_j_j_j__ZdlPv_9(v13);
  v14 = Level::getLevelData(v5);
  v15 = (int *)LevelData::getLevelName((LevelData *)v14);
  EntityInteraction::setInteractText((int *)v3 + 30, v15);
  *((_DWORD *)v3 + 39) = 137;
  Common::getGameVersionStringNet((Common *)&v41);
    (int *)v3 + 32,
    &v41);
  v16 = (void *)(v41 - 12);
  if ( (int *)(v41 - 12) != &dword_28898C0 )
    v33 = (unsigned int *)(v41 - 4);
        v34 = __ldrex(v33);
      while ( __strex(v34 - 1, v33) );
      v34 = (*v33)--;
    if ( v34 <= 0 )
      j_j_j_j__ZdlPv_9(v16);
  NetworkHandler::getPrimaryNetworkId((NetworkHandler *)&v46, *((_DWORD *)v3 + 17));
  NetworkIdentifier::toString((NetworkIdentifier *)&v40, (int)&v46);
    (int *)v3 + 29,
    &v40);
  v17 = (void *)(v40 - 12);
  if ( (int *)(v40 - 12) != &dword_28898C0 )
    v35 = (unsigned int *)(v40 - 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 - 1, v35) );
      v36 = (*v35)--;
    if ( v36 <= 0 )
      j_j_j_j__ZdlPv_9(v17);
  v18 = *((_DWORD *)Level::getPlayerList(v5) + 3);
  *((_DWORD *)v3 + 40) = v4;
  *((_DWORD *)v3 + 41) = v18;
  (*(void (__fastcall **)(void **, Social::MultiplayerService *))(*(_DWORD *)v3 + 188))(&ptr, v3);
  *(_QWORD *)&v19 = *((_QWORD *)v3 + 11);
  *((_DWORD *)v3 + 22) = ptr;
  ptr = 0;
  *((_DWORD *)v3 + 23) = v38;
  v38 = 0;
  *((_DWORD *)v3 + 24) = v39;
  v39 = 0;
  if ( v19 != v20 )
    v21 = v19;
    do
      v21 = (Social::GameConnectionInfo *)((char *)Social::GameConnectionInfo::~GameConnectionInfo(v21) + 60);
    while ( v20 != v21 );
  if ( v19 )
    operator delete((void *)v19);
  v23 = v38;
  v22 = (Social::GameConnectionInfo *)ptr;
  if ( ptr != (void *)v38 )
      v22 = (Social::GameConnectionInfo *)((char *)Social::GameConnectionInfo::~GameConnectionInfo(v22) + 60);
    while ( v23 != v22 );
    v22 = (Social::GameConnectionInfo *)ptr;
  if ( v22 )
    operator delete((void *)v22);
  result = (RakNet *)(_stack_chk_guard - v47);
  if ( _stack_chk_guard != v47 )
    _stack_chk_fail(result);
  return result;
}


void __fastcall Social::XboxLiveUserManager::tick(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager::tick(this);
}


void __fastcall Social::MultiplayerXBL::~MultiplayerXBL(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r0@1

  v1 = Social::MultiplayerXBL::~MultiplayerXBL(this);
  j_j_j__ZdlPv_4((void *)v1);
}


void __fastcall Social::Events::AggregationEventListener::~AggregationEventListener(Social::Events::AggregationEventListener *this)
{
  Social::Events::AggregationEventListener::~AggregationEventListener(this);
}


void __fastcall Social::MultiplayerXBL::showPlayerProfile(int a1, int *a2)
{
  int v2; // r4@1
  int v3; // r4@1
  unsigned int *v4; // r1@2
  unsigned int v5; // r0@4
  unsigned int *v6; // r5@8
  unsigned int v7; // r0@10
  int v8; // r4@15
  unsigned int *v9; // r1@16
  unsigned int v10; // r0@18
  unsigned int *v11; // r5@22
  unsigned int v12; // r0@24
  void *v13; // r0@29
  unsigned int *v14; // r2@31
  signed int v15; // r1@33
  int v16; // [sp+4h] [bp-2Ch]@1
  char v17; // [sp+8h] [bp-28h]@1
  int v18; // [sp+Ch] [bp-24h]@15
  char v19; // [sp+10h] [bp-20h]@1
  int v20; // [sp+14h] [bp-1Ch]@1
  int v21; // [sp+18h] [bp-18h]@1

  v2 = a1;
  utility::conversions::to_string_t(&v21, a2);
  xbox::services::system::title_callable_ui::show_profile_card_ui((int)&v17, &v21);
  v16 = v2;
  sub_1007F8C((int)&v19, (int)&v17, &v16);
  v3 = v20;
  if ( v20 )
  {
    v4 = (unsigned int *)(v20 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v5 = __ldrex(v4);
      while ( __strex(v5 - 1, v4) );
    }
    else
      v5 = (*v4)--;
    if ( v5 == 1 )
      v6 = (unsigned int *)(v3 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3);
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(v6);
        while ( __strex(v7 - 1, v6) );
      }
      else
        v7 = (*v6)--;
      if ( v7 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 12))(v3);
  }
  v8 = v18;
  if ( v18 )
    v9 = (unsigned int *)(v18 + 4);
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      v10 = (*v9)--;
    if ( v10 == 1 )
      v11 = (unsigned int *)(v8 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 8))(v8);
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 12))(v8);
  v13 = (void *)(v21 - 12);
  if ( (int *)(v21 - 12) != &dword_28898C0 )
    v14 = (unsigned int *)(v21 - 4);
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v13);
}


void __fastcall Social::XboxLiveUserManager::setLocale(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  int v2; // r0@1
  void *v3; // r0@2
  xbox::services::system::xbox_live_user *v4; // r0@4
  bool v5; // zf@4
  unsigned int v6; // r0@8
  int v7; // r5@10
  unsigned int *v8; // r1@11
  unsigned int v9; // r0@13
  unsigned int *v10; // r6@17
  unsigned int v11; // r0@19
  void *v12; // r0@24
  void *v13; // r0@25
  unsigned int *v14; // r2@27
  signed int v15; // r1@29
  unsigned int *v16; // r2@35
  signed int v17; // r1@37
  int v18; // [sp+4h] [bp-24h]@10
  int v19; // [sp+8h] [bp-20h]@10
  int v20; // [sp+Ch] [bp-1Ch]@10
  int v21; // [sp+10h] [bp-18h]@1

  v1 = this;
  v2 = I18n::getCurrentLanguage(this);
  Localization::getFullLanguageCode((Localization *)&v21, v2);
  if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v3 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
  else
    v3 = &ServiceLocator<AppPlatform>::mDefaultService;
  (*(void (**)(void))(**(_DWORD **)v3 + 256))();
  v4 = (xbox::services::system::xbox_live_user *)*((_DWORD *)v1 + 34);
  v5 = v4 == 0;
  if ( v4 )
    v5 = *((_DWORD *)v1 + 36) == 0;
  if ( !v5 && xbox::services::system::xbox_live_user::is_signed_in(v4) == 1 )
  {
    v6 = *((_WORD *)v1 + 62);
    if ( v6 <= 0xFF && !(_BYTE)v6 )
    {
      utility::conversions::to_string_t(&v20, &v21);
      sub_119E74C((const void **)&v20, 2u, 1u, "-", (_BYTE *)1);
      xbox::services::xbox_live_context::settings((xbox::services::xbox_live_context *)&v18, *((int **)v1 + 36));
      xbox::services::xbox_live_context_settings::set_locale(v18, &v20);
      v7 = v19;
      if ( v19 )
      {
        v8 = (unsigned int *)(v19 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v9 = __ldrex(v8);
          while ( __strex(v9 - 1, v8) );
        }
        else
          v9 = (*v8)--;
        if ( v9 == 1 )
          v10 = (unsigned int *)(v7 + 8);
          (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
          if ( &pthread_create )
          {
            __dmb();
            do
              v11 = __ldrex(v10);
            while ( __strex(v11 - 1, v10) );
          }
          else
            v11 = (*v10)--;
          if ( v11 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
      }
      Social::XboxLiveUserManager::_updateAchievementData(v1);
      v12 = (void *)(v20 - 12);
      if ( (int *)(v20 - 12) != &dword_28898C0 )
        v16 = (unsigned int *)(v20 - 4);
            v17 = __ldrex(v16);
          while ( __strex(v17 - 1, v16) );
          v17 = (*v16)--;
        if ( v17 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v12);
    }
  }
  v13 = (void *)(v21 - 12);
  if ( (int *)(v21 - 12) != &dword_28898C0 )
    v14 = (unsigned int *)(v21 - 4);
    if ( &pthread_create )
      __dmb();
      do
        v15 = __ldrex(v14);
      while ( __strex(v15 - 1, v14) );
    else
      v15 = (*v14)--;
    if ( v15 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v13);
}


void __fastcall Social::MultiplayerXBL::~MultiplayerXBL(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL::~MultiplayerXBL(this);
}


int __fastcall Social::MultiplayerServiceManager::advertiseGame(int result)
{
  __int64 i; // r4@1
  int v2; // t1@2

  for ( i = *(_QWORD *)result; HIDWORD(i) != (_DWORD)i; result = (*(int (**)(void))(*(_DWORD *)v2 + 48))() )
  {
    v2 = *(_DWORD *)i;
    LODWORD(i) = i + 4;
  }
  return result;
}


void __fastcall Social::Events::Event::addProperty<float>(int a1, int *a2, int a3)
{
  Social::Events::Event::addProperty<float>(a1, a2, a3);
}


int __fastcall Social::MultiplayerServiceManager::_notifyInvalidPlayerJoinedLobby(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r5@1
  _DWORD *v6; // r0@1
  int (*v7)(void); // r3@1
  int *v8; // r5@1 OVERLAPPED
  int v9; // r6@1 OVERLAPPED
  int result; // r0@4
  _DWORD *v11; // [sp+4h] [bp-24h]@1
  int (__fastcall *v12)(void **, void **, int); // [sp+Ch] [bp-1Ch]@1
  int (__fastcall *v13)(int, int); // [sp+10h] [bp-18h]@1
  int v14; // [sp+14h] [bp-14h]@1

  v9 = a1;
  v4 = a4;
  v5 = a3;
  v14 = a2;
  v6 = operator new(0xCu);
  *v6 = &v14;
  v6[1] = v5;
  v7 = (int (*)(void))sub_FFCB74;
  v6[2] = v4;
  v11 = v6;
  v12 = sub_FFCB74;
  v13 = sub_FFCB52;
  *(_QWORD *)&v8 = *(_QWORD *)(v9 + 44);
  if ( v8 == (int *)v9 )
    goto LABEL_11;
  do
  {
    if ( !v7 )
      sub_119C8E4();
    result = v13(&v11, *v8);
    v7 = (int (*)(void))v12;
    ++v8;
  }
  while ( (int *)v9 != v8 );
  if ( v12 )
LABEL_11:
    result = v7();
  return result;
}


RakNet *__fastcall Social::MultiplayerService::_getLocalConnectionInfo(Social::MultiplayerService *this, int a2)
{
  Social::MultiplayerService *v2; // r11@1
  int v3; // r5@1
  UPNPInterface *v4; // r0@1
  int v5; // r6@3
  char *v6; // r6@4
  char *v7; // r0@4
  UPNPInterface *v8; // r0@4
  char *v9; // r6@4
  char *v10; // r0@4
  __int64 v11; // kr00_8@4
  int v12; // r5@6
  int v13; // t1@6
  RakNet::SystemAddress *v14; // r5@10 OVERLAPPED
  RakNet::SystemAddress *v15; // r6@10 OVERLAPPED
  bool v16; // zf@11
  signed __int16 v17; // r0@11
  signed int v18; // r1@13
  int v19; // r2@13
  __int16 v20; // r0@14
  __int64 v21; // kr08_8@16
  const char **v22; // r5@21
  const char **v23; // r8@21
  signed __int16 v24; // r0@24
  signed int v25; // r1@26
  int v26; // r2@26
  __int16 v27; // r0@27
  __int64 v28; // kr18_8@29
  const char **v29; // r7@33
  unsigned int *v30; // r2@35
  signed int v31; // r1@37
  int *v32; // r0@43
  void *v33; // r0@49
  const char **v34; // r5@51
  const char **v35; // r8@51
  signed __int16 v36; // r0@55
  signed int v37; // r1@57
  int v38; // r2@57
  __int16 v39; // r0@58
  __int64 v40; // kr30_8@60
  const char **v41; // r6@64
  unsigned int *v42; // r2@66
  signed int v43; // r1@68
  int *v44; // r0@74
  RakNet *result; // r0@81
  int **v46; // [sp+Ch] [bp-47Ch]@3
  char *v47; // [sp+10h] [bp-478h]@60
  __int16 v48; // [sp+14h] [bp-474h]@60
  __int16 v49; // [sp+16h] [bp-472h]@57
  const char **v50; // [sp+18h] [bp-470h]@51
  const char **v51; // [sp+1Ch] [bp-46Ch]@51
  char *v52; // [sp+24h] [bp-464h]@16
  __int16 v53; // [sp+28h] [bp-460h]@16
  __int16 v54; // [sp+2Ah] [bp-45Eh]@13
  char *v55; // [sp+2Ch] [bp-45Ch]@29
  __int16 v56; // [sp+30h] [bp-458h]@29
  __int16 v57; // [sp+32h] [bp-456h]@26
  const char **v58; // [sp+34h] [bp-454h]@21
  const char **v59; // [sp+38h] [bp-450h]@21
  void *ptr; // [sp+40h] [bp-448h]@10
  void *v61; // [sp+44h] [bp-444h]@10
  __int16 v62; // [sp+4Eh] [bp-43Ah]@7
  char *v63; // [sp+50h] [bp-438h]@7
  __int16 v64; // [sp+56h] [bp-432h]@7
  __int16 v65; // [sp+58h] [bp-430h]@4
  __int16 v66; // [sp+5Ah] [bp-42Eh]@4
  char v67; // [sp+60h] [bp-428h]@52
  char v68; // [sp+E4h] [bp-3A4h]@22
  char v69; // [sp+168h] [bp-320h]@7
  int v70; // [sp+16Ch] [bp-31Ch]@7
  char v71; // [sp+200h] [bp-288h]@7
  int v72; // [sp+204h] [bp-284h]@7
  char v73; // [sp+298h] [bp-1F0h]@7
  int v74; // [sp+29Ch] [bp-1ECh]@7
  char v75; // [sp+330h] [bp-158h]@7
  int v76; // [sp+334h] [bp-154h]@7
  char v77; // [sp+3C8h] [bp-C0h]@6
  RakNet *v78; // [sp+460h] [bp-28h]@1

  v2 = this;
  v3 = a2;
  v78 = _stack_chk_guard;
  *(_DWORD *)this = 0;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  v4 = *(UPNPInterface **)(a2 + 76);
  if ( v4
    && UPNPInterface::getPortMappingv4(v4)[268]
    && (v46 = (int **)(v3 + 72),
        v5 = *((_WORD *)UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76)) + 130),
        v5 == (*(int (__fastcall **)(_DWORD))(**(_DWORD **)(v3 + 72) + 64))(*(_DWORD *)(v3 + 72))) )
  {
    UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76));
    v66 = 4;
    v6 = UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76));
    v7 = UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76));
    std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType,char const(&)[256],short const&,char const(&)[1]>(
      (unsigned __int64 *)v2,
      &v66,
      v6 + 1,
      (_WORD *)v7 + 129,
      (const char *)&unk_257BC67);
    v8 = *(UPNPInterface **)(v3 + 76);
    v65 = 3;
    v9 = UPNPInterface::getPortMappingv4(v8);
    v10 = UPNPInterface::getPortMappingv4(*(UPNPInterface **)(v3 + 76));
    v11 = *(_QWORD *)((char *)v2 + 4);
    if ( (_DWORD)v11 == HIDWORD(v11) )
    {
      std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType,char const(&)[256],short const&,char const(&)[1]>(
        (unsigned __int64 *)v2,
        &v65,
        v9 + 1,
        (_WORD *)v10 + 129,
        (const char *)&unk_257BC67);
    }
    else
      __gnu_cxx::new_allocator<Social::GameConnectionInfo>::construct<Social::GameConnectionInfo,Social::ConnectionType,char const(&)[256],short const&,char const(&)[1]>(
        (int)v2,
        v11,
      *((_DWORD *)v2 + 1) = v11 + 60;
  }
  else
    v13 = *(_DWORD *)(v3 + 72);
    v12 = v3 + 72;
    (*(void (__fastcall **)(char *))(*(_DWORD *)v13 + 40))(&v77);
    if ( v77 )
      (*(void (__fastcall **)(char *))(**(_DWORD **)v12 + 40))(&v75);
      RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v76, 0, 124);
      (*(void (__fastcall **)(char *))(**(_DWORD **)v12 + 40))(&v73);
      RakNet::SystemAddress::GetPort((RakNet::SystemAddress *)&v74);
      v64 = 3;
      (*(void (__fastcall **)(char *))(**(_DWORD **)v12 + 40))(&v71);
      v63 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v72, 0, 124);
      (*(void (__fastcall **)(char *))(**(_DWORD **)v12 + 40))(&v69);
      v62 = RakNet::SystemAddress::GetPort((RakNet::SystemAddress *)&v70);
      std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType,char const*,unsigned short,char const(&)[1]>(
        &v64,
        (const char **)&v63,
        &v62,
      v46 = (int **)v12;
  (*(void (__fastcall **)(void **))(**v46 + 28))(&ptr);
  *(_QWORD *)&v14 = *(_QWORD *)&ptr;
  if ( ptr == v61 )
    (*(void (__fastcall **)(const char ***))(**v46 + 16))(&v58);
    v23 = v59;
    v22 = v58;
    if ( v58 != v59 )
      do
      {
        RakNet::SystemAddress::SystemAddress((RakNet::SystemAddress *)&v68);
        if ( RakNet::SystemAddress::FromString((RakNet::SystemAddress *)&v68, *v22, 124, 0) == 1
          && !RakNet::SystemAddress::IsLoopback((RakNet::SystemAddress *)&v68) )
        {
          v16 = RakNet::SystemAddress::GetIPVersion((RakNet::SystemAddress *)&v68) == 6;
          v24 = 1;
          if ( v16 )
            v24 = 2;
          v57 = v24;
          v25 = RakNet::SystemAddress::GetIPVersion((RakNet::SystemAddress *)&v68);
          v26 = **v46;
          if ( v25 == 6 )
            v27 = (*(int (**)(void))(v26 + 68))();
          else
            v27 = (*(int (**)(void))(v26 + 64))();
          v56 = v27;
          v55 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v68, 0, 124);
          v28 = *(_QWORD *)((char *)v2 + 4);
          if ( (_DWORD)v28 == HIDWORD(v28) )
          {
            std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType &,char const*,unsigned short &,char const(&)[1]>(
              (unsigned __int64 *)v2,
              &v57,
              (const char **)&v55,
              &v56,
              (const char *)&unk_257BC67);
          }
            __gnu_cxx::new_allocator<Social::GameConnectionInfo>::construct<Social::GameConnectionInfo,Social::ConnectionType &,char const*,unsigned short &,char const(&)[1]>(
              (int)v2,
              v28,
            *((_DWORD *)v2 + 1) = v28 + 60;
        }
        ++v22;
      }
      while ( v23 != v22 );
      v22 = v59;
      v29 = v58;
      if ( v58 != v59 )
        do
          v32 = (int *)(*v29 - 12);
          if ( v32 != &dword_28898C0 )
            v30 = (unsigned int *)(*v29 - 4);
            if ( &pthread_create )
            {
              __dmb();
              do
                v31 = __ldrex(v30);
              while ( __strex(v31 - 1, v30) );
            }
            else
              v31 = (*v30)--;
            if ( v31 <= 0 )
              j_j_j_j__ZdlPv_9(v32);
          ++v29;
        while ( v29 != v22 );
        v22 = v58;
    if ( v22 )
      operator delete(v22);
    do
      RakNet::SystemAddress::ToString(v14, 0, 124);
      v16 = RakNet::SystemAddress::GetIPVersion(v14) == 6;
      v17 = 1;
      if ( v16 )
        v17 = 2;
      v54 = v17;
      v18 = RakNet::SystemAddress::GetIPVersion(v14);
      v19 = **v46;
      if ( v18 == 6 )
        v20 = (*(int (**)(void))(v19 + 68))();
      else
        v20 = (*(int (**)(void))(v19 + 64))();
      v53 = v20;
      v52 = RakNet::SystemAddress::ToString(v14, 0, 124);
      v21 = *(_QWORD *)((char *)v2 + 4);
      if ( (_DWORD)v21 == HIDWORD(v21) )
        std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType &,char const*,unsigned short &,char const(&)[1]>(
          (unsigned __int64 *)v2,
          &v54,
          (const char **)&v52,
          &v53,
          (const char *)&unk_257BC67);
        __gnu_cxx::new_allocator<Social::GameConnectionInfo>::construct<Social::GameConnectionInfo,Social::ConnectionType &,char const*,unsigned short &,char const(&)[1]>(
          (int)v2,
          v21,
        *((_DWORD *)v2 + 1) = v21 + 60;
      v14 = (RakNet::SystemAddress *)((char *)v14 + 132);
    while ( v15 != v14 );
  if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v33 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
    v33 = &ServiceLocator<AppPlatform>::mDefaultService;
  (*(void (__fastcall **)(const char ***))(**(_DWORD **)v33 + 480))(&v50);
  v35 = v51;
  v34 = v50;
  if ( v50 != v51 )
      RakNet::SystemAddress::SystemAddress((RakNet::SystemAddress *)&v67);
      if ( RakNet::SystemAddress::FromString((RakNet::SystemAddress *)&v67, *v34, 124, 0) == 1
        && !RakNet::SystemAddress::IsLoopback((RakNet::SystemAddress *)&v67)
        && RakNet::SystemAddress::IsValidIPAddress((RakNet::SystemAddress *)&v67) == 1 )
        RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v67, 1, 124);
        v16 = RakNet::SystemAddress::GetIPVersion((RakNet::SystemAddress *)&v67) == 6;
        v36 = 1;
        if ( v16 )
          v36 = 2;
        v49 = v36;
        v37 = RakNet::SystemAddress::GetIPVersion((RakNet::SystemAddress *)&v67);
        v38 = **v46;
        if ( v37 == 6 )
          v39 = (*(int (**)(void))(v38 + 68))();
        else
          v39 = (*(int (**)(void))(v38 + 64))();
        v48 = v39;
        v47 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v67, 0, 124);
        v40 = *(_QWORD *)((char *)v2 + 4);
        if ( (_DWORD)v40 == HIDWORD(v40) )
          std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::ConnectionType &,char const*,unsigned short &,char const(&)[1]>(
            (unsigned __int64 *)v2,
            &v49,
            (const char **)&v47,
            &v48,
            (const char *)&unk_257BC67);
          __gnu_cxx::new_allocator<Social::GameConnectionInfo>::construct<Social::GameConnectionInfo,Social::ConnectionType &,char const*,unsigned short &,char const(&)[1]>(
            (int)v2,
            v40,
          *((_DWORD *)v2 + 1) = v40 + 60;
      ++v34;
    while ( v35 != v34 );
    v34 = v51;
    v41 = v50;
    if ( v50 != v51 )
        v44 = (int *)(*v41 - 12);
        if ( v44 != &dword_28898C0 )
          v42 = (unsigned int *)(*v41 - 4);
          if ( &pthread_create )
            __dmb();
            do
              v43 = __ldrex(v42);
            while ( __strex(v43 - 1, v42) );
            v43 = (*v42)--;
          if ( v43 <= 0 )
            j_j_j_j__ZdlPv_9(v44);
        ++v41;
      while ( v41 != v34 );
      v34 = v50;
  if ( v34 )
    operator delete(v34);
  if ( ptr )
    operator delete(ptr);
  result = (RakNet *)(_stack_chk_guard - v78);
  if ( _stack_chk_guard != v78 )
    _stack_chk_fail(result);
  return result;
}


int __fastcall Social::MultiplayerService::_notifyInvalidPlayerJoinedLobby(int a1, int a2, int a3)
{
  return j_j_j__ZN6Social25MultiplayerServiceManager31_notifyInvalidPlayerJoinedLobbyENS_28MultiplayerServiceIdentifierERKN3mce4UUIDERKSs(
           *(_DWORD *)(a1 + 40),
           *(_DWORD *)(a1 + 296),
           a2,
           a3);
}


int (**__fastcall Social::Events::EventManager::sendEvents(Social::Events::EventManager *this, bool a2))(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)
{
  Social::Events::EventManager *v2; // r6@1
  pthread_mutex_t *v3; // r4@1
  int v4; // r0@2
  int v5; // r6@3
  int i; // r7@3
  __int64 v7; // kr00_8@3
  int (**result)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *); // r0@5

  v2 = this;
  v3 = (pthread_mutex_t *)((char *)this + 124);
  if ( &pthread_create )
  {
    v4 = j_pthread_mutex_lock_0(v3);
    if ( v4 )
      sub_21E5E14(v4);
  }
  v7 = *(_QWORD *)v2;
  v5 = *(_QWORD *)v2 >> 32;
  for ( i = v7; v5 != i; i += 4 )
    (*(void (**)(void))(**(_DWORD **)i + 12))();
  result = &pthread_create;
    result = (int (**)(pthread_t *, const pthread_attr_t *, void *(*)(void *), void *))j_pthread_mutex_unlock_0(v3);
  return result;
}


int __fastcall Social::MultiplayerXBL::clearInviteHandle(Social::MultiplayerXBL *this)
{
  Social::MultiplayerXBL *v1; // r4@1
  _DWORD *v2; // r0@1
  __int64 v3; // r1@1
  int result; // r0@1
  _DWORD *v5; // [sp+0h] [bp-18h]@1
  __int64 v6; // [sp+8h] [bp-10h]@1

  v1 = this;
  v2 = operator new(4u);
  LODWORD(v3) = sub_100F55C;
  *v2 = v1;
  HIDWORD(v3) = sub_100F548;
  v5 = v2;
  v6 = v3;
  result = MPMCQueue<std::function<void ()(void)>>::push((int)v1 + 316, (int)&v5);
  if ( (_DWORD)v6 )
    result = ((int (__cdecl *)(_DWORD **))v6)(&v5);
  return result;
}


int __fastcall Social::Events::EventManager::getPlayerGlobalProperties(Social::Events::EventManager *this, unsigned int a2)
{
  unsigned int v2; // r10@1
  char *v3; // r8@1
  unsigned int v4; // r7@1
  int v5; // r9@1
  int v6; // r0@1
  _DWORD *v7; // r4@2
  int v8; // r5@2
  _DWORD *v9; // r6@4
  bool v10; // zf@7
  int v11; // r0@11
  unsigned int v13; // [sp+4h] [bp-2Ch]@1
  int *v14; // [sp+Ch] [bp-24h]@11

  v2 = a2;
  v13 = a2;
  v3 = (char *)this + 96;
  v4 = *((_DWORD *)this + 25);
  v5 = a2 % *((_DWORD *)this + 25);
  v6 = *(_DWORD *)(*((_DWORD *)this + 24) + 4 * v5);
  if ( !v6 )
    goto LABEL_11;
  v7 = *(_DWORD **)v6;
  v8 = *(_DWORD *)(*(_DWORD *)v6 + 4);
  while ( v8 != a2 )
  {
    v9 = (_DWORD *)*v7;
    if ( *v7 )
    {
      v8 = v9[1];
      v6 = (int)v7;
      v7 = (_DWORD *)*v7;
      if ( v9[1] % v4 == v5 )
        continue;
    }
  }
  v10 = v6 == 0;
  if ( v6 )
    v6 = *(_DWORD *)v6;
    v10 = v6 == 0;
  if ( v10 )
LABEL_11:
    v14 = (int *)&v13;
    v11 = j_j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            (int)v3,
            (int)&unk_262EAB5,
            &v14);
    v6 = j_std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
           (int)v3,
           v5,
           v2,
           v11);
  return v6 + 8;
}


int __fastcall Social::UserManager::notifyUserStorageAreaChanged(int a1, int a2, int a3)
{
  int v3; // r5@1
  int result; // r0@1
  int v5; // r6@1
  int v6; // r9@1
  int *v7; // r4@1
  int *v8; // r7@1
  _DWORD *v9; // r0@3
  int (__fastcall *v10)(void **, _QWORD **, int); // r3@3
  __int64 v11; // r10@3
  unsigned int *v12; // r1@13
  unsigned int *v13; // r4@19
  _DWORD *v14; // [sp+4h] [bp-3Ch]@3
  int (__fastcall *v15)(void **, _QWORD **, int); // [sp+Ch] [bp-34h]@3
  int (__fastcall *v16)(_QWORD **, int); // [sp+10h] [bp-30h]@3
  int v17; // [sp+14h] [bp-2Ch]@1
  int v18; // [sp+18h] [bp-28h]@1

  v3 = a1;
  v17 = *(_DWORD *)a3;
  result = 0;
  v5 = *(_DWORD *)(a3 + 4);
  v6 = a2;
  *(_DWORD *)(a3 + 4) = 0;
  v18 = v5;
  *(_DWORD *)a3 = 0;
  v7 = (int *)(*(_QWORD *)(v3 + 8) >> 32);
  v8 = (int *)*(_QWORD *)(v3 + 8);
  if ( v8 != v7 )
  {
    do
    {
      result = *v8;
      if ( *v8 == v6 )
      {
        v15 = 0;
        v9 = operator new(8u);
        *v9 = v8;
        v9[1] = &v17;
        v10 = sub_1028B14;
        v14 = v9;
        v15 = sub_1028B14;
        v16 = sub_1028B04;
        v11 = *(_QWORD *)(v3 + 140);
        if ( (_DWORD)v11 == HIDWORD(v11) )
          goto LABEL_28;
        do
        {
          if ( !v10 )
            sub_119C8E4();
          result = v16((_QWORD **)&v14, *(_DWORD *)v11);
          v10 = v15;
          LODWORD(v11) = v11 + 4;
        }
        while ( HIDWORD(v11) != (_DWORD)v11 );
        if ( v15 )
LABEL_28:
          result = v10((void **)&v14, (_QWORD **)&v14, 3);
      }
      v8 += 2;
    }
    while ( v8 != v7 );
    v5 = v18;
  }
  if ( v5 )
    v12 = (unsigned int *)(v5 + 4);
    if ( &pthread_create )
      __dmb();
      do
        result = __ldrex(v12);
      while ( __strex(result - 1, v12) );
    else
      result = (*v12)--;
    if ( result == 1 )
      v13 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
        __dmb();
          result = __ldrex(v13);
        while ( __strex(result - 1, v13) );
      else
        result = (*v13)--;
      if ( result == 1 )
        result = (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  return result;
}


int *__fastcall Social::MultiplayerXBL::getXBLInfo(Social::MultiplayerXBL *this, int a2)
{
  Social::MultiplayerXBL *v2; // r4@1
  int *result; // r0@1
  int v4; // r4@1
  unsigned int *v5; // r1@2
  unsigned int *v6; // r5@8
  Social::User *v7; // [sp+0h] [bp-18h]@1
  int v8; // [sp+4h] [bp-14h]@1

  v2 = this;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v7, *(_DWORD *)(a2 + 44));
  Social::User::getLiveUser(v7);
  result = Social::XboxLiveUserManager::getXBLInfo(v2);
  v4 = v8;
  if ( v8 )
  {
    v5 = (unsigned int *)(v8 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        result = (int *)__ldrex(v5);
      while ( __strex((unsigned int)result - 1, v5) );
    }
    else
      result = (int *)(*v5)--;
    if ( result == (int *)1 )
      v6 = (unsigned int *)(v4 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v4 + 8))(v4);
      if ( &pthread_create )
      {
        __dmb();
        do
          result = (int *)__ldrex(v6);
        while ( __strex((unsigned int)result - 1, v6) );
      }
      else
        result = (int *)(*v6)--;
      if ( result == (int *)1 )
        result = (int *)(*(int (__fastcall **)(int))(*(_DWORD *)v4 + 12))(v4);
  }
  return result;
}


void __fastcall Social::Events::XboxLiveTelemetry::~XboxLiveTelemetry(Social::Events::XboxLiveTelemetry *this)
{
  Social::Events::XboxLiveTelemetry::~XboxLiveTelemetry(this);
}


void __fastcall Social::XboxLiveUserManager::_refreshUserData(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r5@1
  int i; // r4@2
  _DWORD *v3; // r7@5
  unsigned int *v4; // r2@7
  signed int v5; // r1@9
  _DWORD *v6; // r6@15
  Social::XboxProfile *v7; // r0@15
  int v8; // r1@15
  void *v9; // r0@15
  char v10; // [sp+0h] [bp-48h]@1
  void *ptr; // [sp+4h] [bp-44h]@17
  int v12; // [sp+8h] [bp-40h]@17
  _DWORD *v13; // [sp+Ch] [bp-3Ch]@2
  int v14; // [sp+10h] [bp-38h]@17
  int v15; // [sp+1Ch] [bp-2Ch]@18

  v1 = this;
  Social::XboxLiveUserInfo::_getXboxLiveFriends((Social::XboxLiveUserInfo *)&v10, *((_DWORD *)this + 62));
  if ( !v10 )
  {
    for ( i = (int)v13; i; i = *(_DWORD *)i )
      Social::XboxLiveUserManager::_updateUser(v1, (const Social::XboxProfile *)(i + 8));
  }
  v3 = v13;
  while ( v3 )
    v6 = v3;
    v7 = (Social::XboxProfile *)(v3 + 2);
    v3 = (_DWORD *)*v3;
    Social::XboxProfile::~XboxProfile(v7);
    v8 = v6[1];
    v9 = (void *)(v8 - 12);
    if ( (int *)(v8 - 12) != &dword_28898C0 )
    {
      v4 = (unsigned int *)(v8 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v5 = __ldrex(v4);
        while ( __strex(v5 - 1, v4) );
      }
      else
        v5 = (*v4)--;
      if ( v5 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v9);
    }
    operator delete(v6);
  _aeabi_memclr4(ptr, 4 * v12);
  v13 = 0;
  v14 = 0;
  if ( ptr )
    if ( &v15 != ptr )
      operator delete(ptr);
}


_WORD *__fastcall Social::GameConnectionInfo::GameConnectionInfo(_WORD *a1, __int16 a2, __int64 a3)
{
  _WORD *v3; // r5@1
  void **v4; // r4@1
  char *v5; // r0@1
  __int64 v6; // r0@1
  __int64 v8; // [sp+30h] [bp-8h]@1

  v3 = a1;
  v8 = a3;
  *a1 = a2;
  v4 = (void **)(a1 + 2);
  v5 = RakNet::SystemAddress::ToString((RakNet::SystemAddress *)&v8, 0, 124);
  sub_21E94B4(v4, v5);
  sub_21E94B4((void **)v3 + 2, (const char *)&unk_257BC67);
  *((_DWORD *)v3 + 3) = RakNet::SystemAddress::GetPort((RakNet::SystemAddress *)&v8);
  sub_21E94B4((void **)v3 + 4, (const char *)&unk_257BC67);
  LODWORD(v6) = v3 + 10;
  ThirdPartyInfo::ThirdPartyInfo(v6);
  return v3;
}


Json::Value *__fastcall Social::Events::Event::updateMeasurements(Json::Value *result, int a2)
{
  int v2; // r5@1
  unsigned __int64 *v3; // r4@2

  v2 = *((_DWORD *)result + 13);
  if ( v2 )
  {
    v3 = (unsigned __int64 *)(a2 + 44);
    do
    {
      result = (Json::Value *)std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Measurement>,std::allocator<std::pair<std::string const,Social::Events::Measurement>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
                                v3,
                                (int **)(v2 + 8));
      if ( result )
        result = Social::Events::Measurement::updateMeasurement(v2 + 16, (int)result + 16);
      v2 = *(_DWORD *)v2;
    }
    while ( v2 );
  }
  return result;
}


signed int __fastcall Social::Events::EventManager::setPlayerCommonProperty<DimensionId>(int a1, int a2, unsigned int a3, int **a4, int *a5)
{
  unsigned int v5; // r7@1
  int *v6; // r10@1
  int v7; // r11@1
  int v8; // r4@1
  int v9; // r11@1
  int v10; // t1@1
  int v11; // r4@1
  int v12; // r0@1
  _DWORD *v13; // r9@2
  int v14; // r6@2
  _DWORD *v15; // r8@4
  bool v16; // zf@7
  int v17; // r0@11
  int v19; // [sp+8h] [bp-40h]@1
  char v20; // [sp+Ch] [bp-3Ch]@12
  unsigned int v21; // [sp+14h] [bp-34h]@1
  int *v22; // [sp+1Ch] [bp-2Ch]@11

  v5 = a3;
  v6 = (int *)a4;
  v7 = a2;
  v8 = a1;
  v19 = a1;
  v21 = a3;
  Social::Events::EventManager::removePlayerCommonProperty(a2, a3, a4);
  sub_21E8AF4((int *)v8, v6);
  Json::Value::Value((Json::Value *)(v8 + 8), *a5);
  v10 = *(_DWORD *)(v7 + 68);
  v9 = v7 + 68;
  v11 = v5 % *(_DWORD *)(v9 + 4);
  v12 = *(_DWORD *)(v10 + 4 * v11);
  if ( !v12 )
    goto LABEL_11;
  v13 = *(_DWORD **)v12;
  v14 = *(_DWORD *)(*(_DWORD *)v12 + 4);
  while ( v14 != v5 )
  {
    v15 = (_DWORD *)*v13;
    if ( *v13 )
    {
      v14 = v15[1];
      v12 = (int)v13;
      v13 = (_DWORD *)*v13;
      if ( v15[1] % *(_DWORD *)(v9 + 4) == v11 )
        continue;
    }
  }
  v16 = v12 == 0;
  if ( v12 )
    v12 = *(_DWORD *)v12;
    v16 = v12 == 0;
  if ( v16 )
LABEL_11:
    v22 = (int *)&v21;
    v17 = j__ZNSt8__detail16_Hashtable_allocISaINS_10_Hash_nodeISt4pairIKjSt13unordered_mapISsN6Social6Events8PropertyESt4hashISsESt8equal_toISsESaIS2_IKSsS7_EEEELb0EEEEE16_M_allocate_nodeIJRKSt21piecewise_construct_tSt5tupleIJRS3_EESO_IJEEEEEPSH_DpOT_(
            v9,
            (int)&unk_262D414,
            &v22);
    v12 = std::_Hashtable<unsigned int,std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>,std::allocator<std::pair<unsigned int const,std::unordered_map<std::string,Social::Events::Property,std::hash<std::string>,std::equal_to<std::string>,std::allocator<std::pair<std::string const,Social::Events::Property>>>>>,std::__detail::_Select1st,std::equal_to<unsigned int>,std::hash<unsigned int>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<false,false,true>>::_M_insert_unique_node(
            v11,
            v5,
            v17);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v20,
           (unsigned __int64 *)(v12 + 8),
           v6,
           v19);
}


int __fastcall Social::MultiplayerServiceManager::onAllClientsExitedLevel(int result, unsigned int a2)
{
  Social::MultiplayerService **v2; // r5@1 OVERLAPPED
  Social::MultiplayerService **v3; // r6@1 OVERLAPPED
  unsigned int i; // r4@1
  Social::MultiplayerService *v5; // t1@2

  *(_QWORD *)&v2 = *(_QWORD *)result;
  for ( i = a2; v3 != v2; result = Social::MultiplayerService::onAllClientsExitedLevel(v5, i) )
  {
    v5 = *v2;
    ++v2;
  }
  return result;
}


void __fastcall Social::MultiplayerXBL::showPlayerProfile(int a1, int *a2)
{
  Social::MultiplayerXBL::showPlayerProfile(a1, a2);
}


unsigned int __fastcall Social::XboxLiveUserManager::signOut(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r5@1
  int v2; // r4@1
  unsigned int v3; // r1@2
  unsigned int *v4; // r0@2
  unsigned int v5; // r2@5
  unsigned int v6; // r3@6
  int v7; // r7@7
  unsigned int *v8; // r6@7
  unsigned int v9; // r1@9
  unsigned int v10; // r1@14
  unsigned int v11; // r0@20
  unsigned int v12; // r0@27
  _DWORD *v13; // r0@30
  unsigned int v14; // r1@32
  __int64 v15; // r1@35
  unsigned int v16; // r0@39
  unsigned int result; // r0@46
  _DWORD *v18; // [sp+4h] [bp-24h]@35
  void (*v19)(void); // [sp+Ch] [bp-1Ch]@30

  v1 = this;
  v2 = *((_DWORD *)this + 3);
  if ( !v2 )
    std::__throw_bad_weak_ptr();
  v3 = *(_DWORD *)(v2 + 4);
  v4 = (unsigned int *)(v2 + 4);
  do
  {
    while ( 1 )
    {
      if ( !v3 )
        std::__throw_bad_weak_ptr();
      __dmb();
      v5 = __ldrex(v4);
      if ( v5 == v3 )
        break;
      __clrex();
      v3 = v5;
    }
    v6 = __strex(v3 + 1, v4);
    v3 = v5;
  }
  while ( v6 );
  __dmb();
  v7 = *((_DWORD *)v1 + 2);
  v8 = (unsigned int *)(v2 + 8);
  if ( &pthread_create )
    __dmb();
    do
      v9 = __ldrex(v8);
    while ( __strex(v9 + 1, v8) );
  else
    ++*v8;
      v10 = __ldrex(v4);
    while ( __strex(v10 - 1, v4) );
    v10 = (*v4)--;
  if ( v10 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 8))(v2);
    if ( &pthread_create )
      do
        v11 = __ldrex(v8);
      while ( __strex(v11 - 1, v8) );
    else
      v11 = (*v8)--;
    if ( v11 == 1 )
      (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
      v12 = __ldrex(v8);
    while ( __strex(v12 + 1, v8) );
  v19 = 0;
  v13 = operator new(8u);
  *v13 = v7;
  v13[1] = v2;
      v14 = __ldrex(v8);
    while ( __strex(v14 + 1, v8) );
  LODWORD(v15) = sub_106A7D8;
  v18 = v13;
  HIDWORD(v15) = sub_106A5FC;
  *(_QWORD *)&v19 = v15;
  MPMCQueue<std::function<void ()(void)>>::push((int)v1 + 168, (int)&v18);
  if ( v19 )
    v19();
      v16 = __ldrex(v8);
    while ( __strex(v16 - 1, v8) );
    v16 = (*v8)--;
  if ( v16 == 1 )
    (*(void (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
      result = __ldrex(v8);
    while ( __strex(result - 1, v8) );
    result = (*v8)--;
  if ( result == 1 )
    result = (*(int (__fastcall **)(int))(*(_DWORD *)v2 + 12))(v2);
  return result;
}


char *__fastcall Social::User::getStorageArea(Social::User *this)
{
  return (char *)this + 36;
}


void __fastcall Social::Events::Event::addProperty<bool>(int a1, int *a2, bool *a3)
{
  Social::Events::Event::addProperty<bool>(a1, a2, a3);
}


void __fastcall Social::MultiplayerXBL::_handleSessionPropertyChanged(Social::MultiplayerXBL *this, const web::json::value *a2)
{
  Social::MultiplayerXBL::_handleSessionPropertyChanged(this, a2);
}


unsigned int __fastcall Social::Events::AggregationEventListener::sendEvents(Social::Events::AggregationEventListener *this, int a2)
{
  int v3; // r8@1
  int i; // r7@1
  int v5; // r5@4
  int j; // r6@4
  unsigned int result; // r0@8
  int k; // r6@11
  int l; // r5@14
  int v14; // r7@14
  int v15; // [sp+0h] [bp-28h]@17
  int v16; // [sp+8h] [bp-20h]@10

  _R4 = this;
  v3 = a2;
  for ( i = *((_DWORD *)this + 3); i; i = *(_DWORD *)i )
  {
    v5 = *(_QWORD *)(i + 8) >> 32;
    for ( j = *(_QWORD *)(i + 8); v5 != j; j += 72 )
      (*(void (__fastcall **)(Social::Events::AggregationEventListener *, int))(*(_DWORD *)_R4 + 20))(_R4, j);
  }
  j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)_R4 + 4);
  if ( v3 )
    goto LABEL_20;
  result = *((_DWORD *)_R4 + 15);
  if ( result )
    if ( result > *((_DWORD *)_R4 + 18) )
      goto LABEL_20;
    sub_21E034C(&v16);
    result = j___aeabi_l2d(v16 - *((_DWORD *)_R4 + 22), (*(_QWORD *)&v16 - *((_QWORD *)_R4 + 11)) >> 32);
    __asm
    {
      VLDR            S0, [R4,#0x54]
      VMOV            D2, R0, R1
      VLDR            D1, =1.0e-9
      VCVT.F64.U32    D0, S0
      VMUL.F64        D1, D2, D1
      VCMPE.F64       D1, D0
      VMRS            APSR_nzcv, FPSCR
    }
    if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
LABEL_20:
      for ( k = *((_DWORD *)_R4 + 10); k; k = *(_DWORD *)k )
      {
        v14 = *(_QWORD *)(k + 8) >> 32;
        for ( l = *(_QWORD *)(k + 8); v14 != l; l += 72 )
          (*(void (__fastcall **)(Social::Events::AggregationEventListener *, int))(*(_DWORD *)_R4 + 20))(_R4, l);
      }
      j_std::_Hashtable<std::string,std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>,std::allocator<std::pair<std::string const,std::vector<Social::Events::Event,std::allocator<Social::Events::Event>>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::clear((int)_R4 + 32);
      sub_21E034C(&v15);
      *((_QWORD *)_R4 + 11) = *(_QWORD *)&v15;
      result = 0;
      *((_DWORD *)_R4 + 15) = 0;
  return result;
}


unsigned int *__fastcall Social::UserManager::getPrimaryUser(Social::UserManager *this, int a2)
{
  int v2; // r5@1
  Social::UserManager *v3; // r4@1
  __int64 v4; // r6@1
  bool v5; // zf@1
  unsigned int *result; // r0@6
  unsigned int v7; // r1@11

  v2 = a2;
  v3 = this;
  v4 = *(_QWORD *)(a2 + 8);
  v5 = HIDWORD(v4) == (_DWORD)v4;
  if ( HIDWORD(v4) != (_DWORD)v4 )
    v5 = (_DWORD)v4 == HIDWORD(v4);
  if ( v5 )
  {
LABEL_6:
    result = 0;
    *(_DWORD *)v3 = 0;
    *((_DWORD *)v3 + 1) = 0;
  }
  else
    while ( Social::User::getGameControllerId(*(Social::User **)v4) != *(_DWORD *)(v2 + 44) )
    {
      LODWORD(v4) = v4 + 8;
      if ( HIDWORD(v4) == (_DWORD)v4 )
        goto LABEL_6;
    }
    *(_DWORD *)v3 = *(_DWORD *)v4;
    result = *(unsigned int **)(v4 + 4);
    *((_DWORD *)v3 + 1) = result;
    if ( result )
      ++result;
      if ( &pthread_create )
      {
        __dmb();
        do
          v7 = __ldrex(result);
        while ( __strex(v7 + 1, result) );
      }
      else
        ++*result;
  return result;
}


int __fastcall Social::XboxLiveUserManager::isSignedIn(Social::XboxLiveUserManager *this)
{
  Social::XboxLiveUserManager *v1; // r4@1
  xbox::services::system::xbox_live_user *v2; // r0@1
  bool v3; // zf@1
  unsigned int v4; // r0@5
  int result; // r0@7

  v1 = this;
  v2 = (xbox::services::system::xbox_live_user *)*((_DWORD *)this + 34);
  v3 = v2 == 0;
  if ( v2 )
    v3 = *((_DWORD *)v1 + 36) == 0;
  result = 0;
  if ( !v3 && xbox::services::system::xbox_live_user::is_signed_in(v2) == 1 )
  {
    v4 = *((_WORD *)v1 + 62);
    if ( v4 <= 0xFF && !(_BYTE)v4 )
      result = 1;
  }
  return result;
}


int __fastcall Social::MultiplayerGameInfo::getConnectionsAsJson(Social::MultiplayerGameInfo *this, web::json::value *a2)
{
  Social::MultiplayerGameInfo *v2; // r4@1
  int *v3; // r8@1
  Social::GameConnectionInfo *v4; // r4@1
  Social::GameConnectionInfo *v5; // r5@1
  __int64 v6; // kr00_8@1
  int v7; // r6@2
  int *v8; // r0@3
  int result; // r0@6
  int v10; // [sp+4h] [bp-24h]@3
  int v11; // [sp+8h] [bp-20h]@1

  v2 = this;
  v3 = (int *)a2;
  web::json::value::array((web::json::value *)&v11);
  v6 = *(_QWORD *)v2;
  v4 = (Social::GameConnectionInfo *)(*(_QWORD *)v2 >> 32);
  v5 = (Social::GameConnectionInfo *)v6;
  if ( (Social::GameConnectionInfo *)v6 != v4 )
  {
    v7 = 0;
    do
    {
      web::json::value::value((web::json::value *)&v10);
      Social::GameConnectionInfo::toJson(v5, (web::json::value *)&v10);
      v8 = (int *)web::json::value::operator[]((int)&v11);
      web::json::value::operator=(v8, &v10);
      ++v7;
      if ( v10 )
        (*(void (**)(void))(*(_DWORD *)v10 + 96))();
      v5 = (Social::GameConnectionInfo *)((char *)v5 + 60);
    }
    while ( v4 != v5 );
  }
  web::json::value::operator=(v3, &v11);
  result = v11;
  if ( v11 )
    result = (*(int (**)(void))(*(_DWORD *)v11 + 96))();
  return result;
}


void __fastcall Social::GameConnectionInfo::fromJson(Social::GameConnectionInfo *this, const web::json::value *a2)
{
  Social::GameConnectionInfo::fromJson(this, a2);
}


Social::GameConnectionInfo *__fastcall Social::GameConnectionInfo::GameConnectionInfo(Social::GameConnectionInfo *this)
{
  Social::GameConnectionInfo *v1; // r5@1
  __int64 v2; // r0@1

  v1 = this;
  *(_WORD *)this = -1;
  sub_DA7364((void **)this + 1, (const char *)&unk_257BC67);
  sub_DA7364((void **)v1 + 2, (const char *)&unk_257BC67);
  *((_DWORD *)v1 + 3) = 0;
  sub_DA7364((void **)v1 + 4, (const char *)&unk_257BC67);
  LODWORD(v2) = (char *)v1 + 20;
  ThirdPartyInfo::ThirdPartyInfo(v2);
  return v1;
}


void __fastcall Social::Events::AutomationEventLogger::AutomationEventLogger(__int64 a1)
{
  Social::Events::AutomationEventLogger::AutomationEventLogger(a1);
}


unsigned int *__fastcall Social::XboxLiveUserManager::_updateUserMuteWithXuid(int a1, int **a2, int a3)
{
  int v3; // r5@1
  unsigned int *result; // r0@1
  int v5; // r4@1
  unsigned int v6; // r1@2
  unsigned int *v7; // r0@2
  unsigned int v8; // r2@5
  unsigned int v9; // r3@6
  int v10; // r1@7
  bool v11; // zf@7
  signed int v12; // r2@10
  unsigned int v13; // r1@15
  unsigned int *v14; // r5@19
  unsigned int v15; // r0@21
  unsigned int *v16; // r2@27
  unsigned int v17; // r1@29
  int v18; // [sp+0h] [bp-18h]@1
  int v19; // [sp+4h] [bp-14h]@1

  v3 = a3;
  result = Social::XboxLiveUserManager::_getUserProfileDataWithXuid((int)&v18, a1, a2);
  v5 = v19;
  if ( v19 )
  {
    v6 = *(_DWORD *)(v19 + 4);
    v7 = (unsigned int *)(v19 + 4);
    while ( v6 )
    {
      __dmb();
      v8 = __ldrex(v7);
      if ( v8 == v6 )
      {
        v9 = __strex(v6 + 1, v7);
        v6 = v8;
        if ( !v9 )
        {
          __dmb();
          v10 = *v7;
          v11 = *v7 == 0;
          if ( *v7 )
          {
            v10 = v18;
            v11 = v18 == 0;
          }
          if ( !v11 )
            v12 = 2;
            if ( v3 )
              v12 = 1;
            *(_DWORD *)(v10 + 24) = v12;
          if ( &pthread_create )
            __dmb();
            do
              v13 = __ldrex(v7);
            while ( __strex(v13 - 1, v7) );
          else
            v13 = (*v7)--;
          if ( v13 == 1 )
            v14 = (unsigned int *)(v5 + 8);
            (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
            if ( &pthread_create )
            {
              __dmb();
              do
                v15 = __ldrex(v14);
              while ( __strex(v15 - 1, v14) );
            }
            else
              v15 = (*v14)--;
            if ( v15 == 1 )
              (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
          break;
        }
      }
      else
        __clrex();
    }
    result = (unsigned int *)v19;
    if ( v19 )
      v16 = (unsigned int *)(v19 + 8);
      if ( &pthread_create )
        __dmb();
        do
          v17 = __ldrex(v16);
        while ( __strex(v17 - 1, v16) );
        v17 = (*v16)--;
      if ( v17 == 1 )
        result = (unsigned int *)(*(int (**)(void))(*result + 12))();
  }
  return result;
}


void __fastcall Social::MultiplayerXBL::setInviteHandle(int a1, int *a2, int a3)
{
  Social::MultiplayerXBL::setInviteHandle(a1, a2, a3);
}


unsigned int __fastcall Social::UserManager::isPrimaryUserReady(Social::UserManager *this)
{
  Social::UserManager *v1; // r4@1
  void *v2; // r0@2
  int v3; // r0@4
  Social::User **v4; // r5@4 OVERLAPPED
  Social::User **v5; // r6@4 OVERLAPPED
  bool v6; // zf@5
  int v7; // r4@10
  Social::User *v8; // r0@10
  Social::XboxLiveUserManager *v9; // r0@11
  unsigned int v10; // r5@11
  unsigned int *v11; // r1@12
  unsigned int v12; // r0@14
  bool v13; // zf@16
  Social::User *v14; // r0@21
  unsigned int *v15; // r1@23
  unsigned int v16; // r0@25
  unsigned int *v17; // r6@29
  unsigned int v18; // r0@31
  unsigned int *v20; // r1@44
  unsigned int v21; // r2@46
  unsigned int *v22; // r1@49
  unsigned int v23; // r2@51

  v1 = this;
  if ( *(_DWORD *)ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService) )
    v2 = ThreadLocal<AppPlatform *>::getLocal((int)&ServiceLocator<AppPlatform>::mService);
  else
    v2 = &ServiceLocator<AppPlatform>::mDefaultService;
  v3 = (*(int (**)(void))(**(_DWORD **)v2 + 640))();
  *(_QWORD *)&v4 = *((_QWORD *)v1 + 1);
  if ( v3 == 1 )
  {
    v6 = v5 == v4;
    if ( v5 != v4 )
      v6 = v4 == v5;
    if ( v6 )
    {
LABEL_10:
      v7 = 0;
      v8 = 0;
    }
    else
      while ( Social::User::getGameControllerId(*v4) != *((_DWORD *)v1 + 11) )
      {
        v4 += 2;
        if ( v5 == v4 )
          goto LABEL_10;
      }
      v7 = *(_QWORD *)v4 >> 32;
      v8 = (Social::User *)*(_QWORD *)v4;
      if ( v7 )
        v20 = (unsigned int *)(v7 + 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v21 = __ldrex(v20);
          while ( __strex(v21 + 1, v20) );
        }
        else
          ++*v20;
      else
        v7 = 0;
    v9 = (Social::XboxLiveUserManager *)Social::User::getLiveUser(v8);
    v10 = Social::XboxLiveUserManager::isSignedIn(v9);
    if ( v7 )
      v11 = (unsigned int *)(v7 + 4);
      if ( &pthread_create )
        __dmb();
        do
          v12 = __ldrex(v11);
        while ( __strex(v12 - 1, v11) );
        v12 = (*v11)--;
      if ( v12 == 1 )
        v17 = (unsigned int *)(v7 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 8))(v7);
            v18 = __ldrex(v17);
          while ( __strex(v18 - 1, v17) );
          goto LABEL_40;
        goto LABEL_39;
  }
    v13 = v5 == v4;
      v13 = v4 == v5;
    if ( v13 )
LABEL_21:
      v14 = 0;
          goto LABEL_21;
      v14 = (Social::User *)*(_QWORD *)v4;
        v22 = (unsigned int *)(v7 + 4);
            v23 = __ldrex(v22);
          while ( __strex(v23 + 1, v22) );
          ++*v22;
    v10 = Social::User::isReady(v14);
      v15 = (unsigned int *)(v7 + 4);
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        v16 = (*v15)--;
      if ( v16 == 1 )
LABEL_40:
          if ( v18 == 1 )
            (*(void (__fastcall **)(int))(*(_DWORD *)v7 + 12))(v7);
          return v10;
LABEL_39:
        v18 = (*v17)--;
        goto LABEL_40;
  return v10;
}


unsigned __int64 *__fastcall Social::MultiplayerServiceManager::invitePlayers(unsigned __int64 *result, int a2, unsigned __int64 *a3)
{
  Social::MultiplayerService **v3; // r4@1
  Social::MultiplayerService **v4; // r6@1
  unsigned __int64 *v5; // r5@1
  int v6; // r7@2

  v4 = (Social::MultiplayerService **)(*result >> 32);
  v3 = (Social::MultiplayerService **)*result;
  v5 = a3;
  if ( v3 != v4 )
  {
    while ( 1 )
    {
      v6 = (int)(v3 + 1);
      result = (unsigned __int64 *)Social::MultiplayerService::getServiceId(*v3);
      if ( result == v5 )
        break;
      ++v3;
      if ( v4 == (Social::MultiplayerService **)v6 )
        return result;
    }
    result = (unsigned __int64 *)(*(int (**)(void))(*(_DWORD *)*v3 + 72))();
  }
  return result;
}


signed int __fastcall Social::XboxLiveUserManager::hasNeverVisitedBiome(Social::XboxLiveUserManager *this, int a2)
{
  Social::XboxLiveUserManager *v2; // r4@1
  int v3; // r5@1
  xbox::services::system::xbox_live_user *v4; // r0@1
  bool v5; // zf@1
  unsigned int v6; // r1@5
  signed int result; // r0@5
  int *v8; // r0@7
  _BYTE *v9; // r6@7
  signed int v10; // r12@9
  int v11; // r2@9
  int v12; // r3@9
  int v13; // r7@10
  bool v14; // zf@11
  int *v15; // r3@11
  int v16; // r1@14
  bool v17; // zf@14
  int v18; // r3@19
  unsigned int v19; // r1@32
  char *v20; // r8@32
  unsigned int v21; // r2@34
  unsigned int v22; // r7@34
  int v23; // r5@41
  int v24; // r5@43

  v2 = this;
  v3 = a2;
  v4 = (xbox::services::system::xbox_live_user *)*((_DWORD *)this + 34);
  v5 = v4 == 0;
  if ( v4 )
    v5 = *((_DWORD *)v2 + 36) == 0;
  if ( v5 || xbox::services::system::xbox_live_user::is_signed_in(v4) != 1 )
    return 0;
  v6 = *((_WORD *)v2 + 62);
  result = 0;
  if ( v6 <= 0xFF && !(_BYTE)v6 )
  {
    v8 = (int *)(*((_QWORD *)v2 + 4) >> 32);
    v9 = (_BYTE *)*((_QWORD *)v2 + 4);
    if ( v3 > 127 )
      v3 -= 128;
    v10 = (char *)v8 - v9;
    v11 = *((_QWORD *)v2 + 4);
    v12 = ((char *)v8 - v9) >> 4;
    if ( v12 >= 1 )
    {
      v13 = v12 + 1;
      v11 = *((_QWORD *)v2 + 4);
      do
      {
        v14 = *(_DWORD *)v11 == v3;
        v15 = (int *)v11;
        if ( *(_DWORD *)v11 != v3 )
        {
          v15 = (int *)(v11 + 4);
          v14 = *(_DWORD *)(v11 + 4) == v3;
        }
        if ( v14 )
          break;
        v15 = (int *)(v11 + 8);
        v16 = *(_DWORD *)(v11 + 8);
        v17 = v16 == v3;
        if ( v16 != v3 )
          v15 = (int *)(v11 + 12);
          v17 = *(_DWORD *)(v11 + 12) == v3;
        if ( v17 )
        --v13;
        v11 += 16;
      }
      while ( v13 > 1 );
LABEL_28:
      if ( v15 != v8 )
        return 0;
      goto LABEL_30;
    }
    if ( 1 == ((signed int)v8 - v11) >> 2 )
      v15 = (int *)v11;
    else
      v18 = ((signed int)v8 - v11) >> 2;
      if ( v18 == 2 )
      else
        if ( v18 != 3 )
          goto LABEL_30;
        if ( *(_DWORD *)v11 == v3 )
          goto LABEL_28;
        v15 = (int *)(v11 + 4);
      if ( *v15 == v3 )
        goto LABEL_28;
      ++v15;
    if ( *v15 == v3 )
      goto LABEL_28;
LABEL_30:
    if ( v8 == *((int **)v2 + 10) )
      v19 = v10 >> 2;
      v20 = 0;
      if ( !(v10 >> 2) )
        v19 = 1;
      v21 = v19 + (v10 >> 2);
      v22 = v19 + (v10 >> 2);
      if ( 0 != v21 >> 30 )
        v22 = 0x3FFFFFFF;
      if ( v21 < v19 )
      if ( v22 )
        if ( v22 >= 0x40000000 )
          sub_119C874();
        v20 = (char *)operator new(4 * v22);
        v8 = (int *)(*((_QWORD *)v2 + 4) >> 32);
        v9 = (_BYTE *)*((_QWORD *)v2 + 4);
      *(_DWORD *)&v20[(char *)v8 - v9] = v3;
      v23 = (int)&v20[(char *)v8 - v9];
      if ( 0 != ((char *)v8 - v9) >> 2 )
        _aeabi_memmove4(v20, v9);
      v24 = v23 + 4;
      if ( v9 )
        operator delete(v9);
      *((_DWORD *)v2 + 8) = v20;
      *((_DWORD *)v2 + 9) = v24;
      *((_DWORD *)v2 + 10) = &v20[4 * v22];
      *v8 = v3;
      *((_DWORD *)v2 + 9) = v8 + 1;
    result = 1;
  }
  return result;
}


int __fastcall Social::MultiplayerServiceManager::getSessionWasCreated(int a1, int a2)
{
  Social::MultiplayerService **v2; // r5@1
  Social::MultiplayerService **v3; // r6@1
  int v4; // r4@1
  int v5; // r7@2
  signed int v6; // r1@4

  v2 = (Social::MultiplayerService **)(*(_QWORD *)a1 >> 32);
  v3 = (Social::MultiplayerService **)*(_QWORD *)a1;
  v4 = a2;
  if ( v3 == v2 )
  {
LABEL_4:
    v6 = 0;
  }
  else
    while ( 1 )
    {
      v5 = (int)(v3 + 1);
      a1 = Social::MultiplayerService::getServiceId(*v3);
      if ( a1 == v4 )
        break;
      ++v3;
      if ( v2 == (Social::MultiplayerService **)v5 )
        goto LABEL_4;
    }
    a1 = (*(int (**)(void))(*(_DWORD *)*v3 + 148))();
    v6 = 1;
  return a1 & v6;
}


void __fastcall Social::MultiplayerXBL::sendRealmsWhitelistNotification(int a1, unsigned __int64 *a2)
{
  unsigned __int64 *v2; // r10@1
  int v3; // r8@1
  void *v4; // r0@2
  void *v5; // r0@3
  void *v6; // r0@4
  void *v7; // r0@5
  void *v8; // r0@6
  int v9; // r0@7
  void *v10; // r0@7
  void *v11; // r0@8
  int v12; // r6@9
  unsigned int *v13; // r1@10
  unsigned int v14; // r0@12
  unsigned int *v15; // r4@16
  unsigned int v16; // r0@18
  int v17; // r4@23
  int v18; // r7@23
  void *v19; // r2@23
  int v20; // r6@23
  unsigned int v21; // r5@23
  int v22; // r2@26
  void *v23; // r4@26
  void *v24; // r6@26
  unsigned int *v25; // r2@28
  signed int v26; // r1@30
  int *v27; // r0@36
  int v28; // r6@41
  unsigned int *v29; // r1@42
  unsigned int v30; // r0@44
  unsigned int *v31; // r4@48
  unsigned int v32; // r0@50
  const web::json::value *v33; // r4@55
  void *v34; // r0@55
  int v35; // r6@56
  unsigned int *v36; // r1@57
  unsigned int v37; // r0@59
  unsigned int *v38; // r4@63
  unsigned int v39; // r0@65
  int v40; // r0@72
  char *v41; // r1@72
  unsigned int *v42; // r0@73
  unsigned int v43; // r2@75
  unsigned __int64 v44; // r0@78
  char *v45; // r6@78
  unsigned int v46; // r4@78
  int v47; // r3@81
  unsigned int *v48; // r0@82
  unsigned int v49; // r1@84
  int v50; // r4@87
  unsigned int *v51; // r1@88
  unsigned int v52; // r0@90
  unsigned int *v53; // r5@94
  unsigned int v54; // r0@96
  void *v55; // r4@101
  unsigned int *v56; // r1@102
  unsigned int v57; // r0@104
  unsigned int *v58; // r5@108
  unsigned int v59; // r0@110
  char *v60; // r4@115
  int v61; // r6@115
  unsigned int *v62; // r2@117
  signed int v63; // r1@119
  int *v64; // r0@125
  int v65; // r4@130
  unsigned int *v66; // r1@131
  unsigned int v67; // r0@133
  unsigned int *v68; // r5@137
  unsigned int v69; // r0@139
  void *v70; // r4@144
  unsigned int *v71; // r1@145
  unsigned int v72; // r0@147
  unsigned int *v73; // r5@151
  unsigned int v74; // r0@153
  int v75; // r4@158
  unsigned int *v76; // r1@159
  unsigned int v77; // r0@161
  unsigned int *v78; // r5@165
  unsigned int v79; // r0@167
  int v80; // r4@172
  unsigned int *v81; // r1@173
  unsigned int v82; // r0@175
  unsigned int *v83; // r5@179
  unsigned int v84; // r0@181
  void *v85; // r4@186
  void *v86; // r6@186
  unsigned int *v87; // r2@188
  signed int v88; // r1@190
  int *v89; // r0@196
  void *v90; // r4@201
  unsigned int *v91; // r1@202
  unsigned int v92; // r0@204
  unsigned int *v93; // r5@208
  unsigned int v94; // r0@210
  void *v95; // r0@215
  void *v96; // r0@216
  void *v97; // r0@217
  void *v98; // r0@218
  unsigned int *v99; // r2@220
  signed int v100; // r1@222
  unsigned int *v101; // r2@224
  signed int v102; // r1@226
  unsigned int *v103; // r2@228
  signed int v104; // r1@230
  unsigned int *v105; // r2@232
  signed int v106; // r1@234
  unsigned int *v107; // r2@236
  signed int v108; // r1@238
  unsigned int *v109; // r2@240
  signed int v110; // r1@242
  unsigned int *v111; // r2@244
  signed int v112; // r1@246
  unsigned int *v113; // r2@248
  signed int v114; // r1@250
  unsigned int *v115; // r2@252
  signed int v116; // r1@254
  unsigned int *v117; // r2@256
  signed int v118; // r1@258
  unsigned int *v119; // r2@260
  signed int v120; // r1@262
  unsigned int *v121; // r2@264
  signed int v122; // r1@266
  void *v123; // [sp+0h] [bp-108h]@55
  int v124; // [sp+4h] [bp-104h]@55
  int v125; // [sp+8h] [bp-100h]@0
  char *v126; // [sp+Ch] [bp-FCh]@78
  int v127; // [sp+10h] [bp-F8h]@78
  int v128; // [sp+14h] [bp-F4h]@78
  int v129; // [sp+18h] [bp-F0h]@81
  int v130; // [sp+1Ch] [bp-ECh]@81
  void *v131; // [sp+20h] [bp-E8h]@81
  int v132; // [sp+24h] [bp-E4h]@72
  void *v133; // [sp+28h] [bp-E0h]@72
  Social::User *v134; // [sp+2Ch] [bp-DCh]@72
  int v135; // [sp+30h] [bp-D8h]@172
  xbox::services::xbox_live_context *v136; // [sp+34h] [bp-D4h]@72
  int v137; // [sp+38h] [bp-D0h]@158
  char v138; // [sp+3Ch] [bp-CCh]@78
  int v139; // [sp+40h] [bp-C8h]@130
  char v140; // [sp+44h] [bp-C4h]@87
  int v141; // [sp+48h] [bp-C0h]@87
  char v142; // [sp+4Ch] [bp-BCh]@72
  int v143; // [sp+54h] [bp-B4h]@55
  char v144; // [sp+58h] [bp-B0h]@55
  int v145; // [sp+5Ch] [bp-ACh]@56
  int v146; // [sp+68h] [bp-A0h]@55
  __int64 ptr; // [sp+6Ch] [bp-9Ch]@23
  unsigned int v148; // [sp+74h] [bp-94h]@23
  int v149; // [sp+78h] [bp-90h]@23
  int v150; // [sp+7Ch] [bp-8Ch]@41
  __int64 v151; // [sp+80h] [bp-88h]@23
  int v152; // [sp+88h] [bp-80h]@23
  Social::User *v153; // [sp+8Ch] [bp-7Ch]@7
  int v154; // [sp+90h] [bp-78h]@9
  int v155; // [sp+94h] [bp-74h]@7
  int v156; // [sp+98h] [bp-70h]@7
  int v157; // [sp+9Ch] [bp-6Ch]@7
  void *v158; // [sp+A0h] [bp-68h]@72
  int v159; // [sp+A4h] [bp-64h]@3
  int v160; // [sp+A8h] [bp-60h]@3
  int v161; // [sp+ACh] [bp-5Ch]@3
  int v162; // [sp+B0h] [bp-58h]@3
  int v163; // [sp+B4h] [bp-54h]@3
  int v164; // [sp+B8h] [bp-50h]@216
  int v165; // [sp+BCh] [bp-4Ch]@215
  char v166; // [sp+C0h] [bp-48h]@2
  int v167; // [sp+D4h] [bp-34h]@2
  int v168; // [sp+D8h] [bp-30h]@2
  char v169; // [sp+DCh] [bp-2Ch]@7

  v2 = a2;
  v3 = a1;
  if ( *a2 >> 32 != (unsigned int)*a2 )
  {
    Crypto::Random::generateUUID((int)&v166);
    mce::UUID::asString((mce::UUID *)&v167);
    utility::conversions::to_string_t(&v168, &v167);
    v4 = (void *)(v167 - 12);
    if ( (int *)(v167 - 12) != &dword_28898C0 )
    {
      v99 = (unsigned int *)(v167 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v100 = __ldrex(v99);
        while ( __strex(v100 - 1, v99) );
      }
      else
        v100 = (*v99)--;
      if ( v100 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v4);
    }
    Social::XboxLiveUserManager::getMPScid((Social::XboxLiveUserManager *)&v161);
    utility::conversions::to_string_t(&v162, &v161);
    sub_119C854(&v160, &dword_27D4E44);
    sub_119C854(&v159, &v168);
    xbox::services::multiplayer::multiplayer_session_reference::multiplayer_session_reference(
      (int)&v163,
      &v162,
      &v160,
      &v159);
    v5 = (void *)(v159 - 12);
    if ( (int *)(v159 - 12) != &dword_28898C0 )
      v101 = (unsigned int *)(v159 - 4);
          v102 = __ldrex(v101);
        while ( __strex(v102 - 1, v101) );
        v102 = (*v101)--;
      if ( v102 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v5);
    v6 = (void *)(v160 - 12);
    if ( (int *)(v160 - 12) != &dword_28898C0 )
      v103 = (unsigned int *)(v160 - 4);
          v104 = __ldrex(v103);
        while ( __strex(v104 - 1, v103) );
        v104 = (*v103)--;
      if ( v104 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v6);
    v7 = (void *)(v162 - 12);
    if ( (int *)(v162 - 12) != &dword_28898C0 )
      v105 = (unsigned int *)(v162 - 4);
          v106 = __ldrex(v105);
        while ( __strex(v106 - 1, v105) );
        v106 = (*v105)--;
      if ( v106 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v7);
    v8 = (void *)(v161 - 12);
    if ( (int *)(v161 - 12) != &dword_28898C0 )
      v107 = (unsigned int *)(v161 - 4);
          v108 = __ldrex(v107);
        while ( __strex(v108 - 1, v107) );
        v108 = (*v107)--;
      if ( v108 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v8);
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v153, *(_DWORD *)(v3 + 44));
    v9 = Social::User::getLiveUser(v153);
    Social::XboxLiveUserManager::getCurrentXUID((Social::XboxLiveUserManager *)&v155, v9);
    utility::conversions::to_string_t(&v156, &v155);
    std::__shared_ptr<xbox::services::multiplayer::multiplayer_session,(__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<xbox::services::multiplayer::multiplayer_session>,std::string,xbox::services::multiplayer::multiplayer_session_reference &>(
      (int)&v157,
      (int)&v169,
      &v156,
      (const xbox::services::multiplayer::multiplayer_session_reference *)&v163);
    v10 = (void *)(v156 - 12);
    if ( (int *)(v156 - 12) != &dword_28898C0 )
      v109 = (unsigned int *)(v156 - 4);
          v110 = __ldrex(v109);
        while ( __strex(v110 - 1, v109) );
        v110 = (*v109)--;
      if ( v110 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v10);
    v11 = (void *)(v155 - 12);
    if ( (int *)(v155 - 12) != &dword_28898C0 )
      v111 = (unsigned int *)(v155 - 4);
          v112 = __ldrex(v111);
        while ( __strex(v112 - 1, v111) );
        v112 = (*v111)--;
      if ( v112 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v11);
    v12 = v154;
    if ( v154 )
      v13 = (unsigned int *)(v154 + 4);
          v14 = __ldrex(v13);
        while ( __strex(v14 - 1, v13) );
        v14 = (*v13)--;
      if ( v14 == 1 )
        v15 = (unsigned int *)(v12 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 8))(v12);
        if ( &pthread_create )
        {
          __dmb();
          do
            v16 = __ldrex(v15);
          while ( __strex(v16 - 1, v15) );
        }
        else
          v16 = (*v15)--;
        if ( v16 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v12 + 12))(v12);
    v151 = 0LL;
    v152 = 0;
    std::vector<std::string,std::allocator<std::string>>::_M_emplace_back_aux<char const(&)[6]>(
      (unsigned __int64 *)&v151,
      "REALM");
    xbox::services::multiplayer::multiplayer_session::session_properties(
      (xbox::services::multiplayer::multiplayer_session *)&v149,
      v157);
    v18 = HIDWORD(v151);
    v17 = v151;
    v19 = 0;
    v20 = v149;
    ptr = 0LL;
    v148 = 0;
    v21 = (HIDWORD(v151) - (signed int)v151) >> 2;
    if ( v21 )
      if ( v21 >= 0x40000000 )
        sub_119C874();
      v19 = operator new(HIDWORD(v151) - v151);
    ptr = __PAIR__(
            std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,std::string *>(
              v17,
              v18,
              (int)v19),
            (unsigned int)v19);
    v148 = v22 + 4 * v21;
    xbox::services::multiplayer::multiplayer_session_properties::set_keywords(v20, (int)&ptr);
    v23 = (void *)HIDWORD(ptr);
    v24 = (void *)ptr;
    if ( (_DWORD)ptr != HIDWORD(ptr) )
      do
        v27 = (int *)(*(_DWORD *)v24 - 12);
        if ( v27 != &dword_28898C0 )
          v25 = (unsigned int *)(*(_DWORD *)v24 - 4);
          if ( &pthread_create )
          {
            __dmb();
            do
              v26 = __ldrex(v25);
            while ( __strex(v26 - 1, v25) );
          }
          else
            v26 = (*v25)--;
          if ( v26 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v27);
        v24 = (char *)v24 + 4;
      while ( v24 != v23 );
      v24 = (void *)ptr;
    if ( v24 )
      operator delete(v24);
    v28 = v150;
    if ( v150 )
      v29 = (unsigned int *)(v150 + 4);
          v30 = __ldrex(v29);
        while ( __strex(v30 - 1, v29) );
        v30 = (*v29)--;
      if ( v30 == 1 )
        v31 = (unsigned int *)(v28 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 8))(v28);
            v32 = __ldrex(v31);
          while ( __strex(v32 - 1, v31) );
          v32 = (*v31)--;
        if ( v32 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v28 + 12))(v28);
    v33 = (const web::json::value *)v157;
    web::json::value::null((web::json::value *)&v143);
    xbox::services::multiplayer::multiplayer_session::join(
      (xbox::services::multiplayer::multiplayer_session *)&v144,
      v33,
      (int)&v143,
      1,
      1);
    v34 = (void *)(v146 - 12);
    if ( (int *)(v146 - 12) != &dword_28898C0 )
      v113 = (unsigned int *)(v146 - 4);
          v114 = __ldrex(v113);
        while ( __strex(v114 - 1, v113) );
        v114 = (*v113)--;
      if ( v114 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v34);
    v35 = v145;
    if ( v145 )
      v36 = (unsigned int *)(v145 + 4);
          v37 = __ldrex(v36);
        while ( __strex(v37 - 1, v36) );
        v37 = (*v36)--;
      if ( v37 == 1 )
        v38 = (unsigned int *)(v35 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 8))(v35);
            v39 = __ldrex(v38);
          while ( __strex(v39 - 1, v38) );
          v39 = (*v38)--;
        if ( v39 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v35 + 12))(v35);
    if ( v143 )
      (*(void (**)(void))(*(_DWORD *)v143 + 96))();
    v143 = 0;
    xbox::services::multiplayer::multiplayer_session::set_current_user_status((int)&v142, v157, 1);
    Social::UserManager::getPrimaryUser((Social::UserManager *)&v134, *(_DWORD *)(v3 + 44));
    v40 = Social::User::getLiveUser(v134);
    Social::XboxLiveUserManager::getXblContext((Social::XboxLiveUserManager *)&v136, v40);
    v41 = xbox::services::xbox_live_context::multiplayer_service(v136);
    v132 = v157;
    v133 = v158;
    if ( v158 )
      v42 = (unsigned int *)((char *)v158 + 4);
          v43 = __ldrex(v42);
        while ( __strex(v43 + 1, v42) );
        ++*v42;
    xbox::services::multiplayer::multiplayer_service::write_session(
      (int)&v138,
      (int)v41,
      (xbox::services::multiplayer::multiplayer_session **)&v132,
    v44 = *v2;
    v45 = 0;
    v126 = 0;
    v127 = 0;
    v128 = 0;
    v46 = (HIDWORD(v44) - (signed int)v44) >> 2;
    if ( v46 )
      if ( v46 >= 0x40000000 )
      v45 = (char *)operator new(HIDWORD(v44) - v44);
      v44 = *v2;
    v126 = v45;
    v128 = (int)&v45[4 * v46];
    v127 = std::__uninitialized_copy<false>::__uninit_copy<__gnu_cxx::__normal_iterator<std::string const*,std::vector<std::string,std::allocator<std::string>>>,std::string *>(
             v44,
             SHIDWORD(v44),
             (int)v45);
    v129 = v3;
    v130 = v157;
    v131 = v158;
      v48 = (unsigned int *)((char *)v158 + 4);
          v49 = __ldrex(v48);
        while ( __strex(v49 + 1, v48) );
        ++*v48;
    sub_10072CC((int)&v140, (int)&v138, (int)&v126, v47, v123, v124, v125, (int)v126, v127, v128, v129, v130, v131);
    v50 = v141;
    if ( v141 )
      v51 = (unsigned int *)(v141 + 4);
          v52 = __ldrex(v51);
        while ( __strex(v52 - 1, v51) );
        v52 = (*v51)--;
      if ( v52 == 1 )
        v53 = (unsigned int *)(v50 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v50 + 8))(v50);
            v54 = __ldrex(v53);
          while ( __strex(v54 - 1, v53) );
          v54 = (*v53)--;
        if ( v54 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v50 + 12))(v50);
    v55 = v131;
    if ( v131 )
      v56 = (unsigned int *)((char *)v131 + 4);
          v57 = __ldrex(v56);
        while ( __strex(v57 - 1, v56) );
        v57 = (*v56)--;
      if ( v57 == 1 )
        v58 = (unsigned int *)((char *)v55 + 8);
        (*(void (__fastcall **)(void *))(*(_DWORD *)v55 + 8))(v55);
            v59 = __ldrex(v58);
          while ( __strex(v59 - 1, v58) );
          v59 = (*v58)--;
        if ( v59 == 1 )
          (*(void (__fastcall **)(void *))(*(_DWORD *)v55 + 12))(v55);
    v61 = v127;
    v60 = v126;
    if ( v126 != (char *)v127 )
        v64 = (int *)(*(_DWORD *)v60 - 12);
        if ( v64 != &dword_28898C0 )
          v62 = (unsigned int *)(*(_DWORD *)v60 - 4);
              v63 = __ldrex(v62);
            while ( __strex(v63 - 1, v62) );
            v63 = (*v62)--;
          if ( v63 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v64);
        v60 += 4;
      while ( v60 != (char *)v61 );
      v60 = v126;
    if ( v60 )
      operator delete(v60);
    v65 = v139;
    if ( v139 )
      v66 = (unsigned int *)(v139 + 4);
          v67 = __ldrex(v66);
        while ( __strex(v67 - 1, v66) );
        v67 = (*v66)--;
      if ( v67 == 1 )
        v68 = (unsigned int *)(v65 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v65 + 8))(v65);
            v69 = __ldrex(v68);
          while ( __strex(v69 - 1, v68) );
          v69 = (*v68)--;
        if ( v69 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v65 + 12))(v65);
    v70 = v133;
    if ( v133 )
      v71 = (unsigned int *)((char *)v133 + 4);
          v72 = __ldrex(v71);
        while ( __strex(v72 - 1, v71) );
        v72 = (*v71)--;
      if ( v72 == 1 )
        v73 = (unsigned int *)((char *)v70 + 8);
        (*(void (__fastcall **)(void *))(*(_DWORD *)v70 + 8))(v70);
            v74 = __ldrex(v73);
          while ( __strex(v74 - 1, v73) );
          v74 = (*v73)--;
        if ( v74 == 1 )
          (*(void (__fastcall **)(void *))(*(_DWORD *)v70 + 12))(v70);
    v75 = v137;
    if ( v137 )
      v76 = (unsigned int *)(v137 + 4);
          v77 = __ldrex(v76);
        while ( __strex(v77 - 1, v76) );
        v77 = (*v76)--;
      if ( v77 == 1 )
        v78 = (unsigned int *)(v75 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v75 + 8))(v75);
            v79 = __ldrex(v78);
          while ( __strex(v79 - 1, v78) );
          v79 = (*v78)--;
        if ( v79 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v75 + 12))(v75);
    v80 = v135;
    if ( v135 )
      v81 = (unsigned int *)(v135 + 4);
          v82 = __ldrex(v81);
        while ( __strex(v82 - 1, v81) );
        v82 = (*v81)--;
      if ( v82 == 1 )
        v83 = (unsigned int *)(v80 + 8);
        (*(void (__fastcall **)(int))(*(_DWORD *)v80 + 8))(v80);
            v84 = __ldrex(v83);
          while ( __strex(v84 - 1, v83) );
          v84 = (*v83)--;
        if ( v84 == 1 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v80 + 12))(v80);
    v86 = (void *)HIDWORD(v151);
    v85 = (void *)v151;
    if ( (_DWORD)v151 != HIDWORD(v151) )
        v89 = (int *)(*(_DWORD *)v85 - 12);
        if ( v89 != &dword_28898C0 )
          v87 = (unsigned int *)(*(_DWORD *)v85 - 4);
              v88 = __ldrex(v87);
            while ( __strex(v88 - 1, v87) );
            v88 = (*v87)--;
          if ( v88 <= 0 )
            j_j_j_j_j__ZdlPv_9_1(v89);
        v85 = (char *)v85 + 4;
      while ( v85 != v86 );
      v85 = (void *)v151;
    if ( v85 )
      operator delete(v85);
    v90 = v158;
      v91 = (unsigned int *)((char *)v158 + 4);
          v92 = __ldrex(v91);
        while ( __strex(v92 - 1, v91) );
        v92 = (*v91)--;
      if ( v92 == 1 )
        v93 = (unsigned int *)((char *)v90 + 8);
        (*(void (__fastcall **)(void *))(*(_DWORD *)v90 + 8))(v90);
            v94 = __ldrex(v93);
          while ( __strex(v94 - 1, v93) );
          v94 = (*v93)--;
        if ( v94 == 1 )
          (*(void (__fastcall **)(void *))(*(_DWORD *)v90 + 12))(v90);
    v95 = (void *)(v165 - 12);
    if ( (int *)(v165 - 12) != &dword_28898C0 )
      v115 = (unsigned int *)(v165 - 4);
          v116 = __ldrex(v115);
        while ( __strex(v116 - 1, v115) );
        v116 = (*v115)--;
      if ( v116 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v95);
    v96 = (void *)(v164 - 12);
    if ( (int *)(v164 - 12) != &dword_28898C0 )
      v117 = (unsigned int *)(v164 - 4);
          v118 = __ldrex(v117);
        while ( __strex(v118 - 1, v117) );
        v118 = (*v117)--;
      if ( v118 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v96);
    v97 = (void *)(v163 - 12);
    if ( (int *)(v163 - 12) != &dword_28898C0 )
      v119 = (unsigned int *)(v163 - 4);
          v120 = __ldrex(v119);
        while ( __strex(v120 - 1, v119) );
        v120 = (*v119)--;
      if ( v120 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v97);
    v98 = (void *)(v168 - 12);
    if ( (int *)(v168 - 12) != &dword_28898C0 )
      v121 = (unsigned int *)(v168 - 4);
          v122 = __ldrex(v121);
        while ( __strex(v122 - 1, v121) );
        v122 = (*v121)--;
      if ( v122 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v98);
  }
}


void __fastcall Social::MultiplayerGameInfo::createFromSessionProperties(Social::MultiplayerGameInfo *this, const web::json::value *a2)
{
  Social::MultiplayerGameInfo *v2; // r8@1
  const web::json::value *v3; // r5@1
  char *v4; // r7@1
  int v5; // r6@2
  void *v6; // r0@2
  const void **v7; // r0@4
  int *v8; // r0@4
  void *v9; // r0@4
  void *v10; // r0@5
  void *v11; // r0@6
  int v12; // r6@7
  void *v13; // r0@7
  const void **v14; // r0@9
  int *v15; // r0@9
  void *v16; // r0@9
  void *v17; // r0@10
  void *v18; // r0@11
  int v19; // r6@12
  void *v20; // r0@12
  const void **v21; // r0@14
  int *v22; // r0@14
  void *v23; // r0@14
  void *v24; // r0@15
  void *v25; // r0@16
  int v26; // r6@17
  void *v27; // r0@17
  const void **v28; // r0@19
  int *v29; // r0@19
  void *v30; // r0@19
  void *v31; // r0@20
  void *v32; // r0@21
  int v33; // r6@22
  void *v34; // r0@22
  const void **v35; // r0@24
  int *v36; // r0@24
  void *v37; // r0@24
  void *v38; // r0@25
  void *v39; // r0@26
  int v40; // r6@27
  void *v41; // r0@27
  const void **v42; // r0@29
  int *v43; // r0@29
  void *v44; // r0@29
  void *v45; // r0@30
  void *v46; // r0@31
  int v47; // r6@32
  void *v48; // r0@32
  const void **v49; // r0@34
  int *v50; // r0@34
  void *v51; // r0@34
  void *v52; // r0@35
  void *v53; // r0@36
  const void **v54; // r0@38
  int v55; // r6@38
  void *v56; // r0@38
  unsigned int *v57; // r2@39
  signed int v58; // r1@41
  void *v59; // r0@44
  const void **v60; // r0@46
  int v61; // r0@46
  int v62; // r1@46
  void *v63; // r0@46
  const void **v64; // r0@48
  int v65; // r6@48
  void *v66; // r0@48
  unsigned int *v67; // r2@49
  signed int v68; // r1@51
  void *v69; // r0@54
  const void **v70; // r0@56
  int v71; // r0@56
  int v72; // r1@56
  void *v73; // r0@56
  const void **v74; // r0@58
  int v75; // r6@58
  void *v76; // r0@58
  unsigned int *v77; // r2@59
  signed int v78; // r1@61
  void *v79; // r0@64
  const void **v80; // r0@66
  int v81; // r0@66
  int v82; // r1@66
  void *v83; // r0@66
  const void **v84; // r0@68
  signed int v85; // r4@68
  void *v86; // r0@70
  unsigned int *v87; // r2@71
  signed int v88; // r1@73
  void *v89; // r0@76
  const void **v90; // r0@78
  __int64 v98; // r0@79
  void *v99; // r0@81
  const void **v100; // r0@83
  signed int v101; // r4@83
  void *v102; // r0@85
  unsigned int *v103; // r2@86
  signed int v104; // r1@88
  void *v105; // r0@91
  const void **v106; // r0@93
  int *v107; // r0@93
  void *v108; // r0@93
  void *v109; // r0@94
  void *v110; // r0@95
  const void **v111; // r0@97
  signed int v112; // r4@97
  void *v113; // r0@99
  unsigned int *v114; // r2@100
  signed int v115; // r1@102
  void *v116; // r0@105
  const void **v117; // r0@107
  int *v118; // r0@107
  void *v119; // r0@107
  void *v120; // r0@108
  void *v121; // r0@109
  const void **v122; // r0@111
  signed int v123; // r4@111
  void *v124; // r0@113
  unsigned int *v125; // r2@114
  signed int v126; // r1@116
  void *v127; // r0@119
  const void **v128; // r0@121
  int v132; // r0@122
  int v133; // r1@124
  void *v134; // r0@124
  const void **v135; // r0@126
  int v136; // r6@126
  void *v137; // r0@126
  unsigned int *v138; // r2@127
  signed int v139; // r1@129
  void *v140; // r0@132
  const void **v141; // r0@134
  int v142; // r0@134
  int v143; // r1@134
  void *v144; // r0@134
  const void **v145; // r0@136
  signed int v146; // r4@136
  void *v147; // r0@138
  unsigned int *v148; // r2@139
  signed int v149; // r1@141
  void *v150; // r0@144
  const void **v151; // r0@146
  __int64 *v152; // r0@146
  void *v153; // r0@146
  __int64 v154; // r4@147
  __int64 v155; // kr00_8@148
  int *v156; // r10@149
  unsigned int v157; // r1@149
  int v158; // r0@149
  unsigned int *v159; // r2@166
  signed int v160; // r1@168
  unsigned int *v161; // r2@170
  signed int v162; // r1@172
  unsigned int *v163; // r2@174
  signed int v164; // r1@176
  unsigned int *v165; // r2@178
  signed int v166; // r1@180
  unsigned int *v167; // r2@182
  signed int v168; // r1@184
  unsigned int *v169; // r2@186
  signed int v170; // r1@188
  unsigned int *v171; // r2@190
  signed int v172; // r1@192
  unsigned int *v173; // r2@194
  signed int v174; // r1@196
  unsigned int *v175; // r2@198
  signed int v176; // r1@200
  unsigned int *v177; // r2@202
  signed int v178; // r1@204
  unsigned int *v179; // r2@206
  signed int v180; // r1@208
  unsigned int *v181; // r2@210
  signed int v182; // r1@212
  unsigned int *v183; // r2@214
  signed int v184; // r1@216
  unsigned int *v185; // r2@218
  signed int v186; // r1@220
  unsigned int *v187; // r2@222
  signed int v188; // r1@224
  unsigned int *v189; // r2@226
  signed int v190; // r1@228
  unsigned int *v191; // r2@238
  signed int v192; // r1@240
  unsigned int *v193; // r2@242
  signed int v194; // r1@244
  unsigned int *v195; // r2@246
  signed int v196; // r1@248
  unsigned int *v197; // r2@254
  signed int v198; // r1@256
  unsigned int *v199; // r2@258
  signed int v200; // r1@260
  unsigned int *v201; // r2@262
  signed int v202; // r1@264
  unsigned int *v203; // r2@270
  signed int v204; // r1@272
  unsigned int *v205; // r2@274
  signed int v206; // r1@276
  unsigned int *v207; // r2@278
  signed int v208; // r1@280
  unsigned int *v209; // r2@286
  signed int v210; // r1@288
  unsigned int *v211; // r2@290
  signed int v212; // r1@292
  unsigned int *v213; // r2@294
  signed int v214; // r1@296
  unsigned int *v215; // r2@302
  signed int v216; // r1@304
  unsigned int *v217; // r2@306
  signed int v218; // r1@308
  unsigned int *v219; // r2@310
  signed int v220; // r1@312
  unsigned int *v221; // r2@318
  signed int v222; // r1@320
  unsigned int *v223; // r2@322
  signed int v224; // r1@324
  unsigned int *v225; // r2@326
  signed int v226; // r1@328
  unsigned int *v227; // r2@330
  signed int v228; // r1@332
  unsigned int *v229; // r2@334
  signed int v230; // r1@336
  unsigned int *v231; // r2@338
  signed int v232; // r1@340
  unsigned int *v233; // r2@346
  signed int v234; // r1@348
  unsigned int *v235; // r2@354
  signed int v236; // r1@356
  unsigned int *v237; // r2@362
  signed int v238; // r1@364
  unsigned int *v239; // r2@370
  signed int v240; // r1@372
  unsigned int *v241; // r2@378
  signed int v242; // r1@380
  unsigned int *v243; // r2@382
  signed int v244; // r1@384
  unsigned int *v245; // r2@386
  signed int v246; // r1@388
  unsigned int *v247; // r2@394
  signed int v248; // r1@396
  unsigned int *v249; // r2@398
  signed int v250; // r1@400
  unsigned int *v251; // r2@402
  signed int v252; // r1@404
  unsigned int *v253; // r2@410
  signed int v254; // r1@412
  unsigned int *v255; // r2@418
  signed int v256; // r1@420
  unsigned int *v257; // r2@426
  signed int v258; // r1@428
  int v259; // [sp+4h] [bp-20Ch]@147
  Social::MultiplayerGameInfo *v260; // [sp+8h] [bp-208h]@1
  __int16 v261; // [sp+Ch] [bp-204h]@148
  void *v262; // [sp+10h] [bp-200h]@149
  void *v263; // [sp+14h] [bp-1FCh]@149
  int v264; // [sp+18h] [bp-1F8h]@149
  void *v265; // [sp+1Ch] [bp-1F4h]@149
  int *v266; // [sp+20h] [bp-1F0h]@149
  unsigned int v267; // [sp+24h] [bp-1ECh]@149
  int v268; // [sp+28h] [bp-1E8h]@149
  int v269; // [sp+2Ch] [bp-1E4h]@149
  __int64 v270; // [sp+30h] [bp-1E0h]@149
  int v271; // [sp+38h] [bp-1D8h]@149
  void *v272; // [sp+3Ch] [bp-1D4h]@153
  void *v273; // [sp+40h] [bp-1D0h]@153
  char v274; // [sp+44h] [bp-1CCh]@153
  int v275; // [sp+48h] [bp-1C8h]@148
  int v276; // [sp+50h] [bp-1C0h]@146
  int v277; // [sp+54h] [bp-1BCh]@146
  int v278; // [sp+58h] [bp-1B8h]@147
  int v279; // [sp+64h] [bp-1ACh]@136
  int v280; // [sp+6Ch] [bp-1A4h]@135
  int v281; // [sp+74h] [bp-19Ch]@134
  int v282; // [sp+7Ch] [bp-194h]@126
  int v283; // [sp+84h] [bp-18Ch]@125
  int v284; // [sp+8Ch] [bp-184h]@121
  int v285; // [sp+94h] [bp-17Ch]@111
  int v286; // [sp+9Ch] [bp-174h]@110
  int v287; // [sp+A4h] [bp-16Ch]@107
  int v288; // [sp+A8h] [bp-168h]@107
  int v289; // [sp+ACh] [bp-164h]@107
  int v290; // [sp+B4h] [bp-15Ch]@97
  int v291; // [sp+BCh] [bp-154h]@96
  int v292; // [sp+C4h] [bp-14Ch]@93
  int v293; // [sp+C8h] [bp-148h]@93
  int v294; // [sp+CCh] [bp-144h]@93
  int v295; // [sp+D4h] [bp-13Ch]@83
  int v296; // [sp+DCh] [bp-134h]@82
  int v297; // [sp+E4h] [bp-12Ch]@78
  int v298; // [sp+ECh] [bp-124h]@68
  int v299; // [sp+F4h] [bp-11Ch]@67
  int v300; // [sp+FCh] [bp-114h]@66
  int v301; // [sp+104h] [bp-10Ch]@58
  int v302; // [sp+10Ch] [bp-104h]@57
  int v303; // [sp+114h] [bp-FCh]@56
  int v304; // [sp+11Ch] [bp-F4h]@48
  int v305; // [sp+124h] [bp-ECh]@47
  int v306; // [sp+12Ch] [bp-E4h]@46
  int v307; // [sp+134h] [bp-DCh]@38
  int v308; // [sp+13Ch] [bp-D4h]@37
  int v309; // [sp+144h] [bp-CCh]@34
  int v310; // [sp+148h] [bp-C8h]@34
  int v311; // [sp+14Ch] [bp-C4h]@34
  int v312; // [sp+154h] [bp-BCh]@32
  int v313; // [sp+15Ch] [bp-B4h]@29
  int v314; // [sp+160h] [bp-B0h]@29
  int v315; // [sp+164h] [bp-ACh]@29
  int v316; // [sp+16Ch] [bp-A4h]@27
  int v317; // [sp+174h] [bp-9Ch]@24
  int v318; // [sp+178h] [bp-98h]@24
  int v319; // [sp+17Ch] [bp-94h]@24
  int v320; // [sp+184h] [bp-8Ch]@22
  int v321; // [sp+18Ch] [bp-84h]@19
  int v322; // [sp+190h] [bp-80h]@19
  int v323; // [sp+194h] [bp-7Ch]@19
  int v324; // [sp+19Ch] [bp-74h]@17
  int v325; // [sp+1A4h] [bp-6Ch]@14
  int v326; // [sp+1A8h] [bp-68h]@14
  int v327; // [sp+1ACh] [bp-64h]@14
  int v328; // [sp+1B4h] [bp-5Ch]@12
  int v329; // [sp+1BCh] [bp-54h]@9
  int v330; // [sp+1C0h] [bp-50h]@9
  int v331; // [sp+1C4h] [bp-4Ch]@9
  int v332; // [sp+1CCh] [bp-44h]@7
  int v333; // [sp+1D4h] [bp-3Ch]@4
  int v334; // [sp+1D8h] [bp-38h]@4
  int v335; // [sp+1DCh] [bp-34h]@4
  int v336; // [sp+1E4h] [bp-2Ch]@2

  v2 = this;
  v3 = a2;
  v260 = this;
  *(_DWORD *)this = 0;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = &unk_28898CC;
  *((_DWORD *)this + 4) = &unk_28898CC;
  *((_DWORD *)this + 5) = &unk_28898CC;
  *((_DWORD *)this + 6) = &unk_28898CC;
  *((_DWORD *)this + 7) = &unk_28898CC;
  *((_DWORD *)this + 8) = &unk_28898CC;
  *((_DWORD *)this + 9) = &unk_28898CC;
  *((_DWORD *)this + 10) = &unk_28898CC;
  *((_DWORD *)this + 12) = 0;
  v4 = (char *)this + 48;
  *((_DWORD *)v4 + 1) = 0;
  *((_DWORD *)v4 + 2) = &unk_28898CC;
  *((_DWORD *)v4 + 3) = &unk_28898CC;
  if ( (*(int (**)(void))(**(_DWORD **)a2 + 88))() )
  {
    sub_119C884((void **)&v336, "worldType");
    v5 = (*(int (**)(void))(**(_DWORD **)v3 + 4))();
    v6 = (void *)(v336 - 12);
    if ( (int *)(v336 - 12) != &dword_28898C0 )
    {
      v159 = (unsigned int *)(v336 - 4);
      if ( &pthread_create )
      {
        __dmb();
        do
          v160 = __ldrex(v159);
        while ( __strex(v160 - 1, v159) );
      }
      else
        v160 = (*v159)--;
      if ( v160 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v6);
    }
    if ( v5 == 1 )
      sub_119C884((void **)&v333, "worldType");
      v7 = web::json::value::at((int)v3, (const void **)&v333);
      v8 = (int *)web::json::value::as_string((web::json::value *)v7);
      sub_119C854(&v334, v8);
      utility::conversions::to_utf8string(&v335, &v334);
      xbox::services::user_statistics::service_configuration_statistic::_Set_input_service_configuration_id(
        (int *)v2 + 9,
        &v335);
      v9 = (void *)(v335 - 12);
      if ( (int *)(v335 - 12) != &dword_28898C0 )
        v191 = (unsigned int *)(v335 - 4);
        if ( &pthread_create )
        {
          __dmb();
          do
            v192 = __ldrex(v191);
          while ( __strex(v192 - 1, v191) );
        }
        else
          v192 = (*v191)--;
        if ( v192 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v9);
      v10 = (void *)(v334 - 12);
      if ( (int *)(v334 - 12) != &dword_28898C0 )
        v193 = (unsigned int *)(v334 - 4);
            v194 = __ldrex(v193);
          while ( __strex(v194 - 1, v193) );
          v194 = (*v193)--;
        if ( v194 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v10);
      v11 = (void *)(v333 - 12);
      if ( (int *)(v333 - 12) != &dword_28898C0 )
        v195 = (unsigned int *)(v333 - 4);
            v196 = __ldrex(v195);
          while ( __strex(v196 - 1, v195) );
          v196 = (*v195)--;
        if ( v196 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v11);
    sub_119C884((void **)&v332, "levelId");
    v12 = (*(int (**)(void))(**(_DWORD **)v3 + 4))();
    v13 = (void *)(v332 - 12);
    if ( (int *)(v332 - 12) != &dword_28898C0 )
      v161 = (unsigned int *)(v332 - 4);
          v162 = __ldrex(v161);
        while ( __strex(v162 - 1, v161) );
        v162 = (*v161)--;
      if ( v162 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v13);
    if ( v12 == 1 )
      sub_119C884((void **)&v329, "levelId");
      v14 = web::json::value::at((int)v3, (const void **)&v329);
      v15 = (int *)web::json::value::as_string((web::json::value *)v14);
      sub_119C854(&v330, v15);
      utility::conversions::to_utf8string(&v331, &v330);
        (int *)v2 + 6,
        &v331);
      v16 = (void *)(v331 - 12);
      if ( (int *)(v331 - 12) != &dword_28898C0 )
        v197 = (unsigned int *)(v331 - 4);
            v198 = __ldrex(v197);
          while ( __strex(v198 - 1, v197) );
          v198 = (*v197)--;
        if ( v198 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v16);
      v17 = (void *)(v330 - 12);
      if ( (int *)(v330 - 12) != &dword_28898C0 )
        v199 = (unsigned int *)(v330 - 4);
            v200 = __ldrex(v199);
          while ( __strex(v200 - 1, v199) );
          v200 = (*v199)--;
        if ( v200 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v17);
      v18 = (void *)(v329 - 12);
      if ( (int *)(v329 - 12) != &dword_28898C0 )
        v201 = (unsigned int *)(v329 - 4);
            v202 = __ldrex(v201);
          while ( __strex(v202 - 1, v201) );
          v202 = (*v201)--;
        if ( v202 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v18);
    sub_119C884((void **)&v328, "worldName");
    v19 = (*(int (**)(void))(**(_DWORD **)v3 + 4))();
    v20 = (void *)(v328 - 12);
    if ( (int *)(v328 - 12) != &dword_28898C0 )
      v163 = (unsigned int *)(v328 - 4);
          v164 = __ldrex(v163);
        while ( __strex(v164 - 1, v163) );
        v164 = (*v163)--;
      if ( v164 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v20);
    if ( v19 == 1 )
      sub_119C884((void **)&v325, "worldName");
      v21 = web::json::value::at((int)v3, (const void **)&v325);
      v22 = (int *)web::json::value::as_string((web::json::value *)v21);
      sub_119C854(&v326, v22);
      utility::conversions::to_utf8string(&v327, &v326);
        (int *)v2 + 8,
        &v327);
      v23 = (void *)(v327 - 12);
      if ( (int *)(v327 - 12) != &dword_28898C0 )
        v203 = (unsigned int *)(v327 - 4);
            v204 = __ldrex(v203);
          while ( __strex(v204 - 1, v203) );
          v204 = (*v203)--;
        if ( v204 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v23);
      v24 = (void *)(v326 - 12);
      if ( (int *)(v326 - 12) != &dword_28898C0 )
        v205 = (unsigned int *)(v326 - 4);
            v206 = __ldrex(v205);
          while ( __strex(v206 - 1, v205) );
          v206 = (*v205)--;
        if ( v206 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v24);
      v25 = (void *)(v325 - 12);
      if ( (int *)(v325 - 12) != &dword_28898C0 )
        v207 = (unsigned int *)(v325 - 4);
            v208 = __ldrex(v207);
          while ( __strex(v208 - 1, v207) );
          v208 = (*v207)--;
        if ( v208 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v25);
    sub_119C884((void **)&v324, "hostName");
    v26 = (*(int (**)(void))(**(_DWORD **)v3 + 4))();
    v27 = (void *)(v324 - 12);
    if ( (int *)(v324 - 12) != &dword_28898C0 )
      v165 = (unsigned int *)(v324 - 4);
          v166 = __ldrex(v165);
        while ( __strex(v166 - 1, v165) );
        v166 = (*v165)--;
      if ( v166 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v27);
    if ( v26 == 1 )
      sub_119C884((void **)&v321, "hostName");
      v28 = web::json::value::at((int)v3, (const void **)&v321);
      v29 = (int *)web::json::value::as_string((web::json::value *)v28);
      sub_119C854(&v322, v29);
      utility::conversions::to_utf8string(&v323, &v322);
        (int *)v2 + 4,
        &v323);
      v30 = (void *)(v323 - 12);
      if ( (int *)(v323 - 12) != &dword_28898C0 )
        v209 = (unsigned int *)(v323 - 4);
            v210 = __ldrex(v209);
          while ( __strex(v210 - 1, v209) );
          v210 = (*v209)--;
        if ( v210 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v30);
      v31 = (void *)(v322 - 12);
      if ( (int *)(v322 - 12) != &dword_28898C0 )
        v211 = (unsigned int *)(v322 - 4);
            v212 = __ldrex(v211);
          while ( __strex(v212 - 1, v211) );
          v212 = (*v211)--;
        if ( v212 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v31);
      v32 = (void *)(v321 - 12);
      if ( (int *)(v321 - 12) != &dword_28898C0 )
        v213 = (unsigned int *)(v321 - 4);
            v214 = __ldrex(v213);
          while ( __strex(v214 - 1, v213) );
          v214 = (*v213)--;
        if ( v214 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v32);
    sub_119C884((void **)&v320, "ownerId");
    v33 = (*(int (**)(void))(**(_DWORD **)v3 + 4))();
    v34 = (void *)(v320 - 12);
    if ( (int *)(v320 - 12) != &dword_28898C0 )
      v167 = (unsigned int *)(v320 - 4);
          v168 = __ldrex(v167);
        while ( __strex(v168 - 1, v167) );
        v168 = (*v167)--;
      if ( v168 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v34);
    if ( v33 == 1 )
      sub_119C884((void **)&v317, "ownerId");
      v35 = web::json::value::at((int)v3, (const void **)&v317);
      v36 = (int *)web::json::value::as_string((web::json::value *)v35);
      sub_119C854(&v318, v36);
      utility::conversions::to_utf8string(&v319, &v318);
        (int *)v2 + 3,
        &v319);
      v37 = (void *)(v319 - 12);
      if ( (int *)(v319 - 12) != &dword_28898C0 )
        v215 = (unsigned int *)(v319 - 4);
            v216 = __ldrex(v215);
          while ( __strex(v216 - 1, v215) );
          v216 = (*v215)--;
        if ( v216 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v37);
      v38 = (void *)(v318 - 12);
      if ( (int *)(v318 - 12) != &dword_28898C0 )
        v217 = (unsigned int *)(v318 - 4);
            v218 = __ldrex(v217);
          while ( __strex(v218 - 1, v217) );
          v218 = (*v217)--;
        if ( v218 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v38);
      v39 = (void *)(v317 - 12);
      if ( (int *)(v317 - 12) != &dword_28898C0 )
        v219 = (unsigned int *)(v317 - 4);
            v220 = __ldrex(v219);
          while ( __strex(v220 - 1, v219) );
          v220 = (*v219)--;
        if ( v220 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v39);
    sub_119C884((void **)&v316, "rakNetGUID");
    v40 = (*(int (**)(void))(**(_DWORD **)v3 + 4))();
    v41 = (void *)(v316 - 12);
    if ( (int *)(v316 - 12) != &dword_28898C0 )
      v169 = (unsigned int *)(v316 - 4);
          v170 = __ldrex(v169);
        while ( __strex(v170 - 1, v169) );
        v170 = (*v169)--;
      if ( v170 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v41);
    if ( v40 == 1 )
      sub_119C884((void **)&v313, "rakNetGUID");
      v42 = web::json::value::at((int)v3, (const void **)&v313);
      v43 = (int *)web::json::value::as_string((web::json::value *)v42);
      sub_119C854(&v314, v43);
      utility::conversions::to_utf8string(&v315, &v314);
        (int *)v2 + 7,
        &v315);
      v44 = (void *)(v315 - 12);
      if ( (int *)(v315 - 12) != &dword_28898C0 )
        v221 = (unsigned int *)(v315 - 4);
            v222 = __ldrex(v221);
          while ( __strex(v222 - 1, v221) );
          v222 = (*v221)--;
        if ( v222 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v44);
      v45 = (void *)(v314 - 12);
      if ( (int *)(v314 - 12) != &dword_28898C0 )
        v223 = (unsigned int *)(v314 - 4);
            v224 = __ldrex(v223);
          while ( __strex(v224 - 1, v223) );
          v224 = (*v223)--;
        if ( v224 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v45);
      v46 = (void *)(v313 - 12);
      if ( (int *)(v313 - 12) != &dword_28898C0 )
        v225 = (unsigned int *)(v313 - 4);
            v226 = __ldrex(v225);
          while ( __strex(v226 - 1, v225) );
          v226 = (*v225)--;
        if ( v226 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v46);
    sub_119C884((void **)&v312, "version");
    v47 = (*(int (**)(void))(**(_DWORD **)v3 + 4))();
    v48 = (void *)(v312 - 12);
    if ( (int *)(v312 - 12) != &dword_28898C0 )
      v171 = (unsigned int *)(v312 - 4);
          v172 = __ldrex(v171);
        while ( __strex(v172 - 1, v171) );
        v172 = (*v171)--;
      if ( v172 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v48);
    if ( v47 == 1 )
      sub_119C884((void **)&v309, "version");
      v49 = web::json::value::at((int)v3, (const void **)&v309);
      v50 = (int *)web::json::value::as_string((web::json::value *)v49);
      sub_119C854(&v310, v50);
      utility::conversions::to_utf8string(&v311, &v310);
        (int *)v2 + 10,
        &v311);
      v51 = (void *)(v311 - 12);
      if ( (int *)(v311 - 12) != &dword_28898C0 )
        v227 = (unsigned int *)(v311 - 4);
            v228 = __ldrex(v227);
          while ( __strex(v228 - 1, v227) );
          v228 = (*v227)--;
        if ( v228 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v51);
      v52 = (void *)(v310 - 12);
      if ( (int *)(v310 - 12) != &dword_28898C0 )
        v229 = (unsigned int *)(v310 - 4);
            v230 = __ldrex(v229);
          while ( __strex(v230 - 1, v229) );
          v230 = (*v229)--;
        if ( v230 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v52);
      v53 = (void *)(v309 - 12);
      if ( (int *)(v309 - 12) != &dword_28898C0 )
        v231 = (unsigned int *)(v309 - 4);
            v232 = __ldrex(v231);
          while ( __strex(v232 - 1, v231) );
          v232 = (*v231)--;
        if ( v232 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v53);
    sub_119C884((void **)&v308, "protocol");
    if ( (*(int (**)(void))(**(_DWORD **)v3 + 4))() == 1 )
      sub_119C884((void **)&v307, "protocol");
      v54 = web::json::value::at((int)v3, (const void **)&v307);
      v55 = web::json::value::is_integer((web::json::value *)v54);
      v56 = (void *)(v307 - 12);
      if ( (int *)(v307 - 12) != &dword_28898C0 )
        v57 = (unsigned int *)(v307 - 4);
            v58 = __ldrex(v57);
          while ( __strex(v58 - 1, v57) );
          v58 = (*v57)--;
        if ( v58 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v56);
    else
      v55 = 0;
    v59 = (void *)(v308 - 12);
    if ( (int *)(v308 - 12) != &dword_28898C0 )
      v173 = (unsigned int *)(v308 - 4);
          v174 = __ldrex(v173);
        while ( __strex(v174 - 1, v173) );
        v174 = (*v173)--;
      if ( v174 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v59);
    if ( v55 == 1 )
      sub_119C884((void **)&v306, "protocol");
      v60 = web::json::value::at((int)v3, (const void **)&v306);
      v61 = web::json::value::as_integer((web::json::value *)v60);
      v62 = v306;
      *((_DWORD *)v2 + 17) = v61;
      v63 = (void *)(v62 - 12);
      if ( (int *)(v62 - 12) != &dword_28898C0 )
        v233 = (unsigned int *)(v62 - 4);
            v234 = __ldrex(v233);
          while ( __strex(v234 - 1, v233) );
          v234 = (*v233)--;
        if ( v234 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v63);
    sub_119C884((void **)&v305, "MemberCount");
      sub_119C884((void **)&v304, "MemberCount");
      v64 = web::json::value::at((int)v3, (const void **)&v304);
      v65 = web::json::value::is_integer((web::json::value *)v64);
      v66 = (void *)(v304 - 12);
      if ( (int *)(v304 - 12) != &dword_28898C0 )
        v67 = (unsigned int *)(v304 - 4);
            v68 = __ldrex(v67);
          while ( __strex(v68 - 1, v67) );
          v68 = (*v67)--;
        if ( v68 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v66);
      v65 = 0;
    v69 = (void *)(v305 - 12);
    if ( (int *)(v305 - 12) != &dword_28898C0 )
      v175 = (unsigned int *)(v305 - 4);
          v176 = __ldrex(v175);
        while ( __strex(v176 - 1, v175) );
        v176 = (*v175)--;
      if ( v176 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v69);
    if ( v65 == 1 )
      sub_119C884((void **)&v303, "MemberCount");
      v70 = web::json::value::at((int)v3, (const void **)&v303);
      v71 = web::json::value::as_integer((web::json::value *)v70);
      v72 = v303;
      *((_DWORD *)v2 + 19) = v71;
      v73 = (void *)(v72 - 12);
      if ( (int *)(v72 - 12) != &dword_28898C0 )
        v235 = (unsigned int *)(v72 - 4);
            v236 = __ldrex(v235);
          while ( __strex(v236 - 1, v235) );
          v236 = (*v235)--;
        if ( v236 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v73);
    sub_119C884((void **)&v302, "MaxMemberCount");
      sub_119C884((void **)&v301, "MaxMemberCount");
      v74 = web::json::value::at((int)v3, (const void **)&v301);
      v75 = web::json::value::is_integer((web::json::value *)v74);
      v76 = (void *)(v301 - 12);
      if ( (int *)(v301 - 12) != &dword_28898C0 )
        v77 = (unsigned int *)(v301 - 4);
            v78 = __ldrex(v77);
          while ( __strex(v78 - 1, v77) );
          v78 = (*v77)--;
        if ( v78 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v76);
      v75 = 0;
    v79 = (void *)(v302 - 12);
    if ( (int *)(v302 - 12) != &dword_28898C0 )
      v177 = (unsigned int *)(v302 - 4);
          v178 = __ldrex(v177);
        while ( __strex(v178 - 1, v177) );
        v178 = (*v177)--;
      if ( v178 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v79);
    if ( v75 == 1 )
      sub_119C884((void **)&v300, "MaxMemberCount");
      v80 = web::json::value::at((int)v3, (const void **)&v300);
      v81 = web::json::value::as_integer((web::json::value *)v80);
      v82 = v300;
      *((_DWORD *)v2 + 18) = v81;
      v83 = (void *)(v82 - 12);
      if ( (int *)(v82 - 12) != &dword_28898C0 )
        v237 = (unsigned int *)(v82 - 4);
            v238 = __ldrex(v237);
          while ( __strex(v238 - 1, v237) );
          v238 = (*v237)--;
        if ( v238 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v83);
    *(_DWORD *)v4 = 0;
    *((_DWORD *)v4 + 1) = 0;
    sub_119C884((void **)&v299, "RealmId");
      sub_119C884((void **)&v298, "RealmId");
      v84 = web::json::value::at((int)v3, (const void **)&v298);
      v85 = 0;
      if ( !web::json::value::type((web::json::value *)v84) )
        v85 = 1;
      v86 = (void *)(v298 - 12);
      if ( (int *)(v298 - 12) != &dword_28898C0 )
        v87 = (unsigned int *)(v298 - 4);
            v88 = __ldrex(v87);
          while ( __strex(v88 - 1, v87) );
          v88 = (*v87)--;
        if ( v88 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v86);
    v89 = (void *)(v299 - 12);
    if ( (int *)(v299 - 12) != &dword_28898C0 )
      v179 = (unsigned int *)(v299 - 4);
          v180 = __ldrex(v179);
        while ( __strex(v180 - 1, v179) );
        v180 = (*v179)--;
      if ( v180 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v89);
    if ( v85 == 1 )
      sub_119C884((void **)&v297, "RealmId");
      v90 = web::json::value::at((int)v3, (const void **)&v297);
      _R0 = web::json::value::as_number((web::json::value *)v90);
      _R1 = *(_DWORD *)(_R0 + 8);
      if ( _R1 == 2 )
        __asm
          VLDR            D0, [R0]
          VMOV            R0, R1, D0
        LODWORD(v98) = _aeabi_d2lz(_R0);
        v98 = *(_QWORD *)_R0;
      *(_QWORD *)v4 = v98;
      v99 = (void *)(v297 - 12);
      if ( (int *)(v297 - 12) != &dword_28898C0 )
        v239 = (unsigned int *)(v297 - 4);
            v240 = __ldrex(v239);
          while ( __strex(v240 - 1, v239) );
          v240 = (*v239)--;
        if ( v240 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v99);
    sub_119C884((void **)&v296, "ThirdPartyServerId");
      sub_119C884((void **)&v295, "ThirdPartyServerId");
      v100 = web::json::value::at((int)v3, (const void **)&v295);
      v101 = 0;
      if ( web::json::value::type((web::json::value *)v100) == 2 )
        v101 = 1;
      v102 = (void *)(v295 - 12);
      if ( (int *)(v295 - 12) != &dword_28898C0 )
        v103 = (unsigned int *)(v295 - 4);
            v104 = __ldrex(v103);
          while ( __strex(v104 - 1, v103) );
          v104 = (*v103)--;
        if ( v104 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v102);
    v105 = (void *)(v296 - 12);
    if ( (int *)(v296 - 12) != &dword_28898C0 )
      v181 = (unsigned int *)(v296 - 4);
          v182 = __ldrex(v181);
        while ( __strex(v182 - 1, v181) );
        v182 = (*v181)--;
      if ( v182 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v105);
    if ( v101 == 1 )
      sub_119C884((void **)&v292, "ThirdPartyServerId");
      v106 = web::json::value::at((int)v3, (const void **)&v292);
      v107 = (int *)web::json::value::as_string((web::json::value *)v106);
      sub_119C854(&v293, v107);
      utility::conversions::to_utf8string(&v294, &v293);
        (int *)v2 + 14,
        &v294);
      v108 = (void *)(v294 - 12);
      if ( (int *)(v294 - 12) != &dword_28898C0 )
        v241 = (unsigned int *)(v294 - 4);
            v242 = __ldrex(v241);
          while ( __strex(v242 - 1, v241) );
          v242 = (*v241)--;
        if ( v242 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v108);
      v109 = (void *)(v293 - 12);
      if ( (int *)(v293 - 12) != &dword_28898C0 )
        v243 = (unsigned int *)(v293 - 4);
            v244 = __ldrex(v243);
          while ( __strex(v244 - 1, v243) );
          v244 = (*v243)--;
        if ( v244 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v109);
      v110 = (void *)(v292 - 12);
      if ( (int *)(v292 - 12) != &dword_28898C0 )
        v245 = (unsigned int *)(v292 - 4);
            v246 = __ldrex(v245);
          while ( __strex(v246 - 1, v245) );
          v246 = (*v245)--;
        if ( v246 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v110);
    sub_119C884((void **)&v291, "ThirdPartyServerIp");
      sub_119C884((void **)&v290, "ThirdPartyServerIp");
      v111 = web::json::value::at((int)v3, (const void **)&v290);
      v112 = 0;
      if ( web::json::value::type((web::json::value *)v111) == 2 )
        v112 = 1;
      v113 = (void *)(v290 - 12);
      if ( (int *)(v290 - 12) != &dword_28898C0 )
        v114 = (unsigned int *)(v290 - 4);
            v115 = __ldrex(v114);
          while ( __strex(v115 - 1, v114) );
          v115 = (*v114)--;
        if ( v115 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v113);
    v116 = (void *)(v291 - 12);
    if ( (int *)(v291 - 12) != &dword_28898C0 )
      v183 = (unsigned int *)(v291 - 4);
          v184 = __ldrex(v183);
        while ( __strex(v184 - 1, v183) );
        v184 = (*v183)--;
      if ( v184 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v116);
    if ( v112 == 1 )
      sub_119C884((void **)&v287, "ThirdPartyServerIp");
      v117 = web::json::value::at((int)v3, (const void **)&v287);
      v118 = (int *)web::json::value::as_string((web::json::value *)v117);
      sub_119C854(&v288, v118);
      utility::conversions::to_utf8string(&v289, &v288);
        (int *)v2 + 15,
        &v289);
      v119 = (void *)(v289 - 12);
      if ( (int *)(v289 - 12) != &dword_28898C0 )
        v247 = (unsigned int *)(v289 - 4);
            v248 = __ldrex(v247);
          while ( __strex(v248 - 1, v247) );
          v248 = (*v247)--;
        if ( v248 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v119);
      v120 = (void *)(v288 - 12);
      if ( (int *)(v288 - 12) != &dword_28898C0 )
        v249 = (unsigned int *)(v288 - 4);
            v250 = __ldrex(v249);
          while ( __strex(v250 - 1, v249) );
          v250 = (*v249)--;
        if ( v250 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v120);
      v121 = (void *)(v287 - 12);
      if ( (int *)(v287 - 12) != &dword_28898C0 )
        v251 = (unsigned int *)(v287 - 4);
            v252 = __ldrex(v251);
          while ( __strex(v252 - 1, v251) );
          v252 = (*v251)--;
        if ( v252 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v121);
    sub_119C884((void **)&v286, "ThirdPartyServerPort");
      sub_119C884((void **)&v285, "ThirdPartyServerPort");
      v122 = web::json::value::at((int)v3, (const void **)&v285);
      v123 = 0;
      if ( !web::json::value::type((web::json::value *)v122) )
        v123 = 1;
      v124 = (void *)(v285 - 12);
      if ( (int *)(v285 - 12) != &dword_28898C0 )
        v125 = (unsigned int *)(v285 - 4);
            v126 = __ldrex(v125);
          while ( __strex(v126 - 1, v125) );
          v126 = (*v125)--;
        if ( v126 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v124);
    v127 = (void *)(v286 - 12);
    if ( (int *)(v286 - 12) != &dword_28898C0 )
      v185 = (unsigned int *)(v286 - 4);
          v186 = __ldrex(v185);
        while ( __strex(v186 - 1, v185) );
        v186 = (*v185)--;
      if ( v186 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v127);
    if ( v123 == 1 )
      sub_119C884((void **)&v284, "ThirdPartyServerPort");
      v128 = web::json::value::at((int)v3, (const void **)&v284);
      _R0 = web::json::value::as_number((web::json::value *)v128);
        v132 = _aeabi_d2lz(_R0);
        v132 = *(_DWORD *)_R0;
      v133 = v284;
      *((_DWORD *)v2 + 16) = v132;
      v134 = (void *)(v133 - 12);
      if ( (int *)(v133 - 12) != &dword_28898C0 )
        v253 = (unsigned int *)(v133 - 4);
            v254 = __ldrex(v253);
          while ( __strex(v254 - 1, v253) );
          v254 = (*v253)--;
        if ( v254 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v134);
    sub_119C884((void **)&v283, "BroadcastSetting");
      sub_119C884((void **)&v282, "BroadcastSetting");
      v135 = web::json::value::at((int)v3, (const void **)&v282);
      v136 = web::json::value::is_integer((web::json::value *)v135);
      v137 = (void *)(v282 - 12);
      if ( (int *)(v282 - 12) != &dword_28898C0 )
        v138 = (unsigned int *)(v282 - 4);
            v139 = __ldrex(v138);
          while ( __strex(v139 - 1, v138) );
          v139 = (*v138)--;
        if ( v139 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v137);
      v136 = 0;
    v140 = (void *)(v283 - 12);
    if ( (int *)(v283 - 12) != &dword_28898C0 )
      v187 = (unsigned int *)(v283 - 4);
          v188 = __ldrex(v187);
        while ( __strex(v188 - 1, v187) );
        v188 = (*v187)--;
      if ( v188 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v140);
    if ( v136 == 1 )
      sub_119C884((void **)&v281, "BroadcastSetting");
      v141 = web::json::value::at((int)v3, (const void **)&v281);
      v142 = web::json::value::as_integer((web::json::value *)v141);
      v143 = v281;
      *((_DWORD *)v2 + 21) = v142;
      v144 = (void *)(v143 - 12);
      if ( (int *)(v143 - 12) != &dword_28898C0 )
        v255 = (unsigned int *)(v143 - 4);
            v256 = __ldrex(v255);
          while ( __strex(v256 - 1, v255) );
          v256 = (*v255)--;
        if ( v256 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v144);
    sub_119C884((void **)&v280, "SupportedConnections");
      sub_119C884((void **)&v279, "SupportedConnections");
      v145 = web::json::value::at((int)v3, (const void **)&v279);
      v146 = 0;
      if ( web::json::value::type((web::json::value *)v145) == 4 )
        v146 = 1;
      v147 = (void *)(v279 - 12);
      if ( (int *)(v279 - 12) != &dword_28898C0 )
        v148 = (unsigned int *)(v279 - 4);
            v149 = __ldrex(v148);
          while ( __strex(v149 - 1, v148) );
          v149 = (*v148)--;
        if ( v149 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v147);
    v150 = (void *)(v280 - 12);
    if ( (int *)(v280 - 12) != &dword_28898C0 )
      v189 = (unsigned int *)(v280 - 4);
          v190 = __ldrex(v189);
        while ( __strex(v190 - 1, v189) );
        v190 = (*v189)--;
      if ( v190 <= 0 )
        j_j_j_j_j__ZdlPv_9_1(v150);
    if ( v146 == 1 )
      sub_119C884((void **)&v276, "SupportedConnections");
      v151 = web::json::value::at((int)v3, (const void **)&v276);
      v152 = (__int64 *)web::json::value::as_array((web::json::value *)v151);
      std::vector<web::json::value,std::allocator<web::json::value>>::vector((int)&v277, v152);
      v153 = (void *)(v276 - 12);
      if ( (int *)(v276 - 12) != &dword_28898C0 )
        v257 = (unsigned int *)(v276 - 4);
            v258 = __ldrex(v257);
          while ( __strex(v258 - 1, v257) );
          v258 = (*v257)--;
        if ( v258 <= 0 )
          j_j_j_j_j__ZdlPv_9_1(v153);
      HIDWORD(v154) = v277;
      v259 = v278;
      if ( v277 != v278 )
          web::json::value::value((web::json::value *)&v275, (const web::json::value *)HIDWORD(v154));
          Social::GameConnectionInfo::fromJson((Social::GameConnectionInfo *)&v261, (const web::json::value *)&v275);
          v155 = *(_QWORD *)((char *)v2 + 4);
          if ( (_DWORD)v155 == HIDWORD(v155) )
          {
            std::vector<Social::GameConnectionInfo,std::allocator<Social::GameConnectionInfo>>::_M_emplace_back_aux<Social::GameConnectionInfo>(
              (unsigned __int64 *)v2,
              (int)&v261);
          }
          else
            *(_WORD *)v155 = v261;
            *(_DWORD *)(v155 + 4) = v262;
            v262 = &unk_28898CC;
            *(_DWORD *)(v155 + 8) = v263;
            v263 = &unk_28898CC;
            *(_DWORD *)(v155 + 12) = v264;
            *(_DWORD *)(v155 + 16) = v265;
            v265 = &unk_28898CC;
            v156 = v266;
            *(_DWORD *)(v155 + 20) = v266;
            v157 = v267;
            *(_DWORD *)(v155 + 24) = v267;
            v158 = v268;
            *(_DWORD *)(v155 + 28) = v268;
            *(_DWORD *)(v155 + 32) = v269;
            *(_QWORD *)(v155 + 36) = v270;
            if ( &v271 == v266 )
            {
              v156 = (int *)(v155 + 44);
              *(_DWORD *)(v155 + 20) = v155 + 44;
              *(_DWORD *)(v155 + 44) = v271;
            }
            if ( v158 )
              v156[*(_DWORD *)(HIDWORD(v155) + 8) % v157] = v155 + 28;
            HIDWORD(v270) = 0;
            v271 = 0;
            v266 = &v271;
            v267 = 1;
            v268 = 0;
            v269 = 0;
            *(_DWORD *)(v155 + 48) = v272;
            v272 = &unk_28898CC;
            *(_DWORD *)(v155 + 52) = v273;
            v273 = &unk_28898CC;
            v2 = v260;
            *(_BYTE *)(v155 + 56) = v274;
            *((_DWORD *)v260 + 1) += 60;
          Social::GameConnectionInfo::~GameConnectionInfo((Social::GameConnectionInfo *)&v261);
          if ( v275 )
            (*(void (**)(void))(*(_DWORD *)v275 + 96))();
          HIDWORD(v154) += 4;
        while ( v259 != HIDWORD(v154) );
        v154 = *(_QWORD *)&v277;
        if ( v277 != v278 )
            if ( *(_DWORD *)v154 )
              (*(void (**)(void))(**(_DWORD **)v154 + 96))();
            *(_DWORD *)v154 = 0;
            LODWORD(v154) = v154 + 4;
          while ( HIDWORD(v154) != (_DWORD)v154 );
          HIDWORD(v154) = v277;
      if ( HIDWORD(v154) )
        operator delete((void *)HIDWORD(v154));
  }
}


int __fastcall Social::Events::Event::Event(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r7@1
  int v5; // r0@1

  v2 = a2;
  v3 = a1;
  *(_DWORD *)a1 = *(_DWORD *)a2;
  sub_21E8AF4((int *)(a1 + 4), (int *)(a2 + 4));
  *(_QWORD *)(v3 + 8) = *(_QWORD *)(v2 + 8);
  *(_DWORD *)(v3 + 16) = 0;
  v4 = v3 + 16;
  *(_DWORD *)(v4 + 4) = *(_DWORD *)(v2 + 20);
  *(_DWORD *)(v4 + 8) = 0;
  *(_DWORD *)(v4 + 12) = *(_DWORD *)(v2 + 28);
  *(_QWORD *)(v4 + 16) = *(_QWORD *)(v2 + 32);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_assign<std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::(std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>> const&)::{lambda(std::__detail::_Hash_node<std::pair<std::string const,Social::Events::Property>,true> const*)#1}>(
    (unsigned int *)(v3 + 16),
    v2 + 16);
  *(_DWORD *)(v3 + 44) = 0;
  v5 = v3 + 44;
  *(_DWORD *)(v5 + 4) = *(_DWORD *)(v2 + 48);
  *(_DWORD *)(v5 + 8) = 0;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)(v2 + 56);
  *(_QWORD *)(v5 + 16) = *(_QWORD *)(v2 + 60);
  std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Measurement>,std::allocator<std::pair<std::string const,Social::Events::Measurement>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_assign<std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Measurement>,std::allocator<std::pair<std::string const,Social::Events::Measurement>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::(std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Measurement>,std::allocator<std::pair<std::string const,Social::Events::Measurement>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>> const&)::{lambda(std::__detail::_Hash_node<std::pair<std::string const,Social::Events::Measurement>,true> const*)#1}>(
    (unsigned int *)(v3 + 44),
    v2 + 44);
  return v3;
}


Social::MultiplayerGameInfo *__fastcall Social::MultiplayerGameInfo::~MultiplayerGameInfo(Social::MultiplayerGameInfo *this)
{
  Social::MultiplayerGameInfo *v1; // r4@1
  int v2; // r1@1
  void *v3; // r0@1
  int v4; // r1@2
  void *v5; // r0@2
  int v6; // r1@3
  void *v7; // r0@3
  int v8; // r1@4
  void *v9; // r0@4
  int v10; // r1@5
  void *v11; // r0@5
  int v12; // r1@6
  void *v13; // r0@6
  int v14; // r1@7
  void *v15; // r0@7
  int v16; // r1@8
  void *v17; // r0@8
  int v18; // r1@9
  void *v19; // r0@9
  int v20; // r1@10
  void *v21; // r0@10
  Social::GameConnectionInfo *v22; // r0@11
  Social::GameConnectionInfo *v23; // r5@11
  unsigned int *v25; // r2@17
  signed int v26; // r1@19
  unsigned int *v27; // r2@21
  signed int v28; // r1@23
  unsigned int *v29; // r2@25
  signed int v30; // r1@27
  unsigned int *v31; // r2@29
  signed int v32; // r1@31
  unsigned int *v33; // r2@33
  signed int v34; // r1@35
  unsigned int *v35; // r2@37
  signed int v36; // r1@39
  unsigned int *v37; // r2@41
  signed int v38; // r1@43
  unsigned int *v39; // r2@45
  signed int v40; // r1@47
  unsigned int *v41; // r2@49
  signed int v42; // r1@51
  unsigned int *v43; // r2@53
  signed int v44; // r1@55

  v1 = this;
  v2 = *((_DWORD *)this + 15);
  v3 = (void *)(v2 - 12);
  if ( (int *)(v2 - 12) != &dword_28898C0 )
  {
    v25 = (unsigned int *)(v2 - 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v26 = __ldrex(v25);
      while ( __strex(v26 - 1, v25) );
    }
    else
      v26 = (*v25)--;
    if ( v26 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v3);
  }
  v4 = *((_DWORD *)v1 + 14);
  v5 = (void *)(v4 - 12);
  if ( (int *)(v4 - 12) != &dword_28898C0 )
    v27 = (unsigned int *)(v4 - 4);
        v28 = __ldrex(v27);
      while ( __strex(v28 - 1, v27) );
      v28 = (*v27)--;
    if ( v28 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v5);
  v6 = *((_DWORD *)v1 + 10);
  v7 = (void *)(v6 - 12);
  if ( (int *)(v6 - 12) != &dword_28898C0 )
    v29 = (unsigned int *)(v6 - 4);
        v30 = __ldrex(v29);
      while ( __strex(v30 - 1, v29) );
      v30 = (*v29)--;
    if ( v30 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v7);
  v8 = *((_DWORD *)v1 + 9);
  v9 = (void *)(v8 - 12);
  if ( (int *)(v8 - 12) != &dword_28898C0 )
    v31 = (unsigned int *)(v8 - 4);
        v32 = __ldrex(v31);
      while ( __strex(v32 - 1, v31) );
      v32 = (*v31)--;
    if ( v32 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v9);
  v10 = *((_DWORD *)v1 + 8);
  v11 = (void *)(v10 - 12);
  if ( (int *)(v10 - 12) != &dword_28898C0 )
    v33 = (unsigned int *)(v10 - 4);
        v34 = __ldrex(v33);
      while ( __strex(v34 - 1, v33) );
      v34 = (*v33)--;
    if ( v34 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v11);
  v12 = *((_DWORD *)v1 + 7);
  v13 = (void *)(v12 - 12);
  if ( (int *)(v12 - 12) != &dword_28898C0 )
    v35 = (unsigned int *)(v12 - 4);
        v36 = __ldrex(v35);
      while ( __strex(v36 - 1, v35) );
      v36 = (*v35)--;
    if ( v36 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v13);
  v14 = *((_DWORD *)v1 + 6);
  v15 = (void *)(v14 - 12);
  if ( (int *)(v14 - 12) != &dword_28898C0 )
    v37 = (unsigned int *)(v14 - 4);
        v38 = __ldrex(v37);
      while ( __strex(v38 - 1, v37) );
      v38 = (*v37)--;
    if ( v38 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v15);
  v16 = *((_DWORD *)v1 + 5);
  v17 = (void *)(v16 - 12);
  if ( (int *)(v16 - 12) != &dword_28898C0 )
    v39 = (unsigned int *)(v16 - 4);
        v40 = __ldrex(v39);
      while ( __strex(v40 - 1, v39) );
      v40 = (*v39)--;
    if ( v40 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v17);
  v18 = *((_DWORD *)v1 + 4);
  v19 = (void *)(v18 - 12);
  if ( (int *)(v18 - 12) != &dword_28898C0 )
    v41 = (unsigned int *)(v18 - 4);
        v42 = __ldrex(v41);
      while ( __strex(v42 - 1, v41) );
      v42 = (*v41)--;
    if ( v42 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v19);
  v20 = *((_DWORD *)v1 + 3);
  v21 = (void *)(v20 - 12);
  if ( (int *)(v20 - 12) != &dword_28898C0 )
    v43 = (unsigned int *)(v20 - 4);
        v44 = __ldrex(v43);
      while ( __strex(v44 - 1, v43) );
      v44 = (*v43)--;
    if ( v44 <= 0 )
      j_j_j_j_j__ZdlPv_9_1(v21);
  v23 = (Social::GameConnectionInfo *)(*(_QWORD *)v1 >> 32);
  v22 = (Social::GameConnectionInfo *)*(_QWORD *)v1;
  if ( v22 != v23 )
    do
      v22 = (Social::GameConnectionInfo *)((char *)Social::GameConnectionInfo::~GameConnectionInfo(v22) + 60);
    while ( v23 != v22 );
    v22 = *(Social::GameConnectionInfo **)v1;
  if ( v22 )
    operator delete((void *)v22);
  return v1;
}


int __fastcall Social::MultiplayerServiceManager::getRealmWorld(Social::MultiplayerServiceManager *this)
{
  Social::MultiplayerService **v1; // r4@1
  Social::MultiplayerService **v2; // r5@1
  int v3; // r6@2
  int result; // r0@4

  v1 = (Social::MultiplayerService **)(*(_QWORD *)this >> 32);
  v2 = (Social::MultiplayerService **)*(_QWORD *)this;
  if ( v2 == v1 )
  {
LABEL_4:
    result = 0;
  }
  else
    while ( 1 )
    {
      v3 = (int)(v2 + 1);
      if ( !Social::MultiplayerService::getServiceId(*v2) )
        break;
      ++v2;
      if ( v1 == (Social::MultiplayerService **)v3 )
        goto LABEL_4;
    }
    result = (*(int (**)(void))(*(_DWORD *)*v2 + 120))();
  return result;
}


int __fastcall Social::MultiplayerService::needToHandleInvite(Social::MultiplayerService *this)
{
  return 0;
}


signed int __fastcall Social::MultiplayerService::_isUPNPv4Valid(Social::MultiplayerService *this)
{
  Social::MultiplayerService *v1; // r5@1
  UPNPInterface *v2; // r0@1
  signed int v3; // r4@2
  char *v4; // r0@3
  int v5; // r1@3
  int v6; // r5@3
  signed int result; // r0@5

  v1 = this;
  v2 = (UPNPInterface *)*((_DWORD *)this + 19);
  if ( v2 )
  {
    v3 = 0;
    if ( UPNPInterface::getPortMappingv4(v2)[268] )
    {
      v4 = UPNPInterface::getPortMappingv4(*((UPNPInterface **)v1 + 19));
      v5 = *((_DWORD *)v1 + 18);
      v6 = *((_WORD *)v4 + 130);
      if ( v6 == (*(int (__fastcall **)(int))(*(_DWORD *)v5 + 64))(v5) )
        v3 = 1;
    }
    result = v3;
  }
  else
    result = 0;
  return result;
}


int __fastcall Social::UserManager::needToShowOnlinePlayNotificationScreen(Social::UserManager *this)
{
  return 0;
}


signed int __fastcall Social::Events::EventManager::setCommonProperty<int>(int a1, int a2, int **a3, int *a4)
{
  int *v4; // r4@1
  int v5; // r7@1
  int v6; // r5@1
  int *v7; // r6@1
  int v9; // [sp+0h] [bp-28h]@1

  v4 = (int *)a3;
  v5 = a2;
  v6 = a1;
  v7 = a4;
  Social::Events::EventManager::removeCommonProperty(a2, a3);
  sub_21E8AF4((int *)v6, v4);
  Json::Value::Value((Json::Value *)(v6 + 8), *v7);
  return std::_Hashtable<std::string,std::pair<std::string const,Social::Events::Property>,std::allocator<std::pair<std::string const,Social::Events::Property>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::_M_emplace<std::string &,Social::Events::Property&>(
           (int)&v9,
           (unsigned __int64 *)(v5 + 40),
           v4,
           v6);
}


int __fastcall Social::XboxLiveUserManager::isBlockedPlayer(int a1, int **a2)
{
  int v2; // r0@1
  int result; // r0@2

  v2 = std::_Hashtable<std::string,std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>,std::allocator<std::pair<std::string const,std::shared_ptr<Social::XboxLiveUserProfileData>>>,std::__detail::_Select1st,std::equal_to<std::string>,std::hash<std::string>,std::__detail::_Mod_range_hashing,std::__detail::_Default_ranged_hash,std::__detail::_Prime_rehash_policy,std::__detail::_Hashtable_traits<true,false,true>>::find(
         (unsigned __int64 *)(a1 + 80),
         a2);
  if ( v2 )
  {
    result = *(_DWORD *)(*(_DWORD *)(v2 + 8) + 28);
    if ( result != 1 )
      result = 0;
  }
  else
    result = 0;
  return result;
}


int __fastcall Social::MultiplayerXBL::isBlockedPlayer(int a1, int **a2)
{
  int **v2; // r4@1
  int v3; // r0@1
  int v4; // r4@1
  int v5; // r5@1
  unsigned int *v6; // r1@2
  unsigned int v7; // r0@4
  unsigned int *v8; // r6@8
  unsigned int v9; // r0@10
  Social::User *v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@1

  v2 = a2;
  Social::UserManager::getPrimaryUser((Social::UserManager *)&v11, *(_DWORD *)(a1 + 44));
  v3 = Social::User::getLiveUser(v11);
  v4 = Social::XboxLiveUserManager::isBlockedPlayer(v3, v2);
  v5 = v12;
  if ( v12 )
  {
    v6 = (unsigned int *)(v12 + 4);
    if ( &pthread_create )
    {
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 - 1, v6) );
    }
    else
      v7 = (*v6)--;
    if ( v7 == 1 )
      v8 = (unsigned int *)(v5 + 8);
      (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 8))(v5);
      if ( &pthread_create )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 - 1, v8) );
      }
      else
        v9 = (*v8)--;
      if ( v9 == 1 )
        (*(void (__fastcall **)(int))(*(_DWORD *)v5 + 12))(v5);
  }
  return v4;
}
